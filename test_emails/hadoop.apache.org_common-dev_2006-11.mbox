From MAILER-DAEMON Tue Oct 31 23:08:12 2006
Return-Path: 
 <hadoop-dev-return-4687-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51600 invoked from network); 31 Oct 2006 23:08:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 23:08:12 -0000
Received: (qmail 56297 invoked by uid 500); 31 Oct 2006 23:08:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56248 invoked by uid 500); 31 Oct 2006 23:08:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56239 invoked by uid 99); 31 Oct 2006 23:08:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 15:08:22 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 15:08:09 -0800
Received: from [10.72.109.129] (thickbeside-lm.corp.yahoo.com [10.72.109.129])
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k9VN7jBZ084481
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 15:07:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:content-transfer-encoding:message-id:
	content-type:to:from:subject:date:x-mailer;
	b=JZuLjtjJAlUnCxC67YkTer/y+piLP9AXMWnT6bZFSAMvqB4SXaXbjq+oqTkgtl9K
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <28FCE2DC-2FFB-4618-B047-FCAE45BB4DAC@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: Nigel Daley <ndaley@yahoo-inc.com>
Subject: Hadoop 0.8 code freeze
Date: Tue, 31 Oct 2006 15:07:43 -0800
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

We're planning to freeze the Hadoop trunk tomorrow (Wednesday, Nov 1)  
at 5:00 p.m. PST.  This will allow some time for testing before the  
planned release on Friday.

Note, there is no promise to commit every patch submitted up to that  
time ;-)

Any objections to this schedule?

Cheers,
Nige

From MAILER-DAEMON Tue Oct 31 23:35:31 2006
Return-Path: 
 <hadoop-dev-return-4688-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61720 invoked from network); 31 Oct 2006 23:35:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 23:35:31 -0000
Received: (qmail 7920 invoked by uid 500); 31 Oct 2006 23:35:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7839 invoked by uid 500); 31 Oct 2006 23:35:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7779 invoked by uid 99); 31 Oct 2006 23:35:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 15:35:41 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 15:35:27 -0800
Received: from [10.72.109.129] (thickbeside-lm.corp.yahoo.com [10.72.109.129])
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k9VNZ467092783
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 15:35:04 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=pW4IHHC737x/9DajOPS31GutHwUkyo65BXRps8gXxFDFZe//AeDI9TahRkVfyaIF
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <28FCE2DC-2FFB-4618-B047-FCAE45BB4DAC@yahoo-inc.com>
References: <28FCE2DC-2FFB-4618-B047-FCAE45BB4DAC@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <57FA4FDC-2ACD-4C20-99A4-413B3A05C53D@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Nigel Daley <ndaley@yahoo-inc.com>
Subject: Re: Hadoop 0.8 code freeze
Date: Tue, 31 Oct 2006 15:35:01 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Let me restate :-)

I'd like to spend time on Thursday testing the trunk (running some  
benchmarks, testing command line usages, etc.).  To accomplish this,  
I think it would be helpful to introduce a code freeze process.  The  
original email (attached below) is a last minute attempt to outline  
such a process for this release.

Thoughts/comments?

Cheers,
Nige

On Oct 31, 2006, at 3:07 PM, Nigel Daley wrote:

> We're planning to freeze the Hadoop trunk tomorrow (Wednesday, Nov  
> 1) at 5:00 p.m. PST.  This will allow some time for testing before  
> the planned release on Friday.
>
> Note, there is no promise to commit every patch submitted up to  
> that time ;-)
>
> Any objections to this schedule?
>
> Cheers,
> Nige


From MAILER-DAEMON Wed Nov  1 00:14:39 2006
Return-Path: 
 <hadoop-dev-return-4689-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70625 invoked from network); 1 Nov 2006 00:14:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 00:14:39 -0000
Received: (qmail 73967 invoked by uid 500); 1 Nov 2006 00:14:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73748 invoked by uid 500); 1 Nov 2006 00:14:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73739 invoked by uid 99); 1 Nov 2006 00:14:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 16:14:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 16:14:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CCE177142F0
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 16:14:17 -0800 (PST)
Message-ID: <15693634.1162340057836.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 16:14:17 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-662) dfs -ls sometime prints "Found xxx
 items"; sometimes it does not print that string
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

dfs -ls sometime prints "Found xxx items"; sometimes it does not print that string
----------------------------------------------------------------------------------

                 Key: HADOOP-662
                 URL: http://issues.apache.org/jira/browse/HADOOP-662
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.7.2
            Reporter: dhruba borthakur
            Priority: Minor


I get a different response from dfs -ls depending on whether or not the 
ls contained a directory or a wildcard. The wild card misses the 
response that tells me how many files.

It did indeed cause a problem with my scripts. It was easy to filter 
out. If it's a desired action to do it sometimes and others then that's 
it's ok. It doesn't seem like this is really the intention so I pointed 
it out. My script is now happy with both forms. I do really on the fact 
that the 3 column of the output is the file size. Perhaps I shouldn't be 
doing this but I am writing some automated scripts in python to drive 
hadoop so it is useful to check file sizes. If you were to provide a 
format string that would allow me to place the items in a specific 
format then you would be free to change it, whenever, however, you wanted.
-Richard


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 00:18:48 2006
Return-Path: 
 <hadoop-dev-return-4690-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71631 invoked from network); 1 Nov 2006 00:18:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 00:18:48 -0000
Received: (qmail 81029 invoked by uid 500); 1 Nov 2006 00:18:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80990 invoked by uid 500); 1 Nov 2006 00:18:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80739 invoked by uid 99); 1 Nov 2006 00:18:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 16:18:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 16:18:40 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D25887142F8
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 16:18:19 -0800 (PST)
Message-ID: <1346039.1162340299858.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 16:18:19 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-663) ant test is failing
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

ant test is failing 
--------------------

                 Key: HADOOP-663
                 URL: http://issues.apache.org/jira/browse/HADOOP-663
             Project: Hadoop
          Issue Type: Bug
            Reporter: Mahadev konar
         Assigned To: Mahadev konar


ant test is failing for contrib

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 00:22:39 2006
Return-Path: 
 <hadoop-dev-return-4691-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73184 invoked from network); 1 Nov 2006 00:22:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 00:22:39 -0000
Received: (qmail 83460 invoked by uid 500); 1 Nov 2006 00:22:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83441 invoked by uid 500); 1 Nov 2006 00:22:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83432 invoked by uid 99); 1 Nov 2006 00:22:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 16:22:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 16:22:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B472F7142DC
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 16:22:17 -0800 (PST)
Message-ID: <7006668.1162340537736.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 16:22:17 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-663) ant test is failing
In-Reply-To: <1346039.1162340299858.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-663?page=all ]

Mahadev konar updated HADOOP-663:
---------------------------------

    Attachment: junit_bugfix.patch

This fixes ant test (thanks nigel for your help) . Also changes TestSymLink to adhere to the new MiniMRCluster changes. This patch also includes a bugfix for DistributedCache in which while iteratorating elementes were being removed (causing a concurrentmodificationexception). All the fixes are just one line, so I included it all in one patch.

> ant test is failing
> -------------------
>
>                 Key: HADOOP-663
>                 URL: http://issues.apache.org/jira/browse/HADOOP-663
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>         Attachments: junit_bugfix.patch
>
>
> ant test is failing for contrib

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 00:22:40 2006
Return-Path: 
 <hadoop-dev-return-4692-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73232 invoked from network); 1 Nov 2006 00:22:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 00:22:40 -0000
Received: (qmail 83914 invoked by uid 500); 1 Nov 2006 00:22:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83686 invoked by uid 500); 1 Nov 2006 00:22:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83677 invoked by uid 99); 1 Nov 2006 00:22:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 16:22:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 16:22:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F22057142C1
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 16:22:18 -0800 (PST)
Message-ID: <4189340.1162340538989.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 16:22:18 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-663) ant test is failing
In-Reply-To: <1346039.1162340299858.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-663?page=all ]

Mahadev konar updated HADOOP-663:
---------------------------------

    Status: Patch Available  (was: Open)

> ant test is failing
> -------------------
>
>                 Key: HADOOP-663
>                 URL: http://issues.apache.org/jira/browse/HADOOP-663
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>         Attachments: junit_bugfix.patch
>
>
> ant test is failing for contrib

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 00:23:16 2006
Return-Path: 
 <hadoop-dev-return-4693-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73335 invoked from network); 1 Nov 2006 00:23:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 00:23:16 -0000
Received: (qmail 84645 invoked by uid 500); 1 Nov 2006 00:23:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84423 invoked by uid 500); 1 Nov 2006 00:23:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84410 invoked by uid 99); 1 Nov 2006 00:23:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 16:23:27 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_ID,NO_REAL_NAME,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received: from [140.211.11.75] (HELO lucene.zones.apache.org) (140.211.11.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 16:23:14 -0800
Received: from lucene.zones.apache.org (localhost [127.0.0.1])
	by lucene.zones.apache.org (8.13.7+Sun/8.13.7) with SMTP id kA10Mcn0001002
	for <hadoop-dev@lucene.apache.org>; Wed, 1 Nov 2006 00:22:48 GMT
Message-Id: <200611010022.kA10Mcn0001002@lucene.zones.apache.org>
Date: Wed, 01 Nov 2006 00:22:38 +0000
Subject: Hadoop nightly build failure
From: hadoop-dev@lucene.apache.org
To: hadoop-dev@lucene.apache.org
X-Mailer: org.apache.tools.mail.MailMessage (ant.apache.org)
X-Virus-Checked: Checked by ClamAV on apache.org


init:
    [mkdir] Created dir: /tmp/hadoop-nightly/build
    [mkdir] Created dir: /tmp/hadoop-nightly/build/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/src
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/task/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/job/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/dfs/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/datanode/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/examples
    [mkdir] Created dir: /tmp/hadoop-nightly/build/minimr
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/testjar
     [copy] Copying 4 files to /tmp/hadoop-nightly/build/webapps
     [copy] Copying 4 files to /tmp/hadoop-nightly/conf
     [copy] Copying /tmp/hadoop-nightly/conf/slaves.template to /tmp/hadoop-nightly/conf/slaves
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-site.xml.template to /tmp/hadoop-nightly/conf/hadoop-site.xml
     [copy] Copying /tmp/hadoop-nightly/conf/mapred-default.xml.template to /tmp/hadoop-nightly/conf/mapred-default.xml
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-env.sh.template to /tmp/hadoop-nightly/conf/hadoop-env.sh
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: whoami: not found

record-parser:

compile-core:
    [javac] Compiling 243 source files to /tmp/hadoop-nightly/build/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-examples:
    [javac] Compiling 7 source files to /tmp/hadoop-nightly/build/examples
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-test:
    [javac] Compiling 61 source files to /tmp/hadoop-nightly/build/test/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] Compiling 1 source file to /tmp/hadoop-nightly/build/test/testjar
      [jar] Building jar: /tmp/hadoop-nightly/build/test/testjar/testjob.jar
      [jar] Building jar: /tmp/hadoop-nightly/build/hadoop-nightly-test.jar
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache

test-core:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/data
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/logs
    [junit] Running org.apache.hadoop.conf.TestConfiguration
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.442 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSMkdirs
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 346,268.552 sec

BUILD FAILED
/tmp/hadoop-nightly/build.xml:329: Could not delete temporary properties file.

Total time: 5,771 minutes 25 seconds



From MAILER-DAEMON Wed Nov  1 00:40:39 2006
Return-Path: 
 <hadoop-dev-return-4694-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76991 invoked from network); 1 Nov 2006 00:40:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 00:40:39 -0000
Received: (qmail 2299 invoked by uid 500); 1 Nov 2006 00:40:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2076 invoked by uid 500); 1 Nov 2006 00:40:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2067 invoked by uid 99); 1 Nov 2006 00:40:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 16:40:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 16:40:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E0E467142EC
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 16:40:17 -0800 (PST)
Message-ID: <20244681.1162341617918.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 16:40:17 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-664) build doesn't fail if libhdfs test(s)
 fail
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

build doesn't fail if libhdfs test(s) fail
------------------------------------------

                 Key: HADOOP-664
                 URL: http://issues.apache.org/jira/browse/HADOOP-664
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.7.2
            Reporter: Nigel Daley
         Assigned To: Nigel Daley
            Priority: Minor


The build should fail if the C++ test(s) fail.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 00:40:40 2006
Return-Path: 
 <hadoop-dev-return-4695-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77031 invoked from network); 1 Nov 2006 00:40:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 00:40:40 -0000
Received: (qmail 2551 invoked by uid 500); 1 Nov 2006 00:40:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2322 invoked by uid 500); 1 Nov 2006 00:40:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2313 invoked by uid 99); 1 Nov 2006 00:40:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 16:40:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 16:40:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 254F47142F0
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 16:40:19 -0800 (PST)
Message-ID: <16670397.1162341619150.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 16:40:19 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-664) build doesn't fail if libhdfs test(s)
 fail
In-Reply-To: <20244681.1162341617918.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-664?page=all ]

Nigel Daley updated HADOOP-664:
-------------------------------

    Attachment: maketest.patch

> build doesn't fail if libhdfs test(s) fail
> ------------------------------------------
>
>                 Key: HADOOP-664
>                 URL: http://issues.apache.org/jira/browse/HADOOP-664
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Minor
>         Attachments: maketest.patch
>
>
> The build should fail if the C++ test(s) fail.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 00:42:42 2006
Return-Path: 
 <hadoop-dev-return-4696-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77242 invoked from network); 1 Nov 2006 00:42:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 00:42:42 -0000
Received: (qmail 4955 invoked by uid 500); 1 Nov 2006 00:42:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4930 invoked by uid 500); 1 Nov 2006 00:42:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4921 invoked by uid 99); 1 Nov 2006 00:42:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 16:42:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 16:42:37 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C5F307142E7
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 16:42:17 -0800 (PST)
Message-ID: <11499278.1162341737807.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 16:42:17 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-664) build doesn't fail if libhdfs test(s)
 fail
In-Reply-To: <20244681.1162341617918.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-664?page=all ]

Nigel Daley updated HADOOP-664:
-------------------------------

    Status: Patch Available  (was: Open)

added failonerror tag to the exec task

> build doesn't fail if libhdfs test(s) fail
> ------------------------------------------
>
>                 Key: HADOOP-664
>                 URL: http://issues.apache.org/jira/browse/HADOOP-664
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Minor
>         Attachments: maketest.patch
>
>
> The build should fail if the C++ test(s) fail.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 01:11:39 2006
Return-Path: 
 <hadoop-dev-return-4697-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86342 invoked from network); 1 Nov 2006 01:11:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 01:11:39 -0000
Received: (qmail 42183 invoked by uid 500); 1 Nov 2006 01:11:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42162 invoked by uid 500); 1 Nov 2006 01:11:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42153 invoked by uid 99); 1 Nov 2006 01:11:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 17:11:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 17:11:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6E01E7142E7
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 17:11:18 -0800 (PST)
Message-ID: <3606829.1162343478448.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 17:11:18 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-539) Namenode WI shows incorrect cluster
 remaining size
In-Reply-To: <7533638.1158323542395.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-539?page=all ]

Raghu Angadi resolved HADOOP-539.
---------------------------------

    Resolution: Duplicate


This is a duplicate of HADOOP-599.

> Namenode WI shows incorrect cluster remaining size
> --------------------------------------------------
>
>                 Key: HADOOP-539
>                 URL: http://issues.apache.org/jira/browse/HADOOP-539
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.1
>            Reporter: Sanjay Dahiya
>            Priority: Trivial
>
> dfshealth.jsp shows remaining cluster size equals to cluster capacity, and all nodes show at 0% used. the actual cluster contains few hundred GBs of data and the data is visible through command line or file browsing. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 03:37:43 2006
Return-Path: 
 <hadoop-dev-return-4698-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37688 invoked from network); 1 Nov 2006 03:37:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 03:37:43 -0000
Received: (qmail 94273 invoked by uid 500); 1 Nov 2006 03:37:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94203 invoked by uid 500); 1 Nov 2006 03:37:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94045 invoked by uid 99); 1 Nov 2006 03:37:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 19:37:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 19:37:40 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3E8A67142F3
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 19:37:20 -0800 (PST)
Message-ID: <32824756.1162352240253.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 19:37:20 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-650) bin/hadoop dfs -lsr / is broken
In-Reply-To: <28993539.1161971356570.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-650?page=comments#action_12446151 ] 
            
Konstantin Shvachko commented on HADOOP-650:
--------------------------------------------

Another proposal is to make the removal of invalid files a part of fsck.


> bin/hadoop dfs -lsr / is broken
> -------------------------------
>
>                 Key: HADOOP-650
>                 URL: http://issues.apache.org/jira/browse/HADOOP-650
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>            Priority: Minor
>
> bin/hadoop dfs -lsr / 
> used to work but seems like its broken now. The output of this command just keeps on listing "/user" again and again and does not list any other files/directories. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 05:02:38 2006
Return-Path: 
 <hadoop-dev-return-4699-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50390 invoked from network); 1 Nov 2006 05:02:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 05:02:38 -0000
Received: (qmail 49683 invoked by uid 500); 1 Nov 2006 05:02:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49455 invoked by uid 500); 1 Nov 2006 05:02:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49446 invoked by uid 99); 1 Nov 2006 05:02:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 21:02:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 21:02:36 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8CAB37142DC
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 21:02:16 -0800 (PST)
Message-ID: <7360665.1162357336573.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 21:02:16 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-665)  hadoop -rmr  does NOT process
 multiple arguments and does not complain
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

 hadoop -rmr  does NOT process multiple arguments and does not complain
-----------------------------------------------------------------------

                 Key: HADOOP-665
                 URL: http://issues.apache.org/jira/browse/HADOOP-665
             Project: Hadoop
          Issue Type: Bug
            Reporter: dhruba borthakur


hadoop dfs -rmr /user/arkady/fuchun /user/arkady/fuchun_h /user/arkady/log /user/arkady/t /user/arkady/t1
06/10/31 20:15:31 INFO conf.Configuration: parsing jar:file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/
tools/hadoop/kryptonite/hadoop-0.7.1.jar!/hadoop-default.xml
06/10/31 20:15:31 INFO conf.Configuration: parsing file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/
hadoop/kryptonite/conf/kryptonite2/hadoop-site.xml
06/10/31 20:15:31 INFO ipc.Client: org.apache.hadoop.io.ObjectWritable
ConnectionCuller maxidletime=1000ms: starting Deleted /user/arkady/fuchun


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 05:07:38 2006
Return-Path: 
 <hadoop-dev-return-4700-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51007 invoked from network); 1 Nov 2006 05:07:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 05:07:38 -0000
Received: (qmail 55950 invoked by uid 500); 1 Nov 2006 05:07:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55731 invoked by uid 500); 1 Nov 2006 05:07:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55722 invoked by uid 99); 1 Nov 2006 05:07:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 21:07:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 21:07:36 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 834A17142DC
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 21:07:16 -0800 (PST)
Message-ID: <9227649.1162357636535.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 21:07:16 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-666) hadoop dfs  does not complain about
 unknown option
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

hadoop dfs  does not complain about unknown option
--------------------------------------------------

                 Key: HADOOP-666
                 URL: http://issues.apache.org/jira/browse/HADOOP-666
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: dhruba borthakur
            Priority: Minor


No error message displayed when wrong arguments were fed to "hadoop dfs" as shown by the snippet at the end of this description.


hadoop dfs -rmr/user/arkady/doremi /user/arkady/fuchun /user/arkady/fuchun_h /user/arkady/log /user/arkady/t /user/arkady/t1
06/10/31 20:11:27 INFO conf.Configuration: parsing jar:file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/hadoop/kryptonite/hadoop-0.7.1.jar!/hadoop-default.xml
06/10/31 20:11:27 INFO conf.Configuration: parsing file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/hadoop/kryptonite/conf/kryptonite2/hadoop-site.xml
06/10/31 20:11:27 INFO ipc.Client: org.apache.hadoop.io.ObjectWritable ConnectionCuller maxidletime=1000ms: starting

nlpdev2:/home/arkady/ngrams> which hadoop
/usr/releng/tools/hadoop/kryptonite/bin/hadoop

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 05:44:45 2006
Return-Path: 
 <hadoop-dev-return-4701-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58573 invoked from network); 1 Nov 2006 05:44:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 05:44:45 -0000
Received: (qmail 90023 invoked by uid 500); 1 Nov 2006 05:44:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89976 invoked by uid 500); 1 Nov 2006 05:44:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89879 invoked by uid 99); 1 Nov 2006 05:44:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 21:44:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 21:44:06 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 472467142FE
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 21:43:41 -0800 (PST)
Message-ID: <16421664.1162359821288.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 21:43:41 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-76?page=comments#action_12446162 ] 
            
Owen O'Malley commented on HADOOP-76:
-------------------------------------

Since the dfs locking doesn't really work reliably, I would drop the tip id part of the directory structure, don't do any locking, and if the file is already in place, just skip that file.

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 05:50:41 2006
Return-Path: 
 <hadoop-dev-return-4702-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60050 invoked from network); 1 Nov 2006 05:50:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 05:50:41 -0000
Received: (qmail 1124 invoked by uid 500); 1 Nov 2006 05:50:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1097 invoked by uid 500); 1 Nov 2006 05:50:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1088 invoked by uid 99); 1 Nov 2006 05:50:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 21:50:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 21:50:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 54BBE7142C1
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 21:50:18 -0800 (PST)
Message-ID: <24622095.1162360218344.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 21:50:18 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12446163 ] 
            
Owen O'Malley commented on HADOOP-538:
--------------------------------------

If I apply this patch:

ant clean tar fails with:

BUILD FAILED
/home/oom/work/clean-hadoop/build.xml:456: /home/oom/work/clean-hadoop/build/hadoop-0.7.3-dev/lib/native not found.

It also has a conflict with the mainline over one of the javadoc comments. 

It also causes a new warning from javadoc, which needs to be fixed.

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 09:35:42 2006
Return-Path: 
 <hadoop-dev-return-4703-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20430 invoked from network); 1 Nov 2006 09:35:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 09:35:42 -0000
Received: (qmail 14375 invoked by uid 500); 1 Nov 2006 09:35:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14151 invoked by uid 500); 1 Nov 2006 09:35:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14142 invoked by uid 99); 1 Nov 2006 09:35:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 01:35:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 01:35:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 748AE7142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 01:35:18 -0800 (PST)
Message-ID: <25690649.1162373718474.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 01:35:18 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12446181 ] 
            
Arun C Murthy commented on HADOOP-538:
--------------------------------------

I think the build-failure is due to the fact that you will need to copy the attached libhadoop-i386-32.so into trunk/lib/native manually first, could you please try that? Thanks!

I'll put up another patch with the javadoc fixes, a new patch is necessiated anyway by the new source headers that need to be used as per HADOOP-658...

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 09:37:43 2006
Return-Path: 
 <hadoop-dev-return-4704-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21562 invoked from network); 1 Nov 2006 09:37:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 09:37:43 -0000
Received: (qmail 17858 invoked by uid 500); 1 Nov 2006 09:37:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17758 invoked by uid 500); 1 Nov 2006 09:37:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17729 invoked by uid 99); 1 Nov 2006 09:37:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 01:37:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 01:37:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ECA6C7142F0
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 01:37:20 -0800 (PST)
Message-ID: <5833012.1162373840966.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 01:37:20 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12446182 ] 
            
Arun C Murthy commented on HADOOP-489:
--------------------------------------

So, do we all agree on the output quota being per-task rather than per-job?

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-489_20061019.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 17:10:42 2006
Return-Path: 
 <hadoop-dev-return-4705-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75663 invoked from network); 1 Nov 2006 17:10:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 17:10:42 -0000
Received: (qmail 23686 invoked by uid 500); 1 Nov 2006 17:10:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23657 invoked by uid 500); 1 Nov 2006 17:10:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23647 invoked by uid 99); 1 Nov 2006 17:10:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 09:10:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 09:10:40 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 825C07142F8
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 09:10:19 -0800 (PST)
Message-ID: <29976060.1162401019531.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 09:10:19 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-371) ant tar should package contrib jars
In-Reply-To: <22441907.1153248734143.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-371?page=all ]

Nigel Daley updated HADOOP-371:
-------------------------------

    Attachment: contribbuild.patch

The attached patch to build.xml does 2 things:

1) Modifies the javadoc target to include the contrib javadoc along with the regular javadoc.  
The overview-summary.html is created to mimic lucene's: 
http://lucene.apache.org/java/docs/api/overview-summary.html
Suggestion: perhaps the contrib javadoc should be entirely 
separate from the core javadoc, say in
     contrib/docs ???

2) Modifies the package target to include the contrib jar files in
     contrib/streaming/hadoop-streaming.jar
     contrib/smallJobsBenchmark/MRBenchmark.jar
Suggestion: perhaps the contrib jar files should be in either
     contrib/lib/hadoop-streaming.jar
     contrib/lib/MRBenchmark.jar
or
     contrib/hadoop-streaming.jar
     contrib/MRBenchmark.jar   ???

Any thoughts on the above suggestions or other alternatives?

> ant tar should package contrib jars
> -----------------------------------
>
>                 Key: HADOOP-371
>                 URL: http://issues.apache.org/jira/browse/HADOOP-371
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Michel Tourn
>         Attachments: build.tarcontrib.patch, contribbuild.patch
>
>
> From Hadoop-356:
> >I note that the contrib packages are not included in distributions (the "tar" target).  
> >They probably should be.  Michel, would you like to modify "tar" to include the contrib code?  
> >This should be done in a separate bug.
> OK.
> This packaging is done in target deploy-contrib.
> So I can just add a dependency to the top-level tar target:
> <!-- Make release tarball(s)                                               -->
> <target name="tar" depends="package, deploy-contrib">

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 17:34:43 2006
Return-Path: 
 <hadoop-dev-return-4706-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90994 invoked from network); 1 Nov 2006 17:34:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 17:34:43 -0000
Received: (qmail 82284 invoked by uid 500); 1 Nov 2006 17:34:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82253 invoked by uid 500); 1 Nov 2006 17:34:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82244 invoked by uid 99); 1 Nov 2006 17:34:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 09:34:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 09:34:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8F0E07142F3
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 09:34:21 -0800 (PST)
Message-ID: <27254646.1162402461583.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 09:34:21 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-489) Seperating user logs from system logs
 in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-489?page=all ]

Arun C Murthy updated HADOOP-489:
---------------------------------

    Attachment: HADOOP-489_20061101.patch

Here is another patch for consideration incorporating all of Owen's and Sameer's comments... 

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-489_20061019.patch, HADOOP-489_20061101.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 17:41:03 2006
Return-Path: 
 <hadoop-dev-return-4707-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92959 invoked from network); 1 Nov 2006 17:41:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 17:41:03 -0000
Received: (qmail 94396 invoked by uid 500); 1 Nov 2006 17:40:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94370 invoked by uid 500); 1 Nov 2006 17:40:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94244 invoked by uid 99); 1 Nov 2006 17:40:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 09:40:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 09:40:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9EA427142F6
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 09:40:24 -0800 (PST)
Message-ID: <20745174.1162402824647.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 09:40:24 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-489) Seperating user logs from system logs
 in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-489?page=all ]

Arun C Murthy updated HADOOP-489:
---------------------------------

    Attachment:     (was: HADOOP-489_20061101.patch)

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-489_20061019.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 17:41:09 2006
Return-Path: 
 <hadoop-dev-return-4708-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93125 invoked from network); 1 Nov 2006 17:41:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 17:41:09 -0000
Received: (qmail 95843 invoked by uid 500); 1 Nov 2006 17:41:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95816 invoked by uid 500); 1 Nov 2006 17:41:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95739 invoked by uid 99); 1 Nov 2006 17:41:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 09:41:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 09:40:51 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EA9AF7142F0
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 09:40:30 -0800 (PST)
Message-ID: <17323419.1162402830957.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 09:40:30 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-489) Seperating user logs from system logs
 in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-489?page=all ]

Arun C Murthy updated HADOOP-489:
---------------------------------

    Attachment: HADOOP-489_20061101.patch

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-489_20061019.patch, HADOOP-489_20061101.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 17:58:50 2006
Return-Path: 
 <hadoop-dev-return-4709-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1028 invoked from network); 1 Nov 2006 17:58:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 17:58:50 -0000
Received: (qmail 56241 invoked by uid 500); 1 Nov 2006 17:58:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56215 invoked by uid 500); 1 Nov 2006 17:58:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56194 invoked by uid 99); 1 Nov 2006 17:58:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 09:58:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 09:58:36 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8EC2C7142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 09:58:16 -0800 (PST)
Message-ID: <23824706.1162403896582.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 09:58:16 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-667) Path configuration properties should
 not be comma separated
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Path configuration properties should not be comma separated
-----------------------------------------------------------

                 Key: HADOOP-667
                 URL: http://issues.apache.org/jira/browse/HADOOP-667
             Project: Hadoop
          Issue Type: Bug
          Components: fs
    Affects Versions: 0.7.2
            Reporter: Nigel Daley
            Priority: Minor


A few configuration properties allow multiple directory paths separated by comma's (,).  Since comma is a valid character for a directory name, it should not be used as a path separator.

At a minimum, this applies to these properties:
     mapred.local.dir
     dfs.name.dir

[ I also wonder how robust the implementation is against paths that contain spaces. ]

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 18:22:40 2006
Return-Path: 
 <hadoop-dev-return-4710-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9929 invoked from network); 1 Nov 2006 18:22:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 18:22:40 -0000
Received: (qmail 18124 invoked by uid 500); 1 Nov 2006 18:22:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18103 invoked by uid 500); 1 Nov 2006 18:22:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18094 invoked by uid 99); 1 Nov 2006 18:22:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:22:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:22:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 77B457142BF
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 10:22:18 -0800 (PST)
Message-ID: <111826.1162405338487.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 10:22:18 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12446332 ] 
            
Owen O'Malley commented on HADOOP-538:
--------------------------------------

I think that we should avoid adding a new top-level directory in src. Furthermore libhadoop is pretty general for an optimization package.

Maybe src/c++/libhadoopzip or something would be better.

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 18:24:39 2006
Return-Path: 
 <hadoop-dev-return-4711-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10230 invoked from network); 1 Nov 2006 18:24:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 18:24:39 -0000
Received: (qmail 21952 invoked by uid 500); 1 Nov 2006 18:24:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21930 invoked by uid 500); 1 Nov 2006 18:24:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21921 invoked by uid 99); 1 Nov 2006 18:24:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:24:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:24:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5AD477142DC
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 10:24:18 -0800 (PST)
Message-ID: <23359359.1162405458369.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 10:24:18 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-633) if the jobinit thread gets killed the
 jobtracker keeps running without doing anything.
In-Reply-To: <33057763.1161712456703.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-633?page=all ]

Owen O'Malley updated HADOOP-633:
---------------------------------

    Attachment: thread-except.patch

This patch puts in exception handlers for the critical task & job tracker threads.

It also gives names to a lot more of the threads.

> if the jobinit thread gets killed the jobtracker keeps running without doing anything.
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-633
>                 URL: http://issues.apache.org/jira/browse/HADOOP-633
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Mahadev konar
>         Assigned To: Owen O'Malley
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: thread-except.patch
>
>
> The jobtracker failed with OutOfMemory while uinjarring the jar file and this kileld the jobinit thread. The Jobtracker still kept running while doing nothing though accepting job submissions, but the jobs just sat in the queue.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 18:24:41 2006
Return-Path: 
 <hadoop-dev-return-4712-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10290 invoked from network); 1 Nov 2006 18:24:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 18:24:41 -0000
Received: (qmail 22217 invoked by uid 500); 1 Nov 2006 18:24:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22186 invoked by uid 500); 1 Nov 2006 18:24:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22177 invoked by uid 99); 1 Nov 2006 18:24:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:24:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:24:40 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3F66C7142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 10:24:20 -0800 (PST)
Message-ID: <16267471.1162405460257.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 10:24:20 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-633) if the jobinit thread gets killed the
 jobtracker keeps running without doing anything.
In-Reply-To: <33057763.1161712456703.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-633?page=all ]

Owen O'Malley updated HADOOP-633:
---------------------------------

               Status: Patch Available  (was: In Progress)
        Fix Version/s: 0.8.0
    Affects Version/s: 0.7.2

The patch also removes the waiting on the init thread and uses wait/notify instead.

> if the jobinit thread gets killed the jobtracker keeps running without doing anything.
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-633
>                 URL: http://issues.apache.org/jira/browse/HADOOP-633
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Mahadev konar
>         Assigned To: Owen O'Malley
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: thread-except.patch
>
>
> The jobtracker failed with OutOfMemory while uinjarring the jar file and this kileld the jobinit thread. The Jobtracker still kept running while doing nothing though accepting job submissions, but the jobs just sat in the queue.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 18:27:47 2006
Return-Path: 
 <hadoop-dev-return-4713-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11655 invoked from network); 1 Nov 2006 18:27:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 18:27:47 -0000
Received: (qmail 32441 invoked by uid 500); 1 Nov 2006 18:27:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32417 invoked by uid 500); 1 Nov 2006 18:27:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32398 invoked by uid 99); 1 Nov 2006 18:27:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:27:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:27:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AA2577142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 10:27:17 -0800 (PST)
Message-ID: <22122945.1162405637694.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 10:27:17 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-665)  hadoop -rmr  does NOT process
 multiple arguments and does not complain
In-Reply-To: <7360665.1162357336573.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-665?page=comments#action_12446335 ] 
            
dhruba borthakur commented on HADOOP-665:
-----------------------------------------

Similar issue exists with other dfs commands, especially: cat, ls, lsr, mkdir, rm, rmr and du. All these commands operate only on the first specified argument and ignores the rest. I propose that we fix all of them to operate on multiple input arguments.

>  hadoop -rmr  does NOT process multiple arguments and does not complain
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-665
>                 URL: http://issues.apache.org/jira/browse/HADOOP-665
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: dhruba borthakur
>
> hadoop dfs -rmr /user/arkady/fuchun /user/arkady/fuchun_h /user/arkady/log /user/arkady/t /user/arkady/t1
> 06/10/31 20:15:31 INFO conf.Configuration: parsing jar:file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/
> tools/hadoop/kryptonite/hadoop-0.7.1.jar!/hadoop-default.xml
> 06/10/31 20:15:31 INFO conf.Configuration: parsing file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/
> hadoop/kryptonite/conf/kryptonite2/hadoop-site.xml
> 06/10/31 20:15:31 INFO ipc.Client: org.apache.hadoop.io.ObjectWritable
> ConnectionCuller maxidletime=1000ms: starting Deleted /user/arkady/fuchun

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 18:30:22 2006
Return-Path: 
 <hadoop-dev-return-4714-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12310 invoked from network); 1 Nov 2006 18:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 18:30:22 -0000
Received: (qmail 38150 invoked by uid 500); 1 Nov 2006 18:30:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38118 invoked by uid 500); 1 Nov 2006 18:30:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38109 invoked by uid 99); 1 Nov 2006 18:30:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:30:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:30:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B28537142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 10:29:17 -0800 (PST)
Message-ID: <16427756.1162405757728.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 10:29:17 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-663) ant test is failing
In-Reply-To: <1346039.1162340299858.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-663?page=all ]

Doug Cutting updated HADOOP-663:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I just committed this.  Thanks, Mahadev!

> ant test is failing
> -------------------
>
>                 Key: HADOOP-663
>                 URL: http://issues.apache.org/jira/browse/HADOOP-663
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>             Fix For: 0.8.0
>
>         Attachments: junit_bugfix.patch
>
>
> ant test is failing for contrib

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 18:32:54 2006
Return-Path: 
 <hadoop-dev-return-4715-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12794 invoked from network); 1 Nov 2006 18:32:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 18:32:54 -0000
Received: (qmail 40480 invoked by uid 500); 1 Nov 2006 18:32:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40457 invoked by uid 500); 1 Nov 2006 18:32:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40364 invoked by uid 99); 1 Nov 2006 18:32:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:32:35 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 419547142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 10:31:18 -0800 (PST)
Message-ID: <22165612.1162405878266.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 10:31:18 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-665)  hadoop -rmr  does NOT process
 multiple arguments and does not complain
In-Reply-To: <7360665.1162357336573.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-665?page=comments#action_12446337 ] 
            
Doug Cutting commented on HADOOP-665:
-------------------------------------

We should also explore whether commons-cli might make it any easier to parse all of these DFS command line options.

>  hadoop -rmr  does NOT process multiple arguments and does not complain
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-665
>                 URL: http://issues.apache.org/jira/browse/HADOOP-665
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: dhruba borthakur
>
> hadoop dfs -rmr /user/arkady/fuchun /user/arkady/fuchun_h /user/arkady/log /user/arkady/t /user/arkady/t1
> 06/10/31 20:15:31 INFO conf.Configuration: parsing jar:file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/
> tools/hadoop/kryptonite/hadoop-0.7.1.jar!/hadoop-default.xml
> 06/10/31 20:15:31 INFO conf.Configuration: parsing file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/
> hadoop/kryptonite/conf/kryptonite2/hadoop-site.xml
> 06/10/31 20:15:31 INFO ipc.Client: org.apache.hadoop.io.ObjectWritable
> ConnectionCuller maxidletime=1000ms: starting Deleted /user/arkady/fuchun

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 18:42:42 2006
Return-Path: 
 <hadoop-dev-return-4716-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15832 invoked from network); 1 Nov 2006 18:42:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 18:42:42 -0000
Received: (qmail 70089 invoked by uid 500); 1 Nov 2006 18:42:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70063 invoked by uid 500); 1 Nov 2006 18:42:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70053 invoked by uid 99); 1 Nov 2006 18:42:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:42:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:42:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 819977142DC
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 10:42:18 -0800 (PST)
Message-ID: <15062834.1162406538528.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 10:42:18 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12446345 ] 
            
Arun C Murthy commented on HADOOP-538:
--------------------------------------

IMHO src/native is par for the course since src/c++ contains librecordio and libhdfs (libmapred in future?) which are sortof 'add-ons' to hadoop while HADOOP-538 is 'core-hadoop' in a way. Hence we don't want to mix these up in src/c++.

Another reason I wouldn't go down the path of src/c++/libhadoopzip because very soon we might need src/c++/libhadooplzo (for lzo) or something similar... and we don't want to proliferate share-objects needed for hadoop.

Given all this and the fact that we can house all of 'native' hadoop code (as and when required) in a single 'src/native' I would go for the current scheme, which can nicely create a single libhadoop.so for all of hadoop's native code.

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 18:46:43 2006
Return-Path: 
 <hadoop-dev-return-4717-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17335 invoked from network); 1 Nov 2006 18:46:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 18:46:43 -0000
Received: (qmail 82343 invoked by uid 500); 1 Nov 2006 18:46:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82322 invoked by uid 500); 1 Nov 2006 18:46:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82305 invoked by uid 99); 1 Nov 2006 18:46:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:46:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:46:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DA73B7142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 10:46:17 -0800 (PST)
Message-ID: <3336943.1162406777892.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 10:46:17 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-664) build doesn't fail if libhdfs test(s)
 fail
In-Reply-To: <20244681.1162341617918.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-664?page=all ]

Doug Cutting updated HADOOP-664:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I just committed this.  Thanks, Nigel.

> build doesn't fail if libhdfs test(s) fail
> ------------------------------------------
>
>                 Key: HADOOP-664
>                 URL: http://issues.apache.org/jira/browse/HADOOP-664
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: maketest.patch
>
>
> The build should fail if the C++ test(s) fail.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 18:53:38 2006
Return-Path: 
 <hadoop-dev-return-4718-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19282 invoked from network); 1 Nov 2006 18:53:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 18:53:38 -0000
Received: (qmail 94181 invoked by uid 500); 1 Nov 2006 18:53:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94161 invoked by uid 500); 1 Nov 2006 18:53:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94152 invoked by uid 99); 1 Nov 2006 18:53:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:53:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:53:36 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8D2AC7142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 10:53:16 -0800 (PST)
Message-ID: <4412988.1162407196575.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 10:53:16 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-668) improvement to DFS browsing WI
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

improvement to DFS browsing WI
------------------------------

                 Key: HADOOP-668
                 URL: http://issues.apache.org/jira/browse/HADOOP-668
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
            Reporter: Yoram Arnon
            Priority: Minor


improvement to DFS browsing WI:

1.  Increase the default "Chunk Size to view" to 32K bytes.  Currently 
in most cases, I always need to add another digit to the size and get 
the page redisplayed.

2. Add date to the display.  This may an "approximate" date -- e.g. the 
date of any block of the file.

3. Remove the directory name from the file name in the file list

4. Let the links in the file list point to the file names, not to the 
file data.  That is, if the files in the directory that is displayed in 
the window have changed, clicking on the file name will still get the 
user to the file, rather than saying "bad link" (or smth. like that).  
If you still prefer to link to the file data (there is certain merit to 
this), at least make the link to the removed file say
"sorry, this file has been deleted, here is the link to the current 
version"  or
"sorry, this file has been deleted"

5. replication factor and size for directories is currently meaningless.
use these fields for something meaningful, like total size of directory,
number of files, creation date etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 18:55:39 2006
Return-Path: 
 <hadoop-dev-return-4719-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20113 invoked from network); 1 Nov 2006 18:55:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 18:55:39 -0000
Received: (qmail 97366 invoked by uid 500); 1 Nov 2006 18:55:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97343 invoked by uid 500); 1 Nov 2006 18:55:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97334 invoked by uid 99); 1 Nov 2006 18:55:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:55:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 10:55:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4CBBB7142DC
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 10:55:18 -0800 (PST)
Message-ID: <3612937.1162407318311.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 10:55:18 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-633) if the jobinit thread gets killed the
 jobtracker keeps running without doing anything.
In-Reply-To: <33057763.1161712456703.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-633?page=all ]

Doug Cutting updated HADOOP-633:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> if the jobinit thread gets killed the jobtracker keeps running without doing anything.
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-633
>                 URL: http://issues.apache.org/jira/browse/HADOOP-633
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Mahadev konar
>         Assigned To: Owen O'Malley
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: thread-except.patch
>
>
> The jobtracker failed with OutOfMemory while uinjarring the jar file and this kileld the jobinit thread. The Jobtracker still kept running while doing nothing though accepting job submissions, but the jobs just sat in the queue.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 19:05:39 2006
Return-Path: 
 <hadoop-dev-return-4720-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27176 invoked from network); 1 Nov 2006 19:05:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 19:05:39 -0000
Received: (qmail 18937 invoked by uid 500); 1 Nov 2006 19:05:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18904 invoked by uid 500); 1 Nov 2006 19:05:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18895 invoked by uid 99); 1 Nov 2006 19:05:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 11:05:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 11:05:37 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A41007142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 11:05:17 -0800 (PST)
Message-ID: <13519653.1162407917669.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 11:05:17 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-665)  hadoop -rmr  does NOT process
 multiple arguments and does not complain
In-Reply-To: <7360665.1162357336573.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-665?page=all ]

dhruba borthakur reassigned HADOOP-665:
---------------------------------------

    Assignee: dhruba borthakur

>  hadoop -rmr  does NOT process multiple arguments and does not complain
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-665
>                 URL: http://issues.apache.org/jira/browse/HADOOP-665
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> hadoop dfs -rmr /user/arkady/fuchun /user/arkady/fuchun_h /user/arkady/log /user/arkady/t /user/arkady/t1
> 06/10/31 20:15:31 INFO conf.Configuration: parsing jar:file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/
> tools/hadoop/kryptonite/hadoop-0.7.1.jar!/hadoop-default.xml
> 06/10/31 20:15:31 INFO conf.Configuration: parsing file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/
> hadoop/kryptonite/conf/kryptonite2/hadoop-site.xml
> 06/10/31 20:15:31 INFO ipc.Client: org.apache.hadoop.io.ObjectWritable
> ConnectionCuller maxidletime=1000ms: starting Deleted /user/arkady/fuchun

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 19:07:40 2006
Return-Path: 
 <hadoop-dev-return-4721-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29598 invoked from network); 1 Nov 2006 19:07:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 19:07:40 -0000
Received: (qmail 24852 invoked by uid 500); 1 Nov 2006 19:07:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24824 invoked by uid 500); 1 Nov 2006 19:07:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24812 invoked by uid 99); 1 Nov 2006 19:07:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 11:07:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 11:07:37 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AB11D7142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 11:07:17 -0800 (PST)
Message-ID: <24390923.1162408037698.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 11:07:17 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-666) hadoop dfs  does not complain about
 unknown option
In-Reply-To: <9227649.1162357636535.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-666?page=all ]

dhruba borthakur reassigned HADOOP-666:
---------------------------------------

    Assignee: dhruba borthakur

> hadoop dfs  does not complain about unknown option
> --------------------------------------------------
>
>                 Key: HADOOP-666
>                 URL: http://issues.apache.org/jira/browse/HADOOP-666
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>            Priority: Minor
>
> No error message displayed when wrong arguments were fed to "hadoop dfs" as shown by the snippet at the end of this description.
> hadoop dfs -rmr/user/arkady/doremi /user/arkady/fuchun /user/arkady/fuchun_h /user/arkady/log /user/arkady/t /user/arkady/t1
> 06/10/31 20:11:27 INFO conf.Configuration: parsing jar:file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/hadoop/kryptonite/hadoop-0.7.1.jar!/hadoop-default.xml
> 06/10/31 20:11:27 INFO conf.Configuration: parsing file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/hadoop/kryptonite/conf/kryptonite2/hadoop-site.xml
> 06/10/31 20:11:27 INFO ipc.Client: org.apache.hadoop.io.ObjectWritable ConnectionCuller maxidletime=1000ms: starting
> nlpdev2:/home/arkady/ngrams> which hadoop
> /usr/releng/tools/hadoop/kryptonite/bin/hadoop

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 20:10:39 2006
Return-Path: 
 <hadoop-dev-return-4722-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57887 invoked from network); 1 Nov 2006 20:10:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 20:10:39 -0000
Received: (qmail 62702 invoked by uid 500); 1 Nov 2006 20:10:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62680 invoked by uid 500); 1 Nov 2006 20:10:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62671 invoked by uid 99); 1 Nov 2006 20:10:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:10:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:10:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BB52E7142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 12:10:17 -0800 (PST)
Message-ID: <8394862.1162411817764.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 12:10:17 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-373) Some calls to mkdirs do not check
 return value
In-Reply-To: <19322325.1153351633892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-373?page=all ]

Wendy Chien updated HADOOP-373:
-------------------------------

    Attachment:     (was: hadoop-373.patch)

> Some calls to mkdirs do not check return value
> ----------------------------------------------
>
>                 Key: HADOOP-373
>                 URL: http://issues.apache.org/jira/browse/HADOOP-373
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>
> Some calls to mkdirs do not check if mkdirs failed.  
> Arun noticed this while looking at HADOOP-281.  Since this issue is actually a separate issue from the mkdirs implementation issue of HADOOP-281, I created a new bug for it.   

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 20:12:45 2006
Return-Path: 
 <hadoop-dev-return-4723-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58682 invoked from network); 1 Nov 2006 20:12:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 20:12:45 -0000
Received: (qmail 71166 invoked by uid 500); 1 Nov 2006 20:12:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71141 invoked by uid 500); 1 Nov 2006 20:12:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71131 invoked by uid 99); 1 Nov 2006 20:12:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:12:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:12:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6F9F47142BF
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 12:12:18 -0800 (PST)
Message-ID: <22786747.1162411938454.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 12:12:18 -0800 (PST)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-646) name node server does not load large
 (> 2^31 bytes) edits file
In-Reply-To: <6602315.1161900496769.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-646?page=comments#action_12446366 ] 
            
Christian Kunz commented on HADOOP-646:
---------------------------------------

Sorry to get back so late, but the previous large edits file was deleted, and I had to wait for another 'big' one to be generated. I tested the patch on a 3.2GB edits file, and it seemed to have loaded it okay (sampling of files to be copied to local worked). FYI, the loading took more than 10 minutes, and during that time  the name node server was not available.

> name node server does not load large (> 2^31 bytes) edits file
> --------------------------------------------------------------
>
>                 Key: HADOOP-646
>                 URL: http://issues.apache.org/jira/browse/HADOOP-646
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.1
>            Reporter: Christian Kunz
>            Priority: Critical
>         Attachments: edits.patch
>
>
> FileInputStream.available() returns negative values when reading a large file (> 2^31 bytes) -- this is a known (unresolved) java bug:
> http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6402006
> Consequence: a large edits file is not loaded and deleted without any warnings. The system reverts back to the old fsimage.
> This happens in jdk1.6 as well, i.e. the bug has not yet been fixed.
> In addition, when finally I was able to load my big cron-backed-up edits file (6.5 GB)  with a kludgy work-around, the blocks did not exist anymore in the data node servers, probably deleted from the previous attempts when the name node server did not know about the changed situation. 
> Moral till this is fixed or worked-around: don't wait too long to restart the name node server. Otherwise this is a way to lose the entire dfs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 20:12:46 2006
Return-Path: 
 <hadoop-dev-return-4724-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58722 invoked from network); 1 Nov 2006 20:12:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 20:12:46 -0000
Received: (qmail 71242 invoked by uid 500); 1 Nov 2006 20:12:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71213 invoked by uid 500); 1 Nov 2006 20:12:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71171 invoked by uid 99); 1 Nov 2006 20:12:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:12:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:12:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B530D7142DC
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 12:12:19 -0800 (PST)
Message-ID: <33177936.1162411939739.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 12:12:19 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-373) Some calls to mkdirs do not check
 return value
In-Reply-To: <19322325.1153351633892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-373?page=all ]

Wendy Chien updated HADOOP-373:
-------------------------------

    Attachment: mkdirscheck3.patch

regenerated patch to check return value of mkdirs calls

> Some calls to mkdirs do not check return value
> ----------------------------------------------
>
>                 Key: HADOOP-373
>                 URL: http://issues.apache.org/jira/browse/HADOOP-373
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>         Attachments: mkdirscheck3.patch
>
>
> Some calls to mkdirs do not check if mkdirs failed.  
> Arun noticed this while looking at HADOOP-281.  Since this issue is actually a separate issue from the mkdirs implementation issue of HADOOP-281, I created a new bug for it.   

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 20:12:47 2006
Return-Path: 
 <hadoop-dev-return-4725-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58732 invoked from network); 1 Nov 2006 20:12:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 20:12:47 -0000
Received: (qmail 71431 invoked by uid 500); 1 Nov 2006 20:12:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71389 invoked by uid 500); 1 Nov 2006 20:12:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71361 invoked by uid 99); 1 Nov 2006 20:12:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:12:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:12:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 020897142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 12:12:21 -0800 (PST)
Message-ID: <19734456.1162411941005.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 12:12:21 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-373) Some calls to mkdirs do not check
 return value
In-Reply-To: <19322325.1153351633892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-373?page=all ]

Wendy Chien updated HADOOP-373:
-------------------------------

    Status: Patch Available  (was: Open)

> Some calls to mkdirs do not check return value
> ----------------------------------------------
>
>                 Key: HADOOP-373
>                 URL: http://issues.apache.org/jira/browse/HADOOP-373
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>         Attachments: mkdirscheck3.patch
>
>
> Some calls to mkdirs do not check if mkdirs failed.  
> Arun noticed this while looking at HADOOP-281.  Since this issue is actually a separate issue from the mkdirs implementation issue of HADOOP-281, I created a new bug for it.   

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 20:14:39 2006
Return-Path: 
 <hadoop-dev-return-4726-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59579 invoked from network); 1 Nov 2006 20:14:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 20:14:39 -0000
Received: (qmail 77081 invoked by uid 500); 1 Nov 2006 20:14:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77051 invoked by uid 500); 1 Nov 2006 20:14:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77042 invoked by uid 99); 1 Nov 2006 20:14:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:14:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:14:37 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A95FE7142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 12:14:16 -0800 (PST)
Message-ID: <16733484.1162412056691.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 12:14:16 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-669) Upgrade to trunk causes data loss.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Upgrade to trunk causes data loss.
----------------------------------

                 Key: HADOOP-669
                 URL: http://issues.apache.org/jira/browse/HADOOP-669
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.8.0
            Reporter: Milind Bhandarkar
         Assigned To: Milind Bhandarkar
            Priority: Blocker
             Fix For: 0.8.0
         Attachments: backup-bug-fix.patch

Current hadoop trunk after applying the multiple namenode image backup patch (patch for hadoop-90) can cause data loss. I have fixed the bug. Patch is forthcoming.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 20:14:52 2006
Return-Path: 
 <hadoop-dev-return-4727-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59746 invoked from network); 1 Nov 2006 20:14:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 20:14:52 -0000
Received: (qmail 77883 invoked by uid 500); 1 Nov 2006 20:14:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77861 invoked by uid 500); 1 Nov 2006 20:14:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77847 invoked by uid 99); 1 Nov 2006 20:14:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:14:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:14:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E51B47142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 12:14:17 -0800 (PST)
Message-ID: <23292553.1162412057936.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 12:14:17 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-669) Upgrade to trunk causes data loss.
In-Reply-To: <16733484.1162412056691.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-669?page=all ]

Milind Bhandarkar updated HADOOP-669:
-------------------------------------

    Attachment: backup-bug-fix.patch

Patch submittted.

> Upgrade to trunk causes data loss.
> ----------------------------------
>
>                 Key: HADOOP-669
>                 URL: http://issues.apache.org/jira/browse/HADOOP-669
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>            Priority: Blocker
>             Fix For: 0.8.0
>
>         Attachments: backup-bug-fix.patch
>
>
> Current hadoop trunk after applying the multiple namenode image backup patch (patch for hadoop-90) can cause data loss. I have fixed the bug. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 20:14:53 2006
Return-Path: 
 <hadoop-dev-return-4728-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59799 invoked from network); 1 Nov 2006 20:14:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 20:14:53 -0000
Received: (qmail 77936 invoked by uid 500); 1 Nov 2006 20:14:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77910 invoked by uid 500); 1 Nov 2006 20:14:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77894 invoked by uid 99); 1 Nov 2006 20:14:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:14:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:14:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1B1F07142EF
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 12:14:21 -0800 (PST)
Message-ID: <25800249.1162412061108.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 12:14:21 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-669) Upgrade to trunk causes data loss.
In-Reply-To: <16733484.1162412056691.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-669?page=all ]

Milind Bhandarkar updated HADOOP-669:
-------------------------------------

    Status: Patch Available  (was: Open)

Patch submitted.

> Upgrade to trunk causes data loss.
> ----------------------------------
>
>                 Key: HADOOP-669
>                 URL: http://issues.apache.org/jira/browse/HADOOP-669
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>            Priority: Blocker
>             Fix For: 0.8.0
>
>         Attachments: backup-bug-fix.patch
>
>
> Current hadoop trunk after applying the multiple namenode image backup patch (patch for hadoop-90) can cause data loss. I have fixed the bug. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 20:19:27 2006
Return-Path: 
 <hadoop-dev-return-4729-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64880 invoked from network); 1 Nov 2006 20:19:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 20:19:27 -0000
Received: (qmail 92386 invoked by uid 500); 1 Nov 2006 20:19:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92358 invoked by uid 500); 1 Nov 2006 20:19:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92349 invoked by uid 99); 1 Nov 2006 20:19:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:19:38 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.145.54.173] (HELO mrout3.yahoo.com) (216.145.54.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:19:22 -0800
Received: from [66.228.175.147] (socks1.corp.yahoo.com [216.145.54.158])
	by mrout3.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id kA1KIaQC020809
	for <hadoop-dev@lucene.apache.org>; Wed, 1 Nov 2006 12:18:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:content-transfer-encoding:message-id:
	content-type:to:from:subject:date:x-mailer;
	b=ZYkKJ0rQnIVF1NTPkFiGy7K1KRz7PPD99m3ZDfG8jy8lTcM0vN8kxlCYNXWb96XO
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <ABB24B81-B7A4-4640-B109-378ED1E70AF2@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: Milind Bhandarkar <milindb@yahoo-inc.com>
Subject: Current hadoop-trunk is broken
Date: Wed, 1 Nov 2006 12:21:06 -0800
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Please do not use hadoop-trunk to upgrade DFS. It is found to result  
in data loss. I have created a Jira issue Hadoop-669, and have  
submitted a bug-fix patch as well.

Doug, please commit that patch asap. Thanks.

- milind

From MAILER-DAEMON Wed Nov  1 20:53:42 2006
Return-Path: 
 <hadoop-dev-return-4730-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78501 invoked from network); 1 Nov 2006 20:53:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 20:53:42 -0000
Received: (qmail 69133 invoked by uid 500); 1 Nov 2006 20:53:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69111 invoked by uid 500); 1 Nov 2006 20:53:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69092 invoked by uid 99); 1 Nov 2006 20:53:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:53:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 12:53:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DF9AD7142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 12:53:18 -0800 (PST)
Message-ID: <31376171.1162414398913.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 12:53:18 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-669) Upgrade to trunk causes data loss.
In-Reply-To: <16733484.1162412056691.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-669?page=all ]

Doug Cutting updated HADOOP-669:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Milind!

> Upgrade to trunk causes data loss.
> ----------------------------------
>
>                 Key: HADOOP-669
>                 URL: http://issues.apache.org/jira/browse/HADOOP-669
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>            Priority: Blocker
>             Fix For: 0.8.0
>
>         Attachments: backup-bug-fix.patch
>
>
> Current hadoop trunk after applying the multiple namenode image backup patch (patch for hadoop-90) can cause data loss. I have fixed the bug. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 21:56:40 2006
Return-Path: 
 <hadoop-dev-return-4731-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91016 invoked from network); 1 Nov 2006 21:56:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 21:56:40 -0000
Received: (qmail 54824 invoked by uid 500); 1 Nov 2006 21:56:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54794 invoked by uid 500); 1 Nov 2006 21:56:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54780 invoked by uid 99); 1 Nov 2006 21:56:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 13:56:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 13:56:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C138B7142DC
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 13:56:17 -0800 (PST)
Message-ID: <28430134.1162418177788.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 13:56:17 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-655) remove deprecations
In-Reply-To: <3180020.1162252996552.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-655?page=all ]

Doug Cutting updated HADOOP-655:
--------------------------------

          Summary: remove deprecations  (was: remove 0.6 deprecations)
    Fix Version/s: 0.9.0
                       (was: 0.8.0)
         Due Date: 06/Nov/06
         Assignee: Doug Cutting
         Priority: Minor  (was: Major)

It will be much easier to remove everything that's deprecated at the start of a release cycle.  So I'll try to do this as soon as 0.8 is released, before the first 0.9.0 commit.  That way folks who compile against 0.8.0 without deprecation warnings should be able to upgrade to 0.9.0.

> remove deprecations
> -------------------
>
>                 Key: HADOOP-655
>                 URL: http://issues.apache.org/jira/browse/HADOOP-655
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>            Priority: Minor
>             Fix For: 0.9.0
>
>
> Code deprecated in the 0.6 release and earlier should be removed before 0.8 is released.
> Can folks think of exceptions?  Probably UTF8.  Any others?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 21:58:39 2006
Return-Path: 
 <hadoop-dev-return-4732-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91549 invoked from network); 1 Nov 2006 21:58:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 21:58:39 -0000
Received: (qmail 58597 invoked by uid 500); 1 Nov 2006 21:58:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58380 invoked by uid 500); 1 Nov 2006 21:58:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58371 invoked by uid 99); 1 Nov 2006 21:58:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 13:58:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 13:58:37 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A70247142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 13:58:17 -0800 (PST)
Message-ID: <15706653.1162418297681.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 13:58:17 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-203) remove deprecated java.io.File
 methods
In-Reply-To: <13879069.1147128020850.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-203?page=all ]

Doug Cutting resolved HADOOP-203.
---------------------------------

    Resolution: Duplicate

This is subsumed by HADOOP-655.

> remove deprecated java.io.File methods
> --------------------------------------
>
>                 Key: HADOOP-203
>                 URL: http://issues.apache.org/jira/browse/HADOOP-203
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>            Priority: Minor
>
> Now that the 0.2 release is out, we should remove the deprecated FileSystem methods that use java.io.File, since using org.apache.hadoop.fs.Path is less error-prone.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 22:11:39 2006
Return-Path: 
 <hadoop-dev-return-4733-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95442 invoked from network); 1 Nov 2006 22:11:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 22:11:39 -0000
Received: (qmail 81225 invoked by uid 500); 1 Nov 2006 22:11:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81191 invoked by uid 500); 1 Nov 2006 22:11:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81182 invoked by uid 99); 1 Nov 2006 22:11:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:11:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:11:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B77F47142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 14:11:17 -0800 (PST)
Message-ID: <23561048.1162419077748.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 14:11:17 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-630) The web/ui for the JobTracker doesn't
 come up until after the namenode is out of safe mode
In-Reply-To: <28675413.1161707536626.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-630?page=all ]

Owen O'Malley updated HADOOP-630:
---------------------------------

    Fix Version/s:     (was: 0.8.0)

> The web/ui for the JobTracker doesn't come up until after the namenode is out of safe mode
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-630
>                 URL: http://issues.apache.org/jira/browse/HADOOP-630
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>
> The http status server for the job tracker isn't initialized until after the working directory is cleared, meaning that it can't happen until after the name node leaves safe mode. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 22:11:40 2006
Return-Path: 
 <hadoop-dev-return-4734-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95490 invoked from network); 1 Nov 2006 22:11:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 22:11:40 -0000
Received: (qmail 81662 invoked by uid 500); 1 Nov 2006 22:11:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81443 invoked by uid 500); 1 Nov 2006 22:11:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81434 invoked by uid 99); 1 Nov 2006 22:11:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:11:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:11:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 03DA27142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 14:11:19 -0800 (PST)
Message-ID: <11088707.1162419079013.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 14:11:19 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-600) Race condition in JobTracker updating
 the task tracker's status while declaring it lost
In-Reply-To: <12024422.1160671837003.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-600?page=all ]

Owen O'Malley updated HADOOP-600:
---------------------------------

    Fix Version/s: 0.9.0
                       (was: 0.8.0)

> Race condition in JobTracker updating the task tracker's status while declaring it lost
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-600
>                 URL: http://issues.apache.org/jira/browse/HADOOP-600
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>
> There was a case where the JobTracker lost track of a set of tasks that were on a task tracker. It appears to be a race condition because the ExpireTrackers thread doesn't lock the JobTracker while updating the state. The fix would be to build a list of dead task trackers and then lock the job tracker while updating their status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 22:11:42 2006
Return-Path: 
 <hadoop-dev-return-4735-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95539 invoked from network); 1 Nov 2006 22:11:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 22:11:42 -0000
Received: (qmail 81726 invoked by uid 500); 1 Nov 2006 22:11:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81701 invoked by uid 500); 1 Nov 2006 22:11:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81692 invoked by uid 99); 1 Nov 2006 22:11:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:11:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:11:40 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4748E7142F0
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 14:11:20 -0800 (PST)
Message-ID: <12609127.1162419080289.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 14:11:20 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-601) we need some rpc retry framework
In-Reply-To: <18721500.1160688154977.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-601?page=all ]

Owen O'Malley updated HADOOP-601:
---------------------------------

        Fix Version/s:     (was: 0.8.0)
    Affects Version/s: 0.7.2

> we need some rpc retry framework
> --------------------------------
>
>                 Key: HADOOP-601
>                 URL: http://issues.apache.org/jira/browse/HADOOP-601
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>
> We need some mechanism for RPC calls that get exceptions to automatically retry the call under certain circumstances. In particular, we often end up with calls to rpcs being wrapped with retry loops for timeouts. We should be able to make a retrying proxy that will call the rpc and retry in some circumstances.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 22:13:39 2006
Return-Path: 
 <hadoop-dev-return-4736-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95936 invoked from network); 1 Nov 2006 22:13:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 22:13:39 -0000
Received: (qmail 84924 invoked by uid 500); 1 Nov 2006 22:13:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84887 invoked by uid 500); 1 Nov 2006 22:13:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84877 invoked by uid 99); 1 Nov 2006 22:13:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:13:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:13:37 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B20EE7142DC
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 14:13:17 -0800 (PST)
Message-ID: <7920519.1162419197727.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 14:13:17 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-639?page=all ]

Owen O'Malley updated HADOOP-639:
---------------------------------

    Fix Version/s: 0.9.0
                       (was: 0.8.0)

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 22:15:39 2006
Return-Path: 
 <hadoop-dev-return-4737-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96419 invoked from network); 1 Nov 2006 22:15:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 22:15:39 -0000
Received: (qmail 88694 invoked by uid 500); 1 Nov 2006 22:15:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88672 invoked by uid 500); 1 Nov 2006 22:15:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88663 invoked by uid 99); 1 Nov 2006 22:15:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:15:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:15:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BC67A7142DC
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 14:15:17 -0800 (PST)
Message-ID: <10759437.1162419317762.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 14:15:17 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-667) Path configuration properties should
 not be comma separated
In-Reply-To: <23824706.1162403896582.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-667?page=comments#action_12446390 ] 
            
Yoram Arnon commented on HADOOP-667:
------------------------------------

dfs.data.dir too.
care is required when making a change to maintain backwards compatibility with current configuratins

> Path configuration properties should not be comma separated
> -----------------------------------------------------------
>
>                 Key: HADOOP-667
>                 URL: http://issues.apache.org/jira/browse/HADOOP-667
>             Project: Hadoop
>          Issue Type: Bug
>          Components: fs
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>            Priority: Minor
>
> A few configuration properties allow multiple directory paths separated by comma's (,).  Since comma is a valid character for a directory name, it should not be used as a path separator.
> At a minimum, this applies to these properties:
>      mapred.local.dir
>      dfs.name.dir
> [ I also wonder how robust the implementation is against paths that contain spaces. ]

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 22:22:39 2006
Return-Path: 
 <hadoop-dev-return-4738-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98066 invoked from network); 1 Nov 2006 22:22:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 22:22:39 -0000
Received: (qmail 96620 invoked by uid 500); 1 Nov 2006 22:22:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96588 invoked by uid 500); 1 Nov 2006 22:22:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96579 invoked by uid 99); 1 Nov 2006 22:22:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:22:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:22:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 652607142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 14:22:18 -0800 (PST)
Message-ID: <26695993.1162419738411.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 14:22:18 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-629) none of the rpc servers check the
 protcol name for validity
In-Reply-To: <8479558.1161668116777.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-629?page=all ]

Owen O'Malley updated HADOOP-629:
---------------------------------

    Fix Version/s: 0.9.0
                       (was: 0.8.0)

> none of the rpc servers check the protcol name for validity
> -----------------------------------------------------------
>
>                 Key: HADOOP-629
>                 URL: http://issues.apache.org/jira/browse/HADOOP-629
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Wendy Chien
>             Fix For: 0.9.0
>
>
> All of the Hadoop RPC servers either ignore the protocol name or do:
> if (protocol.equals(Prot1.class.getName()) {
>   return Prot1.versionId;
> } else {
>   return Prot2.versionId;
> }
> A much better structure would be:
> if (Prot1.class.getName().equals(protocol)) {
>   return Prot1.versionId;
> } else if (Prot2.class.getName().equals(protocol)) {
>   return Prot2.versionId;
> } else {
>   throw new VersionMismatchException("Expected protocol Prot1 or Prot2 and received: " + protocol);
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 22:24:40 2006
Return-Path: 
 <hadoop-dev-return-4739-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98536 invoked from network); 1 Nov 2006 22:24:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 22:24:40 -0000
Received: (qmail 98316 invoked by uid 500); 1 Nov 2006 22:24:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98287 invoked by uid 500); 1 Nov 2006 22:24:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98278 invoked by uid 99); 1 Nov 2006 22:24:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:24:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:24:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BDF4A7142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 14:24:18 -0800 (PST)
Message-ID: <18295.1162419858775.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 14:24:18 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-632) dfs -report lists "missing" datanodes
In-Reply-To: <10683289.1161707896682.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-632?page=all ]

Owen O'Malley updated HADOOP-632:
---------------------------------

    Fix Version/s: 0.9.0
                       (was: 0.8.0)

> dfs -report lists "missing" datanodes
> -------------------------------------
>
>                 Key: HADOOP-632
>                 URL: http://issues.apache.org/jira/browse/HADOOP-632
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Raghu Angadi
>             Fix For: 0.9.0
>
>
> "dfs -report" lists all nodes that have ever registered. It should only list the "alive" nodes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 22:24:42 2006
Return-Path: 
 <hadoop-dev-return-4740-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98585 invoked from network); 1 Nov 2006 22:24:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 22:24:42 -0000
Received: (qmail 98561 invoked by uid 500); 1 Nov 2006 22:24:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98539 invoked by uid 500); 1 Nov 2006 22:24:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98530 invoked by uid 99); 1 Nov 2006 22:24:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:24:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:24:40 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C82577142DC
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 14:24:20 -0800 (PST)
Message-ID: <11778953.1162419860817.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 14:24:20 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Owen O'Malley updated HADOOP-538:
---------------------------------

    Fix Version/s: 0.9.0
                       (was: 0.8.0)

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 22:24:44 2006
Return-Path: 
 <hadoop-dev-return-4741-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98624 invoked from network); 1 Nov 2006 22:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 22:24:44 -0000
Received: (qmail 98814 invoked by uid 500); 1 Nov 2006 22:24:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98791 invoked by uid 500); 1 Nov 2006 22:24:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98782 invoked by uid 99); 1 Nov 2006 22:24:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:24:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:24:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D2FA87142EF
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 14:24:22 -0800 (PST)
Message-ID: <4587013.1162419862861.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 14:24:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-525) Need raw comparators for hadoop record
 types
In-Reply-To: <23311423.1158101362457.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-525?page=all ]

Owen O'Malley updated HADOOP-525:
---------------------------------

    Fix Version/s: 0.9.0
                       (was: 0.8.0)

> Need raw comparators for hadoop record types
> --------------------------------------------
>
>                 Key: HADOOP-525
>                 URL: http://issues.apache.org/jira/browse/HADOOP-525
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: TypeBuilder-support.tar, TypeBuilder.java, WordCountType.java
>
>
> Raw comparators are not generated for types that are generated with the Hadoop record framework. This could have a substantial performance impact when using hadoop record generated types in Map/Reduce. The record i/o framework should auto-generate raw comparators for types.
> Comparison for hadoop record i/o types is defined to be member wise comparison of objects. A possible implementation could only deserialize one member from each object at a time, compare them and either return or move on to the next member if the values are equal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 22:24:47 2006
Return-Path: 
 <hadoop-dev-return-4742-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98680 invoked from network); 1 Nov 2006 22:24:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 22:24:47 -0000
Received: (qmail 99078 invoked by uid 500); 1 Nov 2006 22:24:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99053 invoked by uid 500); 1 Nov 2006 22:24:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99044 invoked by uid 99); 1 Nov 2006 22:24:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:24:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:24:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A23877142F3
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 14:24:25 -0800 (PST)
Message-ID: <15028926.1162419865661.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 14:24:25 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-611?page=all ]

Owen O'Malley updated HADOOP-611:
---------------------------------

    Fix Version/s: 0.9.0
                       (was: 0.8.0)

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: merge.patch, merge.patch
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 22:26:41 2006
Return-Path: 
 <hadoop-dev-return-4744-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99004 invoked from network); 1 Nov 2006 22:26:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 22:26:41 -0000
Received: (qmail 597 invoked by uid 500); 1 Nov 2006 22:26:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 136 invoked by uid 500); 1 Nov 2006 22:26:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 113 invoked by uid 99); 1 Nov 2006 22:26:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:26:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:26:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A7FC27142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 14:26:18 -0800 (PST)
Message-ID: <13556898.1162419978685.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 14:26:18 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-670) Generic types for FSNamesystem
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Generic types for FSNamesystem
------------------------------

                 Key: HADOOP-670
                 URL: http://issues.apache.org/jira/browse/HADOOP-670
             Project: Hadoop
          Issue Type: Improvement
    Affects Versions: 0.7.2
            Reporter: Konstantin Shvachko
         Assigned To: Konstantin Shvachko
             Fix For: 0.8.0
         Attachments: Generics.patch

I introduced generic types for FSNamesystem class.
I tried to keep interfaces in declarations of the member as general as possible
in order to have flexibility to change types of instances in the future.
I tried to contain changes within one java file.

I also replaced Vector types by ArrayList. Vectors are synchronized,
which we don't need since we already have top level synchronization in FSNamesystem.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 22:26:43 2006
Return-Path: 
 <hadoop-dev-return-4743-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99060 invoked from network); 1 Nov 2006 22:26:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 22:26:43 -0000
Received: (qmail 575 invoked by uid 500); 1 Nov 2006 22:26:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 133 invoked by uid 500); 1 Nov 2006 22:26:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 110 invoked by uid 99); 1 Nov 2006 22:26:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:26:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:26:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8692B7142BF
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 14:26:18 -0800 (PST)
Message-ID: <11754522.1162419978548.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 14:26:18 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-613) The final merge on the reduces should
 feed the reduce directly
In-Reply-To: <32865816.1161196175060.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-613?page=all ]

Owen O'Malley updated HADOOP-613:
---------------------------------

    Fix Version/s: 0.9.0
                       (was: 0.8.0)

> The final merge on the reduces should feed the reduce directly
> --------------------------------------------------------------
>
>                 Key: HADOOP-613
>                 URL: http://issues.apache.org/jira/browse/HADOOP-613
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.9.0
>
>
> The final merge on the input to the reduce should use the iterators from HADOOP-611 directly rather than using a round trip to disk.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 22:26:42 2006
Return-Path: 
 <hadoop-dev-return-4745-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99046 invoked from network); 1 Nov 2006 22:26:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 22:26:42 -0000
Received: (qmail 660 invoked by uid 500); 1 Nov 2006 22:26:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 644 invoked by uid 500); 1 Nov 2006 22:26:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 609 invoked by uid 99); 1 Nov 2006 22:26:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:26:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:26:40 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1216F7142DC
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 14:26:20 -0800 (PST)
Message-ID: <5620879.1162419980071.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 14:26:20 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-670) Generic types for FSNamesystem
In-Reply-To: <13556898.1162419978685.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-670?page=all ]

Konstantin Shvachko updated HADOOP-670:
---------------------------------------

    Attachment: Generics.patch

> Generic types for FSNamesystem
> ------------------------------
>
>                 Key: HADOOP-670
>                 URL: http://issues.apache.org/jira/browse/HADOOP-670
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.7.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.8.0
>
>         Attachments: Generics.patch
>
>
> I introduced generic types for FSNamesystem class.
> I tried to keep interfaces in declarations of the member as general as possible
> in order to have flexibility to change types of instances in the future.
> I tried to contain changes within one java file.
> I also replaced Vector types by ArrayList. Vectors are synchronized,
> which we don't need since we already have top level synchronization in FSNamesystem.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 22:26:43 2006
Return-Path: 
 <hadoop-dev-return-4746-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99071 invoked from network); 1 Nov 2006 22:26:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 22:26:43 -0000
Received: (qmail 860 invoked by uid 500); 1 Nov 2006 22:26:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 833 invoked by uid 500); 1 Nov 2006 22:26:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 801 invoked by uid 99); 1 Nov 2006 22:26:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:26:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 14:26:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 75AE67142F0
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 14:26:21 -0800 (PST)
Message-ID: <8756022.1162419981479.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 14:26:21 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-670) Generic types for FSNamesystem
In-Reply-To: <13556898.1162419978685.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-670?page=all ]

Konstantin Shvachko updated HADOOP-670:
---------------------------------------

    Status: Patch Available  (was: Open)

> Generic types for FSNamesystem
> ------------------------------
>
>                 Key: HADOOP-670
>                 URL: http://issues.apache.org/jira/browse/HADOOP-670
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.7.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.8.0
>
>         Attachments: Generics.patch
>
>
> I introduced generic types for FSNamesystem class.
> I tried to keep interfaces in declarations of the member as general as possible
> in order to have flexibility to change types of instances in the future.
> I tried to contain changes within one java file.
> I also replaced Vector types by ArrayList. Vectors are synchronized,
> which we don't need since we already have top level synchronization in FSNamesystem.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 23:05:40 2006
Return-Path: 
 <hadoop-dev-return-4747-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9591 invoked from network); 1 Nov 2006 23:05:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 23:05:40 -0000
Received: (qmail 40936 invoked by uid 500); 1 Nov 2006 23:05:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40710 invoked by uid 500); 1 Nov 2006 23:05:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40701 invoked by uid 99); 1 Nov 2006 23:05:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 15:05:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 15:05:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C0FE87142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 15:05:17 -0800 (PST)
Message-ID: <7674895.1162422317788.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 15:05:17 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-647) Map outputs can't have a different
 type of compression from the reduce outputs
In-Reply-To: <5320427.1161928276635.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-647?page=all ]

Owen O'Malley updated HADOOP-647:
---------------------------------

    Attachment: map-out-compress-type-2.patch

This is the patch with the change of default that Doug suggested.

> Map outputs can't have a different type of compression from the reduce outputs
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-647
>                 URL: http://issues.apache.org/jira/browse/HADOOP-647
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.8.0
>
>         Attachments: map-out-compress-type-2.patch, map-out-compress-type.patch
>
>
> Right now there is only a single knob to control the compression type for sequence files. Sorting and merging is faster with record compression, but the files are smaller with block compression. I'd like to introduce a mapOutputCompressionType that lets the application control how the map outputs are compressed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 23:30:37 2006
Return-Path: 
 <hadoop-dev-return-4748-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17108 invoked from network); 1 Nov 2006 23:30:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 23:30:37 -0000
Received: (qmail 74035 invoked by uid 500); 1 Nov 2006 23:30:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74006 invoked by uid 500); 1 Nov 2006 23:30:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73997 invoked by uid 99); 1 Nov 2006 23:30:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 15:30:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 15:30:36 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8D6B67142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 15:30:16 -0800 (PST)
Message-ID: <30087836.1162423816576.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 15:30:16 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-671) Distributed cache creates unnecessary
 symlinks if asked for creating symlinks
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Distributed cache creates unnecessary symlinks if asked for creating symlinks
-----------------------------------------------------------------------------

                 Key: HADOOP-671
                 URL: http://issues.apache.org/jira/browse/HADOOP-671
             Project: Hadoop
          Issue Type: Bug
            Reporter: Mahadev konar
         Assigned To: Mahadev konar
             Fix For: 0.8.0


DistributedCache should check if the symlink has already been created and then only create the symlink. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 23:32:39 2006
Return-Path: 
 <hadoop-dev-return-4749-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17369 invoked from network); 1 Nov 2006 23:32:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 23:32:39 -0000
Received: (qmail 75285 invoked by uid 500); 1 Nov 2006 23:32:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75061 invoked by uid 500); 1 Nov 2006 23:32:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75052 invoked by uid 99); 1 Nov 2006 23:32:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 15:32:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 15:32:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B27FE7142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 15:32:17 -0800 (PST)
Message-ID: <24217511.1162423937728.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 15:32:17 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-671) Distributed cache creates unnecessary
 symlinks if asked for creating symlinks
In-Reply-To: <30087836.1162423816576.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-671?page=all ]

Mahadev konar updated HADOOP-671:
---------------------------------

    Attachment: symlink.patch

This patch checks to see if the symlink has already been created and does not try creating it again. 

> Distributed cache creates unnecessary symlinks if asked for creating symlinks
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-671
>                 URL: http://issues.apache.org/jira/browse/HADOOP-671
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>             Fix For: 0.8.0
>
>         Attachments: symlink.patch
>
>
> DistributedCache should check if the symlink has already been created and then only create the symlink. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  1 23:32:40 2006
Return-Path: 
 <hadoop-dev-return-4750-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17408 invoked from network); 1 Nov 2006 23:32:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 23:32:40 -0000
Received: (qmail 75398 invoked by uid 500); 1 Nov 2006 23:32:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75313 invoked by uid 500); 1 Nov 2006 23:32:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75304 invoked by uid 99); 1 Nov 2006 23:32:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 15:32:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 15:32:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EFB7E7142DC
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 15:32:18 -0800 (PST)
Message-ID: <17179289.1162423938979.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 15:32:18 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-671) Distributed cache creates unnecessary
 symlinks if asked for creating symlinks
In-Reply-To: <30087836.1162423816576.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-671?page=all ]

Mahadev konar updated HADOOP-671:
---------------------------------

    Status: Patch Available  (was: Open)

> Distributed cache creates unnecessary symlinks if asked for creating symlinks
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-671
>                 URL: http://issues.apache.org/jira/browse/HADOOP-671
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>             Fix For: 0.8.0
>
>         Attachments: symlink.patch
>
>
> DistributedCache should check if the symlink has already been created and then only create the symlink. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 02:37:39 2006
Return-Path: 
 <hadoop-dev-return-4751-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84259 invoked from network); 2 Nov 2006 02:37:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 02:37:39 -0000
Received: (qmail 67607 invoked by uid 500); 2 Nov 2006 02:37:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67567 invoked by uid 500); 2 Nov 2006 02:37:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67549 invoked by uid 99); 2 Nov 2006 02:37:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 18:37:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 18:37:37 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ACA247142EF
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 18:37:17 -0800 (PST)
Message-ID: <32275847.1162435037704.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 18:37:17 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-373) Some calls to mkdirs do not check
 return value
In-Reply-To: <19322325.1153351633892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-373?page=all ]

Doug Cutting updated HADOOP-373:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I just committed this.  Thanks, Wendy!

> Some calls to mkdirs do not check return value
> ----------------------------------------------
>
>                 Key: HADOOP-373
>                 URL: http://issues.apache.org/jira/browse/HADOOP-373
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>             Fix For: 0.8.0
>
>         Attachments: mkdirscheck3.patch
>
>
> Some calls to mkdirs do not check if mkdirs failed.  
> Arun noticed this while looking at HADOOP-281.  Since this issue is actually a separate issue from the mkdirs implementation issue of HADOOP-281, I created a new bug for it.   

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 02:48:39 2006
Return-Path: 
 <hadoop-dev-return-4752-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85762 invoked from network); 2 Nov 2006 02:48:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 02:48:39 -0000
Received: (qmail 73898 invoked by uid 500); 2 Nov 2006 02:48:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73870 invoked by uid 500); 2 Nov 2006 02:48:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73858 invoked by uid 99); 2 Nov 2006 02:48:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 18:48:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 18:48:37 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B24097142FC
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 18:48:17 -0800 (PST)
Message-ID: <30440907.1162435697727.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 18:48:17 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-670) Generic types for FSNamesystem
In-Reply-To: <13556898.1162419978685.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-670?page=all ]

Doug Cutting updated HADOOP-670:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Konstantin.

> Generic types for FSNamesystem
> ------------------------------
>
>                 Key: HADOOP-670
>                 URL: http://issues.apache.org/jira/browse/HADOOP-670
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.7.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.8.0
>
>         Attachments: Generics.patch
>
>
> I introduced generic types for FSNamesystem class.
> I tried to keep interfaces in declarations of the member as general as possible
> in order to have flexibility to change types of instances in the future.
> I tried to contain changes within one java file.
> I also replaced Vector types by ArrayList. Vectors are synchronized,
> which we don't need since we already have top level synchronization in FSNamesystem.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 02:55:39 2006
Return-Path: 
 <hadoop-dev-return-4753-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86864 invoked from network); 2 Nov 2006 02:55:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 02:55:39 -0000
Received: (qmail 78220 invoked by uid 500); 2 Nov 2006 02:55:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78200 invoked by uid 500); 2 Nov 2006 02:55:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78191 invoked by uid 99); 2 Nov 2006 02:55:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 18:55:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 18:55:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CF56D7142FC
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 18:55:17 -0800 (PST)
Message-ID: <572794.1162436117846.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 18:55:17 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-647) Map outputs can't have a different
 type of compression from the reduce outputs
In-Reply-To: <5320427.1161928276635.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-647?page=all ]

Doug Cutting updated HADOOP-647:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> Map outputs can't have a different type of compression from the reduce outputs
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-647
>                 URL: http://issues.apache.org/jira/browse/HADOOP-647
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.8.0
>
>         Attachments: map-out-compress-type-2.patch, map-out-compress-type.patch
>
>
> Right now there is only a single knob to control the compression type for sequence files. Sorting and merging is faster with record compression, but the files are smaller with block compression. I'd like to introduce a mapOutputCompressionType that lets the application control how the map outputs are compressed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 03:49:48 2006
Return-Path: 
 <hadoop-dev-return-4754-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95595 invoked from network); 2 Nov 2006 03:49:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 03:49:48 -0000
Received: (qmail 13064 invoked by uid 500); 2 Nov 2006 03:49:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13035 invoked by uid 500); 2 Nov 2006 03:49:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13026 invoked by uid 99); 2 Nov 2006 03:49:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 19:49:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 19:49:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4916C7142F0
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 19:49:18 -0800 (PST)
Message-ID: <14500291.1162439358296.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 19:49:18 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-632) dfs -report lists "missing"
 datanodes
In-Reply-To: <10683289.1161707896682.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-632?page=comments#action_12446441 ] 
            
Konstantin Shvachko commented on HADOOP-632:
--------------------------------------------

There are 2 different methods in the NameNode
datanodeReport() and DFSNodesStatus(), which have the same purpose.
It would be good to join them and use the same function for reporting
nodes through DFSShell and web UI.

> dfs -report lists "missing" datanodes
> -------------------------------------
>
>                 Key: HADOOP-632
>                 URL: http://issues.apache.org/jira/browse/HADOOP-632
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Raghu Angadi
>             Fix For: 0.9.0
>
>
> "dfs -report" lists all nodes that have ever registered. It should only list the "alive" nodes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 04:30:39 2006
Return-Path: 
 <hadoop-dev-return-4755-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5111 invoked from network); 2 Nov 2006 04:30:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 04:30:39 -0000
Received: (qmail 63695 invoked by uid 500); 2 Nov 2006 04:30:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63475 invoked by uid 500); 2 Nov 2006 04:30:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63466 invoked by uid 99); 2 Nov 2006 04:30:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 20:30:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 20:30:37 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B25E37142BF
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 20:30:17 -0800 (PST)
Message-ID: <18511578.1162441817728.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 20:30:17 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-671) Distributed cache creates unnecessary
 symlinks if asked for creating symlinks
In-Reply-To: <30087836.1162423816576.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-671?page=all ]

Doug Cutting updated HADOOP-671:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Mahadev.

> Distributed cache creates unnecessary symlinks if asked for creating symlinks
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-671
>                 URL: http://issues.apache.org/jira/browse/HADOOP-671
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>             Fix For: 0.8.0
>
>         Attachments: symlink.patch
>
>
> DistributedCache should check if the symlink has already been created and then only create the symlink. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 07:12:42 2006
Return-Path: 
 <hadoop-dev-return-4756-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46081 invoked from network); 2 Nov 2006 07:12:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 07:12:42 -0000
Received: (qmail 20181 invoked by uid 500); 2 Nov 2006 07:12:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20158 invoked by uid 500); 2 Nov 2006 07:12:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20147 invoked by uid 99); 2 Nov 2006 07:12:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 23:12:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 23:12:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D46B37142EF
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 23:12:20 -0800 (PST)
Message-ID: <17921558.1162451540867.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 23:12:20 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-489) Seperating user logs from system logs
 in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-489?page=all ]

Arun C Murthy updated HADOOP-489:
---------------------------------

    Attachment: HADOOP-489_20061102.patch

Slight fixes wrt reading bytes instead of Strings in TaskRunner.logStream.

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-489_20061019.patch, HADOOP-489_20061101.patch, HADOOP-489_20061102.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 07:14:38 2006
Return-Path: 
 <hadoop-dev-return-4757-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46402 invoked from network); 2 Nov 2006 07:14:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 07:14:38 -0000
Received: (qmail 21600 invoked by uid 500); 2 Nov 2006 07:14:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21574 invoked by uid 500); 2 Nov 2006 07:14:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21565 invoked by uid 99); 2 Nov 2006 07:14:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 23:14:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 23:14:37 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A4D947142C1
	for <hadoop-dev@lucene.apache.org>; Wed,  1 Nov 2006 23:14:17 -0800 (PST)
Message-ID: <15520386.1162451657672.JavaMail.root@brutus>
Date: Wed, 1 Nov 2006 23:14:17 -0800 (PST)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-667) Path configuration properties should
 not be comma separated
In-Reply-To: <23824706.1162403896582.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-667?page=comments#action_12446468 ] 
            
eric baldeschwieler commented on HADOOP-667:
--------------------------------------------

humm, so how do we specify a list of paths?

sounds like a conversation about quoting conventions is needed

> Path configuration properties should not be comma separated
> -----------------------------------------------------------
>
>                 Key: HADOOP-667
>                 URL: http://issues.apache.org/jira/browse/HADOOP-667
>             Project: Hadoop
>          Issue Type: Bug
>          Components: fs
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>            Priority: Minor
>
> A few configuration properties allow multiple directory paths separated by comma's (,).  Since comma is a valid character for a directory name, it should not be used as a path separator.
> At a minimum, this applies to these properties:
>      mapred.local.dir
>      dfs.name.dir
> [ I also wonder how robust the implementation is against paths that contain spaces. ]

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 08:37:40 2006
Return-Path: 
 <hadoop-dev-return-4758-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76860 invoked from network); 2 Nov 2006 08:37:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 08:37:40 -0000
Received: (qmail 26180 invoked by uid 500); 2 Nov 2006 08:37:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26147 invoked by uid 500); 2 Nov 2006 08:37:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26125 invoked by uid 99); 2 Nov 2006 08:37:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 00:37:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 00:37:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A283A7142DC
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 00:37:17 -0800 (PST)
Message-ID: <16125205.1162456637663.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 00:37:17 -0800 (PST)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-659) Boost the priority of re-replicating
 blocks that are far from their replication target
In-Reply-To: <25996777.1162326616585.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-659?page=comments#action_12446507 ] 
            
eric baldeschwieler commented on HADOOP-659:
--------------------------------------------

why not maintain a total order?

> Boost the priority of re-replicating blocks that are far from their replication target
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-659
>                 URL: http://issues.apache.org/jira/browse/HADOOP-659
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>
> I see two types of replications that should be accelerated compared to all others.
> 1. Blocks that have only one remaining copy (but are required to have higher replication).
> 2. Blocks that have less than 1/3 of their replicas in place.
> The latter occurs when map/reduce sets replication of certain files to 10, and we want
> it happen fast to achieve better performance on the tasks.
> So I think we should distinguish two major groups of under-replicated blocks:
> first-priority (having only 1 copy or less than 1/3 of required replicas), and the rest.
> The name-node places first-priority blocks into the beginning of the neededReplication
> list, and the rest are placed at the end. That way the first-priority blocks will be replicated
> first and then the others.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 11:47:43 2006
Return-Path: 
 <hadoop-dev-return-4759-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38077 invoked from network); 2 Nov 2006 11:47:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 11:47:43 -0000
Received: (qmail 74447 invoked by uid 500); 2 Nov 2006 11:47:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74425 invoked by uid 500); 2 Nov 2006 11:47:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74392 invoked by uid 99); 2 Nov 2006 11:47:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 03:47:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 03:47:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 156467142F0
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 03:47:21 -0800 (PST)
Message-ID: <297818.1162468041085.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 03:47:21 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Attachment: Hadoop-76_1.patch

Here is update patch for review

changes in this patch 
 - Moved temp files to (mapred.system.dir)/<jobid> 
-  2 new variables in TIP - 
        -    runningTasks ( to track currently running instances of attempts for same task, earlier this was done using a boolean) 
        -    hasCompletedTask ( for reduces if a attempts succeeds then all subsequent failures for same TIP should be ignored, existing setup tries to schedule another task for that.) 
- Added a phaseFileSystem, which takes a jobid, tipid, taskid and creates all files in (mapred.system.dir)/<jobid>/<tipid>/<taskid>, these are moved to their final location on commit or deleted. 
- Task Constructor needs tip id now, its passed in RPC as well. 
- Task.localizeConfiguration adds tip id to conf. 
- Minor change in FSDirectory to add exception message in log if rename fails. 

+Planning to add an example for using PhasedFileSystem - changing RandomWriter to use PhasedFileSystem, as Devaraj suggested in a separate patch on the same issue. 

thanks owen for review. 

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 13:51:56 2006
Return-Path: 
 <hadoop-dev-return-4760-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74704 invoked from network); 2 Nov 2006 13:51:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 13:51:56 -0000
Received: (qmail 3626 invoked by uid 500); 2 Nov 2006 13:51:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3547 invoked by uid 500); 2 Nov 2006 13:51:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3519 invoked by uid 99); 2 Nov 2006 13:51:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 05:51:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 05:51:40 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9B3887142C1
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 05:51:20 -0800 (PST)
Message-ID: <7524518.1162475480633.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 05:51:20 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-565) Upgrade Jetty to 6.x
In-Reply-To: <17704060.1159552279561.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-565?page=comments#action_12446606 ] 
            
Sanjay Dahiya commented on HADOOP-565:
--------------------------------------

What seems to be happening is that info port and RPC port for tasktracker is assigned consecutively in MiniMRTestCluster. Somehow after port rolling the http port is identified as RPC port. I changed the port allocation in MiniMRCluster.java:116 and stopped getting this exception. 

                jc.setInt("mapred.task.tracker.info.port", taskTrackerPort++);
                jc.setInt("mapred.task.tracker.report.port", taskTrackerPort++);

changed above to non consecutive numbers. I will investigate this further and submit a patch for MiniMRCluster or HADOOP-565, wherever its needed. 



> Upgrade Jetty to 6.x
> --------------------
>
>                 Key: HADOOP-565
>                 URL: http://issues.apache.org/jira/browse/HADOOP-565
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-565.patch, Hadoop-565_1.patch.txt, Hadoop-565_2.patch, Hadoop-565_lib.tar.gz
>
>
> Now that Jetty 6.x has been released as stable, we should upgrade.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 16:22:41 2006
Return-Path: 
 <hadoop-dev-return-4761-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50421 invoked from network); 2 Nov 2006 16:22:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 16:22:41 -0000
Received: (qmail 75528 invoked by uid 500); 2 Nov 2006 16:22:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75458 invoked by uid 500); 2 Nov 2006 16:22:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75449 invoked by uid 99); 2 Nov 2006 16:22:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:22:51 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:22:35 -0800
Received: from [10.0.1.3] (snvvpn1-10-72-72-c211.corp.yahoo.com
 [10.72.72.211])
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id kA2GM7cX001318
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Thu, 2 Nov 2006 08:22:08 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=2FDjtw5JhICTK0rVwGh+jQiIU1o4qTzmgMT5ZTAu9fLCBDwLDkgAsyTeqgJPivIK
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <15520386.1162451657672.JavaMail.root@brutus>
References: <15520386.1162451657672.JavaMail.root@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <64659B1D-926B-4221-840D-D5368D7F32E5@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Nigel Daley <ndaley@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-667) Path configuration properties
 should not be comma separated
Date: Thu, 2 Nov 2006 08:22:08 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

The config files are XML.  Seems like multiple name/value pairs  
should work.

On Nov 1, 2006, at 11:14 PM, eric baldeschwieler (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-667? 
> page=comments#action_12446468 ]
>
> eric baldeschwieler commented on HADOOP-667:
> --------------------------------------------
>
> humm, so how do we specify a list of paths?
>
> sounds like a conversation about quoting conventions is needed
>
>> Path configuration properties should not be comma separated
>> -----------------------------------------------------------
>>
>>                 Key: HADOOP-667
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-667
>>             Project: Hadoop
>>          Issue Type: Bug
>>          Components: fs
>>    Affects Versions: 0.7.2
>>            Reporter: Nigel Daley
>>            Priority: Minor
>>
>> A few configuration properties allow multiple directory paths  
>> separated by comma's (,).  Since comma is a valid character for a  
>> directory name, it should not be used as a path separator.
>> At a minimum, this applies to these properties:
>>      mapred.local.dir
>>      dfs.name.dir
>> [ I also wonder how robust the implementation is against paths  
>> that contain spaces. ]
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Thu Nov  2 16:42:42 2006
Return-Path: 
 <hadoop-dev-return-4762-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57883 invoked from network); 2 Nov 2006 16:42:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 16:42:42 -0000
Received: (qmail 17076 invoked by uid 500); 2 Nov 2006 16:42:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17055 invoked by uid 500); 2 Nov 2006 16:42:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17046 invoked by uid 99); 2 Nov 2006 16:42:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:42:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:42:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6C86E7141B8
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 08:42:18 -0800 (PST)
Message-ID: <20617231.1162485738441.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 08:42:18 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12446647 ] 
            
Arun C Murthy commented on HADOOP-538:
--------------------------------------

To further annotate my previous comment: I believe the perception today is that src/c++ contains code to 'access' hadoop via C/C++; I think that is something worth carrying on, which is why I'd put the native code which is 'core' hadoop in src/native.

A related problem which came up during a discussion with Owen: we cannot let a single 'core-hadoop' library i.e. libhadoop.so have a direct dependency on libz.so (zlib shared-object)... this is because in future we will then need libhadoop.so have a dependency on liblzo.so (lzo library) and so on... the issue is that it will force people to install both libz.so and liblzo.so even if they want to use only of of them.

Solutions:
a) Have multiple libhadoopzlib.so libhadooplzo.so and so on. This will mean we will have multiple so's to track and load in hadoop, which could turn out to be a maintenece nightmare.
b) Supply stubs for each 'piece' i.e. zlib/lzo which have 'weak' symbols and let them get overridden on loading the actual .so.
c) Ensure the native code doesn't actually do a -lz (or -lzo) in the Makefile, but rely on dlopen/dlsym for necessary libz/liblzo calls. This means libhadoop.so doens't have a direct dependency on either libz.so/liblzo.so, is still a single share-obj with all of hadoop's native code and also lets people load whatever pieces of native code they like without paying for the rest.

Given it's relative simplicity I'd go for option c) - it's easy and effective.

Thoughts?

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 16:48:39 2006
Return-Path: 
 <hadoop-dev-return-4763-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59850 invoked from network); 2 Nov 2006 16:48:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 16:48:39 -0000
Received: (qmail 37061 invoked by uid 500); 2 Nov 2006 16:48:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37029 invoked by uid 500); 2 Nov 2006 16:48:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37020 invoked by uid 99); 2 Nov 2006 16:48:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:48:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:48:37 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A46957142BF
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 08:48:17 -0800 (PST)
Message-ID: <32390871.1162486097670.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 08:48:17 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-666) hadoop dfs  does not complain about
 unknown option
In-Reply-To: <9227649.1162357636535.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-666?page=comments#action_12446648 ] 
            
dhruba borthakur commented on HADOOP-666:
-----------------------------------------

This bug has already been fixed in release 0.7.2. This issue can be resolved.

> hadoop dfs  does not complain about unknown option
> --------------------------------------------------
>
>                 Key: HADOOP-666
>                 URL: http://issues.apache.org/jira/browse/HADOOP-666
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>            Priority: Minor
>
> No error message displayed when wrong arguments were fed to "hadoop dfs" as shown by the snippet at the end of this description.
> hadoop dfs -rmr/user/arkady/doremi /user/arkady/fuchun /user/arkady/fuchun_h /user/arkady/log /user/arkady/t /user/arkady/t1
> 06/10/31 20:11:27 INFO conf.Configuration: parsing jar:file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/hadoop/kryptonite/hadoop-0.7.1.jar!/hadoop-default.xml
> 06/10/31 20:11:27 INFO conf.Configuration: parsing file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/hadoop/kryptonite/conf/kryptonite2/hadoop-site.xml
> 06/10/31 20:11:27 INFO ipc.Client: org.apache.hadoop.io.ObjectWritable ConnectionCuller maxidletime=1000ms: starting
> nlpdev2:/home/arkady/ngrams> which hadoop
> /usr/releng/tools/hadoop/kryptonite/bin/hadoop

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 16:52:45 2006
Return-Path: 
 <hadoop-dev-return-4764-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60687 invoked from network); 2 Nov 2006 16:52:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 16:52:45 -0000
Received: (qmail 44653 invoked by uid 500); 2 Nov 2006 16:52:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44628 invoked by uid 500); 2 Nov 2006 16:52:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44610 invoked by uid 99); 2 Nov 2006 16:52:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:52:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:52:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D1B977141B8
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 08:52:19 -0800 (PST)
Message-ID: <25533220.1162486339856.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 08:52:19 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-665)  hadoop -rmr  does NOT process
 multiple arguments and does not complain
In-Reply-To: <7360665.1162357336573.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-665?page=all ]

dhruba borthakur updated HADOOP-665:
------------------------------------

    Attachment: dfsshell_multipleargs.patch

The dfsshell utility now process all command line arguments. Earlier most commands (ls,  lsr, mkdir, cat, rm, rmr and du) were processing only the first argument.

>  hadoop -rmr  does NOT process multiple arguments and does not complain
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-665
>                 URL: http://issues.apache.org/jira/browse/HADOOP-665
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: dfsshell_multipleargs.patch
>
>
> hadoop dfs -rmr /user/arkady/fuchun /user/arkady/fuchun_h /user/arkady/log /user/arkady/t /user/arkady/t1
> 06/10/31 20:15:31 INFO conf.Configuration: parsing jar:file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/
> tools/hadoop/kryptonite/hadoop-0.7.1.jar!/hadoop-default.xml
> 06/10/31 20:15:31 INFO conf.Configuration: parsing file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/
> hadoop/kryptonite/conf/kryptonite2/hadoop-site.xml
> 06/10/31 20:15:31 INFO ipc.Client: org.apache.hadoop.io.ObjectWritable
> ConnectionCuller maxidletime=1000ms: starting Deleted /user/arkady/fuchun

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 16:52:47 2006
Return-Path: 
 <hadoop-dev-return-4765-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60719 invoked from network); 2 Nov 2006 16:52:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 16:52:47 -0000
Received: (qmail 44716 invoked by uid 500); 2 Nov 2006 16:52:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44690 invoked by uid 500); 2 Nov 2006 16:52:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44677 invoked by uid 99); 2 Nov 2006 16:52:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:52:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:52:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 221767142D2
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 08:52:21 -0800 (PST)
Message-ID: <3222108.1162486341137.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 08:52:21 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-665)  hadoop -rmr  does NOT process
 multiple arguments and does not complain
In-Reply-To: <7360665.1162357336573.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-665?page=all ]

dhruba borthakur updated HADOOP-665:
------------------------------------

    Status: Patch Available  (was: Open)

The dfsshell utility now process all command line arguments. Earlier most commands (ls,  lsr, mkdir, cat, rm, rmr and du) were processing only the first argument.

>  hadoop -rmr  does NOT process multiple arguments and does not complain
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-665
>                 URL: http://issues.apache.org/jira/browse/HADOOP-665
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: dfsshell_multipleargs.patch
>
>
> hadoop dfs -rmr /user/arkady/fuchun /user/arkady/fuchun_h /user/arkady/log /user/arkady/t /user/arkady/t1
> 06/10/31 20:15:31 INFO conf.Configuration: parsing jar:file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/
> tools/hadoop/kryptonite/hadoop-0.7.1.jar!/hadoop-default.xml
> 06/10/31 20:15:31 INFO conf.Configuration: parsing file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/
> hadoop/kryptonite/conf/kryptonite2/hadoop-site.xml
> 06/10/31 20:15:31 INFO ipc.Client: org.apache.hadoop.io.ObjectWritable
> ConnectionCuller maxidletime=1000ms: starting Deleted /user/arkady/fuchun

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 16:54:39 2006
Return-Path: 
 <hadoop-dev-return-4766-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61211 invoked from network); 2 Nov 2006 16:54:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 16:54:39 -0000
Received: (qmail 47480 invoked by uid 500); 2 Nov 2006 16:54:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47461 invoked by uid 500); 2 Nov 2006 16:54:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47451 invoked by uid 99); 2 Nov 2006 16:54:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:54:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:54:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D838D7142BF
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 08:54:17 -0800 (PST)
Message-ID: <7999992.1162486457883.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 08:54:17 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-665)  hadoop -rmr  does NOT process
 multiple arguments and does not complain
In-Reply-To: <7360665.1162357336573.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-665?page=all ]

dhruba borthakur updated HADOOP-665:
------------------------------------

    Component/s: dfs
       Priority: Minor  (was: Major)

>  hadoop -rmr  does NOT process multiple arguments and does not complain
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-665
>                 URL: http://issues.apache.org/jira/browse/HADOOP-665
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: dfsshell_multipleargs.patch
>
>
> hadoop dfs -rmr /user/arkady/fuchun /user/arkady/fuchun_h /user/arkady/log /user/arkady/t /user/arkady/t1
> 06/10/31 20:15:31 INFO conf.Configuration: parsing jar:file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/
> tools/hadoop/kryptonite/hadoop-0.7.1.jar!/hadoop-default.xml
> 06/10/31 20:15:31 INFO conf.Configuration: parsing file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/
> hadoop/kryptonite/conf/kryptonite2/hadoop-site.xml
> 06/10/31 20:15:31 INFO ipc.Client: org.apache.hadoop.io.ObjectWritable
> ConnectionCuller maxidletime=1000ms: starting Deleted /user/arkady/fuchun

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 17:47:44 2006
Return-Path: 
 <hadoop-dev-return-4767-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77072 invoked from network); 2 Nov 2006 17:47:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 17:47:44 -0000
Received: (qmail 64865 invoked by uid 500); 2 Nov 2006 17:47:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64823 invoked by uid 500); 2 Nov 2006 17:47:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64765 invoked by uid 99); 2 Nov 2006 17:47:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 09:47:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 09:47:40 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DE3817142F3
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 09:47:19 -0800 (PST)
Message-ID: <26965580.1162489639907.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 09:47:19 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-672) dfs shell enhancements
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

dfs shell enhancements
----------------------

                 Key: HADOOP-672
                 URL: http://issues.apache.org/jira/browse/HADOOP-672
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Yoram Arnon
         Assigned To: dhruba borthakur
            Priority: Minor


 A few enhancements to  dfsshell:

Bring the wiki page up to date with the latest functionality if  that's not done already.
Add a -help option to the command.
Make the syntax line more helpful in identifying which argument to each command needs to
be a directory, a file  or a glob.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 19:24:43 2006
Return-Path: 
 <hadoop-dev-return-4768-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8614 invoked from network); 2 Nov 2006 19:24:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 19:24:43 -0000
Received: (qmail 76016 invoked by uid 500); 2 Nov 2006 19:24:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75957 invoked by uid 500); 2 Nov 2006 19:24:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75926 invoked by uid 99); 2 Nov 2006 19:24:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 11:24:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 11:24:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9CB307142FC
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 11:24:19 -0800 (PST)
Message-ID: <29795818.1162495459639.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 11:24:19 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-565) Upgrade Jetty to 6.x
In-Reply-To: <17704060.1159552279561.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-565?page=comments#action_12446705 ] 
            
Sanjay Dahiya commented on HADOOP-565:
--------------------------------------

I traced all outgoing RPC calls and http ports and they don't collide anywhere. so the error is somewhere else. 
But the error does disappears if I change ports in calls in prev post.  still looking into it .. 

> Upgrade Jetty to 6.x
> --------------------
>
>                 Key: HADOOP-565
>                 URL: http://issues.apache.org/jira/browse/HADOOP-565
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-565.patch, Hadoop-565_1.patch.txt, Hadoop-565_2.patch, Hadoop-565_lib.tar.gz
>
>
> Now that Jetty 6.x has been released as stable, we should upgrade.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 19:38:40 2006
Return-Path: 
 <hadoop-dev-return-4769-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13522 invoked from network); 2 Nov 2006 19:38:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 19:38:40 -0000
Received: (qmail 97129 invoked by uid 500); 2 Nov 2006 19:38:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96911 invoked by uid 500); 2 Nov 2006 19:38:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96900 invoked by uid 99); 2 Nov 2006 19:38:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 11:38:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 11:38:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0AB2D7142DC
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 11:38:19 -0800 (PST)
Message-ID: <6516279.1162496299041.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 11:38:19 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-459) libhdfs leaks memory when writing to
 files
In-Reply-To: <12771302.1155876793902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-459?page=all ]

Sameer Paranjpye reassigned HADOOP-459:
---------------------------------------

    Assignee: Sameer Paranjpye  (was: Wendy Chien)

> libhdfs leaks memory when writing to files
> ------------------------------------------
>
>                 Key: HADOOP-459
>                 URL: http://issues.apache.org/jira/browse/HADOOP-459
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Sameer Paranjpye
>
> hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 19:38:42 2006
Return-Path: 
 <hadoop-dev-return-4770-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13556 invoked from network); 2 Nov 2006 19:38:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 19:38:42 -0000
Received: (qmail 97396 invoked by uid 500); 2 Nov 2006 19:38:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97165 invoked by uid 500); 2 Nov 2006 19:38:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97156 invoked by uid 99); 2 Nov 2006 19:38:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 11:38:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 11:38:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DFDF87142FC
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 11:38:20 -0800 (PST)
Message-ID: <22696933.1162496300914.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 11:38:20 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-459) libhdfs leaks memory when writing
 to files
In-Reply-To: <12771302.1155876793902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-459?page=all ]

Work on HADOOP-459 started by Sameer Paranjpye.

> libhdfs leaks memory when writing to files
> ------------------------------------------
>
>                 Key: HADOOP-459
>                 URL: http://issues.apache.org/jira/browse/HADOOP-459
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Sameer Paranjpye
>
> hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 19:45:40 2006
Return-Path: 
 <hadoop-dev-return-4771-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16218 invoked from network); 2 Nov 2006 19:45:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 19:45:40 -0000
Received: (qmail 14050 invoked by uid 500); 2 Nov 2006 19:45:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14029 invoked by uid 500); 2 Nov 2006 19:45:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14020 invoked by uid 99); 2 Nov 2006 19:45:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 11:45:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 11:45:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 301547142BF
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 11:45:18 -0800 (PST)
Message-ID: <11908759.1162496718193.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 11:45:18 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-659) Boost the priority of re-replicating
 blocks that are far from their replication target
In-Reply-To: <25996777.1162326616585.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-659?page=comments#action_12446706 ] 
            
Konstantin Shvachko commented on HADOOP-659:
--------------------------------------------

If you mean the total order by the number of copies remaining
the problem is with the second case.
We have 3 healthy copies of the block and we need 10.
The total order does not boost priority of these blocks.
If you mean the total order by the number of copies missing
then we do not specifically focus on blocks having 1 remaining copy.

The main disadvantage of any total order would be maintenance costs.
Having 2 groups means that I should place nodes either in the beginning
of the list or in the end O(1).
Having total order will require log n operations for the access, and you
cannot use hash since the number of collisions is expected to be large.

> Boost the priority of re-replicating blocks that are far from their replication target
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-659
>                 URL: http://issues.apache.org/jira/browse/HADOOP-659
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>
> I see two types of replications that should be accelerated compared to all others.
> 1. Blocks that have only one remaining copy (but are required to have higher replication).
> 2. Blocks that have less than 1/3 of their replicas in place.
> The latter occurs when map/reduce sets replication of certain files to 10, and we want
> it happen fast to achieve better performance on the tasks.
> So I think we should distinguish two major groups of under-replicated blocks:
> first-priority (having only 1 copy or less than 1/3 of required replicas), and the rest.
> The name-node places first-priority blocks into the beginning of the neededReplication
> list, and the rest are placed at the end. That way the first-priority blocks will be replicated
> first and then the others.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 20:01:40 2006
Return-Path: 
 <hadoop-dev-return-4772-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24542 invoked from network); 2 Nov 2006 20:01:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 20:01:40 -0000
Received: (qmail 50109 invoked by uid 500); 2 Nov 2006 20:01:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49885 invoked by uid 500); 2 Nov 2006 20:01:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49871 invoked by uid 99); 2 Nov 2006 20:01:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 12:01:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 12:01:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E13107142C3
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 12:01:18 -0800 (PST)
Message-ID: <26091806.1162497678919.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 12:01:18 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-459) libhdfs leaks memory when writing to
 files
In-Reply-To: <12771302.1155876793902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-459?page=comments#action_12446709 ] 
            
Sameer Paranjpye commented on HADOOP-459:
-----------------------------------------

libhdfs has a number of deficiencies that need to be addressed, these are:
- Memory leaks when reading/writing HDFS files, the memory leaks occur not only in i/o operations but in a large number of functions that don't release local references to Java objects
- Filesystem and file handles obtained from libhdfs cannot be used in multiple threads
- Code needs some refactoring
  - there are a number of global functions defined in hdfsJniHelper.h, a header which is fortunately included only in one place at this time
  - system constants like O_RDONLY and O_WRONLY are re-defined
- hdfsGetPathInfo does not work if the file or directory being passed in doesn't exits
- An hdfsExists function to emulate fs.exists is not available
- a function to free the data structure allocated by hdfsGetHosts is not available
- A Configuration object is created every time a file is opened, instead of getting it with fs.getConf
- return values from java methods are not copied to the 'jvalue' type, which is unsafe and causes stack corruption in some cases




> libhdfs leaks memory when writing to files
> ------------------------------------------
>
>                 Key: HADOOP-459
>                 URL: http://issues.apache.org/jira/browse/HADOOP-459
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Sameer Paranjpye
>
> hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 20:01:42 2006
Return-Path: 
 <hadoop-dev-return-4773-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24588 invoked from network); 2 Nov 2006 20:01:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 20:01:42 -0000
Received: (qmail 50197 invoked by uid 500); 2 Nov 2006 20:01:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50177 invoked by uid 500); 2 Nov 2006 20:01:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50168 invoked by uid 99); 2 Nov 2006 20:01:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 12:01:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 12:01:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E12CF7142F6
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 12:01:20 -0800 (PST)
Message-ID: <2714357.1162497680920.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 12:01:20 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-459) libhdfs leaks memory when writing to
 files
In-Reply-To: <12771302.1155876793902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-459?page=all ]

Sameer Paranjpye updated HADOOP-459:
------------------------------------

               Status: Patch Available  (was: In Progress)
    Affects Version/s: 0.7.1
                       0.7.0
                       0.6.2
                       0.6.1
                       0.6.0

This patch attempts to address the deficiencies described above

> libhdfs leaks memory when writing to files
> ------------------------------------------
>
>                 Key: HADOOP-459
>                 URL: http://issues.apache.org/jira/browse/HADOOP-459
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.1, 0.7.0, 0.6.2, 0.6.1, 0.6.0, 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Sameer Paranjpye
>
> hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 20:03:39 2006
Return-Path: 
 <hadoop-dev-return-4774-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25173 invoked from network); 2 Nov 2006 20:03:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 20:03:39 -0000
Received: (qmail 53067 invoked by uid 500); 2 Nov 2006 20:03:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53045 invoked by uid 500); 2 Nov 2006 20:03:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53036 invoked by uid 99); 2 Nov 2006 20:03:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 12:03:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 12:03:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6C7707142C3
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 12:03:18 -0800 (PST)
Message-ID: <5548354.1162497798441.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 12:03:18 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-459) libhdfs leaks memory when writing to
 files
In-Reply-To: <12771302.1155876793902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-459?page=all ]

Sameer Paranjpye updated HADOOP-459:
------------------------------------

    Attachment: libhdfs_fixes.txt

> libhdfs leaks memory when writing to files
> ------------------------------------------
>
>                 Key: HADOOP-459
>                 URL: http://issues.apache.org/jira/browse/HADOOP-459
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>            Reporter: Christian Kunz
>         Assigned To: Sameer Paranjpye
>         Attachments: libhdfs_fixes.txt
>
>
> hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 22:03:41 2006
Return-Path: 
 <hadoop-dev-return-4775-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75551 invoked from network); 2 Nov 2006 22:03:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 22:03:41 -0000
Received: (qmail 48706 invoked by uid 500); 2 Nov 2006 22:03:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48686 invoked by uid 500); 2 Nov 2006 22:03:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48677 invoked by uid 99); 2 Nov 2006 22:03:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 14:03:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 14:03:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8448C7142F6
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 14:03:19 -0800 (PST)
Message-ID: <5776376.1162504999539.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 14:03:19 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-652) Not all Datastructures are updated
 when a block is deleted
In-Reply-To: <8743293.1161975076609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-652?page=comments#action_12446738 ] 
            
Raghu Angadi commented on HADOOP-652:
-------------------------------------


This will touch addBlock() in FSDataset.java. As part of this I would like the fix the following as well:

a) currently subdirectories are created only in the last sub directory (e.g. subdir63). 
b) remove siblings array I think it only increase s recursion in addBlock().



> Not all Datastructures are updated when a block is deleted
> ----------------------------------------------------------
>
>                 Key: HADOOP-652
>                 URL: http://issues.apache.org/jira/browse/HADOOP-652
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>
> Currently when a block is deleted, DataNode just deletes the physical file and updates its map. We need to update more things. For e.g. numBlocks in FSDir is not decremented.. effect of this would be that we will create more subdirectories than necessary. It might not show up badly yet since numBlocks gets correct value when the dataNode restarts. I have to see what else needs to be updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 23:14:42 2006
Return-Path: 
 <hadoop-dev-return-4776-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96086 invoked from network); 2 Nov 2006 23:14:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 23:14:42 -0000
Received: (qmail 68505 invoked by uid 500); 2 Nov 2006 23:14:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68384 invoked by uid 500); 2 Nov 2006 23:14:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68138 invoked by uid 99); 2 Nov 2006 23:14:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:14:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:14:36 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AADAB7142FA
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 15:14:16 -0800 (PST)
Message-ID: <4956716.1162509256690.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 15:14:16 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-673) the task execution environment should
 have a current working directory that is task specific
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

the task execution environment should have a current working directory that is task specific
--------------------------------------------------------------------------------------------

                 Key: HADOOP-673
                 URL: http://issues.apache.org/jira/browse/HADOOP-673
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.7.2
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.9.0


The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 23:25:39 2006
Return-Path: 
 <hadoop-dev-return-4777-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99339 invoked from network); 2 Nov 2006 23:25:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 23:25:39 -0000
Received: (qmail 88672 invoked by uid 500); 2 Nov 2006 23:25:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88637 invoked by uid 500); 2 Nov 2006 23:25:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88619 invoked by uid 99); 2 Nov 2006 23:25:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:25:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:25:36 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 92B0B7142DC
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 15:25:16 -0800 (PST)
Message-ID: <10006323.1162509916598.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 15:25:16 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-674) Hadoop records should provide
 comvenient APIs for serialization/deserialization
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hadoop records should provide comvenient APIs for serialization/deserialization
-------------------------------------------------------------------------------

                 Key: HADOOP-674
                 URL: http://issues.apache.org/jira/browse/HADOOP-674
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Runping Qi



I found the following APIs are very convenient to use and should be  part of the generated class from Jute IDL :

public BytesWritable serialize(String format);

public void deserialize(BytesWitable data, String format);

public static MyRecordJT deserialize(BytesWitable data, String format);



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 23:25:39 2006
Return-Path: 
 <hadoop-dev-return-4778-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99343 invoked from network); 2 Nov 2006 23:25:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 23:25:39 -0000
Received: (qmail 88679 invoked by uid 500); 2 Nov 2006 23:25:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88640 invoked by uid 500); 2 Nov 2006 23:25:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88620 invoked by uid 99); 2 Nov 2006 23:25:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:25:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:25:36 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C4E9E7142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 15:25:16 -0800 (PST)
Message-ID: <16776226.1162509916803.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 15:25:16 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-675) streaming should check the command
 line arguments for validity
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

streaming should check the command line arguments for validity
--------------------------------------------------------------

                 Key: HADOOP-675
                 URL: http://issues.apache.org/jira/browse/HADOOP-675
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
    Affects Versions: 0.7.2
            Reporter: Owen O'Malley
         Assigned To: Sanjay Dahiya
             Fix For: 0.9.0


Streaming should check the command line arguments using the commons cli parser.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 23:27:42 2006
Return-Path: 
 <hadoop-dev-return-4779-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99799 invoked from network); 2 Nov 2006 23:27:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 23:27:42 -0000
Received: (qmail 92431 invoked by uid 500); 2 Nov 2006 23:27:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92398 invoked by uid 500); 2 Nov 2006 23:27:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92389 invoked by uid 99); 2 Nov 2006 23:27:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:27:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:27:40 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3B69D7142F6
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 15:27:20 -0800 (PST)
Message-ID: <26419057.1162510040241.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 15:27:20 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-673?page=comments#action_12446770 ] 
            
Mahadev konar commented on HADOOP-673:
--------------------------------------

I do think the suggestion is right-- only that it would involve changes to hadoop-streaming and might break other applications that assume the current working directory to be the directory where the unjarred files lie. That was the only reason I chose the current working directory to be the same for all tasks, but it does seem ugly that all the tasks would share the same workspace. I can make the required changes if people agree on it.

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 23:31:42 2006
Return-Path: 
 <hadoop-dev-return-4780-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 955 invoked from network); 2 Nov 2006 23:31:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 23:31:42 -0000
Received: (qmail 138 invoked by uid 500); 2 Nov 2006 23:31:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 104 invoked by uid 500); 2 Nov 2006 23:31:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99990 invoked by uid 99); 2 Nov 2006 23:31:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:31:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:31:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6EE9E7142F6
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 15:31:18 -0800 (PST)
Message-ID: <7049157.1162510278451.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 15:31:18 -0800 (PST)
From: "Dick King (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-673?page=comments#action_12446772 ] 
            
Dick King commented on HADOOP-673:
----------------------------------

If you create links from the task-specific directory to the per-job-directory files and make the task-specific directory you'll avoid breaking existing code.  This assumes people don't write in the per-job-directory but it's tough to do that in a principled manner so I wouldn't expect that to happen.

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 23:36:38 2006
Return-Path: 
 <hadoop-dev-return-4781-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3660 invoked from network); 2 Nov 2006 23:36:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 23:36:38 -0000
Received: (qmail 12043 invoked by uid 500); 2 Nov 2006 23:36:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12019 invoked by uid 500); 2 Nov 2006 23:36:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12010 invoked by uid 99); 2 Nov 2006 23:36:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:36:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:36:36 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BD97571430F
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 15:36:16 -0800 (PST)
Message-ID: <5423204.1162510576774.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 15:36:16 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-676) JobClient should print user friendly
 messages for standard errors
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

JobClient should print user friendly messages for standard errors
-----------------------------------------------------------------

                 Key: HADOOP-676
                 URL: http://issues.apache.org/jira/browse/HADOOP-676
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.7.2
            Reporter: Owen O'Malley
         Assigned To: Sanjay Dahiya
             Fix For: 0.9.0


The exceptions for non-existent input dirs or already existing output dirs should generate user-friendly error messages. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  2 23:44:40 2006
Return-Path: 
 <hadoop-dev-return-4782-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6197 invoked from network); 2 Nov 2006 23:44:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 23:44:40 -0000
Received: (qmail 28167 invoked by uid 500); 2 Nov 2006 23:44:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28081 invoked by uid 500); 2 Nov 2006 23:44:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28070 invoked by uid 99); 2 Nov 2006 23:44:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:44:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:44:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B65C771430D
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 15:44:17 -0800 (PST)
Message-ID: <13169984.1162511057744.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 15:44:17 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-677) RPC should send a fixed header and
 version at the start of connection
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

RPC should send a fixed header and version at the start of connection
---------------------------------------------------------------------

                 Key: HADOOP-677
                 URL: http://issues.apache.org/jira/browse/HADOOP-677
             Project: Hadoop
          Issue Type: Improvement
          Components: ipc
    Affects Versions: 0.7.2
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.9.0


There have been problems with http clients connecting to the RPC servers, which causes the RPC to try and allocate huge buffers and get OutOfMemoryExceptions. I want to have a fixed prefix that is sent first that identifies it as an RPC client. To make the system compatible as much as possible, I'd make the servers accept both forms for a Hadoop release and then change the clients to send the prefix, and finally make the servers only accept the new form.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov  3 01:18:41 2006
Return-Path: 
 <hadoop-dev-return-4783-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28199 invoked from network); 3 Nov 2006 01:18:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 01:18:41 -0000
Received: (qmail 45612 invoked by uid 500); 3 Nov 2006 01:18:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45588 invoked by uid 500); 3 Nov 2006 01:18:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45579 invoked by uid 99); 3 Nov 2006 01:18:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 17:18:51 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 17:18:39 -0800
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id kA31IFof028069
	for <hadoop-dev@lucene.apache.org>; Thu, 2 Nov 2006 17:18:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=EsVwpljjt7+9LKjGkGTfC8bwiGajRlVxxJEnOrTd70wmMBGVNxaf7SpRCmkGWMGb
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <7049157.1162510278451.JavaMail.root@brutus>
References: <7049157.1162510278451.JavaMail.root@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <bada94ba469067cc90276f47b37b275f@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
Date: Thu, 2 Nov 2006 17:18:15 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org

+1 for symlinks.

On Nov 2, 2006, at 3:31 PM, Dick King (JIRA) wrote:

>     [  
> http://issues.apache.org/jira/browse/HADOOP-673? 
> page=comments#action_12446772 ]
>
> Dick King commented on HADOOP-673:
> ----------------------------------
>
> If you create links from the task-specific directory to the  
> per-job-directory files and make the task-specific directory you'll  
> avoid breaking existing code.  This assumes people don't write in the  
> per-job-directory but it's tough to do that in a principled manner so  
> I wouldn't expect that to happen.
>
>> the task execution environment should have a current working  
>> directory that is task specific
>> ---------------------------------------------------------------------- 
>> ----------------------
>>
>>                 Key: HADOOP-673
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>>             Project: Hadoop
>>          Issue Type: Bug
>>          Components: mapred
>>    Affects Versions: 0.7.2
>>            Reporter: Owen O'Malley
>>         Assigned To: Owen O'Malley
>>             Fix For: 0.9.0
>>
>>
>> The tasks should be run in a work directory that is specific to a  
>> single task. In particular, I'd suggest using the  
>> <local>/jobcache/<jobid>/<taskid> as the current working directory.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Fri Nov  3 02:59:38 2006
Return-Path: 
 <hadoop-dev-return-4784-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52421 invoked from network); 3 Nov 2006 02:59:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 02:59:38 -0000
Received: (qmail 43665 invoked by uid 500); 3 Nov 2006 02:59:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43645 invoked by uid 500); 3 Nov 2006 02:59:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43636 invoked by uid 99); 3 Nov 2006 02:59:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 18:59:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 18:59:36 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8A79B7142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 18:59:16 -0800 (PST)
Message-ID: <23206212.1162522756564.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 18:59:16 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-678)  Investigate direct buffer leaks and
 fix them.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

 Investigate direct buffer leaks and fix them.
----------------------------------------------

                 Key: HADOOP-678
                 URL: http://issues.apache.org/jira/browse/HADOOP-678
             Project: Hadoop
          Issue Type: Bug
            Reporter: Raghu Angadi
         Assigned To: Raghu Angadi



"direct memory" leaks are suspected in NameNode running out of memory. At this point I don't have much more information.

Please add any info you have if you have looked in to NameNode memory. I am taking a look at Server.java in hadoop.ipc.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov  3 03:11:39 2006
Return-Path: 
 <hadoop-dev-return-4785-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54756 invoked from network); 3 Nov 2006 03:11:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 03:11:39 -0000
Received: (qmail 53301 invoked by uid 500); 3 Nov 2006 03:11:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53276 invoked by uid 500); 3 Nov 2006 03:11:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53267 invoked by uid 99); 3 Nov 2006 03:11:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 19:11:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 19:11:37 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A9FA27142F0
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 19:11:17 -0800 (PST)
Message-ID: <512311.1162523477693.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 19:11:17 -0800 (PST)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-678)  Investigate direct buffer leaks and
 fix them.
In-Reply-To: <23206212.1162522756564.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-678?page=comments#action_12446797 ] 
            
Christian Kunz commented on HADOOP-678:
---------------------------------------

I started an issue regarding this kind of name node server memory leak: HADOOP-637

>  Investigate direct buffer leaks and fix them.
> ----------------------------------------------
>
>                 Key: HADOOP-678
>                 URL: http://issues.apache.org/jira/browse/HADOOP-678
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>
> "direct memory" leaks are suspected in NameNode running out of memory. At this point I don't have much more information.
> Please add any info you have if you have looked in to NameNode memory. I am taking a look at Server.java in hadoop.ipc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov  3 06:56:39 2006
Return-Path: 
 <hadoop-dev-return-4786-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91982 invoked from network); 3 Nov 2006 06:56:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 06:56:39 -0000
Received: (qmail 73897 invoked by uid 500); 3 Nov 2006 06:56:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73677 invoked by uid 500); 3 Nov 2006 06:56:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73663 invoked by uid 99); 3 Nov 2006 06:56:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 22:56:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 22:56:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AE9D17142F0
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 22:56:17 -0800 (PST)
Message-ID: <28177602.1162536977712.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 22:56:17 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-678)  Investigate direct buffer leaks and
 fix them.
In-Reply-To: <23206212.1162522756564.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-678?page=all ]

Raghu Angadi resolved HADOOP-678.
---------------------------------

    Resolution: Duplicate


Duplicate of HADOOP-637

>  Investigate direct buffer leaks and fix them.
> ----------------------------------------------
>
>                 Key: HADOOP-678
>                 URL: http://issues.apache.org/jira/browse/HADOOP-678
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>
> "direct memory" leaks are suspected in NameNode running out of memory. At this point I don't have much more information.
> Please add any info you have if you have looked in to NameNode memory. I am taking a look at Server.java in hadoop.ipc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov  3 06:56:40 2006
Return-Path: 
 <hadoop-dev-return-4787-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92023 invoked from network); 3 Nov 2006 06:56:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 06:56:40 -0000
Received: (qmail 74144 invoked by uid 500); 3 Nov 2006 06:56:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73922 invoked by uid 500); 3 Nov 2006 06:56:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73913 invoked by uid 99); 3 Nov 2006 06:56:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 22:56:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 22:56:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 90E087142EF
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 22:56:19 -0800 (PST)
Message-ID: <33313759.1162536979591.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 22:56:19 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-637) ipc.Server has memory leak -- serious
 issue for namenode server
In-Reply-To: <3722659.1161801316587.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-637?page=all ]

Raghu Angadi reassigned HADOOP-637:
-----------------------------------

    Assignee: Raghu Angadi

> ipc.Server has memory leak -- serious issue for namenode server
> ---------------------------------------------------------------
>
>                 Key: HADOOP-637
>                 URL: http://issues.apache.org/jira/browse/HADOOP-637
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.7.1
>            Reporter: Christian Kunz
>         Assigned To: Raghu Angadi
>
> In my environment (running a lot of batch processes each of which reads, creates, and deletes a lof of  files in dfs) the namenode server can run out of memory rather quickly (in a few hours on a 150 node cluster). The netbeans profiler shows an increasing number of direct byte buffers not garbage collected. The documentation on java.nio.ByteBuffer indicates that their allocation might (and obviously does) happen outside the normal gc-collected heap, and, therefore, it is required that direct byte buffers should only be used for long-lived objects.
> ipc.Server seems to use a 4KB direct byte buffer for every connection, but, worse, for every RPC call. If I replace the latter ones with non-direct byte buffers, the memory footprint of the namenode server increases only slowly, but even then it is just a matter of time (since I started it 24 hours ago, it leaked by about 300-400MB). If the performance increase by using direct buffers is a requirement, I would suggest to use a static pool.
> Although my environment abuses the namenode server in unusual manner, I would imagine that the memory footprint of the namenode server creeps up slowly everywhere

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov  3 07:09:41 2006
Return-Path: 
 <hadoop-dev-return-4788-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93579 invoked from network); 3 Nov 2006 07:09:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 07:09:41 -0000
Received: (qmail 85757 invoked by uid 500); 3 Nov 2006 07:09:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85532 invoked by uid 500); 3 Nov 2006 07:09:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85523 invoked by uid 99); 3 Nov 2006 07:09:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 23:09:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 23:09:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C17887142EF
	for <hadoop-dev@lucene.apache.org>; Thu,  2 Nov 2006 23:09:18 -0800 (PST)
Message-ID: <8046140.1162537758789.JavaMail.root@brutus>
Date: Thu, 2 Nov 2006 23:09:18 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-637) ipc.Server has memory leak --
 serious issue for namenode server
In-Reply-To: <3722659.1161801316587.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-637?page=comments#action_12446836 ] 
            
Raghu Angadi commented on HADOOP-637:
-------------------------------------


I am not sure if we need to use 'allocateDirect' in ipc.Server yet. According to documentation it essentially reduces one copy from native buffer to user buffer. But ipd.Server already copies data from ByteBuffer to local array anyway (in processData()).





> ipc.Server has memory leak -- serious issue for namenode server
> ---------------------------------------------------------------
>
>                 Key: HADOOP-637
>                 URL: http://issues.apache.org/jira/browse/HADOOP-637
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.7.1
>            Reporter: Christian Kunz
>         Assigned To: Raghu Angadi
>
> In my environment (running a lot of batch processes each of which reads, creates, and deletes a lof of  files in dfs) the namenode server can run out of memory rather quickly (in a few hours on a 150 node cluster). The netbeans profiler shows an increasing number of direct byte buffers not garbage collected. The documentation on java.nio.ByteBuffer indicates that their allocation might (and obviously does) happen outside the normal gc-collected heap, and, therefore, it is required that direct byte buffers should only be used for long-lived objects.
> ipc.Server seems to use a 4KB direct byte buffer for every connection, but, worse, for every RPC call. If I replace the latter ones with non-direct byte buffers, the memory footprint of the namenode server increases only slowly, but even then it is just a matter of time (since I started it 24 hours ago, it leaked by about 300-400MB). If the performance increase by using direct buffers is a requirement, I would suggest to use a static pool.
> Although my environment abuses the namenode server in unusual manner, I would imagine that the memory footprint of the namenode server creeps up slowly everywhere

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov  3 15:52:39 2006
Return-Path: 
 <hadoop-dev-return-4789-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52374 invoked from network); 3 Nov 2006 15:52:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 15:52:39 -0000
Received: (qmail 81955 invoked by uid 500); 3 Nov 2006 15:52:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81921 invoked by uid 500); 3 Nov 2006 15:52:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81909 invoked by uid 99); 3 Nov 2006 15:52:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 07:52:49 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.151.94.5] (HELO megs8.100mwh.com) (209.151.94.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 07:52:33 -0800
Received: from c-67-188-223-250.hsd1.ca.comcast.net ([67.188.223.250]
 helo=[10.0.0.106])
	by megs8.100mwh.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.52)
	id 1Gg1L2-0001kO-Vz
	for hadoop-dev@lucene.apache.org; Fri, 03 Nov 2006 08:52:13 -0700
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <47E8E655-D322-4710-9196-14FB9616A5AF@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: Owen O'Malley <owen@yahoo-inc.com>
Subject: generic types
Date: Fri, 3 Nov 2006 07:52:15 -0800
X-Mailer: Apple Mail (2.752.2)
X-AntiAbuse: This header was added to track abuse,
 please include it with any abuse report
X-AntiAbuse: Primary Hostname - megs8.100mwh.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - yahoo-inc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,
   I've noticed a couple of people over-specifying the generic  
collections. The general pattern is:

Map<Key,Value> myMap = new HashMap();

where the field is given a type of the general interface with the  
type parameters and the constructor is the specific implementation  
without the type parameters. The assignment works because in Java  
(unlike C++) every T1<T2> extends T1.  The advantage of the general  
interface (eg. "Map" instead of "HashMap") is that if you change the  
implementation later, you only need to change the constructor.

Thanks,
    Owen

From MAILER-DAEMON Fri Nov  3 17:41:42 2006
Return-Path: 
 <hadoop-dev-return-4790-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82760 invoked from network); 3 Nov 2006 17:41:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 17:41:42 -0000
Received: (qmail 39830 invoked by uid 500); 3 Nov 2006 17:41:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39783 invoked by uid 500); 3 Nov 2006 17:41:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39774 invoked by uid 99); 3 Nov 2006 17:41:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 09:41:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 09:41:40 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C9B217142F0
	for <hadoop-dev@lucene.apache.org>; Fri,  3 Nov 2006 09:41:19 -0800 (PST)
Message-ID: <5402225.1162575679823.JavaMail.root@brutus>
Date: Fri, 3 Nov 2006 09:41:19 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-76?page=comments#action_12447025 ] 
            
Sanjay Dahiya commented on HADOOP-76:
-------------------------------------

One important point that needs to be reviewed in this patch is extra checks for speculative reduce tasks in TIP. We may want to inherit some of this in spec maps too or structure it better. looking for comments on that. 

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov  3 17:46:39 2006
Return-Path: 
 <hadoop-dev-return-4791-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84960 invoked from network); 3 Nov 2006 17:46:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 17:46:39 -0000
Received: (qmail 58918 invoked by uid 500); 3 Nov 2006 17:46:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58893 invoked by uid 500); 3 Nov 2006 17:46:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58884 invoked by uid 99); 3 Nov 2006 17:46:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 09:46:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 09:46:36 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 963B17142EF
	for <hadoop-dev@lucene.apache.org>; Fri,  3 Nov 2006 09:46:16 -0800 (PST)
Message-ID: <31115053.1162575976612.JavaMail.root@brutus>
Date: Fri, 3 Nov 2006 09:46:16 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-679) add a link to the dfs from job tracker
 WI
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

add a link to the dfs from job tracker WI
-----------------------------------------

                 Key: HADOOP-679
                 URL: http://issues.apache.org/jira/browse/HADOOP-679
             Project: Hadoop
          Issue Type: New Feature
            Reporter: Yoram Arnon
         Assigned To: Owen O'Malley
            Priority: Minor


add a link to the dfs from job tracker WI

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov  3 19:24:43 2006
Return-Path: 
 <hadoop-dev-return-4792-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15692 invoked from network); 3 Nov 2006 19:24:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 19:24:43 -0000
Received: (qmail 45467 invoked by uid 500); 3 Nov 2006 19:24:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45446 invoked by uid 500); 3 Nov 2006 19:24:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45437 invoked by uid 99); 3 Nov 2006 19:24:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:24:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:24:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B084B7142DB
	for <hadoop-dev@lucene.apache.org>; Fri,  3 Nov 2006 11:24:18 -0800 (PST)
Message-ID: <17859171.1162581858720.JavaMail.root@brutus>
Date: Fri, 3 Nov 2006 11:24:18 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-459) libhdfs leaks memory when writing to
 files
In-Reply-To: <12771302.1155876793902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-459?page=all ]

Doug Cutting updated HADOOP-459:
--------------------------------

    Status: Open  (was: Patch Available)

After applying this, 'ant clean test-libhdfs' fails with:

compile-libhdfs:
    [mkdir] Created dir: /home/cutting/src/hadoop/trunk/build/libhdfs
     [exec] gcc -g -Wall -O2 -fPIC -m32 -I/home/cutting/local/jdk/include -I/home/cutting/local/jdk/include/linux -c hdfs.c -o /home/cutting/src/hadoop/trunk/build/libhdfs/hdfs.o
     [exec] hdfs.c: In function 'hdfsGetWorkingDirectory':
     [exec] hdfs.c:1048: warning: pointer targets in initialization differ in signedness
     [exec] hdfs.c:1054: warning: pointer targets in passing argument 3 of '(*env)->ReleaseStringUTFChars' differ in signedness
     [exec] hdfs.c: In function 'hdfsGetHosts':
     [exec] hdfs.c:1212: warning: pointer targets in assignment differ in signedness
     [exec] hdfs.c:1215: warning: pointer targets in passing argument 3 of '(*env)->ReleaseStringUTFChars' differ in signedness
     [exec] hdfs.c: In function 'getFileInfo':
     [exec] hdfs.c:1412: warning: pointer targets in initialization differ in signedness
     [exec] hdfs.c:1416: warning: pointer targets in passing argument 3 of '(*env)->ReleaseStringUTFChars' differ in signedness
     [exec] make: *** No rule to make target `/home/cutting/src/hadoop/trunk/build/libhdfs/hdfsJniHelper.o', needed by `/home/cutting/src/hadoop/trunk/build/libhdfs/libhdfs.so.1'.  Stop.
     [exec] Result: 2

That said, before applying it, 'ant clean test-libhdfs' fails with:

test-libhdfs:
   [delete] Deleting directory /home/cutting/src/hadoop/trunk/build/libhdfs/tests/logs
    [mkdir] Created dir: /home/cutting/src/hadoop/trunk/build/libhdfs/tests/logs     [exec] ./tests/test-libhdfs.sh
     [exec] 06/11/03 11:20:33 INFO conf.Configuration: parsing file:/home/cutting/src/hadoop/trunk/conf/hadoop-default.xml
     [exec] starting namenode, logging to /home/cutting/src/hadoop/trunk/build/libhdfs/tests/logs/hadoop-cutting-namenode-cutting-dc5100.out
     [exec] starting datanode, logging to /home/cutting/src/hadoop/trunk/build/libhdfs/tests/logs/hadoop-cutting-datanode-cutting-dc5100.out
     [exec] CLASSPATH=/home/cutting/src/hadoop/trunk/src/c++/libhdfs/tests/conf:/home/cutting/src/hadoop/trunk/conf:/home/cutting/src/hadoop/trunk/build/hadoop-0.7.3-dev.jar:/home/cutting/src/hadoop/trunk/lib/commons-cli-2.0-SNAPSHOT.jar:/home/cutting/src/hadoop/trunk/lib/commons-logging-1.0.4.jar:/home/cutting/src/hadoop/trunk/lib/commons-logging-api-1.0.4.jar:/home/cutting/src/hadoop/trunk/lib/jetty-5.1.4.jar:/home/cutting/src/hadoop/trunk/lib/junit-3.8.1.jar:/home/cutting/src/hadoop/trunk/lib/log4j-1.2.13.jar:/home/cutting/src/hadoop/trunk/lib/lucene-core-1.9.1.jar:/home/cutting/src/hadoop/trunk/lib/servlet-api.jar LD_PRELOAD=/home/cutting/src/hadoop/trunk/build/libhdfs/libhdfs.so /home/cutting/src/hadoop/trunk/build/libhdfs/hdfs_test
     [exec] 06/11/03 11:20:40 INFO conf.Configuration: parsing file:/home/cutting/src/hadoop/trunk/conf/hadoop-default.xml
     [exec] 06/11/03 11:20:40 INFO ipc.Client: org.apache.hadoop.io.ObjectWritableConnection culler maxidletime= 1000ms
     [exec] 06/11/03 11:20:40 INFO ipc.Client: org.apache.hadoop.io.ObjectWritable Connection Culler: starting
     [exec] 06/11/03 11:20:40 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:23000. Already tried 1 time(s).
     [exec] 06/11/03 11:20:41 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:23000. Already tried 2 time(s).
     [exec] 06/11/03 11:20:42 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:23000. Already tried 3 time(s).
     [exec] 06/11/03 11:20:43 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:23000. Already tried 4 time(s).
     [exec] 06/11/03 11:20:44 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:23000. Already tried 5 time(s).
     [exec] 06/11/03 11:20:45 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:23000. Already tried 6 time(s).
     [exec] 06/11/03 11:20:46 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:23000. Already tried 7 time(s).
     [exec] 06/11/03 11:20:47 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:23000. Already tried 8 time(s).
     [exec] 06/11/03 11:20:48 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:23000. Already tried 9 time(s).
     [exec] 06/11/03 11:20:49 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:23000. Already tried 10 time(s).
     [exec] Exception in thread "main" java.net.ConnectException: Connection refused
     [exec]     at java.net.PlainSocketImpl.socketConnect(Native Method)
     [exec]     at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
     [exec]     at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
     [exec]     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
     [exec]     at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
     [exec]     at java.net.Socket.connect(Socket.java:516)
     [exec]     at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:138)
     [exec]     at org.apache.hadoop.ipc.Client.getConnection(Client.java:517)
     [exec]     at org.apache.hadoop.ipc.Client.call(Client.java:445)
     [exec]     at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:164)
     [exec]     at org.apache.hadoop.dfs.$Proxy0.getProtocolVersion(Unknown Source)
     [exec]     at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:248)
     [exec]     at org.apache.hadoop.dfs.DFSClient.<init>(DFSClient.java:105)
     [exec]     at org.apache.hadoop.dfs.DistributedFileSystem.<init>(DistributedFileSystem.java:49)
     [exec]     at org.apache.hadoop.fs.FileSystem.getNamed(FileSystem.java:104)     [exec]     at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:89)
     [exec] Call to org.apache.hadoop.fs.FileSystem::get failed!
     [exec] 06/11/03 11:20:50 INFO conf.Configuration: parsing file:/home/cutting/src/hadoop/trunk/conf/hadoop-default.xml
     [exec] ./tests/test-libhdfs.sh: line 45: 26791 Aborted                 CLASSPATH=$HADOOP_CONF_DIR:$CLASSPATH LD_PRELOAD="$LIBHDFS_BUILD_DIR/libhdfs.so" $LIBHDFS_BUILD_DIR/$HDFS_TEST
     [exec] #
     [exec] # An unexpected error has been detected by HotSpot Virtual Machine:
     [exec] #
     [exec] #  SIGSEGV (0xb) at pc=0x402ff1c3, pid=26791, tid=1083387680
     [exec] #
     [exec] # Java VM: Java HotSpot(TM) Client VM (1.5.0_08-b03 mixed mode, sharing)
     [exec] # Problematic frame:
     [exec] # V  [libjvm.so+0x1a51c3]
     [exec] #
     [exec] # An error report file with more information is saved as hs_err_pid26791.log
     [exec] #
     [exec] # If you would like to submit a bug report, please visit:
     [exec] #   http://java.sun.com/webapps/bugreport/crash.jsp
     [exec] #
     [exec] stopping datanode
     [exec] no namenode to stop

BUILD SUCCESSFUL

Which is a separate issue...

> libhdfs leaks memory when writing to files
> ------------------------------------------
>
>                 Key: HADOOP-459
>                 URL: http://issues.apache.org/jira/browse/HADOOP-459
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.1, 0.7.0, 0.6.2, 0.6.1, 0.6.0, 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Sameer Paranjpye
>         Attachments: libhdfs_fixes.txt
>
>
> hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov  3 19:26:46 2006
Return-Path: 
 <hadoop-dev-return-4793-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16254 invoked from network); 3 Nov 2006 19:26:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 19:26:46 -0000
Received: (qmail 47302 invoked by uid 500); 3 Nov 2006 19:26:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47285 invoked by uid 500); 3 Nov 2006 19:26:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47180 invoked by uid 99); 3 Nov 2006 19:26:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:26:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:26:40 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8176271430D
	for <hadoop-dev@lucene.apache.org>; Fri,  3 Nov 2006 11:26:20 -0800 (PST)
Message-ID: <14020330.1162581980527.JavaMail.root@brutus>
Date: Fri, 3 Nov 2006 11:26:20 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-481) Hadoop mapred metrics should include
 per job input/output statistics rather than per-task statistics
In-Reply-To: <4146022.1156462775151.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-481?page=all ]

Doug Cutting updated HADOOP-481:
--------------------------------

    Status: Open  (was: Patch Available)

> Hadoop mapred metrics should include per job input/output statistics rather than per-task statistics
> ----------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-481
>                 URL: http://issues.apache.org/jira/browse/HADOOP-481
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred, metrics
>    Affects Versions: 0.6.0
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>         Attachments: reports.patch
>
>
> Currently hadoop reports metrics such as input bytes, input records, etc on per-task basis. Accurate aggregation of these metrics is required at the job-level and reporting should be done on a per-job basis.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov  3 19:28:42 2006
Return-Path: 
 <hadoop-dev-return-4794-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16917 invoked from network); 3 Nov 2006 19:28:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 19:28:42 -0000
Received: (qmail 55554 invoked by uid 500); 3 Nov 2006 19:28:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55530 invoked by uid 500); 3 Nov 2006 19:28:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55512 invoked by uid 99); 3 Nov 2006 19:28:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:28:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:28:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C7E3C7142F6
	for <hadoop-dev@lucene.apache.org>; Fri,  3 Nov 2006 11:28:19 -0800 (PST)
Message-ID: <25972772.1162582099816.JavaMail.root@brutus>
Date: Fri, 3 Nov 2006 11:28:19 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-181) task trackers should not restart for
 having a late heartbeat
In-Reply-To: <701484.1146509206378.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-181?page=all ]

Doug Cutting updated HADOOP-181:
--------------------------------

    Status: Open  (was: Patch Available)

I doubt this patch applies cleanly anymore, and there was doubt about whether this was the best approach...

> task trackers should not restart for having a late heartbeat
> ------------------------------------------------------------
>
>                 Key: HADOOP-181
>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>         Attachments: lost-heartbeat.patch
>
>
> TaskTrackers should not close and restart themselves for having a late heartbeat. The JobTracker should just accept their current status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov  3 19:28:46 2006
Return-Path: 
 <hadoop-dev-return-4795-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17050 invoked from network); 3 Nov 2006 19:28:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 19:28:46 -0000
Received: (qmail 56003 invoked by uid 500); 3 Nov 2006 19:28:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55979 invoked by uid 500); 3 Nov 2006 19:28:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55963 invoked by uid 99); 3 Nov 2006 19:28:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:28:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:28:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3950B714314
	for <hadoop-dev@lucene.apache.org>; Fri,  3 Nov 2006 11:28:24 -0800 (PST)
Message-ID: <17159689.1162582104231.JavaMail.root@brutus>
Date: Fri, 3 Nov 2006 11:28:24 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-680) checksum errors reading map output
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

checksum errors reading map output
----------------------------------

                 Key: HADOOP-680
                 URL: http://issues.apache.org/jira/browse/HADOOP-680
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Yoram Arnon
         Assigned To: Owen O'Malley


we get many exceptions complaining about crc errors reading map output by reducers:

org.apache.hadoop.fs.ChecksumException: Checksum error: /hadoop/mapred/local/task_0189_r_000448_3/map_9683.out at 978944
	at org.apache.hadoop.fs.FSDataInputStream$Checker.verifySum(FSDataInputStream.java:136)
	at org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:112)
	at org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:187)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
	at java.io.DataInputStream.readFully(DataInputStream.java:176)
	at java.io.DataInputStream.readFully(DataInputStream.java:152)
	at org.apache.hadoop.io.SequenceFile$UncompressedBytes.reset(SequenceFile.java:274)
	at org.apache.hadoop.io.SequenceFile$UncompressedBytes.access$700(SequenceFile.java:261)
	at org.apache.hadoop.io.SequenceFile$Reader.nextRaw(SequenceFile.java:1338)
	at org.apache.hadoop.io.SequenceFile$Sorter$SortPass.run(SequenceFile.java:1600)
	at org.apache.hadoop.io.SequenceFile$Sorter.sortPass(SequenceFile.java:1538)
	at org.apache.hadoop.io.SequenceFile$Sorter.sort(SequenceFile.java:1511)
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:245)
	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1210)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov  3 19:28:52 2006
Return-Path: 
 <hadoop-dev-return-4796-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17201 invoked from network); 3 Nov 2006 19:28:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 19:28:52 -0000
Received: (qmail 56616 invoked by uid 500); 3 Nov 2006 19:28:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56577 invoked by uid 500); 3 Nov 2006 19:28:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56543 invoked by uid 99); 3 Nov 2006 19:28:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:28:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:28:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E3FD3714315
	for <hadoop-dev@lucene.apache.org>; Fri,  3 Nov 2006 11:28:26 -0800 (PST)
Message-ID: <13530133.1162582106931.JavaMail.root@brutus>
Date: Fri, 3 Nov 2006 11:28:26 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-466) Startup scripts will not start
 instances of Hadoop daemons w/different configs w/o setting separate PID
 directories
In-Reply-To: <18080349.1156145293920.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-466?page=all ]

Doug Cutting updated HADOOP-466:
--------------------------------

    Status: Open  (was: Patch Available)

> Startup scripts will not start instances of Hadoop daemons w/different configs w/o setting separate PID directories
> -------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-466
>                 URL: http://issues.apache.org/jira/browse/HADOOP-466
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>    Affects Versions: 0.5.0
>            Reporter: Vetle Roeim
>         Attachments: hadoop-466.diff
>
>
> Configuration directories can be specified by either setting HADOOP_CONF_DIR or using the --config command line option. However, the hadoop-daemon.sh script will not start the daemons unless the PID directory is separate for each configuration.
> The issue is that the code for generating PID filenames is not dependent on the configuration directory. While the PID directory can be changed in hadoop-env.sh, it seems a little unnecessary to have this restriction.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov  3 19:30:54 2006
Return-Path: 
 <hadoop-dev-return-4797-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17805 invoked from network); 3 Nov 2006 19:30:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 19:30:54 -0000
Received: (qmail 60486 invoked by uid 500); 3 Nov 2006 19:30:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60460 invoked by uid 500); 3 Nov 2006 19:30:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60431 invoked by uid 99); 3 Nov 2006 19:30:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:30:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:30:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 688A77142F0
	for <hadoop-dev@lucene.apache.org>; Fri,  3 Nov 2006 11:30:18 -0800 (PST)
Message-ID: <24429788.1162582218425.JavaMail.root@brutus>
Date: Fri, 3 Nov 2006 11:30:18 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-4) tool to mount dfs on linux
In-Reply-To: <1520733599.1139079363816.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-4?page=all ]

Doug Cutting updated HADOOP-4:
------------------------------

    Status: Open  (was: Patch Available)

I'm cancelling this patch to remove it from the queue of patches that we intend to immenently apply to the current trunk.  This is still useful stuff, and, depending on what happens with webdav, we may still decide to integrate it, so the issue should remain open for now.

> tool to mount dfs on linux
> --------------------------
>
>                 Key: HADOOP-4
>                 URL: http://issues.apache.org/jira/browse/HADOOP-4
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>    Affects Versions: 0.5.0
>         Environment: linux only
>            Reporter: John Xing
>         Attachments: fuse-hadoop-0.1.0_fuse-j.2.2.3_hadoop.0.5.0.tar.gz, fuse-hadoop-0.1.0_fuse-j.2.4_hadoop.0.5.0.tar.gz, fuse-hadoop-0.1.1.tar.gz
>
>
> tool to mount dfs on linux

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov  3 19:32:39 2006
Return-Path: 
 <hadoop-dev-return-4798-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18523 invoked from network); 3 Nov 2006 19:32:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 19:32:39 -0000
Received: (qmail 66903 invoked by uid 500); 3 Nov 2006 19:32:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66880 invoked by uid 500); 3 Nov 2006 19:32:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66871 invoked by uid 99); 3 Nov 2006 19:32:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:32:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:32:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4DA287142F0
	for <hadoop-dev@lucene.apache.org>; Fri,  3 Nov 2006 11:32:18 -0800 (PST)
Message-ID: <25383656.1162582338315.JavaMail.root@brutus>
Date: Fri, 3 Nov 2006 11:32:18 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-675) streaming should check the command
 line arguments for validity
In-Reply-To: <16776226.1162509916803.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-675?page=all ]

Yoram Arnon resolved HADOOP-675.
--------------------------------

    Resolution: Duplicate

duplicate of HADOOP-476

> streaming should check the command line arguments for validity
> --------------------------------------------------------------
>
>                 Key: HADOOP-675
>                 URL: http://issues.apache.org/jira/browse/HADOOP-675
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.9.0
>
>
> Streaming should check the command line arguments using the commons cli parser.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov  3 19:36:52 2006
Return-Path: 
 <hadoop-dev-return-4799-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19890 invoked from network); 3 Nov 2006 19:36:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 19:36:52 -0000
Received: (qmail 79153 invoked by uid 500); 3 Nov 2006 19:37:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79123 invoked by uid 500); 3 Nov 2006 19:37:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79114 invoked by uid 99); 3 Nov 2006 19:37:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:37:03 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_ID,NO_REAL_NAME,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received: from [140.211.11.75] (HELO lucene.zones.apache.org) (140.211.11.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:36:49 -0800
Received: from lucene.zones.apache.org (localhost [127.0.0.1])
	by lucene.zones.apache.org (8.13.7+Sun/8.13.7) with SMTP id kA3JaEFA015764
	for <hadoop-dev@lucene.apache.org>; Fri, 3 Nov 2006 19:36:24 GMT
Message-Id: <200611031936.kA3JaEFA015764@lucene.zones.apache.org>
Date: Fri, 03 Nov 2006 19:36:14 +0000
Subject: Hadoop nightly build failure
From: hadoop-dev@lucene.apache.org
To: hadoop-dev@lucene.apache.org
X-Mailer: org.apache.tools.mail.MailMessage (ant.apache.org)
X-Virus-Checked: Checked by ClamAV on apache.org


init:
    [mkdir] Created dir: /tmp/hadoop-nightly/build
    [mkdir] Created dir: /tmp/hadoop-nightly/build/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/src
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/task/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/job/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/dfs/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/datanode/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/examples
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/testjar
     [copy] Copying 5 files to /tmp/hadoop-nightly/build/webapps
     [copy] Copying 4 files to /tmp/hadoop-nightly/conf
     [copy] Copying /tmp/hadoop-nightly/conf/slaves.template to /tmp/hadoop-nightly/conf/slaves
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-site.xml.template to /tmp/hadoop-nightly/conf/hadoop-site.xml
     [copy] Copying /tmp/hadoop-nightly/conf/mapred-default.xml.template to /tmp/hadoop-nightly/conf/mapred-default.xml
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-env.sh.template to /tmp/hadoop-nightly/conf/hadoop-env.sh
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: whoami: not found

record-parser:

compile-core:
    [javac] Compiling 243 source files to /tmp/hadoop-nightly/build/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-examples:
    [javac] Compiling 7 source files to /tmp/hadoop-nightly/build/examples
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-test:
    [javac] Compiling 61 source files to /tmp/hadoop-nightly/build/test/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] Compiling 1 source file to /tmp/hadoop-nightly/build/test/testjar
      [jar] Building jar: /tmp/hadoop-nightly/build/test/testjar/testjob.jar
      [jar] Building jar: /tmp/hadoop-nightly/build/hadoop-nightly-test.jar
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache

test-core:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/data
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/logs
    [junit] Running org.apache.hadoop.conf.TestConfiguration
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.632 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSMkdirs
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 67,780.044 sec
    [junit] Test org.apache.hadoop.dfs.TestDFSMkdirs FAILED
    [junit] Running org.apache.hadoop.dfs.TestDFSShellGenericOptions
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 89.703 sec
    [junit] Running org.apache.hadoop.dfs.TestFsck
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 44.791 sec
    [junit] Running org.apache.hadoop.dfs.TestLocalDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 35.243 sec
    [junit] Running org.apache.hadoop.dfs.TestPread
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 37.333 sec
    [junit] Running org.apache.hadoop.dfs.TestSeekBug
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 36.403 sec
    [junit] Running org.apache.hadoop.fs.TestCopyFiles
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 245.883 sec
    [junit] Running org.apache.hadoop.fs.TestDFSIO
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 6.126 sec
    [junit] Running org.apache.hadoop.fs.TestFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 5.772 sec
    [junit] Running org.apache.hadoop.fs.TestGlobPaths
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 32.68 sec
    [junit] Running org.apache.hadoop.fs.TestLocalFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.244 sec
    [junit] Running org.apache.hadoop.fs.TestPath
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.017 sec
    [junit] Running org.apache.hadoop.io.TestArrayFile
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 2.931 sec
    [junit] Running org.apache.hadoop.io.TestBytesWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.011 sec
    [junit] Running org.apache.hadoop.io.TestMD5Hash
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.345 sec
    [junit] Running org.apache.hadoop.io.TestSequenceFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 21.333 sec
    [junit] Running org.apache.hadoop.io.TestSetFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 7.176 sec
    [junit] Running org.apache.hadoop.io.TestText
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.691 sec
    [junit] Running org.apache.hadoop.io.TestTextNonUTF8
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.023 sec
    [junit] Running org.apache.hadoop.io.TestUTF8
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.148 sec
    [junit] Running org.apache.hadoop.io.TestVersionedWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.042 sec
    [junit] Running org.apache.hadoop.io.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.008 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodec
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.877 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodecFactory
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.358 sec
    [junit] Running org.apache.hadoop.ipc.TestIPC
    [junit] Tests run: 2, Failures: 0, Errors: 1, Time elapsed: 0.376 sec
    [junit] Test org.apache.hadoop.ipc.TestIPC FAILED
    [junit] Running org.apache.hadoop.ipc.TestRPC
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.195 sec
    [junit] Running org.apache.hadoop.mapred.TestEmptyJobWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 49.783 sec
    [junit] Running org.apache.hadoop.mapred.TestMapRed
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 13.988 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRBringup
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 7.842 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRClasspath
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 132.688 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRDFSCaching
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 113.312 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRLocalFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 91.872 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 969.689 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFilter
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 3.472 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFormat
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.599 sec
    [junit] Running org.apache.hadoop.mapred.TestTextInputFormat
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 4.201 sec
    [junit] Running org.apache.hadoop.mapred.jobcontrol.TestJobControl
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 77.302 sec
    [junit] Running org.apache.hadoop.record.test.TestMapRed
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.084 sec
    [junit] Running org.apache.hadoop.record.test.TestRecordIO
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.202 sec
    [junit] Running org.apache.hadoop.record.test.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.081 sec

BUILD FAILED
/tmp/hadoop-nightly/build.xml:345: Tests failed!

Total time: 1,164 minutes 51 seconds



From MAILER-DAEMON Fri Nov  3 20:42:41 2006
Return-Path: 
 <hadoop-dev-return-4800-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45117 invoked from network); 3 Nov 2006 20:42:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 20:42:41 -0000
Received: (qmail 21437 invoked by uid 500); 3 Nov 2006 20:42:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21411 invoked by uid 500); 3 Nov 2006 20:42:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21402 invoked by uid 99); 3 Nov 2006 20:42:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 12:42:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 12:42:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 540697142EF
	for <hadoop-dev@lucene.apache.org>; Fri,  3 Nov 2006 12:42:18 -0800 (PST)
Message-ID: <17323351.1162586538341.JavaMail.root@brutus>
Date: Fri, 3 Nov 2006 12:42:18 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-459) libhdfs leaks memory when writing to
 files
In-Reply-To: <12771302.1155876793902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-459?page=comments#action_12447073 ] 
            
Sameer Paranjpye commented on HADOOP-459:
-----------------------------------------

Odd, I'm not seeing these warnings. Looking into this.

> libhdfs leaks memory when writing to files
> ------------------------------------------
>
>                 Key: HADOOP-459
>                 URL: http://issues.apache.org/jira/browse/HADOOP-459
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>            Reporter: Christian Kunz
>         Assigned To: Sameer Paranjpye
>         Attachments: libhdfs_fixes.txt
>
>
> hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov  3 21:30:40 2006
Return-Path: 
 <hadoop-dev-return-4801-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60617 invoked from network); 3 Nov 2006 21:30:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 21:30:40 -0000
Received: (qmail 22289 invoked by uid 500); 3 Nov 2006 21:30:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22259 invoked by uid 500); 3 Nov 2006 21:30:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22250 invoked by uid 99); 3 Nov 2006 21:30:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 13:30:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 13:30:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6917D7142EF
	for <hadoop-dev@lucene.apache.org>; Fri,  3 Nov 2006 13:30:18 -0800 (PST)
Message-ID: <17435067.1162589418427.JavaMail.root@brutus>
Date: Fri, 3 Nov 2006 13:30:18 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-637) ipc.Server has memory leak --
 serious issue for namenode server
In-Reply-To: <3722659.1161801316587.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-637?page=comments#action_12447082 ] 
            
Raghu Angadi commented on HADOOP-637:
-------------------------------------


After replacing both allocateDirect() with allocate Christian did not notice any memory groth. 

Looks like removing allocateDirect() is simple and does not cost anything. There are two places where we use allocateDirect:

 1) SocketChannelOutputStream() : constructor creates a 4k buffer. but this buffer is not really require. All writes in this class are blocking. It never stores data.
2) in ips.Server() :  by removing a copy in processData() we can keep number copies the same as before (plus one less allocation). Later sometime, once allocateDirect() is supposed to  be stable, we can look into using it. 

I will submit a patch.


> ipc.Server has memory leak -- serious issue for namenode server
> ---------------------------------------------------------------
>
>                 Key: HADOOP-637
>                 URL: http://issues.apache.org/jira/browse/HADOOP-637
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.7.1
>            Reporter: Christian Kunz
>         Assigned To: Raghu Angadi
>
> In my environment (running a lot of batch processes each of which reads, creates, and deletes a lof of  files in dfs) the namenode server can run out of memory rather quickly (in a few hours on a 150 node cluster). The netbeans profiler shows an increasing number of direct byte buffers not garbage collected. The documentation on java.nio.ByteBuffer indicates that their allocation might (and obviously does) happen outside the normal gc-collected heap, and, therefore, it is required that direct byte buffers should only be used for long-lived objects.
> ipc.Server seems to use a 4KB direct byte buffer for every connection, but, worse, for every RPC call. If I replace the latter ones with non-direct byte buffers, the memory footprint of the namenode server increases only slowly, but even then it is just a matter of time (since I started it 24 hours ago, it leaked by about 300-400MB). If the performance increase by using direct buffers is a requirement, I would suggest to use a static pool.
> Although my environment abuses the namenode server in unusual manner, I would imagine that the memory footprint of the namenode server creeps up slowly everywhere

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov  4 02:55:40 2006
Return-Path: 
 <hadoop-dev-return-4802-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30186 invoked from network); 4 Nov 2006 02:55:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2006 02:55:40 -0000
Received: (qmail 1643 invoked by uid 500); 4 Nov 2006 02:55:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1616 invoked by uid 500); 4 Nov 2006 02:55:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1599 invoked by uid 99); 4 Nov 2006 02:55:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 18:55:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 18:55:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6E56D7142DC
	for <hadoop-dev@lucene.apache.org>; Fri,  3 Nov 2006 18:55:18 -0800 (PST)
Message-ID: <27457074.1162608918449.JavaMail.root@brutus>
Date: Fri, 3 Nov 2006 18:55:18 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-637) ipc.Server has memory leak --
 serious issue for namenode server
In-Reply-To: <3722659.1161801316587.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-637?page=comments#action_12447110 ] 
            
Raghu Angadi commented on HADOOP-637:
-------------------------------------

There is an open java bug on this issue. http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6296278

After discusing with Milind, following is what seems to be happenning :

direct buffers allocated don't count towards NameNode's heap. We create a couple of direct buffers for each RPC call.  Since Java gc is based on NameNode's allocated memory it does not kick in though real resident memory  of JVM keeps on growing.

This explains why the problem is much more severe when NameNode has heavy load. On other clusters where it is less loaded memory foot print kind of stabilizes over time.



> ipc.Server has memory leak -- serious issue for namenode server
> ---------------------------------------------------------------
>
>                 Key: HADOOP-637
>                 URL: http://issues.apache.org/jira/browse/HADOOP-637
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.7.1
>            Reporter: Christian Kunz
>         Assigned To: Raghu Angadi
>
> In my environment (running a lot of batch processes each of which reads, creates, and deletes a lof of  files in dfs) the namenode server can run out of memory rather quickly (in a few hours on a 150 node cluster). The netbeans profiler shows an increasing number of direct byte buffers not garbage collected. The documentation on java.nio.ByteBuffer indicates that their allocation might (and obviously does) happen outside the normal gc-collected heap, and, therefore, it is required that direct byte buffers should only be used for long-lived objects.
> ipc.Server seems to use a 4KB direct byte buffer for every connection, but, worse, for every RPC call. If I replace the latter ones with non-direct byte buffers, the memory footprint of the namenode server increases only slowly, but even then it is just a matter of time (since I started it 24 hours ago, it leaked by about 300-400MB). If the performance increase by using direct buffers is a requirement, I would suggest to use a static pool.
> Although my environment abuses the namenode server in unusual manner, I would imagine that the memory footprint of the namenode server creeps up slowly everywhere

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 05:13:06 2006
Return-Path: 
 <hadoop-dev-return-4803-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42920 invoked from network); 6 Nov 2006 05:13:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 05:13:06 -0000
Received: (qmail 67588 invoked by uid 500); 6 Nov 2006 05:13:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67520 invoked by uid 500); 6 Nov 2006 05:13:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67201 invoked by uid 99); 6 Nov 2006 05:13:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 21:13:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 21:13:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 534C0714310
	for <hadoop-dev@lucene.apache.org>; Sun,  5 Nov 2006 21:12:40 -0800 (PST)
Message-ID: <29893636.1162789960338.JavaMail.jira@brutus>
Date: Sun, 5 Nov 2006 21:12:40 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-681) Adminstrative hook to pull live nodes
 out of a HDFS cluster
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Adminstrative hook to pull live nodes out of a HDFS cluster
-----------------------------------------------------------

                 Key: HADOOP-681
                 URL: http://issues.apache.org/jira/browse/HADOOP-681
             Project: Hadoop
          Issue Type: New Feature
          Components: dfs
    Affects Versions: 0.8.0
            Reporter: dhruba borthakur
         Assigned To: dhruba borthakur


Introduction
------------
An administrator sometimes needs to bring down a datanode for scheduled maintenance. It would be nice if HDFS can be informed about this event. On receipt of this event, HDFS can take steps so that HDFS data is not lost when the node goes down at a later time.

Architecture
-----------
In the existing architecture, a datanode can be in one of two states: dead or alive. A datanode is alive if its heartbeats are being processed by the namenode. Otherwise that datanode is in dead state. We extend the architecture to introduce the concept of a tranquil state for a datanode.
A datanode is in tranquil state if:
    - it cannot be a target for replicating any blocks
    - any block replica that it currently contains does not count towards the target-replication-factor of that block

Thus, a node that is in tranquil state can be brought down without impacting the guarantees provided by HDFS.

The tranquil state is not persisted across namenode restarts. If the namenode restarts then that datanode will go back to being in the dead or alive state.

The datanode is completely transparent to the fact that it has been labeled as being in tranquil state. It can continue to heartbeat and serve read requests for datablocks.

DFSShell Design
-----------------------
We extend the DFS Shell utility to specify a list of nodes to the namenode.
    hadoop dfs -tranquil {set|clear|get} datanodename1 [,datanodename2]

The DFSShell utility sends this list to the namenode. This DFSShell command invoked with the "set" option completes when the list is transferred to the namenode. This command is non-blocking; it returns before the datanode is actually in the tranquil state. The client can then query the state by re-issuing the command with the "get" option. This option will indicate whether the datanode is in tranquil state or is "being tranquiled". The "clear" option is used to transition a tranquil datanode to the alive state. The "clear" option is a no-op if the datanode is not in the "tranquil" state.

ClientProtocol Design
--------------------
The ClientProtocol is the protocol exported by the namenode for its client.
This protocol is extended to incorporate three new methods:
   ClientProtocol.setTranquil(String[] datanodes)
   ClientProtocol.getTranquil(String datanode)
   ClientProtocol.clearTranquil(String[] datanodes)

The ProtocolVersion is incremented to prevent conversations between imcompatible clients and servers. An old DFSShell cannot talk to the new NameNode and vice-versa.

NameNode Design
-------------------------
The namenode does the bulk of the work for supporting this new feature.

The DatanodeInfo object has a new private member named "state". It also has three new member functions:
    datanodeInfo.tranquilStarted(): start the process of tranquilization
    datanodeInfo.tranquilCompleted(): node is not in tranquil state
    datanodeInfo.clearTranquil() : remove tranquilization from node

The namenode exposes a new API to set and clear tranquil states for a datanode. On receipt of a "set tranquil" command, it invokes datanodeInfo.tranquilStarted().

The FSNamesystem.chooseTarget() method skips over datanodes that are marked as being in the "tranquil" state. This ensures that tranquil-datanodes are never chosen as targets of replication. The namenode does *not* record
this operation in either the FsImage or the EditLogs.

The namenode puts all the blocks from a being-tranquiled node into the neededReplication data structure. Necessary code changes are made to ensure that these blocks get replicated by the regular replication method. As of now, the regular replication code does not distinguish between these blocks and the blocks that are replication candidates because some other datanode might have died. It might be prudent to give different (lower?) weightage to this type of replication requests, but that exercise is deferred to a later date. In this design, replication requests generated because of a node going to a tranquil state are not distinguished from replication requests generated by a datanode going to the dead state.

The DatanodeInfo object has another new private member named "pendingTranquilCount". This field stores the remaining number of blocks that still remain to be replicated. This field is valid only if the node is in the ets being-tranquiled state.  On receipt of every 'n' heartbeats from the being-tranquiled datanode, the namenode calculates the amount of data that is still remaining to be replicated and updates the "pendingTranquilCount". in the DatanodeInfo.When all the replications complete, the datanode is marked as tranquiled. The number 'n' is selected in such a way that the average heartbeat processing time does not increase appreciably.

It is possible that the namenode might stop receving heartbeats from a datanode that is being-tranquiled. In this case,   the tranquil flag of the datanode gets cleared. It transitions to the dead state and the normal processing for alive-to-dead transition occurs here.

Web Interface
-------------------
The dfshealth.jsp displays the live nodes, dead nodes, being-tranquiled and tranquil nodes. For nodes in the being-tranquiled state, it displays the percentage of tranquilization completed till now.

Issues
--------
1. If a request for tranquilization starts getting processed and there aren't enough space available in DFS to complete the necessary replication, then that node might remain in the being-tranquiled state for a long long time. This is not necessarily a bad thing but is there a better option?

2. We have opted for not storing cluster configuration information in the persistent image of the file system. (The tranquil state of a datanode may be lost if the namenode restarts).
 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 06:14:08 2006
Return-Path: 
 <hadoop-dev-return-4804-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63418 invoked from network); 6 Nov 2006 06:14:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 06:14:08 -0000
Received: (qmail 49764 invoked by uid 500); 6 Nov 2006 06:14:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49675 invoked by uid 500); 6 Nov 2006 06:14:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49625 invoked by uid 99); 6 Nov 2006 06:14:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 22:14:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 22:14:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 57329714314
	for <hadoop-dev@lucene.apache.org>; Sun,  5 Nov 2006 22:13:41 -0800 (PST)
Message-ID: <9786893.1162793621354.JavaMail.jira@brutus>
Date: Sun, 5 Nov 2006 22:13:41 -0800 (PST)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-681) Adminstrative hook to pull live
 nodes out of a HDFS cluster
In-Reply-To: <29893636.1162789960338.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-681?page=comments#action_12447372 ] 
            
eric baldeschwieler commented on HADOOP-681:
--------------------------------------------

Looks good overall.  Some comments on the details...

The tranquil state should be persistent IMO.  This should be recorded to disk and backed up anywhere we backup changelog data.  

the dfsshell command is for user commands, admin commands should have a distinct API to avoid confusion allow later divergence in security / etc.

I'd prefer it if remote tools could not be used without changing the state on the namenode to effect its operation.  This is a simple way of proving that the reconfig is valid.  For example, change a file listing the idled nodes and then ping the server to reparse it.  

HDFS is not stable without a stable definition of the cluster, we need to stop building APIs that ignore this.

BTW tranquil is a little obscure.  What about idle or decommissioned or toBeKilled?



> Adminstrative hook to pull live nodes out of a HDFS cluster
> -----------------------------------------------------------
>
>                 Key: HADOOP-681
>                 URL: http://issues.apache.org/jira/browse/HADOOP-681
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> Introduction
> ------------
> An administrator sometimes needs to bring down a datanode for scheduled maintenance. It would be nice if HDFS can be informed about this event. On receipt of this event, HDFS can take steps so that HDFS data is not lost when the node goes down at a later time.
> Architecture
> -----------
> In the existing architecture, a datanode can be in one of two states: dead or alive. A datanode is alive if its heartbeats are being processed by the namenode. Otherwise that datanode is in dead state. We extend the architecture to introduce the concept of a tranquil state for a datanode.
> A datanode is in tranquil state if:
>     - it cannot be a target for replicating any blocks
>     - any block replica that it currently contains does not count towards the target-replication-factor of that block
> Thus, a node that is in tranquil state can be brought down without impacting the guarantees provided by HDFS.
> The tranquil state is not persisted across namenode restarts. If the namenode restarts then that datanode will go back to being in the dead or alive state.
> The datanode is completely transparent to the fact that it has been labeled as being in tranquil state. It can continue to heartbeat and serve read requests for datablocks.
> DFSShell Design
> -----------------------
> We extend the DFS Shell utility to specify a list of nodes to the namenode.
>     hadoop dfs -tranquil {set|clear|get} datanodename1 [,datanodename2]
> The DFSShell utility sends this list to the namenode. This DFSShell command invoked with the "set" option completes when the list is transferred to the namenode. This command is non-blocking; it returns before the datanode is actually in the tranquil state. The client can then query the state by re-issuing the command with the "get" option. This option will indicate whether the datanode is in tranquil state or is "being tranquiled". The "clear" option is used to transition a tranquil datanode to the alive state. The "clear" option is a no-op if the datanode is not in the "tranquil" state.
> ClientProtocol Design
> --------------------
> The ClientProtocol is the protocol exported by the namenode for its client.
> This protocol is extended to incorporate three new methods:
>    ClientProtocol.setTranquil(String[] datanodes)
>    ClientProtocol.getTranquil(String datanode)
>    ClientProtocol.clearTranquil(String[] datanodes)
> The ProtocolVersion is incremented to prevent conversations between imcompatible clients and servers. An old DFSShell cannot talk to the new NameNode and vice-versa.
> NameNode Design
> -------------------------
> The namenode does the bulk of the work for supporting this new feature.
> The DatanodeInfo object has a new private member named "state". It also has three new member functions:
>     datanodeInfo.tranquilStarted(): start the process of tranquilization
>     datanodeInfo.tranquilCompleted(): node is not in tranquil state
>     datanodeInfo.clearTranquil() : remove tranquilization from node
> The namenode exposes a new API to set and clear tranquil states for a datanode. On receipt of a "set tranquil" command, it invokes datanodeInfo.tranquilStarted().
> The FSNamesystem.chooseTarget() method skips over datanodes that are marked as being in the "tranquil" state. This ensures that tranquil-datanodes are never chosen as targets of replication. The namenode does *not* record
> this operation in either the FsImage or the EditLogs.
> The namenode puts all the blocks from a being-tranquiled node into the neededReplication data structure. Necessary code changes are made to ensure that these blocks get replicated by the regular replication method. As of now, the regular replication code does not distinguish between these blocks and the blocks that are replication candidates because some other datanode might have died. It might be prudent to give different (lower?) weightage to this type of replication requests, but that exercise is deferred to a later date. In this design, replication requests generated because of a node going to a tranquil state are not distinguished from replication requests generated by a datanode going to the dead state.
> The DatanodeInfo object has another new private member named "pendingTranquilCount". This field stores the remaining number of blocks that still remain to be replicated. This field is valid only if the node is in the ets being-tranquiled state.  On receipt of every 'n' heartbeats from the being-tranquiled datanode, the namenode calculates the amount of data that is still remaining to be replicated and updates the "pendingTranquilCount". in the DatanodeInfo.When all the replications complete, the datanode is marked as tranquiled. The number 'n' is selected in such a way that the average heartbeat processing time does not increase appreciably.
> It is possible that the namenode might stop receving heartbeats from a datanode that is being-tranquiled. In this case,   the tranquil flag of the datanode gets cleared. It transitions to the dead state and the normal processing for alive-to-dead transition occurs here.
> Web Interface
> -------------------
> The dfshealth.jsp displays the live nodes, dead nodes, being-tranquiled and tranquil nodes. For nodes in the being-tranquiled state, it displays the percentage of tranquilization completed till now.
> Issues
> --------
> 1. If a request for tranquilization starts getting processed and there aren't enough space available in DFS to complete the necessary replication, then that node might remain in the being-tranquiled state for a long long time. This is not necessarily a bad thing but is there a better option?
> 2. We have opted for not storing cluster configuration information in the persistent image of the file system. (The tranquil state of a datanode may be lost if the namenode restarts).
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 08:01:06 2006
Return-Path: 
 <hadoop-dev-return-4805-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83324 invoked from network); 6 Nov 2006 08:01:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 08:01:06 -0000
Received: (qmail 45512 invoked by uid 500); 6 Nov 2006 08:01:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45485 invoked by uid 500); 6 Nov 2006 08:01:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45474 invoked by uid 99); 6 Nov 2006 08:01:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 00:01:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 00:00:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 90BD571430F
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 00:00:39 -0800 (PST)
Message-ID: <5919624.1162800039590.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 00:00:39 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-496) Expose HDFS as a WebDAV store
In-Reply-To: <29112039.1156966140094.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-496?page=comments#action_12447388 ] 
            
Andrzej Bialecki  commented on HADOOP-496:
------------------------------------------

I couldn't find the patches that provide the bridge between HDFS and WebDav - the referenced patch and JIRA issue contains only patches ot the external WebDAV library.

Is there any progress on this issue? Could you perhaps upload those preliminary support for HDFS?

> Expose HDFS as a WebDAV store
> -----------------------------
>
>                 Key: HADOOP-496
>                 URL: http://issues.apache.org/jira/browse/HADOOP-496
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Michel Tourn
>
> WebDAV stands for Distributed Authoring and Versioning. It is a set of extensions to the HTTP protocol that lets users collaboratively edit and manage files on a remote web server. It is often considered as a replacement for NFS or SAMBA
> HDFS (Hadoop Distributed File System) needs a friendly file system interface. DFSShell commands are unfamiliar. Instead it is more convenient for Hadoop users to use a mountable network drive. A friendly interface to HDFS will be used both for casual browsing of data and for bulk import/export. 
> The FUSE provider for HDFS is already available ( http://issues.apache.org/jira/browse/HADOOP-17 )  but it had scalability problems. WebDAV is a popular alternative. 
> The typical licensing terms for WebDAV tools are also attractive: 
> GPL for Linux client tools that Hadoop would not redistribute anyway. 
> More importantly, Apache Project/Apache license for Java tools and for server components. 
> This allows for a tighter integration with the HDFS code base.
> There are some interesting Apache projects that support WebDAV.
> But these are probably too heavyweight for the needs of Hadoop:
> Tomcat servlet: http://tomcat.apache.org/tomcat-4.1-doc/catalina/docs/api/org/apache/catalina/servlets/WebdavServlet.html
> Slide:          http://jakarta.apache.org/slide/
> Being HTTP-based and "backwards-compatible" with Web Browser clients, the WebDAV server protocol could even be piggy-backed on the existing Web UI ports of the Hadoop name node / data nodes. WebDAV can be hosted as (Jetty) servlets. This minimizes server code bloat and this avoids additional network traffic between HDFS and the WebDAV server.
> General Clients (read-only):
> Any web browser
> Linux Clients: 
> Mountable GPL davfs2  http://dav.sourceforge.net/
> FTP-like  GPL Cadaver http://www.webdav.org/cadaver/
> Server Protocol compliance tests:
> http://www.webdav.org/neon/litmus/  
> A goal is for Hadoop HDFS to pass this test (minus support for Properties)
> Pure Java clients:
> DAV Explorer Apache lic. http://www.ics.uci.edu/~webdav/	
> WebDAV also makes it convenient to add advanced features in an incremental fashion:
> file locking, access control lists, hard links, symbolic links.
> New WebDAV standards get accepted and more or less featured WebDAV clients exist.
> core              http://www.webdav.org/specs/rfc2518.html
> ACLs              http://www.webdav.org/specs/rfc3744.html
> redirects "soft links" http://greenbytes.de/tech/webdav/rfc4437.html
> BIND "hard links" http://www.webdav.org/bind/
> quota             http://tools.ietf.org/html/rfc4331

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 10:08:00 2006
Return-Path: 
 <hadoop-dev-return-4806-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23607 invoked from network); 6 Nov 2006 10:08:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 10:08:00 -0000
Received: (qmail 26629 invoked by uid 500); 6 Nov 2006 10:08:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26595 invoked by uid 500); 6 Nov 2006 10:08:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26586 invoked by uid 99); 6 Nov 2006 10:08:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 02:08:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 02:07:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 557FA71430E
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 02:07:38 -0800 (PST)
Message-ID: <29865050.1162807658347.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 02:07:38 -0800 (PST)
From: "Thomas Friol (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-648) JobClient waitForCompletion() method
 sometimes throws an NPE
In-Reply-To: <20676975.1161931936803.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-648?page=comments#action_12447407 ] 
            
Thomas Friol commented on HADOOP-648:
-------------------------------------

The problem is that, in my case, it happens at the end of the job execution.
Maybe it is linked to the issue : http://issues.apache.org/jira/browse/HADOOP-649

> JobClient waitForCompletion() method sometimes throws an NPE
> ------------------------------------------------------------
>
>                 Key: HADOOP-648
>                 URL: http://issues.apache.org/jira/browse/HADOOP-648
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.1
>            Reporter: Thomas Friol
>
> java.lang.NullPointerException
>         at org.apache.hadoop.mapred.JobClient$NetworkedJob.isComplete(JobClient.java:113)
>         at org.apache.hadoop.mapred.JobClient$NetworkedJob.waitForCompletion(JobClient.java:128)
> Does someone have an idea why this happens ?
> Thanks for any help.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 14:46:00 2006
Return-Path: 
 <hadoop-dev-return-4807-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18156 invoked from network); 6 Nov 2006 14:46:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 14:46:00 -0000
Received: (qmail 88999 invoked by uid 500); 6 Nov 2006 14:46:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88774 invoked by uid 500); 6 Nov 2006 14:46:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88765 invoked by uid 99); 6 Nov 2006 14:46:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 06:46:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 06:45:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DF80071430D
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 06:45:38 -0800 (PST)
Message-ID: <29452596.1162824338912.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 06:45:38 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-565) Upgrade Jetty to 6.x
In-Reply-To: <17704060.1159552279561.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-565?page=all ]

Sanjay Dahiya updated HADOOP-565:
---------------------------------

    Attachment: Hadoop-565_3.patch

This patch fixes the out of memory bug. There was a misplaced catch() block in earlier patch, causing the http server to report wrong port number. ReduceTaskRunner hits that port to get map output which was a RPC server and it fails. 

HADOOP-677 will further ensure detection and prevention of such cases. 


> Upgrade Jetty to 6.x
> --------------------
>
>                 Key: HADOOP-565
>                 URL: http://issues.apache.org/jira/browse/HADOOP-565
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-565.patch, Hadoop-565_1.patch.txt, Hadoop-565_2.patch, Hadoop-565_3.patch, Hadoop-565_lib.tar.gz
>
>
> Now that Jetty 6.x has been released as stable, we should upgrade.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 14:49:02 2006
Return-Path: 
 <hadoop-dev-return-4808-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19165 invoked from network); 6 Nov 2006 14:49:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 14:49:02 -0000
Received: (qmail 97353 invoked by uid 500); 6 Nov 2006 14:49:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97334 invoked by uid 500); 6 Nov 2006 14:49:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97325 invoked by uid 99); 6 Nov 2006 14:49:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 06:49:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 06:48:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1945E7142FA
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 06:48:37 -0800 (PST)
Message-ID: <30515001.1162824517100.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 06:48:37 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-682) hadoop namenode -format doesnt work
 anymore if target directory doesnt exist
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

hadoop namenode -format doesnt work anymore if target directory doesnt exist
----------------------------------------------------------------------------

                 Key: HADOOP-682
                 URL: http://issues.apache.org/jira/browse/HADOOP-682
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Sanjay Dahiya


Not sure if this was intended, but hadoop namenode -format doesnt work anymore if the target directory doesnt exist due to the check in the NameNode.main(). It used to work earlier 

        if (argv.length == 1 && argv[0].equals("-format")) {
          boolean aborted = false;
          File[] dirs = getDirs(conf);
          for (int idx = 0; idx < dirs.length; idx++) {
            if (dirs[idx].exists()) {                     <<<====== if dir doesnt exist it won't format
              System.err.print("Re-format filesystem in " + dirs[idx] +" ? (Y or N) ");
              if (!(System.in.read() == 'Y')) {
                System.err.println("Format aborted in "+ dirs[idx]);
                aborted = true;
              } else {
                format(dirs[idx]);
                System.err.println("Formatted "+dirs[idx]);
              }
              System.in.read(); // discard the enter-key
            }
          }
          System.exit(aborted ? 1 : 0);
        }




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 14:51:01 2006
Return-Path: 
 <hadoop-dev-return-4809-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20029 invoked from network); 6 Nov 2006 14:51:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 14:51:01 -0000
Received: (qmail 802 invoked by uid 500); 6 Nov 2006 14:51:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 775 invoked by uid 500); 6 Nov 2006 14:51:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 766 invoked by uid 99); 6 Nov 2006 14:51:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 06:51:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 06:50:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A479B71430E
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 06:50:39 -0800 (PST)
Message-ID: <1329300.1162824639670.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 06:50:39 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-682) hadoop namenode -format doesnt work
 anymore if target directory doesnt exist
In-Reply-To: <30515001.1162824517100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-682?page=all ]

Sanjay Dahiya updated HADOOP-682:
---------------------------------

    Attachment: Hadoop-682.patch

This patch fixes the issue but formatting the namenode if the dir doesn't exist. 

> hadoop namenode -format doesnt work anymore if target directory doesnt exist
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-682
>                 URL: http://issues.apache.org/jira/browse/HADOOP-682
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Sanjay Dahiya
>         Attachments: Hadoop-682.patch
>
>
> Not sure if this was intended, but hadoop namenode -format doesnt work anymore if the target directory doesnt exist due to the check in the NameNode.main(). It used to work earlier 
>         if (argv.length == 1 && argv[0].equals("-format")) {
>           boolean aborted = false;
>           File[] dirs = getDirs(conf);
>           for (int idx = 0; idx < dirs.length; idx++) {
>             if (dirs[idx].exists()) {                     <<<====== if dir doesnt exist it won't format
>               System.err.print("Re-format filesystem in " + dirs[idx] +" ? (Y or N) ");
>               if (!(System.in.read() == 'Y')) {
>                 System.err.println("Format aborted in "+ dirs[idx]);
>                 aborted = true;
>               } else {
>                 format(dirs[idx]);
>                 System.err.println("Formatted "+dirs[idx]);
>               }
>               System.in.read(); // discard the enter-key
>             }
>           }
>           System.exit(aborted ? 1 : 0);
>         }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 14:53:01 2006
Return-Path: 
 <hadoop-dev-return-4810-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21256 invoked from network); 6 Nov 2006 14:53:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 14:53:01 -0000
Received: (qmail 7027 invoked by uid 500); 6 Nov 2006 14:53:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6997 invoked by uid 500); 6 Nov 2006 14:53:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6988 invoked by uid 99); 6 Nov 2006 14:53:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 06:53:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 06:52:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9DCB27142FA
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 06:52:39 -0800 (PST)
Message-ID: <7030386.1162824759643.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 06:52:39 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-565) Upgrade Jetty to 6.x
In-Reply-To: <17704060.1159552279561.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-565?page=all ]

Sanjay Dahiya updated HADOOP-565:
---------------------------------

    Status: Patch Available  (was: Open)

> Upgrade Jetty to 6.x
> --------------------
>
>                 Key: HADOOP-565
>                 URL: http://issues.apache.org/jira/browse/HADOOP-565
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-565.patch, Hadoop-565_1.patch.txt, Hadoop-565_2.patch, Hadoop-565_3.patch, Hadoop-565_lib.tar.gz
>
>
> Now that Jetty 6.x has been released as stable, we should upgrade.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 14:53:02 2006
Return-Path: 
 <hadoop-dev-return-4811-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21297 invoked from network); 6 Nov 2006 14:53:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 14:53:02 -0000
Received: (qmail 7263 invoked by uid 500); 6 Nov 2006 14:53:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7243 invoked by uid 500); 6 Nov 2006 14:53:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7234 invoked by uid 99); 6 Nov 2006 14:53:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 06:53:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 06:53:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 20B5F71430D
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 06:52:41 -0800 (PST)
Message-ID: <2648818.1162824761131.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 06:52:41 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-682) hadoop namenode -format doesnt work
 anymore if target directory doesnt exist
In-Reply-To: <30515001.1162824517100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-682?page=all ]

Sanjay Dahiya updated HADOOP-682:
---------------------------------

    Status: Patch Available  (was: Open)

> hadoop namenode -format doesnt work anymore if target directory doesnt exist
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-682
>                 URL: http://issues.apache.org/jira/browse/HADOOP-682
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Sanjay Dahiya
>         Attachments: Hadoop-682.patch
>
>
> Not sure if this was intended, but hadoop namenode -format doesnt work anymore if the target directory doesnt exist due to the check in the NameNode.main(). It used to work earlier 
>         if (argv.length == 1 && argv[0].equals("-format")) {
>           boolean aborted = false;
>           File[] dirs = getDirs(conf);
>           for (int idx = 0; idx < dirs.length; idx++) {
>             if (dirs[idx].exists()) {                     <<<====== if dir doesnt exist it won't format
>               System.err.print("Re-format filesystem in " + dirs[idx] +" ? (Y or N) ");
>               if (!(System.in.read() == 'Y')) {
>                 System.err.println("Format aborted in "+ dirs[idx]);
>                 aborted = true;
>               } else {
>                 format(dirs[idx]);
>                 System.err.println("Formatted "+dirs[idx]);
>               }
>               System.in.read(); // discard the enter-key
>             }
>           }
>           System.exit(aborted ? 1 : 0);
>         }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 15:30:19 2006
Return-Path: 
 <hadoop-dev-return-4812-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36541 invoked from network); 6 Nov 2006 15:30:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 15:30:19 -0000
Received: (qmail 8788 invoked by uid 500); 6 Nov 2006 15:30:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8766 invoked by uid 500); 6 Nov 2006 15:30:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8751 invoked by uid 99); 6 Nov 2006 15:30:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 07:30:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 07:29:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EAF957142F7
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 07:29:38 -0800 (PST)
Message-ID: <15867231.1162826978959.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 07:29:38 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-676) JobClient should print user
 friendly messages for standard errors
In-Reply-To: <5423204.1162510576774.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-676?page=all ]

Work on HADOOP-676 started by Sanjay Dahiya.

> JobClient should print user friendly messages for standard errors
> -----------------------------------------------------------------
>
>                 Key: HADOOP-676
>                 URL: http://issues.apache.org/jira/browse/HADOOP-676
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.9.0
>
>
> The exceptions for non-existent input dirs or already existing output dirs should generate user-friendly error messages. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 17:05:01 2006
Return-Path: 
 <hadoop-dev-return-4813-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67177 invoked from network); 6 Nov 2006 17:05:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 17:05:01 -0000
Received: (qmail 14807 invoked by uid 500); 6 Nov 2006 17:05:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14782 invoked by uid 500); 6 Nov 2006 17:05:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14773 invoked by uid 99); 6 Nov 2006 17:05:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 09:05:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 09:05:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DF42071430E
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 09:04:38 -0800 (PST)
Message-ID: <27154253.1162832678911.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 09:04:38 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-656) dfs locking doesn't notify the
 application when a lock is lost
In-Reply-To: <24276513.1162253420463.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-656?page=comments#action_12447471 ] 
            
dhruba borthakur commented on HADOOP-656:
-----------------------------------------

I can reliably cause crc-corruption in the case when the lease timesout. The following scenario explains this:

The client renews his lease every 30 seconds. The namenode declares a client as 'dead' if it does not get a lease-renewal message in 60 seconds. The namenode then reclaims the datablocks for that file; these datablocks may now get allocated from another file.

If it so happens that a client gets delayed for more than 60 seconds in its lease renewal (due to network congestion, slow response from datanodes, etc. etc), then the namenode will experience a lease expiration and will reclaim the blocks for that file in question. The namenode may now allocate these blocks to a new file. This new file may start writing to this block. Meanwhile the original file-writer may continue to flush his data to the same block because it has not yet experienced a lease-timeout-exception.  This may lead to data corruption. 

Simulating the lease-expiration timeouts to occur immediately causes crc corruptions to show up.


> dfs locking doesn't notify the application when a lock is lost
> --------------------------------------------------------------
>
>                 Key: HADOOP-656
>                 URL: http://issues.apache.org/jira/browse/HADOOP-656
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Sameer Paranjpye
>
> DFS locks may be lost for failing to renew the lease on time, but the application is not notified about the loss of the lock and may therefore perform operations assuming it has the lock, even though the lock has been given to another process. I propose that DFS operations check to see if that client has lost a lock since the last check and if so throw a LostLockException.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 18:21:01 2006
Return-Path: 
 <hadoop-dev-return-4814-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91122 invoked from network); 6 Nov 2006 18:21:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 18:21:01 -0000
Received: (qmail 93707 invoked by uid 500); 6 Nov 2006 18:21:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93676 invoked by uid 500); 6 Nov 2006 18:21:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93667 invoked by uid 99); 6 Nov 2006 18:21:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 10:21:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 10:21:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E3DF571430F
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 10:20:39 -0800 (PST)
Message-ID: <833595.1162837239930.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 10:20:39 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-613) The final merge on the reduces should
 feed the reduce directly
In-Reply-To: <32865816.1161196175060.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-613?page=all ]

Devaraj Das reassigned HADOOP-613:
----------------------------------

    Assignee: Devaraj Das  (was: Sanjay Dahiya)

> The final merge on the reduces should feed the reduce directly
> --------------------------------------------------------------
>
>                 Key: HADOOP-613
>                 URL: http://issues.apache.org/jira/browse/HADOOP-613
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>
> The final merge on the input to the reduce should use the iterators from HADOOP-611 directly rather than using a round trip to disk.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 19:35:00 2006
Return-Path: 
 <hadoop-dev-return-4815-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16712 invoked from network); 6 Nov 2006 19:35:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 19:35:00 -0000
Received: (qmail 70200 invoked by uid 500); 6 Nov 2006 19:35:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69971 invoked by uid 500); 6 Nov 2006 19:35:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69962 invoked by uid 99); 6 Nov 2006 19:35:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 11:35:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 11:34:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 046237142F7
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 11:34:39 -0800 (PST)
Message-ID: <32418307.1162841679015.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 11:34:39 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-459) libhdfs leaks memory when writing
 to files
In-Reply-To: <12771302.1155876793902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-459?page=all ]

Work on HADOOP-459 started by Sameer Paranjpye.

> libhdfs leaks memory when writing to files
> ------------------------------------------
>
>                 Key: HADOOP-459
>                 URL: http://issues.apache.org/jira/browse/HADOOP-459
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>            Reporter: Christian Kunz
>         Assigned To: Sameer Paranjpye
>         Attachments: libhdfs_fixes.txt
>
>
> hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 19:37:03 2006
Return-Path: 
 <hadoop-dev-return-4816-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17760 invoked from network); 6 Nov 2006 19:37:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 19:37:03 -0000
Received: (qmail 75300 invoked by uid 500); 6 Nov 2006 19:37:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75264 invoked by uid 500); 6 Nov 2006 19:37:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75251 invoked by uid 99); 6 Nov 2006 19:37:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 11:37:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 11:37:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3F09671430E
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 11:36:40 -0800 (PST)
Message-ID: <25498406.1162841800255.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 11:36:40 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-459) libhdfs leaks memory when writing to
 files
In-Reply-To: <12771302.1155876793902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-459?page=all ]

Sameer Paranjpye updated HADOOP-459:
------------------------------------

    Status: Patch Available  (was: In Progress)

Oops, forgot to add one of my source files with 'svn add'. Updated the patch. This ought to fix the test-libhdfs problem as well.

> libhdfs leaks memory when writing to files
> ------------------------------------------
>
>                 Key: HADOOP-459
>                 URL: http://issues.apache.org/jira/browse/HADOOP-459
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.1, 0.7.0, 0.6.2, 0.6.1, 0.6.0, 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Sameer Paranjpye
>         Attachments: libhdfs_fixes.1.txt, libhdfs_fixes.txt
>
>
> hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 19:37:04 2006
Return-Path: 
 <hadoop-dev-return-4817-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17792 invoked from network); 6 Nov 2006 19:37:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 19:37:04 -0000
Received: (qmail 75542 invoked by uid 500); 6 Nov 2006 19:37:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75514 invoked by uid 500); 6 Nov 2006 19:37:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75505 invoked by uid 99); 6 Nov 2006 19:37:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 11:37:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 11:37:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 32BA77142F7
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 11:36:42 -0800 (PST)
Message-ID: <19613087.1162841802205.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 11:36:42 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-459) libhdfs leaks memory when writing to
 files
In-Reply-To: <12771302.1155876793902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-459?page=all ]

Sameer Paranjpye updated HADOOP-459:
------------------------------------

    Attachment: libhdfs_fixes.1.txt

> libhdfs leaks memory when writing to files
> ------------------------------------------
>
>                 Key: HADOOP-459
>                 URL: http://issues.apache.org/jira/browse/HADOOP-459
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>            Reporter: Christian Kunz
>         Assigned To: Sameer Paranjpye
>         Attachments: libhdfs_fixes.1.txt, libhdfs_fixes.txt
>
>
> hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 19:42:01 2006
Return-Path: 
 <hadoop-dev-return-4818-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18872 invoked from network); 6 Nov 2006 19:42:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 19:42:01 -0000
Received: (qmail 83573 invoked by uid 500); 6 Nov 2006 19:42:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83545 invoked by uid 500); 6 Nov 2006 19:42:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83534 invoked by uid 99); 6 Nov 2006 19:42:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 11:42:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 11:41:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F0A907142F7
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 11:41:38 -0800 (PST)
Message-ID: <8456759.1162842098983.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 11:41:38 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-334) Redesign the dfs namespace
 datastructures to be copy on write
In-Reply-To: <27865237.1151602049843.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-334?page=comments#action_12447513 ] 
            
dhruba borthakur commented on HADOOP-334:
-----------------------------------------

I was thinking of the different ways to checkpoint the fsimage.

The simplest and dumb way is to make the checkpointing process acquire the global lock, flush the entire
contents to persistent store and then release the lock. This causes all currently running operations to block and is sub-optimal.

Another simple way is to have a global lock. At the start of the checkpointing process, we make a clone (ie. copy) of the entire FSImage in memory and then release the global lock. The  clone is then lazily written to persistent store. The disadvantage of this approach is that we need lots of memory.

If we adopt a copy-on-write approach, we might get an optimal solution. One that does not require loads of memory neither does it impact concurrent transactions.

Each node in the tree has a clone member. Each node starts with the clone member set to null.  There is a single global lock associated with the entire tree. No other fine-grain locks are necessary.

All node modification request holds the global lock (just like in the current code).  Suppose a node modification request finds a node that is not yet cloned. It clones the node and starts using the clone data. If the node is already cloned, it uses the clone data\and ignores the original data of that node.

The checkpointing thread traverses the tree and starts writing nodes to persistent store.  No locks are held during this flush to persistent store. The checkpointing thread does not mess around with any clone data (if present). At the end of the checkpointing process, the global lock is reacquired, all data from the clones are copied back to the original nodes, the clone members are nulled and the global lock released.

In this approach, we keep the simiplicity associated with a single global lock while optimising on memory usage.

> Redesign the dfs namespace datastructures to be copy on write
> -------------------------------------------------------------
>
>                 Key: HADOOP-334
>                 URL: http://issues.apache.org/jira/browse/HADOOP-334
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace datastructures should be copy on write so that the namespace does not need to be completely locked down from user changes while the checkpoint is being made.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 19:54:00 2006
Return-Path: 
 <hadoop-dev-return-4819-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21678 invoked from network); 6 Nov 2006 19:54:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 19:54:00 -0000
Received: (qmail 4718 invoked by uid 500); 6 Nov 2006 19:54:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4494 invoked by uid 500); 6 Nov 2006 19:54:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4485 invoked by uid 99); 6 Nov 2006 19:54:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 11:54:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 11:53:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4C2567142F7
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 11:53:39 -0800 (PST)
Message-ID: <16313245.1162842819308.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 11:53:39 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-334) Redesign the dfs namespace
 datastructures to be copy on write
In-Reply-To: <27865237.1151602049843.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-334?page=comments#action_12447516 ] 
            
Doug Cutting commented on HADOOP-334:
-------------------------------------

The simplest copy-on-write approach would:

1. Keep a pointer to the root of the tree.
2. For any change, copy all structures on the path between the root and the change, and reset the root.
3. To checkpoint, traverse the tree from the root.

Synchronization would be required around changes (single writer, multiple reader).

Allocating something proportional to the path length per change is probably fast enough.  Do we have reason to think this would be too slow?

> Redesign the dfs namespace datastructures to be copy on write
> -------------------------------------------------------------
>
>                 Key: HADOOP-334
>                 URL: http://issues.apache.org/jira/browse/HADOOP-334
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace datastructures should be copy on write so that the namespace does not need to be completely locked down from user changes while the checkpoint is being made.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 20:03:00 2006
Return-Path: 
 <hadoop-dev-return-4820-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27207 invoked from network); 6 Nov 2006 20:03:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 20:03:00 -0000
Received: (qmail 24561 invoked by uid 500); 6 Nov 2006 20:03:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24379 invoked by uid 500); 6 Nov 2006 20:03:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24370 invoked by uid 99); 6 Nov 2006 20:03:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 12:03:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 12:02:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 064ED71430D
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 12:02:39 -0800 (PST)
Message-ID: <25474550.1162843359023.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 12:02:39 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-672) dfs shell enhancements
In-Reply-To: <26965580.1162489639907.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-672?page=comments#action_12447521 ] 
            
Doug Cutting commented on HADOOP-672:
-------------------------------------

Also, all error messages should be printed to System.error, not System.out.

> dfs shell enhancements
> ----------------------
>
>                 Key: HADOOP-672
>                 URL: http://issues.apache.org/jira/browse/HADOOP-672
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: dhruba borthakur
>            Priority: Minor
>
>  A few enhancements to  dfsshell:
> Bring the wiki page up to date with the latest functionality if  that's not done already.
> Add a -help option to the command.
> Make the syntax line more helpful in identifying which argument to each command needs to
> be a directory, a file  or a glob.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 20:16:00 2006
Return-Path: 
 <hadoop-dev-return-4821-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33334 invoked from network); 6 Nov 2006 20:16:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 20:16:00 -0000
Received: (qmail 42753 invoked by uid 500); 6 Nov 2006 20:16:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42728 invoked by uid 500); 6 Nov 2006 20:16:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42716 invoked by uid 99); 6 Nov 2006 20:16:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 12:16:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 12:15:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4C90B7142FA
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 12:15:38 -0800 (PST)
Message-ID: <17808007.1162844138310.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 12:15:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-667) Path configuration properties should
 not be comma separated
In-Reply-To: <23824706.1162403896582.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-667?page=comments#action_12447522 ] 
            
Doug Cutting commented on HADOOP-667:
-------------------------------------

For the record, we used to permit comma- or space- delimited lists.  Spaces were removed for better operation under Windows, where spaces are common in directory names.

We could fix this by quoting, or with nested xml tags.  But I would give this a very low priority.  (Has anyone actually complained because they need to specify a path with a comma?  Do we expect anyone will anytime soon?  If they did, would the workaround be difficult or non-obvious?)

> Path configuration properties should not be comma separated
> -----------------------------------------------------------
>
>                 Key: HADOOP-667
>                 URL: http://issues.apache.org/jira/browse/HADOOP-667
>             Project: Hadoop
>          Issue Type: Bug
>          Components: fs
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>            Priority: Minor
>
> A few configuration properties allow multiple directory paths separated by comma's (,).  Since comma is a valid character for a directory name, it should not be used as a path separator.
> At a minimum, this applies to these properties:
>      mapred.local.dir
>      dfs.name.dir
> [ I also wonder how robust the implementation is against paths that contain spaces. ]

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 20:17:59 2006
Return-Path: 
 <hadoop-dev-return-4822-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33987 invoked from network); 6 Nov 2006 20:17:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 20:17:59 -0000
Received: (qmail 44117 invoked by uid 500); 6 Nov 2006 20:18:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43891 invoked by uid 500); 6 Nov 2006 20:18:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43882 invoked by uid 99); 6 Nov 2006 20:18:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 12:18:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 12:17:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 59E8071430D
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 12:17:38 -0800 (PST)
Message-ID: <24630465.1162844258363.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 12:17:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-665)  hadoop -rmr  does NOT process
 multiple arguments and does not complain
In-Reply-To: <7360665.1162357336573.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-665?page=all ]

Doug Cutting updated HADOOP-665:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I applied this last week.  Thanks, Dhruba!

>  hadoop -rmr  does NOT process multiple arguments and does not complain
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-665
>                 URL: http://issues.apache.org/jira/browse/HADOOP-665
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: dfsshell_multipleargs.patch
>
>
> hadoop dfs -rmr /user/arkady/fuchun /user/arkady/fuchun_h /user/arkady/log /user/arkady/t /user/arkady/t1
> 06/10/31 20:15:31 INFO conf.Configuration: parsing jar:file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/
> tools/hadoop/kryptonite/hadoop-0.7.1.jar!/hadoop-default.xml
> 06/10/31 20:15:31 INFO conf.Configuration: parsing file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/
> hadoop/kryptonite/conf/kryptonite2/hadoop-site.xml
> 06/10/31 20:15:31 INFO ipc.Client: org.apache.hadoop.io.ObjectWritable
> ConnectionCuller maxidletime=1000ms: starting Deleted /user/arkady/fuchun

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 20:18:01 2006
Return-Path: 
 <hadoop-dev-return-4823-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34037 invoked from network); 6 Nov 2006 20:18:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 20:18:01 -0000
Received: (qmail 44164 invoked by uid 500); 6 Nov 2006 20:18:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44135 invoked by uid 500); 6 Nov 2006 20:18:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44126 invoked by uid 99); 6 Nov 2006 20:18:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 12:18:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 12:17:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B79927142FA
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 12:17:39 -0800 (PST)
Message-ID: <26909514.1162844259749.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 12:17:39 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-666) hadoop dfs  does not complain about
 unknown option
In-Reply-To: <9227649.1162357636535.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-666?page=all ]

Doug Cutting resolved HADOOP-666.
---------------------------------

    Fix Version/s: 0.7.2
       Resolution: Fixed

> hadoop dfs  does not complain about unknown option
> --------------------------------------------------
>
>                 Key: HADOOP-666
>                 URL: http://issues.apache.org/jira/browse/HADOOP-666
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>            Priority: Minor
>             Fix For: 0.7.2
>
>
> No error message displayed when wrong arguments were fed to "hadoop dfs" as shown by the snippet at the end of this description.
> hadoop dfs -rmr/user/arkady/doremi /user/arkady/fuchun /user/arkady/fuchun_h /user/arkady/log /user/arkady/t /user/arkady/t1
> 06/10/31 20:11:27 INFO conf.Configuration: parsing jar:file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/hadoop/kryptonite/hadoop-0.7.1.jar!/hadoop-default.xml
> 06/10/31 20:11:27 INFO conf.Configuration: parsing file:/nfs/ystools/vol/ystools/releng/build/Linux_2.6_rh4_i686/tools/hadoop/kryptonite/conf/kryptonite2/hadoop-site.xml
> 06/10/31 20:11:27 INFO ipc.Client: org.apache.hadoop.io.ObjectWritable ConnectionCuller maxidletime=1000ms: starting
> nlpdev2:/home/arkady/ngrams> which hadoop
> /usr/releng/tools/hadoop/kryptonite/bin/hadoop

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 20:34:22 2006
Return-Path: 
 <hadoop-dev-return-4824-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49442 invoked from network); 6 Nov 2006 20:34:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 20:34:22 -0000
Received: (qmail 76505 invoked by uid 500); 6 Nov 2006 20:34:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76372 invoked by uid 500); 6 Nov 2006 20:34:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76363 invoked by uid 99); 6 Nov 2006 20:34:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 12:34:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [204.127.192.85] (HELO rwcrmhc15.comcast.net) (204.127.192.85)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 12:34:18 -0800
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc15) with ESMTP
          id <20061106203357m1500d3gobe>; Mon, 6 Nov 2006 20:33:57 +0000
Message-ID: <454F9C34.2050505@apache.org>
Date: Mon, 06 Nov 2006 12:33:56 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: running dfs standalone
References: <b0ff1e2d0610301024v68c57375hc6c04f93fba1dab1@mail.gmail.com>
In-Reply-To: <b0ff1e2d0610301024v68c57375hc6c04f93fba1dab1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

James Todd wrote:
>    bin/hadoop.sh fails under dash, which is ubuntu's 6.10b /bin/sh
>      if [ "$HADOOP_NICENESS" == "" ]; then

Can you please submit a bug for this, ideally with a patch for 
bin/hadoop?  Thanks.

>    would be nice to add ".txt" suffix to the log and out files so that they
> can be viewed w/in the browser

Yes, that would be good.  Or we might explicitly specify their content 
type somehow.  Please submit another bug for this.

>  Now, the more critical issue. I'm wondering why, if I am understanding
> things correctly, why the DataNode *requires* DNS
>  resolution vs optionally simply using the specified IP?

I can't think of a reason.  Most folks define localhost to be 127.0.0.1 
in /etc/hosts and then specify localhost for a standalone configuration. 
  If for some reason you need to specify raw ip addresses, then please 
submit a bug and/or patch.

Thanks,

Doug

From MAILER-DAEMON Mon Nov  6 21:38:01 2006
Return-Path: 
 <hadoop-dev-return-4825-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77864 invoked from network); 6 Nov 2006 21:38:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 21:38:01 -0000
Received: (qmail 2560 invoked by uid 500); 6 Nov 2006 21:38:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2520 invoked by uid 500); 6 Nov 2006 21:38:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2511 invoked by uid 99); 6 Nov 2006 21:38:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 13:38:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 13:37:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E09DE7142CD
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 13:37:38 -0800 (PST)
Message-ID: <28796411.1162849058917.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 13:37:38 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-334) Redesign the dfs namespace
 datastructures to be copy on write
In-Reply-To: <27865237.1151602049843.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-334?page=comments#action_12447542 ] 
            
Sameer Paranjpye commented on HADOOP-334:
-----------------------------------------

Copy on write helps, but the global lock needs to be acquired at the end of the checkpointing process nevertheless. This still has the effect of locking clients out of the namespace while the entire namespace is traversed and the clone pointers are reset.

Instead of copy on write, how about changing the locking model so that for any change:
1. Acquire read locks on all structures between the root and the change, acquire a write lock on the changed
node.
2. To checkpoint, traverse the namespace acquiring read locks on the path between the root and the node being checkpointed. Serialize each node to a new image file on disk.

This way we never lock down the whole tree, for any operation. At the start of the checkpointing process, a new edits file is created. Edits that occur while the checkpoint is in progress are sent to the new file. This implies that there will be some overlap between the checkpointed image and the edits file, but this is ok. We require that the union of the image and the edits give us the current state of the namespace but the two do not have to be disjoint. 

> Redesign the dfs namespace datastructures to be copy on write
> -------------------------------------------------------------
>
>                 Key: HADOOP-334
>                 URL: http://issues.apache.org/jira/browse/HADOOP-334
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace datastructures should be copy on write so that the namespace does not need to be completely locked down from user changes while the checkpoint is being made.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 21:42:09 2006
Return-Path: 
 <hadoop-dev-return-4826-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78470 invoked from network); 6 Nov 2006 21:42:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 21:42:09 -0000
Received: (qmail 11123 invoked by uid 500); 6 Nov 2006 21:42:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11099 invoked by uid 500); 6 Nov 2006 21:42:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11090 invoked by uid 99); 6 Nov 2006 21:42:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 13:42:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 13:41:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 941797142FA
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 13:41:38 -0800 (PST)
Message-ID: <10431270.1162849298604.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 13:41:38 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-681) Adminstrative hook to pull live
 nodes out of a HDFS cluster
In-Reply-To: <29893636.1162789960338.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-681?page=comments#action_12447543 ] 
            
Konstantin Shvachko commented on HADOOP-681:
--------------------------------------------

1. I'd replace 3 new methods in ClientProtocol by one with a 3 valued parameter.
2. You do not need a new member for counting already re-replicated blocks.
You can count blocks in the DatanodeDescriptor.
When the set of blocks is empty replication is finished.
3. Name-node can send shutdown command to the data-node after that
(in reply to the heartbeat). The command is implemented but has not been used yet.
4. Inside name-node DatanodeDescriptor should be used instead of DatanodeInfo.

> Adminstrative hook to pull live nodes out of a HDFS cluster
> -----------------------------------------------------------
>
>                 Key: HADOOP-681
>                 URL: http://issues.apache.org/jira/browse/HADOOP-681
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> Introduction
> ------------
> An administrator sometimes needs to bring down a datanode for scheduled maintenance. It would be nice if HDFS can be informed about this event. On receipt of this event, HDFS can take steps so that HDFS data is not lost when the node goes down at a later time.
> Architecture
> -----------
> In the existing architecture, a datanode can be in one of two states: dead or alive. A datanode is alive if its heartbeats are being processed by the namenode. Otherwise that datanode is in dead state. We extend the architecture to introduce the concept of a tranquil state for a datanode.
> A datanode is in tranquil state if:
>     - it cannot be a target for replicating any blocks
>     - any block replica that it currently contains does not count towards the target-replication-factor of that block
> Thus, a node that is in tranquil state can be brought down without impacting the guarantees provided by HDFS.
> The tranquil state is not persisted across namenode restarts. If the namenode restarts then that datanode will go back to being in the dead or alive state.
> The datanode is completely transparent to the fact that it has been labeled as being in tranquil state. It can continue to heartbeat and serve read requests for datablocks.
> DFSShell Design
> -----------------------
> We extend the DFS Shell utility to specify a list of nodes to the namenode.
>     hadoop dfs -tranquil {set|clear|get} datanodename1 [,datanodename2]
> The DFSShell utility sends this list to the namenode. This DFSShell command invoked with the "set" option completes when the list is transferred to the namenode. This command is non-blocking; it returns before the datanode is actually in the tranquil state. The client can then query the state by re-issuing the command with the "get" option. This option will indicate whether the datanode is in tranquil state or is "being tranquiled". The "clear" option is used to transition a tranquil datanode to the alive state. The "clear" option is a no-op if the datanode is not in the "tranquil" state.
> ClientProtocol Design
> --------------------
> The ClientProtocol is the protocol exported by the namenode for its client.
> This protocol is extended to incorporate three new methods:
>    ClientProtocol.setTranquil(String[] datanodes)
>    ClientProtocol.getTranquil(String datanode)
>    ClientProtocol.clearTranquil(String[] datanodes)
> The ProtocolVersion is incremented to prevent conversations between imcompatible clients and servers. An old DFSShell cannot talk to the new NameNode and vice-versa.
> NameNode Design
> -------------------------
> The namenode does the bulk of the work for supporting this new feature.
> The DatanodeInfo object has a new private member named "state". It also has three new member functions:
>     datanodeInfo.tranquilStarted(): start the process of tranquilization
>     datanodeInfo.tranquilCompleted(): node is not in tranquil state
>     datanodeInfo.clearTranquil() : remove tranquilization from node
> The namenode exposes a new API to set and clear tranquil states for a datanode. On receipt of a "set tranquil" command, it invokes datanodeInfo.tranquilStarted().
> The FSNamesystem.chooseTarget() method skips over datanodes that are marked as being in the "tranquil" state. This ensures that tranquil-datanodes are never chosen as targets of replication. The namenode does *not* record
> this operation in either the FsImage or the EditLogs.
> The namenode puts all the blocks from a being-tranquiled node into the neededReplication data structure. Necessary code changes are made to ensure that these blocks get replicated by the regular replication method. As of now, the regular replication code does not distinguish between these blocks and the blocks that are replication candidates because some other datanode might have died. It might be prudent to give different (lower?) weightage to this type of replication requests, but that exercise is deferred to a later date. In this design, replication requests generated because of a node going to a tranquil state are not distinguished from replication requests generated by a datanode going to the dead state.
> The DatanodeInfo object has another new private member named "pendingTranquilCount". This field stores the remaining number of blocks that still remain to be replicated. This field is valid only if the node is in the ets being-tranquiled state.  On receipt of every 'n' heartbeats from the being-tranquiled datanode, the namenode calculates the amount of data that is still remaining to be replicated and updates the "pendingTranquilCount". in the DatanodeInfo.When all the replications complete, the datanode is marked as tranquiled. The number 'n' is selected in such a way that the average heartbeat processing time does not increase appreciably.
> It is possible that the namenode might stop receving heartbeats from a datanode that is being-tranquiled. In this case,   the tranquil flag of the datanode gets cleared. It transitions to the dead state and the normal processing for alive-to-dead transition occurs here.
> Web Interface
> -------------------
> The dfshealth.jsp displays the live nodes, dead nodes, being-tranquiled and tranquil nodes. For nodes in the being-tranquiled state, it displays the percentage of tranquilization completed till now.
> Issues
> --------
> 1. If a request for tranquilization starts getting processed and there aren't enough space available in DFS to complete the necessary replication, then that node might remain in the being-tranquiled state for a long long time. This is not necessarily a bad thing but is there a better option?
> 2. We have opted for not storing cluster configuration information in the persistent image of the file system. (The tranquil state of a datanode may be lost if the namenode restarts).
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 21:58:06 2006
Return-Path: 
 <hadoop-dev-return-4827-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83636 invoked from network); 6 Nov 2006 21:58:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 21:58:06 -0000
Received: (qmail 54499 invoked by uid 500); 6 Nov 2006 21:58:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54480 invoked by uid 500); 6 Nov 2006 21:58:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54471 invoked by uid 99); 6 Nov 2006 21:58:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 13:58:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 13:58:04 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CBD9A714315
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 13:57:44 -0800 (PST)
Message-ID: <2081902.1162850264832.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 13:57:44 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-334) Redesign the dfs namespace
 datastructures to be copy on write
In-Reply-To: <27865237.1151602049843.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-334?page=comments#action_12447550 ] 
            
Owen O'Malley commented on HADOOP-334:
--------------------------------------

Sameer, you missed the point. You don't need any locks for checkpointing with copy on write other than a quick read lock on the root while you switch to a new log. Once you have started the new log, you can traverse from the old root and see the state at the transition. So the lock is held while you open a single file.

> Redesign the dfs namespace datastructures to be copy on write
> -------------------------------------------------------------
>
>                 Key: HADOOP-334
>                 URL: http://issues.apache.org/jira/browse/HADOOP-334
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace datastructures should be copy on write so that the namespace does not need to be completely locked down from user changes while the checkpoint is being made.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 22:00:00 2006
Return-Path: 
 <hadoop-dev-return-4828-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84140 invoked from network); 6 Nov 2006 22:00:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 22:00:00 -0000
Received: (qmail 58914 invoked by uid 500); 6 Nov 2006 22:00:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58687 invoked by uid 500); 6 Nov 2006 22:00:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58678 invoked by uid 99); 6 Nov 2006 22:00:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 14:00:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 13:59:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9529D7142FA
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 13:59:38 -0800 (PST)
Message-ID: <18693903.1162850378607.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 13:59:38 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-681) Adminstrative hook to pull live
 nodes out of a HDFS cluster
In-Reply-To: <29893636.1162789960338.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-681?page=comments#action_12447551 ] 
            
Yoram Arnon commented on HADOOP-681:
------------------------------------

+1 to Eric's comments.

in particular, dfs -report, dfs -safemode and dfs -decommision should be separated into a dfsadmin command.

And, an API to remove datanodes from the namenode's eternal memory would be good in general, and useful in this case

> Adminstrative hook to pull live nodes out of a HDFS cluster
> -----------------------------------------------------------
>
>                 Key: HADOOP-681
>                 URL: http://issues.apache.org/jira/browse/HADOOP-681
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> Introduction
> ------------
> An administrator sometimes needs to bring down a datanode for scheduled maintenance. It would be nice if HDFS can be informed about this event. On receipt of this event, HDFS can take steps so that HDFS data is not lost when the node goes down at a later time.
> Architecture
> -----------
> In the existing architecture, a datanode can be in one of two states: dead or alive. A datanode is alive if its heartbeats are being processed by the namenode. Otherwise that datanode is in dead state. We extend the architecture to introduce the concept of a tranquil state for a datanode.
> A datanode is in tranquil state if:
>     - it cannot be a target for replicating any blocks
>     - any block replica that it currently contains does not count towards the target-replication-factor of that block
> Thus, a node that is in tranquil state can be brought down without impacting the guarantees provided by HDFS.
> The tranquil state is not persisted across namenode restarts. If the namenode restarts then that datanode will go back to being in the dead or alive state.
> The datanode is completely transparent to the fact that it has been labeled as being in tranquil state. It can continue to heartbeat and serve read requests for datablocks.
> DFSShell Design
> -----------------------
> We extend the DFS Shell utility to specify a list of nodes to the namenode.
>     hadoop dfs -tranquil {set|clear|get} datanodename1 [,datanodename2]
> The DFSShell utility sends this list to the namenode. This DFSShell command invoked with the "set" option completes when the list is transferred to the namenode. This command is non-blocking; it returns before the datanode is actually in the tranquil state. The client can then query the state by re-issuing the command with the "get" option. This option will indicate whether the datanode is in tranquil state or is "being tranquiled". The "clear" option is used to transition a tranquil datanode to the alive state. The "clear" option is a no-op if the datanode is not in the "tranquil" state.
> ClientProtocol Design
> --------------------
> The ClientProtocol is the protocol exported by the namenode for its client.
> This protocol is extended to incorporate three new methods:
>    ClientProtocol.setTranquil(String[] datanodes)
>    ClientProtocol.getTranquil(String datanode)
>    ClientProtocol.clearTranquil(String[] datanodes)
> The ProtocolVersion is incremented to prevent conversations between imcompatible clients and servers. An old DFSShell cannot talk to the new NameNode and vice-versa.
> NameNode Design
> -------------------------
> The namenode does the bulk of the work for supporting this new feature.
> The DatanodeInfo object has a new private member named "state". It also has three new member functions:
>     datanodeInfo.tranquilStarted(): start the process of tranquilization
>     datanodeInfo.tranquilCompleted(): node is not in tranquil state
>     datanodeInfo.clearTranquil() : remove tranquilization from node
> The namenode exposes a new API to set and clear tranquil states for a datanode. On receipt of a "set tranquil" command, it invokes datanodeInfo.tranquilStarted().
> The FSNamesystem.chooseTarget() method skips over datanodes that are marked as being in the "tranquil" state. This ensures that tranquil-datanodes are never chosen as targets of replication. The namenode does *not* record
> this operation in either the FsImage or the EditLogs.
> The namenode puts all the blocks from a being-tranquiled node into the neededReplication data structure. Necessary code changes are made to ensure that these blocks get replicated by the regular replication method. As of now, the regular replication code does not distinguish between these blocks and the blocks that are replication candidates because some other datanode might have died. It might be prudent to give different (lower?) weightage to this type of replication requests, but that exercise is deferred to a later date. In this design, replication requests generated because of a node going to a tranquil state are not distinguished from replication requests generated by a datanode going to the dead state.
> The DatanodeInfo object has another new private member named "pendingTranquilCount". This field stores the remaining number of blocks that still remain to be replicated. This field is valid only if the node is in the ets being-tranquiled state.  On receipt of every 'n' heartbeats from the being-tranquiled datanode, the namenode calculates the amount of data that is still remaining to be replicated and updates the "pendingTranquilCount". in the DatanodeInfo.When all the replications complete, the datanode is marked as tranquiled. The number 'n' is selected in such a way that the average heartbeat processing time does not increase appreciably.
> It is possible that the namenode might stop receving heartbeats from a datanode that is being-tranquiled. In this case,   the tranquil flag of the datanode gets cleared. It transitions to the dead state and the normal processing for alive-to-dead transition occurs here.
> Web Interface
> -------------------
> The dfshealth.jsp displays the live nodes, dead nodes, being-tranquiled and tranquil nodes. For nodes in the being-tranquiled state, it displays the percentage of tranquilization completed till now.
> Issues
> --------
> 1. If a request for tranquilization starts getting processed and there aren't enough space available in DFS to complete the necessary replication, then that node might remain in the being-tranquiled state for a long long time. This is not necessarily a bad thing but is there a better option?
> 2. We have opted for not storing cluster configuration information in the persistent image of the file system. (The tranquil state of a datanode may be lost if the namenode restarts).
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 22:04:01 2006
Return-Path: 
 <hadoop-dev-return-4829-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85244 invoked from network); 6 Nov 2006 22:04:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 22:04:01 -0000
Received: (qmail 63659 invoked by uid 500); 6 Nov 2006 22:04:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63440 invoked by uid 500); 6 Nov 2006 22:04:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63431 invoked by uid 99); 6 Nov 2006 22:04:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 14:04:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 14:03:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7B96171430E
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 14:03:39 -0800 (PST)
Message-ID: <19006479.1162850619503.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 14:03:39 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-496) Expose HDFS as a WebDAV store
In-Reply-To: <29112039.1156966140094.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-496?page=comments#action_12447554 ] 
            
Yoram Arnon commented on HADOOP-496:
------------------------------------

that patch hasn't reached submission-worth status yet.
We've slowed down our development on this, so not sure when this will actually get submitted.

> Expose HDFS as a WebDAV store
> -----------------------------
>
>                 Key: HADOOP-496
>                 URL: http://issues.apache.org/jira/browse/HADOOP-496
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Michel Tourn
>
> WebDAV stands for Distributed Authoring and Versioning. It is a set of extensions to the HTTP protocol that lets users collaboratively edit and manage files on a remote web server. It is often considered as a replacement for NFS or SAMBA
> HDFS (Hadoop Distributed File System) needs a friendly file system interface. DFSShell commands are unfamiliar. Instead it is more convenient for Hadoop users to use a mountable network drive. A friendly interface to HDFS will be used both for casual browsing of data and for bulk import/export. 
> The FUSE provider for HDFS is already available ( http://issues.apache.org/jira/browse/HADOOP-17 )  but it had scalability problems. WebDAV is a popular alternative. 
> The typical licensing terms for WebDAV tools are also attractive: 
> GPL for Linux client tools that Hadoop would not redistribute anyway. 
> More importantly, Apache Project/Apache license for Java tools and for server components. 
> This allows for a tighter integration with the HDFS code base.
> There are some interesting Apache projects that support WebDAV.
> But these are probably too heavyweight for the needs of Hadoop:
> Tomcat servlet: http://tomcat.apache.org/tomcat-4.1-doc/catalina/docs/api/org/apache/catalina/servlets/WebdavServlet.html
> Slide:          http://jakarta.apache.org/slide/
> Being HTTP-based and "backwards-compatible" with Web Browser clients, the WebDAV server protocol could even be piggy-backed on the existing Web UI ports of the Hadoop name node / data nodes. WebDAV can be hosted as (Jetty) servlets. This minimizes server code bloat and this avoids additional network traffic between HDFS and the WebDAV server.
> General Clients (read-only):
> Any web browser
> Linux Clients: 
> Mountable GPL davfs2  http://dav.sourceforge.net/
> FTP-like  GPL Cadaver http://www.webdav.org/cadaver/
> Server Protocol compliance tests:
> http://www.webdav.org/neon/litmus/  
> A goal is for Hadoop HDFS to pass this test (minus support for Properties)
> Pure Java clients:
> DAV Explorer Apache lic. http://www.ics.uci.edu/~webdav/	
> WebDAV also makes it convenient to add advanced features in an incremental fashion:
> file locking, access control lists, hard links, symbolic links.
> New WebDAV standards get accepted and more or less featured WebDAV clients exist.
> core              http://www.webdav.org/specs/rfc2518.html
> ACLs              http://www.webdav.org/specs/rfc3744.html
> redirects "soft links" http://greenbytes.de/tech/webdav/rfc4437.html
> BIND "hard links" http://www.webdav.org/bind/
> quota             http://tools.ietf.org/html/rfc4331

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 22:13:08 2006
Return-Path: 
 <hadoop-dev-return-4830-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87523 invoked from network); 6 Nov 2006 22:13:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 22:13:08 -0000
Received: (qmail 74098 invoked by uid 500); 6 Nov 2006 22:13:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74058 invoked by uid 500); 6 Nov 2006 22:13:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73970 invoked by uid 99); 6 Nov 2006 22:13:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 14:13:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 14:12:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DA0F87142CD
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 14:12:38 -0800 (PST)
Message-ID: <24858189.1162851158890.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 14:12:38 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-334) Redesign the dfs namespace
 datastructures to be copy on write
In-Reply-To: <27865237.1151602049843.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-334?page=comments#action_12447556 ] 
            
Milind Bhandarkar commented on HADOOP-334:
------------------------------------------

To do periodic checkpointing we need none of these fancy locking changes. I am putting forward a proposal soon, that would do periodic checkpointing without changing the locking model.

> Redesign the dfs namespace datastructures to be copy on write
> -------------------------------------------------------------
>
>                 Key: HADOOP-334
>                 URL: http://issues.apache.org/jira/browse/HADOOP-334
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace datastructures should be copy on write so that the namespace does not need to be completely locked down from user changes while the checkpoint is being made.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 22:25:22 2006
Return-Path: 
 <hadoop-dev-return-4831-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91905 invoked from network); 6 Nov 2006 22:25:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 22:25:22 -0000
Received: (qmail 3391 invoked by uid 500); 6 Nov 2006 22:25:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3363 invoked by uid 500); 6 Nov 2006 22:25:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3323 invoked by uid 99); 6 Nov 2006 22:25:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 14:25:31 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 14:25:17 -0800
Received: from coatspeaklx (coatspeak-lx.corp.yahoo.com [10.72.110.26])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kA6MOrsK055420
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Mon, 6 Nov 2006 14:24:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:thread-index:x-mimeole;
	b=1NNGiXqqTbK6g9KD9YFP1stAx5X7Gyx5/SYsnBzFHW7qnIBfguu8jbgnhqYyUJET
From: "Dhruba Borthakur" <dhruba@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: [jira] Commented: (HADOOP-334) Redesign the dfs namespace
 datastructures to be copy on write
Date: Mon, 6 Nov 2006 14:24:53 -0800
Message-ID: <016f01c701f2$61fc0c10$639115ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <28796411.1162849058917.JavaMail.jira@brutus>
Thread-Index: AccB69z/BlwjgWSlTquSuuR17QkPCAABPDBg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org

Regarding copy-on-write approach, we do not need to traverse the entire
namespace to reset the clone pointers at the end of the checkpointing
process. We can keep a lookaside list that contains all the nodes that have
a clone pointer. But we still have to acquire the global lock at the end of
the checkpointing process, traverse this lookaside list of cloned-nodes, and
then null-them.

I like the generalized scheme of fine-grain locks (instead of a global lock)
while traversing the namespace. It is more efficient once implemented
correctly. There are quite a few tricks about lock-hierarchy that one has to
play for "renames". But it can be done.

The one thing that I am not clear about is whether we get correct semantics
if the imagefile and the editfile overlap.  If x, y and z are three
transactions, are you saying that
   			x + y + z is equilvalent to x + y + y +z  
where y is a single transaction that resides in the image file as well as
the edits file. Are you proposing something like a global transaction number
to identify duplicate transactions?

-----Original Message-----
From: Sameer Paranjpye (JIRA) [mailto:jira@apache.org] 
Sent: Monday, November 06, 2006 1:38 PM
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-334) Redesign the dfs namespace
datastructures to be copy on write

    [
http://issues.apache.org/jira/browse/HADOOP-334?page=comments#action_1244754
2 ] 
            
Sameer Paranjpye commented on HADOOP-334:
-----------------------------------------

Copy on write helps, but the global lock needs to be acquired at the end of
the checkpointing process nevertheless. This still has the effect of locking
clients out of the namespace while the entire namespace is traversed and the
clone pointers are reset.


Instead of copy on write, how about changing the locking model so that for
any change:
1. Acquire read locks on all structures between the root and the change,
acquire a write lock on the changed
node.
2. To checkpoint, traverse the namespace acquiring read locks on the path
between the root and the node being checkpointed. Serialize each node to a
new image file on disk.

This way we never lock down the whole tree, for any operation. At the start
of the checkpointing process, a new edits file is created. Edits that occur
while the checkpoint is in progress are sent to the new file. This implies
that there will be some overlap between the checkpointed image and the edits
file, but this is ok. We require that the union of the image and the edits
give us the current state of the namespace but the two do not have to be
disjoint. 

> Redesign the dfs namespace datastructures to be copy on write
> -------------------------------------------------------------
>
>                 Key: HADOOP-334
>                 URL: http://issues.apache.org/jira/browse/HADOOP-334
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace datastructures should be copy on write so that the namespace
does not need to be completely locked down from user changes while the
checkpoint is being made.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        


From MAILER-DAEMON Mon Nov  6 22:38:01 2006
Return-Path: 
 <hadoop-dev-return-4832-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96474 invoked from network); 6 Nov 2006 22:38:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 22:38:01 -0000
Received: (qmail 24307 invoked by uid 500); 6 Nov 2006 22:38:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24286 invoked by uid 500); 6 Nov 2006 22:38:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24277 invoked by uid 99); 6 Nov 2006 22:38:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 14:38:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 14:38:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D31C67142F6
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 14:37:38 -0800 (PST)
Message-ID: <27725796.1162852658862.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 14:37:38 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-334) Redesign the dfs namespace
 datastructures to be copy on write
In-Reply-To: <27865237.1151602049843.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-334?page=comments#action_12447565 ] 
            
dhruba borthakur commented on HADOOP-334:
-----------------------------------------

In Response to Sameer's comments:
---------------------------------------------------
Regarding copy-on-write approach, we do not need to traverse the entire namespace to reset the clone pointers at the end of the checkpointing process. We can keep a lookaside list that contains all the nodes that have a clone pointer. But we still have to acquire the global lock at the end of the checkpointing process, traverse this lookaside list of cloned-nodes, and then null-them.

I like the generalized scheme of fine-grain locks (instead of a global lock) while traversing the namespace. It is more efficient once implemented correctly. There are quite a few tricks about lock-hierarchy that one has to play for "renames". But it can be done.

The one thing that I am not clear about is whether we get correct semantics if the imagefile and the editfile overlap.  If x, y and z are three transactions, are you saying that
   			x + y + z is equilvalent to x + y + y +z where y is a single transaction that res ides in the image file as well as the edits file. Are you proposing something like a global transaction number to identify duplicate transactions?

In response to Doug/Owen' comments:
-----------------------------------------------------
I was saying precisely the same thing. The only difference in my proposal was that we do not need to clone all the nodes from a node to its root, we could clone only the node that is being modified.

> Redesign the dfs namespace datastructures to be copy on write
> -------------------------------------------------------------
>
>                 Key: HADOOP-334
>                 URL: http://issues.apache.org/jira/browse/HADOOP-334
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace datastructures should be copy on write so that the namespace does not need to be completely locked down from user changes while the checkpoint is being made.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 22:53:03 2006
Return-Path: 
 <hadoop-dev-return-4833-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1656 invoked from network); 6 Nov 2006 22:53:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 22:53:03 -0000
Received: (qmail 56837 invoked by uid 500); 6 Nov 2006 22:53:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56805 invoked by uid 500); 6 Nov 2006 22:53:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56796 invoked by uid 99); 6 Nov 2006 22:53:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 14:53:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 14:53:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3984371430D
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 14:52:40 -0800 (PST)
Message-ID: <12056196.1162853560233.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 14:52:40 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-334) Redesign the dfs namespace
 datastructures to be copy on write
In-Reply-To: <27865237.1151602049843.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-334?page=comments#action_12447570 ] 
            
Doug Cutting commented on HADOOP-334:
-------------------------------------

> we do not need to clone all the nodes from a node to its root, we could clone only the node that is being modified

I wonder whether this optimization is worthwhile.  It makes things more stateful, for example, we can't have two separate snapshots live at once.  However I don't know that we'll ever need to...

> Redesign the dfs namespace datastructures to be copy on write
> -------------------------------------------------------------
>
>                 Key: HADOOP-334
>                 URL: http://issues.apache.org/jira/browse/HADOOP-334
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace datastructures should be copy on write so that the namespace does not need to be completely locked down from user changes while the checkpoint is being made.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 23:10:59 2006
Return-Path: 
 <hadoop-dev-return-4834-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9622 invoked from network); 6 Nov 2006 23:10:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 23:10:59 -0000
Received: (qmail 77975 invoked by uid 500); 6 Nov 2006 23:11:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77950 invoked by uid 500); 6 Nov 2006 23:11:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77941 invoked by uid 99); 6 Nov 2006 23:11:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 15:11:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 15:10:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 603D47142FA
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 15:10:38 -0800 (PST)
Message-ID: <15788317.1162854638391.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 15:10:38 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-681) Adminstrative hook to pull live
 nodes out of a HDFS cluster
In-Reply-To: <29893636.1162789960338.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-681?page=comments#action_12447576 ] 
            
dhruba borthakur commented on HADOOP-681:
-----------------------------------------

Thanks a bunch: Eric, Yoram &  Kons for your comments. Here are my take-aways:

1. I will change the name of this new state from tranquil to decommission.

2. I will make the "decommission" a persistent state. This will be done in a follow-on patch submission (after the disk format upgrade patch) is incorporated.

3. I will create a new command called dfsadmin. It will be invoked as
               bin/hadoop --config conf dfsadmin -decommision

4. I will incorprate most of Konstantin's comments. However, the namenode will not send shutdown command to the datanode after all replications are completed. In fact, we endeavour to keep that decommissioned datanode alive and use it (if needed) to serve read requests.

4. I will create a separate defect to move "dfs -report" and "dfs -safemode" to the dfsadmin command.  I will create another separate defect to support "dfsadmin -removenode" to completely remove a datanodes's information from the namenode.


> Adminstrative hook to pull live nodes out of a HDFS cluster
> -----------------------------------------------------------
>
>                 Key: HADOOP-681
>                 URL: http://issues.apache.org/jira/browse/HADOOP-681
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> Introduction
> ------------
> An administrator sometimes needs to bring down a datanode for scheduled maintenance. It would be nice if HDFS can be informed about this event. On receipt of this event, HDFS can take steps so that HDFS data is not lost when the node goes down at a later time.
> Architecture
> -----------
> In the existing architecture, a datanode can be in one of two states: dead or alive. A datanode is alive if its heartbeats are being processed by the namenode. Otherwise that datanode is in dead state. We extend the architecture to introduce the concept of a tranquil state for a datanode.
> A datanode is in tranquil state if:
>     - it cannot be a target for replicating any blocks
>     - any block replica that it currently contains does not count towards the target-replication-factor of that block
> Thus, a node that is in tranquil state can be brought down without impacting the guarantees provided by HDFS.
> The tranquil state is not persisted across namenode restarts. If the namenode restarts then that datanode will go back to being in the dead or alive state.
> The datanode is completely transparent to the fact that it has been labeled as being in tranquil state. It can continue to heartbeat and serve read requests for datablocks.
> DFSShell Design
> -----------------------
> We extend the DFS Shell utility to specify a list of nodes to the namenode.
>     hadoop dfs -tranquil {set|clear|get} datanodename1 [,datanodename2]
> The DFSShell utility sends this list to the namenode. This DFSShell command invoked with the "set" option completes when the list is transferred to the namenode. This command is non-blocking; it returns before the datanode is actually in the tranquil state. The client can then query the state by re-issuing the command with the "get" option. This option will indicate whether the datanode is in tranquil state or is "being tranquiled". The "clear" option is used to transition a tranquil datanode to the alive state. The "clear" option is a no-op if the datanode is not in the "tranquil" state.
> ClientProtocol Design
> --------------------
> The ClientProtocol is the protocol exported by the namenode for its client.
> This protocol is extended to incorporate three new methods:
>    ClientProtocol.setTranquil(String[] datanodes)
>    ClientProtocol.getTranquil(String datanode)
>    ClientProtocol.clearTranquil(String[] datanodes)
> The ProtocolVersion is incremented to prevent conversations between imcompatible clients and servers. An old DFSShell cannot talk to the new NameNode and vice-versa.
> NameNode Design
> -------------------------
> The namenode does the bulk of the work for supporting this new feature.
> The DatanodeInfo object has a new private member named "state". It also has three new member functions:
>     datanodeInfo.tranquilStarted(): start the process of tranquilization
>     datanodeInfo.tranquilCompleted(): node is not in tranquil state
>     datanodeInfo.clearTranquil() : remove tranquilization from node
> The namenode exposes a new API to set and clear tranquil states for a datanode. On receipt of a "set tranquil" command, it invokes datanodeInfo.tranquilStarted().
> The FSNamesystem.chooseTarget() method skips over datanodes that are marked as being in the "tranquil" state. This ensures that tranquil-datanodes are never chosen as targets of replication. The namenode does *not* record
> this operation in either the FsImage or the EditLogs.
> The namenode puts all the blocks from a being-tranquiled node into the neededReplication data structure. Necessary code changes are made to ensure that these blocks get replicated by the regular replication method. As of now, the regular replication code does not distinguish between these blocks and the blocks that are replication candidates because some other datanode might have died. It might be prudent to give different (lower?) weightage to this type of replication requests, but that exercise is deferred to a later date. In this design, replication requests generated because of a node going to a tranquil state are not distinguished from replication requests generated by a datanode going to the dead state.
> The DatanodeInfo object has another new private member named "pendingTranquilCount". This field stores the remaining number of blocks that still remain to be replicated. This field is valid only if the node is in the ets being-tranquiled state.  On receipt of every 'n' heartbeats from the being-tranquiled datanode, the namenode calculates the amount of data that is still remaining to be replicated and updates the "pendingTranquilCount". in the DatanodeInfo.When all the replications complete, the datanode is marked as tranquiled. The number 'n' is selected in such a way that the average heartbeat processing time does not increase appreciably.
> It is possible that the namenode might stop receving heartbeats from a datanode that is being-tranquiled. In this case,   the tranquil flag of the datanode gets cleared. It transitions to the dead state and the normal processing for alive-to-dead transition occurs here.
> Web Interface
> -------------------
> The dfshealth.jsp displays the live nodes, dead nodes, being-tranquiled and tranquil nodes. For nodes in the being-tranquiled state, it displays the percentage of tranquilization completed till now.
> Issues
> --------
> 1. If a request for tranquilization starts getting processed and there aren't enough space available in DFS to complete the necessary replication, then that node might remain in the being-tranquiled state for a long long time. This is not necessarily a bad thing but is there a better option?
> 2. We have opted for not storing cluster configuration information in the persistent image of the file system. (The tranquil state of a datanode may be lost if the namenode restarts).
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 23:20:05 2006
Return-Path: 
 <hadoop-dev-return-4835-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11586 invoked from network); 6 Nov 2006 23:20:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 23:20:05 -0000
Received: (qmail 89352 invoked by uid 500); 6 Nov 2006 23:20:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88975 invoked by uid 500); 6 Nov 2006 23:20:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88952 invoked by uid 99); 6 Nov 2006 23:20:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 15:20:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 15:20:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7E4E47142F7
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 15:19:40 -0800 (PST)
Message-ID: <1425357.1162855180514.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 15:19:40 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-334) Redesign the dfs namespace
 datastructures to be copy on write
In-Reply-To: <27865237.1151602049843.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-334?page=comments#action_12447579 ] 
            
Sameer Paranjpye commented on HADOOP-334:
-----------------------------------------

Dhruba:

Yes, we would get correct semantics if the image and edits overlap. While not strictly necessary, we could also add timestamps to entries in the image and edits for validation. Suppose the edits file has the following transactions:
- x: add file /a/b/c, time=t0
- y: remove file /b/c, time=t1
- z: rename directory /a --> /d, time=t2

which all overlap with the image. In this case, when the image and edits are being merged the following would happen for each transaction:

x: the image already has file /a/b/c, assert that directory /a/b has timestamp t3 >= t0, we're consistent with the edits, move on
y: the image does not have the file /b/c, assert that directory /b has timestamp t4 >= t1, we're consistent with the image, move on
z: the image already has the directory /d, assert that directory /d has timestamp t5 >= t2, we're consistent with the edits, move on

this sort of logic can be followed for all transactions. So we don't need a transaction number, a timestamp will suffice.




> Redesign the dfs namespace datastructures to be copy on write
> -------------------------------------------------------------
>
>                 Key: HADOOP-334
>                 URL: http://issues.apache.org/jira/browse/HADOOP-334
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace datastructures should be copy on write so that the namespace does not need to be completely locked down from user changes while the checkpoint is being made.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 23:24:01 2006
Return-Path: 
 <hadoop-dev-return-4836-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13599 invoked from network); 6 Nov 2006 23:24:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 23:24:01 -0000
Received: (qmail 96797 invoked by uid 500); 6 Nov 2006 23:24:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96770 invoked by uid 500); 6 Nov 2006 23:24:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96761 invoked by uid 99); 6 Nov 2006 23:24:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 15:24:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 15:23:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D7FFE71430D
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 15:23:38 -0800 (PST)
Message-ID: <7492556.1162855418882.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 15:23:38 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-334) Redesign the dfs namespace
 datastructures to be copy on write
In-Reply-To: <27865237.1151602049843.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-334?page=comments#action_12447580 ] 
            
Sameer Paranjpye commented on HADOOP-334:
-----------------------------------------

Correction, in the above comment, transaction 'x' would be handled as:

x: the image does not have directory /a, root has timestamp t3 >= t0, move on

> Redesign the dfs namespace datastructures to be copy on write
> -------------------------------------------------------------
>
>                 Key: HADOOP-334
>                 URL: http://issues.apache.org/jira/browse/HADOOP-334
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace datastructures should be copy on write so that the namespace does not need to be completely locked down from user changes while the checkpoint is being made.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 23:35:04 2006
Return-Path: 
 <hadoop-dev-return-4837-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17358 invoked from network); 6 Nov 2006 23:35:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 23:35:04 -0000
Received: (qmail 14533 invoked by uid 500); 6 Nov 2006 23:35:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14505 invoked by uid 500); 6 Nov 2006 23:35:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14496 invoked by uid 99); 6 Nov 2006 23:35:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 15:35:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 15:35:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8F1A671430F
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 15:34:41 -0800 (PST)
Message-ID: <4664501.1162856081583.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 15:34:41 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-334) Redesign the dfs namespace
 datastructures to be copy on write
In-Reply-To: <27865237.1151602049843.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-334?page=comments#action_12447587 ] 
            
Raghu Angadi commented on HADOOP-334:
-------------------------------------


Why would we have to deal with multiple edit entries in this case? I thought the following operation would be done under globalLock:

at the end of checkpointing we : close the new image file, remove (or move) old image file and old edit logs.

This is just for my understanding.. I know Milind is working on different proposal.


> Redesign the dfs namespace datastructures to be copy on write
> -------------------------------------------------------------
>
>                 Key: HADOOP-334
>                 URL: http://issues.apache.org/jira/browse/HADOOP-334
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace datastructures should be copy on write so that the namespace does not need to be completely locked down from user changes while the checkpoint is being made.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 23:39:04 2006
Return-Path: 
 <hadoop-dev-return-4838-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17935 invoked from network); 6 Nov 2006 23:39:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 23:39:04 -0000
Received: (qmail 19101 invoked by uid 500); 6 Nov 2006 23:39:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19082 invoked by uid 500); 6 Nov 2006 23:39:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19071 invoked by uid 99); 6 Nov 2006 23:39:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 15:39:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 15:39:03 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C4747714311
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 15:38:42 -0800 (PST)
Message-ID: <11933827.1162856322801.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 15:38:42 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12447589 ] 
            
Owen O'Malley commented on HADOOP-489:
--------------------------------------

Using the latest patch on a single node cluster, all of my tasks fail with a NullPointer:

java.lang.NullPointerException
	at org.apache.hadoop.mapred.TaskLog$Writer.deleteDir(TaskLog.java:114)
	at org.apache.hadoop.mapred.TaskLog$Writer.init(TaskLog.java:137)
	at org.apache.hadoop.mapred.TaskRunner.prepare(TaskRunner.java:59)
	at org.apache.hadoop.mapred.MapTaskRunner.prepare(MapTaskRunner.java:36)
	at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:120)

I also notice that you still have the footer with the link to the logs.
If the task fails in setup you get an error message when you try and get error messages:

/export/crawlspace/owen/hadoop/run/log/userlogs/task_0001_m_000000_3/split.idx (No such file or directory)

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-489_20061019.patch, HADOOP-489_20061101.patch, HADOOP-489_20061102.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov  6 23:46:12 2006
Return-Path: 
 <hadoop-dev-return-4839-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20125 invoked from network); 6 Nov 2006 23:46:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 23:46:12 -0000
Received: (qmail 30311 invoked by uid 500); 6 Nov 2006 23:46:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30285 invoked by uid 500); 6 Nov 2006 23:46:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30276 invoked by uid 99); 6 Nov 2006 23:46:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 15:46:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 15:45:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 56A167142FA
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 15:45:38 -0800 (PST)
Message-ID: <28596980.1162856738352.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 15:45:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-655) remove deprecations
In-Reply-To: <3180020.1162252996552.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-655?page=all ]

Doug Cutting resolved HADOOP-655.
---------------------------------

    Resolution: Fixed

I just committed this.

> remove deprecations
> -------------------
>
>                 Key: HADOOP-655
>                 URL: http://issues.apache.org/jira/browse/HADOOP-655
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>            Priority: Minor
>             Fix For: 0.9.0
>
>
> Code deprecated in the 0.6 release and earlier should be removed before 0.8 is released.
> Can folks think of exceptions?  Probably UTF8.  Any others?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 00:52:00 2006
Return-Path: 
 <hadoop-dev-return-4840-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37347 invoked from network); 7 Nov 2006 00:52:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 00:52:00 -0000
Received: (qmail 30160 invoked by uid 500); 7 Nov 2006 00:52:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29941 invoked by uid 500); 7 Nov 2006 00:52:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29929 invoked by uid 99); 7 Nov 2006 00:52:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 16:52:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 16:51:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1422A7142FA
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 16:51:37 -0800 (PST)
Message-ID: <26505610.1162860697079.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 16:51:37 -0800 (PST)
From: "James Todd (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-683) bin/hadoop.sh doesn't work for
 /bin/dash (eg ubuntu 6.10b)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

bin/hadoop.sh doesn't work for /bin/dash (eg ubuntu 6.10b)
----------------------------------------------------------

                 Key: HADOOP-683
                 URL: http://issues.apache.org/jira/browse/HADOOP-683
             Project: Hadoop
          Issue Type: Bug
          Components: scripts
         Environment: osx, ubuntu 6.10b
            Reporter: James Todd
            Priority: Trivial


bin/hadoop.sh has a conditional which doesn't work with /bin/dash which ubuntu 6.10b symlinks to /bin/sh.

here's a trivial patch that works for me:

Index: bin/hadoop-daemon.sh
===================================================================
--- bin/hadoop-daemon.sh        (revision 468719)
+++ bin/hadoop-daemon.sh        (working copy)
@@ -56,7 +56,7 @@
 pid=$HADOOP_PID_DIR/hadoop-$HADOOP_IDENT_STRING-$command.pid
 
 # Set default scheduling priority
-if [ "$HADOOP_NICENESS" == "" ]; then
+if [ "$HADOOP_NICENESS" = "" ]; then
     export HADOOP_NICENESS=0
 fi


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 00:58:58 2006
Return-Path: 
 <hadoop-dev-return-4841-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39293 invoked from network); 7 Nov 2006 00:58:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 00:58:58 -0000
Received: (qmail 35680 invoked by uid 500); 7 Nov 2006 00:59:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35653 invoked by uid 500); 7 Nov 2006 00:59:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35642 invoked by uid 99); 7 Nov 2006 00:59:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 16:59:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 16:58:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 10ED57142FA
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 16:58:37 -0800 (PST)
Message-ID: <18213967.1162861117066.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 16:58:37 -0800 (PST)
From: "James Todd (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-684) it would be nice to be able to view
 log and output files w/in the browser
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

it would be nice to be able to view log and output files w/in the browser
-------------------------------------------------------------------------

                 Key: HADOOP-684
                 URL: http://issues.apache.org/jira/browse/HADOOP-684
             Project: Hadoop
          Issue Type: Improvement
          Components: scripts
         Environment: osx, ubuntu 6.10b
            Reporter: James Todd
            Priority: Minor


it would be nice to be able to view the node logs and output files from w/in the browser vs saving the file and opening an external application.

one way to achieve this is to simply add ".txt" as a suffix to the relevant files, eg:

Index: bin/hadoop-daemon.sh
===================================================================
--- bin/hadoop-daemon.sh        (revision 468719)
+++ bin/hadoop-daemon.sh        (working copy)
@@ -50,9 +50,9 @@
 fi
 
 # some variables
-export HADOOP_LOGFILE=hadoop-$HADOOP_IDENT_STRING-$command-`hostname`.log
+export HADOOP_LOGFILE=hadoop-$HADOOP_IDENT_STRING-$command-`hostname`.log.txt
 export HADOOP_ROOT_LOGGER="INFO,DRFA"
-log=$HADOOP_LOG_DIR/hadoop-$HADOOP_IDENT_STRING-$command-`hostname`.out
+log=$HADOOP_LOG_DIR/hadoop-$HADOOP_IDENT_STRING-$command-`hostname`.out.txt
 pid=$HADOOP_PID_DIR/hadoop-$HADOOP_IDENT_STRING-$command.pid
 
 # Set default scheduling priority

it has been suggested that perhaps the content type of the log files could be specified, thereby allowing for wider/richer support.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 01:04:58 2006
Return-Path: 
 <hadoop-dev-return-4842-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40766 invoked from network); 7 Nov 2006 01:04:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 01:04:58 -0000
Received: (qmail 41111 invoked by uid 500); 7 Nov 2006 01:05:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40892 invoked by uid 500); 7 Nov 2006 01:05:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40883 invoked by uid 99); 7 Nov 2006 01:05:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 17:05:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 17:04:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 191FE7142FA
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 17:04:37 -0800 (PST)
Message-ID: <3111837.1162861477100.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 17:04:37 -0800 (PST)
From: "James Todd (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-685) DataNode appears to require DNS name
 resolution as opposed to direct ip mapping
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

DataNode appears to require DNS name resolution as opposed to direct ip mapping
-------------------------------------------------------------------------------

                 Key: HADOOP-685
                 URL: http://issues.apache.org/jira/browse/HADOOP-685
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
         Environment: osx, ubuntu 6.10b
            Reporter: James Todd
            Priority: Minor


DataNode appears to require DNS resolution of nodes via the class org.apache.hadoop.net.DNS as opposed being able to use a specified ip.

as an example, i was not able to set up more then one instance of dfs datanodes on one box using loopback w/ varying ports since DataNode
resolved the ip of 127.0.0.1 to be "foo.bar" which was then mapped to the dhcp allocated ip of 192.168.0.***, which was not addressable by the
rest of the dfs cluster (namely namenode).

while this example is trivial one should be able to use the very same process yet change only the ip's of the nodes and have things work as
expected.

it would be nice to not always require nds resolution.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 01:05:00 2006
Return-Path: 
 <hadoop-dev-return-4843-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40814 invoked from network); 7 Nov 2006 01:05:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 01:05:00 -0000
Received: (qmail 41188 invoked by uid 500); 7 Nov 2006 01:05:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41147 invoked by uid 500); 7 Nov 2006 01:05:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41138 invoked by uid 99); 7 Nov 2006 01:05:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 17:05:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 17:04:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5A59C71430E
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 17:04:38 -0800 (PST)
Message-ID: <16273015.1162861478367.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 17:04:38 -0800 (PST)
From: "James Todd (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-685) DataNode appears to require DNS name
 resolution as opposed to direct ip mapping
In-Reply-To: <3111837.1162861477100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-685?page=comments#action_12447599 ] 
            
James Todd commented on HADOOP-685:
-----------------------------------

i was thinking about a hack to get around this issue that once proven i could offer as a starting point. if someone else sees the way out on this one and has a fix in mind i do not want to be the one to hold up progress so by all means .... "make it so"

> DataNode appears to require DNS name resolution as opposed to direct ip mapping
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-685
>                 URL: http://issues.apache.org/jira/browse/HADOOP-685
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>         Environment: osx, ubuntu 6.10b
>            Reporter: James Todd
>            Priority: Minor
>
> DataNode appears to require DNS resolution of nodes via the class org.apache.hadoop.net.DNS as opposed being able to use a specified ip.
> as an example, i was not able to set up more then one instance of dfs datanodes on one box using loopback w/ varying ports since DataNode
> resolved the ip of 127.0.0.1 to be "foo.bar" which was then mapped to the dhcp allocated ip of 192.168.0.***, which was not addressable by the
> rest of the dfs cluster (namely namenode).
> while this example is trivial one should be able to use the very same process yet change only the ip's of the nodes and have things work as
> expected.
> it would be nice to not always require nds resolution.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 01:09:00 2006
Return-Path: 
 <hadoop-dev-return-4844-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42773 invoked from network); 7 Nov 2006 01:09:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 01:09:00 -0000
Received: (qmail 44622 invoked by uid 500); 7 Nov 2006 01:09:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44596 invoked by uid 500); 7 Nov 2006 01:09:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44587 invoked by uid 99); 7 Nov 2006 01:09:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 17:09:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 17:08:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E0B1F7142FA
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 17:08:38 -0800 (PST)
Message-ID: <31065341.1162861718917.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 17:08:38 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-334) Redesign the dfs namespace
 datastructures to be copy on write
In-Reply-To: <27865237.1151602049843.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-334?page=comments#action_12447600 ] 
            
dhruba borthakur commented on HADOOP-334:
-----------------------------------------

Could there be a problem if the new file by the same name 'a' gets re-created. e.g.

x: add file /a/b/c, time=t0
- y: remove file /b/c, time=t1
- z: rename directory /a --> /d, time=t2 
+m: create a new directory /a time=t3

Suppose the above transactions were already part of the Image. They also are in the Edits. Now, when the edits are applied, what will happen to transaction x?

On a different note, isn't it safer to use sequencenumbers rather than timestamps because 
1. there could be two transactions at precisely the same timestamp
2. an user can rollback the time on a machine, thus causing havoc with DFS metadata

> Redesign the dfs namespace datastructures to be copy on write
> -------------------------------------------------------------
>
>                 Key: HADOOP-334
>                 URL: http://issues.apache.org/jira/browse/HADOOP-334
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace datastructures should be copy on write so that the namespace does not need to be completely locked down from user changes while the checkpoint is being made.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 03:35:11 2006
Return-Path: 
 <hadoop-dev-return-4849-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89309 invoked from network); 7 Nov 2006 03:35:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 03:35:11 -0000
Received: (qmail 90782 invoked by uid 500); 7 Nov 2006 03:35:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90755 invoked by uid 500); 7 Nov 2006 03:35:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90746 invoked by uid 99); 7 Nov 2006 03:35:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 19:35:22 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 19:35:08 -0800
Received: from [192.168.1.100] ([172.21.179.133])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kA73Ygti081058
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Mon, 6 Nov 2006 19:34:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=gtQXrOMYBkJ+hO7nnG170zoGycEKkysP5kaz2l/1ViIt7W1uGKCIj4lqnXX2vuPW
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <15788317.1162854638391.JavaMail.jira@brutus>
References: <15788317.1162854638391.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B3A1C241-2543-4746-ABA3-9BE9D2D80D2E@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-681) Adminstrative hook to pull live
 nodes out of a HDFS cluster
Date: Mon, 6 Nov 2006 17:08:49 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

sounds good.


On Nov 6, 2006, at 3:10 PM, dhruba borthakur (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-681? 
> page=comments#action_12447576 ]
>
> dhruba borthakur commented on HADOOP-681:
> -----------------------------------------
>
> Thanks a bunch: Eric, Yoram &  Kons for your comments. Here are my  
> take-aways:
>
> 1. I will change the name of this new state from tranquil to  
> decommission.
>
> 2. I will make the "decommission" a persistent state. This will be  
> done in a follow-on patch submission (after the disk format upgrade  
> patch) is incorporated.
>
> 3. I will create a new command called dfsadmin. It will be invoked as
>                bin/hadoop --config conf dfsadmin -decommision
>
> 4. I will incorprate most of Konstantin's comments. However, the  
> namenode will not send shutdown command to the datanode after all  
> replications are completed. In fact, we endeavour to keep that  
> decommissioned datanode alive and use it (if needed) to serve read  
> requests.
>
> 4. I will create a separate defect to move "dfs -report" and "dfs - 
> safemode" to the dfsadmin command.  I will create another separate  
> defect to support "dfsadmin -removenode" to completely remove a  
> datanodes's information from the namenode.
>
>
>> Adminstrative hook to pull live nodes out of a HDFS cluster
>> -----------------------------------------------------------
>>
>>                 Key: HADOOP-681
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-681
>>             Project: Hadoop
>>          Issue Type: New Feature
>>          Components: dfs
>>    Affects Versions: 0.8.0
>>            Reporter: dhruba borthakur
>>         Assigned To: dhruba borthakur
>>
>> Introduction
>> ------------
>> An administrator sometimes needs to bring down a datanode for  
>> scheduled maintenance. It would be nice if HDFS can be informed  
>> about this event. On receipt of this event, HDFS can take steps so  
>> that HDFS data is not lost when the node goes down at a later time.
>> Architecture
>> -----------
>> In the existing architecture, a datanode can be in one of two  
>> states: dead or alive. A datanode is alive if its heartbeats are  
>> being processed by the namenode. Otherwise that datanode is in  
>> dead state. We extend the architecture to introduce the concept of  
>> a tranquil state for a datanode.
>> A datanode is in tranquil state if:
>>     - it cannot be a target for replicating any blocks
>>     - any block replica that it currently contains does not count  
>> towards the target-replication-factor of that block
>> Thus, a node that is in tranquil state can be brought down without  
>> impacting the guarantees provided by HDFS.
>> The tranquil state is not persisted across namenode restarts. If  
>> the namenode restarts then that datanode will go back to being in  
>> the dead or alive state.
>> The datanode is completely transparent to the fact that it has  
>> been labeled as being in tranquil state. It can continue to  
>> heartbeat and serve read requests for datablocks.
>> DFSShell Design
>> -----------------------
>> We extend the DFS Shell utility to specify a list of nodes to the  
>> namenode.
>>     hadoop dfs -tranquil {set|clear|get} datanodename1  
>> [,datanodename2]
>> The DFSShell utility sends this list to the namenode. This  
>> DFSShell command invoked with the "set" option completes when the  
>> list is transferred to the namenode. This command is non-blocking;  
>> it returns before the datanode is actually in the tranquil state.  
>> The client can then query the state by re-issuing the command with  
>> the "get" option. This option will indicate whether the datanode  
>> is in tranquil state or is "being tranquiled". The "clear" option  
>> is used to transition a tranquil datanode to the alive state. The  
>> "clear" option is a no-op if the datanode is not in the "tranquil"  
>> state.
>> ClientProtocol Design
>> --------------------
>> The ClientProtocol is the protocol exported by the namenode for  
>> its client.
>> This protocol is extended to incorporate three new methods:
>>    ClientProtocol.setTranquil(String[] datanodes)
>>    ClientProtocol.getTranquil(String datanode)
>>    ClientProtocol.clearTranquil(String[] datanodes)
>> The ProtocolVersion is incremented to prevent conversations  
>> between imcompatible clients and servers. An old DFSShell cannot  
>> talk to the new NameNode and vice-versa.
>> NameNode Design
>> -------------------------
>> The namenode does the bulk of the work for supporting this new  
>> feature.
>> The DatanodeInfo object has a new private member named "state". It  
>> also has three new member functions:
>>     datanodeInfo.tranquilStarted(): start the process of  
>> tranquilization
>>     datanodeInfo.tranquilCompleted(): node is not in tranquil state
>>     datanodeInfo.clearTranquil() : remove tranquilization from node
>> The namenode exposes a new API to set and clear tranquil states  
>> for a datanode. On receipt of a "set tranquil" command, it invokes  
>> datanodeInfo.tranquilStarted().
>> The FSNamesystem.chooseTarget() method skips over datanodes that  
>> are marked as being in the "tranquil" state. This ensures that  
>> tranquil-datanodes are never chosen as targets of replication. The  
>> namenode does *not* record
>> this operation in either the FsImage or the EditLogs.
>> The namenode puts all the blocks from a being-tranquiled node into  
>> the neededReplication data structure. Necessary code changes are  
>> made to ensure that these blocks get replicated by the regular  
>> replication method. As of now, the regular replication code does  
>> not distinguish between these blocks and the blocks that are  
>> replication candidates because some other datanode might have  
>> died. It might be prudent to give different (lower?) weightage to  
>> this type of replication requests, but that exercise is deferred  
>> to a later date. In this design, replication requests generated  
>> because of a node going to a tranquil state are not distinguished  
>> from replication requests generated by a datanode going to the  
>> dead state.
>> The DatanodeInfo object has another new private member named  
>> "pendingTranquilCount". This field stores the remaining number of  
>> blocks that still remain to be replicated. This field is valid  
>> only if the node is in the ets being-tranquiled state.  On receipt  
>> of every 'n' heartbeats from the being-tranquiled datanode, the  
>> namenode calculates the amount of data that is still remaining to  
>> be replicated and updates the "pendingTranquilCount". in the  
>> DatanodeInfo.When all the replications complete, the datanode is  
>> marked as tranquiled. The number 'n' is selected in such a way  
>> that the average heartbeat processing time does not increase  
>> appreciably.
>> It is possible that the namenode might stop receving heartbeats  
>> from a datanode that is being-tranquiled. In this case,   the  
>> tranquil flag of the datanode gets cleared. It transitions to the  
>> dead state and the normal processing for alive-to-dead transition  
>> occurs here.
>> Web Interface
>> -------------------
>> The dfshealth.jsp displays the live nodes, dead nodes, being- 
>> tranquiled and tranquil nodes. For nodes in the being-tranquiled  
>> state, it displays the percentage of tranquilization completed  
>> till now.
>> Issues
>> --------
>> 1. If a request for tranquilization starts getting processed and  
>> there aren't enough space available in DFS to complete the  
>> necessary replication, then that node might remain in the being- 
>> tranquiled state for a long long time. This is not necessarily a  
>> bad thing but is there a better option?
>> 2. We have opted for not storing cluster configuration information  
>> in the persistent image of the file system. (The tranquil state of  
>> a datanode may be lost if the namenode restarts).
>>
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Tue Nov  7 01:42:11 2006
Return-Path: 
 <hadoop-dev-return-4845-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52438 invoked from network); 7 Nov 2006 01:42:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 01:42:11 -0000
Received: (qmail 74379 invoked by uid 500); 7 Nov 2006 01:42:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74352 invoked by uid 500); 7 Nov 2006 01:42:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73803 invoked by uid 99); 7 Nov 2006 01:42:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 17:42:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 17:41:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CDE5E7142F7
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 17:41:38 -0800 (PST)
Message-ID: <11844723.1162863698840.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 17:41:38 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-334) Redesign the dfs namespace
 datastructures to be copy on write
In-Reply-To: <27865237.1151602049843.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-334?page=comments#action_12447602 ] 
            
Sameer Paranjpye commented on HADOOP-334:
-----------------------------------------

Yes, a sequence number is more robust in the face of time rollbacks. W.r.t the comment on transaction 'm' and how it affects transaction 'x', if we say that:

A transaction in the edits log applies to the namespace iff:
a. the sequence number on the transaction is higher than the sequence number of the node that it affects OR
b. if the node does not exist in the namespace the sequence number of the transaction is more recent than that of the closest existing ancestor

then it should work.

> Redesign the dfs namespace datastructures to be copy on write
> -------------------------------------------------------------
>
>                 Key: HADOOP-334
>                 URL: http://issues.apache.org/jira/browse/HADOOP-334
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace datastructures should be copy on write so that the namespace does not need to be completely locked down from user changes while the checkpoint is being made.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 02:13:02 2006
Return-Path: 
 <hadoop-dev-return-4846-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60262 invoked from network); 7 Nov 2006 02:13:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 02:13:02 -0000
Received: (qmail 8720 invoked by uid 500); 7 Nov 2006 02:13:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8676 invoked by uid 500); 7 Nov 2006 02:13:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8634 invoked by uid 99); 7 Nov 2006 02:13:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 18:13:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 18:12:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 27D787142FA
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 18:12:38 -0800 (PST)
Message-ID: <18253436.1162865558160.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 18:12:38 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-684) it would be nice to be able to view
 log and output files w/in the browser
In-Reply-To: <18213967.1162861117066.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-684?page=comments#action_12447605 ] 
            
Yoram Arnon commented on HADOOP-684:
------------------------------------

I routinely view node logs and output files from w/in the browser, w/out saving it first - it's a local browser setup (open with..., always open with...).
I do this with firefox and IE, on windows and linux.
Which OS/browser are you using that doesn't allow this?

> it would be nice to be able to view log and output files w/in the browser
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-684
>                 URL: http://issues.apache.org/jira/browse/HADOOP-684
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: scripts
>         Environment: osx, ubuntu 6.10b
>            Reporter: James Todd
>            Priority: Minor
>
> it would be nice to be able to view the node logs and output files from w/in the browser vs saving the file and opening an external application.
> one way to achieve this is to simply add ".txt" as a suffix to the relevant files, eg:
> Index: bin/hadoop-daemon.sh
> ===================================================================
> --- bin/hadoop-daemon.sh        (revision 468719)
> +++ bin/hadoop-daemon.sh        (working copy)
> @@ -50,9 +50,9 @@
>  fi
>  
>  # some variables
> -export HADOOP_LOGFILE=hadoop-$HADOOP_IDENT_STRING-$command-`hostname`.log
> +export HADOOP_LOGFILE=hadoop-$HADOOP_IDENT_STRING-$command-`hostname`.log.txt
>  export HADOOP_ROOT_LOGGER="INFO,DRFA"
> -log=$HADOOP_LOG_DIR/hadoop-$HADOOP_IDENT_STRING-$command-`hostname`.out
> +log=$HADOOP_LOG_DIR/hadoop-$HADOOP_IDENT_STRING-$command-`hostname`.out.txt
>  pid=$HADOOP_PID_DIR/hadoop-$HADOOP_IDENT_STRING-$command.pid
>  
>  # Set default scheduling priority
> it has been suggested that perhaps the content type of the log files could be specified, thereby allowing for wider/richer support.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 02:19:00 2006
Return-Path: 
 <hadoop-dev-return-4847-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61319 invoked from network); 7 Nov 2006 02:19:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 02:19:00 -0000
Received: (qmail 10793 invoked by uid 500); 7 Nov 2006 02:19:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10761 invoked by uid 500); 7 Nov 2006 02:19:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10752 invoked by uid 99); 7 Nov 2006 02:19:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 18:19:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 18:18:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D92D57142F7
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 18:18:38 -0800 (PST)
Message-ID: <32814220.1162865918886.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 18:18:38 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-334) Redesign the dfs namespace
 datastructures to be copy on write
In-Reply-To: <27865237.1151602049843.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-334?page=comments#action_12447606 ] 
            
Yoram Arnon commented on HADOOP-334:
------------------------------------

having to ignore entries in the edits file because of overlap with the image file diminishes the dfs debuggability and robustness. Suddently there's no clear notion of a bad entry in an edits file, opening the door to all sorts of nonsense.
While not incorrect in any way, this approach would IMO make the dfs more vulnerable to problems that are inherently hard to debug.

> Redesign the dfs namespace datastructures to be copy on write
> -------------------------------------------------------------
>
>                 Key: HADOOP-334
>                 URL: http://issues.apache.org/jira/browse/HADOOP-334
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace datastructures should be copy on write so that the namespace does not need to be completely locked down from user changes while the checkpoint is being made.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 03:33:02 2006
Return-Path: 
 <hadoop-dev-return-4848-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88854 invoked from network); 7 Nov 2006 03:33:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 03:33:02 -0000
Received: (qmail 87038 invoked by uid 500); 7 Nov 2006 03:33:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86821 invoked by uid 500); 7 Nov 2006 03:33:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86811 invoked by uid 99); 7 Nov 2006 03:33:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 19:33:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 19:33:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D8C56714315
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 19:32:39 -0800 (PST)
Message-ID: <12846072.1162870359885.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 19:32:39 -0800 (PST)
From: "Feng Jiang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-686)
 job.setOutputValueComparatorClass(theClass) should be supported
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

job.setOutputValueComparatorClass(theClass) should be supported
---------------------------------------------------------------

                 Key: HADOOP-686
                 URL: http://issues.apache.org/jira/browse/HADOOP-686
             Project: Hadoop
          Issue Type: New Feature
          Components: mapred
         Environment: all environment
            Reporter: Feng Jiang


if the input of Reduce phase is :

K2, V3
K2, V2
K1, V5
K1, V3
K1, V4

in the current hadoop, the reduce output could be:
K1, (V5, V3, V4)
K2, (V3, V2)

But I hope hadoop supports job.setOutputValueComparatorClass(theClass), so that i can make values are in order, and the output could be:
K1, (V3, V4, V5) 
K2, (V2, V3)

This feature is very important, I think. Without it, we have to take the sorting by ourselves, and have to worry about the possibility that the values are too large to fit into memory. Then the codes becomes too hard to read. That is the reason why i think this feature is so important, and should be done in the hadoop framework.



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 04:13:01 2006
Return-Path: 
 <hadoop-dev-return-4850-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99175 invoked from network); 7 Nov 2006 04:13:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 04:13:01 -0000
Received: (qmail 18934 invoked by uid 500); 7 Nov 2006 04:13:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18905 invoked by uid 500); 7 Nov 2006 04:13:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18888 invoked by uid 99); 7 Nov 2006 04:13:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 20:13:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 20:12:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4EDD47142FA
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 20:12:38 -0800 (PST)
Message-ID: <16190717.1162872758319.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 20:12:38 -0800 (PST)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-686)
 job.setOutputValueComparatorClass(theClass) should be supported
In-Reply-To: <12846072.1162870359885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-686?page=comments#action_12447621 ] 
            
eric baldeschwieler commented on HADOOP-686:
--------------------------------------------

There exist hacks to achieve this effect now.  I'll try to scare up an expert to document them.  Also a good long term feature.

> job.setOutputValueComparatorClass(theClass) should be supported
> ---------------------------------------------------------------
>
>                 Key: HADOOP-686
>                 URL: http://issues.apache.org/jira/browse/HADOOP-686
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>         Environment: all environment
>            Reporter: Feng Jiang
>
> if the input of Reduce phase is :
> K2, V3
> K2, V2
> K1, V5
> K1, V3
> K1, V4
> in the current hadoop, the reduce output could be:
> K1, (V5, V3, V4)
> K2, (V3, V2)
> But I hope hadoop supports job.setOutputValueComparatorClass(theClass), so that i can make values are in order, and the output could be:
> K1, (V3, V4, V5) 
> K2, (V2, V3)
> This feature is very important, I think. Without it, we have to take the sorting by ourselves, and have to worry about the possibility that the values are too large to fit into memory. Then the codes becomes too hard to read. That is the reason why i think this feature is so important, and should be done in the hadoop framework.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 04:23:00 2006
Return-Path: 
 <hadoop-dev-return-4851-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 767 invoked from network); 7 Nov 2006 04:23:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 04:23:00 -0000
Received: (qmail 29453 invoked by uid 500); 7 Nov 2006 04:23:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29229 invoked by uid 500); 7 Nov 2006 04:23:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29220 invoked by uid 99); 7 Nov 2006 04:23:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 20:23:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 20:22:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C1A347142F7
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 20:22:38 -0800 (PST)
Message-ID: <9586698.1162873358790.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 20:22:38 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-334) Redesign the dfs namespace
 datastructures to be copy on write
In-Reply-To: <27865237.1151602049843.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-334?page=comments#action_12447623 ] 
            
Sameer Paranjpye commented on HADOOP-334:
-----------------------------------------

I'm not sure that overlapping diminishes debuggability. With a sequence number per node in the image and edits we can completely validate an edits log. There are 3 kinds of node in the image and edits:

a. Those that occur in the image but not in the edits. These must have a sequence number lower than the lowest sequence number in the edits.
b. Those that occur in both, the "overlapping" ones. For each such node, the sequence number in the image must match the sequence number of the last reference to the node in the edits
c. Those that occur in the edits but not in the image. These must occur in rename or delete transactions only.

This validation is indirect, but I don't think it's incorrect.

> Redesign the dfs namespace datastructures to be copy on write
> -------------------------------------------------------------
>
>                 Key: HADOOP-334
>                 URL: http://issues.apache.org/jira/browse/HADOOP-334
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace datastructures should be copy on write so that the namespace does not need to be completely locked down from user changes while the checkpoint is being made.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 05:22:59 2006
Return-Path: 
 <hadoop-dev-return-4852-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12361 invoked from network); 7 Nov 2006 05:22:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 05:22:59 -0000
Received: (qmail 94556 invoked by uid 500); 7 Nov 2006 05:23:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94335 invoked by uid 500); 7 Nov 2006 05:23:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94326 invoked by uid 99); 7 Nov 2006 05:23:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 21:23:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 21:22:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3234471430D
	for <hadoop-dev@lucene.apache.org>; Mon,  6 Nov 2006 21:22:38 -0800 (PST)
Message-ID: <3925815.1162876958202.JavaMail.jira@brutus>
Date: Mon, 6 Nov 2006 21:22:38 -0800 (PST)
From: "James P. White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-685) DataNode appears to require DNS name
 resolution as opposed to direct ip mapping
In-Reply-To: <3111837.1162861477100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-685?page=comments#action_12447641 ] 
            
James P. White commented on HADOOP-685:
---------------------------------------

While it is probably a separate issue, what I've wanted to do is implement Zeroconf so we can use names but not have to mess around with the DNS server configuration.

There is a mDNS implementation in Java which I think will work dandy:

http://jmdns.sourceforge.net/


> DataNode appears to require DNS name resolution as opposed to direct ip mapping
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-685
>                 URL: http://issues.apache.org/jira/browse/HADOOP-685
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>         Environment: osx, ubuntu 6.10b
>            Reporter: James Todd
>            Priority: Minor
>
> DataNode appears to require DNS resolution of nodes via the class org.apache.hadoop.net.DNS as opposed being able to use a specified ip.
> as an example, i was not able to set up more then one instance of dfs datanodes on one box using loopback w/ varying ports since DataNode
> resolved the ip of 127.0.0.1 to be "foo.bar" which was then mapped to the dhcp allocated ip of 192.168.0.***, which was not addressable by the
> rest of the dfs cluster (namely namenode).
> while this example is trivial one should be able to use the very same process yet change only the ip's of the nodes and have things work as
> expected.
> it would be nice to not always require nds resolution.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 08:53:15 2006
Return-Path: 
 <hadoop-dev-return-4853-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72726 invoked from network); 7 Nov 2006 08:53:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 08:53:15 -0000
Received: (qmail 60015 invoked by uid 500); 7 Nov 2006 08:53:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59996 invoked by uid 500); 7 Nov 2006 08:53:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59987 invoked by uid 99); 7 Nov 2006 08:53:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 00:53:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 00:53:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6531A7142CD
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 00:52:53 -0800 (PST)
Message-ID: <966317.1162889573411.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 00:52:53 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-611?page=comments#action_12447719 ] 
            
Owen O'Malley commented on HADOOP-611:
--------------------------------------

1. The first change in SequenceFile is a spacing-only change.
2. lazyDecompress should be deleted instead of being commented out.
3. In a couple of places you go past 80 character lines making it hard to read.
4. Instead of:
+      private TreeMap <SequenceFile.Sorter.SegmentDescriptor,String>
+      sortedSegmentSizes =
+         new TreeMap <SequenceFile.Sorter.SegmentDescriptor,String>();
Use:
  private Map<SequenceFile.Sorter.SegmentDesriptor, String> 
       sortedSegmentSizes = new TreeMap();
5. Actually, since you don't use the value of the sortedSegmentSizes Map anywhere, some type like Void would probably be clearer about your intent.

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: merge.patch, merge.patch
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 09:19:16 2006
Return-Path: 
 <hadoop-dev-return-4854-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80925 invoked from network); 7 Nov 2006 09:19:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 09:19:16 -0000
Received: (qmail 99727 invoked by uid 500); 7 Nov 2006 09:19:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99675 invoked by uid 500); 7 Nov 2006 09:19:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99630 invoked by uid 99); 7 Nov 2006 09:19:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 01:19:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 01:19:11 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 61F0A7142F7
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 01:18:51 -0800 (PST)
Message-ID: <4313752.1162891131398.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 01:18:51 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-686)
 job.setOutputValueComparatorClass(theClass) should be supported
In-Reply-To: <12846072.1162870359885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-686?page=comments#action_12447725 ] 
            
Runping Qi commented on HADOOP-686:
-----------------------------------

HADOOP-485  allows you to introduce a secondary key for sorting the map outputs, while use the primary key only to group the values passed to reduce.

In the above example, the second elements in the keys of the map outputs are the secondary keys.
They are used for sorting. The sorted data look like:

(K1,3), V3 
(K1,4), V4 
(K1,5), V5 
(K2,2), V2 
(K2,3), V3 

However, only the first elements in the keys are used for grouping. Thus, the following data will be passed to reduces:

(K1), {V3, V4, V5} 
(K2), {V2, V3} 

In general, the user can specify a function f on the values of map outputs,such that, for each key/value pair
k,v in the map output, we will actually emit
(k,f(v)), v

where (k,f(v)) will be used for sorting while k will be used for grouping.
The order defined on f(v) should be the desired order on the v.
A trivial example is that f is an identity function. The problem with that is that the values are duplicated in the map output, and the sorting on (k, v) may be too expensive. In general, we hope that the value of f(v) be simple values such as numbers or strings such that their sizes are much smaller than v, and sorting on them can be done efficiently.

  




> job.setOutputValueComparatorClass(theClass) should be supported
> ---------------------------------------------------------------
>
>                 Key: HADOOP-686
>                 URL: http://issues.apache.org/jira/browse/HADOOP-686
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>         Environment: all environment
>            Reporter: Feng Jiang
>
> if the input of Reduce phase is :
> K2, V3
> K2, V2
> K1, V5
> K1, V3
> K1, V4
> in the current hadoop, the reduce output could be:
> K1, (V5, V3, V4)
> K2, (V3, V2)
> But I hope hadoop supports job.setOutputValueComparatorClass(theClass), so that i can make values are in order, and the output could be:
> K1, (V3, V4, V5) 
> K2, (V2, V3)
> This feature is very important, I think. Without it, we have to take the sorting by ourselves, and have to worry about the possibility that the values are too large to fit into memory. Then the codes becomes too hard to read. That is the reason why i think this feature is so important, and should be done in the hadoop framework.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 09:21:21 2006
Return-Path: 
 <hadoop-dev-return-4855-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82199 invoked from network); 7 Nov 2006 09:21:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 09:21:21 -0000
Received: (qmail 2181 invoked by uid 500); 7 Nov 2006 09:21:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1965 invoked by uid 500); 7 Nov 2006 09:21:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1953 invoked by uid 99); 7 Nov 2006 09:21:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 01:21:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 01:21:15 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6342671430E
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 01:20:55 -0800 (PST)
Message-ID: <28226182.1162891255403.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 01:20:55 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-489) Seperating user logs from system logs
 in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-489?page=all ]

Arun C Murthy updated HADOOP-489:
---------------------------------

    Attachment: HADOOP-489_20061107.patch

Oops, there was a silly error which led to NPE, fixed now. Also incorporated the other observations...

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-489_20061019.patch, HADOOP-489_20061101.patch, HADOOP-489_20061102.patch, HADOOP-489_20061107.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 11:27:17 2006
Return-Path: 
 <hadoop-dev-return-4856-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27564 invoked from network); 7 Nov 2006 11:27:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 11:27:17 -0000
Received: (qmail 53762 invoked by uid 500); 7 Nov 2006 11:27:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53742 invoked by uid 500); 7 Nov 2006 11:27:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53724 invoked by uid 99); 7 Nov 2006 11:27:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 03:27:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 03:27:14 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 07E7E7142FA
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 03:26:54 -0800 (PST)
Message-ID: <18223917.1162898814029.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 03:26:54 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-676) JobClient should print user friendly
 messages for standard errors
In-Reply-To: <5423204.1162510576774.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-676?page=all ]

Sanjay Dahiya updated HADOOP-676:
---------------------------------

    Attachment: Hadoop-676.patch

This patch adds 3 new exceptions 
- InvalidJobConfException  (mendatory attributes missing or incorrect)
- InvalidFileTypeException (expecting file / got dir or vice versa ) 
- FileAlreadyExistsException  (as it says)

It throws these exceptions from job client and prints better error messages. All exceptions extend IOException to conform with existing API but are added in throws declaration to appear in javadocs. 

Is there any other exception you would like to be thrown/printed ? 

> JobClient should print user friendly messages for standard errors
> -----------------------------------------------------------------
>
>                 Key: HADOOP-676
>                 URL: http://issues.apache.org/jira/browse/HADOOP-676
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.9.0
>
>         Attachments: Hadoop-676.patch
>
>
> The exceptions for non-existent input dirs or already existing output dirs should generate user-friendly error messages. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 14:45:19 2006
Return-Path: 
 <hadoop-dev-return-4857-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5051 invoked from network); 7 Nov 2006 14:45:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 14:45:19 -0000
Received: (qmail 40239 invoked by uid 500); 7 Nov 2006 14:45:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40205 invoked by uid 500); 7 Nov 2006 14:45:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40196 invoked by uid 99); 7 Nov 2006 14:45:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 06:45:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 06:45:17 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 141D3714315
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 06:44:57 -0800 (PST)
Message-ID: <3274031.1162910697079.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 06:44:57 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-76?page=comments#action_12447811 ] 
            
Devaraj Das commented on HADOOP-76:
-----------------------------------

1. Noticed incorrect Javadoc/comments in some places. Please go through the patch carefully and fix them.
2. The commit and abort APIs of PhasedFileSystem needs to invoke the baseFS's close() method.
3. The runningTasks variable seems redundant and can be removed, and the code updating/reading runningTasks can be changed to update/read recentTasks instead.

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 14:47:16 2006
Return-Path: 
 <hadoop-dev-return-4858-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5741 invoked from network); 7 Nov 2006 14:47:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 14:47:16 -0000
Received: (qmail 47561 invoked by uid 500); 7 Nov 2006 14:47:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47527 invoked by uid 500); 7 Nov 2006 14:47:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47516 invoked by uid 99); 7 Nov 2006 14:47:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 06:47:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 06:47:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 433357142F5
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 06:46:52 -0800 (PST)
Message-ID: <21590504.1162910812272.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 06:46:52 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Arun C Murthy updated HADOOP-538:
---------------------------------

    Attachment: HADOOP-538_20061107.tgz

Here is a patch incorporating things put forth in the last comment i.e. single libhadoop.so which has no direct dependency on libz, relies on dlopen/dlsym and also lets people load whatever pieces of native code they like without paying for the rest.


> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 14:53:17 2006
Return-Path: 
 <hadoop-dev-return-4859-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7537 invoked from network); 7 Nov 2006 14:53:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 14:53:17 -0000
Received: (qmail 60556 invoked by uid 500); 7 Nov 2006 14:53:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60523 invoked by uid 500); 7 Nov 2006 14:53:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60514 invoked by uid 99); 7 Nov 2006 14:53:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 06:53:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 06:53:15 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AF00D714316
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 06:52:55 -0800 (PST)
Message-ID: <20675769.1162911175713.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 06:52:55 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12447815 ] 
            
Arun C Murthy commented on HADOOP-538:
--------------------------------------

Addendum: I've had issues getting this whole native framework to work on cygwin i.e. the autotool chain, shell scripts etc. - appreciate anyone helping out on that one...

Meanwhile can we get this out to people on *nix platform, since everything is optional stuff anyway, and if there is sufficient interest we can track this as a separate issue if anyone is really interested on deploying a largish hadoop on cygwin-based cluster?

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 15:25:27 2006
Return-Path: 
 <hadoop-dev-return-4860-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17685 invoked from network); 7 Nov 2006 15:25:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 15:25:27 -0000
Received: (qmail 35070 invoked by uid 500); 7 Nov 2006 15:25:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35029 invoked by uid 500); 7 Nov 2006 15:25:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35020 invoked by uid 99); 7 Nov 2006 15:25:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 07:25:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 07:25:19 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 761CC714311
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 07:24:55 -0800 (PST)
Message-ID: <5154289.1162913095481.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 07:24:55 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-76?page=comments#action_12447830 ] 
            
Devaraj Das commented on HADOOP-76:
-----------------------------------

One more comment - need to document somewhere how exactly (what config params) a user of the PhasedFileSystem (a map method) can access the JobId, TaskId and TIPId when he wants to create an instance of PhasedFileSystem. Better yet, add a new constructor in PhasedFileSystem that takes a JobConf object. Inside that constructor, you can get the JobId, TaskId and TIPId values and proceed. The user doesn't have to bother about details in this case.

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 16:41:30 2006
Return-Path: 
 <hadoop-dev-return-4861-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43359 invoked from network); 7 Nov 2006 16:41:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 16:41:30 -0000
Received: (qmail 27010 invoked by uid 500); 7 Nov 2006 16:41:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26987 invoked by uid 500); 7 Nov 2006 16:41:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26884 invoked by uid 99); 7 Nov 2006 16:41:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 08:41:34 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 08:41:19 -0800
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp1.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kA7GesaT011561
	for <hadoop-dev@lucene.apache.org>; Tue, 7 Nov 2006 08:40:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=ndkaZx7qs8sQG7tAvLf8A8n9hw8QeVhMtX71gULHmh9unnK2jZxPURdXqRp8+xhS
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <5154289.1162913095481.JavaMail.jira@brutus>
References: <5154289.1162913095481.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6860ca43bb1ad717e3582d7fdfaf5ff7@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-76) Implement speculative re-execution
 of reduces
Date: Tue, 7 Nov 2006 08:40:51 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org

Relationship with streaming?

when defining the implementation for speculative re-execution, please  
take into account how Streaming is implemented.
Specifically, streaming tasks are supposed run in their own working  
directories and read and write (temporary) (Unix) files there.
There may be some details that are important for speculative  
re-execution implementation.

On Nov 7, 2006, at 7:24 AM, Devaraj Das (JIRA) wrote:

>     [  
> http://issues.apache.org/jira/browse/HADOOP-76? 
> page=comments#action_12447830 ]
>
> Devaraj Das commented on HADOOP-76:
> -----------------------------------
>
> One more comment - need to document somewhere how exactly (what config  
> params) a user of the PhasedFileSystem (a map method) can access the  
> JobId, TaskId and TIPId when he wants to create an instance of  
> PhasedFileSystem. Better yet, add a new constructor in  
> PhasedFileSystem that takes a JobConf object. Inside that constructor,  
> you can get the JobId, TaskId and TIPId values and proceed. The user  
> doesn't have to bother about details in this case.
>
>> Implement speculative re-execution of reduces
>> ---------------------------------------------
>>
>>                 Key: HADOOP-76
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>>             Project: Hadoop
>>          Issue Type: Improvement
>>          Components: mapred
>>    Affects Versions: 0.1.0
>>            Reporter: Doug Cutting
>>         Assigned To: Sanjay Dahiya
>>            Priority: Minor
>>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch,  
>> spec_reducev.patch
>>
>>
>> As a first step, reduce task outputs should go to temporary files  
>> which are renamed when the task completes.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Tue Nov  7 17:41:24 2006
Return-Path: 
 <hadoop-dev-return-4862-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69087 invoked from network); 7 Nov 2006 17:41:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 17:41:24 -0000
Received: (qmail 883 invoked by uid 500); 7 Nov 2006 17:41:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 855 invoked by uid 500); 7 Nov 2006 17:41:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 846 invoked by uid 99); 7 Nov 2006 17:41:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 09:41:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 09:41:18 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 28DA77142FA
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 09:40:56 -0800 (PST)
Message-ID: <23307467.1162921256164.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 09:40:56 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-645) Map-reduce task does not finish
 correctly when -reducer NONE is specified
In-Reply-To: <18535487.1161894916590.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-645?page=all ]

dhruba borthakur updated HADOOP-645:
------------------------------------

    Attachment: reducernone.patch

This fixes the Exception generated by the streaming job that is submitted with -reducer NONE. The outut of map goes directly into files in HDFS.

> Map-reduce task does not finish correctly when -reducer NONE is specified
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-645
>                 URL: http://issues.apache.org/jira/browse/HADOOP-645
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: reducernone.patch
>
>
> Map-reduce task does not finish correctly when -reducer NONE is specified, The NONE option means that the reducer should not be generating any output. Using this option causes an exception in the task tracker:
> java.lang.IllegalArgumentException: URI is not hierarchical
> TaskRunner: at java.io.File.<init>(File.java:335)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:583)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:96)
> TaskRunner: at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:49)
> TaskRunner: at org.apache.hadoop.mapred.MapTask.run(MapTask.java:213)
> TaskRunner: at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1240)
> TaskRunner: sideEffectURI_ file:output length 11

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 17:43:13 2006
Return-Path: 
 <hadoop-dev-return-4863-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69392 invoked from network); 7 Nov 2006 17:43:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 17:43:13 -0000
Received: (qmail 4182 invoked by uid 500); 7 Nov 2006 17:43:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4023 invoked by uid 500); 7 Nov 2006 17:43:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4014 invoked by uid 99); 7 Nov 2006 17:43:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 09:43:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 09:43:11 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 354E27142F5
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 09:42:51 -0800 (PST)
Message-ID: <6053791.1162921371209.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 09:42:51 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-645) Map-reduce task does not finish
 correctly when -reducer NONE is specified
In-Reply-To: <18535487.1161894916590.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-645?page=all ]

dhruba borthakur updated HADOOP-645:
------------------------------------

    Status: Patch Available  (was: Open)

This fixes the Exception that was being raised when a streaming job with -reducer NONE was submitted.

> Map-reduce task does not finish correctly when -reducer NONE is specified
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-645
>                 URL: http://issues.apache.org/jira/browse/HADOOP-645
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: reducernone.patch
>
>
> Map-reduce task does not finish correctly when -reducer NONE is specified, The NONE option means that the reducer should not be generating any output. Using this option causes an exception in the task tracker:
> java.lang.IllegalArgumentException: URI is not hierarchical
> TaskRunner: at java.io.File.<init>(File.java:335)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:583)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:96)
> TaskRunner: at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:49)
> TaskRunner: at org.apache.hadoop.mapred.MapTask.run(MapTask.java:213)
> TaskRunner: at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1240)
> TaskRunner: sideEffectURI_ file:output length 11

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 18:59:13 2006
Return-Path: 
 <hadoop-dev-return-4864-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93756 invoked from network); 7 Nov 2006 18:59:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 18:59:13 -0000
Received: (qmail 37796 invoked by uid 500); 7 Nov 2006 18:59:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37764 invoked by uid 500); 7 Nov 2006 18:59:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37755 invoked by uid 99); 7 Nov 2006 18:59:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 10:59:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 10:59:12 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B47417142F7
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 10:58:51 -0800 (PST)
Message-ID: <24302185.1162925931736.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 10:58:51 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-565) Upgrade Jetty to 6.x
In-Reply-To: <17704060.1159552279561.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-565?page=all ]

Doug Cutting updated HADOOP-565:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Sanjay!

> Upgrade Jetty to 6.x
> --------------------
>
>                 Key: HADOOP-565
>                 URL: http://issues.apache.org/jira/browse/HADOOP-565
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.9.0
>
>         Attachments: Hadoop-565.patch, Hadoop-565_1.patch.txt, Hadoop-565_2.patch, Hadoop-565_3.patch, Hadoop-565_lib.tar.gz
>
>
> Now that Jetty 6.x has been released as stable, we should upgrade.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 19:23:14 2006
Return-Path: 
 <hadoop-dev-return-4865-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1124 invoked from network); 7 Nov 2006 19:23:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 19:23:14 -0000
Received: (qmail 75530 invoked by uid 500); 7 Nov 2006 19:23:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75506 invoked by uid 500); 7 Nov 2006 19:23:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75497 invoked by uid 99); 7 Nov 2006 19:23:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 11:23:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 11:23:12 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9633C7142F5
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 11:22:52 -0800 (PST)
Message-ID: <20038956.1162927372612.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 11:22:52 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-682) hadoop namenode -format doesnt work
 anymore if target directory doesnt exist
In-Reply-To: <30515001.1162824517100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-682?page=all ]

Doug Cutting updated HADOOP-682:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Sanjay!

> hadoop namenode -format doesnt work anymore if target directory doesnt exist
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-682
>                 URL: http://issues.apache.org/jira/browse/HADOOP-682
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Sanjay Dahiya
>             Fix For: 0.9.0
>
>         Attachments: Hadoop-682.patch
>
>
> Not sure if this was intended, but hadoop namenode -format doesnt work anymore if the target directory doesnt exist due to the check in the NameNode.main(). It used to work earlier 
>         if (argv.length == 1 && argv[0].equals("-format")) {
>           boolean aborted = false;
>           File[] dirs = getDirs(conf);
>           for (int idx = 0; idx < dirs.length; idx++) {
>             if (dirs[idx].exists()) {                     <<<====== if dir doesnt exist it won't format
>               System.err.print("Re-format filesystem in " + dirs[idx] +" ? (Y or N) ");
>               if (!(System.in.read() == 'Y')) {
>                 System.err.println("Format aborted in "+ dirs[idx]);
>                 aborted = true;
>               } else {
>                 format(dirs[idx]);
>                 System.err.println("Formatted "+dirs[idx]);
>               }
>               System.in.read(); // discard the enter-key
>             }
>           }
>           System.exit(aborted ? 1 : 0);
>         }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 19:45:17 2006
Return-Path: 
 <hadoop-dev-return-4866-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10197 invoked from network); 7 Nov 2006 19:45:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 19:45:17 -0000
Received: (qmail 26418 invoked by uid 500); 7 Nov 2006 19:45:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26387 invoked by uid 500); 7 Nov 2006 19:45:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26378 invoked by uid 99); 7 Nov 2006 19:45:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 11:45:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 11:45:15 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4E8AE7142F7
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 11:44:55 -0800 (PST)
Message-ID: <1760384.1162928695233.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 11:44:55 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12447910 ] 
            
Owen O'Malley commented on HADOOP-489:
--------------------------------------

This is looking good.

1. TaskLog.Writer is public and should be package local.
2. The fields in TaskLog.Writer are package local and should be private.
3. IndexRecord should be static.
4. logStream doesn't need to have a buffered stream since you always try to read 512 bytes.
5. LOG should be a File and use the File(File, String) constructor.
6. The use of system property hadoop.log.dir should be documented in the java doc.
7. The logger's name should be set using TaskLog.class.getName().

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-489_20061019.patch, HADOOP-489_20061101.patch, HADOOP-489_20061102.patch, HADOOP-489_20061107.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 19:49:29 2006
Return-Path: 
 <hadoop-dev-return-4867-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11555 invoked from network); 7 Nov 2006 19:49:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 19:49:29 -0000
Received: (qmail 33858 invoked by uid 500); 7 Nov 2006 19:49:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33838 invoked by uid 500); 7 Nov 2006 19:49:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33829 invoked by uid 99); 7 Nov 2006 19:49:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 11:49:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 11:49:15 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D68B77142F7
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 11:48:54 -0800 (PST)
Message-ID: <5767670.1162928934876.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 11:48:54 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12447912 ] 
            
Owen O'Malley commented on HADOOP-489:
--------------------------------------

#5 above should have been TaskLog.LOG_DIR should be a File instead of a String.

Also, if the user output is less than 4k, you get a warning about potential pruning, if you ask for the last 4k.

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-489_20061019.patch, HADOOP-489_20061101.patch, HADOOP-489_20061102.patch, HADOOP-489_20061107.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 21:33:16 2006
Return-Path: 
 <hadoop-dev-return-4868-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54757 invoked from network); 7 Nov 2006 21:33:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 21:33:16 -0000
Received: (qmail 65163 invoked by uid 500); 7 Nov 2006 21:33:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64935 invoked by uid 500); 7 Nov 2006 21:33:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64683 invoked by uid 99); 7 Nov 2006 21:33:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 13:33:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 13:33:11 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 359027142F5
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 13:32:51 -0800 (PST)
Message-ID: <3721707.1162935171216.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 13:32:51 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-645) Map-reduce task does not finish
 correctly when -reducer NONE is specified
In-Reply-To: <18535487.1161894916590.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-645?page=all ]

Doug Cutting updated HADOOP-645:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba!

> Map-reduce task does not finish correctly when -reducer NONE is specified
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-645
>                 URL: http://issues.apache.org/jira/browse/HADOOP-645
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>             Fix For: 0.9.0
>
>         Attachments: reducernone.patch
>
>
> Map-reduce task does not finish correctly when -reducer NONE is specified, The NONE option means that the reducer should not be generating any output. Using this option causes an exception in the task tracker:
> java.lang.IllegalArgumentException: URI is not hierarchical
> TaskRunner: at java.io.File.<init>(File.java:335)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:583)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:96)
> TaskRunner: at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:49)
> TaskRunner: at org.apache.hadoop.mapred.MapTask.run(MapTask.java:213)
> TaskRunner: at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1240)
> TaskRunner: sideEffectURI_ file:output length 11

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 21:40:29 2006
Return-Path: 
 <hadoop-dev-return-4869-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57499 invoked from network); 7 Nov 2006 21:40:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 21:40:29 -0000
Received: (qmail 75444 invoked by uid 500); 7 Nov 2006 21:40:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75340 invoked by uid 500); 7 Nov 2006 21:40:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75331 invoked by uid 99); 7 Nov 2006 21:40:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 13:40:39 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.151.94.5] (HELO megs8.100mwh.com) (209.151.94.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 13:40:24 -0800
Received: from meetsawglad.corp.yahoo.com ([66.228.162.219])
	by megs8.100mwh.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.52)
	id 1GhYfX-0001Aa-Oy
	for hadoop-dev@lucene.apache.org; Tue, 07 Nov 2006 14:39:44 -0700
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <6860ca43bb1ad717e3582d7fdfaf5ff7@yahoo-inc.com>
References: <5154289.1162913095481.JavaMail.jira@brutus>
 <6860ca43bb1ad717e3582d7fdfaf5ff7@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EE4367BA-6C33-4688-8D6C-3D0CB353FD41@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Owen O'Malley <owen@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-76) Implement speculative re-execution
 of reduces
Date: Tue, 7 Nov 2006 13:39:46 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-AntiAbuse: This header was added to track abuse,
 please include it with any abuse report
X-AntiAbuse: Primary Hostname - megs8.100mwh.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - yahoo-inc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org


On Nov 7, 2006, at 8:40 AM, Arkady Borkovsky wrote:

> Relationship with streaming?
>
> when defining the implementation for speculative re-execution,  
> please take into account how Streaming is implemented.
> Specifically, streaming tasks are supposed run in their own working  
> directories and read and write (temporary) (Unix) files there.
> There may be some details that are important for speculative re- 
> execution implementation.

For the immediate term, Streaming probably won't support speculative  
execution. I suspect there are some unexplored corner cases that will  
make it hard. The "normal" Streaming data path via stdout should work  
since it will use the framework's normal collector from the reduce.

-- Owen

From MAILER-DAEMON Tue Nov  7 22:25:16 2006
Return-Path: 
 <hadoop-dev-return-4870-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73285 invoked from network); 7 Nov 2006 22:25:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 22:25:16 -0000
Received: (qmail 63077 invoked by uid 500); 7 Nov 2006 22:25:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62852 invoked by uid 500); 7 Nov 2006 22:25:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62843 invoked by uid 99); 7 Nov 2006 22:25:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 14:25:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 14:25:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7CBF37142F3
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 14:24:53 -0800 (PST)
Message-ID: <16921879.1162938293508.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 14:24:53 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12447943 ] 
            
Owen O'Malley commented on HADOOP-538:
--------------------------------------

I think the naming of the .so's is confusing. How about:

lib/native/Linux-i386-32/libhadoop.so     // prebuilt library checked into svn
build/hadoop-*/lib/native/prebuilt/Linux-i386-32/libhadoop.so    // prebuilt packaged location

The compiled library would still be packaged into:
build/hadoop-*/lib/native/Linux-i386-32/libhadoop.so

I think we should remove the "package-native" target and just make the "package" target copy any compiled libraries (for all platforms) into the package directory.

So to do a full build, it would be:

ant clean compile-native tar



> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 22:57:21 2006
Return-Path: 
 <hadoop-dev-return-4871-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84494 invoked from network); 7 Nov 2006 22:57:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 22:57:21 -0000
Received: (qmail 29974 invoked by uid 500); 7 Nov 2006 22:57:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29933 invoked by uid 500); 7 Nov 2006 22:57:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29699 invoked by uid 99); 7 Nov 2006 22:57:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 14:57:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 14:57:14 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A06867142F7
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 14:56:54 -0800 (PST)
Message-ID: <3923148.1162940214654.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 14:56:54 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12447951 ] 
            
Owen O'Malley commented on HADOOP-538:
--------------------------------------

The ZlibCompressor has dead nativeZlibLoaded code.

The ZlibFactory getGzip{Decom,Com}pressor methods should never return null, because their contract should be that they always return a valid implementation regardless of whether the native library was loaded. I see that the problem is that you want to use the native Gzip stream stuff, which doesn't provide a {com,decom}pressor. I guess I'd vote for just using:

public CompressionInputStream createInputStream(InputStream in) throws IOException {
  if (ZlibFactory.isNativeZlibLoaded()) {
    return new DecompressorStream(...);
  } else {
    return new GzipInputStream(in);
  }
}

and removing the extra ZlibFactory.getGzip* methods.


> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 23:53:17 2006
Return-Path: 
 <hadoop-dev-return-4872-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96461 invoked from network); 7 Nov 2006 23:53:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 23:53:17 -0000
Received: (qmail 3174 invoked by uid 500); 7 Nov 2006 23:53:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3152 invoked by uid 500); 7 Nov 2006 23:53:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2781 invoked by uid 99); 7 Nov 2006 23:53:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 15:53:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 15:53:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F40677142F5
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 15:52:52 -0800 (PST)
Message-ID: <19101684.1162943572996.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 15:52:52 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-687) Upgrade to Jetty 6 does not patch
 bin/hadoop
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Upgrade to Jetty 6 does not patch bin/hadoop
--------------------------------------------

                 Key: HADOOP-687
                 URL: http://issues.apache.org/jira/browse/HADOOP-687
             Project: Hadoop
          Issue Type: Bug
          Components: scripts
            Reporter: Sameer Paranjpye
         Assigned To: Sameer Paranjpye
            Priority: Critical
             Fix For: 0.9.0


The upgrade to jetty 6 does not fix 'bin/hadoop' to include new jars. The directory 'lib/hadoop/jetty-ext' has been replaced by 'lib/hadoop/jsp-2.0' however 'bin/hadoop' does not include the jars in the new directory in CLASSPATH. As a result, tasktrackers and namenodes fail to launch.



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 23:57:14 2006
Return-Path: 
 <hadoop-dev-return-4873-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98120 invoked from network); 7 Nov 2006 23:57:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 23:57:14 -0000
Received: (qmail 9365 invoked by uid 500); 7 Nov 2006 23:57:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9336 invoked by uid 500); 7 Nov 2006 23:57:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9327 invoked by uid 99); 7 Nov 2006 23:57:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 15:57:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 15:57:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AFEEE7142EC
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 15:56:52 -0800 (PST)
Message-ID: <9613713.1162943812718.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 15:56:52 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-687) Upgrade to Jetty 6 does not patch
 bin/hadoop
In-Reply-To: <19101684.1162943572996.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-687?page=all ]

Sameer Paranjpye updated HADOOP-687:
------------------------------------

    Status: Patch Available  (was: Open)

This patch fixes the issue.

> Upgrade to Jetty 6 does not patch bin/hadoop
> --------------------------------------------
>
>                 Key: HADOOP-687
>                 URL: http://issues.apache.org/jira/browse/HADOOP-687
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>            Reporter: Sameer Paranjpye
>         Assigned To: Sameer Paranjpye
>            Priority: Critical
>             Fix For: 0.9.0
>
>         Attachments: jetty_6_fix.txt
>
>
> The upgrade to jetty 6 does not fix 'bin/hadoop' to include new jars. The directory 'lib/hadoop/jetty-ext' has been replaced by 'lib/hadoop/jsp-2.0' however 'bin/hadoop' does not include the jars in the new directory in CLASSPATH. As a result, tasktrackers and namenodes fail to launch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov  7 23:57:15 2006
Return-Path: 
 <hadoop-dev-return-4874-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98197 invoked from network); 7 Nov 2006 23:57:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 23:57:15 -0000
Received: (qmail 9810 invoked by uid 500); 7 Nov 2006 23:57:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9600 invoked by uid 500); 7 Nov 2006 23:57:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9591 invoked by uid 99); 7 Nov 2006 23:57:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 15:57:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 15:57:14 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F1AA97142D2
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 15:56:53 -0800 (PST)
Message-ID: <30991365.1162943813987.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 15:56:53 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-687) Upgrade to Jetty 6 does not patch
 bin/hadoop
In-Reply-To: <19101684.1162943572996.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-687?page=all ]

Sameer Paranjpye updated HADOOP-687:
------------------------------------

    Attachment: jetty_6_fix.txt

> Upgrade to Jetty 6 does not patch bin/hadoop
> --------------------------------------------
>
>                 Key: HADOOP-687
>                 URL: http://issues.apache.org/jira/browse/HADOOP-687
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>            Reporter: Sameer Paranjpye
>         Assigned To: Sameer Paranjpye
>            Priority: Critical
>             Fix For: 0.9.0
>
>         Attachments: jetty_6_fix.txt
>
>
> The upgrade to jetty 6 does not fix 'bin/hadoop' to include new jars. The directory 'lib/hadoop/jetty-ext' has been replaced by 'lib/hadoop/jsp-2.0' however 'bin/hadoop' does not include the jars in the new directory in CLASSPATH. As a result, tasktrackers and namenodes fail to launch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 00:01:13 2006
Return-Path: 
 <hadoop-dev-return-4875-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2092 invoked from network); 8 Nov 2006 00:01:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 00:01:13 -0000
Received: (qmail 35773 invoked by uid 500); 8 Nov 2006 00:01:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35752 invoked by uid 500); 8 Nov 2006 00:01:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35743 invoked by uid 99); 8 Nov 2006 00:01:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 16:01:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 16:01:11 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 77D857142EC
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 16:00:51 -0800 (PST)
Message-ID: <30661235.1162944051488.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 16:00:51 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-688) move dfs administrative interfaces to
 a separate command
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

move dfs administrative interfaces to a separate command
--------------------------------------------------------

                 Key: HADOOP-688
                 URL: http://issues.apache.org/jira/browse/HADOOP-688
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
            Reporter: dhruba borthakur
         Assigned To: dhruba borthakur


The dfs adminsitrative commands (e.g. safemode, report, etc) should be separate from the dfs user commands. The proposal is to remove the following two commands:

bin/hadoop dfs -report
bin/hadoop dfs -safemode

The above two features will be available through a new command:

bin/hadoop dfsadmin -report
bin/hadoop dfsadmin -safemode

This is done so that there is a clean distinction between cluster administrative commands and users command.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 00:09:14 2006
Return-Path: 
 <hadoop-dev-return-4876-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3779 invoked from network); 8 Nov 2006 00:09:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 00:09:14 -0000
Received: (qmail 46369 invoked by uid 500); 8 Nov 2006 00:09:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46182 invoked by uid 500); 8 Nov 2006 00:09:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46173 invoked by uid 99); 8 Nov 2006 00:09:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 16:09:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 16:09:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 666A77142F3
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 16:08:53 -0800 (PST)
Message-ID: <18193863.1162944533416.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 16:08:53 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12447983 ] 
            
Owen O'Malley commented on HADOOP-538:
--------------------------------------

The CompressionCodec interface should not extend Configurable.
The DefaultCodec should extend Configured.
The rationale is that CompressionCodecs in general do not need to be configured. If the Codecs are Configurable, they will be configured by ReflectionUtils.newInstance(Class).

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 00:11:14 2006
Return-Path: 
 <hadoop-dev-return-4877-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4412 invoked from network); 8 Nov 2006 00:11:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 00:11:14 -0000
Received: (qmail 52211 invoked by uid 500); 8 Nov 2006 00:11:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51982 invoked by uid 500); 8 Nov 2006 00:11:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51973 invoked by uid 99); 8 Nov 2006 00:11:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 16:11:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 16:11:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1D02F7142F3
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 16:10:53 -0800 (PST)
Message-ID: <17842039.1162944653116.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 16:10:53 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-382) add a unit test for multiple
 datanodes in a machine
In-Reply-To: <30840044.1153766474463.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-382?page=all ]

Work on HADOOP-382 started by Milind Bhandarkar.

> add a unit test for multiple datanodes in a machine
> ---------------------------------------------------
>
>                 Key: HADOOP-382
>                 URL: http://issues.apache.org/jira/browse/HADOOP-382
>             Project: Hadoop
>          Issue Type: Test
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Milind Bhandarkar
>
> recently we saw a bug present itself only when multiple data nodes are started on a single machine.
> A unit test that starts multiple data nodes would expose such bugs before they happen in a real installation.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 00:21:14 2006
Return-Path: 
 <hadoop-dev-return-4878-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10034 invoked from network); 8 Nov 2006 00:21:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 00:21:14 -0000
Received: (qmail 78474 invoked by uid 500); 8 Nov 2006 00:21:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78449 invoked by uid 500); 8 Nov 2006 00:21:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78440 invoked by uid 99); 8 Nov 2006 00:21:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 16:21:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 16:21:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E11997142F3
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 16:20:52 -0800 (PST)
Message-ID: <4441658.1162945252919.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 16:20:52 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-382) add a unit test for multiple datanodes
 in a machine
In-Reply-To: <30840044.1153766474463.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-382?page=all ]

Milind Bhandarkar updated HADOOP-382:
-------------------------------------

    Attachment: multi-dn-test.patch

This patch modifies the MiniDFSCluster to optionally specify starting multiple datanodes in separate threads.

> add a unit test for multiple datanodes in a machine
> ---------------------------------------------------
>
>                 Key: HADOOP-382
>                 URL: http://issues.apache.org/jira/browse/HADOOP-382
>             Project: Hadoop
>          Issue Type: Test
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Yoram Arnon
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: multi-dn-test.patch
>
>
> recently we saw a bug present itself only when multiple data nodes are started on a single machine.
> A unit test that starts multiple data nodes would expose such bugs before they happen in a real installation.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 00:21:19 2006
Return-Path: 
 <hadoop-dev-return-4879-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10142 invoked from network); 8 Nov 2006 00:21:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 00:21:19 -0000
Received: (qmail 79195 invoked by uid 500); 8 Nov 2006 00:21:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79175 invoked by uid 500); 8 Nov 2006 00:21:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79161 invoked by uid 99); 8 Nov 2006 00:21:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 16:21:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 16:21:16 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 105257142F5
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 16:20:56 -0800 (PST)
Message-ID: <25630221.1162945256064.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 16:20:56 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-382) add a unit test for multiple datanodes
 in a machine
In-Reply-To: <30840044.1153766474463.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-382?page=all ]

Milind Bhandarkar updated HADOOP-382:
-------------------------------------

               Status: Patch Available  (was: In Progress)
        Fix Version/s: 0.9.0
    Affects Version/s: 0.8.0

Patch submitted.

> add a unit test for multiple datanodes in a machine
> ---------------------------------------------------
>
>                 Key: HADOOP-382
>                 URL: http://issues.apache.org/jira/browse/HADOOP-382
>             Project: Hadoop
>          Issue Type: Test
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Yoram Arnon
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: multi-dn-test.patch
>
>
> recently we saw a bug present itself only when multiple data nodes are started on a single machine.
> A unit test that starts multiple data nodes would expose such bugs before they happen in a real installation.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 01:43:26 2006
Return-Path: 
 <hadoop-dev-return-4880-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27911 invoked from network); 8 Nov 2006 01:43:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 01:43:26 -0000
Received: (qmail 71373 invoked by uid 500); 8 Nov 2006 01:43:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71344 invoked by uid 500); 8 Nov 2006 01:43:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71305 invoked by uid 99); 8 Nov 2006 01:43:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 17:43:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 17:43:20 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DC814714311
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 17:42:59 -0800 (PST)
Message-ID: <18982619.1162950179900.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 17:42:59 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-604) DataNodes get NullPointerException and
 become unresponsive on 50010
In-Reply-To: <30151363.1161021034972.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-604?page=all ]

Raghu Angadi updated HADOOP-604:
--------------------------------

    Attachment: fsdataset-locks.patch


This patch fixes the NPE and synchronizes datanode's directories and maps.


> DataNodes get NullPointerException and become unresponsive on 50010
> -------------------------------------------------------------------
>
>                 Key: HADOOP-604
>                 URL: http://issues.apache.org/jira/browse/HADOOP-604
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0
>            Reporter: Christian Kunz
>         Assigned To: Raghu Angadi
>         Attachments: fsdataset-locks.patch
>
>
> I wonder whether handling of 'children' in FSDataset is thread-safe.
> Exception in thread "org.apache.hadoop.dfs.DataNode$DataXceiveServer@19b04e2" java.lang.NullPointerException
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSVolume.checkDirs(FSDataset.java:238)
>         at org.apache.hadoop.dfs.FSDataset$FSVolumeSet.checkDirs(FSDataset.java:326)
>         at org.apache.hadoop.dfs.FSDataset.checkDataDir(FSDataset.java:522)
>         at org.apache.hadoop.dfs.DataNode$DataXceiveServer.run(DataNode.java:472)
>         at java.lang.Thread.run(Thread.java:595)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 01:45:15 2006
Return-Path: 
 <hadoop-dev-return-4881-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28823 invoked from network); 8 Nov 2006 01:45:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 01:45:15 -0000
Received: (qmail 73948 invoked by uid 500); 8 Nov 2006 01:45:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73907 invoked by uid 500); 8 Nov 2006 01:45:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73898 invoked by uid 99); 8 Nov 2006 01:45:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 17:45:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 17:45:14 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 72B107142F3
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 17:44:54 -0800 (PST)
Message-ID: <17218894.1162950294467.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 17:44:54 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-604) DataNodes get NullPointerException and
 become unresponsive on 50010
In-Reply-To: <30151363.1161021034972.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-604?page=all ]

Raghu Angadi updated HADOOP-604:
--------------------------------

    Status: Patch Available  (was: Open)

> DataNodes get NullPointerException and become unresponsive on 50010
> -------------------------------------------------------------------
>
>                 Key: HADOOP-604
>                 URL: http://issues.apache.org/jira/browse/HADOOP-604
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0
>            Reporter: Christian Kunz
>         Assigned To: Raghu Angadi
>         Attachments: fsdataset-locks.patch
>
>
> I wonder whether handling of 'children' in FSDataset is thread-safe.
> Exception in thread "org.apache.hadoop.dfs.DataNode$DataXceiveServer@19b04e2" java.lang.NullPointerException
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSVolume.checkDirs(FSDataset.java:238)
>         at org.apache.hadoop.dfs.FSDataset$FSVolumeSet.checkDirs(FSDataset.java:326)
>         at org.apache.hadoop.dfs.FSDataset.checkDataDir(FSDataset.java:522)
>         at org.apache.hadoop.dfs.DataNode$DataXceiveServer.run(DataNode.java:472)
>         at java.lang.Thread.run(Thread.java:595)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 02:13:15 2006
Return-Path: 
 <hadoop-dev-return-4882-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37660 invoked from network); 8 Nov 2006 02:13:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 02:13:15 -0000
Received: (qmail 20893 invoked by uid 500); 8 Nov 2006 02:13:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20859 invoked by uid 500); 8 Nov 2006 02:13:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20848 invoked by uid 99); 8 Nov 2006 02:13:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 18:13:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 18:13:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6A5E27142F8
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 18:12:53 -0800 (PST)
Message-ID: <25657944.1162951973433.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 18:12:53 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-459) libhdfs leaks memory when writing to
 files
In-Reply-To: <12771302.1155876793902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-459?page=all ]

Sameer Paranjpye updated HADOOP-459:
------------------------------------

    Status: Open  (was: Patch Available)

Looks like this patch was broken by the upgrade to Jetty 6, which broke head. That issue has been addressed by HADOOP-687. However, this patch also needs some updates now.

> libhdfs leaks memory when writing to files
> ------------------------------------------
>
>                 Key: HADOOP-459
>                 URL: http://issues.apache.org/jira/browse/HADOOP-459
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.1, 0.7.0, 0.6.2, 0.6.1, 0.6.0, 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Sameer Paranjpye
>         Attachments: libhdfs_fixes.1.txt, libhdfs_fixes.2.txt, libhdfs_fixes.txt
>
>
> hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 02:13:16 2006
Return-Path: 
 <hadoop-dev-return-4883-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37697 invoked from network); 8 Nov 2006 02:13:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 02:13:16 -0000
Received: (qmail 21263 invoked by uid 500); 8 Nov 2006 02:13:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21105 invoked by uid 500); 8 Nov 2006 02:13:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21096 invoked by uid 99); 8 Nov 2006 02:13:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 18:13:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 18:13:15 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5A7F67142FA
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 18:12:55 -0800 (PST)
Message-ID: <14680835.1162951975368.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 18:12:55 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-459) libhdfs leaks memory when writing
 to files
In-Reply-To: <12771302.1155876793902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-459?page=all ]

Work on HADOOP-459 started by Sameer Paranjpye.

> libhdfs leaks memory when writing to files
> ------------------------------------------
>
>                 Key: HADOOP-459
>                 URL: http://issues.apache.org/jira/browse/HADOOP-459
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>            Reporter: Christian Kunz
>         Assigned To: Sameer Paranjpye
>         Attachments: libhdfs_fixes.1.txt, libhdfs_fixes.2.txt, libhdfs_fixes.txt
>
>
> hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 02:13:18 2006
Return-Path: 
 <hadoop-dev-return-4884-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37744 invoked from network); 8 Nov 2006 02:13:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 02:13:18 -0000
Received: (qmail 21380 invoked by uid 500); 8 Nov 2006 02:13:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21351 invoked by uid 500); 8 Nov 2006 02:13:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21342 invoked by uid 99); 8 Nov 2006 02:13:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 18:13:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 18:13:17 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 56E497142FC
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 18:12:57 -0800 (PST)
Message-ID: <24618655.1162951977353.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 18:12:57 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-459) libhdfs leaks memory when writing to
 files
In-Reply-To: <12771302.1155876793902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-459?page=all ]

Sameer Paranjpye updated HADOOP-459:
------------------------------------

    Status: Patch Available  (was: In Progress)

Attached updated patch.

> libhdfs leaks memory when writing to files
> ------------------------------------------
>
>                 Key: HADOOP-459
>                 URL: http://issues.apache.org/jira/browse/HADOOP-459
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.1, 0.7.0, 0.6.2, 0.6.1, 0.6.0, 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Sameer Paranjpye
>         Attachments: libhdfs_fixes.1.txt, libhdfs_fixes.2.txt, libhdfs_fixes.txt
>
>
> hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 02:13:20 2006
Return-Path: 
 <hadoop-dev-return-4885-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37783 invoked from network); 8 Nov 2006 02:13:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 02:13:20 -0000
Received: (qmail 21628 invoked by uid 500); 8 Nov 2006 02:13:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21604 invoked by uid 500); 8 Nov 2006 02:13:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21595 invoked by uid 99); 8 Nov 2006 02:13:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 18:13:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 18:13:19 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 55689714314
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 18:12:59 -0800 (PST)
Message-ID: <30669376.1162951979347.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 18:12:59 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-459) libhdfs leaks memory when writing to
 files
In-Reply-To: <12771302.1155876793902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-459?page=all ]

Sameer Paranjpye updated HADOOP-459:
------------------------------------

    Attachment: libhdfs_fixes.2.txt

> libhdfs leaks memory when writing to files
> ------------------------------------------
>
>                 Key: HADOOP-459
>                 URL: http://issues.apache.org/jira/browse/HADOOP-459
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>            Reporter: Christian Kunz
>         Assigned To: Sameer Paranjpye
>         Attachments: libhdfs_fixes.1.txt, libhdfs_fixes.2.txt, libhdfs_fixes.txt
>
>
> hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 03:17:13 2006
Return-Path: 
 <hadoop-dev-return-4886-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54176 invoked from network); 8 Nov 2006 03:17:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 03:17:13 -0000
Received: (qmail 2104 invoked by uid 500); 8 Nov 2006 03:17:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2086 invoked by uid 500); 8 Nov 2006 03:17:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2075 invoked by uid 99); 8 Nov 2006 03:17:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 19:17:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 19:17:12 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DA6787142F5
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 19:16:50 -0800 (PST)
Message-ID: <2487900.1162955810892.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 19:16:50 -0800 (PST)
From: "Feng Jiang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-689) hadoop should provide a common way to
 wrap instances with different types into one type
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

hadoop should provide a common way to wrap instances with different types into one type
---------------------------------------------------------------------------------------

                 Key: HADOOP-689
                 URL: http://issues.apache.org/jira/browse/HADOOP-689
             Project: Hadoop
          Issue Type: Improvement
          Components: io
         Environment: All environment
            Reporter: Feng Jiang


When two sequence files, which have same Key type but different Value types, are mapped out to reduce, multiple Value types is not allowed. In this case, we need a way to wrap instances with different types into one class type to reduce.

In current code, ObjectWritable is a sole choice. but it costs too many space, because the class declaration will be appended into output file as a string for every Key-value pair.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 03:29:13 2006
Return-Path: 
 <hadoop-dev-return-4887-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55304 invoked from network); 8 Nov 2006 03:29:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 03:29:13 -0000
Received: (qmail 6320 invoked by uid 500); 8 Nov 2006 03:29:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6096 invoked by uid 500); 8 Nov 2006 03:29:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6087 invoked by uid 99); 8 Nov 2006 03:29:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 19:29:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 19:29:12 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D52227142D2
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 19:28:51 -0800 (PST)
Message-ID: <17142107.1162956531870.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 19:28:51 -0800 (PST)
From: "Feng Jiang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-689) hadoop should provide a common way to
 wrap instances with different types into one type
In-Reply-To: <2487900.1162955810892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-689?page=all ]

Feng Jiang updated HADOOP-689:
------------------------------

    Attachment: HADOOP-689.patch

Fix this issue.

> hadoop should provide a common way to wrap instances with different types into one type
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-689
>                 URL: http://issues.apache.org/jira/browse/HADOOP-689
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>         Environment: All environment
>            Reporter: Feng Jiang
>         Attachments: HADOOP-689.patch
>
>
> When two sequence files, which have same Key type but different Value types, are mapped out to reduce, multiple Value types is not allowed. In this case, we need a way to wrap instances with different types into one class type to reduce.
> In current code, ObjectWritable is a sole choice. but it costs too many space, because the class declaration will be appended into output file as a string for every Key-value pair.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 04:05:16 2006
Return-Path: 
 <hadoop-dev-return-4888-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61268 invoked from network); 8 Nov 2006 04:05:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 04:05:16 -0000
Received: (qmail 42278 invoked by uid 500); 8 Nov 2006 04:05:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42253 invoked by uid 500); 8 Nov 2006 04:05:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42244 invoked by uid 99); 8 Nov 2006 04:05:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 20:05:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 20:05:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 881407142F5
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 20:04:53 -0800 (PST)
Message-ID: <8137858.1162958693554.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 20:04:53 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12448019 ] 
            
Arun C Murthy commented on HADOOP-538:
--------------------------------------

1. Naming of .so's

The naming was done as exists so as to ensure we can easily 'know' whether libhadoop.so is loaded or libhadoop-{platform-specific}.so and print out diagnostic information from NativeCodeLoader...

However if people feel strongly about it, here is a slight variation:

lib/native/prebuilt/Linux-i386-32/libhadoop.so  //pre-built, checked-in
build/hadoop-*/lib/native/prebuilt/Linux-i386-32/libhadoop.so // prebuilt packaged location 

build/hadoop-*/lib/native/custom/Linux-i386-32/libhadoop.so // custom-built packaged location

2. package-native

Unfortunately we cannot just 'copy' libraries because of the need to invoke 'libtool' from the package-native target, this is because only libtool understands the platform-specific conventions about 'libraries' i.e. .so v/s .dll and so on... and hence a simple copy would not suffice. Also we cannot invoke libtool from 'package' since we can't assume that 'libtool' exists without 'compile-native'.... thus the need for a separate 'package-native' target.

3. CompressionCodec and 'Configurable'

I'll get this done, with a small caveat: We cannot get DefaultCodec to 'extend' Configured since it would mean that we will need to add a new constructor to DefaultCodec (there is an implicit constructor today) to satisfy the 'Configured' class, thus breaking the existing public api. I can get around this by 
public class DefaultCodec implements Configurable, CompressionCodec {
  //...
}
Does that fly?




> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 04:13:15 2006
Return-Path: 
 <hadoop-dev-return-4889-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62562 invoked from network); 8 Nov 2006 04:13:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 04:13:15 -0000
Received: (qmail 49310 invoked by uid 500); 8 Nov 2006 04:13:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49280 invoked by uid 500); 8 Nov 2006 04:13:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49271 invoked by uid 99); 8 Nov 2006 04:13:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 20:13:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 20:13:14 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1407A7142F7
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 20:12:54 -0800 (PST)
Message-ID: <8088878.1162959174078.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 20:12:54 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-611?page=all ]

Devaraj Das updated HADOOP-611:
-------------------------------

    Attachment: merge.patch

Thanks Owen for the review. Attached is the updated patch.

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: merge.patch, merge.patch, merge.patch
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 04:13:23 2006
Return-Path: 
 <hadoop-dev-return-4890-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62739 invoked from network); 8 Nov 2006 04:13:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 04:13:23 -0000
Received: (qmail 50321 invoked by uid 500); 8 Nov 2006 04:13:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50175 invoked by uid 500); 8 Nov 2006 04:13:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50163 invoked by uid 99); 8 Nov 2006 04:13:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 20:13:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 20:13:18 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1F0F17142FC
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 20:12:58 -0800 (PST)
Message-ID: <27166047.1162959178124.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 20:12:58 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-611?page=all ]

Devaraj Das updated HADOOP-611:
-------------------------------

    Status: Patch Available  (was: Open)

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: merge.patch, merge.patch, merge.patch
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 04:39:15 2006
Return-Path: 
 <hadoop-dev-return-4891-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67837 invoked from network); 8 Nov 2006 04:39:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 04:39:15 -0000
Received: (qmail 69975 invoked by uid 500); 8 Nov 2006 04:39:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69940 invoked by uid 500); 8 Nov 2006 04:39:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69931 invoked by uid 99); 8 Nov 2006 04:39:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 20:39:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 20:39:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9BD687142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 20:38:53 -0800 (PST)
Message-ID: <4100283.1162960733635.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 20:38:53 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12448027 ] 
            
Arun C Murthy commented on HADOOP-538:
--------------------------------------

Wrt ZlibFactory, I agree it looks a little ugly for now - and above direction.

However I feel we can do sligthly better by getting ZlibFactory to return the 'Class' instead of the instance i.e.
public Class getZlibCompressorClass() 
&
public Class getZlibDecompressorClass() 

(This of course is Owen's original suggestion...)

This will require that ReflectionUtils has a new method:

    public static Object newInstance(Class theClass, Object[] arguments, 
        Configuration conf) {
        // Constructor signature
        Class[] constructorSignature = new Class[arguments.length];
        for (int i=0; i < arguments.length; ++i) {
          constructorSignature[i] = arguments[i].getClass();
        }
        
        Object result;
        
        try {
            Constructor meth = theClass.getConstructor(constructorSignature);
            meth.setAccessible(true);
            result = meth.newInstance(arguments);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
        
        if (conf != null) {
            if (result instanceof Configurable) {
                ((Configurable) result).setConf(conf);
            }
            if (conf instanceof JobConf && 
                    result instanceof JobConfigurable) {
                ((JobConfigurable)result).configure((JobConf) conf);
            }
        }
        return result;
    }

which can then be used to call constructors with arguments (ala http://java.sun.com/docs/books/tutorial/reflect/object/arg.html). 

This is necessary since I will need to call Zlib{Com|Decom}pressor with arguments to make it 'behave' like a Gzip {com|decom}pressor. 

The api can probably be useful elsewhere too...

Thoughts?

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 06:51:15 2006
Return-Path: 
 <hadoop-dev-return-4892-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92549 invoked from network); 8 Nov 2006 06:51:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 06:51:15 -0000
Received: (qmail 522 invoked by uid 500); 8 Nov 2006 06:51:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 497 invoked by uid 500); 8 Nov 2006 06:51:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 488 invoked by uid 99); 8 Nov 2006 06:51:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 22:51:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 22:51:14 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C1BCF7142EC
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 22:50:53 -0800 (PST)
Message-ID: <21086634.1162968653790.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 22:50:53 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-611?page=all ]

Devaraj Das updated HADOOP-611:
-------------------------------

    Attachment: merge.patch

Attached the wrong patch earlier. This is the correct patch.

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: merge.patch, merge.patch, merge.patch, merge.patch
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 07:23:15 2006
Return-Path: 
 <hadoop-dev-return-4893-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99857 invoked from network); 8 Nov 2006 07:23:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 07:23:15 -0000
Received: (qmail 28495 invoked by uid 500); 8 Nov 2006 07:23:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28272 invoked by uid 500); 8 Nov 2006 07:23:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28263 invoked by uid 99); 8 Nov 2006 07:23:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 23:23:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 23:23:14 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6E8987142F3
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 23:22:54 -0800 (PST)
Message-ID: <4721945.1162970574450.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 23:22:54 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-613) The final merge on the reduces should
 feed the reduce directly
In-Reply-To: <32865816.1161196175060.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-613?page=all ]

Devaraj Das updated HADOOP-613:
-------------------------------

    Attachment: reduce-get-iterator.patch

Attaching an early version of this patch for an early review (not yet-cleaned up)...

> The final merge on the reduces should feed the reduce directly
> --------------------------------------------------------------
>
>                 Key: HADOOP-613
>                 URL: http://issues.apache.org/jira/browse/HADOOP-613
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: reduce-get-iterator.patch
>
>
> The final merge on the input to the reduce should use the iterators from HADOOP-611 directly rather than using a round trip to disk.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 07:51:14 2006
Return-Path: 
 <hadoop-dev-return-4894-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4708 invoked from network); 8 Nov 2006 07:51:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 07:51:14 -0000
Received: (qmail 56177 invoked by uid 500); 8 Nov 2006 07:51:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56152 invoked by uid 500); 8 Nov 2006 07:51:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56139 invoked by uid 99); 8 Nov 2006 07:51:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 23:51:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 23:51:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 25EBB7142F7
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 23:50:53 -0800 (PST)
Message-ID: <12768192.1162972253152.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 23:50:53 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-688) move dfs administrative interfaces to
 a separate command
In-Reply-To: <30661235.1162944051488.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-688?page=all ]

dhruba borthakur updated HADOOP-688:
------------------------------------

    Attachment: admincommand.patch

A new command named admin that funnels all hdfs administrative commands.

bin/hadoop --config conf admin -report
bin/hadoop --config conf admin -safemode


> move dfs administrative interfaces to a separate command
> --------------------------------------------------------
>
>                 Key: HADOOP-688
>                 URL: http://issues.apache.org/jira/browse/HADOOP-688
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: admincommand.patch
>
>
> The dfs adminsitrative commands (e.g. safemode, report, etc) should be separate from the dfs user commands. The proposal is to remove the following two commands:
> bin/hadoop dfs -report
> bin/hadoop dfs -safemode
> The above two features will be available through a new command:
> bin/hadoop dfsadmin -report
> bin/hadoop dfsadmin -safemode
> This is done so that there is a clean distinction between cluster administrative commands and users command.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 07:51:16 2006
Return-Path: 
 <hadoop-dev-return-4895-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4745 invoked from network); 8 Nov 2006 07:51:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 07:51:16 -0000
Received: (qmail 56432 invoked by uid 500); 8 Nov 2006 07:51:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56398 invoked by uid 500); 8 Nov 2006 07:51:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56389 invoked by uid 99); 8 Nov 2006 07:51:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 23:51:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 23:51:14 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 66F377142F3
	for <hadoop-dev@lucene.apache.org>; Tue,  7 Nov 2006 23:50:54 -0800 (PST)
Message-ID: <23432508.1162972254418.JavaMail.jira@brutus>
Date: Tue, 7 Nov 2006 23:50:54 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-688) move dfs administrative interfaces to
 a separate command
In-Reply-To: <30661235.1162944051488.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-688?page=all ]

dhruba borthakur updated HADOOP-688:
------------------------------------

    Status: Patch Available  (was: Open)

A new command named admin that funnels all hdfs administrative commands.

bin/hadoop --config conf admin -report
bin/hadoop --config conf admin -safemode

> move dfs administrative interfaces to a separate command
> --------------------------------------------------------
>
>                 Key: HADOOP-688
>                 URL: http://issues.apache.org/jira/browse/HADOOP-688
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: admincommand.patch
>
>
> The dfs adminsitrative commands (e.g. safemode, report, etc) should be separate from the dfs user commands. The proposal is to remove the following two commands:
> bin/hadoop dfs -report
> bin/hadoop dfs -safemode
> The above two features will be available through a new command:
> bin/hadoop dfsadmin -report
> bin/hadoop dfsadmin -safemode
> This is done so that there is a clean distinction between cluster administrative commands and users command.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 12:17:12 2006
Return-Path: 
 <hadoop-dev-return-4896-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72621 invoked from network); 8 Nov 2006 12:17:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 12:17:12 -0000
Received: (qmail 12640 invoked by uid 500); 8 Nov 2006 12:17:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12605 invoked by uid 500); 8 Nov 2006 12:17:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12596 invoked by uid 99); 8 Nov 2006 12:17:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 04:17:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 04:17:11 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 15C667142F7
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 04:16:51 -0800 (PST)
Message-ID: <18414070.1162988211086.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 04:16:51 -0800 (PST)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-690) NPE in jobcontrol
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

NPE in jobcontrol
-----------------

                 Key: HADOOP-690
                 URL: http://issues.apache.org/jira/browse/HADOOP-690
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.8.0
            Reporter: Johan Oskarson


While running a few jobs I got this exception:

Exception in thread "Thread-10" java.lang.NullPointerException
        at org.apache.hadoop.mapred.jobcontrol.Job.checkRunningState(Job.java:246)
        at org.apache.hadoop.mapred.jobcontrol.Job.checkState(Job.java:264)
        at org.apache.hadoop.mapred.jobcontrol.JobControl.checkRunningJobs(JobControl.java:211)
        at org.apache.hadoop.mapred.jobcontrol.JobControl.run(JobControl.java:280)

It looks like this was just when all the jobs finished.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 12:21:14 2006
Return-Path: 
 <hadoop-dev-return-4897-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74404 invoked from network); 8 Nov 2006 12:21:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 12:21:14 -0000
Received: (qmail 18299 invoked by uid 500); 8 Nov 2006 12:21:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18083 invoked by uid 500); 8 Nov 2006 12:21:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18074 invoked by uid 99); 8 Nov 2006 12:21:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 04:21:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 04:21:12 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 84BA27142F7
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 04:20:52 -0800 (PST)
Message-ID: <17037005.1162988452541.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 04:20:52 -0800 (PST)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-690) NPE in jobcontrol
In-Reply-To: <18414070.1162988211086.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-690?page=comments#action_12448117 ] 
            
Johan Oskarson commented on HADOOP-690:
---------------------------------------

A closer look shows that the tasks actually died, namenode got OutOfMemoryError so they timed out.

> NPE in jobcontrol
> -----------------
>
>                 Key: HADOOP-690
>                 URL: http://issues.apache.org/jira/browse/HADOOP-690
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Johan Oskarson
>
> While running a few jobs I got this exception:
> Exception in thread "Thread-10" java.lang.NullPointerException
>         at org.apache.hadoop.mapred.jobcontrol.Job.checkRunningState(Job.java:246)
>         at org.apache.hadoop.mapred.jobcontrol.Job.checkState(Job.java:264)
>         at org.apache.hadoop.mapred.jobcontrol.JobControl.checkRunningJobs(JobControl.java:211)
>         at org.apache.hadoop.mapred.jobcontrol.JobControl.run(JobControl.java:280)
> It looks like this was just when all the jobs finished.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 12:32:10 2006
Return-Path: 
 <hadoop-dev-return-4898-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76345 invoked from network); 8 Nov 2006 12:32:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 12:32:10 -0000
Received: (qmail 48800 invoked by uid 500); 8 Nov 2006 12:32:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48766 invoked by uid 500); 8 Nov 2006 12:32:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48751 invoked by uid 99); 8 Nov 2006 12:32:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 04:32:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 04:32:04 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A04807142FA
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 04:31:09 -0800 (PST)
Message-ID: <26315457.1162989069428.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 04:31:09 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-611?page=all ]

Devaraj Das updated HADOOP-611:
-------------------------------

    Attachment:     (was: merge.patch)

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: merge.patch, merge.patch, merge.patch, merge.patch
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 12:54:47 2006
Return-Path: 
 <hadoop-dev-return-4900-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81966 invoked from network); 8 Nov 2006 12:54:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 12:54:47 -0000
Received: (qmail 95145 invoked by uid 500); 8 Nov 2006 12:54:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94861 invoked by uid 500); 8 Nov 2006 12:54:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94852 invoked by uid 99); 8 Nov 2006 12:54:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 04:54:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 04:54:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 16E5B7142FA
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 04:33:01 -0800 (PST)
Message-ID: <24954358.1162989181090.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 04:33:01 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-611?page=all ]

Devaraj Das updated HADOOP-611:
-------------------------------

    Attachment: merge.patch

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: merge.patch, merge.patch, merge.patch, merge.patch
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 12:41:24 2006
Return-Path: 
 <hadoop-dev-return-4899-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77835 invoked from network); 8 Nov 2006 12:41:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 12:41:24 -0000
Received: (qmail 72360 invoked by uid 500); 8 Nov 2006 12:41:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72337 invoked by uid 500); 8 Nov 2006 12:41:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72328 invoked by uid 99); 8 Nov 2006 12:41:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 04:41:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 04:41:22 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4E073714314
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 04:41:02 -0800 (PST)
Message-ID: <2228415.1162989662314.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 04:41:02 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-613) The final merge on the reduces should
 feed the reduce directly
In-Reply-To: <32865816.1161196175060.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-613?page=all ]

Devaraj Das updated HADOOP-613:
-------------------------------

    Attachment: reduce-get-iterator.patch

Cleaned-up patch for review. Unit tests run fine, the sort application is currently being tested with this.

> The final merge on the reduces should feed the reduce directly
> --------------------------------------------------------------
>
>                 Key: HADOOP-613
>                 URL: http://issues.apache.org/jira/browse/HADOOP-613
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: reduce-get-iterator.patch, reduce-get-iterator.patch
>
>
> The final merge on the input to the reduce should use the iterators from HADOOP-611 directly rather than using a round trip to disk.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 17:51:25 2006
Return-Path: 
 <hadoop-dev-return-4901-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78613 invoked from network); 8 Nov 2006 17:51:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 17:51:25 -0000
Received: (qmail 88282 invoked by uid 500); 8 Nov 2006 17:51:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88199 invoked by uid 500); 8 Nov 2006 17:51:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88146 invoked by uid 99); 8 Nov 2006 17:51:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 09:51:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 09:51:18 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A31917142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 09:50:58 -0800 (PST)
Message-ID: <29337703.1163008258665.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 09:50:58 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12448212 ] 
            
Raghu Angadi commented on HADOOP-538:
-------------------------------------

FYI:  If a user creates a lot of such streams, it could be affected by known issue with direct buffers (see HADOOP-637). 

If there was a way in JNI to copy from java array to C array directly, we could avoid direct buffer allocation in Java and do a malloc() inside C. In fact JNI documentation says GetPrimitiveArrayCritical() does not always do a copy. 


> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 17:55:20 2006
Return-Path: 
 <hadoop-dev-return-4902-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80171 invoked from network); 8 Nov 2006 17:55:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 17:55:20 -0000
Received: (qmail 96355 invoked by uid 500); 8 Nov 2006 17:55:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96334 invoked by uid 500); 8 Nov 2006 17:55:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96318 invoked by uid 99); 8 Nov 2006 17:55:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 09:55:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 09:55:14 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E516E7142FC
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 09:54:53 -0800 (PST)
Message-ID: <5295755.1163008493935.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 09:54:53 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-496) Expose HDFS as a WebDAV store
In-Reply-To: <29112039.1156966140094.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-496?page=comments#action_12448214 ] 
            
Andrzej Bialecki  commented on HADOOP-496:
------------------------------------------

Hmm.. do you think it's easier at this point to implement this functionality from scratch, or to use your patches as a starting point?

> Expose HDFS as a WebDAV store
> -----------------------------
>
>                 Key: HADOOP-496
>                 URL: http://issues.apache.org/jira/browse/HADOOP-496
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Michel Tourn
>
> WebDAV stands for Distributed Authoring and Versioning. It is a set of extensions to the HTTP protocol that lets users collaboratively edit and manage files on a remote web server. It is often considered as a replacement for NFS or SAMBA
> HDFS (Hadoop Distributed File System) needs a friendly file system interface. DFSShell commands are unfamiliar. Instead it is more convenient for Hadoop users to use a mountable network drive. A friendly interface to HDFS will be used both for casual browsing of data and for bulk import/export. 
> The FUSE provider for HDFS is already available ( http://issues.apache.org/jira/browse/HADOOP-17 )  but it had scalability problems. WebDAV is a popular alternative. 
> The typical licensing terms for WebDAV tools are also attractive: 
> GPL for Linux client tools that Hadoop would not redistribute anyway. 
> More importantly, Apache Project/Apache license for Java tools and for server components. 
> This allows for a tighter integration with the HDFS code base.
> There are some interesting Apache projects that support WebDAV.
> But these are probably too heavyweight for the needs of Hadoop:
> Tomcat servlet: http://tomcat.apache.org/tomcat-4.1-doc/catalina/docs/api/org/apache/catalina/servlets/WebdavServlet.html
> Slide:          http://jakarta.apache.org/slide/
> Being HTTP-based and "backwards-compatible" with Web Browser clients, the WebDAV server protocol could even be piggy-backed on the existing Web UI ports of the Hadoop name node / data nodes. WebDAV can be hosted as (Jetty) servlets. This minimizes server code bloat and this avoids additional network traffic between HDFS and the WebDAV server.
> General Clients (read-only):
> Any web browser
> Linux Clients: 
> Mountable GPL davfs2  http://dav.sourceforge.net/
> FTP-like  GPL Cadaver http://www.webdav.org/cadaver/
> Server Protocol compliance tests:
> http://www.webdav.org/neon/litmus/  
> A goal is for Hadoop HDFS to pass this test (minus support for Properties)
> Pure Java clients:
> DAV Explorer Apache lic. http://www.ics.uci.edu/~webdav/	
> WebDAV also makes it convenient to add advanced features in an incremental fashion:
> file locking, access control lists, hard links, symbolic links.
> New WebDAV standards get accepted and more or less featured WebDAV clients exist.
> core              http://www.webdav.org/specs/rfc2518.html
> ACLs              http://www.webdav.org/specs/rfc3744.html
> redirects "soft links" http://greenbytes.de/tech/webdav/rfc4437.html
> BIND "hard links" http://www.webdav.org/bind/
> quota             http://tools.ietf.org/html/rfc4331

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 17:59:20 2006
Return-Path: 
 <hadoop-dev-return-4903-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82123 invoked from network); 8 Nov 2006 17:59:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 17:59:20 -0000
Received: (qmail 9678 invoked by uid 500); 8 Nov 2006 17:59:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9640 invoked by uid 500); 8 Nov 2006 17:59:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9605 invoked by uid 99); 8 Nov 2006 17:59:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 09:59:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 09:59:15 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3715D7142D2
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 09:58:55 -0800 (PST)
Message-ID: <24916970.1163008735222.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 09:58:55 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12448217 ] 
            
Owen O'Malley commented on HADOOP-538:
--------------------------------------

getPrimitiveArrayCritical has been observed to have really bad performance in some cases. Part of the problem is that you have no control over if it will copy or not. So some minor changes to the code completely thrash your performance.

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 18:15:18 2006
Return-Path: 
 <hadoop-dev-return-4904-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89171 invoked from network); 8 Nov 2006 18:15:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 18:15:18 -0000
Received: (qmail 55558 invoked by uid 500); 8 Nov 2006 18:15:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55524 invoked by uid 500); 8 Nov 2006 18:15:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55497 invoked by uid 99); 8 Nov 2006 18:15:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:15:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:15:14 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3AA9B7142FA
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 10:14:54 -0800 (PST)
Message-ID: <14825732.1163009694237.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 10:14:54 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-611?page=comments#action_12448220 ] 
            
Owen O'Malley commented on HADOOP-611:
--------------------------------------

I don't understand the ignoreSync, doSync code that you have in the the SegmentDescriptor. You should never set the sync = null on a Reader. It is done on merge outputs via writer.sync = null to keep the writer from putting in sync blocks, which wastes space since the merge outputs won't be split as map inputs. But setting sync = null on a reader shouldn't be necessary.

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: merge.patch, merge.patch, merge.patch, merge.patch
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 18:29:14 2006
Return-Path: 
 <hadoop-dev-return-4905-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94083 invoked from network); 8 Nov 2006 18:29:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 18:29:14 -0000
Received: (qmail 86852 invoked by uid 500); 8 Nov 2006 18:29:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86832 invoked by uid 500); 8 Nov 2006 18:29:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86823 invoked by uid 99); 8 Nov 2006 18:29:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:29:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:29:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ADC3E7142F8
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 10:28:51 -0800 (PST)
Message-ID: <7200454.1163010531709.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 10:28:51 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-691) Rack-aware
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Rack-aware 
-----------

                 Key: HADOOP-691
                 URL: http://issues.apache.org/jira/browse/HADOOP-691
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Hairong Kuang




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 18:31:14 2006
Return-Path: 
 <hadoop-dev-return-4906-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94929 invoked from network); 8 Nov 2006 18:31:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 18:31:14 -0000
Received: (qmail 94320 invoked by uid 500); 8 Nov 2006 18:31:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94302 invoked by uid 500); 8 Nov 2006 18:31:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94293 invoked by uid 99); 8 Nov 2006 18:31:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:31:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:31:12 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9DD907142F8
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 10:30:52 -0800 (PST)
Message-ID: <23606670.1163010652643.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 10:30:52 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Deleted: (HADOOP-691) Rack-aware
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-691?page=all ]

Hairong Kuang deleted HADOOP-691:
---------------------------------


> Rack-aware
> ----------
>
>                 Key: HADOOP-691
>                 URL: http://issues.apache.org/jira/browse/HADOOP-691
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Hairong Kuang
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 18:31:16 2006
Return-Path: 
 <hadoop-dev-return-4907-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94987 invoked from network); 8 Nov 2006 18:31:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 18:31:16 -0000
Received: (qmail 94602 invoked by uid 500); 8 Nov 2006 18:31:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94571 invoked by uid 500); 8 Nov 2006 18:31:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94562 invoked by uid 99); 8 Nov 2006 18:31:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:31:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:31:15 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 289B47142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 10:30:55 -0800 (PST)
Message-ID: <2192560.1163010655164.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 10:30:55 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-611?page=comments#action_12448226 ] 
            
Doug Cutting commented on HADOOP-611:
-------------------------------------

> It is done on merge outputs via writer.sync = null to keep the writer from putting in sync blocks

It's actually more than a space-saving measure: the syncs make the computation of length harder, and temporary outputs are length-prefixed.


> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: merge.patch, merge.patch, merge.patch, merge.patch
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 18:35:30 2006
Return-Path: 
 <hadoop-dev-return-4908-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96856 invoked from network); 8 Nov 2006 18:35:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 18:35:30 -0000
Received: (qmail 6757 invoked by uid 500); 8 Nov 2006 18:35:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6728 invoked by uid 500); 8 Nov 2006 18:35:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6700 invoked by uid 99); 8 Nov 2006 18:35:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:35:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:35:14 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 883AF7142FA
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 10:34:54 -0800 (PST)
Message-ID: <3156958.1163010894555.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 10:34:54 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Arun C Murthy updated HADOOP-538:
---------------------------------

    Attachment: HADOOP-538_20061108.tgz

Here is another patch incorporating all of Owen's comments for review...

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_20061108.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 18:51:15 2006
Return-Path: 
 <hadoop-dev-return-4909-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2707 invoked from network); 8 Nov 2006 18:51:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 18:51:15 -0000
Received: (qmail 50041 invoked by uid 500); 8 Nov 2006 18:51:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50009 invoked by uid 500); 8 Nov 2006 18:51:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50000 invoked by uid 99); 8 Nov 2006 18:51:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:51:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:51:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 77B167142FC
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 10:50:53 -0800 (PST)
Message-ID: <5324842.1163011853487.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 10:50:53 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-692) Rack-aware Replica Placement
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Rack-aware Replica Placement
----------------------------

                 Key: HADOOP-692
                 URL: http://issues.apache.org/jira/browse/HADOOP-692
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
    Affects Versions: 0.8.0
            Reporter: Hairong Kuang
         Assigned To: Hairong Kuang
             Fix For: 0.9.0


This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 18:59:14 2006
Return-Path: 
 <hadoop-dev-return-4910-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5459 invoked from network); 8 Nov 2006 18:59:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 18:59:14 -0000
Received: (qmail 61938 invoked by uid 500); 8 Nov 2006 18:59:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61915 invoked by uid 500); 8 Nov 2006 18:59:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61906 invoked by uid 99); 8 Nov 2006 18:59:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:59:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:59:12 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4A9417142F8
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 10:58:52 -0800 (PST)
Message-ID: <6704945.1163012332302.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 10:58:52 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-693) JobClient can be constructed without
 initializing object state
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

JobClient can be constructed without initializing object state
--------------------------------------------------------------

                 Key: HADOOP-693
                 URL: http://issues.apache.org/jira/browse/HADOOP-693
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.8.0
            Reporter: Nigel Daley


The JobClient class has a no-arg constructor that does nothing.  This leaves critical object state uninitialized.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 19:07:16 2006
Return-Path: 
 <hadoop-dev-return-4911-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7324 invoked from network); 8 Nov 2006 19:07:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 19:07:16 -0000
Received: (qmail 80889 invoked by uid 500); 8 Nov 2006 19:07:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80847 invoked by uid 500); 8 Nov 2006 19:07:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80838 invoked by uid 99); 8 Nov 2006 19:07:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 11:07:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 11:07:15 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0A5527142F8
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 11:06:55 -0800 (PST)
Message-ID: <29431508.1163012815039.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 11:06:55 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12448232 ] 
            
Arun C Murthy commented on HADOOP-538:
--------------------------------------

Forgot to mention: please 
$ cd lib/native/prebuilt/Linux-i386-32
$ tar -xzvf ~/linux-libraries.tgz

before running ant tasks on this patch... thanks!

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_20061108.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 19:15:27 2006
Return-Path: 
 <hadoop-dev-return-4912-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8778 invoked from network); 8 Nov 2006 19:15:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 19:15:27 -0000
Received: (qmail 93288 invoked by uid 500); 8 Nov 2006 19:15:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93251 invoked by uid 500); 8 Nov 2006 19:15:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93221 invoked by uid 99); 8 Nov 2006 19:15:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 11:15:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 11:15:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B01E4714314
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 11:15:04 -0800 (PST)
Message-ID: <33233884.1163013304716.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 11:15:04 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-694) jobtracker expireluanching tasks
 throws out Nullpointer exceptions
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

jobtracker expireluanching tasks throws out Nullpointer exceptions
------------------------------------------------------------------

                 Key: HADOOP-694
                 URL: http://issues.apache.org/jira/browse/HADOOP-694
             Project: Hadoop
          Issue Type: Bug
            Reporter: Mahadev konar
         Assigned To: Mahadev konar
            Priority: Minor


This happens when a tasktracker has been expired and this thread tries to call failedTask. The tasktrackerStatus becomes null and this thread throws out nullpointerexceptions.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 19:17:20 2006
Return-Path: 
 <hadoop-dev-return-4913-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10083 invoked from network); 8 Nov 2006 19:17:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 19:17:20 -0000
Received: (qmail 97389 invoked by uid 500); 8 Nov 2006 19:17:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97369 invoked by uid 500); 8 Nov 2006 19:17:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97357 invoked by uid 99); 8 Nov 2006 19:17:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 11:17:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 11:17:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BABF97142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 11:16:52 -0800 (PST)
Message-ID: <11247021.1163013412762.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 11:16:52 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-694) jobtracker expireluanching tasks
 throws out Nullpointer exceptions
In-Reply-To: <33233884.1163013304716.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-694?page=all ]

Mahadev konar updated HADOOP-694:
---------------------------------

    Attachment: taskexpire.patch

This patch checks to see if the tasktracker status is null or not before calling taskfailed.

> jobtracker expireluanching tasks throws out Nullpointer exceptions
> ------------------------------------------------------------------
>
>                 Key: HADOOP-694
>                 URL: http://issues.apache.org/jira/browse/HADOOP-694
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>         Attachments: taskexpire.patch
>
>
> This happens when a tasktracker has been expired and this thread tries to call failedTask. The tasktrackerStatus becomes null and this thread throws out nullpointerexceptions.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 19:17:20 2006
Return-Path: 
 <hadoop-dev-return-4914-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10092 invoked from network); 8 Nov 2006 19:17:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 19:17:20 -0000
Received: (qmail 97440 invoked by uid 500); 8 Nov 2006 19:17:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97415 invoked by uid 500); 8 Nov 2006 19:17:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97401 invoked by uid 99); 8 Nov 2006 19:17:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 11:17:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 11:17:14 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0EF0F7142F8
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 11:16:54 -0800 (PST)
Message-ID: <29250720.1163013414058.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 11:16:54 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-694) jobtracker expireluanching tasks
 throws out Nullpointer exceptions
In-Reply-To: <33233884.1163013304716.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-694?page=all ]

Mahadev konar updated HADOOP-694:
---------------------------------

    Status: Patch Available  (was: Open)

> jobtracker expireluanching tasks throws out Nullpointer exceptions
> ------------------------------------------------------------------
>
>                 Key: HADOOP-694
>                 URL: http://issues.apache.org/jira/browse/HADOOP-694
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>         Attachments: taskexpire.patch
>
>
> This happens when a tasktracker has been expired and this thread tries to call failedTask. The tasktrackerStatus becomes null and this thread throws out nullpointerexceptions.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 19:41:15 2006
Return-Path: 
 <hadoop-dev-return-4915-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19578 invoked from network); 8 Nov 2006 19:41:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 19:41:15 -0000
Received: (qmail 44070 invoked by uid 500); 8 Nov 2006 19:41:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44038 invoked by uid 500); 8 Nov 2006 19:41:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44029 invoked by uid 99); 8 Nov 2006 19:41:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 11:41:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 11:41:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3E28F7142F8
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 11:40:53 -0800 (PST)
Message-ID: <14076381.1163014853252.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 11:40:53 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-692?page=3Dcomments#actio=
n_12448244 ]=20
           =20
Hairong Kuang commented on HADOOP-692:
--------------------------------------

I plan to address the issue from three areas:

* Determine rack id
=20
Each data node gets its rack id from the command line. Data node supports a=
n option "-r <rack id>" or "=E2=80=94rack <rack id>". A rack id is a unique=
 string representation of the rack that the data node belongs to. It usuall=
y consists of a name/ip plus its port number of the switch to which the dat=
a node directly connects. If the option is not set, the data node belongs t=
o a default rack.

How to get the rack id is proprietary to each organization. So a mechanism =
needs to be provided when starting HDFS, for example, a script which prints=
 the rack id on the screen. The output is feed to a data node when it start=
s.=20

The rack id is then stored in DatanodeID  and sent to the name node as part=
 of the registration information.

* Maintain rackid-to-datanodes map

A name node maintains a rack id to data node descriptors map that maps a ra=
ck id to a list of data nodes that belong to the rack. When the name node r=
eceives a registration message from a data node, it first check if the map =
already has an entry for the data node. If yes, it removes the old entry. I=
t then adds a new entry. When the name node removes a data node, the data n=
ode entry in the map is also removed.

If all data nodes start without providing a rack id, the map contains one d=
efault rack id mapping to all the data nodes in the system. So HDFS will be=
have the same as it is now.

* Place replicas

A simple policy is to place replicas across racks. This prevents losing dat=
a when an entire rack fails and allows to make use of bandwidth from multip=
le racks when read a file. This policy evenly distribution of replicas in t=
he cluster and thus makes it easy to balance load when a map/reduce job wit=
h the data as input is scheduled to run. However, the cost of the policy is=
 the write expense that a block needs to write to multiple racks. One minor=
 optimization is to place the one replica in the local node, where the writ=
er is located. If not, place it in a different node at the local rack.

For the most common case when the replica factor is three,  another possibl=
e placement policy is to place one replica in the local node, place one in =
a different node at the local rack, and place one at a different rack. This=
 policy cuts the out-of-rack write traffic and hence improves write perform=
ance. Because the chance of rack failure is far less than that of node fail=
ure, it does not effect the data reliability and availability much. But it =
reduces the aggregate bandwidth of network bandwith when read a file since =
now a block is placed in two racks rather than three. The replicas of a fil=
e do not evenly distribute across the racks evenly. One third is at one nod=
e, two thirds are on one rack, the other one third  is evenly distributed. =
But a map/reduce job still gets a chance to balance its load because each b=
lock has one replica that is placed in a random rack. Overall I feel that t=
his placement policy has a good trade-off. It greatly improves write perfor=
mance while not at a great cost of data reliability or read performance.=20

> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread a=
cross many racks. Communication between two nodes on different racks needs =
to go through switches. Bandwidth in/out of a rack may be less than the tot=
al bandwidth of machines in the rack. The purpose of rack-aware replica pla=
cement is to improve data reliability, availability, and network bandwidth =
utilization. The basic idea is that each data node determines to which rack=
 it belongs at the startup time and notifies the name node of the rack id u=
pon registration. The name node maintains a rackid-to-datanode map and trie=
s to place replicas across racks.

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Wed Nov  8 19:57:37 2006
Return-Path: 
 <hadoop-dev-return-4916-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26476 invoked from network); 8 Nov 2006 19:57:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 19:57:37 -0000
Received: (qmail 75668 invoked by uid 500); 8 Nov 2006 19:57:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75638 invoked by uid 500); 8 Nov 2006 19:57:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75599 invoked by uid 99); 8 Nov 2006 19:57:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 11:57:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 11:57:21 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 181F971430F
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 11:56:56 -0800 (PST)
Message-ID: <30454714.1163015816096.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 11:56:56 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-489) Seperating user logs from system logs
 in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-489?page=all ]

Arun C Murthy updated HADOOP-489:
---------------------------------

    Attachment: HADOOP-489_20061109.patch

Attached latest patch incorporating Owen's comments...

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-489_20061019.patch, HADOOP-489_20061101.patch, HADOOP-489_20061102.patch, HADOOP-489_20061107.patch, HADOOP-489_20061109.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 20:07:14 2006
Return-Path: 
 <hadoop-dev-return-4917-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29534 invoked from network); 8 Nov 2006 20:07:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 20:07:14 -0000
Received: (qmail 94687 invoked by uid 500); 8 Nov 2006 20:07:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94463 invoked by uid 500); 8 Nov 2006 20:07:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94454 invoked by uid 99); 8 Nov 2006 20:07:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 12:07:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 12:07:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2C1EE71430F
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 12:06:53 -0800 (PST)
Message-ID: <15141663.1163016413178.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 12:06:53 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-657) Free temporary space should be
 modelled better
In-Reply-To: <11001957.1162254376612.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-657?page=all ]

Arun C Murthy reassigned HADOOP-657:
------------------------------------

    Assignee: Arun C Murthy  (was: Owen O'Malley)

> Free temporary space should be modelled better
> ----------------------------------------------
>
>                 Key: HADOOP-657
>                 URL: http://issues.apache.org/jira/browse/HADOOP-657
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>
> Currently, there is a configurable size that must be free for a task tracker to accept a new task. However, that isn't a very good model of what the task is likely to take. I'd like to propose:
> Map tasks:  totalInputSize * conf.getFloat("map.output.growth.factor", 1.0) / numMaps
> Reduce tasks: totalInputSize * 2 * conf.getFloat("map.output.growth.factor", 1.0) / numReduces
> where totalInputSize is the size of all the maps inputs for the given job.
> To start a new task, 
>   newTaskAllocation + (sum over running tasks of (1.0 - done) * allocation) >= 
>        free disk * conf.getFloat("mapred.max.scratch.allocation", 0.90);
> So in English, we will model the expected sizes of tasks and only task tasks that should leave us a 10% margin. With:
> map.output.growth.factor -- the relative size of the transient data relative to the map inputs
> mapred.max.scratch.allocation -- the maximum amount of our disk we want to allocate to tasks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 20:09:25 2006
Return-Path: 
 <hadoop-dev-return-4918-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30940 invoked from network); 8 Nov 2006 20:09:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 20:09:25 -0000
Received: (qmail 96963 invoked by uid 500); 8 Nov 2006 20:09:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96941 invoked by uid 500); 8 Nov 2006 20:09:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96932 invoked by uid 99); 8 Nov 2006 20:09:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 12:09:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 12:09:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 94EBE7142FC
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 12:09:02 -0800 (PST)
Message-ID: <8606103.1163016542607.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 12:09:02 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-657) Free temporary space should be
 modelled better
In-Reply-To: <11001957.1162254376612.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-657?page=comments#action_12448251 ] 
            
Arun C Murthy commented on HADOOP-657:
--------------------------------------

Looks like Owen's got it nailed pretty good... anyone wants to shout on this one?

What do you guys think is a reasonable default for "map.output.growth.factor" ? 1.0? Do we need more leeway?

> Free temporary space should be modelled better
> ----------------------------------------------
>
>                 Key: HADOOP-657
>                 URL: http://issues.apache.org/jira/browse/HADOOP-657
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>
> Currently, there is a configurable size that must be free for a task tracker to accept a new task. However, that isn't a very good model of what the task is likely to take. I'd like to propose:
> Map tasks:  totalInputSize * conf.getFloat("map.output.growth.factor", 1.0) / numMaps
> Reduce tasks: totalInputSize * 2 * conf.getFloat("map.output.growth.factor", 1.0) / numReduces
> where totalInputSize is the size of all the maps inputs for the given job.
> To start a new task, 
>   newTaskAllocation + (sum over running tasks of (1.0 - done) * allocation) >= 
>        free disk * conf.getFloat("mapred.max.scratch.allocation", 0.90);
> So in English, we will model the expected sizes of tasks and only task tasks that should leave us a 10% margin. With:
> map.output.growth.factor -- the relative size of the transient data relative to the map inputs
> mapred.max.scratch.allocation -- the maximum amount of our disk we want to allocate to tasks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 20:11:14 2006
Return-Path: 
 <hadoop-dev-return-4919-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31162 invoked from network); 8 Nov 2006 20:11:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 20:11:14 -0000
Received: (qmail 97849 invoked by uid 500); 8 Nov 2006 20:11:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97821 invoked by uid 500); 8 Nov 2006 20:11:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97812 invoked by uid 99); 8 Nov 2006 20:11:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 12:11:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 12:11:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 064787142FC
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 12:10:53 -0800 (PST)
Message-ID: <20567907.1163016653023.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 12:10:53 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-692?page=comments#action_12448252 ] 
            
Doug Cutting commented on HADOOP-692:
-------------------------------------

Should we think about super-rack locality at this point?  For example, Amazon EC2 can allocate nodes in a cluster across multiple datacenters, or at least a few network hops away.  This is obviously not an optimal configuration (although, in my 20-node benchmarks, it didn't slow things noticably).  Should we try to support things like this now?

http://developer.amazonwebservices.com/connect/thread.jspa?threadID=11615

Network hops would be one way to measure things.  Localhost is zero hops, same rack is one, different rack in the same datacenter is two, and so on.  This could be repressented by a list of ids per node (host, rack, datacenter, ...).




> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 20:17:15 2006
Return-Path: 
 <hadoop-dev-return-4920-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32448 invoked from network); 8 Nov 2006 20:17:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 20:17:15 -0000
Received: (qmail 5550 invoked by uid 500); 8 Nov 2006 20:17:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5423 invoked by uid 500); 8 Nov 2006 20:17:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5414 invoked by uid 99); 8 Nov 2006 20:17:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 12:17:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 12:17:14 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BF1A97142FC
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 12:16:53 -0800 (PST)
Message-ID: <29281963.1163017013780.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 12:16:53 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-687) Upgrade to Jetty 6 does not patch
 bin/hadoop
In-Reply-To: <19101684.1162943572996.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-687?page=all ]

Doug Cutting updated HADOOP-687:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

Owen committed this yesterday.  Thanks, Sameer!

> Upgrade to Jetty 6 does not patch bin/hadoop
> --------------------------------------------
>
>                 Key: HADOOP-687
>                 URL: http://issues.apache.org/jira/browse/HADOOP-687
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>            Reporter: Sameer Paranjpye
>         Assigned To: Sameer Paranjpye
>            Priority: Critical
>             Fix For: 0.9.0
>
>         Attachments: jetty_6_fix.txt
>
>
> The upgrade to jetty 6 does not fix 'bin/hadoop' to include new jars. The directory 'lib/hadoop/jetty-ext' has been replaced by 'lib/hadoop/jsp-2.0' however 'bin/hadoop' does not include the jars in the new directory in CLASSPATH. As a result, tasktrackers and namenodes fail to launch.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 20:37:16 2006
Return-Path: 
 <hadoop-dev-return-4921-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47278 invoked from network); 8 Nov 2006 20:37:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 20:37:16 -0000
Received: (qmail 37965 invoked by uid 500); 8 Nov 2006 20:37:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37940 invoked by uid 500); 8 Nov 2006 20:37:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37931 invoked by uid 99); 8 Nov 2006 20:37:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 12:37:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 12:37:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DAED37142F8
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 12:36:53 -0800 (PST)
Message-ID: <26934944.1163018213894.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 12:36:53 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-683) bin/hadoop.sh doesn't work for
 /bin/dash (eg ubuntu 6.10b)
In-Reply-To: <26505610.1162860697079.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-683?page=all ]

Doug Cutting resolved HADOOP-683.
---------------------------------

    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, James!

> bin/hadoop.sh doesn't work for /bin/dash (eg ubuntu 6.10b)
> ----------------------------------------------------------
>
>                 Key: HADOOP-683
>                 URL: http://issues.apache.org/jira/browse/HADOOP-683
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>         Environment: osx, ubuntu 6.10b
>            Reporter: James Todd
>            Priority: Trivial
>             Fix For: 0.9.0
>
>
> bin/hadoop.sh has a conditional which doesn't work with /bin/dash which ubuntu 6.10b symlinks to /bin/sh.
> here's a trivial patch that works for me:
> Index: bin/hadoop-daemon.sh
> ===================================================================
> --- bin/hadoop-daemon.sh        (revision 468719)
> +++ bin/hadoop-daemon.sh        (working copy)
> @@ -56,7 +56,7 @@
>  pid=$HADOOP_PID_DIR/hadoop-$HADOOP_IDENT_STRING-$command.pid
>  
>  # Set default scheduling priority
> -if [ "$HADOOP_NICENESS" == "" ]; then
> +if [ "$HADOOP_NICENESS" = "" ]; then
>      export HADOOP_NICENESS=0
>  fi

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 20:57:21 2006
Return-Path: 
 <hadoop-dev-return-4922-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57072 invoked from network); 8 Nov 2006 20:57:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 20:57:21 -0000
Received: (qmail 78033 invoked by uid 500); 8 Nov 2006 20:57:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78004 invoked by uid 500); 8 Nov 2006 20:57:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77995 invoked by uid 99); 8 Nov 2006 20:57:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 12:57:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 12:57:19 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AC197714312
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 12:56:59 -0800 (PST)
Message-ID: <3337753.1163019419701.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 12:56:59 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-76?page=comments#action_12448268 ] 
            
Doug Cutting commented on HADOOP-76:
------------------------------------

> it would be nice if FileSystem was an interface [ ...]

Sometimes that would be nice, and sometimes it would not be.  The FileSystem API has evolved considerably without breaking back-compatibility.  That's harder to do with an interface.


> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 20:59:17 2006
Return-Path: 
 <hadoop-dev-return-4923-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57494 invoked from network); 8 Nov 2006 20:59:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 20:59:17 -0000
Received: (qmail 81151 invoked by uid 500); 8 Nov 2006 20:59:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81125 invoked by uid 500); 8 Nov 2006 20:59:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81116 invoked by uid 99); 8 Nov 2006 20:59:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 12:59:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 12:59:16 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 630297142FC
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 12:58:56 -0800 (PST)
Message-ID: <25663097.1163019536402.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 12:58:56 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-637) ipc.Server has memory leak -- serious
 issue for namenode server
In-Reply-To: <3722659.1161801316587.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-637?page=all ]

Raghu Angadi updated HADOOP-637:
--------------------------------

    Attachment: directbuffers.patch


directbuffers.patch is attatched. It fixes both issues mentioned in second comment above.


> ipc.Server has memory leak -- serious issue for namenode server
> ---------------------------------------------------------------
>
>                 Key: HADOOP-637
>                 URL: http://issues.apache.org/jira/browse/HADOOP-637
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.7.1
>            Reporter: Christian Kunz
>         Assigned To: Raghu Angadi
>         Attachments: directbuffers.patch
>
>
> In my environment (running a lot of batch processes each of which reads, creates, and deletes a lof of  files in dfs) the namenode server can run out of memory rather quickly (in a few hours on a 150 node cluster). The netbeans profiler shows an increasing number of direct byte buffers not garbage collected. The documentation on java.nio.ByteBuffer indicates that their allocation might (and obviously does) happen outside the normal gc-collected heap, and, therefore, it is required that direct byte buffers should only be used for long-lived objects.
> ipc.Server seems to use a 4KB direct byte buffer for every connection, but, worse, for every RPC call. If I replace the latter ones with non-direct byte buffers, the memory footprint of the namenode server increases only slowly, but even then it is just a matter of time (since I started it 24 hours ago, it leaked by about 300-400MB). If the performance increase by using direct buffers is a requirement, I would suggest to use a static pool.
> Although my environment abuses the namenode server in unusual manner, I would imagine that the memory footprint of the namenode server creeps up slowly everywhere

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 20:59:21 2006
Return-Path: 
 <hadoop-dev-return-4924-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57546 invoked from network); 8 Nov 2006 20:59:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 20:59:21 -0000
Received: (qmail 81420 invoked by uid 500); 8 Nov 2006 20:59:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81399 invoked by uid 500); 8 Nov 2006 20:59:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81390 invoked by uid 99); 8 Nov 2006 20:59:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 12:59:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 12:59:20 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E58BF7142F8
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 12:58:59 -0800 (PST)
Message-ID: <28839224.1163019539937.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 12:58:59 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-637) ipc.Server has memory leak -- serious
 issue for namenode server
In-Reply-To: <3722659.1161801316587.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-637?page=all ]

Raghu Angadi updated HADOOP-637:
--------------------------------

    Status: Patch Available  (was: Open)

> ipc.Server has memory leak -- serious issue for namenode server
> ---------------------------------------------------------------
>
>                 Key: HADOOP-637
>                 URL: http://issues.apache.org/jira/browse/HADOOP-637
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.7.1
>            Reporter: Christian Kunz
>         Assigned To: Raghu Angadi
>         Attachments: directbuffers.patch
>
>
> In my environment (running a lot of batch processes each of which reads, creates, and deletes a lof of  files in dfs) the namenode server can run out of memory rather quickly (in a few hours on a 150 node cluster). The netbeans profiler shows an increasing number of direct byte buffers not garbage collected. The documentation on java.nio.ByteBuffer indicates that their allocation might (and obviously does) happen outside the normal gc-collected heap, and, therefore, it is required that direct byte buffers should only be used for long-lived objects.
> ipc.Server seems to use a 4KB direct byte buffer for every connection, but, worse, for every RPC call. If I replace the latter ones with non-direct byte buffers, the memory footprint of the namenode server increases only slowly, but even then it is just a matter of time (since I started it 24 hours ago, it leaked by about 300-400MB). If the performance increase by using direct buffers is a requirement, I would suggest to use a static pool.
> Although my environment abuses the namenode server in unusual manner, I would imagine that the memory footprint of the namenode server creeps up slowly everywhere

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 21:01:16 2006
Return-Path: 
 <hadoop-dev-return-4925-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57985 invoked from network); 8 Nov 2006 21:01:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 21:01:16 -0000
Received: (qmail 83357 invoked by uid 500); 8 Nov 2006 21:01:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83334 invoked by uid 500); 8 Nov 2006 21:01:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83322 invoked by uid 99); 8 Nov 2006 21:01:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 13:01:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 13:01:15 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2571271430F
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 13:00:55 -0800 (PST)
Message-ID: <22786888.1163019655151.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 13:00:55 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-496) Expose HDFS as a WebDAV store
In-Reply-To: <29112039.1156966140094.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-496?page=comments#action_12448272 ] 
            
Doug Cutting commented on HADOOP-496:
-------------------------------------

FYI, Michel's moved on and is no longer contributing to Hadoop.

Is there any chance that we can get his WebDAV code posted as a patch, even if it's incomplete?


> Expose HDFS as a WebDAV store
> -----------------------------
>
>                 Key: HADOOP-496
>                 URL: http://issues.apache.org/jira/browse/HADOOP-496
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Michel Tourn
>
> WebDAV stands for Distributed Authoring and Versioning. It is a set of extensions to the HTTP protocol that lets users collaboratively edit and manage files on a remote web server. It is often considered as a replacement for NFS or SAMBA
> HDFS (Hadoop Distributed File System) needs a friendly file system interface. DFSShell commands are unfamiliar. Instead it is more convenient for Hadoop users to use a mountable network drive. A friendly interface to HDFS will be used both for casual browsing of data and for bulk import/export. 
> The FUSE provider for HDFS is already available ( http://issues.apache.org/jira/browse/HADOOP-17 )  but it had scalability problems. WebDAV is a popular alternative. 
> The typical licensing terms for WebDAV tools are also attractive: 
> GPL for Linux client tools that Hadoop would not redistribute anyway. 
> More importantly, Apache Project/Apache license for Java tools and for server components. 
> This allows for a tighter integration with the HDFS code base.
> There are some interesting Apache projects that support WebDAV.
> But these are probably too heavyweight for the needs of Hadoop:
> Tomcat servlet: http://tomcat.apache.org/tomcat-4.1-doc/catalina/docs/api/org/apache/catalina/servlets/WebdavServlet.html
> Slide:          http://jakarta.apache.org/slide/
> Being HTTP-based and "backwards-compatible" with Web Browser clients, the WebDAV server protocol could even be piggy-backed on the existing Web UI ports of the Hadoop name node / data nodes. WebDAV can be hosted as (Jetty) servlets. This minimizes server code bloat and this avoids additional network traffic between HDFS and the WebDAV server.
> General Clients (read-only):
> Any web browser
> Linux Clients: 
> Mountable GPL davfs2  http://dav.sourceforge.net/
> FTP-like  GPL Cadaver http://www.webdav.org/cadaver/
> Server Protocol compliance tests:
> http://www.webdav.org/neon/litmus/  
> A goal is for Hadoop HDFS to pass this test (minus support for Properties)
> Pure Java clients:
> DAV Explorer Apache lic. http://www.ics.uci.edu/~webdav/	
> WebDAV also makes it convenient to add advanced features in an incremental fashion:
> file locking, access control lists, hard links, symbolic links.
> New WebDAV standards get accepted and more or less featured WebDAV clients exist.
> core              http://www.webdav.org/specs/rfc2518.html
> ACLs              http://www.webdav.org/specs/rfc3744.html
> redirects "soft links" http://greenbytes.de/tech/webdav/rfc4437.html
> BIND "hard links" http://www.webdav.org/bind/
> quota             http://tools.ietf.org/html/rfc4331

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 21:05:16 2006
Return-Path: 
 <hadoop-dev-return-4926-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59374 invoked from network); 8 Nov 2006 21:05:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 21:05:16 -0000
Received: (qmail 90094 invoked by uid 500); 8 Nov 2006 21:05:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90068 invoked by uid 500); 8 Nov 2006 21:05:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90059 invoked by uid 99); 8 Nov 2006 21:05:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 13:05:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 13:05:14 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7178A714314
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 13:04:53 -0800 (PST)
Message-ID: <10122448.1163019893462.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 13:04:53 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-689) hadoop should provide a common way to
 wrap instances with different types into one type
In-Reply-To: <2487900.1162955810892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-689?page=all ]

Doug Cutting updated HADOOP-689:
--------------------------------

    Status: Patch Available  (was: Open)

> hadoop should provide a common way to wrap instances with different types into one type
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-689
>                 URL: http://issues.apache.org/jira/browse/HADOOP-689
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>         Environment: All environment
>            Reporter: Feng Jiang
>         Attachments: HADOOP-689.patch
>
>
> When two sequence files, which have same Key type but different Value types, are mapped out to reduce, multiple Value types is not allowed. In this case, we need a way to wrap instances with different types into one class type to reduce.
> In current code, ObjectWritable is a sole choice. but it costs too many space, because the class declaration will be appended into output file as a string for every Key-value pair.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 21:07:54 2006
Return-Path: 
 <hadoop-dev-return-4927-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60286 invoked from network); 8 Nov 2006 21:07:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 21:07:54 -0000
Received: (qmail 94668 invoked by uid 500); 8 Nov 2006 21:08:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94639 invoked by uid 500); 8 Nov 2006 21:08:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94630 invoked by uid 99); 8 Nov 2006 21:08:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 13:08:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of james.w.todd@gmail.com
 designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO nz-out-0102.google.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 13:07:51 -0800
Received: by nz-out-0102.google.com with SMTP id k1so6519nzf
        for <hadoop-dev@lucene.apache.org>;
 Wed, 08 Nov 2006 13:07:31 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=e1fqrQzzw1J54RFhWGVoczP8Piv0VKq8GJPfDk9X5UgffetLlK+QkjRwsE5jELQ/pdyWrzPCQcLxwgBSJoWXbqmr3K7TY55wNP0FZFrZQ/RwF4bx/0zmjjIdAm2cMmuvfCwXyvhntuHuwqA2hTRR3pCZnHuJ0g5magk85+QGTFo=
Received: by 10.35.103.1 with SMTP id f1mr154300pym.1163020050814;
        Wed, 08 Nov 2006 13:07:30 -0800 (PST)
Received: by 10.35.89.11 with HTTP; Wed, 8 Nov 2006 13:07:30 -0800 (PST)
Message-ID: <b0ff1e2d0611081307l79d3dbbfn812122258999477c@mail.gmail.com>
Date: Wed, 8 Nov 2006 13:07:30 -0800
From: "James Todd" <james.w.todd@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Resolved: (HADOOP-683) bin/hadoop.sh doesn't work for
 /bin/dash (eg ubuntu 6.10b)
In-Reply-To: <26934944.1163018213894.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_27480_29479541.1163020050739"
References: <26505610.1162860697079.JavaMail.jira@brutus>
	 <26934944.1163018213894.JavaMail.jira@brutus>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27480_29479541.1163020050739
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

yeah ... this patch kept me up all night ;)

looking to get more involved. our little proto is off the ground now and i'm
impressed.

thx for *everything*

- james

On 11/8/06, Doug Cutting (JIRA) <jira@apache.org> wrote:
>
>      [ http://issues.apache.org/jira/browse/HADOOP-683?page=all ]
>
> Doug Cutting resolved HADOOP-683.
> ---------------------------------
>
>     Fix Version/s: 0.9.0
>        Resolution: Fixed
>
> I just committed this.  Thanks, James!
>
> > bin/hadoop.sh doesn't work for /bin/dash (eg ubuntu 6.10b)
> > ----------------------------------------------------------
> >
> >                 Key: HADOOP-683
> >                 URL: http://issues.apache.org/jira/browse/HADOOP-683
> >             Project: Hadoop
> >          Issue Type: Bug
> >          Components: scripts
> >         Environment: osx, ubuntu 6.10b
> >            Reporter: James Todd
> >            Priority: Trivial
> >             Fix For: 0.9.0
> >
> >
> > bin/hadoop.sh has a conditional which doesn't work with /bin/dash which
> ubuntu 6.10b symlinks to /bin/sh.
> > here's a trivial patch that works for me:
> > Index: bin/hadoop-daemon.sh
> > ===================================================================
> > --- bin/hadoop-daemon.sh        (revision 468719)
> > +++ bin/hadoop-daemon.sh        (working copy)
> > @@ -56,7 +56,7 @@
> >  pid=$HADOOP_PID_DIR/hadoop-$HADOOP_IDENT_STRING-$command.pid
> >
> >  # Set default scheduling priority
> > -if [ "$HADOOP_NICENESS" == "" ]; then
> > +if [ "$HADOOP_NICENESS" = "" ]; then
> >      export HADOOP_NICENESS=0
> >  fi
>
> --
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the administrators:
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/software/jira
>
>
>

------=_Part_27480_29479541.1163020050739--

From MAILER-DAEMON Wed Nov  8 21:35:13 2006
Return-Path: 
 <hadoop-dev-return-4928-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71213 invoked from network); 8 Nov 2006 21:35:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 21:35:13 -0000
Received: (qmail 43760 invoked by uid 500); 8 Nov 2006 21:35:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43736 invoked by uid 500); 8 Nov 2006 21:35:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43727 invoked by uid 99); 8 Nov 2006 21:35:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 13:35:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 13:35:11 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 990CC7142D2
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 13:34:51 -0800 (PST)
Message-ID: <28355572.1163021691623.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 13:34:51 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-695) Unexpected NPE from the next method of
 StreamLineRecordReader fails map/reduce jobs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Unexpected NPE from the next method of StreamLineRecordReader fails map/reduce jobs
-----------------------------------------------------------------------------------

                 Key: HADOOP-695
                 URL: http://issues.apache.org/jira/browse/HADOOP-695
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
    Affects Versions: 0.8.0
            Reporter: Hairong Kuang
         Assigned To: Hairong Kuang
             Fix For: 0.8.1


For some reason that I do not have much idea, if input of a map/reduce job is gzipped, an unexpected null pointer may be returned from UTF8ByteArrayUtils.readline in the next method of StreamLineRecordReader. However the pointer is read before a null pointer check is performed. Thus a NPE may be thrown and fail the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 21:37:15 2006
Return-Path: 
 <hadoop-dev-return-4929-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72190 invoked from network); 8 Nov 2006 21:37:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 21:37:15 -0000
Received: (qmail 49944 invoked by uid 500); 8 Nov 2006 21:37:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49904 invoked by uid 500); 8 Nov 2006 21:37:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49895 invoked by uid 99); 8 Nov 2006 21:37:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 13:37:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 13:37:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5F6C07142CD
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 13:36:53 -0800 (PST)
Message-ID: <15880501.1163021813388.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 13:36:53 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-382) add a unit test for multiple datanodes
 in a machine
In-Reply-To: <30840044.1153766474463.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-382?page=all ]

Doug Cutting updated HADOOP-382:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Milind!

> add a unit test for multiple datanodes in a machine
> ---------------------------------------------------
>
>                 Key: HADOOP-382
>                 URL: http://issues.apache.org/jira/browse/HADOOP-382
>             Project: Hadoop
>          Issue Type: Test
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Yoram Arnon
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: multi-dn-test.patch
>
>
> recently we saw a bug present itself only when multiple data nodes are started on a single machine.
> A unit test that starts multiple data nodes would expose such bugs before they happen in a real installation.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 21:45:16 2006
Return-Path: 
 <hadoop-dev-return-4930-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75103 invoked from network); 8 Nov 2006 21:45:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 21:45:16 -0000
Received: (qmail 63407 invoked by uid 500); 8 Nov 2006 21:45:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63319 invoked by uid 500); 8 Nov 2006 21:45:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63310 invoked by uid 99); 8 Nov 2006 21:45:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 13:45:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 13:45:15 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A4D617142D2
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 13:44:54 -0800 (PST)
Message-ID: <22510706.1163022294672.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 13:44:54 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Reopened: (HADOOP-645) Map-reduce task does not finish
 correctly when -reducer NONE is specified
In-Reply-To: <18535487.1161894916590.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-645?page=all ]

dhruba borthakur reopened HADOOP-645:
-------------------------------------

             
This issue is not completely fixed. My fix improves the situation but does not solve all of the issues reported:

it is completely broken --
(a) the task fails       ---  THIS PART IS FIXED BY MY PREVIOUS PATCH
(b) a file is create for the output instead of a directory.
(c) there is no way to understand what is going on from the client output

I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem

> Map-reduce task does not finish correctly when -reducer NONE is specified
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-645
>                 URL: http://issues.apache.org/jira/browse/HADOOP-645
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>             Fix For: 0.9.0
>
>         Attachments: reducernone.patch
>
>
> Map-reduce task does not finish correctly when -reducer NONE is specified, The NONE option means that the reducer should not be generating any output. Using this option causes an exception in the task tracker:
> java.lang.IllegalArgumentException: URI is not hierarchical
> TaskRunner: at java.io.File.<init>(File.java:335)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:583)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:96)
> TaskRunner: at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:49)
> TaskRunner: at org.apache.hadoop.mapred.MapTask.run(MapTask.java:213)
> TaskRunner: at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1240)
> TaskRunner: sideEffectURI_ file:output length 11

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 22:13:14 2006
Return-Path: 
 <hadoop-dev-return-4931-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82465 invoked from network); 8 Nov 2006 22:13:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 22:13:14 -0000
Received: (qmail 25006 invoked by uid 500); 8 Nov 2006 22:13:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24985 invoked by uid 500); 8 Nov 2006 22:13:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24975 invoked by uid 99); 8 Nov 2006 22:13:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 14:13:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 14:13:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 217897142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 14:12:53 -0800 (PST)
Message-ID: <413340.1163023973134.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 14:12:53 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-695) Unexpected NPE from the next method of
 StreamLineRecordReader fails map/reduce jobs
In-Reply-To: <28355572.1163021691623.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-695?page=all ]

Hairong Kuang updated HADOOP-695:
---------------------------------

    Attachment: NPE.patch

This patch avoids a NPE by performing a null pointer check before the pointer is read.

> Unexpected NPE from the next method of StreamLineRecordReader fails map/reduce jobs
> -----------------------------------------------------------------------------------
>
>                 Key: HADOOP-695
>                 URL: http://issues.apache.org/jira/browse/HADOOP-695
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.8.1
>
>         Attachments: NPE.patch
>
>
> For some reason that I do not have much idea, if input of a map/reduce job is gzipped, an unexpected null pointer may be returned from UTF8ByteArrayUtils.readline in the next method of StreamLineRecordReader. However the pointer is read before a null pointer check is performed. Thus a NPE may be thrown and fail the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 22:19:17 2006
Return-Path: 
 <hadoop-dev-return-4932-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85624 invoked from network); 8 Nov 2006 22:19:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 22:19:17 -0000
Received: (qmail 36546 invoked by uid 500); 8 Nov 2006 22:19:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36519 invoked by uid 500); 8 Nov 2006 22:19:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36503 invoked by uid 99); 8 Nov 2006 22:19:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 14:19:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 14:19:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E950D7142FA
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 14:18:52 -0800 (PST)
Message-ID: <16375149.1163024332952.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 14:18:52 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-696) TestTextInputFormat fails on some
 platforms due to non-determinism in format.getSplits()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

TestTextInputFormat fails on some platforms due to non-determinism in format.getSplits()
----------------------------------------------------------------------------------------

                 Key: HADOOP-696
                 URL: http://issues.apache.org/jira/browse/HADOOP-696
             Project: Hadoop
          Issue Type: Bug
          Components: test
    Affects Versions: 0.8.0
            Reporter: Sameer Paranjpye
         Assigned To: Sameer Paranjpye
            Priority: Minor
             Fix For: 0.9.0


TestTextInputFormat depends on format.getSplits() returning splits in the order they were created. On a local filesystem getSplits() depends on File.list(), the order produced by which is non-deterministic. This causes the test to fail on some platforms.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 22:21:14 2006
Return-Path: 
 <hadoop-dev-return-4933-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85900 invoked from network); 8 Nov 2006 22:21:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 22:21:14 -0000
Received: (qmail 37842 invoked by uid 500); 8 Nov 2006 22:21:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37803 invoked by uid 500); 8 Nov 2006 22:21:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37782 invoked by uid 99); 8 Nov 2006 22:21:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 14:21:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 14:21:12 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 98AD77142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 14:20:52 -0800 (PST)
Message-ID: <27674429.1163024452623.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 14:20:52 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-696) TestTextInputFormat fails on some
 platforms due to non-determinism in format.getSplits()
In-Reply-To: <16375149.1163024332952.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-696?page=all ]

Work on HADOOP-696 started by Sameer Paranjpye.

> TestTextInputFormat fails on some platforms due to non-determinism in format.getSplits()
> ----------------------------------------------------------------------------------------
>
>                 Key: HADOOP-696
>                 URL: http://issues.apache.org/jira/browse/HADOOP-696
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Sameer Paranjpye
>            Priority: Minor
>             Fix For: 0.9.0
>
>
> TestTextInputFormat depends on format.getSplits() returning splits in the order they were created. On a local filesystem getSplits() depends on File.list(), the order produced by which is non-deterministic. This causes the test to fail on some platforms.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 22:27:15 2006
Return-Path: 
 <hadoop-dev-return-4934-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88732 invoked from network); 8 Nov 2006 22:27:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 22:27:15 -0000
Received: (qmail 50648 invoked by uid 500); 8 Nov 2006 22:27:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50412 invoked by uid 500); 8 Nov 2006 22:27:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50398 invoked by uid 99); 8 Nov 2006 22:27:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 14:27:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 14:27:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3D4817142D2
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 14:26:53 -0800 (PST)
Message-ID: <14015514.1163024813247.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 14:26:53 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-697) Duplicate data node name calculation
 in Datanode constructor
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Duplicate data node name calculation in Datanode constructor
------------------------------------------------------------

                 Key: HADOOP-697
                 URL: http://issues.apache.org/jira/browse/HADOOP-697
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
    Affects Versions: 0.8.0
            Reporter: Hairong Kuang
         Assigned To: Hairong Kuang
             Fix For: 0.8.1


A data node name is calculated twice when a DataNode object is constructed. One is computed at line 158 in DataNode.java using  the statement:

  InetAddress.getLocalHost().getHostName().

The value is passed the private DataNode constructor but is never used. The name is recomputed at lines 189-192 using the statement:

 DNS.getDefaultHost(
   conf.get("dfs.datanode.dns.interface", "default"), 
   conf.get("dfs.datanode.dns.nameserver", "default"))".


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 22:37:22 2006
Return-Path: 
 <hadoop-dev-return-4935-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91008 invoked from network); 8 Nov 2006 22:37:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 22:37:22 -0000
Received: (qmail 66095 invoked by uid 500); 8 Nov 2006 22:37:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66073 invoked by uid 500); 8 Nov 2006 22:37:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66021 invoked by uid 99); 8 Nov 2006 22:37:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 14:37:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 14:37:19 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F30BC7142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 14:36:58 -0800 (PST)
Message-ID: <6853674.1163025418990.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 14:36:58 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-696) TestTextInputFormat fails on some
 platforms due to non-determinism in format.getSplits()
In-Reply-To: <16375149.1163024332952.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-696?page=all ]

Sameer Paranjpye updated HADOOP-696:
------------------------------------

    Attachment: reorder-splits.txt

> TestTextInputFormat fails on some platforms due to non-determinism in format.getSplits()
> ----------------------------------------------------------------------------------------
>
>                 Key: HADOOP-696
>                 URL: http://issues.apache.org/jira/browse/HADOOP-696
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Sameer Paranjpye
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: reorder-splits.txt
>
>
> TestTextInputFormat depends on format.getSplits() returning splits in the order they were created. On a local filesystem getSplits() depends on File.list(), the order produced by which is non-deterministic. This causes the test to fail on some platforms.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 22:37:24 2006
Return-Path: 
 <hadoop-dev-return-4936-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91071 invoked from network); 8 Nov 2006 22:37:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 22:37:24 -0000
Received: (qmail 66896 invoked by uid 500); 8 Nov 2006 22:37:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66874 invoked by uid 500); 8 Nov 2006 22:37:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66865 invoked by uid 99); 8 Nov 2006 22:37:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 14:37:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 14:37:22 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 409A271430F
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 14:37:02 -0800 (PST)
Message-ID: <22304474.1163025422261.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 14:37:02 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-696) TestTextInputFormat fails on some
 platforms due to non-determinism in format.getSplits()
In-Reply-To: <16375149.1163024332952.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-696?page=all ]

Sameer Paranjpye updated HADOOP-696:
------------------------------------

    Status: Patch Available  (was: In Progress)

This patch fixes the issue by ensuring that the test always processes splits in the same order.

> TestTextInputFormat fails on some platforms due to non-determinism in format.getSplits()
> ----------------------------------------------------------------------------------------
>
>                 Key: HADOOP-696
>                 URL: http://issues.apache.org/jira/browse/HADOOP-696
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Sameer Paranjpye
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: reorder-splits.txt
>
>
> TestTextInputFormat depends on format.getSplits() returning splits in the order they were created. On a local filesystem getSplits() depends on File.list(), the order produced by which is non-deterministic. This causes the test to fail on some platforms.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 23:01:47 2006
Return-Path: 
 <hadoop-dev-return-4937-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97709 invoked from network); 8 Nov 2006 23:01:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 23:01:47 -0000
Received: (qmail 2640 invoked by uid 500); 8 Nov 2006 23:01:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2414 invoked by uid 500); 8 Nov 2006 23:01:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2405 invoked by uid 99); 8 Nov 2006 23:01:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 15:01:56 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E70CB7142FC
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 15:00:54 -0800 (PST)
Message-ID: <1768218.1163026854943.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 15:00:54 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-604) DataNodes get NullPointerException and
 become unresponsive on 50010
In-Reply-To: <30151363.1161021034972.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-604?page=all ]

Doug Cutting updated HADOOP-604:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Raghu!

> DataNodes get NullPointerException and become unresponsive on 50010
> -------------------------------------------------------------------
>
>                 Key: HADOOP-604
>                 URL: http://issues.apache.org/jira/browse/HADOOP-604
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0
>            Reporter: Christian Kunz
>         Assigned To: Raghu Angadi
>             Fix For: 0.9.0
>
>         Attachments: fsdataset-locks.patch
>
>
> I wonder whether handling of 'children' in FSDataset is thread-safe.
> Exception in thread "org.apache.hadoop.dfs.DataNode$DataXceiveServer@19b04e2" java.lang.NullPointerException
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSVolume.checkDirs(FSDataset.java:238)
>         at org.apache.hadoop.dfs.FSDataset$FSVolumeSet.checkDirs(FSDataset.java:326)
>         at org.apache.hadoop.dfs.FSDataset.checkDataDir(FSDataset.java:522)
>         at org.apache.hadoop.dfs.DataNode$DataXceiveServer.run(DataNode.java:472)
>         at java.lang.Thread.run(Thread.java:595)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 23:05:13 2006
Return-Path: 
 <hadoop-dev-return-4938-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98465 invoked from network); 8 Nov 2006 23:05:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 23:05:13 -0000
Received: (qmail 9349 invoked by uid 500); 8 Nov 2006 23:05:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9328 invoked by uid 500); 8 Nov 2006 23:05:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9319 invoked by uid 99); 8 Nov 2006 23:05:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 15:05:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 15:05:11 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 71DCF7142F8
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 15:04:51 -0800 (PST)
Message-ID: <17466448.1163027091463.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 15:04:51 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-698) When DFS client fails to read from a
 datanode, the failed datanode is not excluded from target reselection
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

When DFS client fails to read from a datanode, the failed datanode is not excluded from target reselection 
-----------------------------------------------------------------------------------------------------------

                 Key: HADOOP-698
                 URL: http://issues.apache.org/jira/browse/HADOOP-698
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Hairong Kuang


In the method read(byte buf[ ], int off, int len) of DFSInputStream, when read fails,  it calls "blockSeekTo" to reselect a datanode. However, the failed datanode does not feed back to blockSeekTo. The datanode selection algorithm works as follows:
* If the machine that the client is running on has a local copy, return the local machine;
* Otherwise, randomly pick up one location.

When the failed data node info does not feed back to target reselection, this leads to two flaws:
1. When a client fails to read from the local copy, for example, because of the checksum error, the local machine will always be chosen in retries.
2. Random selection may still return the same failed node.



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 23:07:15 2006
Return-Path: 
 <hadoop-dev-return-4939-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99280 invoked from network); 8 Nov 2006 23:07:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 23:07:15 -0000
Received: (qmail 12390 invoked by uid 500); 8 Nov 2006 23:07:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12367 invoked by uid 500); 8 Nov 2006 23:07:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12358 invoked by uid 99); 8 Nov 2006 23:07:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 15:07:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 15:07:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1E5107142F7
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 15:06:53 -0800 (PST)
Message-ID: <30309883.1163027213121.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 15:06:53 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-459) libhdfs leaks memory when writing to
 files
In-Reply-To: <12771302.1155876793902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-459?page=all ]

Doug Cutting updated HADOOP-459:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Sameer!

> libhdfs leaks memory when writing to files
> ------------------------------------------
>
>                 Key: HADOOP-459
>                 URL: http://issues.apache.org/jira/browse/HADOOP-459
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0, 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>            Reporter: Christian Kunz
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.9.0
>
>         Attachments: libhdfs_fixes.1.txt, libhdfs_fixes.2.txt, libhdfs_fixes.txt
>
>
> hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 23:13:15 2006
Return-Path: 
 <hadoop-dev-return-4940-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 926 invoked from network); 8 Nov 2006 23:13:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 23:13:15 -0000
Received: (qmail 16638 invoked by uid 500); 8 Nov 2006 23:13:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16415 invoked by uid 500); 8 Nov 2006 23:13:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16405 invoked by uid 99); 8 Nov 2006 23:13:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 15:13:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 15:13:14 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 306E27142F8
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 15:12:54 -0800 (PST)
Message-ID: <14823971.1163027574195.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 15:12:54 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-688) move dfs administrative interfaces
 to a separate command
In-Reply-To: <30661235.1162944051488.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-688?page=comments#action_12448314 ] 
            
Doug Cutting commented on HADOOP-688:
-------------------------------------

I liked the name 'dfsadmin' for this command rather than just 'admin'.

> move dfs administrative interfaces to a separate command
> --------------------------------------------------------
>
>                 Key: HADOOP-688
>                 URL: http://issues.apache.org/jira/browse/HADOOP-688
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: admincommand.patch
>
>
> The dfs adminsitrative commands (e.g. safemode, report, etc) should be separate from the dfs user commands. The proposal is to remove the following two commands:
> bin/hadoop dfs -report
> bin/hadoop dfs -safemode
> The above two features will be available through a new command:
> bin/hadoop dfsadmin -report
> bin/hadoop dfsadmin -safemode
> This is done so that there is a clean distinction between cluster administrative commands and users command.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 23:33:15 2006
Return-Path: 
 <hadoop-dev-return-4941-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10171 invoked from network); 8 Nov 2006 23:33:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 23:33:15 -0000
Received: (qmail 39721 invoked by uid 500); 8 Nov 2006 23:33:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39703 invoked by uid 500); 8 Nov 2006 23:33:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39694 invoked by uid 99); 8 Nov 2006 23:33:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 15:33:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 15:33:14 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 523057142F8
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 15:32:54 -0800 (PST)
Message-ID: <1302423.1163028774334.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 15:32:54 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-688) move dfs administrative interfaces to
 a separate command
In-Reply-To: <30661235.1162944051488.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-688?page=all ]

dhruba borthakur updated HADOOP-688:
------------------------------------

    Attachment:     (was: admincommand.patch)

> move dfs administrative interfaces to a separate command
> --------------------------------------------------------
>
>                 Key: HADOOP-688
>                 URL: http://issues.apache.org/jira/browse/HADOOP-688
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: admincommand.patch
>
>
> The dfs adminsitrative commands (e.g. safemode, report, etc) should be separate from the dfs user commands. The proposal is to remove the following two commands:
> bin/hadoop dfs -report
> bin/hadoop dfs -safemode
> The above two features will be available through a new command:
> bin/hadoop dfsadmin -report
> bin/hadoop dfsadmin -safemode
> This is done so that there is a clean distinction between cluster administrative commands and users command.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov  8 23:33:17 2006
Return-Path: 
 <hadoop-dev-return-4942-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10216 invoked from network); 8 Nov 2006 23:33:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 23:33:17 -0000
Received: (qmail 40045 invoked by uid 500); 8 Nov 2006 23:33:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39949 invoked by uid 500); 8 Nov 2006 23:33:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39940 invoked by uid 99); 8 Nov 2006 23:33:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 15:33:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 15:33:15 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9EF467142F7
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 15:32:55 -0800 (PST)
Message-ID: <31012455.1163028775648.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 15:32:55 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-688) move dfs administrative interfaces to
 a separate command
In-Reply-To: <30661235.1162944051488.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-688?page=all ]

dhruba borthakur updated HADOOP-688:
------------------------------------

    Attachment: admincommand.patch

Changed the name of the command from "admin" to "dfsadmin".

> move dfs administrative interfaces to a separate command
> --------------------------------------------------------
>
>                 Key: HADOOP-688
>                 URL: http://issues.apache.org/jira/browse/HADOOP-688
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: admincommand.patch
>
>
> The dfs adminsitrative commands (e.g. safemode, report, etc) should be separate from the dfs user commands. The proposal is to remove the following two commands:
> bin/hadoop dfs -report
> bin/hadoop dfs -safemode
> The above two features will be available through a new command:
> bin/hadoop dfsadmin -report
> bin/hadoop dfsadmin -safemode
> This is done so that there is a clean distinction between cluster administrative commands and users command.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 00:05:11 2006
Return-Path: 
 <hadoop-dev-return-4943-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18919 invoked from network); 9 Nov 2006 00:05:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 00:05:11 -0000
Received: (qmail 70507 invoked by uid 500); 9 Nov 2006 00:05:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70470 invoked by uid 500); 9 Nov 2006 00:05:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70461 invoked by uid 99); 9 Nov 2006 00:05:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 16:05:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 16:05:09 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 40EF37142F8
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 16:04:49 -0800 (PST)
Message-ID: <11306810.1163030689263.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 16:04:49 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-694) jobtracker expireluanching tasks
 throws out Nullpointer exceptions
In-Reply-To: <33233884.1163013304716.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-694?page=all ]

Doug Cutting updated HADOOP-694:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Mahadev!

> jobtracker expireluanching tasks throws out Nullpointer exceptions
> ------------------------------------------------------------------
>
>                 Key: HADOOP-694
>                 URL: http://issues.apache.org/jira/browse/HADOOP-694
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: taskexpire.patch
>
>
> This happens when a tasktracker has been expired and this thread tries to call failedTask. The tasktrackerStatus becomes null and this thread throws out nullpointerexceptions.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 00:59:06 2006
Return-Path: 
 <hadoop-dev-return-4944-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31285 invoked from network); 9 Nov 2006 00:59:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 00:59:06 -0000
Received: (qmail 56364 invoked by uid 500); 9 Nov 2006 00:59:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56216 invoked by uid 500); 9 Nov 2006 00:59:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56207 invoked by uid 99); 9 Nov 2006 00:59:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 16:59:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 16:59:05 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B7D457142FC
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 16:58:44 -0800 (PST)
Message-ID: <23861455.1163033924750.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 16:58:44 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-699) "Browse the filesystem" link on Name
 Node redirects to wrong port on DataNode
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

"Browse the filesystem" link on Name Node redirects to wrong port on DataNode
-----------------------------------------------------------------------------

                 Key: HADOOP-699
                 URL: http://issues.apache.org/jira/browse/HADOOP-699
             Project: Hadoop
          Issue Type: Bug
            Reporter: Raghu Angadi



"Browse the filesystem" link on NameNode front page does not work since it redirects to Datanode:65535/ . 
 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 00:59:07 2006
Return-Path: 
 <hadoop-dev-return-4945-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31323 invoked from network); 9 Nov 2006 00:59:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 00:59:07 -0000
Received: (qmail 56482 invoked by uid 500); 9 Nov 2006 00:59:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56462 invoked by uid 500); 9 Nov 2006 00:59:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56453 invoked by uid 99); 9 Nov 2006 00:59:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 16:59:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 16:59:06 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0C3EF71430F
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 16:58:46 -0800 (PST)
Message-ID: <4303201.1163033926047.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 16:58:46 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-699) "Browse the filesystem" link on Name
 Node redirects to wrong port on DataNode
In-Reply-To: <23861455.1163033924750.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-699?page=all ]

Raghu Angadi reassigned HADOOP-699:
-----------------------------------

    Assignee: Raghu Angadi

> "Browse the filesystem" link on Name Node redirects to wrong port on DataNode
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-699
>                 URL: http://issues.apache.org/jira/browse/HADOOP-699
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>
> "Browse the filesystem" link on NameNode front page does not work since it redirects to Datanode:65535/ . 
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 01:05:01 2006
Return-Path: 
 <hadoop-dev-return-4946-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33930 invoked from network); 9 Nov 2006 01:05:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 01:05:01 -0000
Received: (qmail 72270 invoked by uid 500); 9 Nov 2006 01:05:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72246 invoked by uid 500); 9 Nov 2006 01:05:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72237 invoked by uid 99); 9 Nov 2006 01:05:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 17:05:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 17:04:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7E83671430F
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 17:04:39 -0800 (PST)
Message-ID: <5395928.1163034279515.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 17:04:39 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-668) improvement to DFS browsing WI
In-Reply-To: <4412988.1162407196575.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-668?page=all ]

Hairong Kuang reassigned HADOOP-668:
------------------------------------

    Assignee: Hairong Kuang

> improvement to DFS browsing WI
> ------------------------------
>
>                 Key: HADOOP-668
>                 URL: http://issues.apache.org/jira/browse/HADOOP-668
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Hairong Kuang
>            Priority: Minor
>
> improvement to DFS browsing WI:
> 1.  Increase the default "Chunk Size to view" to 32K bytes.  Currently 
> in most cases, I always need to add another digit to the size and get 
> the page redisplayed.
> 2. Add date to the display.  This may an "approximate" date -- e.g. the 
> date of any block of the file.
> 3. Remove the directory name from the file name in the file list
> 4. Let the links in the file list point to the file names, not to the 
> file data.  That is, if the files in the directory that is displayed in 
> the window have changed, clicking on the file name will still get the 
> user to the file, rather than saying "bad link" (or smth. like that).  
> If you still prefer to link to the file data (there is certain merit to 
> this), at least make the link to the removed file say
> "sorry, this file has been deleted, here is the link to the current 
> version"  or
> "sorry, this file has been deleted"
> 5. replication factor and size for directories is currently meaningless.
> use these fields for something meaningful, like total size of directory,
> number of files, creation date etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 01:43:58 2006
Return-Path: 
 <hadoop-dev-return-4947-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44437 invoked from network); 9 Nov 2006 01:43:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 01:43:58 -0000
Received: (qmail 27788 invoked by uid 500); 9 Nov 2006 01:44:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27752 invoked by uid 500); 9 Nov 2006 01:44:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27743 invoked by uid 99); 9 Nov 2006 01:44:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 17:44:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 17:43:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1F0717142F8
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 17:43:37 -0800 (PST)
Message-ID: <4773319.1163036617124.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 17:43:37 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-700) bin/hadoop includes in classpath all
 jar files in HADOOP_HOME
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

bin/hadoop includes in classpath all jar files in HADOOP_HOME
-------------------------------------------------------------

                 Key: HADOOP-700
                 URL: http://issues.apache.org/jira/browse/HADOOP-700
             Project: Hadoop
          Issue Type: Bug
          Components: scripts
    Affects Versions: 0.8.0
            Reporter: Nigel Daley


The hadoop script includes all jars from HADOOP_HOME in the classpath.  This means that all the daemons get the examples and tests included in their class paths.  If a change is made to an example or test, all the daemons have to be restarted to see the affect of the change.  This doesn't seem desirable.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 01:49:02 2006
Return-Path: 
 <hadoop-dev-return-4948-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45711 invoked from network); 9 Nov 2006 01:49:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 01:49:02 -0000
Received: (qmail 35653 invoked by uid 500); 9 Nov 2006 01:49:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35613 invoked by uid 500); 9 Nov 2006 01:49:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35592 invoked by uid 99); 9 Nov 2006 01:49:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 17:49:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 17:48:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 753AE7142FC
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 17:48:38 -0800 (PST)
Message-ID: <10697892.1163036918477.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 17:48:38 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-701) The JobConf instance passed to
 JobClient is unnecessarily modified
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The JobConf instance passed to JobClient is unnecessarily modified
------------------------------------------------------------------

                 Key: HADOOP-701
                 URL: http://issues.apache.org/jira/browse/HADOOP-701
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.8.0
            Reporter: Nigel Daley


The JobConf instance passed to the JobClient.submitJob method is modified by that method.  This side effect is surprising.  IMHO, the passed in JobConf should either be defensively copied or the side effect should be documented.

Trying to reuse a JobConf instance in multiple calls to JobClient.submitJob causes the following exception:

java.io.IOException: /dfstmp/mapred/system/submit_r7mxti/job.jar: No such file or directory
        at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:80)
        at org.apache.hadoop.dfs.DistributedFileSystem.copyFromLocalFile(DistributedFileSystem.java:188)
        at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:291)
        at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:368)
        at org.apache.hadoop.examples.NNBench.main(NNBench.java:274)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:71)
        at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:143)
        at org.apache.hadoop.examples.ExampleDriver.main(ExampleDriver.java:41)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:149)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 03:21:59 2006
Return-Path: 
 <hadoop-dev-return-4949-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90208 invoked from network); 9 Nov 2006 03:21:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 03:21:59 -0000
Received: (qmail 53754 invoked by uid 500); 9 Nov 2006 03:22:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53720 invoked by uid 500); 9 Nov 2006 03:22:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53704 invoked by uid 99); 9 Nov 2006 03:22:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 19:22:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 19:21:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F1A0C7142F8
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 19:21:37 -0800 (PST)
Message-ID: <13641771.1163042497986.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 19:21:37 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-702) DFS Upgrade Proposal
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

DFS Upgrade Proposal
--------------------

                 Key: HADOOP-702
                 URL: http://issues.apache.org/jira/browse/HADOOP-702
             Project: Hadoop
          Issue Type: New Feature
          Components: dfs
            Reporter: Konstantin Shvachko


Currently the DFS cluster upgrade procedure is manual.
http://wiki.apache.org/lucene-hadoop/Hadoop_Upgrade
It is rather complicated and does not guarantee data recoverability in case of software errors or administrator mistakes.
This is a description of utilities that make the upgrade process almost automatic and minimize chance of loosing or corrupting data.
Please see the attached html file for details.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 03:24:00 2006
Return-Path: 
 <hadoop-dev-return-4950-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91183 invoked from network); 9 Nov 2006 03:24:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 03:24:00 -0000
Received: (qmail 58941 invoked by uid 500); 9 Nov 2006 03:24:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58795 invoked by uid 500); 9 Nov 2006 03:24:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58783 invoked by uid 99); 9 Nov 2006 03:24:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 19:24:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 19:23:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 408427142F8
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 19:23:38 -0800 (PST)
Message-ID: <27628784.1163042618261.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 19:23:38 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-702) DFS Upgrade Proposal
In-Reply-To: <13641771.1163042497986.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-702?page=all ]

Konstantin Shvachko updated HADOOP-702:
---------------------------------------

    Attachment: DFSUpgradeProposal.html

> DFS Upgrade Proposal
> --------------------
>
>                 Key: HADOOP-702
>                 URL: http://issues.apache.org/jira/browse/HADOOP-702
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Konstantin Shvachko
>         Attachments: DFSUpgradeProposal.html
>
>
> Currently the DFS cluster upgrade procedure is manual.
> http://wiki.apache.org/lucene-hadoop/Hadoop_Upgrade
> It is rather complicated and does not guarantee data recoverability in case of software errors or administrator mistakes.
> This is a description of utilities that make the upgrade process almost automatic and minimize chance of loosing or corrupting data.
> Please see the attached html file for details.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 04:37:00 2006
Return-Path: 
 <hadoop-dev-return-4951-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8856 invoked from network); 9 Nov 2006 04:37:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 04:37:00 -0000
Received: (qmail 48629 invoked by uid 500); 9 Nov 2006 04:37:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48587 invoked by uid 500); 9 Nov 2006 04:37:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48578 invoked by uid 99); 9 Nov 2006 04:37:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 20:37:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 20:36:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 01A737142FA
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 20:36:39 -0800 (PST)
Message-ID: <11558254.1163046999004.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 20:36:39 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Arun C Murthy updated HADOOP-538:
---------------------------------

    Status: Patch Available  (was: In Progress)

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_20061108.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 04:37:05 2006
Return-Path: 
 <hadoop-dev-return-4952-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8909 invoked from network); 9 Nov 2006 04:37:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 04:37:05 -0000
Received: (qmail 49090 invoked by uid 500); 9 Nov 2006 04:37:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48859 invoked by uid 500); 9 Nov 2006 04:37:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48850 invoked by uid 99); 9 Nov 2006 04:37:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 20:37:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 20:37:03 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 94173714312
	for <hadoop-dev@lucene.apache.org>; Wed,  8 Nov 2006 20:36:43 -0800 (PST)
Message-ID: <1429149.1163047003604.JavaMail.jira@brutus>
Date: Wed, 8 Nov 2006 20:36:43 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-489) Seperating user logs from system logs
 in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-489?page=all ]

Arun C Murthy updated HADOOP-489:
---------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.9.0

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-489_20061019.patch, HADOOP-489_20061101.patch, HADOOP-489_20061102.patch, HADOOP-489_20061107.patch, HADOOP-489_20061109.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 08:12:08 2006
Return-Path: 
 <hadoop-dev-return-4953-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56972 invoked from network); 9 Nov 2006 08:12:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 08:12:08 -0000
Received: (qmail 85189 invoked by uid 500); 9 Nov 2006 08:12:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85105 invoked by uid 500); 9 Nov 2006 08:12:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84919 invoked by uid 99); 9 Nov 2006 08:12:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 00:12:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 00:11:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 86CA97142EC
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 00:11:39 -0800 (PST)
Message-ID: <30433473.1163059899549.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 00:11:39 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-611?page=comments#action_12448390 ] 
            
Devaraj Das commented on HADOOP-611:
------------------------------------

> I don't understand the ignoreSync, doSync code that you have in the the 
> SegmentDescriptor. You should never set the sync = null on a Reader. It is done 
> on merge outputs via writer.sync = null to keep the writer from putting in sync 
> blocks, which wastes space since the merge outputs won't be split as map 
> inputs.

This is done to make sure that we can handle inputs that come with a Sync. For example, if you look at the code for readBlock in SequenceFile.java, there is a dependency on reader.sync being null or not. The temp output does not have syncs and by default I don't expect syncs. So for the sort output, we don't have syncs. But for the Public merge APIs that take external pathnames as an argument, the assumption is that they are strictly conforming to the sequence file format and hence require Sync checks.

Also, have a look at MergePass.run in SequenceFile.java (without this patch applied). There is an explicit "reader.sync = null" done there.

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: merge.patch, merge.patch, merge.patch, merge.patch
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 11:16:02 2006
Return-Path: 
 <hadoop-dev-return-4954-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12143 invoked from network); 9 Nov 2006 11:16:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 11:16:02 -0000
Received: (qmail 85679 invoked by uid 500); 9 Nov 2006 11:16:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85660 invoked by uid 500); 9 Nov 2006 11:16:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85651 invoked by uid 99); 9 Nov 2006 11:16:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 03:16:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 03:16:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 446537142FC
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 03:15:40 -0800 (PST)
Message-ID: <13036080.1163070940277.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 03:15:40 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Attachment: Hadoop-76_2.patch

Changes in this patch update 

1. PhasedFileSystem has extra constructor that takes an JobConf
2. PhasedFileSystem now handles file overwrite flag properly. 

3. commit/abort can be done for a single file or for all files created by this FS. 
4. The method for commit is split in 2 function one is pvt with an extra boolean variable to avoid concurrent modification while committing in a iterator loop. 
 4. reduceProgress calculation is changed, earlier it was dividing the progress by reduces.length twice, once while update status and then while checking for spec tasks, which was incorrect. 

Thanks Devaraj for the review. 

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, Hadoop-76_2.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 13:31:02 2006
Return-Path: 
 <hadoop-dev-return-4955-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51367 invoked from network); 9 Nov 2006 13:31:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 13:31:02 -0000
Received: (qmail 36094 invoked by uid 500); 9 Nov 2006 13:31:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35906 invoked by uid 500); 9 Nov 2006 13:31:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35893 invoked by uid 99); 9 Nov 2006 13:31:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 05:31:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 05:31:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 34AD77142FC
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 05:30:40 -0800 (PST)
Message-ID: <28933750.1163079040213.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 05:30:40 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Attachment:     (was: Hadoop-76_2.patch)

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 13:33:02 2006
Return-Path: 
 <hadoop-dev-return-4956-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51940 invoked from network); 9 Nov 2006 13:33:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 13:33:02 -0000
Received: (qmail 40744 invoked by uid 500); 9 Nov 2006 13:33:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40715 invoked by uid 500); 9 Nov 2006 13:33:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40706 invoked by uid 99); 9 Nov 2006 13:33:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 05:33:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 05:33:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4C9237142FC
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 05:32:40 -0800 (PST)
Message-ID: <31501323.1163079160311.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 05:32:40 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Attachment: Hadoop-76_2.patch

ops attached wrong file. updating.

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 13:33:05 2006
Return-Path: 
 <hadoop-dev-return-4957-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52039 invoked from network); 9 Nov 2006 13:33:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 13:33:05 -0000
Received: (qmail 41090 invoked by uid 500); 9 Nov 2006 13:33:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41055 invoked by uid 500); 9 Nov 2006 13:33:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41042 invoked by uid 99); 9 Nov 2006 13:33:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 05:33:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 05:33:03 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 89AEF7142F7
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 05:32:43 -0800 (PST)
Message-ID: <5609356.1163079163560.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 05:32:43 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Attachment:     (was: Hadoop-76_2.patch)

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 13:35:02 2006
Return-Path: 
 <hadoop-dev-return-4958-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52599 invoked from network); 9 Nov 2006 13:35:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 13:35:02 -0000
Received: (qmail 44031 invoked by uid 500); 9 Nov 2006 13:35:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43841 invoked by uid 500); 9 Nov 2006 13:35:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43832 invoked by uid 99); 9 Nov 2006 13:35:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 05:35:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 05:35:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 339E57142FC
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 05:34:40 -0800 (PST)
Message-ID: <26765525.1163079280208.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 05:34:40 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Attachment: Hadoop-76_2.patch

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, Hadoop-76_2.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 14:19:01 2006
Return-Path: 
 <hadoop-dev-return-4959-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69513 invoked from network); 9 Nov 2006 14:19:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 14:19:01 -0000
Received: (qmail 61167 invoked by uid 500); 9 Nov 2006 14:19:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61145 invoked by uid 500); 9 Nov 2006 14:19:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61135 invoked by uid 99); 9 Nov 2006 14:19:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 06:19:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 06:18:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4FA7B7142F8
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 06:18:38 -0800 (PST)
Message-ID: <13904043.1163081918323.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 06:18:38 -0800 (PST)
From: "Manisekaran (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-464) Troubleshooting message for RunJar
 (bin/hadoop jar)
In-Reply-To: <31480789.1155947957107.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-464?page=comments#action_12448481 ] 
            
Manisekaran commented on HADOOP-464:
------------------------------------

Any one explain How to patch for this error

> Troubleshooting message for RunJar (bin/hadoop jar)
> ---------------------------------------------------
>
>                 Key: HADOOP-464
>                 URL: http://issues.apache.org/jira/browse/HADOOP-464
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: util
>            Reporter: Michel Tourn
>             Fix For: 0.6.0
>
>         Attachments: runjar.patch
>
>
> Many users get this exception when using bin/hadoop
> There are various reasons:
> HADOOP_CONF_DIR or HADOOP_HOME misconfigured. 
> "hadoop jar" parameter incorrect
> So the patch displays the path of the jar it is trying to open if this fails: 
> Problem while opening hadoop job jar: /home/build/hadoop-streaming.jar
> Exception in thread "main" java.util.zip.ZipException: error in opening zip file
>         at java.util.zip.ZipFile.open(Native Method)
>         at java.util.zip.ZipFile.<init>(ZipFile.java:203)
>         at java.util.jar.JarFile.<init>(JarFile.java:132)
>         at java.util.jar.JarFile.<init>(JarFile.java:70)
>         at org.apache.hadoop.util.RunJar.main(RunJar.java:80)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 17:01:01 2006
Return-Path: 
 <hadoop-dev-return-4960-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29787 invoked from network); 9 Nov 2006 17:01:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 17:01:01 -0000
Received: (qmail 31349 invoked by uid 500); 9 Nov 2006 17:01:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31324 invoked by uid 500); 9 Nov 2006 17:01:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31315 invoked by uid 99); 9 Nov 2006 17:01:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 09:01:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 09:00:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 219E871430F
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 09:00:39 -0800 (PST)
Message-ID: <22374085.1163091639134.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 09:00:39 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-657) Free temporary space should be
 modelled better
In-Reply-To: <11001957.1162254376612.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-657?page=comments#action_12448519 ] 
            
Arun C Murthy commented on HADOOP-657:
--------------------------------------

Current flow relevant to this discussion:

TaskTracker.offerService() -> TaskTracker.checkForNewTasks() -> if (TaskTracker.enoughFreeSpace()) then poll/startNewTask

We could put the above checks (infact we can do better by checking if we have assigned fileSplit's size * conf.getFloat("map.output.growth.factor", 1.0)) in TaskTracker.enoughFreeSpace()...

... alternatively we could make '(sum over running tasks of (1.0 - done) * allocation)' part of TaskTrackerStatus i.e. a 'availableDiskSpace' member, check to ensure that 'sufficient' free space is available on the tasktracker before assigning it the task itself in JobInProgress.findNewTask - this ensures that a task isn't allocated in the first place to a tasktracker if it can't handle it.

What do you guys think? Am I missing out on something which prevents option #2 from working?

> Free temporary space should be modelled better
> ----------------------------------------------
>
>                 Key: HADOOP-657
>                 URL: http://issues.apache.org/jira/browse/HADOOP-657
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>
> Currently, there is a configurable size that must be free for a task tracker to accept a new task. However, that isn't a very good model of what the task is likely to take. I'd like to propose:
> Map tasks:  totalInputSize * conf.getFloat("map.output.growth.factor", 1.0) / numMaps
> Reduce tasks: totalInputSize * 2 * conf.getFloat("map.output.growth.factor", 1.0) / numReduces
> where totalInputSize is the size of all the maps inputs for the given job.
> To start a new task, 
>   newTaskAllocation + (sum over running tasks of (1.0 - done) * allocation) >= 
>        free disk * conf.getFloat("mapred.max.scratch.allocation", 0.90);
> So in English, we will model the expected sizes of tasks and only task tasks that should leave us a 10% margin. With:
> map.output.growth.factor -- the relative size of the transient data relative to the map inputs
> mapred.max.scratch.allocation -- the maximum amount of our disk we want to allocate to tasks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 18:35:19 2006
Return-Path: 
 <hadoop-dev-return-4961-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67428 invoked from network); 9 Nov 2006 18:35:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 18:35:19 -0000
Received: (qmail 19653 invoked by uid 500); 9 Nov 2006 18:35:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19613 invoked by uid 500); 9 Nov 2006 18:35:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19556 invoked by uid 99); 9 Nov 2006 18:35:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 10:35:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 10:34:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7B1BD714315
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 10:34:39 -0800 (PST)
Message-ID: <19817888.1163097279501.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 10:34:39 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-703) streaming should have a jnuit test
 that catches any api changes in current working directories
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

streaming should have a jnuit test that catches any api changes in current working directories
----------------------------------------------------------------------------------------------

                 Key: HADOOP-703
                 URL: http://issues.apache.org/jira/browse/HADOOP-703
             Project: Hadoop
          Issue Type: Test
            Reporter: Mahadev konar
         Assigned To: Mahadev konar


the current working directores were changes in 0.7.2 which broke applications that ran on streaming. We should have a junit test that catches these api changes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 20:27:02 2006
Return-Path: 
 <hadoop-dev-return-4962-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11156 invoked from network); 9 Nov 2006 20:27:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 20:27:02 -0000
Received: (qmail 89558 invoked by uid 500); 9 Nov 2006 20:27:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89363 invoked by uid 500); 9 Nov 2006 20:27:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89354 invoked by uid 99); 9 Nov 2006 20:27:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 12:27:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 12:27:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 720AF7142FA
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 12:26:40 -0800 (PST)
Message-ID: <14468131.1163104000464.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 12:26:40 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-637) ipc.Server has memory leak -- serious
 issue for namenode server
In-Reply-To: <3722659.1161801316587.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-637?page=all ]

Doug Cutting updated HADOOP-637:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Raghu!

> ipc.Server has memory leak -- serious issue for namenode server
> ---------------------------------------------------------------
>
>                 Key: HADOOP-637
>                 URL: http://issues.apache.org/jira/browse/HADOOP-637
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.7.1
>            Reporter: Christian Kunz
>         Assigned To: Raghu Angadi
>         Attachments: directbuffers.patch
>
>
> In my environment (running a lot of batch processes each of which reads, creates, and deletes a lof of  files in dfs) the namenode server can run out of memory rather quickly (in a few hours on a 150 node cluster). The netbeans profiler shows an increasing number of direct byte buffers not garbage collected. The documentation on java.nio.ByteBuffer indicates that their allocation might (and obviously does) happen outside the normal gc-collected heap, and, therefore, it is required that direct byte buffers should only be used for long-lived objects.
> ipc.Server seems to use a 4KB direct byte buffer for every connection, but, worse, for every RPC call. If I replace the latter ones with non-direct byte buffers, the memory footprint of the namenode server increases only slowly, but even then it is just a matter of time (since I started it 24 hours ago, it leaked by about 300-400MB). If the performance increase by using direct buffers is a requirement, I would suggest to use a static pool.
> Although my environment abuses the namenode server in unusual manner, I would imagine that the memory footprint of the namenode server creeps up slowly everywhere

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 20:27:05 2006
Return-Path: 
 <hadoop-dev-return-4963-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11211 invoked from network); 9 Nov 2006 20:27:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 20:27:05 -0000
Received: (qmail 89639 invoked by uid 500); 9 Nov 2006 20:27:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89616 invoked by uid 500); 9 Nov 2006 20:27:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89607 invoked by uid 99); 9 Nov 2006 20:27:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 12:27:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 12:27:03 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A1A68714312
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 12:26:43 -0800 (PST)
Message-ID: <3655687.1163104003659.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 12:26:43 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-637) ipc.Server has memory leak -- serious
 issue for namenode server
In-Reply-To: <3722659.1161801316587.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-637?page=all ]

Doug Cutting updated HADOOP-637:
--------------------------------

    Fix Version/s: 0.9.0

> ipc.Server has memory leak -- serious issue for namenode server
> ---------------------------------------------------------------
>
>                 Key: HADOOP-637
>                 URL: http://issues.apache.org/jira/browse/HADOOP-637
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.7.1
>            Reporter: Christian Kunz
>         Assigned To: Raghu Angadi
>             Fix For: 0.9.0
>
>         Attachments: directbuffers.patch
>
>
> In my environment (running a lot of batch processes each of which reads, creates, and deletes a lof of  files in dfs) the namenode server can run out of memory rather quickly (in a few hours on a 150 node cluster). The netbeans profiler shows an increasing number of direct byte buffers not garbage collected. The documentation on java.nio.ByteBuffer indicates that their allocation might (and obviously does) happen outside the normal gc-collected heap, and, therefore, it is required that direct byte buffers should only be used for long-lived objects.
> ipc.Server seems to use a 4KB direct byte buffer for every connection, but, worse, for every RPC call. If I replace the latter ones with non-direct byte buffers, the memory footprint of the namenode server increases only slowly, but even then it is just a matter of time (since I started it 24 hours ago, it leaked by about 300-400MB). If the performance increase by using direct buffers is a requirement, I would suggest to use a static pool.
> Although my environment abuses the namenode server in unusual manner, I would imagine that the memory footprint of the namenode server creeps up slowly everywhere

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 20:38:03 2006
Return-Path: 
 <hadoop-dev-return-4964-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14684 invoked from network); 9 Nov 2006 20:38:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 20:38:03 -0000
Received: (qmail 11971 invoked by uid 500); 9 Nov 2006 20:38:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11946 invoked by uid 500); 9 Nov 2006 20:38:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11931 invoked by uid 99); 9 Nov 2006 20:38:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 12:38:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 12:37:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E1CCF7142EC
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 12:37:38 -0800 (PST)
Message-ID: <21709792.1163104658922.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 12:37:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-702) DFS Upgrade Proposal
In-Reply-To: <13641771.1163042497986.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-702?page=comments#action_12448580 ] 
            
Doug Cutting commented on HADOOP-702:
-------------------------------------

Should there also be a '-list' option, that lists all known FSSIDs?

Also, must rollback always remove the newer version?  If changes were made there they will be lost.  Someone might want to rollback to revert to an old version to test something, or even to find a deleted file, then switch back to the newer version.  In effect these are filesystem checkpoints.  We probably don't want to encourage use of them as checkpoints right off, but we also shouldn't do things that prohibit it, like removing versions whenever we switch versions.  Thoughts?

> DFS Upgrade Proposal
> --------------------
>
>                 Key: HADOOP-702
>                 URL: http://issues.apache.org/jira/browse/HADOOP-702
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Konstantin Shvachko
>         Attachments: DFSUpgradeProposal.html
>
>
> Currently the DFS cluster upgrade procedure is manual.
> http://wiki.apache.org/lucene-hadoop/Hadoop_Upgrade
> It is rather complicated and does not guarantee data recoverability in case of software errors or administrator mistakes.
> This is a description of utilities that make the upgrade process almost automatic and minimize chance of loosing or corrupting data.
> Please see the attached html file for details.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 22:31:05 2006
Return-Path: 
 <hadoop-dev-return-4965-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45006 invoked from network); 9 Nov 2006 22:31:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 22:31:05 -0000
Received: (qmail 15593 invoked by uid 500); 9 Nov 2006 22:31:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15556 invoked by uid 500); 9 Nov 2006 22:31:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15536 invoked by uid 99); 9 Nov 2006 22:31:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 14:31:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 14:31:03 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2E84D7142FA
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 14:30:43 -0800 (PST)
Message-ID: <21764421.1163111443187.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 14:30:43 -0800 (PST)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-692?page=comments#action_12448601 ] 
            
Bryan Pendleton commented on HADOOP-692:
----------------------------------------

Seems implied here, but I'll state it anyway, just in case it should be a separate issue:

Reads should also be rack-aware. Requests to the NameNode can take the rack as an argument, and order the returned locations by rack locality. This implies that there should be a mechanism for a client to be told/discover what rack its on, too, so the argument to the datanode isn't the only place rack information is useful.

> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 23:01:01 2006
Return-Path: 
 <hadoop-dev-return-4966-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56022 invoked from network); 9 Nov 2006 23:01:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 23:01:01 -0000
Received: (qmail 76901 invoked by uid 500); 9 Nov 2006 23:01:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76875 invoked by uid 500); 9 Nov 2006 23:01:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76866 invoked by uid 99); 9 Nov 2006 23:01:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 15:01:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 15:00:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 04DFE7142FA
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 15:00:39 -0800 (PST)
Message-ID: <4104658.1163113239016.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 15:00:39 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-447)
 DistributedFileSystem.getBlockSize(Path) does not resolve absolute path
In-Reply-To: <5956345.1155318013880.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-447?page=all ]

Raghu Angadi reassigned HADOOP-447:
-----------------------------------

    Assignee: Raghu Angadi

> DistributedFileSystem.getBlockSize(Path) does not resolve absolute path
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-447
>                 URL: http://issues.apache.org/jira/browse/HADOOP-447
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Benjamin Reed
>         Assigned To: Raghu Angadi
>
> getBlockSize() does not check for an absolute path like the rest of the DistributeFileSystem API does. Consequently getBlockSize(Path) does not work with relative paths.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 23:11:03 2006
Return-Path: 
 <hadoop-dev-return-4967-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60112 invoked from network); 9 Nov 2006 23:11:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 23:11:03 -0000
Received: (qmail 91509 invoked by uid 500); 9 Nov 2006 23:11:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91472 invoked by uid 500); 9 Nov 2006 23:11:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91448 invoked by uid 99); 9 Nov 2006 23:11:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 15:11:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 15:10:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4C5317142FC
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 15:10:38 -0800 (PST)
Message-ID: <17640797.1163113838310.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 15:10:38 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-692?page=comments#action_12448606 ] 
            
dhruba borthakur commented on HADOOP-692:
-----------------------------------------

I have a two questions: 

1. Is the rackId associated with a datanode or is it associated with the data directories in a datanode? 
2. Suppose that all three replicas was allocated in the same rack because there weren't any space available on other racks. Now, if more racks are added to the system, will HDFS automatically rebalance the replicas to conform to your rack-aware logic?


> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 23:20:59 2006
Return-Path: 
 <hadoop-dev-return-4968-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62002 invoked from network); 9 Nov 2006 23:20:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 23:20:59 -0000
Received: (qmail 9637 invoked by uid 500); 9 Nov 2006 23:21:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9404 invoked by uid 500); 9 Nov 2006 23:21:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9395 invoked by uid 99); 9 Nov 2006 23:21:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 15:21:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 15:20:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 66BEC7142FC
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 15:20:38 -0800 (PST)
Message-ID: <30223493.1163114438418.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 15:20:38 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-688) move dfs administrative interfaces
 to a separate command
In-Reply-To: <30661235.1162944051488.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-688?page=comments#action_12448609 ] 
            
Konstantin Shvachko commented on HADOOP-688:
--------------------------------------------

What about "format"?
Should we place it in dfsadmin group too?

> move dfs administrative interfaces to a separate command
> --------------------------------------------------------
>
>                 Key: HADOOP-688
>                 URL: http://issues.apache.org/jira/browse/HADOOP-688
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: admincommand.patch
>
>
> The dfs adminsitrative commands (e.g. safemode, report, etc) should be separate from the dfs user commands. The proposal is to remove the following two commands:
> bin/hadoop dfs -report
> bin/hadoop dfs -safemode
> The above two features will be available through a new command:
> bin/hadoop dfsadmin -report
> bin/hadoop dfsadmin -safemode
> This is done so that there is a clean distinction between cluster administrative commands and users command.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 23:28:00 2006
Return-Path: 
 <hadoop-dev-return-4969-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63512 invoked from network); 9 Nov 2006 23:28:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 23:28:00 -0000
Received: (qmail 20427 invoked by uid 500); 9 Nov 2006 23:28:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20392 invoked by uid 500); 9 Nov 2006 23:28:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20383 invoked by uid 99); 9 Nov 2006 23:28:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 15:28:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 15:27:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3D5147142FC
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 15:27:38 -0800 (PST)
Message-ID: <22422807.1163114858248.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 15:27:38 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-692?page=comments#action_12448612 ] 
            
Milind Bhandarkar commented on HADOOP-692:
------------------------------------------

rackId is associated with the datanode.
Automatic rebalancing is orthogonal to this proposal. The rebalancing feature will use the same chooseTargets method that implements this rack awareness, and so the replicas in that case will conform to the rack-aware logic.


> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 23:31:59 2006
Return-Path: 
 <hadoop-dev-return-4970-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64772 invoked from network); 9 Nov 2006 23:31:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 23:31:59 -0000
Received: (qmail 27228 invoked by uid 500); 9 Nov 2006 23:32:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27209 invoked by uid 500); 9 Nov 2006 23:32:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27200 invoked by uid 99); 9 Nov 2006 23:32:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 15:32:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 15:31:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 53ADD7142FC
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 15:31:38 -0800 (PST)
Message-ID: <2520016.1163115098340.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 15:31:38 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-688) move dfs administrative interfaces
 to a separate command
In-Reply-To: <30661235.1162944051488.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-688?page=comments#action_12448615 ] 
            
Milind Bhandarkar commented on HADOOP-688:
------------------------------------------

format command is not invoked currently through dfs shell, right ? It is invoked as bin/hadoop namenode -format.

> move dfs administrative interfaces to a separate command
> --------------------------------------------------------
>
>                 Key: HADOOP-688
>                 URL: http://issues.apache.org/jira/browse/HADOOP-688
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: admincommand.patch
>
>
> The dfs adminsitrative commands (e.g. safemode, report, etc) should be separate from the dfs user commands. The proposal is to remove the following two commands:
> bin/hadoop dfs -report
> bin/hadoop dfs -safemode
> The above two features will be available through a new command:
> bin/hadoop dfsadmin -report
> bin/hadoop dfsadmin -safemode
> This is done so that there is a clean distinction between cluster administrative commands and users command.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 23:39:00 2006
Return-Path: 
 <hadoop-dev-return-4971-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65740 invoked from network); 9 Nov 2006 23:39:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 23:39:00 -0000
Received: (qmail 36966 invoked by uid 500); 9 Nov 2006 23:39:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36845 invoked by uid 500); 9 Nov 2006 23:39:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36836 invoked by uid 99); 9 Nov 2006 23:39:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 15:39:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 15:38:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 63CDD7142F7
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 15:38:38 -0800 (PST)
Message-ID: <9944797.1163115518406.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 15:38:38 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-702) DFS Upgrade Proposal
In-Reply-To: <13641771.1163042497986.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-702?page=comments#action_12448617 ] 
            
Yoram Arnon commented on HADOOP-702:
------------------------------------

there are two things you can do with a snapshot: view individual files or roll back the entire FS.
We currently plan to support only the latter, more extreme option, typically used only in case of disasters, and that's typically non reversible, though it would be nice to allow the former as well.

snapshots are immutable, otherwise you get into the business of managing diverging branches, which I'd recommend against.
Rolling back with the option to roll forward implies your entire FS is read-only, limiting its usefulness, even for testing. The job tracker, for example, won't start on a read-only dfs, let alone execute jobs.

I'd recommend staying the course with non reversible rollbacks, while keeping in mind the desire for full snapshot functionality in future, which will allow read-only viewing of individual files or directories.

> DFS Upgrade Proposal
> --------------------
>
>                 Key: HADOOP-702
>                 URL: http://issues.apache.org/jira/browse/HADOOP-702
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Konstantin Shvachko
>         Attachments: DFSUpgradeProposal.html
>
>
> Currently the DFS cluster upgrade procedure is manual.
> http://wiki.apache.org/lucene-hadoop/Hadoop_Upgrade
> It is rather complicated and does not guarantee data recoverability in case of software errors or administrator mistakes.
> This is a description of utilities that make the upgrade process almost automatic and minimize chance of loosing or corrupting data.
> Please see the attached html file for details.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 23:46:59 2006
Return-Path: 
 <hadoop-dev-return-4972-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67803 invoked from network); 9 Nov 2006 23:46:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 23:46:59 -0000
Received: (qmail 51578 invoked by uid 500); 9 Nov 2006 23:47:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51556 invoked by uid 500); 9 Nov 2006 23:47:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51547 invoked by uid 99); 9 Nov 2006 23:47:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 15:47:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 15:46:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 417367142F7
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 15:46:38 -0800 (PST)
Message-ID: <27306697.1163115998265.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 15:46:38 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-688) move dfs administrative interfaces
 to a separate command
In-Reply-To: <30661235.1162944051488.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-688?page=comments#action_12448622 ] 
            
Yoram Arnon commented on HADOOP-688:
------------------------------------

I wonder...
Since hadoop has no notion of users, security or authentication, commands that can be executed remotely are open to misuse.
since the format command can only be executed locally on the namenode, it's relatively safe - you'd need to login to that node first.
It would perhaps be better to leave safemode as a local only command too, except for reporting.
But then again, anyone can execute rmr /, so this point is perhaps moot.

Had we had some security in place, formatting is most logically colocated with the other admin commands.

> move dfs administrative interfaces to a separate command
> --------------------------------------------------------
>
>                 Key: HADOOP-688
>                 URL: http://issues.apache.org/jira/browse/HADOOP-688
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: admincommand.patch
>
>
> The dfs adminsitrative commands (e.g. safemode, report, etc) should be separate from the dfs user commands. The proposal is to remove the following two commands:
> bin/hadoop dfs -report
> bin/hadoop dfs -safemode
> The above two features will be available through a new command:
> bin/hadoop dfsadmin -report
> bin/hadoop dfsadmin -safemode
> This is done so that there is a clean distinction between cluster administrative commands and users command.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov  9 23:59:31 2006
Return-Path: 
 <hadoop-dev-return-4973-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69085 invoked from network); 9 Nov 2006 23:59:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 23:59:31 -0000
Received: (qmail 67556 invoked by uid 500); 9 Nov 2006 23:59:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67326 invoked by uid 500); 9 Nov 2006 23:59:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67315 invoked by uid 99); 9 Nov 2006 23:59:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 15:59:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 15:59:22 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4123F7142F7
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 15:58:38 -0800 (PST)
Message-ID: <13620869.1163116718264.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 15:58:38 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-688) move dfs administrative interfaces
 to a separate command
In-Reply-To: <30661235.1162944051488.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-688?page=comments#action_12448625 ] 
            
dhruba borthakur commented on HADOOP-688:
-----------------------------------------

The dfsadmin command is mostly a cosmetic change until we have the 'security model' worked out in detail. For now, -safemode, -report and -decommission will be associated with dfsadmin. 

In future, we have to deal with appropriately placing 'format', 'fsck', etc with either dfs or dfsadmin command.

> move dfs administrative interfaces to a separate command
> --------------------------------------------------------
>
>                 Key: HADOOP-688
>                 URL: http://issues.apache.org/jira/browse/HADOOP-688
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: admincommand.patch
>
>
> The dfs adminsitrative commands (e.g. safemode, report, etc) should be separate from the dfs user commands. The proposal is to remove the following two commands:
> bin/hadoop dfs -report
> bin/hadoop dfs -safemode
> The above two features will be available through a new command:
> bin/hadoop dfsadmin -report
> bin/hadoop dfsadmin -safemode
> This is done so that there is a clean distinction between cluster administrative commands and users command.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 00:06:58 2006
Return-Path: 
 <hadoop-dev-return-4974-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71414 invoked from network); 10 Nov 2006 00:06:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 00:06:58 -0000
Received: (qmail 77860 invoked by uid 500); 10 Nov 2006 00:07:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77837 invoked by uid 500); 10 Nov 2006 00:07:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77828 invoked by uid 99); 10 Nov 2006 00:07:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 16:07:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 16:06:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 177887142FC
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 16:06:37 -0800 (PST)
Message-ID: <6117923.1163117197093.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 16:06:37 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-704) Reduce hangs at 33%
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Reduce hangs at 33%
-------------------

                 Key: HADOOP-704
                 URL: http://issues.apache.org/jira/browse/HADOOP-704
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.8.0
            Reporter: Nigel Daley


I have a MR job that is hanging when the reduce reaches 33%.

Both the map and reduce are no-ops.  The single reducer is continuously trying to retrieve output from a TaskTracker that seems to have a crashed "Acceptor 50060" thread.  (Note the thread crash does not seem to be logged anywhere).  The thread dump of the TaskTracker is as follows:

"org.apache.hadoop.dfs.DFSClient$LeaseChecker@1329642" daemon prio=1 tid=0x085abd68 nid=0x5b37 waiting on condition [0x4e979000..0x4e979f30]
        at java.lang.Thread.sleep(Native Method)
        at org.apache.hadoop.dfs.DFSClient$LeaseChecker.run(DFSClient.java:462)
        at java.lang.Thread.run(Thread.java:595)

"org.apache.hadoop.io.ObjectWritable Connection Culler" daemon prio=1 tid=0x0809fe18 nid=0x5b34 waiting on condition [0x4f1e5000..0x4f1e5eb0]
        at java.lang.Thread.sleep(Native Method)
        at org.apache.hadoop.ipc.Client$ConnectionCuller.run(Client.java:388)

"IPC Server handler 1 on 50050" daemon prio=1 tid=0x085b5d30 nid=0x57f8 in Object.wait() [0x4eafd000..0x4eafd130]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x5553ee10> (a java.util.LinkedList)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:490)
        - locked <0x5553ee10> (a java.util.LinkedList)

"IPC Server handler 0 on 50050" daemon prio=1 tid=0x085b57b0 nid=0x57f7 in Object.wait() [0x4eb7e000..0x4eb7e1b0]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x5553ee10> (a java.util.LinkedList)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:490)
        - locked <0x5553ee10> (a java.util.LinkedList)

"IPC Server listener on 50050" daemon prio=1 tid=0x083884d8 nid=0x57f6 runnable [0x4ebfe000..0x4ebff030]
        at sun.nio.ch.PollArrayWrapper.poll0(Native Method)
        at sun.nio.ch.PollArrayWrapper.poll(PollArrayWrapper.java:100)
        at sun.nio.ch.PollSelectorImpl.doSelect(PollSelectorImpl.java:56)
        at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)
        - locked <0x5553f3e8> (a sun.nio.ch.Util$1)
        - locked <0x5553f3d8> (a java.util.Collections$UnmodifiableSet)
        - locked <0x5553f150> (a sun.nio.ch.PollSelectorImpl)
        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)
        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:84)
        at org.apache.hadoop.ipc.Server$Listener.run(Server.java:224)

"btpool0-1 - Invalidator - /" prio=1 tid=0x08239ac0 nid=0x57f2 waiting on condition [0x4edfe000..0x4edfef30]
        at java.lang.Thread.sleep(Native Method)
        at org.mortbay.jetty.servlet.AbstractSessionManager$SessionScavenger.run(AbstractSessionManager.java:933)
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)

"taskCleanup" daemon prio=1 tid=0x0810fd60 nid=0x57ed in Object.wait() [0x4f6c0000..0x4f6c0e30]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x554dc650> (a java.util.ArrayList)
        at java.lang.Object.wait(Object.java:474)
        at org.apache.hadoop.mapred.TaskTracker$BlockingQueue.take(TaskTracker.java:783)
        - locked <0x554dc650> (a java.util.ArrayList)
        at org.apache.hadoop.mapred.TaskTracker$1.run(TaskTracker.java:143)
        at java.lang.Thread.run(Thread.java:595)

"Low Memory Detector" daemon prio=1 tid=0x509a54a8 nid=0x57ea runnable [0x00000000..0x00000000]

"CompilerThread1" daemon prio=1 tid=0x509a40c0 nid=0x57e9 waiting on condition [0x00000000..0x506793d8]

"CompilerThread0" daemon prio=1 tid=0x509a3138 nid=0x57e8 waiting on condition [0x00000000..0x506fa258]

"AdapterThread" daemon prio=1 tid=0x509a2170 nid=0x57e7 waiting on condition [0x00000000..0x00000000]

"Signal Dispatcher" daemon prio=1 tid=0x509a13e0 nid=0x57e6 runnable [0x00000000..0x00000000]

"Finalizer" daemon prio=1 tid=0x50998880 nid=0x57e5 in Object.wait() [0x5087d000..0x5087dfb0]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x554dca70> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:116)
        - locked <0x554dca70> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:132)
        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

"Reference Handler" daemon prio=1 tid=0x509983b8 nid=0x57e4 in Object.wait() [0x508fe000..0x508fee30]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x554c4450> (a java.lang.ref.Reference$Lock)
        at java.lang.Object.wait(Object.java:474)
        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)
        - locked <0x554c4450> (a java.lang.ref.Reference$Lock)

"main" prio=1 tid=0x0805e608 nid=0x57d2 in Object.wait() [0xdfffc000..0xdfffcd08]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x554dc7b0> (a [I)
        at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:436)
        - locked <0x554dc7b0> (a [I)
        at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
        at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)

"VM Thread" prio=1 tid=0x50996028 nid=0x57e3 runnable

"GC task thread#0 (ParallelGC)" prio=1 tid=0x08078cc8 nid=0x57df runnable

"GC task thread#1 (ParallelGC)" prio=1 tid=0x080798d0 nid=0x57e0 runnable

"GC task thread#2 (ParallelGC)" prio=1 tid=0x0807a4c0 nid=0x57e1 runnable

"GC task thread#3 (ParallelGC)" prio=1 tid=0x0807b0b0 nid=0x57e2 runnable

"VM Periodic Task Thread" prio=1 tid=0x509a6a10 nid=0x57eb waiting on condition


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 00:17:02 2006
Return-Path: 
 <hadoop-dev-return-4975-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73694 invoked from network); 10 Nov 2006 00:17:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 00:17:02 -0000
Received: (qmail 98555 invoked by uid 500); 10 Nov 2006 00:17:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98518 invoked by uid 500); 10 Nov 2006 00:17:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98502 invoked by uid 99); 10 Nov 2006 00:17:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 16:17:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 16:17:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D28B5714312
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 16:16:39 -0800 (PST)
Message-ID: <14754445.1163117799859.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 16:16:39 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-704) Reduce hangs at 33%
In-Reply-To: <6117923.1163117197093.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-704?page=comments#action_12448627 ] 
            
Mahadev konar commented on HADOOP-704:
--------------------------------------

should we have some max_retries to fetch the mapoutputs from a given tasktracker for a given mapoutput? In that case we could fail and ask the jobtracker to rexecute the map on a different node. Also can this crash be related to jetty 6 upgrade?

> Reduce hangs at 33%
> -------------------
>
>                 Key: HADOOP-704
>                 URL: http://issues.apache.org/jira/browse/HADOOP-704
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>
> I have a MR job that is hanging when the reduce reaches 33%.
> Both the map and reduce are no-ops.  The single reducer is continuously trying to retrieve output from a TaskTracker that seems to have a crashed "Acceptor 50060" thread.  (Note the thread crash does not seem to be logged anywhere).  The thread dump of the TaskTracker is as follows:
> "org.apache.hadoop.dfs.DFSClient$LeaseChecker@1329642" daemon prio=1 tid=0x085abd68 nid=0x5b37 waiting on condition [0x4e979000..0x4e979f30]
>         at java.lang.Thread.sleep(Native Method)
>         at org.apache.hadoop.dfs.DFSClient$LeaseChecker.run(DFSClient.java:462)
>         at java.lang.Thread.run(Thread.java:595)
> "org.apache.hadoop.io.ObjectWritable Connection Culler" daemon prio=1 tid=0x0809fe18 nid=0x5b34 waiting on condition [0x4f1e5000..0x4f1e5eb0]
>         at java.lang.Thread.sleep(Native Method)
>         at org.apache.hadoop.ipc.Client$ConnectionCuller.run(Client.java:388)
> "IPC Server handler 1 on 50050" daemon prio=1 tid=0x085b5d30 nid=0x57f8 in Object.wait() [0x4eafd000..0x4eafd130]
>         at java.lang.Object.wait(Native Method)
>         - waiting on <0x5553ee10> (a java.util.LinkedList)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:490)
>         - locked <0x5553ee10> (a java.util.LinkedList)
> "IPC Server handler 0 on 50050" daemon prio=1 tid=0x085b57b0 nid=0x57f7 in Object.wait() [0x4eb7e000..0x4eb7e1b0]
>         at java.lang.Object.wait(Native Method)
>         - waiting on <0x5553ee10> (a java.util.LinkedList)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:490)
>         - locked <0x5553ee10> (a java.util.LinkedList)
> "IPC Server listener on 50050" daemon prio=1 tid=0x083884d8 nid=0x57f6 runnable [0x4ebfe000..0x4ebff030]
>         at sun.nio.ch.PollArrayWrapper.poll0(Native Method)
>         at sun.nio.ch.PollArrayWrapper.poll(PollArrayWrapper.java:100)
>         at sun.nio.ch.PollSelectorImpl.doSelect(PollSelectorImpl.java:56)
>         at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)
>         - locked <0x5553f3e8> (a sun.nio.ch.Util$1)
>         - locked <0x5553f3d8> (a java.util.Collections$UnmodifiableSet)
>         - locked <0x5553f150> (a sun.nio.ch.PollSelectorImpl)
>         at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)
>         at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:84)
>         at org.apache.hadoop.ipc.Server$Listener.run(Server.java:224)
> "btpool0-1 - Invalidator - /" prio=1 tid=0x08239ac0 nid=0x57f2 waiting on condition [0x4edfe000..0x4edfef30]
>         at java.lang.Thread.sleep(Native Method)
>         at org.mortbay.jetty.servlet.AbstractSessionManager$SessionScavenger.run(AbstractSessionManager.java:933)
>         at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
> "taskCleanup" daemon prio=1 tid=0x0810fd60 nid=0x57ed in Object.wait() [0x4f6c0000..0x4f6c0e30]
>         at java.lang.Object.wait(Native Method)
>         - waiting on <0x554dc650> (a java.util.ArrayList)
>         at java.lang.Object.wait(Object.java:474)
>         at org.apache.hadoop.mapred.TaskTracker$BlockingQueue.take(TaskTracker.java:783)
>         - locked <0x554dc650> (a java.util.ArrayList)
>         at org.apache.hadoop.mapred.TaskTracker$1.run(TaskTracker.java:143)
>         at java.lang.Thread.run(Thread.java:595)
> "Low Memory Detector" daemon prio=1 tid=0x509a54a8 nid=0x57ea runnable [0x00000000..0x00000000]
> "CompilerThread1" daemon prio=1 tid=0x509a40c0 nid=0x57e9 waiting on condition [0x00000000..0x506793d8]
> "CompilerThread0" daemon prio=1 tid=0x509a3138 nid=0x57e8 waiting on condition [0x00000000..0x506fa258]
> "AdapterThread" daemon prio=1 tid=0x509a2170 nid=0x57e7 waiting on condition [0x00000000..0x00000000]
> "Signal Dispatcher" daemon prio=1 tid=0x509a13e0 nid=0x57e6 runnable [0x00000000..0x00000000]
> "Finalizer" daemon prio=1 tid=0x50998880 nid=0x57e5 in Object.wait() [0x5087d000..0x5087dfb0]
>         at java.lang.Object.wait(Native Method)
>         - waiting on <0x554dca70> (a java.lang.ref.ReferenceQueue$Lock)
>         at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:116)
>         - locked <0x554dca70> (a java.lang.ref.ReferenceQueue$Lock)
>         at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:132)
>         at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)
> "Reference Handler" daemon prio=1 tid=0x509983b8 nid=0x57e4 in Object.wait() [0x508fe000..0x508fee30]
>         at java.lang.Object.wait(Native Method)
>         - waiting on <0x554c4450> (a java.lang.ref.Reference$Lock)
>         at java.lang.Object.wait(Object.java:474)
>         at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)
>         - locked <0x554c4450> (a java.lang.ref.Reference$Lock)
> "main" prio=1 tid=0x0805e608 nid=0x57d2 in Object.wait() [0xdfffc000..0xdfffcd08]
>         at java.lang.Object.wait(Native Method)
>         - waiting on <0x554dc7b0> (a [I)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:436)
>         - locked <0x554dc7b0> (a [I)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)
> "VM Thread" prio=1 tid=0x50996028 nid=0x57e3 runnable
> "GC task thread#0 (ParallelGC)" prio=1 tid=0x08078cc8 nid=0x57df runnable
> "GC task thread#1 (ParallelGC)" prio=1 tid=0x080798d0 nid=0x57e0 runnable
> "GC task thread#2 (ParallelGC)" prio=1 tid=0x0807a4c0 nid=0x57e1 runnable
> "GC task thread#3 (ParallelGC)" prio=1 tid=0x0807b0b0 nid=0x57e2 runnable
> "VM Periodic Task Thread" prio=1 tid=0x509a6a10 nid=0x57eb waiting on condition

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 00:17:04 2006
Return-Path: 
 <hadoop-dev-return-4976-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73731 invoked from network); 10 Nov 2006 00:17:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 00:17:04 -0000
Received: (qmail 98804 invoked by uid 500); 10 Nov 2006 00:17:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98769 invoked by uid 500); 10 Nov 2006 00:17:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98760 invoked by uid 99); 10 Nov 2006 00:17:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 16:17:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 16:17:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 48EA4714314
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 16:16:41 -0800 (PST)
Message-ID: <31691416.1163117801296.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 16:16:41 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-702) DFS Upgrade Proposal
In-Reply-To: <13641771.1163042497986.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-702?page=comments#action_12448628 ] 
            
Konstantin Shvachko commented on HADOOP-702:
--------------------------------------------

Doug,
Do you mean a shell -list option to list FSSIDs?
Sure, if we displayed them in the web UI why not report the same via a shell command.

You actually can do rollback and preserve current version.
You need to upgrade current version to some new FSSID first then rollback to the old version.
But I agree this not very convenient.
So do we want to separate taking a snapshot to a special function?
It will still be a part of upgrade, we are just adding an api to call it independently?

Yoram,
I don't think we should require snapshots to be immutable.
The hard link scheme lets different versions coexist and being modified independently of each other.

> DFS Upgrade Proposal
> --------------------
>
>                 Key: HADOOP-702
>                 URL: http://issues.apache.org/jira/browse/HADOOP-702
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Konstantin Shvachko
>         Attachments: DFSUpgradeProposal.html
>
>
> Currently the DFS cluster upgrade procedure is manual.
> http://wiki.apache.org/lucene-hadoop/Hadoop_Upgrade
> It is rather complicated and does not guarantee data recoverability in case of software errors or administrator mistakes.
> This is a description of utilities that make the upgrade process almost automatic and minimize chance of loosing or corrupting data.
> Please see the attached html file for details.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 01:16:04 2006
Return-Path: 
 <hadoop-dev-return-4977-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90299 invoked from network); 10 Nov 2006 01:16:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 01:16:04 -0000
Received: (qmail 92477 invoked by uid 500); 10 Nov 2006 01:16:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92455 invoked by uid 500); 10 Nov 2006 01:16:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92443 invoked by uid 99); 10 Nov 2006 01:16:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 17:16:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 17:16:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 47D2A7142F7
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 17:15:41 -0800 (PST)
Message-ID: <13013389.1163121341291.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 17:15:41 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-702) DFS Upgrade Proposal
In-Reply-To: <13641771.1163042497986.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-702?page=comments#action_12448632 ] 
            
Yoram Arnon commented on HADOOP-702:
------------------------------------

read-write snapshots are possible, maybe even 'neat' from a technology standpoint.
They're just hard to manage. I know of no file systems then implement them though they're common in revision control systems.
I recommend against it in hdfs.

> DFS Upgrade Proposal
> --------------------
>
>                 Key: HADOOP-702
>                 URL: http://issues.apache.org/jira/browse/HADOOP-702
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Konstantin Shvachko
>         Attachments: DFSUpgradeProposal.html
>
>
> Currently the DFS cluster upgrade procedure is manual.
> http://wiki.apache.org/lucene-hadoop/Hadoop_Upgrade
> It is rather complicated and does not guarantee data recoverability in case of software errors or administrator mistakes.
> This is a description of utilities that make the upgrade process almost automatic and minimize chance of loosing or corrupting data.
> Please see the attached html file for details.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 02:00:58 2006
Return-Path: 
 <hadoop-dev-return-4978-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 915 invoked from network); 10 Nov 2006 02:00:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 02:00:58 -0000
Received: (qmail 36272 invoked by uid 500); 10 Nov 2006 02:01:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36246 invoked by uid 500); 10 Nov 2006 02:01:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36237 invoked by uid 99); 10 Nov 2006 02:01:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 18:01:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 18:00:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 305547142FA
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 18:00:37 -0800 (PST)
Message-ID: <4654952.1163124037194.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 18:00:37 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-705) IOException: job.xml already exists
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

IOException: job.xml already exists
-----------------------------------

                 Key: HADOOP-705
                 URL: http://issues.apache.org/jira/browse/HADOOP-705
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.8.0
            Reporter: Nigel Daley
         Assigned To: Mahadev konar


I'm seeing this exception in the JobTracker log.  It's caused the same map to fail enough that the job aborted.

2006-11-09 17:28:37,594 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0004_m_000588_2: Error 
initializing task_0004_m_000588_2:
java.io.IOException: Target /foobar/tmp/mapred/local/taskTracker/jobcache/job_0004/job.xml already exists
        at org.apache.hadoop.fs.FileUtil.checkDest(FileUtil.java:215)
        at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:61)
        at org.apache.hadoop.dfs.DistributedFileSystem.copyToLocalFile(DistributedFileSystem.java:192)
        at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:279)
        at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:691)
        at org.apache.hadoop.mapred.TaskTracker.checkForNewTasks(TaskTracker.java:533)
        at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:448)
        at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
        at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 02:23:58 2006
Return-Path: 
 <hadoop-dev-return-4979-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11612 invoked from network); 10 Nov 2006 02:23:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 02:23:58 -0000
Received: (qmail 55304 invoked by uid 500); 10 Nov 2006 02:24:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55083 invoked by uid 500); 10 Nov 2006 02:24:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55073 invoked by uid 99); 10 Nov 2006 02:24:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 18:24:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 18:23:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 24B717142F5
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 18:23:37 -0800 (PST)
Message-ID: <8743721.1163125417147.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 18:23:37 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-706) Optomize reduce phase when there is no
 map output
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Optomize reduce phase when there is no map output
-------------------------------------------------

                 Key: HADOOP-706
                 URL: http://issues.apache.org/jira/browse/HADOOP-706
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.8.0
            Reporter: Nigel Daley


When a map produces no output (does not call the collector), it seems desirable that the reduce phase should not attempt to download the 0 length map output file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 03:02:00 2006
Return-Path: 
 <hadoop-dev-return-4980-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16894 invoked from network); 10 Nov 2006 03:02:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 03:02:00 -0000
Received: (qmail 81023 invoked by uid 500); 10 Nov 2006 03:02:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80801 invoked by uid 500); 10 Nov 2006 03:02:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80792 invoked by uid 99); 10 Nov 2006 03:02:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 19:02:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 19:01:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5F8C57142F5
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 19:01:38 -0800 (PST)
Message-ID: <27888714.1163127698388.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 19:01:38 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-692?page=comments#action_12448637 ] 
            
Konstantin Shvachko commented on HADOOP-692:
--------------------------------------------

* Node locality
May be we should build cluster topology map based on network hops as a measure of node locality.
Rather than specifying externally which rack each node belongs to.
The map is built at startup. It takes O(#racks * #nodes) communications to partition all nodes into racks.
The topology map can be persistent, which will make it easier to restart the cluster.
We should keep the topology map separate to let e.g. map-reduce use it.
If a client runs on one of the cluster machines then it should know its rack both for reads and writes.
If not, then it is not applicable.
I like hierarchical topology map, like datacenters (2-3 hops). What is the distance between datacenters in hops?
But probably not too deep. The rest may be just considered relatively far away from each other.

* Replica placement
Is it far to say that the replica placement strategy is
- place first replica locally if possible (client runs from the cluster machine), if not - on an arbitrary node.
- place second replica on a different node on the same rack as the first node.
- place third replica on a different rack but in the same datacenter as the second node.
If we don't have further hierarchical level then
- place 4-th replica and all subsequent ones randomly on any node not yet selected.

* Different placement strategies
I think we should define an interface responsible for block placement
interface BlockReplicator {  // just an example
    chooseTargets();
    getTopology();
    distance(d1,d2);
    ............
}
So that we could implement different replication strategies and use them interchangeably
if not in the runtime then at least in compile time.

> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 03:56:00 2006
Return-Path: 
 <hadoop-dev-return-4981-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23145 invoked from network); 10 Nov 2006 03:56:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 03:56:00 -0000
Received: (qmail 22913 invoked by uid 500); 10 Nov 2006 03:56:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22887 invoked by uid 500); 10 Nov 2006 03:56:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22878 invoked by uid 99); 10 Nov 2006 03:56:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 19:56:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 19:55:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EF3C67142EC
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 19:55:38 -0800 (PST)
Message-ID: <28500813.1163130938977.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 19:55:38 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-705) IOException: job.xml already exists
In-Reply-To: <4654952.1163124037194.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-705?page=all ]

Mahadev konar updated HADOOP-705:
---------------------------------

    Attachment: jobxml.patch

this patch fixes the problem. The problem arose on a half execution of localizejob. this might happen when the namenode is very busy. The job.xml is copied but the job.jar isnt. So the job is not fully localized. The new task on the machine tries to localize the job but fails with the error mentioned. This patch deletes any presexisting job.xml if the job has not been fully localized and tries localizing the job again.

> IOException: job.xml already exists
> -----------------------------------
>
>                 Key: HADOOP-705
>                 URL: http://issues.apache.org/jira/browse/HADOOP-705
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Mahadev konar
>         Attachments: jobxml.patch
>
>
> I'm seeing this exception in the JobTracker log.  It's caused the same map to fail enough that the job aborted.
> 2006-11-09 17:28:37,594 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0004_m_000588_2: Error 
> initializing task_0004_m_000588_2:
> java.io.IOException: Target /foobar/tmp/mapred/local/taskTracker/jobcache/job_0004/job.xml already exists
>         at org.apache.hadoop.fs.FileUtil.checkDest(FileUtil.java:215)
>         at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:61)
>         at org.apache.hadoop.dfs.DistributedFileSystem.copyToLocalFile(DistributedFileSystem.java:192)
>         at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:279)
>         at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:691)
>         at org.apache.hadoop.mapred.TaskTracker.checkForNewTasks(TaskTracker.java:533)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:448)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 03:56:02 2006
Return-Path: 
 <hadoop-dev-return-4982-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23185 invoked from network); 10 Nov 2006 03:56:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 03:56:02 -0000
Received: (qmail 23361 invoked by uid 500); 10 Nov 2006 03:56:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23137 invoked by uid 500); 10 Nov 2006 03:56:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23128 invoked by uid 99); 10 Nov 2006 03:56:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 19:56:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 19:56:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E1DD27142F5
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 19:55:40 -0800 (PST)
Message-ID: <28562864.1163130940922.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 19:55:40 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-705) IOException: job.xml already exists
In-Reply-To: <4654952.1163124037194.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-705?page=all ]

Mahadev konar updated HADOOP-705:
---------------------------------

    Status: Patch Available  (was: Open)

> IOException: job.xml already exists
> -----------------------------------
>
>                 Key: HADOOP-705
>                 URL: http://issues.apache.org/jira/browse/HADOOP-705
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Mahadev konar
>         Attachments: jobxml.patch
>
>
> I'm seeing this exception in the JobTracker log.  It's caused the same map to fail enough that the job aborted.
> 2006-11-09 17:28:37,594 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0004_m_000588_2: Error 
> initializing task_0004_m_000588_2:
> java.io.IOException: Target /foobar/tmp/mapred/local/taskTracker/jobcache/job_0004/job.xml already exists
>         at org.apache.hadoop.fs.FileUtil.checkDest(FileUtil.java:215)
>         at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:61)
>         at org.apache.hadoop.dfs.DistributedFileSystem.copyToLocalFile(DistributedFileSystem.java:192)
>         at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:279)
>         at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:691)
>         at org.apache.hadoop.mapred.TaskTracker.checkForNewTasks(TaskTracker.java:533)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:448)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 06:24:00 2006
Return-Path: 
 <hadoop-dev-return-4983-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53371 invoked from network); 10 Nov 2006 06:24:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 06:24:00 -0000
Received: (qmail 60734 invoked by uid 500); 10 Nov 2006 06:24:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60706 invoked by uid 500); 10 Nov 2006 06:24:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60688 invoked by uid 99); 10 Nov 2006 06:24:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 22:24:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 22:23:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E5BF87142FA
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 22:23:38 -0800 (PST)
Message-ID: <25365540.1163139818938.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 22:23:38 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-661) JobConf for a job should be viewable
 from the web/ui
In-Reply-To: <20147831.1162333456586.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-661?page=all ]

Arun C Murthy reassigned HADOOP-661:
------------------------------------

    Assignee: Arun C Murthy  (was: Owen O'Malley)

> JobConf for a job should be viewable from the web/ui
> ----------------------------------------------------
>
>                 Key: HADOOP-661
>                 URL: http://issues.apache.org/jira/browse/HADOOP-661
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>
> It would be very useful to be able to see the JobConf for a job from the web/ui. I would add a link from the job detail page to an xml dump of the JobConf which uses a variant of the configuration.xsl, which I would add to the webapps/static directory, to display it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 06:24:02 2006
Return-Path: 
 <hadoop-dev-return-4984-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53413 invoked from network); 10 Nov 2006 06:24:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 06:24:02 -0000
Received: (qmail 61195 invoked by uid 500); 10 Nov 2006 06:24:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60969 invoked by uid 500); 10 Nov 2006 06:24:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60960 invoked by uid 99); 10 Nov 2006 06:24:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 22:24:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 22:24:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E50F47142FC
	for <hadoop-dev@lucene.apache.org>; Thu,  9 Nov 2006 22:23:40 -0800 (PST)
Message-ID: <29628825.1163139820935.JavaMail.jira@brutus>
Date: Thu, 9 Nov 2006 22:23:40 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-661) JobConf for a job should be
 viewable from the web/ui
In-Reply-To: <20147831.1162333456586.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-661?page=all ]

Work on HADOOP-661 started by Arun C Murthy.

> JobConf for a job should be viewable from the web/ui
> ----------------------------------------------------
>
>                 Key: HADOOP-661
>                 URL: http://issues.apache.org/jira/browse/HADOOP-661
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>
> It would be very useful to be able to see the JobConf for a job from the web/ui. I would add a link from the job detail page to an xml dump of the JobConf which uses a variant of the configuration.xsl, which I would add to the webapps/static directory, to display it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 08:19:01 2006
Return-Path: 
 <hadoop-dev-return-4985-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80850 invoked from network); 10 Nov 2006 08:19:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 08:19:01 -0000
Received: (qmail 80866 invoked by uid 500); 10 Nov 2006 08:19:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80641 invoked by uid 500); 10 Nov 2006 08:19:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80632 invoked by uid 99); 10 Nov 2006 08:19:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 00:19:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 00:19:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 34FF27142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 00:18:40 -0800 (PST)
Message-ID: <4688728.1163146720214.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 00:18:40 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Attachment:     (was: Hadoop-76_2.patch)

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, Hadoop-76_2.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 08:19:04 2006
Return-Path: 
 <hadoop-dev-return-4986-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80901 invoked from network); 10 Nov 2006 08:19:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 08:19:04 -0000
Received: (qmail 80919 invoked by uid 500); 10 Nov 2006 08:19:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80895 invoked by uid 500); 10 Nov 2006 08:19:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80886 invoked by uid 99); 10 Nov 2006 08:19:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 00:19:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 00:19:03 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 609E4714314
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 00:18:43 -0800 (PST)
Message-ID: <10963934.1163146723393.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 00:18:43 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Attachment: Hadoop-76_2.patch

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, Hadoop-76_2.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 12:19:04 2006
Return-Path: 
 <hadoop-dev-return-4987-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34432 invoked from network); 10 Nov 2006 12:19:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 12:19:04 -0000
Received: (qmail 99524 invoked by uid 500); 10 Nov 2006 12:19:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99495 invoked by uid 500); 10 Nov 2006 12:19:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99478 invoked by uid 99); 10 Nov 2006 12:19:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 04:19:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 04:18:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6A0457142F7
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 04:18:38 -0800 (PST)
Message-ID: <17738951.1163161118431.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 04:18:38 -0800 (PST)
From: "Vladimir Krokhmalyov (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-652) Not all Datastructures are updated
 when a block is deleted
In-Reply-To: <8743293.1161975076609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-652?page=comments#action_12448720 ] 
            
Vladimir Krokhmalyov commented on HADOOP-652:
---------------------------------------------

I create and delete a lot of files in DFS, so I see that speed of DataNode extremely go down!

> a) currently subdirectories are created only in the last sub directory (e.g. subdir63).

Not only subdir63. After the DataNode restarts, subdirectories will be created in other subdirXY, because "File[] files = dir.listFiles();" in FSDir constructor lists subdirectories and files in arbitrary order and last subdirectory will be other. Two branches: subdir63 and other one. It is not bug. Other code process this type of tree properly.

> b) remove siblings array I think it only increase s recursion in addBlock().

Recursion is not good idea, because it very slow when DataNode stores a lot of blocks. I think this algorithm should be changed in the future.



Here is my tested solution of this bug:

New method clearPath() in FSDir:

>        void clearPath( File f ) {
>         if ( dir.compareTo( f ) == 0 ) numBlocks--;
>         else {
>          if ( ( siblings != null ) && ( myIdx != ( siblings.length - 1 ) ) )
>           siblings[ myIdx + 1 ].clearPath( f );
>          else if ( children != null )
>           children[ 0 ].clearPath( f );
>         }
>        }

New method clearPath() in FSVolume:

>      void clearPath( File f ) {
>          dataDir.clearPath( f );
>      }

Changes in invalidate() method in FSDataset:

<        blockMap.remove(invalidBlks[i]);

>        synchronized ( ongoingCreates ) {
>        blockMap.remove( invalidBlks[ i ] );
>             FSVolume v = volumeMap.get( invalidBlks[ i ] );
>        volumeMap.remove( invalidBlks[ i ] );
>        v.clearPath( f.getParentFile() );
>       }

And changes in getFile() method in FSDataset:

<     return blockMap.get(b);

>     synchronized ( ongoingCreates ) {
>      return blockMap.get( b );
>     }

Now I will try to create patch file properly.

P.S. Also I set dfs.blockreport.intervalMsec = 10000 ( 10 - 30 sec ) in order to prevent lowering NameNode's speed. Because NameNode holds deleted blocks in its datastructures across block reports.


> Not all Datastructures are updated when a block is deleted
> ----------------------------------------------------------
>
>                 Key: HADOOP-652
>                 URL: http://issues.apache.org/jira/browse/HADOOP-652
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>
> Currently when a block is deleted, DataNode just deletes the physical file and updates its map. We need to update more things. For e.g. numBlocks in FSDir is not decremented.. effect of this would be that we will create more subdirectories than necessary. It might not show up badly yet since numBlocks gets correct value when the dataNode restarts. I have to see what else needs to be updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 13:24:04 2006
Return-Path: 
 <hadoop-dev-return-4988-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57677 invoked from network); 10 Nov 2006 13:24:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 13:24:04 -0000
Received: (qmail 28324 invoked by uid 500); 10 Nov 2006 13:24:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28282 invoked by uid 500); 10 Nov 2006 13:24:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28272 invoked by uid 99); 10 Nov 2006 13:24:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 05:24:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 05:23:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 56AE17142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 05:23:38 -0800 (PST)
Message-ID: <10424547.1163165018350.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 05:23:38 -0800 (PST)
From: "Vladimir Krokhmalyov (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-652) Not all Datastructures are updated
 when a block is deleted
In-Reply-To: <8743293.1161975076609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-652?page=all ]

Vladimir Krokhmalyov updated HADOOP-652:
----------------------------------------

               Status: Patch Available  (was: Open)
    Affects Version/s: 0.8.0

diff FSDataset.java.org FSDataset.java.my > FSDataset.java.patch

> Not all Datastructures are updated when a block is deleted
> ----------------------------------------------------------
>
>                 Key: HADOOP-652
>                 URL: http://issues.apache.org/jira/browse/HADOOP-652
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Raghu Angadi
>
> Currently when a block is deleted, DataNode just deletes the physical file and updates its map. We need to update more things. For e.g. numBlocks in FSDir is not decremented.. effect of this would be that we will create more subdirectories than necessary. It might not show up badly yet since numBlocks gets correct value when the dataNode restarts. I have to see what else needs to be updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 13:28:01 2006
Return-Path: 
 <hadoop-dev-return-4989-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58186 invoked from network); 10 Nov 2006 13:28:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 13:28:01 -0000
Received: (qmail 38651 invoked by uid 500); 10 Nov 2006 13:28:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38610 invoked by uid 500); 10 Nov 2006 13:28:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38601 invoked by uid 99); 10 Nov 2006 13:28:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 05:28:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 05:27:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 405547142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 05:27:38 -0800 (PST)
Message-ID: <2111477.1163165258261.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 05:27:38 -0800 (PST)
From: "Vladimir Krokhmalyov (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-652) Not all Datastructures are updated
 when a block is deleted
In-Reply-To: <8743293.1161975076609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-652?page=all ]

Vladimir Krokhmalyov updated HADOOP-652:
----------------------------------------

    Attachment: FSDataset.java.patch

> Not all Datastructures are updated when a block is deleted
> ----------------------------------------------------------
>
>                 Key: HADOOP-652
>                 URL: http://issues.apache.org/jira/browse/HADOOP-652
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Raghu Angadi
>         Attachments: FSDataset.java.patch
>
>
> Currently when a block is deleted, DataNode just deletes the physical file and updates its map. We need to update more things. For e.g. numBlocks in FSDir is not decremented.. effect of this would be that we will create more subdirectories than necessary. It might not show up badly yet since numBlocks gets correct value when the dataNode restarts. I have to see what else needs to be updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 14:11:01 2006
Return-Path: 
 <hadoop-dev-return-4990-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71803 invoked from network); 10 Nov 2006 14:11:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 14:11:01 -0000
Received: (qmail 23054 invoked by uid 500); 10 Nov 2006 14:11:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23033 invoked by uid 500); 10 Nov 2006 14:11:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23024 invoked by uid 99); 10 Nov 2006 14:11:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 06:11:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 06:11:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 047467142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 06:10:39 -0800 (PST)
Message-ID: <13061666.1163167839014.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 06:10:39 -0800 (PST)
From: "Tom White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-574?page=comments#action_12448741 ] 
            
Tom White commented on HADOOP-574:
----------------------------------

I've started work on this using a simple block design that borrows heavily from DFS. (I did a similar thing for the Java Map interface - although it was simpler - http://weblogs.java.net/blog/tomwhite/archive/2006/08/s3map.html) I should have something to show next week for discussion and review.

Any suggestions on which package should this go in? org.hadoop.s3fs or org.hadoop.fs.s3, or something else?

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>            Reporter: Doug Cutting
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 14:32:58 2006
Return-Path: 
 <hadoop-dev-return-4991-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88537 invoked from network); 10 Nov 2006 14:32:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 14:32:58 -0000
Received: (qmail 72514 invoked by uid 500); 10 Nov 2006 14:33:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72368 invoked by uid 500); 10 Nov 2006 14:33:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72356 invoked by uid 99); 10 Nov 2006 14:33:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 06:33:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 06:32:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1F1317142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 06:32:37 -0800 (PST)
Message-ID: <30328258.1163169157124.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 06:32:37 -0800 (PST)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-707) Final map task gets stuck
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Final map task gets stuck
-------------------------

                 Key: HADOOP-707
                 URL: http://issues.apache.org/jira/browse/HADOOP-707
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.8.0
         Environment: using latest trunk
            Reporter: Johan Oskarson
            Priority: Critical


I've seen numerous jobs lately where the final map task gets stuck, never finishing.
The jobtracker doesn't reassign the task. A restart of the tasktracker solves the issue and the job can finish.
In the web interface it turns up as:

task_0028_m_000534_0 node17.herd1 RUNNING 0.00%    10-Nov-2006 12:21:12 10-Nov-2006 12:22:19 (1mins, 6sec)
Task failed to report status for 604 seconds. Killing.

Only exception I find in that tasktracker log is this (a few times):
java.nio.channels.ClosedChannelException
        at sun.nio.ch.SocketChannelImpl.ensureWriteOpen(SocketChannelImpl.java:125)
        at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:294)
        at org.apache.hadoop.ipc.SocketChannelOutputStream.flushBuffer(SocketChannelOutputStream.java:108)
        at org.apache.hadoop.ipc.SocketChannelOutputStream.write(SocketChannelOutputStream.java:89)
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
        at java.io.DataOutputStream.flush(DataOutputStream.java:106)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:532)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 14:51:02 2006
Return-Path: 
 <hadoop-dev-return-4992-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96934 invoked from network); 10 Nov 2006 14:51:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 14:51:02 -0000
Received: (qmail 16719 invoked by uid 500); 10 Nov 2006 14:51:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16695 invoked by uid 500); 10 Nov 2006 14:51:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16686 invoked by uid 99); 10 Nov 2006 14:51:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 06:51:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 06:51:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 90E2B7142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 06:50:40 -0800 (PST)
Message-ID: <18702586.1163170240590.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 06:50:40 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Attachment:     (was: Hadoop-76_2.patch)

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 14:55:04 2006
Return-Path: 
 <hadoop-dev-return-4993-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97916 invoked from network); 10 Nov 2006 14:55:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 14:55:04 -0000
Received: (qmail 23622 invoked by uid 500); 10 Nov 2006 14:55:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23596 invoked by uid 500); 10 Nov 2006 14:55:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23587 invoked by uid 99); 10 Nov 2006 14:55:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 06:55:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 06:55:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5E86A7142F9
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 06:54:42 -0800 (PST)
Message-ID: <29926500.1163170482383.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 06:54:42 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Attachment: Hadoop-76_2.patch

Updated patch, earlier patch was causing PiEstimator test to fail. It was closing fs before ReduceTask, and Piestimator reduce task's close opens a new file causing it to fail. It is fixed now. TextInputFormat test still fails but I guess thats due to HADOOP-696. 

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, Hadoop-76_2.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 16:58:01 2006
Return-Path: 
 <hadoop-dev-return-4994-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46477 invoked from network); 10 Nov 2006 16:58:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 16:58:01 -0000
Received: (qmail 48270 invoked by uid 500); 10 Nov 2006 16:58:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48044 invoked by uid 500); 10 Nov 2006 16:58:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48035 invoked by uid 99); 10 Nov 2006 16:58:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 08:58:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 08:57:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D01AF7142F9
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 08:57:38 -0800 (PST)
Message-ID: <10715338.1163177858849.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 08:57:38 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-652) Not all Datastructures are updated
 when a block is deleted
In-Reply-To: <8743293.1161975076609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-652?page=comments#action_12448799 ] 
            
Raghu Angadi commented on HADOOP-652:
-------------------------------------


You should update your code. FSDataset.java  has changed recently. Also do a 'diff -u' for submitting a patch.

This fixes only updating numBlock and does not fix recursion. I am thinking of fixing both (a) and (b) in comment #1 above.


> Not all Datastructures are updated when a block is deleted
> ----------------------------------------------------------
>
>                 Key: HADOOP-652
>                 URL: http://issues.apache.org/jira/browse/HADOOP-652
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Raghu Angadi
>         Attachments: FSDataset.java.patch
>
>
> Currently when a block is deleted, DataNode just deletes the physical file and updates its map. We need to update more things. For e.g. numBlocks in FSDir is not decremented.. effect of this would be that we will create more subdirectories than necessary. It might not show up badly yet since numBlocks gets correct value when the dataNode restarts. I have to see what else needs to be updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 17:49:01 2006
Return-Path: 
 <hadoop-dev-return-4995-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65716 invoked from network); 10 Nov 2006 17:49:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 17:49:01 -0000
Received: (qmail 70198 invoked by uid 500); 10 Nov 2006 17:49:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69957 invoked by uid 500); 10 Nov 2006 17:49:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69947 invoked by uid 99); 10 Nov 2006 17:49:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 09:49:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 09:48:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 942447142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 09:48:39 -0800 (PST)
Message-ID: <20119040.1163180919604.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 09:48:39 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-574?page=comments#action_12448810 ] 
            
Doug Cutting commented on HADOOP-574:
-------------------------------------

> I've started work 

Great!  Jim Kellerman (jim at powerset dot com)  has also privately expressed interest in implementing this.  Perhaps you can collaborate?

> which package should this go in? org.hadoop.s3fs or org.hadoop.fs.s3, or something else?

Let's go with org.apache.hadoop.fs.s3.  Someday we should probably move dfs into a subpackage of fs...

Are you going to attack HADOOP-571 too, or is anyone else working on that?  Otherwise it will be hard to configure a cluster whose default filesystem is S3, or to submit a MapReduce job whose input or output use a non-default filesystem.


> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>            Reporter: Doug Cutting
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 17:51:04 2006
Return-Path: 
 <hadoop-dev-return-4996-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66167 invoked from network); 10 Nov 2006 17:51:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 17:51:04 -0000
Received: (qmail 74777 invoked by uid 500); 10 Nov 2006 17:51:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74757 invoked by uid 500); 10 Nov 2006 17:51:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74746 invoked by uid 99); 10 Nov 2006 17:51:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 09:51:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 09:50:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 87F4B7142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 09:50:39 -0800 (PST)
Message-ID: <25410206.1163181039554.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 09:50:39 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-574?page=comments#action_12448811 ] 
            
Doug Cutting commented on HADOOP-574:
-------------------------------------

Here're some thoughts I sent Jim about this:

DFS stores files as a sequence of ~100MB blocks.  I think a scheme like this will be useful for an S3-based FileSystem too.

When creating, each DFS block is first written locally to a temporary file, and, only when the block is full (or the file is closed) is the block actually written to DFS.  This is instead of trying to trickle things to the network as they're written, which can run into timeout issues, etc.  It also means that when a block write fails it can be easily retried.

Very large files (up to a terabyte) should be supported.  Breaking things into blocks should help here too.  S3 limits an object value to 5GB.  So each file can be represented as a set of ~100MB S3 object values.  The set can be listed when the file is opened and used to guide seeks and reads of the data.  The block number can be placed at the end of the name using a delimiter, so that access to metadata is not required when opening files or listing directories.


> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>            Reporter: Doug Cutting
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 18:40:00 2006
Return-Path: 
 <hadoop-dev-return-4997-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78427 invoked from network); 10 Nov 2006 18:40:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 18:40:00 -0000
Received: (qmail 62406 invoked by uid 500); 10 Nov 2006 18:40:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62380 invoked by uid 500); 10 Nov 2006 18:40:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62371 invoked by uid 99); 10 Nov 2006 18:40:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 10:40:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 10:39:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 45F027142F9
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 10:39:38 -0800 (PST)
Message-ID: <19098188.1163183978283.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 10:39:38 -0800 (PST)
From: "Koji Noguchi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-692?page=comments#action_12448818 ] 
            
Koji Noguchi commented on HADOOP-692:
-------------------------------------

If the nodes are connected with switches, I think it'll be hard to figure out how many 'hops' there are between nodes.
Switches are transparent to the nodes.
For example, traceroute only shows the routers and not the switches.



> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 19:11:00 2006
Return-Path: 
 <hadoop-dev-return-4998-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5980 invoked from network); 10 Nov 2006 19:11:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 19:11:00 -0000
Received: (qmail 22000 invoked by uid 500); 10 Nov 2006 19:11:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21978 invoked by uid 500); 10 Nov 2006 19:11:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21969 invoked by uid 99); 10 Nov 2006 19:11:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:11:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:10:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 44B157142F9
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 11:10:38 -0800 (PST)
Message-ID: <8471884.1163185838278.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 11:10:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-692?page=comments#action_12448822 ] 
            
Doug Cutting commented on HADOOP-692:
-------------------------------------

We need an extensible API for describing network topology & distance.  Here's stab at one.

public Interface NetworkLocatable {
  /** Return the names of each network level of this node: host, rack, datacenter, etc. */
  String[] getNetworkLocation();
}

It is tempting to use something more abstract, e.g. a distance method, but that would not provide a concise indication of the topology, and would require linear scans, or storage of a full distance matrix, when, e.g., placing blocks.

As a first implementation, I like the idea of trying to distribute blocks to increasing network levels: first to the same host, then to the same rack, then to the same datacenter, etc. until the replication level is exhausted.  If the replication level is higher than the number of levels, then a uniform distribution at the highest level should be sought.

Down the road we may wish to make this strategy extensible, or to have a more elaborate distance calculation, but we can first probably get a lot of milage from this simple model.

> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 19:13:01 2006
Return-Path: 
 <hadoop-dev-return-4999-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6256 invoked from network); 10 Nov 2006 19:13:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 19:13:01 -0000
Received: (qmail 23624 invoked by uid 500); 10 Nov 2006 19:13:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23471 invoked by uid 500); 10 Nov 2006 19:13:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23462 invoked by uid 99); 10 Nov 2006 19:13:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:13:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:13:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 79A867142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 11:12:40 -0800 (PST)
Message-ID: <15818791.1163185960495.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 11:12:40 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-705) IOException: job.xml already exists
In-Reply-To: <4654952.1163124037194.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-705?page=comments#action_12448824 ] 
            
Nigel Daley commented on HADOOP-705:
------------------------------------

+1

This patch fixes the issue.  In addition, "ant clean compile test tar" is successfull when this patch is applied against revision 473426.

> IOException: job.xml already exists
> -----------------------------------
>
>                 Key: HADOOP-705
>                 URL: http://issues.apache.org/jira/browse/HADOOP-705
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Mahadev konar
>         Attachments: jobxml.patch
>
>
> I'm seeing this exception in the JobTracker log.  It's caused the same map to fail enough that the job aborted.
> 2006-11-09 17:28:37,594 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0004_m_000588_2: Error 
> initializing task_0004_m_000588_2:
> java.io.IOException: Target /foobar/tmp/mapred/local/taskTracker/jobcache/job_0004/job.xml already exists
>         at org.apache.hadoop.fs.FileUtil.checkDest(FileUtil.java:215)
>         at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:61)
>         at org.apache.hadoop.dfs.DistributedFileSystem.copyToLocalFile(DistributedFileSystem.java:192)
>         at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:279)
>         at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:691)
>         at org.apache.hadoop.mapred.TaskTracker.checkForNewTasks(TaskTracker.java:533)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:448)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 19:19:01 2006
Return-Path: 
 <hadoop-dev-return-5000-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7732 invoked from network); 10 Nov 2006 19:19:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 19:19:01 -0000
Received: (qmail 36837 invoked by uid 500); 10 Nov 2006 19:19:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36813 invoked by uid 500); 10 Nov 2006 19:19:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36804 invoked by uid 99); 10 Nov 2006 19:19:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:19:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:18:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 47FFD7142F9
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 11:18:38 -0800 (PST)
Message-ID: <3925621.1163186318292.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 11:18:38 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-692?page=comments#action_12448827 ] 
            
Hairong Kuang commented on HADOOP-692:
--------------------------------------

Is there any way that we could find out distance (#hops) between two nodes at runtime? Traceout prints all the hops but it has to run at one of the node.

Once the namenode could find out the distance between any two nodes, it can find out which nodes belong to the same rack (nodes has a distance of 1 belong to a same rack). It can also get the distance between any two racks.

Once the name node has this distance info, it can perform the following rack-aware optimizations:
1. replica placement policy
     It's similar to what Konstantin proposed but with a slight change. 
     - place the first replica in a node closest to the writer.
     - place the 2nd replica on a different node on the same rack as the 1st node.
     - place the 3rd replica on a different rack with a distance of 2 to the first node.
     - place the rest of the replicas on a random not-yet-selected one.
2. orgnize the write pipeline in the ascending order of distance to the writer.
3. for reading, the best node is defined as the node closiest to the reader



> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 19:23:16 2006
Return-Path: 
 <hadoop-dev-return-5001-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10452 invoked from network); 10 Nov 2006 19:23:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 19:23:16 -0000
Received: (qmail 47056 invoked by uid 500); 10 Nov 2006 19:23:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47028 invoked by uid 500); 10 Nov 2006 19:23:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47010 invoked by uid 99); 10 Nov 2006 19:23:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:23:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:22:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A38D57142F9
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 11:22:38 -0800 (PST)
Message-ID: <33078597.1163186558666.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 11:22:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-689) hadoop should provide a common way
 to wrap instances with different types into one type
In-Reply-To: <2487900.1162955810892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-689?page=comments#action_12448829 ] 
            
Doug Cutting commented on HADOOP-689:
-------------------------------------

Overall this looks good.  A few issues.

1. A new array of classes should not be allocated for each call to readFields().  Perhaps instead introspection should be used to call a static getTypes() method and somehow cache this per subclass.  At the least, the example code should create the array as a static field, and then have the getTypes() implementation return a reference to this.

2. set(), get(), and getTypes() need javadoc.


> hadoop should provide a common way to wrap instances with different types into one type
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-689
>                 URL: http://issues.apache.org/jira/browse/HADOOP-689
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>         Environment: All environment
>            Reporter: Feng Jiang
>         Attachments: HADOOP-689.patch
>
>
> When two sequence files, which have same Key type but different Value types, are mapped out to reduce, multiple Value types is not allowed. In this case, we need a way to wrap instances with different types into one class type to reduce.
> In current code, ObjectWritable is a sole choice. but it costs too many space, because the class declaration will be appended into output file as a string for every Key-value pair.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 19:23:18 2006
Return-Path: 
 <hadoop-dev-return-5002-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10482 invoked from network); 10 Nov 2006 19:23:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 19:23:18 -0000
Received: (qmail 47406 invoked by uid 500); 10 Nov 2006 19:23:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47383 invoked by uid 500); 10 Nov 2006 19:23:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47367 invoked by uid 99); 10 Nov 2006 19:23:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:23:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:23:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B3AC27142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 11:22:40 -0800 (PST)
Message-ID: <1029729.1163186560733.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 11:22:40 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-689) hadoop should provide a common way to
 wrap instances with different types into one type
In-Reply-To: <2487900.1162955810892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-689?page=all ]

Doug Cutting updated HADOOP-689:
--------------------------------

    Status: Open  (was: Patch Available)

> hadoop should provide a common way to wrap instances with different types into one type
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-689
>                 URL: http://issues.apache.org/jira/browse/HADOOP-689
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>         Environment: All environment
>            Reporter: Feng Jiang
>         Attachments: HADOOP-689.patch
>
>
> When two sequence files, which have same Key type but different Value types, are mapped out to reduce, multiple Value types is not allowed. In this case, we need a way to wrap instances with different types into one class type to reduce.
> In current code, ObjectWritable is a sole choice. but it costs too many space, because the class declaration will be appended into output file as a string for every Key-value pair.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 19:27:00 2006
Return-Path: 
 <hadoop-dev-return-5003-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12934 invoked from network); 10 Nov 2006 19:27:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 19:27:00 -0000
Received: (qmail 59295 invoked by uid 500); 10 Nov 2006 19:27:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59263 invoked by uid 500); 10 Nov 2006 19:27:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59254 invoked by uid 99); 10 Nov 2006 19:27:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:27:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:26:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5B61C7142F9
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 11:26:38 -0800 (PST)
Message-ID: <29197357.1163186798370.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 11:26:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-696) TestTextInputFormat fails on some
 platforms due to non-determinism in format.getSplits()
In-Reply-To: <16375149.1163024332952.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-696?page=all ]

Doug Cutting updated HADOOP-696:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Sameer!

> TestTextInputFormat fails on some platforms due to non-determinism in format.getSplits()
> ----------------------------------------------------------------------------------------
>
>                 Key: HADOOP-696
>                 URL: http://issues.apache.org/jira/browse/HADOOP-696
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Sameer Paranjpye
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: reorder-splits.txt
>
>
> TestTextInputFormat depends on format.getSplits() returning splits in the order they were created. On a local filesystem getSplits() depends on File.list(), the order produced by which is non-deterministic. This causes the test to fail on some platforms.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 19:50:00 2006
Return-Path: 
 <hadoop-dev-return-5004-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22037 invoked from network); 10 Nov 2006 19:50:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 19:50:00 -0000
Received: (qmail 1427 invoked by uid 500); 10 Nov 2006 19:50:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1402 invoked by uid 500); 10 Nov 2006 19:50:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1393 invoked by uid 99); 10 Nov 2006 19:50:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:50:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:49:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1BA1771430F
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 11:49:37 -0800 (PST)
Message-ID: <13217667.1163188177110.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 11:49:37 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-708) test-libhdfs.sh does not properly
 capture and return error status
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

test-libhdfs.sh does not properly capture and return error status
-----------------------------------------------------------------

                 Key: HADOOP-708
                 URL: http://issues.apache.org/jira/browse/HADOOP-708
             Project: Hadoop
          Issue Type: Bug
          Components: test
    Affects Versions: 0.8.0
            Reporter: Nigel Daley


The BUILD_STATUS variable in test-libhdfs.sh incorrectly attempts to capture the return value of running hdfs_test.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 19:53:02 2006
Return-Path: 
 <hadoop-dev-return-5005-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22450 invoked from network); 10 Nov 2006 19:53:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 19:53:02 -0000
Received: (qmail 3552 invoked by uid 500); 10 Nov 2006 19:53:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3524 invoked by uid 500); 10 Nov 2006 19:53:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3512 invoked by uid 99); 10 Nov 2006 19:53:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:53:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:52:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AD04F71430F
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 11:52:39 -0800 (PST)
Message-ID: <14403296.1163188359705.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 11:52:39 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-708) test-libhdfs.sh does not properly
 capture and return error status
In-Reply-To: <13217667.1163188177110.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-708?page=all ]

Nigel Daley updated HADOOP-708:
-------------------------------

    Attachment: HADOOP-708.patch

correct build status capture
echo's exit code

> test-libhdfs.sh does not properly capture and return error status
> -----------------------------------------------------------------
>
>                 Key: HADOOP-708
>                 URL: http://issues.apache.org/jira/browse/HADOOP-708
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>             Fix For: 0.8.1
>
>         Attachments: HADOOP-708.patch
>
>
> The BUILD_STATUS variable in test-libhdfs.sh incorrectly attempts to capture the return value of running hdfs_test.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 19:53:03 2006
Return-Path: 
 <hadoop-dev-return-5006-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22485 invoked from network); 10 Nov 2006 19:53:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 19:53:03 -0000
Received: (qmail 3836 invoked by uid 500); 10 Nov 2006 19:53:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3809 invoked by uid 500); 10 Nov 2006 19:53:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3800 invoked by uid 99); 10 Nov 2006 19:53:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:53:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 11:53:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3FE9B7142F9
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 11:52:41 -0800 (PST)
Message-ID: <28343823.1163188361258.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 11:52:41 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-708) test-libhdfs.sh does not properly
 capture and return error status
In-Reply-To: <13217667.1163188177110.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-708?page=all ]

Nigel Daley updated HADOOP-708:
-------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.8.1
         Assignee: Nigel Daley

> test-libhdfs.sh does not properly capture and return error status
> -----------------------------------------------------------------
>
>                 Key: HADOOP-708
>                 URL: http://issues.apache.org/jira/browse/HADOOP-708
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>             Fix For: 0.8.1
>
>         Attachments: HADOOP-708.patch
>
>
> The BUILD_STATUS variable in test-libhdfs.sh incorrectly attempts to capture the return value of running hdfs_test.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:04:02 2006
Return-Path: 
 <hadoop-dev-return-5007-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25304 invoked from network); 10 Nov 2006 20:04:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:04:02 -0000
Received: (qmail 22776 invoked by uid 500); 10 Nov 2006 20:04:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22746 invoked by uid 500); 10 Nov 2006 20:04:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22736 invoked by uid 99); 10 Nov 2006 20:04:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:04:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:04:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 51BCF71430F
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:03:40 -0800 (PST)
Message-ID: <12561449.1163189020332.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:03:40 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12448840 ] 
            
Doug Cutting commented on HADOOP-538:
-------------------------------------

This is looking really close.  A few comments:

1. There's some debug output in bin/hadoop, an 'echo'.

2. The patch should not include binaries: these should be built somehow by build.xml.

3. I don't like custom/prebuilt distinction.  How about we just put prebuilt stuff in lib/, and custom be in build/lib/?  A deploy-native target can copy things from build/lib/ to lib/, and, if that part of lib/ is stored in subversion, these files will be committed.  The "package" target will always place whatever's in build/lib into the lib/ directory of the packaged code.

4. We should define a "compile.native" property in build.xml that determines whether the native code is compiled, tested and packaged.  By default this will be unset, although we may want to set it for releases and nightly builds.

The only reason to check any binaries into subversion is for folks who: (1) build from trunk rather than using a release; and (2) don't have the C compliation environment installed.


> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_20061108.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:04:04 2006
Return-Path: 
 <hadoop-dev-return-5008-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25347 invoked from network); 10 Nov 2006 20:04:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:04:04 -0000
Received: (qmail 23029 invoked by uid 500); 10 Nov 2006 20:04:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23009 invoked by uid 500); 10 Nov 2006 20:04:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22996 invoked by uid 99); 10 Nov 2006 20:04:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:04:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:04:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3AC537142F9
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:03:42 -0800 (PST)
Message-ID: <15451692.1163189022238.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:03:42 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Doug Cutting updated HADOOP-538:
--------------------------------

    Status: Open  (was: Patch Available)

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_20061108.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:28:00 2006
Return-Path: 
 <hadoop-dev-return-5009-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37940 invoked from network); 10 Nov 2006 20:28:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:28:00 -0000
Received: (qmail 54976 invoked by uid 500); 10 Nov 2006 20:28:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54749 invoked by uid 500); 10 Nov 2006 20:28:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54740 invoked by uid 99); 10 Nov 2006 20:28:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:28:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:27:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 82A6D7142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:27:38 -0800 (PST)
Message-ID: <1027197.1163190458532.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:27:38 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sameer Paranjpye updated HADOOP-619:
------------------------------------

    Component/s: mapred

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:28:01 2006
Return-Path: 
 <hadoop-dev-return-5010-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37982 invoked from network); 10 Nov 2006 20:28:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:28:01 -0000
Received: (qmail 55033 invoked by uid 500); 10 Nov 2006 20:28:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54996 invoked by uid 500); 10 Nov 2006 20:28:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54987 invoked by uid 99); 10 Nov 2006 20:28:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:28:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:27:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D20527142CD
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:27:39 -0800 (PST)
Message-ID: <19320716.1163190459857.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:27:39 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-618) JobProfile and JobSubmissionProtocol
 should be public
In-Reply-To: <24570786.1161364115035.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-618?page=all ]

Sameer Paranjpye updated HADOOP-618:
------------------------------------

    Component/s: mapred
    Description: 
Are there any reasons why they are not public?

Making them public adds a lot of flexibility for the client to interact with the Hadoop.




  was:

Are there any reasons why they are not public?

Making them public adds a lot of flexibility for the client to interact with the Hadoop.





> JobProfile and JobSubmissionProtocol should be public
> -----------------------------------------------------
>
>                 Key: HADOOP-618
>                 URL: http://issues.apache.org/jira/browse/HADOOP-618
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Runping Qi
>
> Are there any reasons why they are not public?
> Making them public adds a lot of flexibility for the client to interact with the Hadoop.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:28:02 2006
Return-Path: 
 <hadoop-dev-return-5011-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38021 invoked from network); 10 Nov 2006 20:28:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:28:02 -0000
Received: (qmail 55275 invoked by uid 500); 10 Nov 2006 20:28:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55243 invoked by uid 500); 10 Nov 2006 20:28:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55234 invoked by uid 99); 10 Nov 2006 20:28:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:28:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:28:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 35CD9714312
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:27:41 -0800 (PST)
Message-ID: <12151404.1163190461218.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:27:41 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-628) hadoop hdfs -cat   replaces some
 characters with question marks.
In-Reply-To: <16871.1161664156551.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-628?page=all ]

Sameer Paranjpye updated HADOOP-628:
------------------------------------

    Component/s: dfs

> hadoop hdfs -cat   replaces some characters with question marks.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-628
>                 URL: http://issues.apache.org/jira/browse/HADOOP-628
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: arkady borkovsky
>
> Should not the effect of
> hadoop hdfs -get path local-file
> and
> hadoop hdfs -cat path >local-file
> be the same?
> Try to do this with a (hdfs) file that contains non-ascii characters and do a diff.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:28:04 2006
Return-Path: 
 <hadoop-dev-return-5012-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38052 invoked from network); 10 Nov 2006 20:28:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:28:04 -0000
Received: (qmail 55535 invoked by uid 500); 10 Nov 2006 20:28:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55495 invoked by uid 500); 10 Nov 2006 20:28:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55486 invoked by uid 99); 10 Nov 2006 20:28:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:28:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:28:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8634C7141D1
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:27:42 -0800 (PST)
Message-ID: <24905686.1163190462547.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:27:42 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-653) Hadoop Record csv serialization should
 not convert Text into String
In-Reply-To: <22027316.1161986837388.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-653?page=all ]

Sameer Paranjpye updated HADOOP-653:
------------------------------------

    Component/s: io

> Hadoop Record csv serialization should not convert Text into String
> -------------------------------------------------------------------
>
>                 Key: HADOOP-653
>                 URL: http://issues.apache.org/jira/browse/HADOOP-653
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>            Reporter: Runping Qi
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:30:02 2006
Return-Path: 
 <hadoop-dev-return-5013-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38693 invoked from network); 10 Nov 2006 20:30:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:30:02 -0000
Received: (qmail 62545 invoked by uid 500); 10 Nov 2006 20:30:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62518 invoked by uid 500); 10 Nov 2006 20:30:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62509 invoked by uid 99); 10 Nov 2006 20:30:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:30:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:29:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 64DEB71430F
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:29:39 -0800 (PST)
Message-ID: <25777227.1163190579409.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:29:39 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-679) add a link to the dfs from job tracker
 WI
In-Reply-To: <31115053.1162575976612.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-679?page=all ]

Sameer Paranjpye updated HADOOP-679:
------------------------------------

    Component/s: mapred

> add a link to the dfs from job tracker WI
> -----------------------------------------
>
>                 Key: HADOOP-679
>                 URL: http://issues.apache.org/jira/browse/HADOOP-679
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>            Priority: Minor
>
> add a link to the dfs from job tracker WI

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:30:09 2006
Return-Path: 
 <hadoop-dev-return-5014-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38748 invoked from network); 10 Nov 2006 20:30:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:30:09 -0000
Received: (qmail 62806 invoked by uid 500); 10 Nov 2006 20:30:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62777 invoked by uid 500); 10 Nov 2006 20:30:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62756 invoked by uid 99); 10 Nov 2006 20:30:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:30:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:30:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C804B7142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:29:40 -0800 (PST)
Message-ID: <28769043.1163190580816.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:29:40 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-703) streaming should have a jnuit test
 that catches any api changes in current working directories
In-Reply-To: <19817888.1163097279501.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-703?page=all ]

Sameer Paranjpye updated HADOOP-703:
------------------------------------

    Component/s: contrib/streaming

> streaming should have a jnuit test that catches any api changes in current working directories
> ----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-703
>                 URL: http://issues.apache.org/jira/browse/HADOOP-703
>             Project: Hadoop
>          Issue Type: Test
>          Components: contrib/streaming
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>
> the current working directores were changes in 0.7.2 which broke applications that ran on streaming. We should have a junit test that catches these api changes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:30:12 2006
Return-Path: 
 <hadoop-dev-return-5015-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38798 invoked from network); 10 Nov 2006 20:30:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:30:12 -0000
Received: (qmail 62999 invoked by uid 500); 10 Nov 2006 20:30:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62932 invoked by uid 500); 10 Nov 2006 20:30:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62849 invoked by uid 99); 10 Nov 2006 20:30:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:30:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:30:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C4036714314
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:29:42 -0800 (PST)
Message-ID: <26921325.1163190582800.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:29:42 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-613) The final merge on the reduces should
 feed the reduce directly
In-Reply-To: <32865816.1161196175060.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-613?page=all ]

Sameer Paranjpye updated HADOOP-613:
------------------------------------

    Component/s: mapred

> The final merge on the reduces should feed the reduce directly
> --------------------------------------------------------------
>
>                 Key: HADOOP-613
>                 URL: http://issues.apache.org/jira/browse/HADOOP-613
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: reduce-get-iterator.patch, reduce-get-iterator.patch
>
>
> The final merge on the input to the reduce should use the iterators from HADOOP-611 directly rather than using a round trip to disk.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:32:00 2006
Return-Path: 
 <hadoop-dev-return-5016-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39452 invoked from network); 10 Nov 2006 20:32:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:32:00 -0000
Received: (qmail 67807 invoked by uid 500); 10 Nov 2006 20:32:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67775 invoked by uid 500); 10 Nov 2006 20:32:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67751 invoked by uid 99); 10 Nov 2006 20:32:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:32:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:31:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5AAD77142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:31:38 -0800 (PST)
Message-ID: <12596204.1163190698368.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:31:38 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-699) "Browse the filesystem" link on Name
 Node redirects to wrong port on DataNode
In-Reply-To: <23861455.1163033924750.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-699?page=all ]

Sameer Paranjpye updated HADOOP-699:
------------------------------------

    Component/s: dfs
    Description: 
"Browse the filesystem" link on NameNode front page does not work since it redirects to Datanode:65535/ . 
 

  was:

"Browse the filesystem" link on NameNode front page does not work since it redirects to Datanode:65535/ . 
 


> "Browse the filesystem" link on Name Node redirects to wrong port on DataNode
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-699
>                 URL: http://issues.apache.org/jira/browse/HADOOP-699
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>
> "Browse the filesystem" link on NameNode front page does not work since it redirects to Datanode:65535/ . 
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:32:01 2006
Return-Path: 
 <hadoop-dev-return-5017-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39492 invoked from network); 10 Nov 2006 20:32:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:32:01 -0000
Received: (qmail 68061 invoked by uid 500); 10 Nov 2006 20:32:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68029 invoked by uid 500); 10 Nov 2006 20:32:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68020 invoked by uid 99); 10 Nov 2006 20:32:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:32:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:31:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A095D7142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:31:39 -0800 (PST)
Message-ID: <27811171.1163190699655.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:31:39 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-620) replication factor should be
 calucalated based on actual dfs block sizes at the NameNode.
In-Reply-To: <10053514.1161379415091.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-620?page=all ]

Sameer Paranjpye updated HADOOP-620:
------------------------------------

    Component/s: dfs
    Description: 
Currently 'dfs -report' calculates replication facto like the following :
     (totalCapacity - totalDiskRemaining) / (totalSize of dfs files in Name space).

Problem with this is that this includes disk space used by non-dfs files (e.g. map reduce jobs) on data node. On my single node test, I get replication factor of 100 since I have a 1 GB dfs file with out replication and there is 99GB of unrelated data on the same volume.

ideally name should calculate it with : (total size of all the blocks known to it) / (total size of files in Name space).

Initial proposal to keep 'total size of all the blocks' update is to track it in datanode descriptor and update it when namenode receives block reports from the datanode ( and subtract when the datanode is removed).




  was:

Currently 'dfs -report' calculates replication facto like the following :
     (totalCapacity - totalDiskRemaining) / (totalSize of dfs files in Name space).

Problem with this is that this includes disk space used by non-dfs files (e.g. map reduce jobs) on data node. On my single node test, I get replication factor of 100 since I have a 1 GB dfs file with out replication and there is 99GB of unrelated data on the same volume.

ideally name should calculate it with : (total size of all the blocks known to it) / (total size of files in Name space).

Initial proposal to keep 'total size of all the blocks' update is to track it in datanode descriptor and update it when namenode receives block reports from the datanode ( and subtract when the datanode is removed).





> replication factor should be calucalated based on actual dfs block sizes at the NameNode.
> -----------------------------------------------------------------------------------------
>
>                 Key: HADOOP-620
>                 URL: http://issues.apache.org/jira/browse/HADOOP-620
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>            Priority: Minor
>
> Currently 'dfs -report' calculates replication facto like the following :
>      (totalCapacity - totalDiskRemaining) / (totalSize of dfs files in Name space).
> Problem with this is that this includes disk space used by non-dfs files (e.g. map reduce jobs) on data node. On my single node test, I get replication factor of 100 since I have a 1 GB dfs file with out replication and there is 99GB of unrelated data on the same volume.
> ideally name should calculate it with : (total size of all the blocks known to it) / (total size of files in Name space).
> Initial proposal to keep 'total size of all the blocks' update is to track it in datanode descriptor and update it when namenode receives block reports from the datanode ( and subtract when the datanode is removed).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:32:04 2006
Return-Path: 
 <hadoop-dev-return-5018-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39546 invoked from network); 10 Nov 2006 20:32:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:32:04 -0000
Received: (qmail 68329 invoked by uid 500); 10 Nov 2006 20:32:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68304 invoked by uid 500); 10 Nov 2006 20:32:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68290 invoked by uid 99); 10 Nov 2006 20:32:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:32:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:32:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 91BF1714312
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:31:41 -0800 (PST)
Message-ID: <26602546.1163190701594.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:31:41 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Sameer Paranjpye updated HADOOP-538:
------------------------------------

    Component/s: io

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_20061108.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:32:05 2006
Return-Path: 
 <hadoop-dev-return-5019-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39584 invoked from network); 10 Nov 2006 20:32:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:32:05 -0000
Received: (qmail 68432 invoked by uid 500); 10 Nov 2006 20:32:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68409 invoked by uid 500); 10 Nov 2006 20:32:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68396 invoked by uid 99); 10 Nov 2006 20:32:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:32:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:32:03 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D6BAA714314
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:31:42 -0800 (PST)
Message-ID: <6856954.1163190702877.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:31:42 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-674) Hadoop records should provide
 comvenient APIs for serialization/deserialization
In-Reply-To: <10006323.1162509916598.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-674?page=all ]

Sameer Paranjpye updated HADOOP-674:
------------------------------------

    Component/s: io
    Description: 
I found the following APIs are very convenient to use and should be  part of the generated class from Jute IDL :

public BytesWritable serialize(String format);

public void deserialize(BytesWitable data, String format);

public static MyRecordJT deserialize(BytesWitable data, String format);



  was:

I found the following APIs are very convenient to use and should be  part of the generated class from Jute IDL :

public BytesWritable serialize(String format);

public void deserialize(BytesWitable data, String format);

public static MyRecordJT deserialize(BytesWitable data, String format);




> Hadoop records should provide comvenient APIs for serialization/deserialization
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-674
>                 URL: http://issues.apache.org/jira/browse/HADOOP-674
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>            Reporter: Runping Qi
>
> I found the following APIs are very convenient to use and should be  part of the generated class from Jute IDL :
> public BytesWritable serialize(String format);
> public void deserialize(BytesWitable data, String format);
> public static MyRecordJT deserialize(BytesWitable data, String format);

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:32:07 2006
Return-Path: 
 <hadoop-dev-return-5020-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39628 invoked from network); 10 Nov 2006 20:32:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:32:07 -0000
Received: (qmail 68837 invoked by uid 500); 10 Nov 2006 20:32:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68815 invoked by uid 500); 10 Nov 2006 20:32:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68806 invoked by uid 99); 10 Nov 2006 20:32:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:32:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:32:04 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6D289714315
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:31:44 -0800 (PST)
Message-ID: <3160901.1163190704444.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:31:44 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-650) bin/hadoop dfs -lsr / is broken
In-Reply-To: <28993539.1161971356570.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-650?page=all ]

Sameer Paranjpye updated HADOOP-650:
------------------------------------

    Component/s: dfs

> bin/hadoop dfs -lsr / is broken
> -------------------------------
>
>                 Key: HADOOP-650
>                 URL: http://issues.apache.org/jira/browse/HADOOP-650
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Mahadev konar
>            Priority: Minor
>
> bin/hadoop dfs -lsr / 
> used to work but seems like its broken now. The output of this command just keeps on listing "/user" again and again and does not list any other files/directories. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:33:59 2006
Return-Path: 
 <hadoop-dev-return-5021-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40325 invoked from network); 10 Nov 2006 20:33:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:33:59 -0000
Received: (qmail 73074 invoked by uid 500); 10 Nov 2006 20:34:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73049 invoked by uid 500); 10 Nov 2006 20:34:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73040 invoked by uid 99); 10 Nov 2006 20:34:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:34:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:33:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4A97E7142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:33:38 -0800 (PST)
Message-ID: <10143125.1163190818303.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:33:38 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-9) mapred.local.dir  temp dir. space
 allocation limited by smallest area
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-9?page=all ]

Sameer Paranjpye updated HADOOP-9:
----------------------------------

    Component/s: mapred
                     (was: indexer)

> mapred.local.dir  temp dir. space allocation limited by smallest area
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-9
>                 URL: http://issues.apache.org/jira/browse/HADOOP-9
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>         Environment: all
>            Reporter: Paul Baclace
>
> When mapred.local.dir is used to specify multiple  temp dir. areas, space allocation limited by smallest area because the temp dir. selection algorithm is "round robin starting from a randomish point".   When round robin is used with approximately constant sized chunks, the smallest area runs out of space first, and this is a fatal error. 
> Workaround: only list local fs dirs in mapred.local.dir with similarly-sized available areas.
> I wrote a patch to JobConf (currenly being tested) which uses df to check available space (once a minute or less often) and then uses an efficient roulette selection to do allocation weighted by magnitude of available space. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:36:03 2006
Return-Path: 
 <hadoop-dev-return-5022-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40746 invoked from network); 10 Nov 2006 20:36:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:36:03 -0000
Received: (qmail 75365 invoked by uid 500); 10 Nov 2006 20:36:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75329 invoked by uid 500); 10 Nov 2006 20:36:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75243 invoked by uid 99); 10 Nov 2006 20:36:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:36:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:35:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EDE2C7142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:35:38 -0800 (PST)
Message-ID: <28943619.1163190938971.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:35:38 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-155) Add a conf dir parameter to the
 scripts
In-Reply-To: <15786097.1145564465714.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-155?page=all ]

Sameer Paranjpye resolved HADOOP-155.
-------------------------------------

    Resolution: Duplicate

Duplicate of HADOOP-260

> Add a conf dir parameter to the scripts
> ---------------------------------------
>
>                 Key: HADOOP-155
>                 URL: http://issues.apache.org/jira/browse/HADOOP-155
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>    Affects Versions: 0.2.0
>            Reporter: Owen O'Malley
>         Assigned To: Milind Bhandarkar
>
> We'd like a conf_dir parameter on the startup scripts (ie. "-c <confdif>"). In particular, it would be nice if it propagated down from hadoop-daemons.sh to slaves.sh to hadoop-daemon.sh using the command line rather than using the ssh -o SendEnv=HADOOP_CONF_DIR, which is not supported in many environments.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:46:00 2006
Return-Path: 
 <hadoop-dev-return-5023-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43624 invoked from network); 10 Nov 2006 20:46:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:46:00 -0000
Received: (qmail 93666 invoked by uid 500); 10 Nov 2006 20:46:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93471 invoked by uid 500); 10 Nov 2006 20:46:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93462 invoked by uid 99); 10 Nov 2006 20:46:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:46:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:45:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7A7AA7142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:45:38 -0800 (PST)
Message-ID: <17876909.1163191538499.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:45:38 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-674) Hadoop records should provide
 comvenient APIs for serialization/deserialization
In-Reply-To: <10006323.1162509916598.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-674?page=all ]

Sameer Paranjpye updated HADOOP-674:
------------------------------------

    Component/s: record
                     (was: io)

> Hadoop records should provide comvenient APIs for serialization/deserialization
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-674
>                 URL: http://issues.apache.org/jira/browse/HADOOP-674
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>            Reporter: Runping Qi
>
> I found the following APIs are very convenient to use and should be  part of the generated class from Jute IDL :
> public BytesWritable serialize(String format);
> public void deserialize(BytesWitable data, String format);
> public static MyRecordJT deserialize(BytesWitable data, String format);

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:46:01 2006
Return-Path: 
 <hadoop-dev-return-5024-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43660 invoked from network); 10 Nov 2006 20:46:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:46:01 -0000
Received: (qmail 93742 invoked by uid 500); 10 Nov 2006 20:46:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93725 invoked by uid 500); 10 Nov 2006 20:46:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93716 invoked by uid 99); 10 Nov 2006 20:46:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:46:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:45:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CAF707142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:45:39 -0800 (PST)
Message-ID: <30640900.1163191539828.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:45:39 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-653) Hadoop Record csv serialization should
 not convert Text into String
In-Reply-To: <22027316.1161986837388.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-653?page=all ]

Sameer Paranjpye updated HADOOP-653:
------------------------------------

    Component/s: record
                     (was: io)

> Hadoop Record csv serialization should not convert Text into String
> -------------------------------------------------------------------
>
>                 Key: HADOOP-653
>                 URL: http://issues.apache.org/jira/browse/HADOOP-653
>             Project: Hadoop
>          Issue Type: Bug
>          Components: record
>            Reporter: Runping Qi
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:48:03 2006
Return-Path: 
 <hadoop-dev-return-5025-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44065 invoked from network); 10 Nov 2006 20:48:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:48:03 -0000
Received: (qmail 95652 invoked by uid 500); 10 Nov 2006 20:48:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95428 invoked by uid 500); 10 Nov 2006 20:48:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95419 invoked by uid 99); 10 Nov 2006 20:48:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:48:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:48:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A7231714312
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:47:41 -0800 (PST)
Message-ID: <17478123.1163191661682.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:47:41 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12448850 ] 
            
Doug Cutting commented on HADOOP-489:
-------------------------------------

This looks great.  Two minor changes I'd like to see:

1. I can see no reason why TaskLog needs to be public.  It should be package-private.

2. 'ant test' creates a 'userlog' directory in the connected directory that is not removed.  This should instead be created in build/test, no?  (The 'history' directory is also created, but that is not introduced by this patch.)


> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-489_20061019.patch, HADOOP-489_20061101.patch, HADOOP-489_20061102.patch, HADOOP-489_20061107.patch, HADOOP-489_20061109.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 20:48:07 2006
Return-Path: 
 <hadoop-dev-return-5026-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44133 invoked from network); 10 Nov 2006 20:48:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 20:48:07 -0000
Received: (qmail 95912 invoked by uid 500); 10 Nov 2006 20:48:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95689 invoked by uid 500); 10 Nov 2006 20:48:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95680 invoked by uid 99); 10 Nov 2006 20:48:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:48:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 12:48:06 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 510F77142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 12:47:46 -0800 (PST)
Message-ID: <27255869.1163191666329.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 12:47:46 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-489) Seperating user logs from system logs
 in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-489?page=all ]

Doug Cutting updated HADOOP-489:
--------------------------------

    Status: Open  (was: Patch Available)

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-489_20061019.patch, HADOOP-489_20061101.patch, HADOOP-489_20061102.patch, HADOOP-489_20061107.patch, HADOOP-489_20061109.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 21:13:05 2006
Return-Path: 
 <hadoop-dev-return-5027-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51995 invoked from network); 10 Nov 2006 21:13:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 21:13:05 -0000
Received: (qmail 39563 invoked by uid 500); 10 Nov 2006 21:13:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39546 invoked by uid 500); 10 Nov 2006 21:13:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39537 invoked by uid 99); 10 Nov 2006 21:13:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:13:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:13:04 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2D2837142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 13:12:44 -0800 (PST)
Message-ID: <9026539.1163193164182.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 13:12:44 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-611?page=all ]

Doug Cutting updated HADOOP-611:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Devaraj!

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: merge.patch, merge.patch, merge.patch, merge.patch
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 21:18:04 2006
Return-Path: 
 <hadoop-dev-return-5028-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53693 invoked from network); 10 Nov 2006 21:18:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 21:18:04 -0000
Received: (qmail 47092 invoked by uid 500); 10 Nov 2006 21:18:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47056 invoked by uid 500); 10 Nov 2006 21:18:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46990 invoked by uid 99); 10 Nov 2006 21:18:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:18:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:18:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B5A0E714314
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 13:17:39 -0800 (PST)
Message-ID: <17383663.1163193459741.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 13:17:39 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-688) move dfs administrative interfaces to
 a separate command
In-Reply-To: <30661235.1162944051488.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-688?page=all ]

Doug Cutting updated HADOOP-688:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba!

> move dfs administrative interfaces to a separate command
> --------------------------------------------------------
>
>                 Key: HADOOP-688
>                 URL: http://issues.apache.org/jira/browse/HADOOP-688
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>             Fix For: 0.9.0
>
>         Attachments: admincommand.patch
>
>
> The dfs adminsitrative commands (e.g. safemode, report, etc) should be separate from the dfs user commands. The proposal is to remove the following two commands:
> bin/hadoop dfs -report
> bin/hadoop dfs -safemode
> The above two features will be available through a new command:
> bin/hadoop dfsadmin -report
> bin/hadoop dfsadmin -safemode
> This is done so that there is a clean distinction between cluster administrative commands and users command.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 21:18:06 2006
Return-Path: 
 <hadoop-dev-return-5029-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53730 invoked from network); 10 Nov 2006 21:18:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 21:18:06 -0000
Received: (qmail 47478 invoked by uid 500); 10 Nov 2006 21:18:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47379 invoked by uid 500); 10 Nov 2006 21:18:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47325 invoked by uid 99); 10 Nov 2006 21:18:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:18:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:18:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8E6F07142BF
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 13:17:42 -0800 (PST)
Message-ID: <13148822.1163193462581.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 13:17:42 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-652) Not all Datastructures are updated
 when a block is deleted
In-Reply-To: <8743293.1161975076609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-652?page=all ]

Doug Cutting updated HADOOP-652:
--------------------------------

    Status: Open  (was: Patch Available)

> Not all Datastructures are updated when a block is deleted
> ----------------------------------------------------------
>
>                 Key: HADOOP-652
>                 URL: http://issues.apache.org/jira/browse/HADOOP-652
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Raghu Angadi
>         Attachments: FSDataset.java.patch
>
>
> Currently when a block is deleted, DataNode just deletes the physical file and updates its map. We need to update more things. For e.g. numBlocks in FSDir is not decremented.. effect of this would be that we will create more subdirectories than necessary. It might not show up badly yet since numBlocks gets correct value when the dataNode restarts. I have to see what else needs to be updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 21:25:01 2006
Return-Path: 
 <hadoop-dev-return-5030-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55775 invoked from network); 10 Nov 2006 21:25:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 21:25:01 -0000
Received: (qmail 61902 invoked by uid 500); 10 Nov 2006 21:25:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61876 invoked by uid 500); 10 Nov 2006 21:25:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61867 invoked by uid 99); 10 Nov 2006 21:25:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:25:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:24:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 362937142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 13:24:39 -0800 (PST)
Message-ID: <22710521.1163193879219.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 13:24:39 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-705) IOException: job.xml already exists
In-Reply-To: <4654952.1163124037194.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-705?page=all ]

Doug Cutting updated HADOOP-705:
--------------------------------

    Status: Open  (was: Patch Available)

Wouldn't it be better to remove the job's entire directory at the outset?  That would cover failures in both job.xml, job.jar and whatever else ends up there.

Also, this patch uses tabs to indent, rather than spaces, with non-standard tab stops.  And there's a typo in the comment.

> IOException: job.xml already exists
> -----------------------------------
>
>                 Key: HADOOP-705
>                 URL: http://issues.apache.org/jira/browse/HADOOP-705
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Mahadev konar
>         Attachments: jobxml.patch
>
>
> I'm seeing this exception in the JobTracker log.  It's caused the same map to fail enough that the job aborted.
> 2006-11-09 17:28:37,594 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0004_m_000588_2: Error 
> initializing task_0004_m_000588_2:
> java.io.IOException: Target /foobar/tmp/mapred/local/taskTracker/jobcache/job_0004/job.xml already exists
>         at org.apache.hadoop.fs.FileUtil.checkDest(FileUtil.java:215)
>         at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:61)
>         at org.apache.hadoop.dfs.DistributedFileSystem.copyToLocalFile(DistributedFileSystem.java:192)
>         at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:279)
>         at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:691)
>         at org.apache.hadoop.mapred.TaskTracker.checkForNewTasks(TaskTracker.java:533)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:448)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 21:27:00 2006
Return-Path: 
 <hadoop-dev-return-5031-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56627 invoked from network); 10 Nov 2006 21:27:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 21:27:00 -0000
Received: (qmail 65423 invoked by uid 500); 10 Nov 2006 21:27:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65191 invoked by uid 500); 10 Nov 2006 21:27:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65182 invoked by uid 99); 10 Nov 2006 21:27:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:27:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:26:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 998D77142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 13:26:38 -0800 (PST)
Message-ID: <20901714.1163193998626.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 13:26:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-708) test-libhdfs.sh does not properly
 capture and return error status
In-Reply-To: <13217667.1163188177110.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-708?page=all ]

Doug Cutting updated HADOOP-708:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
                       (was: 0.8.1)
       Resolution: Fixed

I just committed this.  Thanks, Nigel!

> test-libhdfs.sh does not properly capture and return error status
> -----------------------------------------------------------------
>
>                 Key: HADOOP-708
>                 URL: http://issues.apache.org/jira/browse/HADOOP-708
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-708.patch
>
>
> The BUILD_STATUS variable in test-libhdfs.sh incorrectly attempts to capture the return value of running hdfs_test.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 21:40:00 2006
Return-Path: 
 <hadoop-dev-return-5032-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59888 invoked from network); 10 Nov 2006 21:40:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 21:40:00 -0000
Received: (qmail 81786 invoked by uid 500); 10 Nov 2006 21:40:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81760 invoked by uid 500); 10 Nov 2006 21:40:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81746 invoked by uid 99); 10 Nov 2006 21:40:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:40:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:39:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7AA6D7142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 13:39:38 -0800 (PST)
Message-ID: <14426536.1163194778499.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 13:39:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-692?page=comments#action_12448867 ] 
            
Doug Cutting commented on HADOOP-692:
-------------------------------------

I think that at this point what we want is a declarative description of the cluster topology, provided by the administrator, rather than a distance function.  For example, we could extend the format of the slaves file to list all of the network levels that a node lives at:

<hostname> <rackswitchname> <clusterswitchname> <datacentername>, etc.

This can be used not just to compute the distance between any two nodes, but also to quickly list nodes that are close to a node.  The latter is hard with a distance function without pre-computing all inter-node distances.  With 10k nodes, that's 100M distances, which is expensive.

> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 21:40:02 2006
Return-Path: 
 <hadoop-dev-return-5033-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59950 invoked from network); 10 Nov 2006 21:40:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 21:40:02 -0000
Received: (qmail 82033 invoked by uid 500); 10 Nov 2006 21:40:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82007 invoked by uid 500); 10 Nov 2006 21:40:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81998 invoked by uid 99); 10 Nov 2006 21:40:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:40:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:40:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 200A67142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 13:39:41 -0800 (PST)
Message-ID: <16703166.1163194781128.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 13:39:41 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-646) name node server does not load large
 (> 2^31 bytes) edits file
In-Reply-To: <6602315.1161900496769.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-646?page=all ]

Sameer Paranjpye updated HADOOP-646:
------------------------------------

               Status: Patch Available  (was: Open)
        Fix Version/s: 0.9.0
    Affects Version/s: 0.8.0
                           (was: 0.7.1)
             Assignee: Milind Bhandarkar

> name node server does not load large (> 2^31 bytes) edits file
> --------------------------------------------------------------
>
>                 Key: HADOOP-646
>                 URL: http://issues.apache.org/jira/browse/HADOOP-646
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Christian Kunz
>         Assigned To: Milind Bhandarkar
>            Priority: Critical
>             Fix For: 0.9.0
>
>         Attachments: edits.patch
>
>
> FileInputStream.available() returns negative values when reading a large file (> 2^31 bytes) -- this is a known (unresolved) java bug:
> http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6402006
> Consequence: a large edits file is not loaded and deleted without any warnings. The system reverts back to the old fsimage.
> This happens in jdk1.6 as well, i.e. the bug has not yet been fixed.
> In addition, when finally I was able to load my big cron-backed-up edits file (6.5 GB)  with a kludgy work-around, the blocks did not exist anymore in the data node servers, probably deleted from the previous attempts when the name node server did not know about the changed situation. 
> Moral till this is fixed or worked-around: don't wait too long to restart the name node server. Otherwise this is a way to lose the entire dfs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 21:56:10 2006
Return-Path: 
 <hadoop-dev-return-5034-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65492 invoked from network); 10 Nov 2006 21:56:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 21:56:10 -0000
Received: (qmail 17368 invoked by uid 500); 10 Nov 2006 21:56:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17341 invoked by uid 500); 10 Nov 2006 21:56:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17322 invoked by uid 99); 10 Nov 2006 21:56:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:56:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:55:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 84C2E7142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 13:55:39 -0800 (PST)
Message-ID: <15572679.1163195739541.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 13:55:39 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-646) name node server does not load large
 (> 2^31 bytes) edits file
In-Reply-To: <6602315.1161900496769.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-646?page=all ]

Doug Cutting updated HADOOP-646:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Milind!

> name node server does not load large (> 2^31 bytes) edits file
> --------------------------------------------------------------
>
>                 Key: HADOOP-646
>                 URL: http://issues.apache.org/jira/browse/HADOOP-646
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Christian Kunz
>         Assigned To: Milind Bhandarkar
>            Priority: Critical
>             Fix For: 0.9.0
>
>         Attachments: edits.patch
>
>
> FileInputStream.available() returns negative values when reading a large file (> 2^31 bytes) -- this is a known (unresolved) java bug:
> http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6402006
> Consequence: a large edits file is not loaded and deleted without any warnings. The system reverts back to the old fsimage.
> This happens in jdk1.6 as well, i.e. the bug has not yet been fixed.
> In addition, when finally I was able to load my big cron-backed-up edits file (6.5 GB)  with a kludgy work-around, the blocks did not exist anymore in the data node servers, probably deleted from the previous attempts when the name node server did not know about the changed situation. 
> Moral till this is fixed or worked-around: don't wait too long to restart the name node server. Otherwise this is a way to lose the entire dfs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 22:09:00 2006
Return-Path: 
 <hadoop-dev-return-5035-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69455 invoked from network); 10 Nov 2006 22:09:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 22:09:00 -0000
Received: (qmail 46630 invoked by uid 500); 10 Nov 2006 22:09:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46594 invoked by uid 500); 10 Nov 2006 22:09:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46576 invoked by uid 99); 10 Nov 2006 22:09:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 14:09:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 14:08:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5256F71430F
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 14:08:38 -0800 (PST)
Message-ID: <30815854.1163196518334.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 14:08:38 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-692?page=comments#action_12448875 ] 
            
Hairong Kuang commented on HADOOP-692:
--------------------------------------

I think that what we only need is a rack distance matrix. So the storage is much less. But after I talked to Koji, it looks that it is hard to pre-compute an acurate distance between nodes. So a simple thing to do is assume that distance between two nodes in different datacenters is 3 or 4. No matrix is needed.

I am working on designing an interface for network topology and an interface for replica placement policy. Will post them later.

> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 22:35:17 2006
Return-Path: 
 <hadoop-dev-return-5036-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77043 invoked from network); 10 Nov 2006 22:35:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 22:35:17 -0000
Received: (qmail 94336 invoked by uid 500); 10 Nov 2006 22:35:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94290 invoked by uid 500); 10 Nov 2006 22:35:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94264 invoked by uid 99); 10 Nov 2006 22:35:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 14:35:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 14:34:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E6C317142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 14:34:38 -0800 (PST)
Message-ID: <12575434.1163198078942.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 14:34:38 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-705) IOException: job.xml already exists
In-Reply-To: <4654952.1163124037194.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-705?page=all ]

Mahadev konar updated HADOOP-705:
---------------------------------

    Attachment:     (was: jobxml.patch)

> IOException: job.xml already exists
> -----------------------------------
>
>                 Key: HADOOP-705
>                 URL: http://issues.apache.org/jira/browse/HADOOP-705
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Mahadev konar
>
> I'm seeing this exception in the JobTracker log.  It's caused the same map to fail enough that the job aborted.
> 2006-11-09 17:28:37,594 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0004_m_000588_2: Error 
> initializing task_0004_m_000588_2:
> java.io.IOException: Target /foobar/tmp/mapred/local/taskTracker/jobcache/job_0004/job.xml already exists
>         at org.apache.hadoop.fs.FileUtil.checkDest(FileUtil.java:215)
>         at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:61)
>         at org.apache.hadoop.dfs.DistributedFileSystem.copyToLocalFile(DistributedFileSystem.java:192)
>         at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:279)
>         at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:691)
>         at org.apache.hadoop.mapred.TaskTracker.checkForNewTasks(TaskTracker.java:533)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:448)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 22:35:17 2006
Return-Path: 
 <hadoop-dev-return-5037-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77051 invoked from network); 10 Nov 2006 22:35:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 22:35:17 -0000
Received: (qmail 94394 invoked by uid 500); 10 Nov 2006 22:35:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94356 invoked by uid 500); 10 Nov 2006 22:35:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94297 invoked by uid 99); 10 Nov 2006 22:35:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 14:35:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 14:35:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 14FC6714312
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 14:34:39 -0800 (PST)
Message-ID: <22924647.1163198079083.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 14:34:39 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-709) streaming job with Control characters
 in the command causes runtime exception in the job tracker
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

streaming job with Control characters in the command causes runtime exception in the job tracker
------------------------------------------------------------------------------------------------

                 Key: HADOOP-709
                 URL: http://issues.apache.org/jira/browse/HADOOP-709
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
            Reporter: dhruba borthakur
         Assigned To: dhruba borthakur


I run a streaming job with a Ctrl-A character in the command line option as follows:

$HSTREAMING -mapper "/bin/sort -t'^A'" -input "input/*" -output output

It causes a exeception as listed below. If i run the same command without the Ctrl-A character the command completes successfully.

Exception in thread "main" org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.lang.RuntimeException: org.xml.sax.SAXParseException: Character reference "&#1" is an invalid XML character.
        at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:551)
        at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:472)
        at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:453)
        at org.apache.hadoop.conf.Configuration.get(Configuration.java:201)
        at org.apache.hadoop.mapred.JobConf.getUser(JobConf.java:175)
        at org.apache.hadoop.mapred.JobInProgress.<init>(JobInProgress.java:88)
        at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:1016)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:337)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:514)

        at org.apache.hadoop.ipc.Client$Connection.run(Client.java:248)



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 22:37:00 2006
Return-Path: 
 <hadoop-dev-return-5038-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77654 invoked from network); 10 Nov 2006 22:37:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 22:37:00 -0000
Received: (qmail 99061 invoked by uid 500); 10 Nov 2006 22:37:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99043 invoked by uid 500); 10 Nov 2006 22:37:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99034 invoked by uid 99); 10 Nov 2006 22:37:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 14:37:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 14:36:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 507067142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 14:36:38 -0800 (PST)
Message-ID: <18316172.1163198198326.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 14:36:38 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-692?page=comments#action_12448880 ] 
            
Sameer Paranjpye commented on HADOOP-692:
-----------------------------------------

Declaring  the topology in the slaves file could be brittle. Nodes go down, get repaired and may or may not return to the same location. Particularly if nodes are spread across datacenters, keeping the slaves file in sync with every change in datacenters will quickly become cumbersome.

Ditto, constructing the topology with timing experiments on the namenode.  Timing experiments can be unreliable and biased by transient network congestions. A persistent topology map is error prone because nodes can move around.It's also not clear how frequently the topology map would be constructed. Every time node(s) are added or return? 

It appears feasible to determine the location of a node in a network with a local operation, probably by running an installation specific script. The Datanode reports it's location to the namenode upon registration, which updates a dynamic topology map. This map can be cheaply re-constructed at startup when processing Datanode registrations and block reports.

---

On the subject of replica placement, would there be any value in co-locating blocks from a single file at a rack or datacenter level? 

Say, block 0 is placed on <node a, rack p>, <node b, rack p> and <node c, rack q> i.e. first replica node local, next rack local and the third on a different rack. Would it make sense to put block 1 and subsequent blocks similarly?

So block 1 could be on <node a, rack p>, <node d, rack p> and <node e, rack q>. Then all blocks from the file would end up on racks 'p' and 'q', and it would be easy to get rack locality for the entire file.

This probably needs a lot more modeling and analysis...



> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 22:37:02 2006
Return-Path: 
 <hadoop-dev-return-5039-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77709 invoked from network); 10 Nov 2006 22:37:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 22:37:02 -0000
Received: (qmail 99335 invoked by uid 500); 10 Nov 2006 22:37:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99308 invoked by uid 500); 10 Nov 2006 22:37:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99299 invoked by uid 99); 10 Nov 2006 22:37:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 14:37:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 14:37:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 42BFE71430F
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 14:36:40 -0800 (PST)
Message-ID: <30456596.1163198200270.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 14:36:40 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-705) IOException: job.xml already exists
In-Reply-To: <4654952.1163124037194.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-705?page=all ]

Mahadev konar updated HADOOP-705:
---------------------------------

    Attachment: jobxml.patch

made the changes. The whole job dir is deleted before we retry again. fixed the typo. sorry abt the tabs... just cleaned up my eclipse settings.

> IOException: job.xml already exists
> -----------------------------------
>
>                 Key: HADOOP-705
>                 URL: http://issues.apache.org/jira/browse/HADOOP-705
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Mahadev konar
>         Attachments: jobxml.patch
>
>
> I'm seeing this exception in the JobTracker log.  It's caused the same map to fail enough that the job aborted.
> 2006-11-09 17:28:37,594 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0004_m_000588_2: Error 
> initializing task_0004_m_000588_2:
> java.io.IOException: Target /foobar/tmp/mapred/local/taskTracker/jobcache/job_0004/job.xml already exists
>         at org.apache.hadoop.fs.FileUtil.checkDest(FileUtil.java:215)
>         at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:61)
>         at org.apache.hadoop.dfs.DistributedFileSystem.copyToLocalFile(DistributedFileSystem.java:192)
>         at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:279)
>         at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:691)
>         at org.apache.hadoop.mapred.TaskTracker.checkForNewTasks(TaskTracker.java:533)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:448)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 22:37:04 2006
Return-Path: 
 <hadoop-dev-return-5040-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77798 invoked from network); 10 Nov 2006 22:37:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 22:37:04 -0000
Received: (qmail 99799 invoked by uid 500); 10 Nov 2006 22:37:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99775 invoked by uid 500); 10 Nov 2006 22:37:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99760 invoked by uid 99); 10 Nov 2006 22:37:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 14:37:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 14:37:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2EE3D714312
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 14:36:42 -0800 (PST)
Message-ID: <8658447.1163198202189.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 14:36:42 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-705) IOException: job.xml already exists
In-Reply-To: <4654952.1163124037194.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-705?page=all ]

Mahadev konar updated HADOOP-705:
---------------------------------

    Status: Patch Available  (was: Open)

> IOException: job.xml already exists
> -----------------------------------
>
>                 Key: HADOOP-705
>                 URL: http://issues.apache.org/jira/browse/HADOOP-705
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Mahadev konar
>         Attachments: jobxml.patch
>
>
> I'm seeing this exception in the JobTracker log.  It's caused the same map to fail enough that the job aborted.
> 2006-11-09 17:28:37,594 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0004_m_000588_2: Error 
> initializing task_0004_m_000588_2:
> java.io.IOException: Target /foobar/tmp/mapred/local/taskTracker/jobcache/job_0004/job.xml already exists
>         at org.apache.hadoop.fs.FileUtil.checkDest(FileUtil.java:215)
>         at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:61)
>         at org.apache.hadoop.dfs.DistributedFileSystem.copyToLocalFile(DistributedFileSystem.java:192)
>         at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:279)
>         at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:691)
>         at org.apache.hadoop.mapred.TaskTracker.checkForNewTasks(TaskTracker.java:533)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:448)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 22:54:58 2006
Return-Path: 
 <hadoop-dev-return-5041-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83378 invoked from network); 10 Nov 2006 22:54:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 22:54:58 -0000
Received: (qmail 21085 invoked by uid 500); 10 Nov 2006 22:55:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20859 invoked by uid 500); 10 Nov 2006 22:55:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20847 invoked by uid 99); 10 Nov 2006 22:55:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 14:55:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 14:54:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2022F7142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 14:54:37 -0800 (PST)
Message-ID: <25722891.1163199277128.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 14:54:37 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-710) block size isn't honored
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

block size isn't honored
------------------------

                 Key: HADOOP-710
                 URL: http://issues.apache.org/jira/browse/HADOOP-710
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.8.0
            Reporter: Nigel Daley


When writing a buffer to an FSOutputStream using write(buffer,offset,length), the block size isn't honored when the block size is less than the buffer size.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 23:11:00 2006
Return-Path: 
 <hadoop-dev-return-5042-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91117 invoked from network); 10 Nov 2006 23:11:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 23:11:00 -0000
Received: (qmail 38547 invoked by uid 500); 10 Nov 2006 23:11:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38521 invoked by uid 500); 10 Nov 2006 23:11:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38512 invoked by uid 99); 10 Nov 2006 23:11:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 15:11:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 15:10:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2C7AC7142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 15:10:39 -0800 (PST)
Message-ID: <13612701.1163200239179.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 15:10:39 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-710) block size isn't honored
In-Reply-To: <25722891.1163199277128.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-710?page=all ]

Milind Bhandarkar reassigned HADOOP-710:
----------------------------------------

    Assignee: Milind Bhandarkar

> block size isn't honored
> ------------------------
>
>                 Key: HADOOP-710
>                 URL: http://issues.apache.org/jira/browse/HADOOP-710
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Milind Bhandarkar
>
> When writing a buffer to an FSOutputStream using write(buffer,offset,length), the block size isn't honored when the block size is less than the buffer size.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 23:11:02 2006
Return-Path: 
 <hadoop-dev-return-5043-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91172 invoked from network); 10 Nov 2006 23:11:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 23:11:02 -0000
Received: (qmail 38999 invoked by uid 500); 10 Nov 2006 23:11:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38777 invoked by uid 500); 10 Nov 2006 23:11:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38768 invoked by uid 99); 10 Nov 2006 23:11:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 15:11:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 15:11:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3B7AF7142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 15:10:41 -0800 (PST)
Message-ID: <21240435.1163200241241.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 15:10:41 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-710) block size isn't honored
In-Reply-To: <25722891.1163199277128.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-710?page=all ]

Work on HADOOP-710 started by Milind Bhandarkar.

> block size isn't honored
> ------------------------
>
>                 Key: HADOOP-710
>                 URL: http://issues.apache.org/jira/browse/HADOOP-710
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Milind Bhandarkar
>
> When writing a buffer to an FSOutputStream using write(buffer,offset,length), the block size isn't honored when the block size is less than the buffer size.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 23:13:01 2006
Return-Path: 
 <hadoop-dev-return-5044-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91743 invoked from network); 10 Nov 2006 23:13:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 23:13:01 -0000
Received: (qmail 41547 invoked by uid 500); 10 Nov 2006 23:13:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41522 invoked by uid 500); 10 Nov 2006 23:13:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41513 invoked by uid 99); 10 Nov 2006 23:13:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 15:13:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 15:13:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6445D7142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 15:12:39 -0800 (PST)
Message-ID: <30148658.1163200359408.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 15:12:39 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-710) block size isn't honored
In-Reply-To: <25722891.1163199277128.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-710?page=comments#action_12448889 ] 
            
Milind Bhandarkar commented on HADOOP-710:
------------------------------------------

This is a bug in DFSClient.DFSOutputStream.write(byte[], int, int). It calls endBlock only when the buffer becomes full.

> block size isn't honored
> ------------------------
>
>                 Key: HADOOP-710
>                 URL: http://issues.apache.org/jira/browse/HADOOP-710
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Milind Bhandarkar
>
> When writing a buffer to an FSOutputStream using write(buffer,offset,length), the block size isn't honored when the block size is less than the buffer size.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 23:17:00 2006
Return-Path: 
 <hadoop-dev-return-5045-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92080 invoked from network); 10 Nov 2006 23:17:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 23:17:00 -0000
Received: (qmail 43542 invoked by uid 500); 10 Nov 2006 23:17:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43317 invoked by uid 500); 10 Nov 2006 23:17:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43308 invoked by uid 99); 10 Nov 2006 23:17:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 15:17:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 15:16:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0AE267142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 15:16:39 -0800 (PST)
Message-ID: <16081503.1163200599042.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 15:16:39 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12448890 ] 
            
Doug Cutting commented on HADOOP-538:
-------------------------------------

On second thought, the custom libs should probably go in build/native and the prebuilt in lib/native.

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_20061108.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 10 23:27:09 2006
Return-Path: 
 <hadoop-dev-return-5046-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94723 invoked from network); 10 Nov 2006 23:27:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 23:27:09 -0000
Received: (qmail 56593 invoked by uid 500); 10 Nov 2006 23:27:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56506 invoked by uid 500); 10 Nov 2006 23:27:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56405 invoked by uid 99); 10 Nov 2006 23:27:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 15:27:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 15:27:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B6845714315
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 15:26:42 -0800 (PST)
Message-ID: <29486817.1163201202745.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 15:26:42 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-692?page=comments#action_12448893 ] 
            
Doug Cutting commented on HADOOP-692:
-------------------------------------

How about a topology interface?

public interface NetworkTopology {
  HubDistance[] getHubDistances(String host)
}

public interface HubDistance {
  public String getHubName();
  public int getHops();
}

The namenode can use this to refresh things dynamically, or it might be read statically from a config file, depending on the implementation.  The implementation class can be specified in the config.  The default could just chop up hostnames, so that foo.bar.co.uk yeilds hops <foo.bar.co.uk,0>, <bar.co.uk,2>, <co.uk,3>, <uk,4>.  Someone could implement this with DNS too.

To compute a distance, you find the common hub between two nodes and sum the hops.  To find nearby nodes, look for nodes sharing a nearby hub.  Etc.

> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 11 00:17:58 2006
Return-Path: 
 <hadoop-dev-return-5047-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6743 invoked from network); 11 Nov 2006 00:17:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 00:17:58 -0000
Received: (qmail 17507 invoked by uid 500); 11 Nov 2006 00:18:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17479 invoked by uid 500); 11 Nov 2006 00:18:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17470 invoked by uid 99); 11 Nov 2006 00:18:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 16:18:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 16:17:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1DA167142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 16:17:37 -0800 (PST)
Message-ID: <31111653.1163204257118.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 16:17:37 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-711) TestSymLink fails when ant is not
 executed from HADOOP_HOME
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

TestSymLink fails when ant is not executed from HADOOP_HOME
-----------------------------------------------------------

                 Key: HADOOP-711
                 URL: http://issues.apache.org/jira/browse/HADOOP-711
             Project: Hadoop
          Issue Type: Bug
          Components: test
    Affects Versions: 0.8.0
            Reporter: Nigel Daley
            Priority: Minor


When I exec 'ant -f somePath/build.xml test'
org.apache.hadoop.streaming.TestSymLink fails with the following exception:

junit.framework.AssertionFailedError: java.io.FileNotFoundException: build/test/dfs/tmp/tmp/client-2526974511105483818 (No such file or directory)
	at java.io.FileOutputStream.open(Native Method)
	at java.io.FileOutputStream.<init>(FileOutputStream.java:179)
	at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
	at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.<init>(DFSClient.java:907)
	at org.apache.hadoop.dfs.DFSClient.create(DFSClient.java:278)
	at org.apache.hadoop.dfs.DistributedFileSystem.createRaw(DistributedFileSystem.java:106)
	at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:58)
	at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:47)
	at org.apache.hadoop.fs.FSDataOutputStream.<init>(FSDataOutputStream.java:148)
	at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:263)
	at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:170)
	at org.apache.hadoop.streaming.TestSymLink.testSymLink(Unknown Source)

	at org.apache.hadoop.streaming.TestSymLink.failTrace(Unknown Source)
	at org.apache.hadoop.streaming.TestSymLink.testSymLink(Unknown Source)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 11 00:18:00 2006
Return-Path: 
 <hadoop-dev-return-5048-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6786 invoked from network); 11 Nov 2006 00:18:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 00:18:00 -0000
Received: (qmail 17892 invoked by uid 500); 11 Nov 2006 00:18:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17728 invoked by uid 500); 11 Nov 2006 00:18:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17719 invoked by uid 99); 11 Nov 2006 00:18:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 16:18:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 16:17:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 154E47142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 16:17:39 -0800 (PST)
Message-ID: <19359731.1163204259085.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 16:17:39 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-711) TestSymLink fails when ant is not
 executed from HADOOP_HOME
In-Reply-To: <31111653.1163204257118.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-711?page=all ]

Nigel Daley reassigned HADOOP-711:
----------------------------------

    Assignee: Mahadev konar

> TestSymLink fails when ant is not executed from HADOOP_HOME
> -----------------------------------------------------------
>
>                 Key: HADOOP-711
>                 URL: http://issues.apache.org/jira/browse/HADOOP-711
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Mahadev konar
>            Priority: Minor
>
> When I exec 'ant -f somePath/build.xml test'
> org.apache.hadoop.streaming.TestSymLink fails with the following exception:
> junit.framework.AssertionFailedError: java.io.FileNotFoundException: build/test/dfs/tmp/tmp/client-2526974511105483818 (No such file or directory)
> 	at java.io.FileOutputStream.open(Native Method)
> 	at java.io.FileOutputStream.<init>(FileOutputStream.java:179)
> 	at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
> 	at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.<init>(DFSClient.java:907)
> 	at org.apache.hadoop.dfs.DFSClient.create(DFSClient.java:278)
> 	at org.apache.hadoop.dfs.DistributedFileSystem.createRaw(DistributedFileSystem.java:106)
> 	at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:58)
> 	at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:47)
> 	at org.apache.hadoop.fs.FSDataOutputStream.<init>(FSDataOutputStream.java:148)
> 	at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:263)
> 	at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:170)
> 	at org.apache.hadoop.streaming.TestSymLink.testSymLink(Unknown Source)
> 	at org.apache.hadoop.streaming.TestSymLink.failTrace(Unknown Source)
> 	at org.apache.hadoop.streaming.TestSymLink.testSymLink(Unknown Source)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 11 00:20:02 2006
Return-Path: 
 <hadoop-dev-return-5049-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7217 invoked from network); 11 Nov 2006 00:20:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 00:20:02 -0000
Received: (qmail 21399 invoked by uid 500); 11 Nov 2006 00:20:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21378 invoked by uid 500); 11 Nov 2006 00:20:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21369 invoked by uid 99); 11 Nov 2006 00:20:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 16:20:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 16:20:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DA2DF7142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 16:19:40 -0800 (PST)
Message-ID: <7627497.1163204380891.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 16:19:40 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-710) block size isn't honored
In-Reply-To: <25722891.1163199277128.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-710?page=all ]

Milind Bhandarkar updated HADOOP-710:
-------------------------------------

    Attachment: small-block.patch

Patch attached. This patch fixes the bug in DFSOutputStream. It also contains a unit test to reproduce the bug in the absence of this bug-fix.


> block size isn't honored
> ------------------------
>
>                 Key: HADOOP-710
>                 URL: http://issues.apache.org/jira/browse/HADOOP-710
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Milind Bhandarkar
>         Attachments: small-block.patch
>
>
> When writing a buffer to an FSOutputStream using write(buffer,offset,length), the block size isn't honored when the block size is less than the buffer size.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 11 00:30:01 2006
Return-Path: 
 <hadoop-dev-return-5050-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9784 invoked from network); 11 Nov 2006 00:30:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 00:30:01 -0000
Received: (qmail 33943 invoked by uid 500); 11 Nov 2006 00:30:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33901 invoked by uid 500); 11 Nov 2006 00:30:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33889 invoked by uid 99); 11 Nov 2006 00:30:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 16:30:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 16:29:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6553D714315
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 16:29:39 -0800 (PST)
Message-ID: <5643927.1163204979412.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 16:29:39 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-710) block size isn't honored
In-Reply-To: <25722891.1163199277128.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-710?page=all ]

Milind Bhandarkar updated HADOOP-710:
-------------------------------------

           Status: Patch Available  (was: In Progress)
    Fix Version/s: 0.9.0

Patch available.

> block size isn't honored
> ------------------------
>
>                 Key: HADOOP-710
>                 URL: http://issues.apache.org/jira/browse/HADOOP-710
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: small-block.patch
>
>
> When writing a buffer to an FSOutputStream using write(buffer,offset,length), the block size isn't honored when the block size is less than the buffer size.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 11 00:40:59 2006
Return-Path: 
 <hadoop-dev-return-5051-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12674 invoked from network); 11 Nov 2006 00:40:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 00:40:59 -0000
Received: (qmail 45051 invoked by uid 500); 11 Nov 2006 00:41:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45020 invoked by uid 500); 11 Nov 2006 00:41:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45011 invoked by uid 99); 11 Nov 2006 00:41:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 16:41:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 16:40:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 472477142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 16:40:38 -0800 (PST)
Message-ID: <26949107.1163205638288.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 16:40:38 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-709) streaming job with Control
 characters in the command causes runtime exception in the job tracker
In-Reply-To: <22924647.1163198079083.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-709?page=comments#action_12448910 ] 
            
dhruba borthakur commented on HADOOP-709:
-----------------------------------------

This seems be a documented bug with jdk 1.5:

http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6470090


> streaming job with Control characters in the command causes runtime exception in the job tracker
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-709
>                 URL: http://issues.apache.org/jira/browse/HADOOP-709
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> I run a streaming job with a Ctrl-A character in the command line option as follows:
> $HSTREAMING -mapper "/bin/sort -t'^A'" -input "input/*" -output output
> It causes a exeception as listed below. If i run the same command without the Ctrl-A character the command completes successfully.
> Exception in thread "main" org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.lang.RuntimeException: org.xml.sax.SAXParseException: Character reference "&#1" is an invalid XML character.
>         at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:551)
>         at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:472)
>         at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:453)
>         at org.apache.hadoop.conf.Configuration.get(Configuration.java:201)
>         at org.apache.hadoop.mapred.JobConf.getUser(JobConf.java:175)
>         at org.apache.hadoop.mapred.JobInProgress.<init>(JobInProgress.java:88)
>         at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:1016)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:337)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:514)
>         at org.apache.hadoop.ipc.Client$Connection.run(Client.java:248)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 11 01:52:06 2006
Return-Path: 
 <hadoop-dev-return-5052-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26436 invoked from network); 11 Nov 2006 01:52:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 01:52:06 -0000
Received: (qmail 23406 invoked by uid 500); 11 Nov 2006 01:52:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23370 invoked by uid 500); 11 Nov 2006 01:52:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23361 invoked by uid 99); 11 Nov 2006 01:52:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 17:52:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 17:51:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 75902714317
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 17:51:38 -0800 (PST)
Message-ID: <16001731.1163209898478.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 17:51:38 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-709) streaming job with Control
 characters in the command causes runtime exception in the job tracker
In-Reply-To: <22924647.1163198079083.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-709?page=comments#action_12448922 ] 
            
dhruba borthakur commented on HADOOP-709:
-----------------------------------------

Another sun issue:
http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6371411

Our streaming code creates an XML file for the job. This file as an entry of the form:
<property><name>stream.map.streamprocessor</name><value>/bin/sort -t'&#1;'</value></property>

One option would be that user-input be encoded in Base64 before being XML-ised. This is necessary to support non-ascii user-input.

> streaming job with Control characters in the command causes runtime exception in the job tracker
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-709
>                 URL: http://issues.apache.org/jira/browse/HADOOP-709
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> I run a streaming job with a Ctrl-A character in the command line option as follows:
> $HSTREAMING -mapper "/bin/sort -t'^A'" -input "input/*" -output output
> It causes a exeception as listed below. If i run the same command without the Ctrl-A character the command completes successfully.
> Exception in thread "main" org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.lang.RuntimeException: org.xml.sax.SAXParseException: Character reference "&#1" is an invalid XML character.
>         at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:551)
>         at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:472)
>         at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:453)
>         at org.apache.hadoop.conf.Configuration.get(Configuration.java:201)
>         at org.apache.hadoop.mapred.JobConf.getUser(JobConf.java:175)
>         at org.apache.hadoop.mapred.JobInProgress.<init>(JobInProgress.java:88)
>         at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:1016)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:337)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:514)
>         at org.apache.hadoop.ipc.Client$Connection.run(Client.java:248)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 11 06:17:01 2006
Return-Path: 
 <hadoop-dev-return-5053-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66148 invoked from network); 11 Nov 2006 06:17:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 06:17:01 -0000
Received: (qmail 63154 invoked by uid 500); 11 Nov 2006 06:17:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63118 invoked by uid 500); 11 Nov 2006 06:17:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63109 invoked by uid 99); 11 Nov 2006 06:17:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 22:17:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 22:16:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 60BAF7142D2
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 22:16:39 -0800 (PST)
Message-ID: <9087892.1163225799393.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 22:16:39 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-613) The final merge on the reduces should
 feed the reduce directly
In-Reply-To: <32865816.1161196175060.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-613?page=all ]

Devaraj Das updated HADOOP-613:
-------------------------------

    Attachment: reduce-get-iterator.patch

This has a bugfix to do with progress reporting (discovered during the run of the sort benchmark). Stating the obvious - the sort benchmark should get a good performance boost with this patch. Could someone please review this?

> The final merge on the reduces should feed the reduce directly
> --------------------------------------------------------------
>
>                 Key: HADOOP-613
>                 URL: http://issues.apache.org/jira/browse/HADOOP-613
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: reduce-get-iterator.patch, reduce-get-iterator.patch, reduce-get-iterator.patch
>
>
> The final merge on the input to the reduce should use the iterators from HADOOP-611 directly rather than using a round trip to disk.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 11 06:17:03 2006
Return-Path: 
 <hadoop-dev-return-5054-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66184 invoked from network); 11 Nov 2006 06:17:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 06:17:03 -0000
Received: (qmail 63597 invoked by uid 500); 11 Nov 2006 06:17:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63375 invoked by uid 500); 11 Nov 2006 06:17:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63366 invoked by uid 99); 11 Nov 2006 06:17:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 22:17:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 22:17:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B1AF47142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 10 Nov 2006 22:16:41 -0800 (PST)
Message-ID: <1809287.1163225801725.JavaMail.jira@brutus>
Date: Fri, 10 Nov 2006 22:16:41 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-613) The final merge on the reduces should
 feed the reduce directly
In-Reply-To: <32865816.1161196175060.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-613?page=all ]

Devaraj Das updated HADOOP-613:
-------------------------------

    Status: Patch Available  (was: Open)

> The final merge on the reduces should feed the reduce directly
> --------------------------------------------------------------
>
>                 Key: HADOOP-613
>                 URL: http://issues.apache.org/jira/browse/HADOOP-613
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: reduce-get-iterator.patch, reduce-get-iterator.patch, reduce-get-iterator.patch
>
>
> The final merge on the input to the reduce should use the iterators from HADOOP-611 directly rather than using a round trip to disk.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 11 09:48:03 2006
Return-Path: 
 <hadoop-dev-return-5055-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95962 invoked from network); 11 Nov 2006 09:48:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 09:48:03 -0000
Received: (qmail 70736 invoked by uid 500); 11 Nov 2006 09:48:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70701 invoked by uid 500); 11 Nov 2006 09:48:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70688 invoked by uid 99); 11 Nov 2006 09:48:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 01:48:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 01:48:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A9A4A7142FC
	for <hadoop-dev@lucene.apache.org>; Sat, 11 Nov 2006 01:47:41 -0800 (PST)
Message-ID: <605672.1163238461692.JavaMail.jira@brutus>
Date: Sat, 11 Nov 2006 01:47:41 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-489) Seperating user logs from system logs
 in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-489?page=all ]

Arun C Murthy updated HADOOP-489:
---------------------------------

    Attachment: HADOOP-489_20061111.patch

Thanks for the feedback Doug...

> I can see no reason why TaskLog needs to be public. It should be package-private.
Fixed. (attached patch)

> 'ant test' creates a 'userlog' directory in the connected directory that is not removed. This should instead be created in
> build/test, no? (The 'history' directory is also created, but that is not introduced by this patch.)

This seems due to (a bug?) the way the System.property 'hadoop.log.dir' is defined in the 'test-core' target...

build.xml - line nos. 329-331
      <sysproperty key="hadoop.log.dir" value="${hadoop.log.dir}"/>
      <sysproperty key="test.src.dir" value="${test.src.dir}"/>
      <sysproperty key="hadoop.log.dir" value="."/>

This causes the userlog/history directories to be wrongly created... TaskLog relies on 'hadoop.log.dir' for the parent dir of 'userlogs' .

Is there a particular reason
      <sysproperty key="hadoop.log.dir" value="."/>
is needed? If not, I'll file a new bug?

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-489_20061019.patch, HADOOP-489_20061101.patch, HADOOP-489_20061102.patch, HADOOP-489_20061107.patch, HADOOP-489_20061109.patch, HADOOP-489_20061111.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 11 09:48:07 2006
Return-Path: 
 <hadoop-dev-return-5056-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96020 invoked from network); 11 Nov 2006 09:48:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 09:48:07 -0000
Received: (qmail 71177 invoked by uid 500); 11 Nov 2006 09:48:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70955 invoked by uid 500); 11 Nov 2006 09:48:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70946 invoked by uid 99); 11 Nov 2006 09:48:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 01:48:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 01:48:06 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 389F37142CD
	for <hadoop-dev@lucene.apache.org>; Sat, 11 Nov 2006 01:47:46 -0800 (PST)
Message-ID: <12157404.1163238466229.JavaMail.jira@brutus>
Date: Sat, 11 Nov 2006 01:47:46 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-489) Seperating user logs from system logs
 in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-489?page=all ]

Arun C Murthy updated HADOOP-489:
---------------------------------

    Status: Patch Available  (was: Open)

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-489_20061019.patch, HADOOP-489_20061101.patch, HADOOP-489_20061102.patch, HADOOP-489_20061107.patch, HADOOP-489_20061109.patch, HADOOP-489_20061111.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 11 09:50:00 2006
Return-Path: 
 <hadoop-dev-return-5057-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96177 invoked from network); 11 Nov 2006 09:50:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 09:50:00 -0000
Received: (qmail 73942 invoked by uid 500); 11 Nov 2006 09:50:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73915 invoked by uid 500); 11 Nov 2006 09:50:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73906 invoked by uid 99); 11 Nov 2006 09:50:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 01:50:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 01:49:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DFBE77142FA
	for <hadoop-dev@lucene.apache.org>; Sat, 11 Nov 2006 01:49:38 -0800 (PST)
Message-ID: <20328007.1163238578913.JavaMail.jira@brutus>
Date: Sat, 11 Nov 2006 01:49:38 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-661) JobConf for a job should be viewable
 from the web/ui
In-Reply-To: <20147831.1162333456586.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-661?page=all ]

Arun C Murthy updated HADOOP-661:
---------------------------------

    Attachment: HADOOP-661_20061111.patch

Here's a fairly straightforward patch which 'linkifies' the 'JobFile' in jobdetails.jsp to jobconf.jsp which in turn fetches the job.xml from dfs for the running job, runs it through jobconf.xsl and prints it out.

I've had to add a org.apache.hadoop.util.XMLUtils.java to process jobconf.xsl+job.xml since the jsp compiler is java-1.4 and doens't have some requisite javax.xml.transform* packages for the same processing...

> JobConf for a job should be viewable from the web/ui
> ----------------------------------------------------
>
>                 Key: HADOOP-661
>                 URL: http://issues.apache.org/jira/browse/HADOOP-661
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-661_20061111.patch
>
>
> It would be very useful to be able to see the JobConf for a job from the web/ui. I would add a link from the job detail page to an xml dump of the JobConf which uses a variant of the configuration.xsl, which I would add to the webapps/static directory, to display it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 11 09:52:01 2006
Return-Path: 
 <hadoop-dev-return-5058-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96326 invoked from network); 11 Nov 2006 09:52:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 09:52:01 -0000
Received: (qmail 74633 invoked by uid 500); 11 Nov 2006 09:52:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74593 invoked by uid 500); 11 Nov 2006 09:52:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74584 invoked by uid 99); 11 Nov 2006 09:52:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 01:52:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 01:52:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ED54D7142D2
	for <hadoop-dev@lucene.apache.org>; Sat, 11 Nov 2006 01:51:38 -0800 (PST)
Message-ID: <11788561.1163238698969.JavaMail.jira@brutus>
Date: Sat, 11 Nov 2006 01:51:38 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-661) JobConf for a job should be viewable
 from the web/ui
In-Reply-To: <20147831.1162333456586.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-661?page=all ]

Arun C Murthy updated HADOOP-661:
---------------------------------

           Status: Patch Available  (was: In Progress)
    Fix Version/s: 0.9.0

> JobConf for a job should be viewable from the web/ui
> ----------------------------------------------------
>
>                 Key: HADOOP-661
>                 URL: http://issues.apache.org/jira/browse/HADOOP-661
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-661_20061111.patch
>
>
> It would be very useful to be able to see the JobConf for a job from the web/ui. I would add a link from the job detail page to an xml dump of the JobConf which uses a variant of the configuration.xsl, which I would add to the webapps/static directory, to display it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Nov 12 22:12:02 2006
Return-Path: 
 <hadoop-dev-return-5059-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29066 invoked from network); 12 Nov 2006 22:12:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2006 22:12:02 -0000
Received: (qmail 25484 invoked by uid 500); 12 Nov 2006 22:12:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25435 invoked by uid 500); 12 Nov 2006 22:12:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25426 invoked by uid 99); 12 Nov 2006 22:12:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 14:12:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 14:12:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 331F9714310
	for <hadoop-dev@lucene.apache.org>; Sun, 12 Nov 2006 14:11:40 -0800 (PST)
Message-ID: <30398578.1163369500205.JavaMail.jira@brutus>
Date: Sun, 12 Nov 2006 14:11:40 -0800 (PST)
From: "Tom White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-574?page=comments#action_12449188 ] 
            
Tom White commented on HADOOP-574:
----------------------------------

Thanks Doug. Collaboration sounds good: I'll contact Jim directly.

Regarding HADOOP-571 I agree it makes sense to tackle this in conjunction. I'll have a look at it after we get the basics of the S3 filesystem working.

As far as the design goes I agree that (like DFS) the S3 filesystem should divide things into blocks and buffer them to disk before writing them to S3. I'm not sure about using putting the block number at the end of the filename (using a delimiter) since this makes renames very inefficient as S3 has no rename operation. Instead I have opted for a level of indirection whereby the S3 object at the filename is a metadata file which lists the block IDs that hold the data. A rename then is simply a re-PUT of the metadata. What do you think?

The other aspect I haven't put much thought into yet is locking. Keeping the number of HTTP requests to a minimum will be an interesting challenge.


> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>            Reporter: Doug Cutting
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 06:35:00 2006
Return-Path: 
 <hadoop-dev-return-5060-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50501 invoked from network); 13 Nov 2006 06:35:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 06:35:00 -0000
Received: (qmail 63493 invoked by uid 500); 13 Nov 2006 06:35:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63263 invoked by uid 500); 13 Nov 2006 06:35:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63254 invoked by uid 99); 13 Nov 2006 06:35:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 22:35:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 22:34:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DDED57142F6
	for <hadoop-dev@lucene.apache.org>; Sun, 12 Nov 2006 22:34:38 -0800 (PST)
Message-ID: <5923787.1163399678906.JavaMail.jira@brutus>
Date: Sun, 12 Nov 2006 22:34:38 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-661) JobConf for a job should be viewable
 from the web/ui
In-Reply-To: <20147831.1162333456586.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-661?page=all ]

Arun C Murthy updated HADOOP-661:
---------------------------------

    Status: Open  (was: Patch Available)

Need to tweak this patch a little bit more...

> JobConf for a job should be viewable from the web/ui
> ----------------------------------------------------
>
>                 Key: HADOOP-661
>                 URL: http://issues.apache.org/jira/browse/HADOOP-661
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-661_20061111.patch
>
>
> It would be very useful to be able to see the JobConf for a job from the web/ui. I would add a link from the job detail page to an xml dump of the JobConf which uses a variant of the configuration.xsl, which I would add to the webapps/static directory, to display it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 10:14:01 2006
Return-Path: 
 <hadoop-dev-return-5061-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25361 invoked from network); 13 Nov 2006 10:14:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 10:14:01 -0000
Received: (qmail 51262 invoked by uid 500); 13 Nov 2006 10:14:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51239 invoked by uid 500); 13 Nov 2006 10:14:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51230 invoked by uid 99); 13 Nov 2006 10:14:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 02:14:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 02:13:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 084EF7142CD
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 02:13:39 -0800 (PST)
Message-ID: <7026645.1163412819031.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 02:13:39 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-661) JobConf for a job should be viewable
 from the web/ui
In-Reply-To: <20147831.1162333456586.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-661?page=all ]

Arun C Murthy updated HADOOP-661:
---------------------------------

    Attachment: HADOOP-661_20061113.patch

Updated patch:
a) jobconf.xsl is placed in src/webapps/static
b) Dumping out in-memory configuration (via JobInProgress.getConf()) rather than the job.xml in dfs.

> JobConf for a job should be viewable from the web/ui
> ----------------------------------------------------
>
>                 Key: HADOOP-661
>                 URL: http://issues.apache.org/jira/browse/HADOOP-661
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-661_20061111.patch, HADOOP-661_20061113.patch
>
>
> It would be very useful to be able to see the JobConf for a job from the web/ui. I would add a link from the job detail page to an xml dump of the JobConf which uses a variant of the configuration.xsl, which I would add to the webapps/static directory, to display it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 10:14:02 2006
Return-Path: 
 <hadoop-dev-return-5062-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25407 invoked from network); 13 Nov 2006 10:14:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 10:14:02 -0000
Received: (qmail 51758 invoked by uid 500); 13 Nov 2006 10:14:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51529 invoked by uid 500); 13 Nov 2006 10:14:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51520 invoked by uid 99); 13 Nov 2006 10:14:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 02:14:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 02:14:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 171DC7142FC
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 02:13:41 -0800 (PST)
Message-ID: <30041847.1163412821092.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 02:13:41 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-661) JobConf for a job should be viewable
 from the web/ui
In-Reply-To: <20147831.1162333456586.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-661?page=all ]

Arun C Murthy updated HADOOP-661:
---------------------------------

    Status: Patch Available  (was: Open)

> JobConf for a job should be viewable from the web/ui
> ----------------------------------------------------
>
>                 Key: HADOOP-661
>                 URL: http://issues.apache.org/jira/browse/HADOOP-661
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-661_20061111.patch, HADOOP-661_20061113.patch
>
>
> It would be very useful to be able to see the JobConf for a job from the web/ui. I would add a link from the job detail page to an xml dump of the JobConf which uses a variant of the configuration.xsl, which I would add to the webapps/static directory, to display it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 10:18:03 2006
Return-Path: 
 <hadoop-dev-return-5063-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26076 invoked from network); 13 Nov 2006 10:18:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 10:18:03 -0000
Received: (qmail 56405 invoked by uid 500); 13 Nov 2006 10:18:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56184 invoked by uid 500); 13 Nov 2006 10:18:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56175 invoked by uid 99); 13 Nov 2006 10:18:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 02:18:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 02:18:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D38F37142CD
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 02:17:39 -0800 (PST)
Message-ID: <16415969.1163413059863.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 02:17:39 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12449297 ] 
            
Arun C Murthy commented on HADOOP-538:
--------------------------------------

Doug,
> 1. There's some debug output in bin/hadoop, an 'echo'. 
Newer patch forthcoming to fix this oversight...

> The patch should not include binaries: these should be built somehow by build.xml. 
I have attached the .so for linux built via 'ant compile-native'... we will need to check this in for people who don't want to install the C compilation environment as we had discussed previously. Am I missing something here?

> On second thought, the custom libs should probably go in build/native and the prebuilt in lib/native.
Just to clarify: you'd want the 'custom built' libhadoop.so to override the 'prebuilt' one in lib/native on 'ant package' ?

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_20061108.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 11:00:06 2006
Return-Path: 
 <hadoop-dev-return-5064-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38497 invoked from network); 13 Nov 2006 11:00:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 11:00:06 -0000
Received: (qmail 6724 invoked by uid 500); 13 Nov 2006 11:00:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6709 invoked by uid 500); 13 Nov 2006 11:00:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6688 invoked by uid 99); 13 Nov 2006 11:00:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 03:00:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 03:00:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5D19F7142D7
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 02:59:38 -0800 (PST)
Message-ID: <15902768.1163415578378.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 02:59:38 -0800 (PST)
From: "Vladimir Krokhmalyov (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-652) Not all Datastructures are updated
 when a block is deleted
In-Reply-To: <8743293.1161975076609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-652?page=all ]

Vladimir Krokhmalyov updated HADOOP-652:
----------------------------------------

               Status: Patch Available  (was: Open)
    Affects Version/s: 0.9.0
                           (was: 0.8.0)

Yes. Synchronization in FSDataset already changed. But I think synchronized block in invalidate() method should be smaller, because getFile() call is already synchronized and f.delete() call may be blocked in OS in some situations. So I submit the patch with these changes and with "-u" option, as you instruct me.

> Not all Datastructures are updated when a block is deleted
> ----------------------------------------------------------
>
>                 Key: HADOOP-652
>                 URL: http://issues.apache.org/jira/browse/HADOOP-652
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.9.0
>            Reporter: Raghu Angadi
>         Attachments: FSDataset.java.patch
>
>
> Currently when a block is deleted, DataNode just deletes the physical file and updates its map. We need to update more things. For e.g. numBlocks in FSDir is not decremented.. effect of this would be that we will create more subdirectories than necessary. It might not show up badly yet since numBlocks gets correct value when the dataNode restarts. I have to see what else needs to be updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 11:01:59 2006
Return-Path: 
 <hadoop-dev-return-5065-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39405 invoked from network); 13 Nov 2006 11:01:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 11:01:59 -0000
Received: (qmail 10280 invoked by uid 500); 13 Nov 2006 11:02:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10084 invoked by uid 500); 13 Nov 2006 11:02:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10075 invoked by uid 99); 13 Nov 2006 11:02:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 03:02:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 03:01:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5C79D7142D7
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 03:01:38 -0800 (PST)
Message-ID: <6593089.1163415698376.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 03:01:38 -0800 (PST)
From: "Vladimir Krokhmalyov (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-652) Not all Datastructures are updated
 when a block is deleted
In-Reply-To: <8743293.1161975076609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-652?page=all ]

Vladimir Krokhmalyov updated HADOOP-652:
----------------------------------------

    Attachment: FSDataset.java.patch

> Not all Datastructures are updated when a block is deleted
> ----------------------------------------------------------
>
>                 Key: HADOOP-652
>                 URL: http://issues.apache.org/jira/browse/HADOOP-652
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.9.0
>            Reporter: Raghu Angadi
>         Attachments: FSDataset.java.patch, FSDataset.java.patch
>
>
> Currently when a block is deleted, DataNode just deletes the physical file and updates its map. We need to update more things. For e.g. numBlocks in FSDir is not decremented.. effect of this would be that we will create more subdirectories than necessary. It might not show up badly yet since numBlocks gets correct value when the dataNode restarts. I have to see what else needs to be updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 12:21:02 2006
Return-Path: 
 <hadoop-dev-return-5066-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74987 invoked from network); 13 Nov 2006 12:21:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 12:21:02 -0000
Received: (qmail 40223 invoked by uid 500); 13 Nov 2006 12:21:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40194 invoked by uid 500); 13 Nov 2006 12:21:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40185 invoked by uid 99); 13 Nov 2006 12:21:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 04:21:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 04:21:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 47425714311
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 04:20:40 -0800 (PST)
Message-ID: <5295922.1163420440289.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 04:20:40 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Attachment: Hadoop-76_3.patch

The patch failed with Streaming test when run twice in succession, because output file created in first run still exists in second run and PhasedFileSystem was not handling an exception while rename. 
This patch fixes the issue. 

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, Hadoop-76_2.patch, Hadoop-76_3.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 13:38:00 2006
Return-Path: 
 <hadoop-dev-return-5067-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2298 invoked from network); 13 Nov 2006 13:38:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 13:38:00 -0000
Received: (qmail 58319 invoked by uid 500); 13 Nov 2006 13:38:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58098 invoked by uid 500); 13 Nov 2006 13:38:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58089 invoked by uid 99); 13 Nov 2006 13:38:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 05:38:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 05:37:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 434B4714311
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 05:37:38 -0800 (PST)
Message-ID: <18718290.1163425058272.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 05:37:38 -0800 (PST)
From: "Uros Gruber (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-516) Eclipse-based GUI: DFS explorer and
 basic Map/Reduce job launcher
In-Reply-To: <13131373.1157736022384.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-516?page=3Dcomments#actio=
n_12449367 ]=20
           =20
Uros Gruber commented on HADOOP-516:
------------------------------------

+1=20

It would be gret for standalone app, because we don't have eclipse on every=
 computer. We use win32.

> Eclipse-based GUI: DFS explorer and basic Map/Reduce job launcher
> -----------------------------------------------------------------
>
>                 Key: HADOOP-516
>                 URL: http://issues.apache.org/jira/browse/HADOOP-516
>             Project: Hadoop
>          Issue Type: New Feature
>         Environment: Eclipse 3.2
> JDK 1.5
>            Reporter: Fr=C3=A9d=C3=A9ric Bertin
>         Attachments: hdfsExplorer.zip, hdfsExplorer2.zip
>
>
> to increase productivity in our current project (which makes a heavy use =
of Hadoop), we wrote a small Eclipse-based GUI application which basically =
consists in 2 views:
>    *  a HDFS explorer adapted from Eclipse filesystem explorer example.
>      For now, it includes the following features:
>          o classical tree-based browsing interface, with directory
>            content being detailed in a 3 columns table (file name, file
>            size, file type)
>          o refresh button
>          o delete file or directory (with confirm dialog): select files
>            in the tree or table and click the "Delete" button
>          o rename file or directory: simple click on the file in the
>            table, type the new name and validate
>          o open file with system editor: select the file in the table
>            and click "Open" button (works on Windows, not on Linux)
>          o internal drag & drop
>          o external drag & drop from the local filesystem to the HDFS
>            (the opposite doesn't work)
>    * a MapReduce *very* simple job launcher:
>          o select the job XML configuration file
>          o run the job
>          o kill the job
>          o visualize map and reduce progress with progress bars
>          o open a browser on the Hadoop job tracker web interface=20
> INSTALLATION NOTES:
>  - Eclipse 3.2
>  - JDK 1.5
>  - import the archive in Eclipse
>  - copy your hadoop conf file (hadoop-default.xml in "src" folder) -> thi=
s step should be moved in the GUI later
>  - right-click on the project and Run As -> Eclipse Application
>  - enjoy...

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Mon Nov 13 19:23:09 2006
Return-Path: 
 <hadoop-dev-return-5068-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48186 invoked from network); 13 Nov 2006 19:23:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 19:23:09 -0000
Received: (qmail 1583 invoked by uid 500); 13 Nov 2006 19:23:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1509 invoked by uid 500); 13 Nov 2006 19:23:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1469 invoked by uid 99); 13 Nov 2006 19:23:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 11:23:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 11:23:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4FFA57142FE
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 11:22:40 -0800 (PST)
Message-ID: <2049892.1163445760324.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 11:22:40 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-574?page=comments#action_12449457 ] 
            
Doug Cutting commented on HADOOP-574:
-------------------------------------

> The other aspect I haven't put much thought into yet is locking.

I don't think locking is critical for for the first version.  MapReduce jobs shouldn't generally require locking.  Longer term we should probably consider adding a locking service to Hadoop directly, rather than relying on one in the filesystem implementation.

If no one else steps up to the plate in the next day or so then I'll start implementing HADOOP-571 (uri-based FileSystem Paths).  I'd like to get that into this month's release if possible.

I also added a related thread to Amazon's EC2 forum.

http://developer.amazonwebservices.com/connect/thread.jspa?threadID=12677

When you get something working, please attach it as a patch to this issue.  Thanks!


> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>            Reporter: Doug Cutting
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 19:36:01 2006
Return-Path: 
 <hadoop-dev-return-5069-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52213 invoked from network); 13 Nov 2006 19:36:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 19:36:01 -0000
Received: (qmail 28749 invoked by uid 500); 13 Nov 2006 19:36:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28723 invoked by uid 500); 13 Nov 2006 19:36:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28709 invoked by uid 99); 13 Nov 2006 19:36:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 11:36:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 11:35:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3DD107142D7
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 11:35:38 -0800 (PST)
Message-ID: <16244895.1163446538250.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 11:35:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-689) hadoop should provide a common way to
 wrap instances with different types into one type
In-Reply-To: <2487900.1162955810892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-689?page=all ]

Doug Cutting updated HADOOP-689:
--------------------------------

    Status: Patch Available  (was: Open)

Adding this to the patch-review queue...

> hadoop should provide a common way to wrap instances with different types into one type
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-689
>                 URL: http://issues.apache.org/jira/browse/HADOOP-689
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>         Environment: All environment
>            Reporter: Feng Jiang
>         Attachments: HADOOP-689.patch
>
>
> When two sequence files, which have same Key type but different Value types, are mapped out to reduce, multiple Value types is not allowed. In this case, we need a way to wrap instances with different types into one class type to reduce.
> In current code, ObjectWritable is a sole choice. but it costs too many space, because the class declaration will be appended into output file as a string for every Key-value pair.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 19:46:15 2006
Return-Path: 
 <hadoop-dev-return-5070-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55379 invoked from network); 13 Nov 2006 19:46:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 19:46:15 -0000
Received: (qmail 50697 invoked by uid 500); 13 Nov 2006 19:46:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50660 invoked by uid 500); 13 Nov 2006 19:46:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50585 invoked by uid 99); 13 Nov 2006 19:46:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 11:46:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 11:45:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F3BD77142CD
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 11:45:38 -0800 (PST)
Message-ID: <17824676.1163447138995.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 11:45:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12449465 ] 
            
Doug Cutting commented on HADOOP-538:
-------------------------------------

> I have attached the .so for linux  [ ... ] Am I missing something here?

Not really.  Mostly I was checking that I wasn't missing something, that there wasn't something special about these.  Please don't bother to submit these with future versions of the patch.  Rather, I'll generate them and commit them.  To my thinking, generated files should be generated by the committer and not included in the patch.

> you'd want the 'custom built' libhadoop.so to override the 'prebuilt' one in lib/native on 'ant package'

Yes.  The contents of the build directory should override pre-built binaries.


> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_20061108.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 19:51:02 2006
Return-Path: 
 <hadoop-dev-return-5071-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56235 invoked from network); 13 Nov 2006 19:51:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 19:51:02 -0000
Received: (qmail 60873 invoked by uid 500); 13 Nov 2006 19:51:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60848 invoked by uid 500); 13 Nov 2006 19:51:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60832 invoked by uid 99); 13 Nov 2006 19:51:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 11:51:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 11:50:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C542D7142FE
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 11:50:39 -0800 (PST)
Message-ID: <204499.1163447439805.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 11:50:39 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-571) Path should use URI syntax
In-Reply-To: <6678550.1159825879600.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-571?page=all ]

Doug Cutting reassigned HADOOP-571:
-----------------------------------

    Assignee: Doug Cutting

> Path should use URI syntax
> --------------------------
>
>                 Key: HADOOP-571
>                 URL: http://issues.apache.org/jira/browse/HADOOP-571
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>
> The following changes are proposed:
> 1. Add a factory/registry of FileSystem implementations.  Given a protocol, hostname and port, it should be possible to get a FileSystem implementation.
> 2. Path's constructor should accept URI-formatted strings & a configuration.
> 3. A new Path method should be added: FileSystem.getFileSystem().  This returns the filesystem named in the path or the default configured filesystem.
> 4. Most methods which currently take FileSystem and Path parameters can be changed to take only Path.
> 5. Many FileSystem operations (create, open, delete, list, etc.) can become convenience methods on Path.
> 6. A URLStreamHandler can be defined in terms of the FileSystem API, so that URLs for any protocol with a registered FileSystem implementation can be accessed with a java.net.URL, permitting FileSystem implementations to be used on the classpath, etc.
> It is tempting to try to replace Path with java.net.URL, but URL's methods are insufficient for mapreduce.  We require directory listings, random access, location hints, etc., which are not supported by existing URLStreamHandler implementations.  But we can expose all FileSystem implementations for access with java.net.URL.
> (From a brainstorm with Owen.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 19:57:04 2006
Return-Path: 
 <hadoop-dev-return-5072-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57705 invoked from network); 13 Nov 2006 19:57:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 19:57:04 -0000
Received: (qmail 76476 invoked by uid 500); 13 Nov 2006 19:57:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76447 invoked by uid 500); 13 Nov 2006 19:57:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76438 invoked by uid 99); 13 Nov 2006 19:57:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 11:57:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 11:57:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 307EB7142FA
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 11:56:42 -0800 (PST)
Message-ID: <6758181.1163447802196.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 11:56:42 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12449469 ] 
            
Doug Cutting commented on HADOOP-489:
-------------------------------------

> Is there a particular reason <sysproperty key="hadoop.log.dir" value="."/> is needed?

Thanks for chasing this annyance down!  This looks backwards to me.  Shouldn't the default for this be ./logs, and the tests should override it to build/test/logs?  Yes, please file a bug for this.

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-489_20061019.patch, HADOOP-489_20061101.patch, HADOOP-489_20061102.patch, HADOOP-489_20061107.patch, HADOOP-489_20061109.patch, HADOOP-489_20061111.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 20:13:59 2006
Return-Path: 
 <hadoop-dev-return-5073-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63241 invoked from network); 13 Nov 2006 20:13:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 20:13:59 -0000
Received: (qmail 12133 invoked by uid 500); 13 Nov 2006 20:14:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12116 invoked by uid 500); 13 Nov 2006 20:14:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12106 invoked by uid 99); 13 Nov 2006 20:14:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 12:14:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 12:13:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 51301714310
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 12:13:37 -0800 (PST)
Message-ID: <4130113.1163448817329.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 12:13:37 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-712) Record-IO XML serialization is broken
 for control characters
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Record-IO XML serialization is broken for control characters
------------------------------------------------------------

                 Key: HADOOP-712
                 URL: http://issues.apache.org/jira/browse/HADOOP-712
             Project: Hadoop
          Issue Type: Bug
          Components: record
    Affects Versions: 0.8.0
         Environment: All
            Reporter: Milind Bhandarkar
         Assigned To: Milind Bhandarkar
             Fix For: 0.9.0


Record I/O does not serialize control characters in XML. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 20:16:00 2006
Return-Path: 
 <hadoop-dev-return-5074-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63906 invoked from network); 13 Nov 2006 20:16:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 20:16:00 -0000
Received: (qmail 17670 invoked by uid 500); 13 Nov 2006 20:16:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17639 invoked by uid 500); 13 Nov 2006 20:16:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17630 invoked by uid 99); 13 Nov 2006 20:16:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 12:16:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 12:15:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6C0D27142F6
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 12:15:38 -0800 (PST)
Message-ID: <30205585.1163448938439.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 12:15:38 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-712) Record-IO XML serialization is
 broken for control characters
In-Reply-To: <4130113.1163448817329.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-712?page=all ]

Work on HADOOP-712 started by Milind Bhandarkar.

> Record-IO XML serialization is broken for control characters
> ------------------------------------------------------------
>
>                 Key: HADOOP-712
>                 URL: http://issues.apache.org/jira/browse/HADOOP-712
>             Project: Hadoop
>          Issue Type: Bug
>          Components: record
>    Affects Versions: 0.8.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: record-bug.patch
>
>
> Record I/O does not serialize control characters in XML. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 20:16:01 2006
Return-Path: 
 <hadoop-dev-return-5075-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63937 invoked from network); 13 Nov 2006 20:16:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 20:16:01 -0000
Received: (qmail 17917 invoked by uid 500); 13 Nov 2006 20:16:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17892 invoked by uid 500); 13 Nov 2006 20:16:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17883 invoked by uid 99); 13 Nov 2006 20:16:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 12:16:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 12:16:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CEF2E7142D7
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 12:15:39 -0800 (PST)
Message-ID: <20907016.1163448939845.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 12:15:39 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-712) Record-IO XML serialization is broken
 for control characters
In-Reply-To: <4130113.1163448817329.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-712?page=all ]

Milind Bhandarkar updated HADOOP-712:
-------------------------------------

    Attachment: record-bug.patch

Fixed XML serialization of control characters. Also, modified the unit test to check serialization of control characters.

> Record-IO XML serialization is broken for control characters
> ------------------------------------------------------------
>
>                 Key: HADOOP-712
>                 URL: http://issues.apache.org/jira/browse/HADOOP-712
>             Project: Hadoop
>          Issue Type: Bug
>          Components: record
>    Affects Versions: 0.8.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: record-bug.patch
>
>
> Record I/O does not serialize control characters in XML. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 20:16:03 2006
Return-Path: 
 <hadoop-dev-return-5076-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63986 invoked from network); 13 Nov 2006 20:16:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 20:16:03 -0000
Received: (qmail 18167 invoked by uid 500); 13 Nov 2006 20:16:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18147 invoked by uid 500); 13 Nov 2006 20:16:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18134 invoked by uid 99); 13 Nov 2006 20:16:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 12:16:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 12:16:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 65F0E7142FE
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 12:15:41 -0800 (PST)
Message-ID: <26885753.1163448941415.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 12:15:41 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-712) Record-IO XML serialization is broken
 for control characters
In-Reply-To: <4130113.1163448817329.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-712?page=all ]

Milind Bhandarkar updated HADOOP-712:
-------------------------------------

    Status: Patch Available  (was: In Progress)

Patch submitted.

> Record-IO XML serialization is broken for control characters
> ------------------------------------------------------------
>
>                 Key: HADOOP-712
>                 URL: http://issues.apache.org/jira/browse/HADOOP-712
>             Project: Hadoop
>          Issue Type: Bug
>          Components: record
>    Affects Versions: 0.8.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: record-bug.patch
>
>
> Record I/O does not serialize control characters in XML. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 22:15:03 2006
Return-Path: 
 <hadoop-dev-return-5077-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11265 invoked from network); 13 Nov 2006 22:15:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 22:15:03 -0000
Received: (qmail 50157 invoked by uid 500); 13 Nov 2006 22:15:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50123 invoked by uid 500); 13 Nov 2006 22:15:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50114 invoked by uid 99); 13 Nov 2006 22:15:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 14:15:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 14:15:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8AA9B7142C1
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 14:14:40 -0800 (PST)
Message-ID: <16572826.1163456080565.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 14:14:40 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-668) improvement to DFS browsing WI
In-Reply-To: <4412988.1162407196575.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-668?page=all ]

Hairong Kuang updated HADOOP-668:
---------------------------------

    Attachment: WebUI.patch

This patch implmented suggested improvements 1, 3, 4, and 5.

Currently dfs does not support the time property for files. So I left improvement 2 unimplemented.

It also includes some cosmetic improvments. The content page uses the sans-serif font.  The background on alternating table row uses a different color, light grey or light blue.




> improvement to DFS browsing WI
> ------------------------------
>
>                 Key: HADOOP-668
>                 URL: http://issues.apache.org/jira/browse/HADOOP-668
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Hairong Kuang
>            Priority: Minor
>         Attachments: WebUI.patch
>
>
> improvement to DFS browsing WI:
> 1.  Increase the default "Chunk Size to view" to 32K bytes.  Currently 
> in most cases, I always need to add another digit to the size and get 
> the page redisplayed.
> 2. Add date to the display.  This may an "approximate" date -- e.g. the 
> date of any block of the file.
> 3. Remove the directory name from the file name in the file list
> 4. Let the links in the file list point to the file names, not to the 
> file data.  That is, if the files in the directory that is displayed in 
> the window have changed, clicking on the file name will still get the 
> user to the file, rather than saying "bad link" (or smth. like that).  
> If you still prefer to link to the file data (there is certain merit to 
> this), at least make the link to the removed file say
> "sorry, this file has been deleted, here is the link to the current 
> version"  or
> "sorry, this file has been deleted"
> 5. replication factor and size for directories is currently meaningless.
> use these fields for something meaningful, like total size of directory,
> number of files, creation date etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 22:17:01 2006
Return-Path: 
 <hadoop-dev-return-5078-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11686 invoked from network); 13 Nov 2006 22:17:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 22:17:01 -0000
Received: (qmail 52143 invoked by uid 500); 13 Nov 2006 22:17:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51913 invoked by uid 500); 13 Nov 2006 22:17:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51904 invoked by uid 99); 13 Nov 2006 22:17:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 14:17:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 14:16:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EBBD57142C1
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 14:16:38 -0800 (PST)
Message-ID: <27725038.1163456198963.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 14:16:38 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-668) improvement to DFS browsing WI
In-Reply-To: <4412988.1162407196575.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-668?page=all ]

Hairong Kuang updated HADOOP-668:
---------------------------------

               Status: Patch Available  (was: Open)
        Fix Version/s: 0.9.0
    Affects Version/s: 0.8.0

> improvement to DFS browsing WI
> ------------------------------
>
>                 Key: HADOOP-668
>                 URL: http://issues.apache.org/jira/browse/HADOOP-668
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Yoram Arnon
>         Assigned To: Hairong Kuang
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: WebUI.patch
>
>
> improvement to DFS browsing WI:
> 1.  Increase the default "Chunk Size to view" to 32K bytes.  Currently 
> in most cases, I always need to add another digit to the size and get 
> the page redisplayed.
> 2. Add date to the display.  This may an "approximate" date -- e.g. the 
> date of any block of the file.
> 3. Remove the directory name from the file name in the file list
> 4. Let the links in the file list point to the file names, not to the 
> file data.  That is, if the files in the directory that is displayed in 
> the window have changed, clicking on the file name will still get the 
> user to the file, rather than saying "bad link" (or smth. like that).  
> If you still prefer to link to the file data (there is certain merit to 
> this), at least make the link to the removed file say
> "sorry, this file has been deleted, here is the link to the current 
> version"  or
> "sorry, this file has been deleted"
> 5. replication factor and size for directories is currently meaningless.
> use these fields for something meaningful, like total size of directory,
> number of files, creation date etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 13 23:26:01 2006
Return-Path: 
 <hadoop-dev-return-5079-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37582 invoked from network); 13 Nov 2006 23:26:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 23:26:01 -0000
Received: (qmail 91726 invoked by uid 500); 13 Nov 2006 23:26:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91660 invoked by uid 500); 13 Nov 2006 23:26:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91639 invoked by uid 99); 13 Nov 2006 23:26:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 15:26:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 15:25:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6C08F7142FA
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 15:25:38 -0800 (PST)
Message-ID: <1728001.1163460338439.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 15:25:38 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-713) dfs list operation is too expensive
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

dfs list operation is too expensive
-----------------------------------

                 Key: HADOOP-713
                 URL: http://issues.apache.org/jira/browse/HADOOP-713
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
    Affects Versions: 0.8.0
            Reporter: Hairong Kuang


A list request to dfs returns an array of DFSFileInfo. A DFSFileInfo of a directory contains a field called contentsLen, indicating its size  which gets computed at the namenode side by resursively going through its subdirs. At the same time, the whole dfs directory tree is locked.

The list operation is used a lot by DFSClient for listing a directory, getting a file's size and # of replicas, and getting the size of dfs. Only the last operation needs the field contentsLen to be computed.

To reduce its cost, we can add a flag to the list request. ContentsLen is computed If the flag is set. By default, the flag is false.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 00:57:58 2006
Return-Path: 
 <hadoop-dev-return-5080-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65057 invoked from network); 14 Nov 2006 00:57:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 00:57:58 -0000
Received: (qmail 48950 invoked by uid 500); 14 Nov 2006 00:58:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48927 invoked by uid 500); 14 Nov 2006 00:58:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48918 invoked by uid 99); 14 Nov 2006 00:58:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 16:58:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 16:57:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1A6A0714310
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 16:57:37 -0800 (PST)
Message-ID: <25822000.1163465857105.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 16:57:37 -0800 (PST)
From: "Lei Chen (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-714) Namenode format does not work when
 hadoop is installed for first time
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Namenode format does not work when hadoop is installed for first time
---------------------------------------------------------------------

                 Key: HADOOP-714
                 URL: http://issues.apache.org/jira/browse/HADOOP-714
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.8.0
         Environment: Linux CentOS 4
            Reporter: Lei Chen


The namenode can not be formatted for the first time installation. There is a bug is the main function of org.apache.hadoop.dfs.NameNode class. The code will skip formatting when the directory for name does not exist. There is a possible fix for the bug

			if (argv.length == 1 && argv[0].equals("-format")) {
				boolean aborted = false;
				File[] dirs = getDirs(conf);

				for (int idx = 0; idx < dirs.length; idx++) {
					if (dirs[idx].exists()) {
						System.err.print("Re-format filesystem in " + dirs[idx]
								+ " ? (Y or N) ");
						if (!(System.in.read() == 'Y')) {
							System.err
									.println("Format aborted in " + dirs[idx]);
							aborted = true;
						} else {
							System.out.println("do format"
									+ dirs[idx].getAbsolutePath());
							format(dirs[idx]);
							System.err.println("Formatted " + dirs[idx]);
						}
						System.in.read(); // discard the enter-key
					} else {
						System.out.println("do format"
								+ dirs[idx].getAbsolutePath());
						format(dirs[idx]);
						System.err.println("Formatted " + dirs[idx]);
					}
				}

				System.exit(aborted ? 1 : 0);
			}


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 01:07:49 2006
Return-Path: 
 <hadoop-dev-return-5081-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67680 invoked from network); 14 Nov 2006 01:07:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 01:07:49 -0000
Received: (qmail 62555 invoked by uid 500); 14 Nov 2006 01:07:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62514 invoked by uid 500); 14 Nov 2006 01:07:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62505 invoked by uid 99); 14 Nov 2006 01:07:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 17:07:59 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 17:07:46 -0800
Received: from [192.168.1.66] ([172.21.179.5])
	by rsmtp1.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kAE17G2a010603
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 17:07:16 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <1728001.1163460338439.JavaMail.jira@brutus>
References: <1728001.1163460338439.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <2eb053f72aad826023a18ee751fdc319@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Created: (HADOOP-713) dfs list operation is too expensive
Date: Mon, 13 Nov 2006 17:07:14 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org

When listing a directory, for directory entries it may be more useful 
to display the number of files in a directory, rather than the number 
of bytes used by all the files in the directory and its subdirectories.
This a subjective opinion -- comments?

(Currently, the value displayed subdirectory is "0")

On Nov 13, 2006, at 3:25 PM, Hairong Kuang (JIRA) wrote:

> dfs list operation is too expensive
> -----------------------------------
>
>                  Key: HADOOP-713
>                  URL: http://issues.apache.org/jira/browse/HADOOP-713
>              Project: Hadoop
>           Issue Type: Improvement
>           Components: dfs
>     Affects Versions: 0.8.0
>             Reporter: Hairong Kuang
>
>
> A list request to dfs returns an array of DFSFileInfo. A DFSFileInfo 
> of a directory contains a field called contentsLen, indicating its 
> size  which gets computed at the namenode side by resursively going 
> through its subdirs. At the same time, the whole dfs directory tree is 
> locked.
>
> The list operation is used a lot by DFSClient for listing a directory, 
> getting a file's size and # of replicas, and getting the size of dfs. 
> Only the last operation needs the field contentsLen to be computed.
>
> To reduce its cost, we can add a flag to the list request. ContentsLen 
> is computed If the flag is set. By default, the flag is false.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the 
> administrators: 
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see: 
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Tue Nov 14 03:31:05 2006
Return-Path: 
 <hadoop-dev-return-5082-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11531 invoked from network); 14 Nov 2006 03:31:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 03:31:05 -0000
Received: (qmail 73767 invoked by uid 500); 14 Nov 2006 03:31:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73744 invoked by uid 500); 14 Nov 2006 03:31:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73725 invoked by uid 99); 14 Nov 2006 03:31:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 19:31:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 19:30:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4CBEA7142FE
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 19:30:38 -0800 (PST)
Message-ID: <30468102.1163475038311.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 19:30:38 -0800 (PST)
From: "Feng Jiang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-689) hadoop should provide a common way
 to wrap instances with different types into one type
In-Reply-To: <2487900.1162955810892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-689?page=comments#action_12449550 ] 
            
Feng Jiang commented on HADOOP-689:
-----------------------------------

how should I change the patch I submited a couple of days ago?
submit a new one? or make a patch for that patch?
Thanks.

> hadoop should provide a common way to wrap instances with different types into one type
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-689
>                 URL: http://issues.apache.org/jira/browse/HADOOP-689
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>         Environment: All environment
>            Reporter: Feng Jiang
>         Attachments: HADOOP-689.patch
>
>
> When two sequence files, which have same Key type but different Value types, are mapped out to reduce, multiple Value types is not allowed. In this case, we need a way to wrap instances with different types into one class type to reduce.
> In current code, ObjectWritable is a sole choice. but it costs too many space, because the class declaration will be appended into output file as a string for every Key-value pair.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 03:45:58 2006
Return-Path: 
 <hadoop-dev-return-5083-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15296 invoked from network); 14 Nov 2006 03:45:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 03:45:58 -0000
Received: (qmail 1882 invoked by uid 500); 14 Nov 2006 03:46:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1754 invoked by uid 500); 14 Nov 2006 03:46:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1745 invoked by uid 99); 14 Nov 2006 03:46:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 19:46:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 19:45:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1601F7142FE
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 19:45:37 -0800 (PST)
Message-ID: <30358261.1163475937086.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 19:45:37 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-715) build.xml sets up wrong
 'hadoop.log.dir' property for 'ant test'
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

build.xml sets up wrong 'hadoop.log.dir' property for 'ant test'
----------------------------------------------------------------

                 Key: HADOOP-715
                 URL: http://issues.apache.org/jira/browse/HADOOP-715
             Project: Hadoop
          Issue Type: Bug
          Components: test
    Affects Versions: 0.8.0
            Reporter: Arun C Murthy
         Assigned To: Arun C Murthy
             Fix For: 0.9.0


build.xml - line nos. 329-331
      <sysproperty key="hadoop.log.dir" value="${hadoop.log.dir}"/>
      <sysproperty key="test.src.dir" value="${test.src.dir}"/>
      <sysproperty key="hadoop.log.dir" value="."/> 
wrongly overrides 'hadoop.log.dir' causing it to be setup incorrectly.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 04:01:01 2006
Return-Path: 
 <hadoop-dev-return-5084-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18668 invoked from network); 14 Nov 2006 04:01:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 04:01:01 -0000
Received: (qmail 20760 invoked by uid 500); 14 Nov 2006 04:01:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20591 invoked by uid 500); 14 Nov 2006 04:01:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20582 invoked by uid 99); 14 Nov 2006 04:01:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 20:01:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 20:00:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 499BC7142FE
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 20:00:38 -0800 (PST)
Message-ID: <29511826.1163476838298.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 20:00:38 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-715) build.xml sets up wrong
 'hadoop.log.dir' property for 'ant test'
In-Reply-To: <30358261.1163475937086.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-715?page=all ]

Arun C Murthy updated HADOOP-715:
---------------------------------

    Attachment: HADOOP-715_20061114.patch

Here is a simple fix...

I've also renamed the 'hadoop.log.dir' variable in ant to 'test.log.dir' since it is used only in the 'test' target for consistency and to ensure people don't get confused.

> build.xml sets up wrong 'hadoop.log.dir' property for 'ant test'
> ----------------------------------------------------------------
>
>                 Key: HADOOP-715
>                 URL: http://issues.apache.org/jira/browse/HADOOP-715
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-715_20061114.patch
>
>
> build.xml - line nos. 329-331
>       <sysproperty key="hadoop.log.dir" value="${hadoop.log.dir}"/>
>       <sysproperty key="test.src.dir" value="${test.src.dir}"/>
>       <sysproperty key="hadoop.log.dir" value="."/> 
> wrongly overrides 'hadoop.log.dir' causing it to be setup incorrectly.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 04:01:01 2006
Return-Path: 
 <hadoop-dev-return-5085-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18682 invoked from network); 14 Nov 2006 04:01:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 04:01:01 -0000
Received: (qmail 21002 invoked by uid 500); 14 Nov 2006 04:01:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20839 invoked by uid 500); 14 Nov 2006 04:01:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20830 invoked by uid 99); 14 Nov 2006 04:01:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 20:01:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 20:00:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 97CE4714310
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 20:00:39 -0800 (PST)
Message-ID: <15755348.1163476839619.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 20:00:39 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-715) build.xml sets up wrong
 'hadoop.log.dir' property for 'ant test'
In-Reply-To: <30358261.1163475937086.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-715?page=all ]

Arun C Murthy updated HADOOP-715:
---------------------------------

    Status: Patch Available  (was: Open)

> build.xml sets up wrong 'hadoop.log.dir' property for 'ant test'
> ----------------------------------------------------------------
>
>                 Key: HADOOP-715
>                 URL: http://issues.apache.org/jira/browse/HADOOP-715
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-715_20061114.patch
>
>
> build.xml - line nos. 329-331
>       <sysproperty key="hadoop.log.dir" value="${hadoop.log.dir}"/>
>       <sysproperty key="test.src.dir" value="${test.src.dir}"/>
>       <sysproperty key="hadoop.log.dir" value="."/> 
> wrongly overrides 'hadoop.log.dir' causing it to be setup incorrectly.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 04:03:15 2006
Return-Path: 
 <hadoop-dev-return-5086-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18993 invoked from network); 14 Nov 2006 04:03:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 04:03:15 -0000
Received: (qmail 23291 invoked by uid 500); 14 Nov 2006 04:03:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23264 invoked by uid 500); 14 Nov 2006 04:03:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22528 invoked by uid 99); 14 Nov 2006 04:03:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 20:03:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 20:02:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 642197142FE
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 20:02:38 -0800 (PST)
Message-ID: <24806248.1163476958407.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 20:02:38 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-715) build.xml sets up wrong
 'hadoop.log.dir' property for 'ant test'
In-Reply-To: <30358261.1163475937086.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-715?page=all ]

Arun C Murthy updated HADOOP-715:
---------------------------------

    Priority: Minor  (was: Major)

> build.xml sets up wrong 'hadoop.log.dir' property for 'ant test'
> ----------------------------------------------------------------
>
>                 Key: HADOOP-715
>                 URL: http://issues.apache.org/jira/browse/HADOOP-715
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-715_20061114.patch
>
>
> build.xml - line nos. 329-331
>       <sysproperty key="hadoop.log.dir" value="${hadoop.log.dir}"/>
>       <sysproperty key="test.src.dir" value="${test.src.dir}"/>
>       <sysproperty key="hadoop.log.dir" value="."/> 
> wrongly overrides 'hadoop.log.dir' causing it to be setup incorrectly.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 06:30:59 2006
Return-Path: 
 <hadoop-dev-return-5087-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51396 invoked from network); 14 Nov 2006 06:30:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 06:30:59 -0000
Received: (qmail 62066 invoked by uid 500); 14 Nov 2006 06:31:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62046 invoked by uid 500); 14 Nov 2006 06:31:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62032 invoked by uid 99); 14 Nov 2006 06:31:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 22:31:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 22:30:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 40E4F7142CD
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 22:30:37 -0800 (PST)
Message-ID: <17806272.1163485837263.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 22:30:37 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-716) Javadoc warning in SequenceFile.java
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Javadoc warning in SequenceFile.java
------------------------------------

                 Key: HADOOP-716
                 URL: http://issues.apache.org/jira/browse/HADOOP-716
             Project: Hadoop
          Issue Type: Bug
          Components: io
            Reporter: Devaraj Das
         Assigned To: Devaraj Das
            Priority: Minor
         Attachments: javadoc.patch

Javadoc gives warning for a particular line in SequenceFile.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 06:31:04 2006
Return-Path: 
 <hadoop-dev-return-5088-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51486 invoked from network); 14 Nov 2006 06:31:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 06:31:04 -0000
Received: (qmail 62446 invoked by uid 500); 14 Nov 2006 06:31:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62421 invoked by uid 500); 14 Nov 2006 06:31:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62376 invoked by uid 99); 14 Nov 2006 06:31:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 22:31:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 22:30:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 894ED7142D7
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 22:30:38 -0800 (PST)
Message-ID: <30529931.1163485838559.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 22:30:38 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-716) Javadoc warning in SequenceFile.java
In-Reply-To: <17806272.1163485837263.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-716?page=all ]

Devaraj Das updated HADOOP-716:
-------------------------------

    Attachment: javadoc.patch

> Javadoc warning in SequenceFile.java
> ------------------------------------
>
>                 Key: HADOOP-716
>                 URL: http://issues.apache.org/jira/browse/HADOOP-716
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>            Priority: Minor
>         Attachments: javadoc.patch
>
>
> Javadoc gives warning for a particular line in SequenceFile.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 06:31:05 2006
Return-Path: 
 <hadoop-dev-return-5089-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51523 invoked from network); 14 Nov 2006 06:31:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 06:31:05 -0000
Received: (qmail 62487 invoked by uid 500); 14 Nov 2006 06:31:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62463 invoked by uid 500); 14 Nov 2006 06:31:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62453 invoked by uid 99); 14 Nov 2006 06:31:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 22:31:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 22:31:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DEEA07142F5
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 22:30:39 -0800 (PST)
Message-ID: <824042.1163485839910.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 22:30:39 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-716) Javadoc warning in SequenceFile.java
In-Reply-To: <17806272.1163485837263.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-716?page=all ]

Devaraj Das updated HADOOP-716:
-------------------------------

    Status: Patch Available  (was: Open)

> Javadoc warning in SequenceFile.java
> ------------------------------------
>
>                 Key: HADOOP-716
>                 URL: http://issues.apache.org/jira/browse/HADOOP-716
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>            Priority: Minor
>         Attachments: javadoc.patch
>
>
> Javadoc gives warning for a particular line in SequenceFile.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 06:49:58 2006
Return-Path: 
 <hadoop-dev-return-5090-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54384 invoked from network); 14 Nov 2006 06:49:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 06:49:58 -0000
Received: (qmail 80603 invoked by uid 500); 14 Nov 2006 06:50:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80576 invoked by uid 500); 14 Nov 2006 06:50:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80566 invoked by uid 99); 14 Nov 2006 06:50:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 22:50:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 22:49:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 27DE07142CD
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 22:49:37 -0800 (PST)
Message-ID: <23965121.1163486977160.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 22:49:37 -0800 (PST)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-717) When there are few reducers, sorting
 should be done by mappers
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

When there are few reducers, sorting should be done by mappers
--------------------------------------------------------------

                 Key: HADOOP-717
                 URL: http://issues.apache.org/jira/browse/HADOOP-717
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: arkady borkovsky


If I understand correctly, currently, sort happens on the reducer side.
So if few hundred mappers produce few (or many) Gig of data, and there is just ONE reduce to consume it, copying and sorting takes forever.

It may make sense to have a special case optimization for a single reducer.  (E.g. "when there is only reducer and many mappers, sort is done by the mappers, and reducer does only a merge")

Or to have some smarter policy that makes sure that sorting uses as many CPUs as it makes sense.   If  the map step has produced data on all the nodes of the cluster, it makes sense to use all the nodes for sorting.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 06:54:00 2006
Return-Path: 
 <hadoop-dev-return-5091-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55119 invoked from network); 14 Nov 2006 06:54:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 06:54:00 -0000
Received: (qmail 85194 invoked by uid 500); 14 Nov 2006 06:54:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85162 invoked by uid 500); 14 Nov 2006 06:54:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85153 invoked by uid 99); 14 Nov 2006 06:54:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 22:54:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 22:53:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4981F7142CD
	for <hadoop-dev@lucene.apache.org>; Mon, 13 Nov 2006 22:53:38 -0800 (PST)
Message-ID: <31170602.1163487218298.JavaMail.jira@brutus>
Date: Mon, 13 Nov 2006 22:53:38 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-717) When there are few reducers, sorting
 should be done by mappers
In-Reply-To: <23965121.1163486977160.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-717?page=comments#action_12449581 ] 
            
Devaraj Das commented on HADOOP-717:
------------------------------------

This is handled by Hadoop-331 (work in progress)

> When there are few reducers, sorting should be done by mappers
> --------------------------------------------------------------
>
>                 Key: HADOOP-717
>                 URL: http://issues.apache.org/jira/browse/HADOOP-717
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: arkady borkovsky
>
> If I understand correctly, currently, sort happens on the reducer side.
> So if few hundred mappers produce few (or many) Gig of data, and there is just ONE reduce to consume it, copying and sorting takes forever.
> It may make sense to have a special case optimization for a single reducer.  (E.g. "when there is only reducer and many mappers, sort is done by the mappers, and reducer does only a merge")
> Or to have some smarter policy that makes sure that sorting uses as many CPUs as it makes sense.   If  the map step has produced data on all the nodes of the cluster, it makes sense to use all the nodes for sorting.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 09:41:02 2006
Return-Path: 
 <hadoop-dev-return-5092-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2517 invoked from network); 14 Nov 2006 09:41:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 09:41:02 -0000
Received: (qmail 89888 invoked by uid 500); 14 Nov 2006 09:41:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89861 invoked by uid 500); 14 Nov 2006 09:41:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89852 invoked by uid 99); 14 Nov 2006 09:41:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 01:41:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 01:41:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 50B0E7142F5
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 01:40:40 -0800 (PST)
Message-ID: <14539400.1163497240327.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 01:40:40 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Attachment: Hadoop-76_4.patch

New patch, fixed some java doc warnings. 

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, Hadoop-76_2.patch, Hadoop-76_3.patch, Hadoop-76_4.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 09:41:05 2006
Return-Path: 
 <hadoop-dev-return-5093-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2577 invoked from network); 14 Nov 2006 09:41:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 09:41:05 -0000
Received: (qmail 90183 invoked by uid 500); 14 Nov 2006 09:41:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90158 invoked by uid 500); 14 Nov 2006 09:41:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90149 invoked by uid 99); 14 Nov 2006 09:41:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 01:41:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 01:41:03 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 907E77142C1
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 01:40:43 -0800 (PST)
Message-ID: <29368480.1163497243589.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 01:40:43 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Status: Patch Available  (was: In Progress)

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, Hadoop-76_2.patch, Hadoop-76_3.patch, Hadoop-76_4.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 09:52:01 2006
Return-Path: 
 <hadoop-dev-return-5094-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4554 invoked from network); 14 Nov 2006 09:52:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 09:52:01 -0000
Received: (qmail 10837 invoked by uid 500); 14 Nov 2006 09:52:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10814 invoked by uid 500); 14 Nov 2006 09:52:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10804 invoked by uid 99); 14 Nov 2006 09:52:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 01:52:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 01:52:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BF4F57142C1
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 01:51:39 -0800 (PST)
Message-ID: <33322944.1163497899781.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 01:51:39 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-476) Streaming should check for
 correctness of the task
In-Reply-To: <20801208.1156462750189.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-476?page=all ]

Sanjay Dahiya reassigned HADOOP-476:
------------------------------------

    Assignee: Sanjay Dahiya

> Streaming should check for correctness of the task
> --------------------------------------------------
>
>                 Key: HADOOP-476
>                 URL: http://issues.apache.org/jira/browse/HADOOP-476
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>         Assigned To: Sanjay Dahiya
>
> Currently, if anythin is wrong with streaming job, it dies without any explanation.
> Before creating and running actual MapReduce job, Streaming should check if:
> -- the executables (or scripts) for -mapper and -reducer are available and have right permissions
> -- the input fragments exist

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 09:52:03 2006
Return-Path: 
 <hadoop-dev-return-5095-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4599 invoked from network); 14 Nov 2006 09:52:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 09:52:03 -0000
Received: (qmail 11104 invoked by uid 500); 14 Nov 2006 09:52:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11075 invoked by uid 500); 14 Nov 2006 09:52:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11066 invoked by uid 99); 14 Nov 2006 09:52:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 01:52:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 01:52:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C13647142CD
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 01:51:41 -0800 (PST)
Message-ID: <5342090.1163497901789.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 01:51:41 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-476) Streaming should check for
 correctness of the task
In-Reply-To: <20801208.1156462750189.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-476?page=all ]

Work on HADOOP-476 started by Sanjay Dahiya.

> Streaming should check for correctness of the task
> --------------------------------------------------
>
>                 Key: HADOOP-476
>                 URL: http://issues.apache.org/jira/browse/HADOOP-476
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>         Assigned To: Sanjay Dahiya
>
> Currently, if anythin is wrong with streaming job, it dies without any explanation.
> Before creating and running actual MapReduce job, Streaming should check if:
> -- the executables (or scripts) for -mapper and -reducer are available and have right permissions
> -- the input fragments exist

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 09:54:04 2006
Return-Path: 
 <hadoop-dev-return-5096-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5439 invoked from network); 14 Nov 2006 09:54:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 09:54:04 -0000
Received: (qmail 20502 invoked by uid 500); 14 Nov 2006 09:54:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20479 invoked by uid 500); 14 Nov 2006 09:54:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20470 invoked by uid 99); 14 Nov 2006 09:54:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 01:54:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 01:53:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EBCD07142CD
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 01:53:38 -0800 (PST)
Message-ID: <24077471.1163498018963.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 01:53:38 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-476) Streaming should check for
 correctness of the task
In-Reply-To: <20801208.1156462750189.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-476?page=comments#action_12449628 ] 
            
Sanjay Dahiya commented on HADOOP-476:
--------------------------------------

I will be starting with getting streaming to use apache commons-cli parser as in HADOOP-675

> Streaming should check for correctness of the task
> --------------------------------------------------
>
>                 Key: HADOOP-476
>                 URL: http://issues.apache.org/jira/browse/HADOOP-476
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>         Assigned To: Sanjay Dahiya
>
> Currently, if anythin is wrong with streaming job, it dies without any explanation.
> Before creating and running actual MapReduce job, Streaming should check if:
> -- the executables (or scripts) for -mapper and -reducer are available and have right permissions
> -- the input fragments exist

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 09:58:58 2006
Return-Path: 
 <hadoop-dev-return-5097-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6722 invoked from network); 14 Nov 2006 09:58:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 09:58:58 -0000
Received: (qmail 31049 invoked by uid 500); 14 Nov 2006 09:59:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30903 invoked by uid 500); 14 Nov 2006 09:59:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30894 invoked by uid 99); 14 Nov 2006 09:59:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 01:59:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 01:58:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 234547142CD
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 01:58:37 -0800 (PST)
Message-ID: <3519324.1163498317141.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 01:58:37 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-718) JobTracker history should link to
 failed task attemps for tasks that succeeded eventually.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

JobTracker history should link to failed task attemps for tasks that succeeded eventually. 
-------------------------------------------------------------------------------------------

                 Key: HADOOP-718
                 URL: http://issues.apache.org/jira/browse/HADOOP-718
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: Sanjay Dahiya
         Assigned To: Sanjay Dahiya
            Priority: Minor


Jobtracker history should show a link to task attempts that failed but the task later succeeded. These could be killed speculative instances or actual task failures. currently if a task succeeds then job details page doesnt show those tasks as having failed attempts. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 11:25:02 2006
Return-Path: 
 <hadoop-dev-return-5098-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39027 invoked from network); 14 Nov 2006 11:25:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 11:25:02 -0000
Received: (qmail 87364 invoked by uid 500); 14 Nov 2006 11:25:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87344 invoked by uid 500); 14 Nov 2006 11:25:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87335 invoked by uid 99); 14 Nov 2006 11:25:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 03:25:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 03:25:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 34A5D7142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 03:24:40 -0800 (PST)
Message-ID: <27548604.1163503480212.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 03:24:40 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Arun C Murthy updated HADOOP-538:
---------------------------------

    Attachment: HADOOP-538_20061114.patch

Here is another patch incorporating Doug's feedback...

a) Custom built libraries in build directory override the ones in lib/native, and hence there is no prebuilt/custom distinction

b) I have reworked to account for a 'compile.native' property which controls whether the native stuff is built/tested/packaged...
$ ant -Dcompile.native=true package    #compile native-hadoop
$ ant package                                    #no native hadoop

  I have had to define a new target: 'compile-core-classes' which replaces existing 'compile-core' and redefined 'compile-core' as:

  <target name="compile-core" depends="compile-core-classes,compile-core-native">
   </target>

  The alternative to get 'ant -Dcompile.native=true package' or 'ant -Dcompile.native=true test' to work was to add a 'depends="compile-native"' to every target which has a 'depends="compile-core"' which I felt was error-prone and difficult to maintain...



> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_20061108.tgz, HADOOP-538_20061114.patch, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 11:27:00 2006
Return-Path: 
 <hadoop-dev-return-5099-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39643 invoked from network); 14 Nov 2006 11:27:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 11:27:00 -0000
Received: (qmail 93140 invoked by uid 500); 14 Nov 2006 11:27:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93108 invoked by uid 500); 14 Nov 2006 11:27:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93099 invoked by uid 99); 14 Nov 2006 11:27:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 03:27:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 03:26:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D5A617142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 03:26:38 -0800 (PST)
Message-ID: <3828983.1163503598872.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 03:26:38 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Arun C Murthy updated HADOOP-538:
---------------------------------

    Status: Patch Available  (was: Open)

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_20061108.tgz, HADOOP-538_20061114.patch, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 15:27:59 2006
Return-Path: 
 <hadoop-dev-return-5100-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16111 invoked from network); 14 Nov 2006 15:27:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 15:27:59 -0000
Received: (qmail 59929 invoked by uid 500); 14 Nov 2006 15:28:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59699 invoked by uid 500); 14 Nov 2006 15:28:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59690 invoked by uid 99); 14 Nov 2006 15:28:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 07:28:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 07:27:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3632F7142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 07:27:38 -0800 (PST)
Message-ID: <1367075.1163518058219.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 07:27:38 -0800 (PST)
From: =?utf-8?Q?Fr=C3=A9d=C3=A9ric_Bertin_=28JIRA=29?= <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-516) Eclipse-based GUI: DFS explorer and
 basic Map/Reduce job launcher
In-Reply-To: <13131373.1157736022384.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-516?page=3Dcomments#actio=
n_12449686 ]=20
           =20
Fr=C3=A9d=C3=A9ric Bertin commented on HADOOP-516:
----------------------------------------

the file is too big to be attached to the issue (18MB). You can download it=
 from this link: http://ind75.free.fr/HDFSExplorer_win32.zip

> Eclipse-based GUI: DFS explorer and basic Map/Reduce job launcher
> -----------------------------------------------------------------
>
>                 Key: HADOOP-516
>                 URL: http://issues.apache.org/jira/browse/HADOOP-516
>             Project: Hadoop
>          Issue Type: New Feature
>         Environment: Eclipse 3.2
> JDK 1.5
>            Reporter: Fr=C3=A9d=C3=A9ric Bertin
>         Attachments: hdfsExplorer.zip, hdfsExplorer2.zip
>
>
> to increase productivity in our current project (which makes a heavy use =
of Hadoop), we wrote a small Eclipse-based GUI application which basically =
consists in 2 views:
>    *  a HDFS explorer adapted from Eclipse filesystem explorer example.
>      For now, it includes the following features:
>          o classical tree-based browsing interface, with directory
>            content being detailed in a 3 columns table (file name, file
>            size, file type)
>          o refresh button
>          o delete file or directory (with confirm dialog): select files
>            in the tree or table and click the "Delete" button
>          o rename file or directory: simple click on the file in the
>            table, type the new name and validate
>          o open file with system editor: select the file in the table
>            and click "Open" button (works on Windows, not on Linux)
>          o internal drag & drop
>          o external drag & drop from the local filesystem to the HDFS
>            (the opposite doesn't work)
>    * a MapReduce *very* simple job launcher:
>          o select the job XML configuration file
>          o run the job
>          o kill the job
>          o visualize map and reduce progress with progress bars
>          o open a browser on the Hadoop job tracker web interface=20
> INSTALLATION NOTES:
>  - Eclipse 3.2
>  - JDK 1.5
>  - import the archive in Eclipse
>  - copy your hadoop conf file (hadoop-default.xml in "src" folder) -> thi=
s step should be moved in the GUI later
>  - right-click on the project and Run As -> Eclipse Application
>  - enjoy...

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Tue Nov 14 18:20:01 2006
Return-Path: 
 <hadoop-dev-return-5101-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90425 invoked from network); 14 Nov 2006 18:20:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 18:20:01 -0000
Received: (qmail 39303 invoked by uid 500); 14 Nov 2006 18:20:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39073 invoked by uid 500); 14 Nov 2006 18:20:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39059 invoked by uid 99); 14 Nov 2006 18:20:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:20:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:19:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3AF4A7142F5
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 10:19:38 -0800 (PST)
Message-ID: <8760109.1163528378238.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 10:19:38 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-714) Namenode format does not work when
 hadoop is installed for first time
In-Reply-To: <25822000.1163465857105.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-714?page=comments#action_12449720 ] 
            
Milind Bhandarkar commented on HADOOP-714:
------------------------------------------

This bug has been fixed. Please take a look at http://issues.apache.org/jira/browse/HADOOP-682
Thanks.


> Namenode format does not work when hadoop is installed for first time
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-714
>                 URL: http://issues.apache.org/jira/browse/HADOOP-714
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: Linux CentOS 4
>            Reporter: Lei Chen
>             Fix For: 0.9.0
>
>
> The namenode can not be formatted for the first time installation. There is a bug is the main function of org.apache.hadoop.dfs.NameNode class. The code will skip formatting when the directory for name does not exist. There is a possible fix for the bug
> 			if (argv.length == 1 && argv[0].equals("-format")) {
> 				boolean aborted = false;
> 				File[] dirs = getDirs(conf);
> 				for (int idx = 0; idx < dirs.length; idx++) {
> 					if (dirs[idx].exists()) {
> 						System.err.print("Re-format filesystem in " + dirs[idx]
> 								+ " ? (Y or N) ");
> 						if (!(System.in.read() == 'Y')) {
> 							System.err
> 									.println("Format aborted in " + dirs[idx]);
> 							aborted = true;
> 						} else {
> 							System.out.println("do format"
> 									+ dirs[idx].getAbsolutePath());
> 							format(dirs[idx]);
> 							System.err.println("Formatted " + dirs[idx]);
> 						}
> 						System.in.read(); // discard the enter-key
> 					} else {
> 						System.out.println("do format"
> 								+ dirs[idx].getAbsolutePath());
> 						format(dirs[idx]);
> 						System.err.println("Formatted " + dirs[idx]);
> 					}
> 				}
> 				System.exit(aborted ? 1 : 0);
> 			}

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 18:20:02 2006
Return-Path: 
 <hadoop-dev-return-5102-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90474 invoked from network); 14 Nov 2006 18:20:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 18:20:02 -0000
Received: (qmail 39349 invoked by uid 500); 14 Nov 2006 18:20:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39084 invoked by uid 500); 14 Nov 2006 18:20:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39072 invoked by uid 99); 14 Nov 2006 18:20:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:20:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:19:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 81DAC7142F6
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 10:19:39 -0800 (PST)
Message-ID: <17157669.1163528379529.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 10:19:39 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-714) Namenode format does not work when
 hadoop is installed for first time
In-Reply-To: <25822000.1163465857105.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-714?page=all ]

Milind Bhandarkar resolved HADOOP-714.
--------------------------------------

    Fix Version/s: 0.9.0
       Resolution: Duplicate

http://issues.apache.org/jira/browse/HADOOP-682

> Namenode format does not work when hadoop is installed for first time
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-714
>                 URL: http://issues.apache.org/jira/browse/HADOOP-714
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: Linux CentOS 4
>            Reporter: Lei Chen
>             Fix For: 0.9.0
>
>
> The namenode can not be formatted for the first time installation. There is a bug is the main function of org.apache.hadoop.dfs.NameNode class. The code will skip formatting when the directory for name does not exist. There is a possible fix for the bug
> 			if (argv.length == 1 && argv[0].equals("-format")) {
> 				boolean aborted = false;
> 				File[] dirs = getDirs(conf);
> 				for (int idx = 0; idx < dirs.length; idx++) {
> 					if (dirs[idx].exists()) {
> 						System.err.print("Re-format filesystem in " + dirs[idx]
> 								+ " ? (Y or N) ");
> 						if (!(System.in.read() == 'Y')) {
> 							System.err
> 									.println("Format aborted in " + dirs[idx]);
> 							aborted = true;
> 						} else {
> 							System.out.println("do format"
> 									+ dirs[idx].getAbsolutePath());
> 							format(dirs[idx]);
> 							System.err.println("Formatted " + dirs[idx]);
> 						}
> 						System.in.read(); // discard the enter-key
> 					} else {
> 						System.out.println("do format"
> 								+ dirs[idx].getAbsolutePath());
> 						format(dirs[idx]);
> 						System.err.println("Formatted " + dirs[idx]);
> 					}
> 				}
> 				System.exit(aborted ? 1 : 0);
> 			}

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 18:27:00 2006
Return-Path: 
 <hadoop-dev-return-5103-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92606 invoked from network); 14 Nov 2006 18:27:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 18:27:00 -0000
Received: (qmail 58679 invoked by uid 500); 14 Nov 2006 18:27:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58653 invoked by uid 500); 14 Nov 2006 18:27:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58644 invoked by uid 99); 14 Nov 2006 18:27:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:27:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:26:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0E53A7142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 10:26:39 -0800 (PST)
Message-ID: <13313178.1163528799055.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 10:26:39 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-705) IOException: job.xml already exists
In-Reply-To: <4654952.1163124037194.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-705?page=all ]

Doug Cutting updated HADOOP-705:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Mahadev!

> IOException: job.xml already exists
> -----------------------------------
>
>                 Key: HADOOP-705
>                 URL: http://issues.apache.org/jira/browse/HADOOP-705
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Mahadev konar
>             Fix For: 0.9.0
>
>         Attachments: jobxml.patch
>
>
> I'm seeing this exception in the JobTracker log.  It's caused the same map to fail enough that the job aborted.
> 2006-11-09 17:28:37,594 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0004_m_000588_2: Error 
> initializing task_0004_m_000588_2:
> java.io.IOException: Target /foobar/tmp/mapred/local/taskTracker/jobcache/job_0004/job.xml already exists
>         at org.apache.hadoop.fs.FileUtil.checkDest(FileUtil.java:215)
>         at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:61)
>         at org.apache.hadoop.dfs.DistributedFileSystem.copyToLocalFile(DistributedFileSystem.java:192)
>         at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:279)
>         at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:691)
>         at org.apache.hadoop.mapred.TaskTracker.checkForNewTasks(TaskTracker.java:533)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:448)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 18:39:01 2006
Return-Path: 
 <hadoop-dev-return-5104-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96449 invoked from network); 14 Nov 2006 18:39:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 18:39:01 -0000
Received: (qmail 1737 invoked by uid 500); 14 Nov 2006 18:39:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1715 invoked by uid 500); 14 Nov 2006 18:39:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1706 invoked by uid 99); 14 Nov 2006 18:39:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:39:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:38:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2599A7142F5
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 10:38:39 -0800 (PST)
Message-ID: <30274193.1163529519151.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 10:38:39 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-710) block size isn't honored
In-Reply-To: <25722891.1163199277128.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-710?page=all ]

Doug Cutting updated HADOOP-710:
--------------------------------

    Status: Open  (was: Patch Available)

You should parenthesize that subtraction.  (a - b) -c is not the same as a - (b - c), and we shouldn't require developers to remember which a - b -c is (i.e., I can't).

> block size isn't honored
> ------------------------
>
>                 Key: HADOOP-710
>                 URL: http://issues.apache.org/jira/browse/HADOOP-710
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: small-block.patch
>
>
> When writing a buffer to an FSOutputStream using write(buffer,offset,length), the block size isn't honored when the block size is less than the buffer size.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 18:46:00 2006
Return-Path: 
 <hadoop-dev-return-5105-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98584 invoked from network); 14 Nov 2006 18:46:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 18:46:00 -0000
Received: (qmail 10263 invoked by uid 500); 14 Nov 2006 18:46:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10233 invoked by uid 500); 14 Nov 2006 18:46:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10223 invoked by uid 99); 14 Nov 2006 18:46:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:46:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:45:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E0EF87142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 10:45:38 -0800 (PST)
Message-ID: <7570541.1163529938918.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 10:45:38 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-476) Streaming should check for
 correctness of the task
In-Reply-To: <20801208.1156462750189.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-476?page=comments#action_12449731 ] 
            
Hairong Kuang commented on HADOOP-476:
--------------------------------------

Sanjay, please take at look at APIs in commons-cli 2.

> Streaming should check for correctness of the task
> --------------------------------------------------
>
>                 Key: HADOOP-476
>                 URL: http://issues.apache.org/jira/browse/HADOOP-476
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>         Assigned To: Sanjay Dahiya
>
> Currently, if anythin is wrong with streaming job, it dies without any explanation.
> Before creating and running actual MapReduce job, Streaming should check if:
> -- the executables (or scripts) for -mapper and -reducer are available and have right permissions
> -- the input fragments exist

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 18:50:59 2006
Return-Path: 
 <hadoop-dev-return-5106-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99738 invoked from network); 14 Nov 2006 18:50:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 18:50:59 -0000
Received: (qmail 20034 invoked by uid 500); 14 Nov 2006 18:51:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20016 invoked by uid 500); 14 Nov 2006 18:51:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20007 invoked by uid 99); 14 Nov 2006 18:51:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:51:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:50:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3C1187142F5
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 10:50:38 -0800 (PST)
Message-ID: <3144258.1163530238243.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 10:50:38 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-715) build.xml sets up wrong
 'hadoop.log.dir' property for 'ant test'
In-Reply-To: <30358261.1163475937086.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-715?page=comments#action_12449732 ] 
            
Owen O'Malley commented on HADOOP-715:
--------------------------------------

+1

> build.xml sets up wrong 'hadoop.log.dir' property for 'ant test'
> ----------------------------------------------------------------
>
>                 Key: HADOOP-715
>                 URL: http://issues.apache.org/jira/browse/HADOOP-715
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-715_20061114.patch
>
>
> build.xml - line nos. 329-331
>       <sysproperty key="hadoop.log.dir" value="${hadoop.log.dir}"/>
>       <sysproperty key="test.src.dir" value="${test.src.dir}"/>
>       <sysproperty key="hadoop.log.dir" value="."/> 
> wrongly overrides 'hadoop.log.dir' causing it to be setup incorrectly.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 18:55:48 2006
Return-Path: 
 <hadoop-dev-return-5107-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1050 invoked from network); 14 Nov 2006 18:55:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 18:55:48 -0000
Received: (qmail 31749 invoked by uid 500); 14 Nov 2006 18:55:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31720 invoked by uid 500); 14 Nov 2006 18:55:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31711 invoked by uid 99); 14 Nov 2006 18:55:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:55:58 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.145.48.34] (HELO mail-relay1.yahoo.com) (216.145.48.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:55:45 -0800
Received: from KEPTSHOULDLX (keptshould-lx.corp.yahoo.com [10.72.114.54])
	by mail-relay1.yahoo.com (8.13.8/8.13.6/mr1) with ESMTP id kAEItOfK026011
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 10:55:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
	b=nxIVM7IFiH9nH4f2HrxguyZ1lmDC8Gk8fFh936oVKMkyljo8qPOXqLiT0KNbL4Up
From: "Hairong Kuang" <hairong@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: [jira] Created: (HADOOP-713) dfs list operation is too expensive
Date: Tue, 14 Nov 2006 10:55:24 -0800
Message-ID: <004c01c7081e$714aff50$d09215ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <2eb053f72aad826023a18ee751fdc319@yahoo-inc.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccHiVHwtKkk+hZhRraLMGRjP39nZwAlHKYg
X-Virus-Checked: Checked by ClamAV on apache.org

Setting the size of a directory to be the # of files is a good idea. But the
problem is that dfs name node has no idea of checksum files. So the number
of files include that of checksum files. But what's displayed at the client
side has filtered out the checksum files. So the # of files does not match
what's really displayed at the client side.

Hairong 

-----Original Message-----
From: Arkady Borkovsky [mailto:arkady@yahoo-inc.com] 
Sent: Monday, November 13, 2006 5:07 PM
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Created: (HADOOP-713) dfs list operation is too
expensive

When listing a directory, for directory entries it may be more useful to
display the number of files in a directory, rather than the number of bytes
used by all the files in the directory and its subdirectories.
This a subjective opinion -- comments?

(Currently, the value displayed subdirectory is "0")

On Nov 13, 2006, at 3:25 PM, Hairong Kuang (JIRA) wrote:

> dfs list operation is too expensive
> -----------------------------------
>
>                  Key: HADOOP-713
>                  URL: http://issues.apache.org/jira/browse/HADOOP-713
>              Project: Hadoop
>           Issue Type: Improvement
>           Components: dfs
>     Affects Versions: 0.8.0
>             Reporter: Hairong Kuang
>
>
> A list request to dfs returns an array of DFSFileInfo. A DFSFileInfo 
> of a directory contains a field called contentsLen, indicating its 
> size  which gets computed at the namenode side by resursively going 
> through its subdirs. At the same time, the whole dfs directory tree is 
> locked.
>
> The list operation is used a lot by DFSClient for listing a directory, 
> getting a file's size and # of replicas, and getting the size of dfs.
> Only the last operation needs the field contentsLen to be computed.
>
> To reduce its cost, we can add a flag to the list request. ContentsLen 
> is computed If the flag is set. By default, the flag is false.
>
> --
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the
> administrators: 
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see: 
> http://www.atlassian.com/software/jira
>
>



From MAILER-DAEMON Tue Nov 14 19:12:00 2006
Return-Path: 
 <hadoop-dev-return-5108-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5674 invoked from network); 14 Nov 2006 19:12:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 19:12:00 -0000
Received: (qmail 48831 invoked by uid 500); 14 Nov 2006 19:12:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48608 invoked by uid 500); 14 Nov 2006 19:12:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48595 invoked by uid 99); 14 Nov 2006 19:12:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 11:12:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 11:11:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E49577142F6
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 11:11:38 -0800 (PST)
Message-ID: <31652514.1163531498933.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 11:11:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-613) The final merge on the reduces should
 feed the reduce directly
In-Reply-To: <32865816.1161196175060.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-613?page=all ]

Doug Cutting updated HADOOP-613:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Devaraj!

> The final merge on the reduces should feed the reduce directly
> --------------------------------------------------------------
>
>                 Key: HADOOP-613
>                 URL: http://issues.apache.org/jira/browse/HADOOP-613
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: reduce-get-iterator.patch, reduce-get-iterator.patch, reduce-get-iterator.patch
>
>
> The final merge on the input to the reduce should use the iterators from HADOOP-611 directly rather than using a round trip to disk.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 19:28:02 2006
Return-Path: 
 <hadoop-dev-return-5109-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9948 invoked from network); 14 Nov 2006 19:28:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 19:28:02 -0000
Received: (qmail 75509 invoked by uid 500); 14 Nov 2006 19:28:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75482 invoked by uid 500); 14 Nov 2006 19:28:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75473 invoked by uid 99); 14 Nov 2006 19:28:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 11:28:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 11:28:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7690B7142F6
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 11:27:40 -0800 (PST)
Message-ID: <24369154.1163532460483.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 11:27:40 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-661) JobConf for a job should be viewable
 from the web/ui
In-Reply-To: <20147831.1162333456586.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-661?page=all ]

Doug Cutting updated HADOOP-661:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Arun!

> JobConf for a job should be viewable from the web/ui
> ----------------------------------------------------
>
>                 Key: HADOOP-661
>                 URL: http://issues.apache.org/jira/browse/HADOOP-661
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-661_20061111.patch, HADOOP-661_20061113.patch
>
>
> It would be very useful to be able to see the JobConf for a job from the web/ui. I would add a link from the job detail page to an xml dump of the JobConf which uses a variant of the configuration.xsl, which I would add to the webapps/static directory, to display it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 19:37:00 2006
Return-Path: 
 <hadoop-dev-return-5110-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13365 invoked from network); 14 Nov 2006 19:37:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 19:37:00 -0000
Received: (qmail 95675 invoked by uid 500); 14 Nov 2006 19:37:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95648 invoked by uid 500); 14 Nov 2006 19:37:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95639 invoked by uid 99); 14 Nov 2006 19:37:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 11:37:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 11:36:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 241C07142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 11:36:39 -0800 (PST)
Message-ID: <7271184.1163532999136.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 11:36:39 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-661) JobConf for a job should be viewable
 from the web/ui
In-Reply-To: <20147831.1162333456586.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-661?page=comments#action_12449743 ] 
            
Owen O'Malley commented on HADOOP-661:
--------------------------------------

Actually, I would have been happier if the .xsl file was found as a file rather than using http.

> JobConf for a job should be viewable from the web/ui
> ----------------------------------------------------
>
>                 Key: HADOOP-661
>                 URL: http://issues.apache.org/jira/browse/HADOOP-661
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-661_20061111.patch, HADOOP-661_20061113.patch
>
>
> It would be very useful to be able to see the JobConf for a job from the web/ui. I would add a link from the job detail page to an xml dump of the JobConf which uses a variant of the configuration.xsl, which I would add to the webapps/static directory, to display it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 19:54:02 2006
Return-Path: 
 <hadoop-dev-return-5111-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20707 invoked from network); 14 Nov 2006 19:54:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 19:54:02 -0000
Received: (qmail 27182 invoked by uid 500); 14 Nov 2006 19:54:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27153 invoked by uid 500); 14 Nov 2006 19:54:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27144 invoked by uid 99); 14 Nov 2006 19:54:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 11:54:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 11:54:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3B10E7142F5
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 11:53:41 -0800 (PST)
Message-ID: <15098153.1163534021239.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 11:53:41 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-710) block size isn't honored
In-Reply-To: <25722891.1163199277128.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-710?page=all ]

Milind Bhandarkar updated HADOOP-710:
-------------------------------------

    Attachment:     (was: small-block.patch)

> block size isn't honored
> ------------------------
>
>                 Key: HADOOP-710
>                 URL: http://issues.apache.org/jira/browse/HADOOP-710
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: small-block.patch
>
>
> When writing a buffer to an FSOutputStream using write(buffer,offset,length), the block size isn't honored when the block size is less than the buffer size.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 19:54:04 2006
Return-Path: 
 <hadoop-dev-return-5112-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20755 invoked from network); 14 Nov 2006 19:54:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 19:54:04 -0000
Received: (qmail 27433 invoked by uid 500); 14 Nov 2006 19:54:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27405 invoked by uid 500); 14 Nov 2006 19:54:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27395 invoked by uid 99); 14 Nov 2006 19:54:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 11:54:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 11:54:03 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 339F77142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 11:53:43 -0800 (PST)
Message-ID: <14919257.1163534023209.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 11:53:43 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-710) block size isn't honored
In-Reply-To: <25722891.1163199277128.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-710?page=all ]

Milind Bhandarkar updated HADOOP-710:
-------------------------------------

    Attachment: small-block.patch

Updated patch attached.

> block size isn't honored
> ------------------------
>
>                 Key: HADOOP-710
>                 URL: http://issues.apache.org/jira/browse/HADOOP-710
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: small-block.patch
>
>
> When writing a buffer to an FSOutputStream using write(buffer,offset,length), the block size isn't honored when the block size is less than the buffer size.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 19:56:00 2006
Return-Path: 
 <hadoop-dev-return-5113-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21392 invoked from network); 14 Nov 2006 19:56:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 19:56:00 -0000
Received: (qmail 28964 invoked by uid 500); 14 Nov 2006 19:56:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28933 invoked by uid 500); 14 Nov 2006 19:56:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28924 invoked by uid 99); 14 Nov 2006 19:56:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 11:56:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 11:55:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F396B7142F5
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 11:55:38 -0800 (PST)
Message-ID: <298135.1163534138995.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 11:55:38 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-710) block size isn't honored
In-Reply-To: <25722891.1163199277128.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-710?page=all ]

Milind Bhandarkar updated HADOOP-710:
-------------------------------------

    Status: Patch Available  (was: Open)

Patch available.

> block size isn't honored
> ------------------------
>
>                 Key: HADOOP-710
>                 URL: http://issues.apache.org/jira/browse/HADOOP-710
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: small-block.patch
>
>
> When writing a buffer to an FSOutputStream using write(buffer,offset,length), the block size isn't honored when the block size is less than the buffer size.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 20:05:08 2006
Return-Path: 
 <hadoop-dev-return-5114-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24439 invoked from network); 14 Nov 2006 20:05:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 20:05:08 -0000
Received: (qmail 49959 invoked by uid 500); 14 Nov 2006 20:05:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49931 invoked by uid 500); 14 Nov 2006 20:05:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49922 invoked by uid 99); 14 Nov 2006 20:05:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 12:05:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 12:05:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AA71E71430D
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 12:04:41 -0800 (PST)
Message-ID: <33188393.1163534681695.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 12:04:41 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-692?page=comments#action_12449759 ] 
            
Hairong Kuang commented on HADOOP-692:
--------------------------------------

1. Network topology construction
    Sould we consider a mobile network with laptops running datanode moving around? Otherwise, once a datanode gets started, the possiblity of the node moves to a different location is slim. I would simply update network toplogy when a datanode registers or exits.

The # of hops between hubs can be specified in a configuration file which read by the namenode at startup time.

2. Network toplogy interface
   Doug, I like the interface that you described. But it looks like it can not express the case when nodes are connected by a switch where the distance between two nodes is 1. It also need to a method to expose all nodes that belong to a hub.

2. block placement strategy
Allocating all blocks of a file to the same 3 racks limits the aggaregate read bandwith. I do not see much of its benefit.

I am thinking to allow users to specify replica placement policy at runtime when it sets the replication factor of a file. It can use any predefined placement policy or set a user-defined placement policy.

Users may specify its replica placement policy using a declarative language. Something like:

replica 1: same node
replica 2: same rack
replica 3: different rack
others: random

Any comment?

> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 20:07:05 2006
Return-Path: 
 <hadoop-dev-return-5115-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25050 invoked from network); 14 Nov 2006 20:07:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 20:07:05 -0000
Received: (qmail 55501 invoked by uid 500); 14 Nov 2006 20:07:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55469 invoked by uid 500); 14 Nov 2006 20:07:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55460 invoked by uid 99); 14 Nov 2006 20:07:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 12:07:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 12:07:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C60D47142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 12:06:41 -0800 (PST)
Message-ID: <16843083.1163534801808.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 12:06:41 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-489) Seperating user logs from system logs
 in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-489?page=all ]

Doug Cutting updated HADOOP-489:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Arun!

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-489_20061019.patch, HADOOP-489_20061101.patch, HADOOP-489_20061102.patch, HADOOP-489_20061107.patch, HADOOP-489_20061109.patch, HADOOP-489_20061111.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 20:20:59 2006
Return-Path: 
 <hadoop-dev-return-5116-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36950 invoked from network); 14 Nov 2006 20:20:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 20:20:59 -0000
Received: (qmail 89268 invoked by uid 500); 14 Nov 2006 20:21:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89249 invoked by uid 500); 14 Nov 2006 20:21:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89240 invoked by uid 99); 14 Nov 2006 20:21:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 12:21:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 12:20:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 671117142F5
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 12:20:38 -0800 (PST)
Message-ID: <14165067.1163535638419.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 12:20:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-692?page=comments#action_12449767 ] 
            
Doug Cutting commented on HADOOP-692:
-------------------------------------

> Should we consider a mobile network [ .. . ]

I think it's easy to construct interfaces that permit this, but I don't think we should attempt to support this in at least the initial implementation.

> it can not express the case when nodes are connected by a switch

How so?  It should be easy to implement this so that nodes connected by a switch are always closer to one another than to any other nodes, no?

> Users may specify its replica placement policy

I see that as a subsequent feature.  I think in the first version simply placing things at progressive distances until the replications are all placed will satisfy the majority of applications.


> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 20:21:01 2006
Return-Path: 
 <hadoop-dev-return-5117-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36991 invoked from network); 14 Nov 2006 20:21:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 20:21:01 -0000
Received: (qmail 89540 invoked by uid 500); 14 Nov 2006 20:21:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89502 invoked by uid 500); 14 Nov 2006 20:21:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89493 invoked by uid 99); 14 Nov 2006 20:21:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 12:21:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 12:20:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C0D227142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 12:20:39 -0800 (PST)
Message-ID: <18371836.1163535639787.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 12:20:39 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-712) Record-IO XML serialization is broken
 for control characters
In-Reply-To: <4130113.1163448817329.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-712?page=all ]

Doug Cutting updated HADOOP-712:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Milind!

> Record-IO XML serialization is broken for control characters
> ------------------------------------------------------------
>
>                 Key: HADOOP-712
>                 URL: http://issues.apache.org/jira/browse/HADOOP-712
>             Project: Hadoop
>          Issue Type: Bug
>          Components: record
>    Affects Versions: 0.8.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: record-bug.patch
>
>
> Record I/O does not serialize control characters in XML. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 20:33:01 2006
Return-Path: 
 <hadoop-dev-return-5118-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41053 invoked from network); 14 Nov 2006 20:33:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 20:33:01 -0000
Received: (qmail 14389 invoked by uid 500); 14 Nov 2006 20:33:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14357 invoked by uid 500); 14 Nov 2006 20:33:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14348 invoked by uid 99); 14 Nov 2006 20:33:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 12:33:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 12:33:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1FD8C7142F6
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 12:32:39 -0800 (PST)
Message-ID: <31701699.1163536359127.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 12:32:39 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-668) improvement to DFS browsing WI
In-Reply-To: <4412988.1162407196575.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-668?page=all ]

Doug Cutting updated HADOOP-668:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Hairong!

> improvement to DFS browsing WI
> ------------------------------
>
>                 Key: HADOOP-668
>                 URL: http://issues.apache.org/jira/browse/HADOOP-668
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Yoram Arnon
>         Assigned To: Hairong Kuang
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: WebUI.patch
>
>
> improvement to DFS browsing WI:
> 1.  Increase the default "Chunk Size to view" to 32K bytes.  Currently 
> in most cases, I always need to add another digit to the size and get 
> the page redisplayed.
> 2. Add date to the display.  This may an "approximate" date -- e.g. the 
> date of any block of the file.
> 3. Remove the directory name from the file name in the file list
> 4. Let the links in the file list point to the file names, not to the 
> file data.  That is, if the files in the directory that is displayed in 
> the window have changed, clicking on the file name will still get the 
> user to the file, rather than saying "bad link" (or smth. like that).  
> If you still prefer to link to the file data (there is certain merit to 
> this), at least make the link to the removed file say
> "sorry, this file has been deleted, here is the link to the current 
> version"  or
> "sorry, this file has been deleted"
> 5. replication factor and size for directories is currently meaningless.
> use these fields for something meaningful, like total size of directory,
> number of files, creation date etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 21:02:04 2006
Return-Path: 
 <hadoop-dev-return-5119-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48123 invoked from network); 14 Nov 2006 21:02:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 21:02:04 -0000
Received: (qmail 60403 invoked by uid 500); 14 Nov 2006 21:02:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60349 invoked by uid 500); 14 Nov 2006 21:02:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59797 invoked by uid 99); 14 Nov 2006 21:02:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 13:02:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 13:01:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 298AD71430D
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 13:01:37 -0800 (PST)
Message-ID: <3384986.1163538097167.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 13:01:37 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-719) Integration of Hadoop with batch
 schedulers
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Integration of Hadoop with batch schedulers
-------------------------------------------

                 Key: HADOOP-719
                 URL: http://issues.apache.org/jira/browse/HADOOP-719
             Project: Hadoop
          Issue Type: New Feature
          Components: contrib/streaming
            Reporter: Mahadev konar
         Assigned To: Mahadev konar


Hadoop On Demand (HOD) is an integration of Hadoop with batch schedulers like Condor/torque/sun grid etc. Hadoop On Demand or HOD hereafter is a system that populates a Hadoop instance using a shared batch scheduler. HOD will find a requested number of nodes and start up Hadoop daemons on them. Users map reduce jobs can then run on the hadoop instance. After the job is done, HOD gives back the  nodes to the shared batch scheduler. A group of users will use HOD to acquire Hadoop instances of varying sizes and the batch scheduler will schedule requests in a way that important jobs gain more importance/resources and finish fast. Here are a list of requirements for HOD and batch schedulers:

Key Requirements :

--- Should allocate the specified minimum number of nodes for a job 
   Many batch jobs can finish in time, only when enough resources are allocated. Therefore batch scheduler should allocate the asked number of nodes for a given job when the job starts. This is simple form of what's known as gang    scheduling.

  Often the minimum nodes are not available right away, especially if the job asked for a large number. The batch scheduler should support advance reservation for important jobs so that the wait time can be determined. In advance   reservation, a reservation is created on earliest future point when the preoccupied nodes become available. When nodes are currently idle but booked by future reservations, batch scheduler is ok to give them to other jobs to increase system utilization, but only when doing so does not delay existing reservations.

--- run short urgent job without costing too much loss to long job. Especially, should not kill job tracker of long job. 
  Some jobs, mostly short ones, are time sensitive and need urgent treatment. Often, large portion of cluster nodes will be occupied by long running jobs. Batch scheduler should be able to preempt long jobs and run urgent jobs. Then, urgent jobs will finish quickly and long jobs can re-gain the nodes afterward. 

When preemption happens, HOD should minimize the loss to long jobs. Especially, it should not kill job tracker of long job.

--- be able to dial up, at run time, share of resources for more important projects.
  Viewed at high level, a given cluster is shared by multiple projects. A project consists of a number of jobs submitted by a group of users.Batch scheduler should allow important projects to have more resources. This should be tunable at run time as what projects deem more important may change over time. 

--- prevent malicious abuse of the system. 
  A shared cluster environment can be put in jeopardy if malicious or erroneous job code does: 
 -- hold unneeded resources for a long period 
 -- use privileges for unworthy work 
  Such abuse can easily cause under-utilization or starvation of other jobs. Batch scheduler should allow  setting up policies for preventing resource abuse by: 
 -- limit privileges to legitimate uses asking for proper amount 
 -- throttle peak use of resources per player 
 -- monitor and reduce starvation 

--- The behavior should be simple and predictable 
   When status of the system is queried, we should be able to determine what factors caused it to reach current status and what could be the future behavior with or without our tuning on the system. 

--- be portable to major resource managers 
   HOD design should be portable so that in future we are able to plugin other resource manager. 

Some of the key requirements are implemented by the batch schedulers. The others need to be implemented by HOD.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 21:09:04 2006
Return-Path: 
 <hadoop-dev-return-5120-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51718 invoked from network); 14 Nov 2006 21:09:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 21:09:04 -0000
Received: (qmail 73029 invoked by uid 500); 14 Nov 2006 21:09:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73001 invoked by uid 500); 14 Nov 2006 21:09:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72942 invoked by uid 99); 14 Nov 2006 21:09:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 13:09:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 13:09:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D9DB6714312
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 13:08:39 -0800 (PST)
Message-ID: <17425023.1163538519889.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 13:08:39 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-689) hadoop should provide a common way to
 wrap instances with different types into one type
In-Reply-To: <2487900.1162955810892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-689?page=all ]

Doug Cutting updated HADOOP-689:
--------------------------------

    Status: Open  (was: Patch Available)

Please submit a new patch containing all the changes.  Thanks!

> hadoop should provide a common way to wrap instances with different types into one type
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-689
>                 URL: http://issues.apache.org/jira/browse/HADOOP-689
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>         Environment: All environment
>            Reporter: Feng Jiang
>         Attachments: HADOOP-689.patch
>
>
> When two sequence files, which have same Key type but different Value types, are mapped out to reduce, multiple Value types is not allowed. In this case, we need a way to wrap instances with different types into one class type to reduce.
> In current code, ObjectWritable is a sole choice. but it costs too many space, because the class declaration will be appended into output file as a string for every Key-value pair.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 21:37:12 2006
Return-Path: 
 <hadoop-dev-return-5121-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60836 invoked from network); 14 Nov 2006 21:37:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 21:37:12 -0000
Received: (qmail 39738 invoked by uid 500); 14 Nov 2006 21:37:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39714 invoked by uid 500); 14 Nov 2006 21:37:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39688 invoked by uid 99); 14 Nov 2006 21:37:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 13:37:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 13:37:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8FDAC714315
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 13:36:41 -0800 (PST)
Message-ID: <22935797.1163540201586.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 13:36:41 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-716) Javadoc warning in SequenceFile.java
In-Reply-To: <17806272.1163485837263.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-716?page=all ]

Doug Cutting updated HADOOP-716:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Devaraj!

> Javadoc warning in SequenceFile.java
> ------------------------------------
>
>                 Key: HADOOP-716
>                 URL: http://issues.apache.org/jira/browse/HADOOP-716
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: javadoc.patch
>
>
> Javadoc gives warning for a particular line in SequenceFile.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 21:55:00 2006
Return-Path: 
 <hadoop-dev-return-5122-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72012 invoked from network); 14 Nov 2006 21:55:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 21:55:00 -0000
Received: (qmail 84096 invoked by uid 500); 14 Nov 2006 21:55:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84077 invoked by uid 500); 14 Nov 2006 21:55:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84068 invoked by uid 99); 14 Nov 2006 21:55:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 13:55:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 13:54:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6F9DD7142FE
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 13:54:38 -0800 (PST)
Message-ID: <16808589.1163541278454.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 13:54:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-715) build.xml sets up wrong
 'hadoop.log.dir' property for 'ant test'
In-Reply-To: <30358261.1163475937086.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-715?page=all ]

Doug Cutting updated HADOOP-715:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Arun!

> build.xml sets up wrong 'hadoop.log.dir' property for 'ant test'
> ----------------------------------------------------------------
>
>                 Key: HADOOP-715
>                 URL: http://issues.apache.org/jira/browse/HADOOP-715
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-715_20061114.patch
>
>
> build.xml - line nos. 329-331
>       <sysproperty key="hadoop.log.dir" value="${hadoop.log.dir}"/>
>       <sysproperty key="test.src.dir" value="${test.src.dir}"/>
>       <sysproperty key="hadoop.log.dir" value="."/> 
> wrongly overrides 'hadoop.log.dir' causing it to be setup incorrectly.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 22:14:02 2006
Return-Path: 
 <hadoop-dev-return-5123-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79388 invoked from network); 14 Nov 2006 22:14:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 22:14:02 -0000
Received: (qmail 36332 invoked by uid 500); 14 Nov 2006 22:14:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36307 invoked by uid 500); 14 Nov 2006 22:14:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36298 invoked by uid 99); 14 Nov 2006 22:14:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 14:14:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 14:14:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 62F907142F5
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 14:13:40 -0800 (PST)
Message-ID: <17164354.1163542420402.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 14:13:40 -0800 (PST)
From: "Tom White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-574?page=all ]

Tom White updated HADOOP-574:
-----------------------------

               Status: Patch Available  (was: Open)
    Affects Version/s: 0.9.0

Please find attached a patch for an S3 filesystem for review and discussion. It is not yet complete so I am not expecting it to be committed.
There are a number of TODO comments in the code that list the remaining work items. These mainly concern corner cases or tidying up work - all the basic file system operations work.

The code has been exercised by unit tests. To get these to run you need to fill in S3 access codes in the test hadoop-site.xml. (This raises an interesting question of how to have these run as automated tests.)

I have not tried running Hadoop (or something like DfsShell) with this filesystem. We probably need to wait until HADOOP-571 is done.

Looking forward to your feedback!

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 22:16:01 2006
Return-Path: 
 <hadoop-dev-return-5124-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79623 invoked from network); 14 Nov 2006 22:16:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 22:16:01 -0000
Received: (qmail 37522 invoked by uid 500); 14 Nov 2006 22:16:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37498 invoked by uid 500); 14 Nov 2006 22:16:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37489 invoked by uid 99); 14 Nov 2006 22:16:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 14:16:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 14:16:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 50BB47142CD
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 14:15:40 -0800 (PST)
Message-ID: <530986.1163542540328.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 14:15:40 -0800 (PST)
From: "Tom White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-574?page=all ]

Tom White updated HADOOP-574:
-----------------------------

    Attachment: HADOOP-574.patch

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>         Attachments: HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 22:18:03 2006
Return-Path: 
 <hadoop-dev-return-5125-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80381 invoked from network); 14 Nov 2006 22:18:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 22:18:03 -0000
Received: (qmail 40818 invoked by uid 500); 14 Nov 2006 22:18:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40780 invoked by uid 500); 14 Nov 2006 22:18:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40771 invoked by uid 99); 14 Nov 2006 22:18:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 14:18:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 14:18:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BCCDB7142FE
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 14:17:41 -0800 (PST)
Message-ID: <12835074.1163542661771.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 14:17:41 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-719) Integration of Hadoop with batch
 schedulers
In-Reply-To: <3384986.1163538097167.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-719?page=comments#action_12449827 ] 
            
Mahadev konar commented on HADOOP-719:
--------------------------------------

-- another key requirement for HOD is distribution of hadoop jars onto the cluster. Most of the batch schedulers are not effective in transferring of files. HOD would require a service for transferring of hadoop jars. 

> Integration of Hadoop with batch schedulers
> -------------------------------------------
>
>                 Key: HADOOP-719
>                 URL: http://issues.apache.org/jira/browse/HADOOP-719
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: contrib/streaming
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>
> Hadoop On Demand (HOD) is an integration of Hadoop with batch schedulers like Condor/torque/sun grid etc. Hadoop On Demand or HOD hereafter is a system that populates a Hadoop instance using a shared batch scheduler. HOD will find a requested number of nodes and start up Hadoop daemons on them. Users map reduce jobs can then run on the hadoop instance. After the job is done, HOD gives back the  nodes to the shared batch scheduler. A group of users will use HOD to acquire Hadoop instances of varying sizes and the batch scheduler will schedule requests in a way that important jobs gain more importance/resources and finish fast. Here are a list of requirements for HOD and batch schedulers:
> Key Requirements :
> --- Should allocate the specified minimum number of nodes for a job 
>    Many batch jobs can finish in time, only when enough resources are allocated. Therefore batch scheduler should allocate the asked number of nodes for a given job when the job starts. This is simple form of what's known as gang    scheduling.
>   Often the minimum nodes are not available right away, especially if the job asked for a large number. The batch scheduler should support advance reservation for important jobs so that the wait time can be determined. In advance   reservation, a reservation is created on earliest future point when the preoccupied nodes become available. When nodes are currently idle but booked by future reservations, batch scheduler is ok to give them to other jobs to increase system utilization, but only when doing so does not delay existing reservations.
> --- run short urgent job without costing too much loss to long job. Especially, should not kill job tracker of long job. 
>   Some jobs, mostly short ones, are time sensitive and need urgent treatment. Often, large portion of cluster nodes will be occupied by long running jobs. Batch scheduler should be able to preempt long jobs and run urgent jobs. Then, urgent jobs will finish quickly and long jobs can re-gain the nodes afterward. 
> When preemption happens, HOD should minimize the loss to long jobs. Especially, it should not kill job tracker of long job.
> --- be able to dial up, at run time, share of resources for more important projects.
>   Viewed at high level, a given cluster is shared by multiple projects. A project consists of a number of jobs submitted by a group of users.Batch scheduler should allow important projects to have more resources. This should be tunable at run time as what projects deem more important may change over time. 
> --- prevent malicious abuse of the system. 
>   A shared cluster environment can be put in jeopardy if malicious or erroneous job code does: 
>  -- hold unneeded resources for a long period 
>  -- use privileges for unworthy work 
>   Such abuse can easily cause under-utilization or starvation of other jobs. Batch scheduler should allow  setting up policies for preventing resource abuse by: 
>  -- limit privileges to legitimate uses asking for proper amount 
>  -- throttle peak use of resources per player 
>  -- monitor and reduce starvation 
> --- The behavior should be simple and predictable 
>    When status of the system is queried, we should be able to determine what factors caused it to reach current status and what could be the future behavior with or without our tuning on the system. 
> --- be portable to major resource managers 
>    HOD design should be portable so that in future we are able to plugin other resource manager. 
> Some of the key requirements are implemented by the batch schedulers. The others need to be implemented by HOD.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 22:28:02 2006
Return-Path: 
 <hadoop-dev-return-5126-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83422 invoked from network); 14 Nov 2006 22:28:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 22:28:02 -0000
Received: (qmail 58052 invoked by uid 500); 14 Nov 2006 22:28:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58029 invoked by uid 500); 14 Nov 2006 22:28:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58020 invoked by uid 99); 14 Nov 2006 22:28:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 14:28:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 14:28:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 81B4B7142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 14:27:40 -0800 (PST)
Message-ID: <19274383.1163543260528.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 14:27:40 -0800 (PST)
From: "Tom White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-574?page=comments#action_12449831 ] 
            
Tom White commented on HADOOP-574:
----------------------------------

I forgot to mention that the code relies on the (Apache licensed) jets3t S3 toolkit (https://jets3t.dev.java.net/), which in turn requires commons-codec-1.3.jar and commons-httpclient-3.0.1.jar. (I wasn't sure whether I should attach these dependencies or not.)

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>         Attachments: HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 22:37:02 2006
Return-Path: 
 <hadoop-dev-return-5127-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85564 invoked from network); 14 Nov 2006 22:37:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 22:37:02 -0000
Received: (qmail 70674 invoked by uid 500); 14 Nov 2006 22:37:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70650 invoked by uid 500); 14 Nov 2006 22:37:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70641 invoked by uid 99); 14 Nov 2006 22:37:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 14:37:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 14:37:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6E3F97142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 14:36:40 -0800 (PST)
Message-ID: <13020778.1163543800449.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 14:36:40 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Doug Cutting updated HADOOP-538:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Arun, this was a big one!

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_20061107.tgz, HADOOP-538_20061108.tgz, HADOOP-538_20061114.patch, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 22:53:17 2006
Return-Path: 
 <hadoop-dev-return-5128-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92564 invoked from network); 14 Nov 2006 22:53:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 22:53:17 -0000
Received: (qmail 96684 invoked by uid 500); 14 Nov 2006 22:53:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96655 invoked by uid 500); 14 Nov 2006 22:53:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96629 invoked by uid 99); 14 Nov 2006 22:53:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 14:53:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 14:52:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 19AB07142F5
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 14:52:37 -0800 (PST)
Message-ID: <18904498.1163544757102.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 14:52:37 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Write a white paper on Hadoop File System Architecture, Design and Features
---------------------------------------------------------------------------

                 Key: HADOOP-720
                 URL: http://issues.apache.org/jira/browse/HADOOP-720
             Project: Hadoop
          Issue Type: Improvement
          Components: documentation
            Reporter: dhruba borthakur
         Assigned To: dhruba borthakur


Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 23:08:59 2006
Return-Path: 
 <hadoop-dev-return-5129-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98236 invoked from network); 14 Nov 2006 23:08:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 23:08:59 -0000
Received: (qmail 24787 invoked by uid 500); 14 Nov 2006 23:09:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24564 invoked by uid 500); 14 Nov 2006 23:09:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24555 invoked by uid 99); 14 Nov 2006 23:09:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 15:09:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 15:08:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 647FD7142F5
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 15:08:38 -0800 (PST)
Message-ID: <26540774.1163545718409.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 15:08:38 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-720?page=all ]

dhruba borthakur updated HADOOP-720:
------------------------------------

    Attachment: HadoopArchitecture.html

Here is a first draft of the Design and Feature paper on hadoop file system. Really appreciate your feedback. I would also like to know if I missed any important architectural issues.

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture.html
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 23:24:59 2006
Return-Path: 
 <hadoop-dev-return-5130-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1617 invoked from network); 14 Nov 2006 23:24:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 23:24:59 -0000
Received: (qmail 49714 invoked by uid 500); 14 Nov 2006 23:25:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49691 invoked by uid 500); 14 Nov 2006 23:25:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49682 invoked by uid 99); 14 Nov 2006 23:25:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 15:25:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 15:24:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4A7537142F5
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 15:24:38 -0800 (PST)
Message-ID: <13098937.1163546678302.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 15:24:38 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-719) Integration of Hadoop with batch
 schedulers
In-Reply-To: <3384986.1163538097167.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-719?page=comments#action_12449858 ] 
            
Mahadev konar commented on HADOOP-719:
--------------------------------------

The three components of HOD are :
bin/hod : This is the part of HOD that talks to the underlying scheduler/resource manager (condor, torque etc.) and asks for machines. This is the main component of HOD which allocates specified number of nodes and then monitors the HOD instance for any updates/ failuers. A HOD instance is a map reduce instance of Hadoop.
bin/hod-tt : This is the script taht is run on the node which invokes a tasktracker instance.
bin/hod-jt: This is the scipt that invokes the jobtracker instance on a given node.

The basic idea being:
--- The user invokes bin/hod with all the required arguments (including the job.jar and hadoop jars) 
--- bin/hod gets the required number of nodes from the underlying resource managers
     --- invokes bin/hod-jt on the machine that will be running the jobtracker
     --- invokes bin/hod-tt on the machine that will be running task trackers

Here is a design document for HOD. 
----- Design Document for bin/hod
The two key design points for bin/hod are :

 1. Abstract Factory that allows batch scheduler specific behaviours behind common API  
 2. event message loop that abstracts post-startup interaction between hadoop and batch scheduler. handles grow/shrink, termination, etc.

The command line parameters for bin/hod are:

  -jar <map-reduce JAR>

  -resource-manager torque, condor, ...

  -min-node <n>
   the minimum number of nodes required for this map reduce instance

  -max-node <m>
   the maximum number of nodes required for this map reduce instance 

  -qos <qos-level>

  -account <project-account-name>

  -wall-time <t>
  -S or -to-scheduler k=v,k1=v1,... 
  -H or -to-hadoop k=v,... 
  -J or -to-jobclient k=v,... 
  and system-related ones like workdir, namenode addr, resource manager package dir, hadoop dir or tarball, etc



The Classes that bin/hod will contain are the following:

ClusterConfig--
  This is an abstract factory for all the cluster configs.
  
  Can be instantiated to --    
  TorqueClusterConfig()

  CondorClusterConfig()
  ... etc   
  These classes have information on what the cluster specific commands/configurations are-
  like 
  submit() method would map to condor_submit in case of Condor and qsub in case of torque
              

ClusterHead--
   This abstract class maps to the JobTracker class.  A proxy for the Jobtracker.
   
ClusterBody--

   This abstract class maps to the tasktrackers /worker nodes

The above two classes can have batch scheduler specific ClusterHead/Body  as there subclasses.


There are two different classes for TaskTrackers/JobTracker since the reactions to events caused at at the JobTracker/Tasktrackers is different. 


ClusterMonitor--
This class monitors  the map reduce instance including JobTracker/Tasktrackers/jobclient, polls them for events and handles all those events. This will also
be extended to batch scheduler specific cluster monitor and would implement common functionality (like querying the jobtracker/tasktrackers)



JobConfig--

This class handles the basic arguments of map/reduce jobs. The input dir/output dir and number of maps/reduces. Later we could use  the input dir information to ask for nodes that are local/rack local to the input files for map.


The pseudo code for bin/hod would look like--

main()
   Config cfg = new Config(args) // this is main command line parser
   JobConfig jc = new JobConfig(cfg) // uses the following args -- input dir, output dir, number of maps, number of reduces

   // The cluster config takes a jobconfig argument to create scheduler config that can specify what kind of nodes it wants (nodes local to some rack ?)
   ClusterConfig cc = ClusterConfig.createInstance(cfg, jc) // uses any scheduler specific arguments from cfg

   // The cluster head is the jobtracker is always launched first
   ClusterHead ch = ClusterHead.createInstance(cfg, cc) // gets the hadoop specific args from cfg

   // The clusterBody takes cluster head as the input parameter 
   ClusterBody cb = ClusterBody.createInstance(cfg, ch, cc) 

   JobClient jobclient = new JobClient(jobconf) 
   jobclient.submitJob(ch)
   ClusterMonitor cm = new ClusterMonitor(ch, cb, jobclient)
   
   while(e = cm.newEvent()){ // the events might be of the type-- jobtracker failed, tasktracker failed, only a few reduces are left with most of nodes lying 

idle, etc...
     cm.process(e)
   }


   
Comments?


> Integration of Hadoop with batch schedulers
> -------------------------------------------
>
>                 Key: HADOOP-719
>                 URL: http://issues.apache.org/jira/browse/HADOOP-719
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: contrib/streaming
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>
> Hadoop On Demand (HOD) is an integration of Hadoop with batch schedulers like Condor/torque/sun grid etc. Hadoop On Demand or HOD hereafter is a system that populates a Hadoop instance using a shared batch scheduler. HOD will find a requested number of nodes and start up Hadoop daemons on them. Users map reduce jobs can then run on the hadoop instance. After the job is done, HOD gives back the  nodes to the shared batch scheduler. A group of users will use HOD to acquire Hadoop instances of varying sizes and the batch scheduler will schedule requests in a way that important jobs gain more importance/resources and finish fast. Here are a list of requirements for HOD and batch schedulers:
> Key Requirements :
> --- Should allocate the specified minimum number of nodes for a job 
>    Many batch jobs can finish in time, only when enough resources are allocated. Therefore batch scheduler should allocate the asked number of nodes for a given job when the job starts. This is simple form of what's known as gang    scheduling.
>   Often the minimum nodes are not available right away, especially if the job asked for a large number. The batch scheduler should support advance reservation for important jobs so that the wait time can be determined. In advance   reservation, a reservation is created on earliest future point when the preoccupied nodes become available. When nodes are currently idle but booked by future reservations, batch scheduler is ok to give them to other jobs to increase system utilization, but only when doing so does not delay existing reservations.
> --- run short urgent job without costing too much loss to long job. Especially, should not kill job tracker of long job. 
>   Some jobs, mostly short ones, are time sensitive and need urgent treatment. Often, large portion of cluster nodes will be occupied by long running jobs. Batch scheduler should be able to preempt long jobs and run urgent jobs. Then, urgent jobs will finish quickly and long jobs can re-gain the nodes afterward. 
> When preemption happens, HOD should minimize the loss to long jobs. Especially, it should not kill job tracker of long job.
> --- be able to dial up, at run time, share of resources for more important projects.
>   Viewed at high level, a given cluster is shared by multiple projects. A project consists of a number of jobs submitted by a group of users.Batch scheduler should allow important projects to have more resources. This should be tunable at run time as what projects deem more important may change over time. 
> --- prevent malicious abuse of the system. 
>   A shared cluster environment can be put in jeopardy if malicious or erroneous job code does: 
>  -- hold unneeded resources for a long period 
>  -- use privileges for unworthy work 
>   Such abuse can easily cause under-utilization or starvation of other jobs. Batch scheduler should allow  setting up policies for preventing resource abuse by: 
>  -- limit privileges to legitimate uses asking for proper amount 
>  -- throttle peak use of resources per player 
>  -- monitor and reduce starvation 
> --- The behavior should be simple and predictable 
>    When status of the system is queried, we should be able to determine what factors caused it to reach current status and what could be the future behavior with or without our tuning on the system. 
> --- be portable to major resource managers 
>    HOD design should be portable so that in future we are able to plugin other resource manager. 
> Some of the key requirements are implemented by the batch schedulers. The others need to be implemented by HOD.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 14 23:49:59 2006
Return-Path: 
 <hadoop-dev-return-5131-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7958 invoked from network); 14 Nov 2006 23:49:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 23:49:59 -0000
Received: (qmail 87832 invoked by uid 500); 14 Nov 2006 23:50:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87601 invoked by uid 500); 14 Nov 2006 23:50:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87590 invoked by uid 99); 14 Nov 2006 23:50:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 15:50:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 15:49:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3CAF77142F6
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 15:49:38 -0800 (PST)
Message-ID: <9230654.1163548178246.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 15:49:38 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-692?page=comments#action_12449865 ] 
            
Sameer Paranjpye commented on HADOOP-692:
-----------------------------------------

>  Sould we consider a mobile network ...

No, that is not the concern. The concern is that in a large enough installation (1000s of nodes) there are going to be a several instances a week of  nodes going down and getting repaired. When the nodes return they may not be in the same racks or on the same switches. This probably does not happen by design, but mistakes are always possible.

> I would simply update network toplogy when a datanode registers or exits.

Certainly, that seems like the right approach. The question is how the topology is updated.
 
Is it by updating a central configuration file and having the namenode read it? This implies potentially updating configuration every time anything changes in a datacenter.

Is it by running timing experiments every time a datanode registers? This can be biased by transient network conditions.

Neither of the above seem like a productive use of admin or namenode time.

Instead of a network topology interface, why not have a network location interface on the Datanode.

public interface NetworkLocation {
  String[] getLocation();
}

This returns an array of hubs that characterize a nodes location on the network. This is probably an array of string of the form, <key>=<value>. So a possible output could be:

rack=r1, switch=s2, datacenter=d3, ... 

as many levels as are desirable. Also, network distances between nodes aren't the only things that are interesting. I think it's useful to distinguish between a rack and a switch because a rack is commonly a physical power domain.

Given this output from each Datanode we can then have a concrete implementation of NetworkTopology that simply tracks the membership of each hub. Finding the distance between two nodes is done by comparing their arrays of hubs and stopping where they differ.

> Allocating all blocks of a file to the same 3 racks limits the aggaregate read bandwith. 

It limits the aggregate read bandwidth to that particular file only. Every file will have it's own set of 3 racks, so I don't think it affects overall filesystem bandwidth. On the other hand, it potentially gives a client  that is reading an entire file better locality.

> Users may specify its replica placement policy 

I agree with Doug. This seems like a subsequent feature.





> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 00:00:00 2006
Return-Path: 
 <hadoop-dev-return-5132-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9823 invoked from network); 15 Nov 2006 00:00:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 00:00:00 -0000
Received: (qmail 97266 invoked by uid 500); 15 Nov 2006 00:00:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97239 invoked by uid 500); 15 Nov 2006 00:00:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97230 invoked by uid 99); 15 Nov 2006 00:00:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 16:00:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 15:59:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4BA887142F5
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 15:59:38 -0800 (PST)
Message-ID: <17400425.1163548778307.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 15:59:38 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-652) Not all Datastructures are updated
 when a block is deleted
In-Reply-To: <8743293.1161975076609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-652?page=comments#action_12449866 ] 
            
Raghu Angadi commented on HADOOP-652:
-------------------------------------


Thanks Vladimir.

I have couple of suggestions: 

regd locking: synchronizing getFile() and removing from maps seperately is not currect (we will have situation where a block exists in the map but file does not exist). I would suggest moving f.delete() to outside synchronize(). So we delete after removing from maps. 

clearPath(): Currently its cost (in compareTo() and in recursion) and  proportional to number of directories instead of depth of dir tree. One option to go to the currect child based on the path. On second thoght, you can leave it as it is we will fix it when we fix addBlock() (to remove siblings variable).

For now you just move f.delete() to outside synchrnoized block and submit the patch.

> Not all Datastructures are updated when a block is deleted
> ----------------------------------------------------------
>
>                 Key: HADOOP-652
>                 URL: http://issues.apache.org/jira/browse/HADOOP-652
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.9.0
>            Reporter: Raghu Angadi
>         Attachments: FSDataset.java.patch, FSDataset.java.patch
>
>
> Currently when a block is deleted, DataNode just deletes the physical file and updates its map. We need to update more things. For e.g. numBlocks in FSDir is not decremented.. effect of this would be that we will create more subdirectories than necessary. It might not show up badly yet since numBlocks gets correct value when the dataNode restarts. I have to see what else needs to be updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 00:02:59 2006
Return-Path: 
 <hadoop-dev-return-5133-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10673 invoked from network); 15 Nov 2006 00:02:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 00:02:59 -0000
Received: (qmail 910 invoked by uid 500); 15 Nov 2006 00:03:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 871 invoked by uid 500); 15 Nov 2006 00:03:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 862 invoked by uid 99); 15 Nov 2006 00:03:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 16:03:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 16:02:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4347E7142F5
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 16:02:38 -0800 (PST)
Message-ID: <14666830.1163548958272.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 16:02:38 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-652) Not all Datastructures are updated
 when a block is deleted
In-Reply-To: <8743293.1161975076609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-652?page=all ]

Raghu Angadi updated HADOOP-652:
--------------------------------

    Status: Open  (was: Patch Available)

> Not all Datastructures are updated when a block is deleted
> ----------------------------------------------------------
>
>                 Key: HADOOP-652
>                 URL: http://issues.apache.org/jira/browse/HADOOP-652
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.9.0
>            Reporter: Raghu Angadi
>         Attachments: FSDataset.java.patch, FSDataset.java.patch
>
>
> Currently when a block is deleted, DataNode just deletes the physical file and updates its map. We need to update more things. For e.g. numBlocks in FSDir is not decremented.. effect of this would be that we will create more subdirectories than necessary. It might not show up badly yet since numBlocks gets correct value when the dataNode restarts. I have to see what else needs to be updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 00:20:43 2006
Return-Path: 
 <hadoop-dev-return-5134-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15238 invoked from network); 15 Nov 2006 00:20:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 00:20:43 -0000
Received: (qmail 24240 invoked by uid 500); 15 Nov 2006 00:20:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24010 invoked by uid 500); 15 Nov 2006 00:20:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24001 invoked by uid 99); 15 Nov 2006 00:20:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 16:20:52 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_ID,NO_REAL_NAME,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received: from [140.211.11.75] (HELO lucene.zones.apache.org) (140.211.11.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 16:20:38 -0800
Received: from lucene.zones.apache.org (localhost [127.0.0.1])
	by lucene.zones.apache.org (8.13.7+Sun/8.13.7) with SMTP id kAF0KHeE007801
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 00:20:18 GMT
Message-Id: <200611150020.kAF0KHeE007801@lucene.zones.apache.org>
Date: Wed, 15 Nov 2006 00:20:17 +0000
Subject: Hadoop nightly build failure
From: hadoop-dev@lucene.apache.org
To: hadoop-dev@lucene.apache.org
X-Mailer: org.apache.tools.mail.MailMessage (ant.apache.org)
X-Virus-Checked: Checked by ClamAV on apache.org


init:
    [mkdir] Created dir: /tmp/hadoop-nightly/build
    [mkdir] Created dir: /tmp/hadoop-nightly/build/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/src
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/task/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/job/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/dfs/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/datanode/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/examples
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/testjar
     [copy] Copying 6 files to /tmp/hadoop-nightly/build/webapps
     [copy] Copying 4 files to /tmp/hadoop-nightly/conf
     [copy] Copying /tmp/hadoop-nightly/conf/slaves.template to /tmp/hadoop-nightly/conf/slaves
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-site.xml.template to /tmp/hadoop-nightly/conf/hadoop-site.xml
     [copy] Copying /tmp/hadoop-nightly/conf/mapred-default.xml.template to /tmp/hadoop-nightly/conf/mapred-default.xml
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-env.sh.template to /tmp/hadoop-nightly/conf/hadoop-env.sh
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: whoami: not found

record-parser:

compile-core-classes:
    [javac] Compiling 256 source files to /tmp/hadoop-nightly/build/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-native:

compile-core:

compile-examples:
    [javac] Compiling 7 source files to /tmp/hadoop-nightly/build/examples
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-test:
    [javac] Compiling 61 source files to /tmp/hadoop-nightly/build/test/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] Compiling 1 source file to /tmp/hadoop-nightly/build/test/testjar
      [jar] Building jar: /tmp/hadoop-nightly/build/test/testjar/testjob.jar
      [jar] Building jar: /tmp/hadoop-nightly/build/hadoop-nightly-test.jar
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache

test-core:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/data
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/logs
    [junit] Running org.apache.hadoop.conf.TestConfiguration
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.952 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSMkdirs
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 6.974 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSShellGenericOptions
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 10.608 sec
    [junit] Running org.apache.hadoop.dfs.TestFsck
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.597 sec
    [junit] Running org.apache.hadoop.dfs.TestLocalDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.485 sec
    [junit] Running org.apache.hadoop.dfs.TestPread
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 4.571 sec
    [junit] Running org.apache.hadoop.dfs.TestSeekBug
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 4.679 sec
    [junit] Running org.apache.hadoop.fs.TestCopyFiles
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 18.795 sec
    [junit] Running org.apache.hadoop.fs.TestDFSIO
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 5.267 sec
    [junit] Running org.apache.hadoop.fs.TestFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.728 sec
    [junit] Running org.apache.hadoop.fs.TestGlobPaths
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.446 sec
    [junit] Running org.apache.hadoop.fs.TestLocalFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.426 sec
    [junit] Running org.apache.hadoop.fs.TestPath
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.011 sec
    [junit] Running org.apache.hadoop.io.TestArrayFile
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 3.424 sec
    [junit] Running org.apache.hadoop.io.TestBytesWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.012 sec
    [junit] Running org.apache.hadoop.io.TestMD5Hash
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.283 sec
    [junit] Running org.apache.hadoop.io.TestSequenceFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 16.431 sec
    [junit] Running org.apache.hadoop.io.TestSetFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.585 sec
    [junit] Running org.apache.hadoop.io.TestText
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.528 sec
    [junit] Running org.apache.hadoop.io.TestTextNonUTF8
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.01 sec
    [junit] Running org.apache.hadoop.io.TestUTF8
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.117 sec
    [junit] Running org.apache.hadoop.io.TestVersionedWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.02 sec
    [junit] Running org.apache.hadoop.io.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.008 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodec
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 1.559 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodecFactory
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.555 sec
    [junit] Running org.apache.hadoop.ipc.TestIPC
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.868 sec
    [junit] Running org.apache.hadoop.ipc.TestRPC
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.139 sec
    [junit] Running org.apache.hadoop.mapred.TestEmptyJobWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 9.312 sec
    [junit] Running org.apache.hadoop.mapred.TestMapRed
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 12.902 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRBringup
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.591 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRClasspath
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 25.56 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRDFSCaching
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 23.252 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRLocalFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 48.661 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 64.464 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFilter
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 10.115 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFormat
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 5.428 sec
    [junit] Running org.apache.hadoop.mapred.TestTextInputFormat
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 4.535 sec
    [junit] Running org.apache.hadoop.mapred.jobcontrol.TestJobControl
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 60.985 sec
    [junit] Running org.apache.hadoop.record.test.TestMapRed
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.12 sec
    [junit] Running org.apache.hadoop.record.test.TestRecordIO
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.35 sec
    [junit] Running org.apache.hadoop.record.test.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.07 sec

test-contrib:

test:

init:
     [echo] contrib: smallJobsBenchmark
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/test/logs
    [mkdir] Created dir: /tmp/hadoop-nightly/build/minimr

init-contrib:

compile:
     [echo] contrib: smallJobsBenchmark
    [javac] Compiling 5 source files to /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: /tmp/hadoop-nightly/src/contrib/smallJobsBenchmark/src/java/org/apache/hadoop/benchmarks/mapred/MultiJobRunner.java uses unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-test:

jar:
      [jar] Building jar: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/MRBenchmark.jar

deploy:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/bin
     [copy] Copying 2 files to /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/bin

test:

test:

init:
     [echo] contrib: streaming
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming/test/logs

init-contrib:

compile:
     [echo] contrib: streaming
    [javac] Compiling 22 source files to /tmp/hadoop-nightly/build/contrib/streaming/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-test:
     [echo] contrib: streaming
    [javac] Compiling 6 source files to /tmp/hadoop-nightly/build/contrib/streaming/test
    [javac] Note: /tmp/hadoop-nightly/src/contrib/streaming/src/test/org/apache/hadoop/streaming/TestStreamedMerge.java uses or overrides a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: /tmp/hadoop-nightly/src/contrib/streaming/src/test/org/apache/hadoop/streaming/TestStreamedMerge.java uses unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

jar:
      [jar] Building jar: /tmp/hadoop-nightly/build/contrib/streaming/hadoop-streaming.jar

deploy:
     [echo] contrib: streaming
     [copy] Copying 1 file to /tmp/hadoop-nightly/build

hadoopbuildcontrib.test:
     [echo] contrib: streaming
   [delete] Deleting directory /tmp/hadoop-nightly/build/contrib/streaming/test/logs
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming/test/logs
    [junit] Running org.apache.hadoop.streaming.TestStreaming
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.768 sec
    [junit] Running org.apache.hadoop.streaming.TestSymLink
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 28.734 sec

test:

jar:
      [tar] Building tar: /tmp/hadoop-nightly/build/classes/bin.tgz
      [jar] Building jar: /tmp/hadoop-nightly/build/hadoop-nightly.jar

default-doc:
    [style] Transforming into /tmp/hadoop-nightly/build/docs
    [style] Processing /tmp/hadoop-nightly/conf/hadoop-default.xml to /tmp/hadoop-nightly/build/docs/hadoop-default.html
    [style] Loading stylesheet /tmp/hadoop-nightly/conf/configuration.xsl

javadoc:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/docs/api
  [javadoc] Generating Javadoc
  [javadoc] Javadoc execution
  [javadoc] Loading source files for package org.apache.hadoop...
  [javadoc] Loading source files for package org.apache.hadoop.conf...
  [javadoc] Loading source files for package org.apache.hadoop.dfs...
  [javadoc] Loading source files for package org.apache.hadoop.filecache...
  [javadoc] Loading source files for package org.apache.hadoop.fs...
  [javadoc] Loading source files for package org.apache.hadoop.io...
  [javadoc] Loading source files for package org.apache.hadoop.io.compress...
  [javadoc] Loading source files for package org.apache.hadoop.io.compress.zlib...
  [javadoc] Loading source files for package org.apache.hadoop.ipc...
  [javadoc] Loading source files for package org.apache.hadoop.mapred...
  [javadoc] Loading source files for package org.apache.hadoop.mapred.jobcontrol...
  [javadoc] Loading source files for package org.apache.hadoop.mapred.lib...
  [javadoc] Loading source files for package org.apache.hadoop.metrics...
  [javadoc] Loading source files for package org.apache.hadoop.metrics.file...
  [javadoc] Loading source files for package org.apache.hadoop.metrics.ganglia...
  [javadoc] Loading source files for package org.apache.hadoop.metrics.spi...
  [javadoc] Loading source files for package org.apache.hadoop.net...
  [javadoc] Loading source files for package org.apache.hadoop.record...
  [javadoc] Loading source files for package org.apache.hadoop.record.compiler...
  [javadoc] Loading source files for package org.apache.hadoop.record.compiler.generated...
  [javadoc] Loading source files for package org.apache.hadoop.tools...
  [javadoc] Loading source files for package org.apache.hadoop.util...
  [javadoc] Loading source files for package org.apache.hadoop.examples...
  [javadoc] Constructing Javadoc information...
  [javadoc] Standard Doclet version 1.5.0_06
  [javadoc] Building tree for all the packages and classes...
  [javadoc] Building index for all the packages and classes...
  [javadoc] Building index for all classes...

examples:
      [jar] Building jar: /tmp/hadoop-nightly/build/hadoop-nightly-examples.jar

package:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/hadoop-nightly
    [mkdir] Created dir: /tmp/hadoop-nightly/build/hadoop-nightly/lib
    [mkdir] Created dir: /tmp/hadoop-nightly/build/hadoop-nightly/bin
    [mkdir] Created dir: /tmp/hadoop-nightly/build/hadoop-nightly/docs
    [mkdir] Created dir: /tmp/hadoop-nightly/build/hadoop-nightly/docs/api
     [copy] Copying 20 files to /tmp/hadoop-nightly/build/hadoop-nightly/lib
    [mkdir] Created dir: /tmp/hadoop-nightly/build/hadoop-nightly/lib/native
     [exec] /tmp/hadoop-nightly/lib/native: No such file or directory
     [exec] /tmp/hadoop-nightly/build/native: No such file or directory

BUILD FAILED
/tmp/hadoop-nightly/build.xml:463: exec returned: 2

Total time: 8 minutes 12 seconds



From MAILER-DAEMON Wed Nov 15 18:51:15 2006
Return-Path: 
 <hadoop-dev-return-5151-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83297 invoked from network); 15 Nov 2006 18:51:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 18:51:15 -0000
Received: (qmail 18415 invoked by uid 500); 15 Nov 2006 18:51:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18388 invoked by uid 500); 15 Nov 2006 18:51:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18379 invoked by uid 99); 15 Nov 2006 18:51:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 10:51:24 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=DATE_IN_PAST_12_24,DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 10:51:10 -0800
Received: from [207.126.231.236] (eric14-mac.corp.yahoo.com [207.126.231.236])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kAFInWMi023860
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 10:50:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=wFyUIIVJ/eu/dWDzGcOaTHM329FNyFEb07AOqrdtIhNQDJUc5KeS91JK9hClmUVJ
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <004c01c7081e$714aff50$d09215ac@ds.corp.yahoo.com>
References: <004c01c7081e$714aff50$d09215ac@ds.corp.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <418DFA54-C8A8-40B1-A80E-500C3A2BA5C2@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Created: (HADOOP-713) dfs list operation is too expensive
Date: Tue, 14 Nov 2006 19:09:32 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

So let's display nothing for now and revisit this once we have a  
cleaner CRC story.


On Nov 14, 2006, at 10:55 AM, Hairong Kuang wrote:

> Setting the size of a directory to be the # of files is a good  
> idea. But the
> problem is that dfs name node has no idea of checksum files. So the  
> number
> of files include that of checksum files. But what's displayed at  
> the client
> side has filtered out the checksum files. So the # of files does  
> not match
> what's really displayed at the client side.
>
> Hairong
>
> -----Original Message-----
> From: Arkady Borkovsky [mailto:arkady@yahoo-inc.com]
> Sent: Monday, November 13, 2006 5:07 PM
> To: hadoop-dev@lucene.apache.org
> Subject: Re: [jira] Created: (HADOOP-713) dfs list operation is too
> expensive
>
> When listing a directory, for directory entries it may be more  
> useful to
> display the number of files in a directory, rather than the number  
> of bytes
> used by all the files in the directory and its subdirectories.
> This a subjective opinion -- comments?
>
> (Currently, the value displayed subdirectory is "0")
>
> On Nov 13, 2006, at 3:25 PM, Hairong Kuang (JIRA) wrote:
>
>> dfs list operation is too expensive
>> -----------------------------------
>>
>>                  Key: HADOOP-713
>>                  URL: http://issues.apache.org/jira/browse/HADOOP-713
>>              Project: Hadoop
>>           Issue Type: Improvement
>>           Components: dfs
>>     Affects Versions: 0.8.0
>>             Reporter: Hairong Kuang
>>
>>
>> A list request to dfs returns an array of DFSFileInfo. A DFSFileInfo
>> of a directory contains a field called contentsLen, indicating its
>> size  which gets computed at the namenode side by resursively going
>> through its subdirs. At the same time, the whole dfs directory  
>> tree is
>> locked.
>>
>> The list operation is used a lot by DFSClient for listing a  
>> directory,
>> getting a file's size and # of replicas, and getting the size of dfs.
>> Only the last operation needs the field contentsLen to be computed.
>>
>> To reduce its cost, we can add a flag to the list request.  
>> ContentsLen
>> is computed If the flag is set. By default, the flag is false.
>>
>> --
>> This message is automatically generated by JIRA.
>> -
>> If you think it was sent incorrectly contact one of the
>> administrators:
>> http://issues.apache.org/jira/secure/Administrators.jspa
>> -
>> For more information on JIRA, see:
>> http://www.atlassian.com/software/jira
>>
>>
>
>


From MAILER-DAEMON Wed Nov 15 04:46:59 2006
Return-Path: 
 <hadoop-dev-return-5135-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99433 invoked from network); 15 Nov 2006 04:46:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 04:46:59 -0000
Received: (qmail 96833 invoked by uid 500); 15 Nov 2006 04:47:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96598 invoked by uid 500); 15 Nov 2006 04:47:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96589 invoked by uid 99); 15 Nov 2006 04:47:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 20:47:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 20:46:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 35E227142FE
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 20:46:37 -0800 (PST)
Message-ID: <9407749.1163565997217.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 20:46:37 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-721) jobconf.jsp shouldn't find the
 jobconf.xsl via http
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

jobconf.jsp shouldn't find the jobconf.xsl via http
---------------------------------------------------

                 Key: HADOOP-721
                 URL: http://issues.apache.org/jira/browse/HADOOP-721
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.9.0
            Reporter: Owen O'Malley
         Assigned To: Arun C Murthy
             Fix For: 0.9.0


The jobconf.jsp gets the jobconf.xsl via http, but it is a local file. The file should be on the class path and found via findResource.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 05:01:32 2006
Return-Path: 
 <hadoop-dev-return-5136-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1769 invoked from network); 15 Nov 2006 05:01:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 05:01:32 -0000
Received: (qmail 6120 invoked by uid 500); 15 Nov 2006 05:01:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5861 invoked by uid 500); 15 Nov 2006 05:01:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5852 invoked by uid 99); 15 Nov 2006 05:01:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 21:01:41 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [203.99.254.144] (HELO rsmtp2.corp.hki.yahoo.com)
 (203.99.254.144)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 21:01:27 -0800
Received: from ddaslaptop (ddas-laptop.bangalore.corp.yahoo.com [10.80.42.89])
	(authenticated bits=0)
	by rsmtp2.corp.hki.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id
 kAF50u1D059608
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 21:00:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	x-mailer:thread-index:x-mimeole;
	b=ixQpxnimv2PCc6pt81gbdZMeWYV15LpxVlCsVlF44nwft/1ofppvfVGTMOMbPa+D
From: "Devaraj Das" <ddas@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: Sort algorithms + interface
Date: Wed, 15 Nov 2006 10:30:53 +0530
Message-ID: <007401c70873$083f5ce0$2201a8c0@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0075_01C708A1.21F798E0"
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AccIcwb1cfr6GtFUReiCehqXtrM3tg==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0075_01C708A1.21F798E0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0076_01C708A1.21F798E0"


------=_NextPart_001_0076_01C708A1.21F798E0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Here is a summary of some discussions on Sort algorithms (the implementation
work will be a part of Hadoop-331).

 

I did some benchmarking of the sort algorithms w.r.t our needs. Attached is
a table containing the results. I have benchmarked Hadoop's MergeSort,
QuickSort (a rather primitive one, without many optimizations, from
http://svn.apache.org/repos/asf/jakarta/turbine/core/trunk/src/java/org/apac
he/turbine/util/QuickSort.java

and java.util.Arrays.sort. I have also attached the source code for the
benchmark programs. The key/value pairs are IntWritables. The input to any
sort is an array of offsets to the beginning of key/value pairs in a buffer
(containing 'n' key/value pairs). The output of any sort is a sorted array
of offsets such that key_at_buffer[output[i]] < key_at_buffer[output[i+1]].

 

By the way, the java.util.Arrays.sort(Object[]) also uses MergeSort (note -
not QuickSort) & the only difference with Hadoop's MergeSort is that it uses
an array of OBJECTs as opposed to an array of INTs. It seems like the
overhead is higher in Java's Arrays.sort case both in terms of memory
footprint and the time it takes. Of

course, the input is the worst case input - 4 byte keys, and in reality we
will probably have bigger keys and thereby end up filling the
fixed-size-in-memory-map-buffer with much lesser number of keys.

 

In the attached table,

 

Time: in milliseconds, Memory: in bytes

 

Input: Same input for each run of a sort algo. For e.g., in the table below,
for 1000 records, the input that produced the1st result for MergeSort
(Time:26, Memory: 229008) also produced the 1st results for QuickSort (Time:
33 Memory: 229008) and Arrays.sort (Time: 27 Memory: 243016). Ran each algo
with 5 sample inputs for each category of #records. The records are
IntWritable key/value pairs.

 

 

Also, attached is an interface called SorterBase (will be a package private
interface). The way I see things is that we (hadoop developers) would have
an implementation of the interface, let's say, according to the design spec
on Hadoop-331 (in that the sort data structures are all arrays of ints).
Let's call the implementation SorterBaseImpl1. This would have the
implementation of all the methods of the interface except "sort" (which will
be an empty method). Classes MergeSort, QuickSort and HybridSort would
extend SorterBaseImpl1 and implement the sort() method. All these algorithms
would access the base class's datastructures and since these algorithms work
with very similar datastructures they can extend from one base class
-SorterBaseImpl1.

 

If we want to have Java based sorting (like java.util.Arrays.sort()), then

we need to implement the interface in such a way that all the datastructures

are created that way (like array of offset "objects" as opposed to int

arrays, etc.).

 

If we want to integrate a C sort, then we need to implement the interface as
such

(maybe it will be possible to reuse existing implementations like

SorterBaseImpl1; implement just the sort method differently, and have JNI

wrappers to get access to the Java datastructures within SorterBaseImpl1).
An interesting suggestion here is looking at how the C sort algorithms can
be used as it is in conjunction with streaming. 

 

Generally speaking, the expectation from any algorithm is that it can sort

an array of indirect pointers to a buffer. If an algorithm can do that, it

should be fairly easy to accommodate the algorithm in this framework.

 

Hadoop can have a configurable item called "map.sort.class" which is one of

MergeSort.class, QuickSort.class, etc. and it instantiates that class and

works with that (via methods defined in the interface).

 

The other sort algorithms that can be looked at are STL's sort,
http://www.sgi.com/tech/stl/sort.html

and optimized QuickSort (Hadoop-287).

 

Thanks to Eric, Doug, Sam, and Ben for the inputs. 


------=_NextPart_001_0076_01C708A1.21F798E0
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns=3D"http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<meta name=3DGenerator content=3D"Microsoft Word 11 (filtered medium)">
<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:Arial;
	color:windowtext;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;}
div.Section1
	{page:Section1;}
-->
</style>

</head>

<body lang=3DEN-US link=3Dblue vlink=3Dpurple>

<div class=3DSection1>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>Here is a summary =
of some
discussions on Sort algorithms (the implementation work will be a part =
of
Hadoop-331).<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>I did some =
benchmarking of
the sort algorithms w.r.t our needs. Attached is a table containing the
results. I have benchmarked Hadoop's MergeSort, QuickSort (a rather =
primitive
one, without many optimizations, from <u><font color=3Dblue><span
style=3D'color:blue'><a
href=3D"http://svn.apache.org/repos/asf/jakarta/turbine/core/trunk/src/ja=
va/org/apac">http://svn.apache.org/repos/asf/jakarta/turbine/core/trunk/s=
rc/java/org/apac</a></span></font></u>he/turbine/util/QuickSort.java<o:p>=
</o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>and =
java.util.Arrays.sort. I
have also attached the source code for the benchmark programs. The =
key/value
pairs are IntWritables. The input to any sort is an array of offsets to =
the
beginning of key/value pairs in a buffer (containing 'n' key/value =
pairs). The
output of any sort is a sorted array of offsets such that
key_at_buffer[output[i]] &lt; =
key_at_buffer[output[i+1]].<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>By the way, the
java.util.Arrays.sort(Object[]) also uses MergeSort (note - not =
QuickSort)
&amp; the only difference with Hadoop's MergeSort is that it uses an =
array of
OBJECTs as opposed to an array of INTs. It seems like the overhead is =
higher in
Java's Arrays.sort case both in terms of memory footprint and the time =
it
takes. Of<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>course, the input =
is the
worst case input - 4 byte keys, and in reality we will probably have =
bigger
keys and thereby end up filling the fixed-size-in-memory-map-buffer with =
much
lesser number of keys.<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>In the attached =
table,<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>Time: in =
milliseconds,
Memory: in bytes<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>Input: Same input =
for each
run of a sort algo. For e.g., in the table below, for 1000 records, the =
input
that produced the1st result for MergeSort (Time:26, Memory: 229008) also
produced the 1st results for QuickSort (Time: 33 Memory: 229008) and
Arrays.sort (Time: 27 Memory: 243016). Ran each algo with 5 sample =
inputs for
each category of #records. The records are IntWritable key/value =
pairs.<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>Also, attached is =
an
interface called SorterBase (will be a package private interface). The =
way I
see things is that we (hadoop developers) would have an implementation =
of the
interface, let&#8217;s say, according to the design spec on Hadoop-331 =
(in that
the sort data structures are all arrays of ints). Let's call the =
implementation
SorterBaseImpl1. This would have the implementation of all the methods =
of the
interface except &quot;sort&quot; (which will be an empty method). =
Classes MergeSort,
QuickSort and HybridSort would extend SorterBaseImpl1 and implement the =
sort()
method. All these algorithms would access the base class's =
datastructures and
since these algorithms work with very similar datastructures they can =
extend
from one base class -SorterBaseImpl1.<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>If we want to have =
Java
based sorting (like java.util.Arrays.sort()), =
then<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>we need to =
implement the
interface in such a way that all the =
datastructures<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>are created that =
way (like
array of offset &quot;objects&quot; as opposed to =
int<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>arrays, =
etc.).<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>If we want to =
integrate a C
sort, then we need to implement the interface as =
such<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>(maybe it will be =
possible
to reuse existing implementations like<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>SorterBaseImpl1; =
implement
just the sort method differently, and have =
JNI<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>wrappers to get =
access to
the Java datastructures within SorterBaseImpl1). An interesting =
suggestion here
is looking at how the C sort algorithms can be used as it is in =
conjunction
with streaming. <o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>Generally speaking, =
the
expectation from any algorithm is that it can =
sort<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>an array of =
indirect
pointers to a buffer. If an algorithm can do that, =
it<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>should be fairly =
easy to
accommodate the algorithm in this =
framework.<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>Hadoop can have a
configurable item called &quot;map.sort.class&quot; which is one =
of<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>MergeSort.class,
QuickSort.class, etc. and it instantiates that class =
and<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>works with that =
(via methods
defined in the interface).<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>The other sort =
algorithms
that can be looked at are STL&#8217;s sort, <a
href=3D"http://www.sgi.com/tech/stl/sort.html">http://www.sgi.com/tech/st=
l/sort.html</a><o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>and optimized =
QuickSort (Hadoop-287).<o:p></o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>Thanks to Eric, =
Doug, Sam,
and Ben for the inputs. <o:p></o:p></span></font></p>

</div>

</body>

</html>

------=_NextPart_001_0076_01C708A1.21F798E0--

------=_NextPart_000_0075_01C708A1.21F798E0--


From MAILER-DAEMON Wed Nov 15 05:02:00 2006
Return-Path: 
 <hadoop-dev-return-5137-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1819 invoked from network); 15 Nov 2006 05:02:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 05:02:00 -0000
Received: (qmail 6616 invoked by uid 500); 15 Nov 2006 05:02:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6388 invoked by uid 500); 15 Nov 2006 05:02:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6379 invoked by uid 99); 15 Nov 2006 05:02:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 21:02:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 21:01:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 173847142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 21:01:37 -0800 (PST)
Message-ID: <30670159.1163566897091.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 21:01:37 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-722) native-hadoop deficiencies
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

native-hadoop deficiencies
--------------------------

                 Key: HADOOP-722
                 URL: http://issues.apache.org/jira/browse/HADOOP-722
             Project: Hadoop
          Issue Type: Bug
            Reporter: Arun C Murthy
         Assigned To: Arun C Murthy
            Priority: Critical
             Fix For: 0.9.0


Deficiencies in native-hadoop (HADOOP-538):

a) packageNativeHadoop.sh assumes prebuilt linux libraries have been checked into svn (lib/native/Linux-i382-32)
  This assumption led to latest failure of nightly-build on Nov 14.

b) Some of the scripts introduced by the patch need to have 'svn:executable' property set to '*'
src/native/configure
src/native/config/config.guess
src/native/config/config.sub
src/native/config/depcomp
src/native/config/install-sh
src/native/config/missing


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 05:08:00 2006
Return-Path: 
 <hadoop-dev-return-5138-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2901 invoked from network); 15 Nov 2006 05:08:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 05:08:00 -0000
Received: (qmail 11577 invoked by uid 500); 15 Nov 2006 05:08:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11544 invoked by uid 500); 15 Nov 2006 05:08:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11535 invoked by uid 99); 15 Nov 2006 05:08:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 21:08:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 21:07:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5C5EF7142FE
	for <hadoop-dev@lucene.apache.org>; Tue, 14 Nov 2006 21:07:38 -0800 (PST)
Message-ID: <4100115.1163567258375.JavaMail.jira@brutus>
Date: Tue, 14 Nov 2006 21:07:38 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-695) Unexpected NPE from the next method of
 StreamLineRecordReader fails map/reduce jobs
In-Reply-To: <28355572.1163021691623.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-695?page=all ]

Hairong Kuang updated HADOOP-695:
---------------------------------

    Status: Patch Available  (was: Open)

> Unexpected NPE from the next method of StreamLineRecordReader fails map/reduce jobs
> -----------------------------------------------------------------------------------
>
>                 Key: HADOOP-695
>                 URL: http://issues.apache.org/jira/browse/HADOOP-695
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>         Attachments: NPE.patch
>
>
> For some reason that I do not have much idea, if input of a map/reduce job is gzipped, an unexpected null pointer may be returned from UTF8ByteArrayUtils.readline in the next method of StreamLineRecordReader. However the pointer is read before a null pointer check is performed. Thus a NPE may be thrown and fail the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 08:21:14 2006
Return-Path: 
 <hadoop-dev-return-5139-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43544 invoked from network); 15 Nov 2006 08:21:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 08:21:14 -0000
Received: (qmail 37922 invoked by uid 500); 15 Nov 2006 08:21:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37890 invoked by uid 500); 15 Nov 2006 08:21:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37881 invoked by uid 99); 15 Nov 2006 08:21:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 00:21:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 00:21:10 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 99FC6714318
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 00:20:40 -0800 (PST)
Message-ID: <2348779.1163578840628.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 00:20:40 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Status: Open  (was: Patch Available)

Conflicts with latest trunk. will submit an updated patch

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, Hadoop-76_2.patch, Hadoop-76_3.patch, Hadoop-76_4.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 11:53:47 2006
Return-Path: 
 <hadoop-dev-return-5140-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95056 invoked from network); 15 Nov 2006 11:53:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 11:53:47 -0000
Received: (qmail 21013 invoked by uid 500); 15 Nov 2006 11:53:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20789 invoked by uid 500); 15 Nov 2006 11:53:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20780 invoked by uid 99); 15 Nov 2006 11:53:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 03:53:55 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 503F4714320
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 03:52:38 -0800 (PST)
Message-ID: <10645415.1163591558324.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 03:52:38 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-722) native-hadoop deficiencies
In-Reply-To: <30670159.1163566897091.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-722?page=all ]

Arun C Murthy updated HADOOP-722:
---------------------------------

    Attachment: HADOOP-722_20061115.patch

Here is a straight-forward fix...

Doug, the attached patch contains necessary changes for the scripts; however due to deficiencies of the unix 'patch' utility can you please manually add the 'svn:executable' property (value '*') to the following files:
 src/native/config/config.guess
 src/native/config/config.sub
 src/native/config/depcomp
 src/native/config/install-sh
 src/native/config/missing
 src/native/configure
 src/native/packageNativeHadoop.sh

thanks!

> native-hadoop deficiencies
> --------------------------
>
>                 Key: HADOOP-722
>                 URL: http://issues.apache.org/jira/browse/HADOOP-722
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>            Priority: Critical
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-722_20061115.patch
>
>
> Deficiencies in native-hadoop (HADOOP-538):
> a) packageNativeHadoop.sh assumes prebuilt linux libraries have been checked into svn (lib/native/Linux-i382-32)
>   This assumption led to latest failure of nightly-build on Nov 14.
> b) Some of the scripts introduced by the patch need to have 'svn:executable' property set to '*'
> src/native/configure
> src/native/config/config.guess
> src/native/config/config.sub
> src/native/config/depcomp
> src/native/config/install-sh
> src/native/config/missing

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 11:55:50 2006
Return-Path: 
 <hadoop-dev-return-5141-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95549 invoked from network); 15 Nov 2006 11:55:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 11:55:50 -0000
Received: (qmail 22530 invoked by uid 500); 15 Nov 2006 11:55:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22503 invoked by uid 500); 15 Nov 2006 11:55:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22487 invoked by uid 99); 15 Nov 2006 11:55:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 03:55:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5C0DB714320
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 03:54:38 -0800 (PST)
Message-ID: <17199590.1163591678374.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 03:54:38 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-722) native-hadoop deficiencies
In-Reply-To: <30670159.1163566897091.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-722?page=all ]

Arun C Murthy updated HADOOP-722:
---------------------------------

    Status: Patch Available  (was: Open)

> native-hadoop deficiencies
> --------------------------
>
>                 Key: HADOOP-722
>                 URL: http://issues.apache.org/jira/browse/HADOOP-722
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>            Priority: Critical
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-722_20061115.patch
>
>
> Deficiencies in native-hadoop (HADOOP-538):
> a) packageNativeHadoop.sh assumes prebuilt linux libraries have been checked into svn (lib/native/Linux-i382-32)
>   This assumption led to latest failure of nightly-build on Nov 14.
> b) Some of the scripts introduced by the patch need to have 'svn:executable' property set to '*'
> src/native/configure
> src/native/config/config.guess
> src/native/config/config.sub
> src/native/config/depcomp
> src/native/config/install-sh
> src/native/config/missing

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 13:49:01 2006
Return-Path: 
 <hadoop-dev-return-5142-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23825 invoked from network); 15 Nov 2006 13:49:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 13:49:01 -0000
Received: (qmail 77204 invoked by uid 500); 15 Nov 2006 13:49:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77182 invoked by uid 500); 15 Nov 2006 13:49:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77173 invoked by uid 99); 15 Nov 2006 13:49:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 05:49:10 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3FE89714357
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 04:55:39 -0800 (PST)
Message-ID: <23212296.1163595339255.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 04:55:39 -0800 (PST)
From: "Vladimir Krokhmalyov (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-652) Not all Datastructures are updated
 when a block is deleted
In-Reply-To: <8743293.1161975076609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-652?page=all ]

Vladimir Krokhmalyov updated HADOOP-652:
----------------------------------------

    Attachment: FSDataset.java.patch

> Not all Datastructures are updated when a block is deleted
> ----------------------------------------------------------
>
>                 Key: HADOOP-652
>                 URL: http://issues.apache.org/jira/browse/HADOOP-652
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.9.0
>            Reporter: Raghu Angadi
>         Attachments: FSDataset.java.patch, FSDataset.java.patch, FSDataset.java.patch
>
>
> Currently when a block is deleted, DataNode just deletes the physical file and updates its map. We need to update more things. For e.g. numBlocks in FSDir is not decremented.. effect of this would be that we will create more subdirectories than necessary. It might not show up badly yet since numBlocks gets correct value when the dataNode restarts. I have to see what else needs to be updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 14:39:01 2006
Return-Path: 
 <hadoop-dev-return-5143-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43794 invoked from network); 15 Nov 2006 14:39:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 14:39:01 -0000
Received: (qmail 72227 invoked by uid 500); 15 Nov 2006 14:39:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72200 invoked by uid 500); 15 Nov 2006 14:39:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72191 invoked by uid 99); 15 Nov 2006 14:39:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 06:39:09 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 48FB971432F
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 05:15:38 -0800 (PST)
Message-ID: <21619649.1163596538296.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 05:15:38 -0800 (PST)
From: "Vladimir Krokhmalyov (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-652) Not all Datastructures are updated
 when a block is deleted
In-Reply-To: <8743293.1161975076609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-652?page=all ]

Vladimir Krokhmalyov updated HADOOP-652:
----------------------------------------

    Status: Patch Available  (was: Open)

OK. I just moved f.delete() to outside synchronized block and left recursion as it is. Thanks Raghu.

> Not all Datastructures are updated when a block is deleted
> ----------------------------------------------------------
>
>                 Key: HADOOP-652
>                 URL: http://issues.apache.org/jira/browse/HADOOP-652
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.9.0
>            Reporter: Raghu Angadi
>         Attachments: FSDataset.java.patch, FSDataset.java.patch, FSDataset.java.patch
>
>
> Currently when a block is deleted, DataNode just deletes the physical file and updates its map. We need to update more things. For e.g. numBlocks in FSDir is not decremented.. effect of this would be that we will create more subdirectories than necessary. It might not show up badly yet since numBlocks gets correct value when the dataNode restarts. I have to see what else needs to be updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 15:11:26 2006
Return-Path: 
 <hadoop-dev-return-5144-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56815 invoked from network); 15 Nov 2006 15:11:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 15:11:26 -0000
Received: (qmail 45819 invoked by uid 500); 15 Nov 2006 15:11:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45708 invoked by uid 500); 15 Nov 2006 15:11:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45687 invoked by uid 99); 15 Nov 2006 15:11:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 07:11:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 07:11:22 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 45EE2714367
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 06:10:40 -0800 (PST)
Message-ID: <29714007.1163599840283.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 06:10:40 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Attachment: Hadoop-76_5.patch

Patch updated with latest trunk. 

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, Hadoop-76_2.patch, Hadoop-76_3.patch, Hadoop-76_4.patch, Hadoop-76_5.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 16:46:59 2006
Return-Path: 
 <hadoop-dev-return-5145-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14072 invoked from network); 15 Nov 2006 16:46:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 16:46:59 -0000
Received: (qmail 37498 invoked by uid 500); 15 Nov 2006 16:47:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37471 invoked by uid 500); 15 Nov 2006 16:47:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37462 invoked by uid 99); 15 Nov 2006 16:47:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 08:47:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 08:46:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 23B6B71431A
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 08:46:37 -0800 (PST)
Message-ID: <5078563.1163609197143.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 08:46:37 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-723) Race condition exists in the method
 MapOutputLocation.getFile
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Race condition exists in the method MapOutputLocation.getFile
-------------------------------------------------------------

                 Key: HADOOP-723
                 URL: http://issues.apache.org/jira/browse/HADOOP-723
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Devaraj Das


There seems to be a race condition in the way the Reduces copy the map output files from the Maps. If a copier is blocked in the connect method (in the beginning of the method MapOutputLocation.getFile) to a Jetty on a Map, and the MapCopyLeaseChecker detects that the copier was idle for too long, it will go ahead and issue a interrupt (read 'kill') to this thread and create a new Copier thread. However, the copier, currently blocked trying to connect to Jetty on a Map, doesn't actually get killed until the connect timeout expires and as soon as the connect comes out (with an IOException), it will delete the map output file which actually could have been (successfully) created by the new Copier thread. This leads to the Sort phase for that reducer failing with a FileNotFoundException.
One simple way to fix this is to not delete the file if the file was not created within this getFile method.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 17:49:01 2006
Return-Path: 
 <hadoop-dev-return-5146-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41518 invoked from network); 15 Nov 2006 17:49:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 17:49:01 -0000
Received: (qmail 73590 invoked by uid 500); 15 Nov 2006 17:49:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73569 invoked by uid 500); 15 Nov 2006 17:49:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73560 invoked by uid 99); 15 Nov 2006 17:49:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 09:49:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 09:48:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5703E714323
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 09:48:39 -0800 (PST)
Message-ID: <27646620.1163612919353.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 09:48:39 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-657) Free temporary space should be
 modelled better
In-Reply-To: <11001957.1162254376612.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-657?page=comments#action_12450121 ] 
            
Owen O'Malley commented on HADOOP-657:
--------------------------------------

option #2 with putting the "unallocated" disk space into the TaskTrackerStatus should work well.

> Free temporary space should be modelled better
> ----------------------------------------------
>
>                 Key: HADOOP-657
>                 URL: http://issues.apache.org/jira/browse/HADOOP-657
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>
> Currently, there is a configurable size that must be free for a task tracker to accept a new task. However, that isn't a very good model of what the task is likely to take. I'd like to propose:
> Map tasks:  totalInputSize * conf.getFloat("map.output.growth.factor", 1.0) / numMaps
> Reduce tasks: totalInputSize * 2 * conf.getFloat("map.output.growth.factor", 1.0) / numReduces
> where totalInputSize is the size of all the maps inputs for the given job.
> To start a new task, 
>   newTaskAllocation + (sum over running tasks of (1.0 - done) * allocation) >= 
>        free disk * conf.getFloat("mapred.max.scratch.allocation", 0.90);
> So in English, we will model the expected sizes of tasks and only task tasks that should leave us a 10% margin. With:
> map.output.growth.factor -- the relative size of the transient data relative to the map inputs
> mapred.max.scratch.allocation -- the maximum amount of our disk we want to allocate to tasks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 17:56:15 2006
Return-Path: 
 <hadoop-dev-return-5147-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47790 invoked from network); 15 Nov 2006 17:56:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 17:56:15 -0000
Received: (qmail 96776 invoked by uid 500); 15 Nov 2006 17:56:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96749 invoked by uid 500); 15 Nov 2006 17:56:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96739 invoked by uid 99); 15 Nov 2006 17:56:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 09:56:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 09:56:09 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 40797714322
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 09:55:38 -0800 (PST)
Message-ID: <6507695.1163613338261.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 09:55:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-722) native-hadoop deficiencies
In-Reply-To: <30670159.1163566897091.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-722?page=all ]

Doug Cutting updated HADOOP-722:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just fixed this.  Thanks, Arun!

> native-hadoop deficiencies
> --------------------------
>
>                 Key: HADOOP-722
>                 URL: http://issues.apache.org/jira/browse/HADOOP-722
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>            Priority: Critical
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-722_20061115.patch
>
>
> Deficiencies in native-hadoop (HADOOP-538):
> a) packageNativeHadoop.sh assumes prebuilt linux libraries have been checked into svn (lib/native/Linux-i382-32)
>   This assumption led to latest failure of nightly-build on Nov 14.
> b) Some of the scripts introduced by the patch need to have 'svn:executable' property set to '*'
> src/native/configure
> src/native/config/config.guess
> src/native/config/config.sub
> src/native/config/depcomp
> src/native/config/install-sh
> src/native/config/missing

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 18:00:01 2006
Return-Path: 
 <hadoop-dev-return-5148-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52418 invoked from network); 15 Nov 2006 18:00:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 18:00:01 -0000
Received: (qmail 9976 invoked by uid 500); 15 Nov 2006 18:00:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9937 invoked by uid 500); 15 Nov 2006 18:00:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9922 invoked by uid 99); 15 Nov 2006 18:00:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 10:00:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 09:59:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E6014714323
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 09:59:38 -0800 (PST)
Message-ID: <399724.1163613578939.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 09:59:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-657) Free temporary space should be
 modelled better
In-Reply-To: <11001957.1162254376612.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-657?page=comments#action_12450130 ] 
            
Doug Cutting commented on HADOOP-657:
-------------------------------------

We should also log something when tasks are not accepted due to space limitations.  At present I think nothing is displayed in this case.

> Free temporary space should be modelled better
> ----------------------------------------------
>
>                 Key: HADOOP-657
>                 URL: http://issues.apache.org/jira/browse/HADOOP-657
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>
> Currently, there is a configurable size that must be free for a task tracker to accept a new task. However, that isn't a very good model of what the task is likely to take. I'd like to propose:
> Map tasks:  totalInputSize * conf.getFloat("map.output.growth.factor", 1.0) / numMaps
> Reduce tasks: totalInputSize * 2 * conf.getFloat("map.output.growth.factor", 1.0) / numReduces
> where totalInputSize is the size of all the maps inputs for the given job.
> To start a new task, 
>   newTaskAllocation + (sum over running tasks of (1.0 - done) * allocation) >= 
>        free disk * conf.getFloat("mapred.max.scratch.allocation", 0.90);
> So in English, we will model the expected sizes of tasks and only task tasks that should leave us a 10% margin. With:
> map.output.growth.factor -- the relative size of the transient data relative to the map inputs
> mapred.max.scratch.allocation -- the maximum amount of our disk we want to allocate to tasks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 18:14:02 2006
Return-Path: 
 <hadoop-dev-return-5149-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59693 invoked from network); 15 Nov 2006 18:14:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 18:14:02 -0000
Received: (qmail 31489 invoked by uid 500); 15 Nov 2006 18:14:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31461 invoked by uid 500); 15 Nov 2006 18:14:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31447 invoked by uid 99); 15 Nov 2006 18:14:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 10:14:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 10:13:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D8CC0714321
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 10:13:38 -0800 (PST)
Message-ID: <10688735.1163614418885.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 10:13:38 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-657) Free temporary space should be
 modelled better
In-Reply-To: <11001957.1162254376612.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-657?page=comments#action_12450138 ] 
            
Arun C Murthy commented on HADOOP-657:
--------------------------------------

It should be very useful to include the 'unallocated disk space' in the global and per-host jsps so as to provide an easy way for operator to diagnose if and when tasks can't be allocated due to lack of diskspace... I think it should be a part of this same bug.

> Free temporary space should be modelled better
> ----------------------------------------------
>
>                 Key: HADOOP-657
>                 URL: http://issues.apache.org/jira/browse/HADOOP-657
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>
> Currently, there is a configurable size that must be free for a task tracker to accept a new task. However, that isn't a very good model of what the task is likely to take. I'd like to propose:
> Map tasks:  totalInputSize * conf.getFloat("map.output.growth.factor", 1.0) / numMaps
> Reduce tasks: totalInputSize * 2 * conf.getFloat("map.output.growth.factor", 1.0) / numReduces
> where totalInputSize is the size of all the maps inputs for the given job.
> To start a new task, 
>   newTaskAllocation + (sum over running tasks of (1.0 - done) * allocation) >= 
>        free disk * conf.getFloat("mapred.max.scratch.allocation", 0.90);
> So in English, we will model the expected sizes of tasks and only task tasks that should leave us a 10% margin. With:
> map.output.growth.factor -- the relative size of the transient data relative to the map inputs
> mapred.max.scratch.allocation -- the maximum amount of our disk we want to allocate to tasks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 18:26:02 2006
Return-Path: 
 <hadoop-dev-return-5150-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72927 invoked from network); 15 Nov 2006 18:26:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 18:26:02 -0000
Received: (qmail 57921 invoked by uid 500); 15 Nov 2006 18:26:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57896 invoked by uid 500); 15 Nov 2006 18:26:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57887 invoked by uid 99); 15 Nov 2006 18:26:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 10:26:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 10:26:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E6E4C714323
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 10:25:38 -0800 (PST)
Message-ID: <17282878.1163615138943.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 10:25:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-657) Free temporary space should be
 modelled better
In-Reply-To: <11001957.1162254376612.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-657?page=comments#action_12450141 ] 
            
Doug Cutting commented on HADOOP-657:
-------------------------------------

> include the 'unallocated disk space' in the global and per-host jsps

Yes, I agree this is another metric that should be displayed in the central web ui.  It should be reported through the metrics API, as discussed in HADOOP-481 and HADOOP-481.  The MapReduce framework should implement a MetricsContext, and system (and perhaps user) code can use this to route statisitics to central locations.  I don't think we want to fix that as a part of this issue, but I also don't think we should hack in an alternate mechanism just for this statistic.

> Free temporary space should be modelled better
> ----------------------------------------------
>
>                 Key: HADOOP-657
>                 URL: http://issues.apache.org/jira/browse/HADOOP-657
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>
> Currently, there is a configurable size that must be free for a task tracker to accept a new task. However, that isn't a very good model of what the task is likely to take. I'd like to propose:
> Map tasks:  totalInputSize * conf.getFloat("map.output.growth.factor", 1.0) / numMaps
> Reduce tasks: totalInputSize * 2 * conf.getFloat("map.output.growth.factor", 1.0) / numReduces
> where totalInputSize is the size of all the maps inputs for the given job.
> To start a new task, 
>   newTaskAllocation + (sum over running tasks of (1.0 - done) * allocation) >= 
>        free disk * conf.getFloat("mapred.max.scratch.allocation", 0.90);
> So in English, we will model the expected sizes of tasks and only task tasks that should leave us a 10% margin. With:
> map.output.growth.factor -- the relative size of the transient data relative to the map inputs
> mapred.max.scratch.allocation -- the maximum amount of our disk we want to allocate to tasks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 18:53:03 2006
Return-Path: 
 <hadoop-dev-return-5152-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84275 invoked from network); 15 Nov 2006 18:53:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 18:53:03 -0000
Received: (qmail 20943 invoked by uid 500); 15 Nov 2006 18:53:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20919 invoked by uid 500); 15 Nov 2006 18:53:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20900 invoked by uid 99); 15 Nov 2006 18:53:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 10:53:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.142.198.211] (HELO smtp112.sbc.mail.mud.yahoo.com)
 (68.142.198.211)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Nov 2006 10:52:55 -0800
Received: (qmail 653 invoked from network); 15 Nov 2006 18:52:31 -0000
Received: from unknown (HELO ?192.168.50.163?)
 (schmed7@pacbell.net@69.17.55.128 with plain)
  by smtp112.sbc.mail.mud.yahoo.com with SMTP; 15 Nov 2006 18:52:30 -0000
X-YMail-OSG: 
 vH3aOREVM1mXZVj5MDDAVmcYsjX1dcBdZpEhNNhrrJbMCD67IM_qWPIcQQeYsytfeqgbOC7FYer3cf.Mue2aLTbEMHYsKc9Vvd7870DGUrHcjR1HwbanIMk8t2qHUwl9k8LczQJSv3oNOuke5ZpB_yYrxpdFthodQuvuQs65.d0XLbga7Ge8FD0vQKlgR408_tDUYzagRjLy3CIm
Mime-Version: 1.0
Message-Id: <p06210205c18107b7e6be@[192.168.50.163]>
Date: Wed, 15 Nov 2006 10:52:26 -0800
To: hadoop-dev@lucene.apache.org
From: Chris Schneider <Schmed@TransPac.com>
Subject: DFS/RPC problems
Cc: Krugle Development <Dev@IMail.Krugle.net>
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Virus-Checked: Checked by ClamAV on apache.org

Fellow Hadoop coders,

I'm getting tragic DFS/RPC problems running Nutch 0.8+ atop Hadoop 
0.5.1+ that seem similar to problems others have been reporting 
(e.g., HADOOP-707). My great hope was that the HADOOP-563 patch would 
resolve them, and it may well have improved things somewhat. However, 
I'm still unable to complete the crawl I've been attempting even 
after rolling in this patch. A few notes about my setup that may be 
relevant:

1) I'm running a crawl through a proxy server, and I've modified 
Nutch so that it skips the server delay whenever it gets a hit in the 
proxy cache. Since I've been attempting the same crawl over and over 
again, the first part of it may run so fast that it taxes the DFS and 
RPC in a way that exposes fundamental problems.

2) I'm injecting 26M URLs into a brand new DB and then trying to 
fetch them all at once. I've tuned the fetcher.threads.fetch to 500 
in order to avoid fatal memory swapping on my cluster of 10 slaves (2 
tasktrackers per slave).

3) I've been using hadoop job -kill to stop the fetch job when I 
notice things not going the way I want (not necessarily catastrophic 
problems). I wonder whether this (in combination with the heavy 
loading I've applied to hadoop) may result in my DFS becoming 
"unusable".

4) Once my DFS becomes "unusable", I can stop-all.sh/start-all.sh, 
reboot my systems, etc., but nothing will give me back a cluster I 
can reliably use to do even relatively simple things like hadoop dfs 
-du. The start-all.sh script takes a very long time to execute, but 
hadoop eventually does come up, including its web server. The hadoop 
fsck / command (unless it dies do to an RPC problem) also reports 
that my DFS is healthy, though things are very sick indeed. Even 
simple DFS commands either execute slowly or die with RPC problems 
(SocketTimeoutException). Crawling at this point may also get started 
OK, though the fetch will eventually die.

5) Part of the modifications we've made to Nutch are a message queue 
subsystem developed by Andrzej. Since this doesn't use NIO to do any 
of its communication, I doubt that it is interfering with hadoop's 
RPC. However, it does a fair amount of writing to the DFS itself, and 
many of the error messages in the logs are associated with these 
requests.

6) To resolve the "unusable" DFS problem, I'm forced to use the local 
FS to delete all of the DFS contents (on both master and slaves), and 
then I tell the namenode to format the DFS. I also wonder whether 
this operation may leave things in some kind of strange state, though 
I can't imagine what might be the problem.

After resorting to step #6 above yesterday, I performed another test 
and conducted a fairly detailed analysis of the log files. I injected 
my 26M URLs into a new crawldb, generated a fetch list (without 
specifying any topN) and started fetching it. After over an hour of 
fetching, I noticed that I wanted to do a little more logging on the 
Nutch side, so I killed the fetch job, did a stop-all.sh, deployed a 
modified version of Nutch, did a start-all.sh, and tried my crawl 
again from scratch (i.e., I injected my 26M URLs into a brand new 
crawldb, etc.) I let this run until the fetch job died, then mined 
the logs for the following information.

Any help our insight you could provide would be greatly appreciated.

Best Regards,

- Chris

-------------------------------------------------------------------------------------------
I didn't find anything unusual in the stdout for start-all.sh.

The namenode may have had trouble removing files immediately after it was first
launched, but this is probably just housekeeping (making sure that it deletes
any files that are sometimes left over from previous runs):

   2006-11-14 11:13:23,276 WARN  dfs.StateChange - DIR* 
FSDirectory.unprotectedDelete: failed to remove 
/tmp/hadoop/mapred/.system.crc because it does not exist
   2006-11-14 11:13:23,280 WARN  dfs.StateChange - DIR* 
FSDirectory.unprotectedDelete: failed to remove 
/tmp/hadoop/mapred/system because it does not exist

Immediately after the injection for the first crawl began
   2006-11-14 11:45:45,141 INFO  crawl.Injector - Injector: starting
there is a significant(?) DFS block issue in the s1 datanode's log:

   2006-11-14 11:45:49,021 WARN  dfs.DataNode - DataXCeiver
   java.io.IOException: Block blk_452376043108156205 has already been 
started (though not completed), and thus cannot be created.
           at org.apache.hadoop.dfs.FSDataset.writeToBlock(FSDataset.java:298)
           at 
org.apache.hadoop.dfs.DataNode$DataXceiver.writeBlock(DataNode.java:663) 

           at org.apache.hadoop.dfs.DataNode$DataXceiver.run(DataNode.java:507)
           at java.lang.Thread.run(Thread.java:595)

This problem is reflected in the requesting (s7) datanode's log as well and
apparently results in its connection to the namenode getting reset(?):

   2006-11-14 11:45:49,010 WARN  dfs.DataNode - Failed to transfer 
blk_452376043108156205 to s1-crawlera/10.10.16.101:50010
   java.net.SocketException: Connection reset
           at 
java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
           at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
           at 
java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
           at java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)
           at java.io.DataOutputStream.write(DataOutputStream.java:90)
           at org.apache.hadoop.dfs.DataNode$DataTransfer.run(DataNode.java:912)
           at java.lang.Thread.run(Thread.java:595)

(There are three of these events in s7's datanode log during the injection,
generation and fetching, which seem to be correlated with some of the message
queue subsystem problems mentioned below.)

As the injection for the first crawl completed
   2006-11-14 12:06:13,613 INFO  crawl.Injector - Injector: done
there are a couple of unimportant(?) messages that I can attribute to a brand
new crawldb:

   2006-11-14 12:06:13,603 WARN  dfs.StateChange - DIR* 
FSDirectory.unprotectedDelete: failed to remove 
/user/crawler/crawl-20061114114341/crawldb/.old.crc because it does 
not exist
   2006-11-14 12:06:13,603 WARN  dfs.StateChange - DIR* 
FSDirectory.unprotectedDelete: failed to remove 
/user/crawler/crawl-20061114114341/crawldb/old because it does not 
exist
   2006-11-14 12:06:13,604 WARN  dfs.StateChange - DIR* 
FSDirectory.unprotectedRenameTo: failed to rename 
/user/crawler/crawl-20061114114341/crawldb/current to 
/user/crawler/crawl-20061114114341/crawldb/old because source does 
not exist
   2006-11-14 12:06:13,607 WARN  dfs.StateChange - DIR* 
FSDirectory.unprotectedDelete: failed to remove 
/user/crawler/crawl-20061114114341/crawldb/.old.crc because it does 
not exist
   2006-11-14 12:06:13,608 WARN  dfs.StateChange - DIR* 
FSDirectory.unprotectedDelete: failed to remove 
/user/crawler/crawl-20061114114341/crawldb/old because it does not 
exist

Once the fetcher job got going
   2006-11-14 12:21:30,654 INFO  fetcher.Fetcher - Fetcher: segment: 
/user/crawler/crawl-20061114114341/segments/20061114120615
Andrzej's message queue subsystem apparently had tons of trouble creating
various files, with messages getting spit out every minute or so:

   2006-11-14 12:21:54,827 WARN  dfs.StateChange - DIR* 
NameSystem.startFile: failed to create file 
/mq/alerts/fetcher/.1163535714813.s7-crawlera.crc for 
DFSClient_task_0005_m_000010_0 on client s7-crawlera because 
pendingCreates is non-null.
   ...
   2006-11-14 13:10:50,457 WARN  dfs.StateChange - DIR* 
NameSystem.startFile: failed to create file 
/mq/alerts/fetcher/.1163538650385.s7-crawlera.crc for 
DFSClient_task_0005_m_000019_0 on client s7-crawlera because 
pendingCreates is non-null.

These may be correlated with entries in the datanode logs:

   2006-11-14 13:10:46,387 WARN  dfs.DataNode - DataXCeiver
   java.io.IOException: Block blk_-8970705341808748626 is valid, and 
cannot be written to.
           at org.apache.hadoop.dfs.FSDataset.writeToBlock(FSDataset.java:285)
           at 
org.apache.hadoop.dfs.DataNode$DataXceiver.writeBlock(DataNode.java:663)
           at org.apache.hadoop.dfs.DataNode$DataXceiver.run(DataNode.java:507)
           at java.lang.Thread.run(Thread.java:595)

The namenode also noticed a few redundant addStoredBlock requests:

   2006-11-14 13:10:56,103 WARN  dfs.StateChange - BLOCK* 
NameSystem.addStoredBlock: Redundant addStoredBlock request received 
for blk_-4818305081009377296 on s10-crawlera:50010

But I *don't* find anything in the datanode logs mentioning these blocks.

Finally (perhaps in response to me killing this first fetch job?), we see our
first ClosedChannelException in the namenode log:

   2006-11-14 13:40:44,634 WARN  ipc.Server - handler output error
   java.nio.channels.ClosedChannelException
     at sun.nio.ch.SocketChannelImpl.ensureWriteOpen(SocketChannelImpl.java:125)
     at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:294)
     at 
org.apache.hadoop.ipc.SocketChannelOutputStream.flushBuffer(SocketChannelOutputStream.java:120)
     at 
org.apache.hadoop.ipc.SocketChannelOutputStream.write(SocketChannelOutputStream.java:93)
     at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
     at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
     at java.io.DataOutputStream.flush(DataOutputStream.java:106)
     at org.apache.hadoop.ipc.Server$Handler.run(Server.java:486)

This is associated with "unknown opcode" messages in most of the datanode logs:

   s3-crawlera.prod.krugle.net: 2006-11-14 13:40:43,678 WARN 
dfs.DataNode - DataXCeiver
   s3-crawlera.prod.krugle.net: java.io.IOException: Unknown opcode 
for incoming data stream
   s3-crawlera.prod.krugle.net:    at 
org.apache.hadoop.dfs.DataNode$DataXceiver.run(DataNode.java:515)
   s3-crawlera.prod.krugle.net:    at java.lang.Thread.run(Thread.java:595)


--------------------------------------------------------------------------------
Here I did a stop-all.sh, deployed a version of nutch with a bit more logging,
and then did a start-all.sh
--------------------------------------------------------------------------------


The jobtracker log shows that it was apparently unable to connect to the
namenode just after it gets launched the second time. The connection error
repeats over and over again, but eventually we get a few messages about the
web server starting up that may indicate that the jobtracker was finally able
to connect to the namenode(?)

   2006-11-14 13:59:52,321 WARN  mapred.JobTracker - Starting tracker
   java.net.ConnectException: Connection refused
     at java.net.PlainSocketImpl.socketConnect(Native Method)
     at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
     at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
     at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
     at java.net.Socket.connect(Socket.java:507)
     at java.net.Socket.connect(Socket.java:457)
     at java.net.Socket.<init>(Socket.java:365)
     at java.net.Socket.<init>(Socket.java:207)
     at org.apache.hadoop.ipc.Client$Connection.<init>(Client.java:113)
     at org.apache.hadoop.ipc.Client.getConnection(Client.java:359)
     at org.apache.hadoop.ipc.Client.call(Client.java:297)
     at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:161)
     at org.apache.hadoop.dfs.$Proxy0.getProtocolVersion(Unknown Source)
     at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:245)
     at org.apache.hadoop.dfs.DFSClient.<init>(DFSClient.java:103)
     at 
org.apache.hadoop.dfs.DistributedFileSystem.<init>(DistributedFileSystem.java:47)
     at org.apache.hadoop.fs.FileSystem.getNamed(FileSystem.java:101)
     at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:86)
     at org.apache.hadoop.mapred.JobTracker.<init>(JobTracker.java:486)
     at org.apache.hadoop.mapred.JobTracker.startTracker(JobTracker.java:68)
     at org.apache.hadoop.mapred.JobTracker.main(JobTracker.java:1200)
   ...
   2006-11-14 14:00:18,352 WARN  mapred.JobTracker - Starting tracker
   java.net.ConnectException: Connection refused
     at java.net.PlainSocketImpl.socketConnect(Native Method)
     at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
     at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
     at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
     at java.net.Socket.connect(Socket.java:507)
     at java.net.Socket.connect(Socket.java:457)
     at java.net.Socket.<init>(Socket.java:365)
     at java.net.Socket.<init>(Socket.java:207)
     at org.apache.hadoop.ipc.Client$Connection.<init>(Client.java:113)
     at org.apache.hadoop.ipc.Client.getConnection(Client.java:359)
     at org.apache.hadoop.ipc.Client.call(Client.java:297)
     at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:161)
     at org.apache.hadoop.dfs.$Proxy0.getProtocolVersion(Unknown Source)
     at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:245)
     at org.apache.hadoop.dfs.DFSClient.<init>(DFSClient.java:103)
     at 
org.apache.hadoop.dfs.DistributedFileSystem.<init>(DistributedFileSystem.java:47)
     at org.apache.hadoop.fs.FileSystem.getNamed(FileSystem.java:101)
     at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:86)
     at org.apache.hadoop.mapred.JobTracker.<init>(JobTracker.java:486)
     at org.apache.hadoop.mapred.JobTracker.startTracker(JobTracker.java:68)
     at org.apache.hadoop.mapred.JobTracker.main(JobTracker.java:1200)
   2006-11-14 14:00:19,516 INFO  util.Credential - Checking Resource aliases
   2006-11-14 14:00:19,534 INFO  http.HttpServer - Version Jetty/5.1.4
   2006-11-14 14:00:20,423 INFO  util.Container - Started 
org.mortbay.jetty.servlet.WebApplicationHandler@69267649
   2006-11-14 14:00:20,492 INFO  util.Container - Started 
WebApplicationContext[/,/]
   2006-11-14 14:00:20,493 INFO  util.Container - Started 
HttpContext[/logs,/logs]
   2006-11-14 14:00:20,493 INFO  util.Container - Started 
HttpContext[/static,/static]
   2006-11-14 14:00:20,496 INFO  http.SocketListener - Started 
SocketListener on 0.0.0.0:50030
   2006-11-14 14:00:20,496 INFO  util.Container - Started 
org.mortbay.jetty.Server@b6e39f

Once the second crawl gets started
   2006-11-14 14:02:03,392 INFO  crawl.Injector - Injector: starting
the same issues with the new crawldb, the message queue, and redundant blocks
mentioned above appear again in the namenode log (not shown).

The DFS/RPC problems finally begin to surface in the jobtracker log (and these
bubble up to tool output) several hours into the second crawl:

   2006-11-14 17:07:27,539 WARN  fs.DFSClient - Problem renewing lease 
for DFSClient_-284911018: java.net.SocketTimeoutException: timed out 
waiting for rpc response
     at org.apache.hadoop.ipc.Client.call(Client.java:312)
     at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:161)
     at org.apache.hadoop.dfs.$Proxy0.renewLease(Unknown Source)
     at org.apache.hadoop.dfs.DFSClient$LeaseChecker.run(DFSClient.java:440)
     at java.lang.Thread.run(Thread.java:595)

Nothing special appears during this same timeframe in the namenode log (just
the continuing message queue and redundant blocks errors).

Finally, there is an indication in the jobtracker log (embedded in the
continuing DFS/RPC problems) that the fetch job has died and is being garbage
collected:

   2006-11-14 18:46:37,681 WARN  fs.DFSClient - Problem renewing lease 
for DFSClient_-284911018: java.net.SocketTimeoutException: timed out 
waiting for rpc response
     at org.apache.hadoop.ipc.Client.call(Client.java:312)
     at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:161)
     at org.apache.hadoop.dfs.$Proxy0.renewLease(Unknown Source)
     at org.apache.hadoop.dfs.DFSClient$LeaseChecker.run(DFSClient.java:440)
     at java.lang.Thread.run(Thread.java:595)

   2006-11-14 18:47:37,339 WARN  mapred.JobInProgress - Error cleaning 
up job_0005: java.net.SocketTimeoutException: timed out waiting for 
rpc response
   2006-11-14 18:47:38,696 WARN  fs.DFSClient - Problem renewing lease 
for DFSClient_-284911018: java.net.SocketTimeoutException: timed out 
waiting for rpc response
     at org.apache.hadoop.ipc.Client.call(Client.java:312)
     at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:161)
     at org.apache.hadoop.dfs.$Proxy0.renewLease(Unknown Source)
     at org.apache.hadoop.dfs.DFSClient$LeaseChecker.run(DFSClient.java:440)
     at java.lang.Thread.run(Thread.java:595)

About 20 minutes later, we finally see the first of a series of broken pipe
exceptions in the namenode log:

   2006-11-14 19:09:54,440 WARN  ipc.Server - handler output error
   java.io.IOException: Broken pipe
     at sun.nio.ch.FileDispatcher.write0(Native Method)
     at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:29)
     at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:104)
     at sun.nio.ch.IOUtil.write(IOUtil.java:60)
     at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:302)
     at 
org.apache.hadoop.ipc.SocketChannelOutputStream.flushBuffer(SocketChannelOutputStream.java:120)
     at 
org.apache.hadoop.ipc.SocketChannelOutputStream.write(SocketChannelOutputStream.java:93)
     at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
     at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
     at java.io.DataOutputStream.flush(DataOutputStream.java:106)
     at org.apache.hadoop.ipc.Server$Handler.run(Server.java:486)

About 30 minutes later, the first of a series of closed channel exceptions
appears in the namenode log (along with an indication that the namenode may
have lost connection to all but one of its datanodes):

   2006-11-14 19:39:43,142 WARN  ipc.Server - handler output error
   java.nio.channels.ClosedChannelException
     at sun.nio.ch.SocketChannelImpl.ensureWriteOpen(SocketChannelImpl.java:125)
     at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:294)
     at 
org.apache.hadoop.ipc.SocketChannelOutputStream.flushBuffer(SocketChannelOutputStream.java:120)
     at 
org.apache.hadoop.ipc.SocketChannelOutputStream.write(SocketChannelOutputStream.java:93)
     at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
     at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
     at java.io.DataOutputStream.flush(DataOutputStream.java:106)
     at org.apache.hadoop.ipc.Server$Handler.run(Server.java:486)
   2006-11-14 19:39:43,142 WARN  fs.FSNamesystem - Replication 
requested of 3 is larger than cluster size (1). Using cluster size.

The namenode process eventually dies, though the jobtracker survives (as do
all of the datanodes and tasktrackers on the slaves).
-- 
------------------------
Chris Schneider
TransPac Software, Inc.
Schmed@TransPac.com
------------------------

From MAILER-DAEMON Wed Nov 15 18:57:08 2006
Return-Path: 
 <hadoop-dev-return-5153-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86506 invoked from network); 15 Nov 2006 18:57:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 18:57:08 -0000
Received: (qmail 28865 invoked by uid 500); 15 Nov 2006 18:57:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28841 invoked by uid 500); 15 Nov 2006 18:57:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28821 invoked by uid 99); 15 Nov 2006 18:57:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 10:57:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 10:57:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 75ED1714331
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 10:56:41 -0800 (PST)
Message-ID: <18503374.1163617001480.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 10:56:41 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-724) bin/hadoop:111 uses java directly, it
 should use JAVA_HOME
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

bin/hadoop:111 uses java directly, it should use JAVA_HOME
----------------------------------------------------------

                 Key: HADOOP-724
                 URL: http://issues.apache.org/jira/browse/HADOOP-724
             Project: Hadoop
          Issue Type: Bug
          Components: scripts
            Reporter: Sanjay Dahiya
            Priority: Minor


JAVA_PLATFORM=`CLASSPATH=${CLASSPATH} java org.apache.hadoop.util.PlatformName`

should use JAVA_HOME instead of java.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 19:18:01 2006
Return-Path: 
 <hadoop-dev-return-5154-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93981 invoked from network); 15 Nov 2006 19:18:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 19:18:01 -0000
Received: (qmail 65773 invoked by uid 500); 15 Nov 2006 19:18:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65746 invoked by uid 500); 15 Nov 2006 19:18:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65737 invoked by uid 99); 15 Nov 2006 19:18:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 11:18:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 11:17:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1C17D714327
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 11:17:39 -0800 (PST)
Message-ID: <18670623.1163618259112.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 11:17:39 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-721) jobconf.jsp shouldn't find the
 jobconf.xsl via http
In-Reply-To: <9407749.1163565997217.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-721?page=all ]

Arun C Murthy updated HADOOP-721:
---------------------------------

    Attachment: HADOOP-721_20061116.patch

Here is a straight-forward patch incorporating Owen's suggestion; using Configuration.getResource instead of http for finding jobconf.xsl.

> jobconf.jsp shouldn't find the jobconf.xsl via http
> ---------------------------------------------------
>
>                 Key: HADOOP-721
>                 URL: http://issues.apache.org/jira/browse/HADOOP-721
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.0
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-721_20061116.patch
>
>
> The jobconf.jsp gets the jobconf.xsl via http, but it is a local file. The file should be on the class path and found via findResource.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 19:18:02 2006
Return-Path: 
 <hadoop-dev-return-5155-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94032 invoked from network); 15 Nov 2006 19:18:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 19:18:02 -0000
Received: (qmail 66042 invoked by uid 500); 15 Nov 2006 19:18:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66010 invoked by uid 500); 15 Nov 2006 19:18:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66000 invoked by uid 99); 15 Nov 2006 19:18:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 11:18:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 11:18:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1AEC5714329
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 11:17:41 -0800 (PST)
Message-ID: <10571464.1163618261107.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 11:17:41 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-721) jobconf.jsp shouldn't find the
 jobconf.xsl via http
In-Reply-To: <9407749.1163565997217.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-721?page=all ]

Arun C Murthy updated HADOOP-721:
---------------------------------

    Status: Patch Available  (was: Open)

> jobconf.jsp shouldn't find the jobconf.xsl via http
> ---------------------------------------------------
>
>                 Key: HADOOP-721
>                 URL: http://issues.apache.org/jira/browse/HADOOP-721
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.0
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-721_20061116.patch
>
>
> The jobconf.jsp gets the jobconf.xsl via http, but it is a local file. The file should be on the class path and found via findResource.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 19:20:05 2006
Return-Path: 
 <hadoop-dev-return-5156-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94565 invoked from network); 15 Nov 2006 19:20:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 19:20:05 -0000
Received: (qmail 70459 invoked by uid 500); 15 Nov 2006 19:20:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70432 invoked by uid 500); 15 Nov 2006 19:20:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70423 invoked by uid 99); 15 Nov 2006 19:20:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 11:20:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 11:20:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B3E0571432B
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 11:19:42 -0800 (PST)
Message-ID: <7637481.1163618382733.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 11:19:42 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-710) block size isn't honored
In-Reply-To: <25722891.1163199277128.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-710?page=all ]

Doug Cutting updated HADOOP-710:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Milind!

> block size isn't honored
> ------------------------
>
>                 Key: HADOOP-710
>                 URL: http://issues.apache.org/jira/browse/HADOOP-710
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: small-block.patch
>
>
> When writing a buffer to an FSOutputStream using write(buffer,offset,length), the block size isn't honored when the block size is less than the buffer size.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 19:24:01 2006
Return-Path: 
 <hadoop-dev-return-5157-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95974 invoked from network); 15 Nov 2006 19:24:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 19:24:01 -0000
Received: (qmail 87849 invoked by uid 500); 15 Nov 2006 19:24:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87822 invoked by uid 500); 15 Nov 2006 19:24:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87813 invoked by uid 99); 15 Nov 2006 19:24:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 11:24:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 11:23:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 107C3714323
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 11:23:39 -0800 (PST)
Message-ID: <1843493.1163618619064.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 11:23:39 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-721) jobconf.jsp shouldn't find the
 jobconf.xsl via http
In-Reply-To: <9407749.1163565997217.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-721?page=comments#action_12450168 ] 
            
Owen O'Malley commented on HADOOP-721:
--------------------------------------

+1


> jobconf.jsp shouldn't find the jobconf.xsl via http
> ---------------------------------------------------
>
>                 Key: HADOOP-721
>                 URL: http://issues.apache.org/jira/browse/HADOOP-721
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.0
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-721_20061116.patch
>
>
> The jobconf.jsp gets the jobconf.xsl via http, but it is a local file. The file should be on the class path and found via findResource.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 19:36:05 2006
Return-Path: 
 <hadoop-dev-return-5158-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99667 invoked from network); 15 Nov 2006 19:36:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 19:36:05 -0000
Received: (qmail 26008 invoked by uid 500); 15 Nov 2006 19:36:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25978 invoked by uid 500); 15 Nov 2006 19:36:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25969 invoked by uid 99); 15 Nov 2006 19:36:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 11:36:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 11:36:03 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3279E714321
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 11:35:42 -0800 (PST)
Message-ID: <14397249.1163619342203.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 11:35:42 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-724) bin/hadoop:111 uses java directly, it
 should use JAVA_HOME
In-Reply-To: <18503374.1163617001480.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-724?page=all ]

Arun C Murthy reassigned HADOOP-724:
------------------------------------

    Assignee: Arun C Murthy

> bin/hadoop:111 uses java directly, it should use JAVA_HOME
> ----------------------------------------------------------
>
>                 Key: HADOOP-724
>                 URL: http://issues.apache.org/jira/browse/HADOOP-724
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>            Reporter: Sanjay Dahiya
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-724_20061116.patch
>
>
> JAVA_PLATFORM=`CLASSPATH=${CLASSPATH} java org.apache.hadoop.util.PlatformName`
> should use JAVA_HOME instead of java.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 19:36:10 2006
Return-Path: 
 <hadoop-dev-return-5159-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99722 invoked from network); 15 Nov 2006 19:36:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 19:36:10 -0000
Received: (qmail 26331 invoked by uid 500); 15 Nov 2006 19:36:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26305 invoked by uid 500); 15 Nov 2006 19:36:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26296 invoked by uid 99); 15 Nov 2006 19:36:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 11:36:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 11:36:09 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D930A714322
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 11:35:48 -0800 (PST)
Message-ID: <23371322.1163619348886.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 11:35:48 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-724) bin/hadoop:111 uses java directly, it
 should use JAVA_HOME
In-Reply-To: <18503374.1163617001480.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-724?page=all ]

Arun C Murthy updated HADOOP-724:
---------------------------------

    Attachment: HADOOP-724_20061116.patch

Attached patch.

> bin/hadoop:111 uses java directly, it should use JAVA_HOME
> ----------------------------------------------------------
>
>                 Key: HADOOP-724
>                 URL: http://issues.apache.org/jira/browse/HADOOP-724
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>            Reporter: Sanjay Dahiya
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-724_20061116.patch
>
>
> JAVA_PLATFORM=`CLASSPATH=${CLASSPATH} java org.apache.hadoop.util.PlatformName`
> should use JAVA_HOME instead of java.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 19:36:24 2006
Return-Path: 
 <hadoop-dev-return-5160-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99845 invoked from network); 15 Nov 2006 19:36:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 19:36:24 -0000
Received: (qmail 27174 invoked by uid 500); 15 Nov 2006 19:36:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27154 invoked by uid 500); 15 Nov 2006 19:36:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27145 invoked by uid 99); 15 Nov 2006 19:36:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 11:36:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 11:36:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3811A71432B
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 11:36:02 -0800 (PST)
Message-ID: <18655632.1163619362226.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 11:36:02 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-724) bin/hadoop:111 uses java directly, it
 should use JAVA_HOME
In-Reply-To: <18503374.1163617001480.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-724?page=all ]

Arun C Murthy updated HADOOP-724:
---------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.9.0

> bin/hadoop:111 uses java directly, it should use JAVA_HOME
> ----------------------------------------------------------
>
>                 Key: HADOOP-724
>                 URL: http://issues.apache.org/jira/browse/HADOOP-724
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>            Reporter: Sanjay Dahiya
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-724_20061116.patch
>
>
> JAVA_PLATFORM=`CLASSPATH=${CLASSPATH} java org.apache.hadoop.util.PlatformName`
> should use JAVA_HOME instead of java.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 19:56:25 2006
Return-Path: 
 <hadoop-dev-return-5161-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5032 invoked from network); 15 Nov 2006 19:56:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 19:56:25 -0000
Received: (qmail 68478 invoked by uid 500); 15 Nov 2006 19:56:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68449 invoked by uid 500); 15 Nov 2006 19:56:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68431 invoked by uid 99); 15 Nov 2006 19:56:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 11:56:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 11:56:11 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9C98F714324
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 11:55:39 -0800 (PST)
Message-ID: <1782229.1163620539638.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 11:55:39 -0800 (PST)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-723) Race condition exists in the method
 MapOutputLocation.getFile
In-Reply-To: <5078563.1163609197143.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-723?page=comments#action_12450178 ] 
            
eric baldeschwieler commented on HADOOP-723:
--------------------------------------------

You might want to use a temp file and rename strategy to make sure:

a) you only delete files you own
b) it is clear that a file was completely transfered by inspection.
c) temp files can be easily cleaned up in some conditions (restart say)


> Race condition exists in the method MapOutputLocation.getFile
> -------------------------------------------------------------
>
>                 Key: HADOOP-723
>                 URL: http://issues.apache.org/jira/browse/HADOOP-723
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>
> There seems to be a race condition in the way the Reduces copy the map output files from the Maps. If a copier is blocked in the connect method (in the beginning of the method MapOutputLocation.getFile) to a Jetty on a Map, and the MapCopyLeaseChecker detects that the copier was idle for too long, it will go ahead and issue a interrupt (read 'kill') to this thread and create a new Copier thread. However, the copier, currently blocked trying to connect to Jetty on a Map, doesn't actually get killed until the connect timeout expires and as soon as the connect comes out (with an IOException), it will delete the map output file which actually could have been (successfully) created by the new Copier thread. This leads to the Sort phase for that reducer failing with a FileNotFoundException.
> One simple way to fix this is to not delete the file if the file was not created within this getFile method.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 20:03:14 2006
Return-Path: 
 <hadoop-dev-return-5162-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7174 invoked from network); 15 Nov 2006 20:03:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 20:03:14 -0000
Received: (qmail 88954 invoked by uid 500); 15 Nov 2006 20:03:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88932 invoked by uid 500); 15 Nov 2006 20:03:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88908 invoked by uid 99); 15 Nov 2006 20:03:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 12:03:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 12:03:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D4074714329
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 12:02:41 -0800 (PST)
Message-ID: <23179881.1163620961865.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 12:02:41 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-574?page=all ]

Doug Cutting updated HADOOP-574:
--------------------------------

    Status: Open  (was: Patch Available)

Yes, please also attach the required jar files: that will save me having to find them!

At a glance, the code looks great!  It's unfortunate that one needs an account to run the unit tests.  That means we can't require the tests in the mainline test task, since we don't want to require every developer to have an S3 account.  However we can still run them as a part of the nightly task, using, e.g., my S3 account.  Or maybe we could have these tests just print a warning when the account properites are undefined, but still succeed, so the default build is not broken?

Now I need to get cracking on HADOOP-571...


> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>         Attachments: HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 20:12:02 2006
Return-Path: 
 <hadoop-dev-return-5163-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10287 invoked from network); 15 Nov 2006 20:12:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 20:12:02 -0000
Received: (qmail 15593 invoked by uid 500); 15 Nov 2006 20:12:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15556 invoked by uid 500); 15 Nov 2006 20:12:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15525 invoked by uid 99); 15 Nov 2006 20:12:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 12:12:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 12:11:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E8AAF714322
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 12:11:38 -0800 (PST)
Message-ID: <27027825.1163621498950.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 12:11:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-695) Unexpected NPE from the next method of
 StreamLineRecordReader fails map/reduce jobs
In-Reply-To: <28355572.1163021691623.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-695?page=all ]

Doug Cutting updated HADOOP-695:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Hairong!

> Unexpected NPE from the next method of StreamLineRecordReader fails map/reduce jobs
> -----------------------------------------------------------------------------------
>
>                 Key: HADOOP-695
>                 URL: http://issues.apache.org/jira/browse/HADOOP-695
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>         Attachments: NPE.patch
>
>
> For some reason that I do not have much idea, if input of a map/reduce job is gzipped, an unexpected null pointer may be returned from UTF8ByteArrayUtils.readline in the next method of StreamLineRecordReader. However the pointer is read before a null pointer check is performed. Thus a NPE may be thrown and fail the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 20:18:00 2006
Return-Path: 
 <hadoop-dev-return-5164-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12891 invoked from network); 15 Nov 2006 20:18:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 20:18:00 -0000
Received: (qmail 28664 invoked by uid 500); 15 Nov 2006 20:18:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28641 invoked by uid 500); 15 Nov 2006 20:18:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28632 invoked by uid 99); 15 Nov 2006 20:18:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 12:18:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 12:17:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D3368714321
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 12:17:38 -0800 (PST)
Message-ID: <17938695.1163621858862.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 12:17:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-721) jobconf.jsp shouldn't find the
 jobconf.xsl via http
In-Reply-To: <9407749.1163565997217.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-721?page=all ]

Doug Cutting updated HADOOP-721:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Arun!

> jobconf.jsp shouldn't find the jobconf.xsl via http
> ---------------------------------------------------
>
>                 Key: HADOOP-721
>                 URL: http://issues.apache.org/jira/browse/HADOOP-721
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.0
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-721_20061116.patch
>
>
> The jobconf.jsp gets the jobconf.xsl via http, but it is a local file. The file should be on the class path and found via findResource.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 20:20:19 2006
Return-Path: 
 <hadoop-dev-return-5165-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19358 invoked from network); 15 Nov 2006 20:20:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 20:20:19 -0000
Received: (qmail 33135 invoked by uid 500); 15 Nov 2006 20:20:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33109 invoked by uid 500); 15 Nov 2006 20:20:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33089 invoked by uid 99); 15 Nov 2006 20:20:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 12:20:24 -0800
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 12:20:08 -0800
Received: from memberfamouslx (memberfamous-lx.corp.yahoo.com [172.21.103.73])
	by mrout2-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 kAFKJcrq049222
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 12:19:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
	b=qJ0R7jd4lmldi4tLmI7Zdhzr0W8HOBTsCB5kcmAvU59YzQZMferWsYUVpu+YTn0+
From: "Yoram Arnon" <yarnon@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: [jira] Created: (HADOOP-713) dfs list operation is too expensive
Date: Wed, 15 Nov 2006 12:19:38 -0800
Message-ID: <010a01c708f3$6061b640$929015ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <418DFA54-C8A8-40B1-A80E-500C3A2BA5C2@yahoo-inc.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccI5xEOuDC9a3yCR4ayDeff111dGQAC42ig
X-Virus-Checked: Checked by ClamAV on apache.org

 I opt for displaying the size in bytes for now, since it's computed anyway,
is readily available for free, and improves the UI.
If/when we fix HADOOP-713 we can replace the computation of size with a
better value for #files.
Let's not prevent an improvement just because it might change in the future.
Yoram

> -----Original Message-----
> From: Eric Baldeschwieler [mailto:eric14@yahoo-inc.com] 
> Sent: Tuesday, November 14, 2006 7:10 PM
> To: hadoop-dev@lucene.apache.org
> Subject: Re: [jira] Created: (HADOOP-713) dfs list operation 
> is too expensive
> 
> So let's display nothing for now and revisit this once we have a  
> cleaner CRC story.
> 
> 
> On Nov 14, 2006, at 10:55 AM, Hairong Kuang wrote:
> 
> > Setting the size of a directory to be the # of files is a good  
> > idea. But the
> > problem is that dfs name node has no idea of checksum 
> files. So the  
> > number
> > of files include that of checksum files. But what's displayed at  
> > the client
> > side has filtered out the checksum files. So the # of files does  
> > not match
> > what's really displayed at the client side.
> >
> > Hairong
> >
> > -----Original Message-----
> > From: Arkady Borkovsky [mailto:arkady@yahoo-inc.com]
> > Sent: Monday, November 13, 2006 5:07 PM
> > To: hadoop-dev@lucene.apache.org
> > Subject: Re: [jira] Created: (HADOOP-713) dfs list operation is too
> > expensive
> >
> > When listing a directory, for directory entries it may be more  
> > useful to
> > display the number of files in a directory, rather than the number  
> > of bytes
> > used by all the files in the directory and its subdirectories.
> > This a subjective opinion -- comments?
> >
> > (Currently, the value displayed subdirectory is "0")
> >
> > On Nov 13, 2006, at 3:25 PM, Hairong Kuang (JIRA) wrote:
> >
> >> dfs list operation is too expensive
> >> -----------------------------------
> >>
> >>                  Key: HADOOP-713
> >>                  URL: 
> http://issues.apache.org/jira/browse/HADOOP-713
> >>              Project: Hadoop
> >>           Issue Type: Improvement
> >>           Components: dfs
> >>     Affects Versions: 0.8.0
> >>             Reporter: Hairong Kuang
> >>
> >>
> >> A list request to dfs returns an array of DFSFileInfo. A 
> DFSFileInfo
> >> of a directory contains a field called contentsLen, indicating its
> >> size  which gets computed at the namenode side by resursively going
> >> through its subdirs. At the same time, the whole dfs directory  
> >> tree is
> >> locked.
> >>
> >> The list operation is used a lot by DFSClient for listing a  
> >> directory,
> >> getting a file's size and # of replicas, and getting the 
> size of dfs.
> >> Only the last operation needs the field contentsLen to be computed.
> >>
> >> To reduce its cost, we can add a flag to the list request.  
> >> ContentsLen
> >> is computed If the flag is set. By default, the flag is false.
> >>
> >> --
> >> This message is automatically generated by JIRA.
> >> -
> >> If you think it was sent incorrectly contact one of the
> >> administrators:
> >> http://issues.apache.org/jira/secure/Administrators.jspa
> >> -
> >> For more information on JIRA, see:
> >> http://www.atlassian.com/software/jira
> >>
> >>
> >
> >
> 
> 


From MAILER-DAEMON Wed Nov 15 20:22:42 2006
Return-Path: 
 <hadoop-dev-return-5166-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21821 invoked from network); 15 Nov 2006 20:22:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 20:22:42 -0000
Received: (qmail 41528 invoked by uid 500); 15 Nov 2006 20:22:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41505 invoked by uid 500); 15 Nov 2006 20:22:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41496 invoked by uid 99); 15 Nov 2006 20:22:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 12:22:52 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 12:22:38 -0800
Received: from [207.126.231.236] (eric14-mac.corp.yahoo.com [207.126.231.236])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kAFKLrmh022759
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO);
	Wed, 15 Nov 2006 12:21:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=in-reply-to:references:mime-version:content-type:message-id:cc:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=EUGv6sSchXQK8BLhqfl9J5HN9mviMLHv+DqX9/fNMD7l44rRAaZxIaxlllKwbsZw
In-Reply-To: <p06210205c18107b7e6be@[192.168.50.163]>
References: <p06210205c18107b7e6be@[192.168.50.163]>
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <53C43701-5971-41F2-9076-88464B9F2815@yahoo-inc.com>
Cc: Krugle Development <Dev@IMail.Krugle.net>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: DFS/RPC problems
Date: Wed, 15 Nov 2006 12:21:55 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

How many files are you creating in HDFS?

I wonder if the messaging package may simply be swamping the namenode  
with many, many small files?  It really is not designed to deal with  
that use case.  How big are your checkpoint files?

On Nov 15, 2006, at 10:52 AM, Chris Schneider wrote:

> Fellow Hadoop coders,
>
> I'm getting tragic DFS/RPC problems running Nutch 0.8+ atop Hadoop  
> 0.5.1+ that seem similar to problems others have been reporting  
> (e.g., HADOOP-707). My great hope was that the HADOOP-563 patch  
> would resolve them, and it may well have improved things somewhat.  
> However, I'm still unable to complete the crawl I've been  
> attempting even after rolling in this patch. A few notes about my  
> setup that may be relevant:
>
> 1) I'm running a crawl through a proxy server, and I've modified  
> Nutch so that it skips the server delay whenever it gets a hit in  
> the proxy cache. Since I've been attempting the same crawl over and  
> over again, the first part of it may run so fast that it taxes the  
> DFS and RPC in a way that exposes fundamental problems.
>
> 2) I'm injecting 26M URLs into a brand new DB and then trying to  
> fetch them all at once. I've tuned the fetcher.threads.fetch to 500  
> in order to avoid fatal memory swapping on my cluster of 10 slaves  
> (2 tasktrackers per slave).
>
> 3) I've been using hadoop job -kill to stop the fetch job when I  
> notice things not going the way I want (not necessarily  
> catastrophic problems). I wonder whether this (in combination with  
> the heavy loading I've applied to hadoop) may result in my DFS  
> becoming "unusable".
>
> 4) Once my DFS becomes "unusable", I can stop-all.sh/start-all.sh,  
> reboot my systems, etc., but nothing will give me back a cluster I  
> can reliably use to do even relatively simple things like hadoop  
> dfs -du. The start-all.sh script takes a very long time to execute,  
> but hadoop eventually does come up, including its web server. The  
> hadoop fsck / command (unless it dies do to an RPC problem) also  
> reports that my DFS is healthy, though things are very sick indeed.  
> Even simple DFS commands either execute slowly or die with RPC  
> problems (SocketTimeoutException). Crawling at this point may also  
> get started OK, though the fetch will eventually die.
>
> 5) Part of the modifications we've made to Nutch are a message  
> queue subsystem developed by Andrzej. Since this doesn't use NIO to  
> do any of its communication, I doubt that it is interfering with  
> hadoop's RPC. However, it does a fair amount of writing to the DFS  
> itself, and many of the error messages in the logs are associated  
> with these requests.
>
> 6) To resolve the "unusable" DFS problem, I'm forced to use the  
> local FS to delete all of the DFS contents (on both master and  
> slaves), and then I tell the namenode to format the DFS. I also  
> wonder whether this operation may leave things in some kind of  
> strange state, though I can't imagine what might be the problem.
>
> After resorting to step #6 above yesterday, I performed another  
> test and conducted a fairly detailed analysis of the log files. I  
> injected my 26M URLs into a new crawldb, generated a fetch list  
> (without specifying any topN) and started fetching it. After over  
> an hour of fetching, I noticed that I wanted to do a little more  
> logging on the Nutch side, so I killed the fetch job, did a stop- 
> all.sh, deployed a modified version of Nutch, did a start-all.sh,  
> and tried my crawl again from scratch (i.e., I injected my 26M URLs  
> into a brand new crawldb, etc.) I let this run until the fetch job  
> died, then mined the logs for the following information.
>
> Any help our insight you could provide would be greatly appreciated.
>
> Best Regards,
>
> - Chris
>
> ---------------------------------------------------------------------- 
> ---------------------
> I didn't find anything unusual in the stdout for start-all.sh.
>
> The namenode may have had trouble removing files immediately after  
> it was first
> launched, but this is probably just housekeeping (making sure that  
> it deletes
> any files that are sometimes left over from previous runs):
>
>   2006-11-14 11:13:23,276 WARN  dfs.StateChange - DIR*  
> FSDirectory.unprotectedDelete: failed to remove /tmp/hadoop/ 
> mapred/.system.crc because it does not exist
>   2006-11-14 11:13:23,280 WARN  dfs.StateChange - DIR*  
> FSDirectory.unprotectedDelete: failed to remove /tmp/hadoop/mapred/ 
> system because it does not exist
>
> Immediately after the injection for the first crawl began
>   2006-11-14 11:45:45,141 INFO  crawl.Injector - Injector: starting
> there is a significant(?) DFS block issue in the s1 datanode's log:
>
>   2006-11-14 11:45:49,021 WARN  dfs.DataNode - DataXCeiver
>   java.io.IOException: Block blk_452376043108156205 has already  
> been started (though not completed), and thus cannot be created.
>           at org.apache.hadoop.dfs.FSDataset.writeToBlock 
> (FSDataset.java:298)
>           at org.apache.hadoop.dfs.DataNode$DataXceiver.writeBlock 
> (DataNode.java:663)
>           at org.apache.hadoop.dfs.DataNode$DataXceiver.run 
> (DataNode.java:507)
>           at java.lang.Thread.run(Thread.java:595)
>
> This problem is reflected in the requesting (s7) datanode's log as  
> well and
> apparently results in its connection to the namenode getting reset(?):
>
>   2006-11-14 11:45:49,010 WARN  dfs.DataNode - Failed to transfer  
> blk_452376043108156205 to s1-crawlera/10.10.16.101:50010
>   java.net.SocketException: Connection reset
>           at java.net.SocketOutputStream.socketWrite 
> (SocketOutputStream.java:96)
>           at java.net.SocketOutputStream.write 
> (SocketOutputStream.java:136)
>           at java.io.BufferedOutputStream.flushBuffer 
> (BufferedOutputStream.java:65)
>           at java.io.BufferedOutputStream.write 
> (BufferedOutputStream.java:109)
>           at java.io.DataOutputStream.write(DataOutputStream.java:90)
>           at org.apache.hadoop.dfs.DataNode$DataTransfer.run 
> (DataNode.java:912)
>           at java.lang.Thread.run(Thread.java:595)
>
> (There are three of these events in s7's datanode log during the  
> injection,
> generation and fetching, which seem to be correlated with some of  
> the message
> queue subsystem problems mentioned below.)
>
> As the injection for the first crawl completed
>   2006-11-14 12:06:13,613 INFO  crawl.Injector - Injector: done
> there are a couple of unimportant(?) messages that I can attribute  
> to a brand
> new crawldb:
>
>   2006-11-14 12:06:13,603 WARN  dfs.StateChange - DIR*  
> FSDirectory.unprotectedDelete: failed to remove /user/crawler/ 
> crawl-20061114114341/crawldb/.old.crc because it does not exist
>   2006-11-14 12:06:13,603 WARN  dfs.StateChange - DIR*  
> FSDirectory.unprotectedDelete: failed to remove /user/crawler/ 
> crawl-20061114114341/crawldb/old because it does not exist
>   2006-11-14 12:06:13,604 WARN  dfs.StateChange - DIR*  
> FSDirectory.unprotectedRenameTo: failed to rename /user/crawler/ 
> crawl-20061114114341/crawldb/current to /user/crawler/ 
> crawl-20061114114341/crawldb/old because source does not exist
>   2006-11-14 12:06:13,607 WARN  dfs.StateChange - DIR*  
> FSDirectory.unprotectedDelete: failed to remove /user/crawler/ 
> crawl-20061114114341/crawldb/.old.crc because it does not exist
>   2006-11-14 12:06:13,608 WARN  dfs.StateChange - DIR*  
> FSDirectory.unprotectedDelete: failed to remove /user/crawler/ 
> crawl-20061114114341/crawldb/old because it does not exist
>
> Once the fetcher job got going
>   2006-11-14 12:21:30,654 INFO  fetcher.Fetcher - Fetcher:  
> segment: /user/crawler/crawl-20061114114341/segments/20061114120615
> Andrzej's message queue subsystem apparently had tons of trouble  
> creating
> various files, with messages getting spit out every minute or so:
>
>   2006-11-14 12:21:54,827 WARN  dfs.StateChange - DIR*  
> NameSystem.startFile: failed to create file /mq/alerts/fetcher/. 
> 1163535714813.s7-crawlera.crc for DFSClient_task_0005_m_000010_0 on  
> client s7-crawlera because pendingCreates is non-null.
>   ...
>   2006-11-14 13:10:50,457 WARN  dfs.StateChange - DIR*  
> NameSystem.startFile: failed to create file /mq/alerts/fetcher/. 
> 1163538650385.s7-crawlera.crc for DFSClient_task_0005_m_000019_0 on  
> client s7-crawlera because pendingCreates is non-null.
>
> These may be correlated with entries in the datanode logs:
>
>   2006-11-14 13:10:46,387 WARN  dfs.DataNode - DataXCeiver
>   java.io.IOException: Block blk_-8970705341808748626 is valid, and  
> cannot be written to.
>           at org.apache.hadoop.dfs.FSDataset.writeToBlock 
> (FSDataset.java:285)
>           at org.apache.hadoop.dfs.DataNode$DataXceiver.writeBlock 
> (DataNode.java:663)
>           at org.apache.hadoop.dfs.DataNode$DataXceiver.run 
> (DataNode.java:507)
>           at java.lang.Thread.run(Thread.java:595)
>
> The namenode also noticed a few redundant addStoredBlock requests:
>
>   2006-11-14 13:10:56,103 WARN  dfs.StateChange - BLOCK*  
> NameSystem.addStoredBlock: Redundant addStoredBlock request  
> received for blk_-4818305081009377296 on s10-crawlera:50010
>
> But I *don't* find anything in the datanode logs mentioning these  
> blocks.
>
> Finally (perhaps in response to me killing this first fetch job?),  
> we see our
> first ClosedChannelException in the namenode log:
>
>   2006-11-14 13:40:44,634 WARN  ipc.Server - handler output error
>   java.nio.channels.ClosedChannelException
>     at sun.nio.ch.SocketChannelImpl.ensureWriteOpen 
> (SocketChannelImpl.java:125)
>     at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:294)
>     at org.apache.hadoop.ipc.SocketChannelOutputStream.flushBuffer 
> (SocketChannelOutputStream.java:120)
>     at org.apache.hadoop.ipc.SocketChannelOutputStream.write 
> (SocketChannelOutputStream.java:93)
>     at java.io.BufferedOutputStream.flushBuffer 
> (BufferedOutputStream.java:65)
>     at java.io.BufferedOutputStream.flush(BufferedOutputStream.java: 
> 123)
>     at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>     at org.apache.hadoop.ipc.Server$Handler.run(Server.java:486)
>
> This is associated with "unknown opcode" messages in most of the  
> datanode logs:
>
>   s3-crawlera.prod.krugle.net: 2006-11-14 13:40:43,678 WARN  
> dfs.DataNode - DataXCeiver
>   s3-crawlera.prod.krugle.net: java.io.IOException: Unknown opcode  
> for incoming data stream
>   s3-crawlera.prod.krugle.net:    at org.apache.hadoop.dfs.DataNode 
> $DataXceiver.run(DataNode.java:515)
>   s3-crawlera.prod.krugle.net:    at java.lang.Thread.run 
> (Thread.java:595)
>
>
> ---------------------------------------------------------------------- 
> ----------
> Here I did a stop-all.sh, deployed a version of nutch with a bit  
> more logging,
> and then did a start-all.sh
> ---------------------------------------------------------------------- 
> ----------
>
>
> The jobtracker log shows that it was apparently unable to connect  
> to the
> namenode just after it gets launched the second time. The  
> connection error
> repeats over and over again, but eventually we get a few messages  
> about the
> web server starting up that may indicate that the jobtracker was  
> finally able
> to connect to the namenode(?)
>
>   2006-11-14 13:59:52,321 WARN  mapred.JobTracker - Starting tracker
>   java.net.ConnectException: Connection refused
>     at java.net.PlainSocketImpl.socketConnect(Native Method)
>     at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
>     at java.net.PlainSocketImpl.connectToAddress 
> (PlainSocketImpl.java:195)
>     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
>     at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
>     at java.net.Socket.connect(Socket.java:507)
>     at java.net.Socket.connect(Socket.java:457)
>     at java.net.Socket.<init>(Socket.java:365)
>     at java.net.Socket.<init>(Socket.java:207)
>     at org.apache.hadoop.ipc.Client$Connection.<init>(Client.java:113)
>     at org.apache.hadoop.ipc.Client.getConnection(Client.java:359)
>     at org.apache.hadoop.ipc.Client.call(Client.java:297)
>     at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:161)
>     at org.apache.hadoop.dfs.$Proxy0.getProtocolVersion(Unknown  
> Source)
>     at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:245)
>     at org.apache.hadoop.dfs.DFSClient.<init>(DFSClient.java:103)
>     at org.apache.hadoop.dfs.DistributedFileSystem.<init> 
> (DistributedFileSystem.java:47)
>     at org.apache.hadoop.fs.FileSystem.getNamed(FileSystem.java:101)
>     at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:86)
>     at org.apache.hadoop.mapred.JobTracker.<init>(JobTracker.java:486)
>     at org.apache.hadoop.mapred.JobTracker.startTracker 
> (JobTracker.java:68)
>     at org.apache.hadoop.mapred.JobTracker.main(JobTracker.java:1200)
>   ...
>   2006-11-14 14:00:18,352 WARN  mapred.JobTracker - Starting tracker
>   java.net.ConnectException: Connection refused
>     at java.net.PlainSocketImpl.socketConnect(Native Method)
>     at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
>     at java.net.PlainSocketImpl.connectToAddress 
> (PlainSocketImpl.java:195)
>     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
>     at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
>     at java.net.Socket.connect(Socket.java:507)
>     at java.net.Socket.connect(Socket.java:457)
>     at java.net.Socket.<init>(Socket.java:365)
>     at java.net.Socket.<init>(Socket.java:207)
>     at org.apache.hadoop.ipc.Client$Connection.<init>(Client.java:113)
>     at org.apache.hadoop.ipc.Client.getConnection(Client.java:359)
>     at org.apache.hadoop.ipc.Client.call(Client.java:297)
>     at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:161)
>     at org.apache.hadoop.dfs.$Proxy0.getProtocolVersion(Unknown  
> Source)
>     at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:245)
>     at org.apache.hadoop.dfs.DFSClient.<init>(DFSClient.java:103)
>     at org.apache.hadoop.dfs.DistributedFileSystem.<init> 
> (DistributedFileSystem.java:47)
>     at org.apache.hadoop.fs.FileSystem.getNamed(FileSystem.java:101)
>     at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:86)
>     at org.apache.hadoop.mapred.JobTracker.<init>(JobTracker.java:486)
>     at org.apache.hadoop.mapred.JobTracker.startTracker 
> (JobTracker.java:68)
>     at org.apache.hadoop.mapred.JobTracker.main(JobTracker.java:1200)
>   2006-11-14 14:00:19,516 INFO  util.Credential - Checking Resource  
> aliases
>   2006-11-14 14:00:19,534 INFO  http.HttpServer - Version Jetty/5.1.4
>   2006-11-14 14:00:20,423 INFO  util.Container - Started  
> org.mortbay.jetty.servlet.WebApplicationHandler@69267649
>   2006-11-14 14:00:20,492 INFO  util.Container - Started  
> WebApplicationContext[/,/]
>   2006-11-14 14:00:20,493 INFO  util.Container - Started HttpContext 
> [/logs,/logs]
>   2006-11-14 14:00:20,493 INFO  util.Container - Started HttpContext 
> [/static,/static]
>   2006-11-14 14:00:20,496 INFO  http.SocketListener - Started  
> SocketListener on 0.0.0.0:50030
>   2006-11-14 14:00:20,496 INFO  util.Container - Started  
> org.mortbay.jetty.Server@b6e39f
>
> Once the second crawl gets started
>   2006-11-14 14:02:03,392 INFO  crawl.Injector - Injector: starting
> the same issues with the new crawldb, the message queue, and  
> redundant blocks
> mentioned above appear again in the namenode log (not shown).
>
> The DFS/RPC problems finally begin to surface in the jobtracker log  
> (and these
> bubble up to tool output) several hours into the second crawl:
>
>   2006-11-14 17:07:27,539 WARN  fs.DFSClient - Problem renewing  
> lease for DFSClient_-284911018: java.net.SocketTimeoutException:  
> timed out waiting for rpc response
>     at org.apache.hadoop.ipc.Client.call(Client.java:312)
>     at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:161)
>     at org.apache.hadoop.dfs.$Proxy0.renewLease(Unknown Source)
>     at org.apache.hadoop.dfs.DFSClient$LeaseChecker.run 
> (DFSClient.java:440)
>     at java.lang.Thread.run(Thread.java:595)
>
> Nothing special appears during this same timeframe in the namenode  
> log (just
> the continuing message queue and redundant blocks errors).
>
> Finally, there is an indication in the jobtracker log (embedded in the
> continuing DFS/RPC problems) that the fetch job has died and is  
> being garbage
> collected:
>
>   2006-11-14 18:46:37,681 WARN  fs.DFSClient - Problem renewing  
> lease for DFSClient_-284911018: java.net.SocketTimeoutException:  
> timed out waiting for rpc response
>     at org.apache.hadoop.ipc.Client.call(Client.java:312)
>     at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:161)
>     at org.apache.hadoop.dfs.$Proxy0.renewLease(Unknown Source)
>     at org.apache.hadoop.dfs.DFSClient$LeaseChecker.run 
> (DFSClient.java:440)
>     at java.lang.Thread.run(Thread.java:595)
>
>   2006-11-14 18:47:37,339 WARN  mapred.JobInProgress - Error  
> cleaning up job_0005: java.net.SocketTimeoutException: timed out  
> waiting for rpc response
>   2006-11-14 18:47:38,696 WARN  fs.DFSClient - Problem renewing  
> lease for DFSClient_-284911018: java.net.SocketTimeoutException:  
> timed out waiting for rpc response
>     at org.apache.hadoop.ipc.Client.call(Client.java:312)
>     at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:161)
>     at org.apache.hadoop.dfs.$Proxy0.renewLease(Unknown Source)
>     at org.apache.hadoop.dfs.DFSClient$LeaseChecker.run 
> (DFSClient.java:440)
>     at java.lang.Thread.run(Thread.java:595)
>
> About 20 minutes later, we finally see the first of a series of  
> broken pipe
> exceptions in the namenode log:
>
>   2006-11-14 19:09:54,440 WARN  ipc.Server - handler output error
>   java.io.IOException: Broken pipe
>     at sun.nio.ch.FileDispatcher.write0(Native Method)
>     at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:29)
>     at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:104)
>     at sun.nio.ch.IOUtil.write(IOUtil.java:60)
>     at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:302)
>     at org.apache.hadoop.ipc.SocketChannelOutputStream.flushBuffer 
> (SocketChannelOutputStream.java:120)
>     at org.apache.hadoop.ipc.SocketChannelOutputStream.write 
> (SocketChannelOutputStream.java:93)
>     at java.io.BufferedOutputStream.flushBuffer 
> (BufferedOutputStream.java:65)
>     at java.io.BufferedOutputStream.flush(BufferedOutputStream.java: 
> 123)
>     at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>     at org.apache.hadoop.ipc.Server$Handler.run(Server.java:486)
>
> About 30 minutes later, the first of a series of closed channel  
> exceptions
> appears in the namenode log (along with an indication that the  
> namenode may
> have lost connection to all but one of its datanodes):
>
>   2006-11-14 19:39:43,142 WARN  ipc.Server - handler output error
>   java.nio.channels.ClosedChannelException
>     at sun.nio.ch.SocketChannelImpl.ensureWriteOpen 
> (SocketChannelImpl.java:125)
>     at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:294)
>     at org.apache.hadoop.ipc.SocketChannelOutputStream.flushBuffer 
> (SocketChannelOutputStream.java:120)
>     at org.apache.hadoop.ipc.SocketChannelOutputStream.write 
> (SocketChannelOutputStream.java:93)
>     at java.io.BufferedOutputStream.flushBuffer 
> (BufferedOutputStream.java:65)
>     at java.io.BufferedOutputStream.flush(BufferedOutputStream.java: 
> 123)
>     at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>     at org.apache.hadoop.ipc.Server$Handler.run(Server.java:486)
>   2006-11-14 19:39:43,142 WARN  fs.FSNamesystem - Replication  
> requested of 3 is larger than cluster size (1). Using cluster size.
>
> The namenode process eventually dies, though the jobtracker  
> survives (as do
> all of the datanodes and tasktrackers on the slaves).
> -- 
> ------------------------
> Chris Schneider
> TransPac Software, Inc.
> Schmed@TransPac.com
> ------------------------


From MAILER-DAEMON Wed Nov 15 20:24:11 2006
Return-Path: 
 <hadoop-dev-return-5167-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22292 invoked from network); 15 Nov 2006 20:24:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 20:24:11 -0000
Received: (qmail 48281 invoked by uid 500); 15 Nov 2006 20:24:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48256 invoked by uid 500); 15 Nov 2006 20:24:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48201 invoked by uid 99); 15 Nov 2006 20:24:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 12:24:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 12:24:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 82D79714324
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 12:23:41 -0800 (PST)
Message-ID: <12533119.1163622221533.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 12:23:41 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-724) bin/hadoop:111 uses java directly,
 it should use JAVA_HOME
In-Reply-To: <18503374.1163617001480.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-724?page=comments#action_12450187 ] 
            
Doug Cutting commented on HADOOP-724:
-------------------------------------

Should we avoid starting a JVM at all if neither lib/native nor build/native exist?

> bin/hadoop:111 uses java directly, it should use JAVA_HOME
> ----------------------------------------------------------
>
>                 Key: HADOOP-724
>                 URL: http://issues.apache.org/jira/browse/HADOOP-724
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>            Reporter: Sanjay Dahiya
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-724_20061116.patch
>
>
> JAVA_PLATFORM=`CLASSPATH=${CLASSPATH} java org.apache.hadoop.util.PlatformName`
> should use JAVA_HOME instead of java.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 20:31:02 2006
Return-Path: 
 <hadoop-dev-return-5168-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24019 invoked from network); 15 Nov 2006 20:31:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 20:31:02 -0000
Received: (qmail 66403 invoked by uid 500); 15 Nov 2006 20:31:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66383 invoked by uid 500); 15 Nov 2006 20:31:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66374 invoked by uid 99); 15 Nov 2006 20:31:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 12:31:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 12:31:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 836E6714323
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 12:30:40 -0800 (PST)
Message-ID: <26646406.1163622640535.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 12:30:40 -0800 (PST)
From: "Tom White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-574?page=all ]

Tom White updated HADOOP-574:
-----------------------------

    Attachment: dependencies.zip

Attached is a zip with the required dependencies.

Regarding the unit testing, it is a pity that we require an account (and it costs money every time you run them!). However, I plan to write a stub implementation of FileSystemStore that can go in the mainline tests. We will still need a nightly test against the real S3 though. Or perhaps we could use ParkPlace (an S3 clone written in Ruby), although I don't know how faithful it is to Amazon... 

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>         Attachments: dependencies.zip, HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 21:11:49 2006
Return-Path: 
 <hadoop-dev-return-5169-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40663 invoked from network); 15 Nov 2006 21:11:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 21:11:49 -0000
Received: (qmail 67815 invoked by uid 500); 15 Nov 2006 21:11:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67786 invoked by uid 500); 15 Nov 2006 21:11:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67774 invoked by uid 99); 15 Nov 2006 21:11:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 13:11:58 -0800
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 13:11:44 -0800
Received: from [207.126.231.236] (eric14-mac.corp.yahoo.com [207.126.231.236])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kAFLBL2w025728
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 13:11:21 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=xskyyZyi3rL96wKFnrcbZvxIAjk7ckLVgdQ3IrKERN8ba7PXL3zBZMp+4fCIy0pM
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <010a01c708f3$6061b640$929015ac@ds.corp.yahoo.com>
References: <010a01c708f3$6061b640$929015ac@ds.corp.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <10ADFE58-C842-4722-8EF9-18A01D18C80B@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Created: (HADOOP-713) dfs list operation is too expensive
Date: Wed, 15 Nov 2006 13:11:23 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

It is not free.  As I understand it, we are recursively walking the  
namespace tree with every ls to get this.

This is not a scalable design.  Even posix doesn't do this!

This is a performance problem that will only get worse.  I suggest  
removing this performance mistake and documenting the existence of  
dfs -du, which is a rather familiar solution to most users.

On Nov 15, 2006, at 12:19 PM, Yoram Arnon wrote:

>  I opt for displaying the size in bytes for now, since it's  
> computed anyway,
> is readily available for free, and improves the UI.
> If/when we fix HADOOP-713 we can replace the computation of size  
> with a
> better value for #files.
> Let's not prevent an improvement just because it might change in  
> the future.
> Yoram
>
>> -----Original Message-----
>> From: Eric Baldeschwieler [mailto:eric14@yahoo-inc.com]
>> Sent: Tuesday, November 14, 2006 7:10 PM
>> To: hadoop-dev@lucene.apache.org
>> Subject: Re: [jira] Created: (HADOOP-713) dfs list operation
>> is too expensive
>>
>> So let's display nothing for now and revisit this once we have a
>> cleaner CRC story.
>>
>>
>> On Nov 14, 2006, at 10:55 AM, Hairong Kuang wrote:
>>
>>> Setting the size of a directory to be the # of files is a good
>>> idea. But the
>>> problem is that dfs name node has no idea of checksum
>> files. So the
>>> number
>>> of files include that of checksum files. But what's displayed at
>>> the client
>>> side has filtered out the checksum files. So the # of files does
>>> not match
>>> what's really displayed at the client side.
>>>
>>> Hairong
>>>
>>> -----Original Message-----
>>> From: Arkady Borkovsky [mailto:arkady@yahoo-inc.com]
>>> Sent: Monday, November 13, 2006 5:07 PM
>>> To: hadoop-dev@lucene.apache.org
>>> Subject: Re: [jira] Created: (HADOOP-713) dfs list operation is too
>>> expensive
>>>
>>> When listing a directory, for directory entries it may be more
>>> useful to
>>> display the number of files in a directory, rather than the number
>>> of bytes
>>> used by all the files in the directory and its subdirectories.
>>> This a subjective opinion -- comments?
>>>
>>> (Currently, the value displayed subdirectory is "0")
>>>
>>> On Nov 13, 2006, at 3:25 PM, Hairong Kuang (JIRA) wrote:
>>>
>>>> dfs list operation is too expensive
>>>> -----------------------------------
>>>>
>>>>                  Key: HADOOP-713
>>>>                  URL:
>> http://issues.apache.org/jira/browse/HADOOP-713
>>>>              Project: Hadoop
>>>>           Issue Type: Improvement
>>>>           Components: dfs
>>>>     Affects Versions: 0.8.0
>>>>             Reporter: Hairong Kuang
>>>>
>>>>
>>>> A list request to dfs returns an array of DFSFileInfo. A
>> DFSFileInfo
>>>> of a directory contains a field called contentsLen, indicating its
>>>> size  which gets computed at the namenode side by resursively going
>>>> through its subdirs. At the same time, the whole dfs directory
>>>> tree is
>>>> locked.
>>>>
>>>> The list operation is used a lot by DFSClient for listing a
>>>> directory,
>>>> getting a file's size and # of replicas, and getting the
>> size of dfs.
>>>> Only the last operation needs the field contentsLen to be computed.
>>>>
>>>> To reduce its cost, we can add a flag to the list request.
>>>> ContentsLen
>>>> is computed If the flag is set. By default, the flag is false.
>>>>
>>>> --
>>>> This message is automatically generated by JIRA.
>>>> -
>>>> If you think it was sent incorrectly contact one of the
>>>> administrators:
>>>> http://issues.apache.org/jira/secure/Administrators.jspa
>>>> -
>>>> For more information on JIRA, see:
>>>> http://www.atlassian.com/software/jira
>>>>
>>>>
>>>
>>>
>>
>>
>


From MAILER-DAEMON Wed Nov 15 21:39:28 2006
Return-Path: 
 <hadoop-dev-return-5170-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57022 invoked from network); 15 Nov 2006 21:39:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 21:39:28 -0000
Received: (qmail 33553 invoked by uid 500); 15 Nov 2006 21:39:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33521 invoked by uid 500); 15 Nov 2006 21:39:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33512 invoked by uid 99); 15 Nov 2006 21:39:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 13:39:37 -0800
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.145.48.34] (HELO mail-relay1.yahoo.com) (216.145.48.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 13:39:24 -0800
Received: from KEPTSHOULDLX (keptshould-lx.corp.yahoo.com [10.72.114.54])
	by mail-relay1.yahoo.com (8.13.8/8.13.6/mr1) with ESMTP id kAFLd2a6006076
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 13:39:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
	b=tPQNJa/3VvXTRjlxc4JTVnPdrjJiEJ7vxx7a2V5ZSXmW+0pZ1sJlAqUpCt9pdiae
From: "Hairong Kuang" <hairong@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: [jira] Created: (HADOOP-713) dfs list operation is too expensive
Date: Wed, 15 Nov 2006 13:39:02 -0800
Message-ID: <002701c708fe$77c2d0c0$d09215ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <10ADFE58-C842-4722-8EF9-18A01D18C80B@yahoo-inc.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccI+qqTijK17H10Q72sXTVK2knjEAAA239g
X-Virus-Checked: Checked by ClamAV on apache.org

"Dfs -du" is implemented using list requests. So I propose that we support
two types of list: one computing subtree size and one not.

Hairong

-----Original Message-----
From: Eric Baldeschwieler [mailto:eric14@yahoo-inc.com] 
Sent: Wednesday, November 15, 2006 1:11 PM
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Created: (HADOOP-713) dfs list operation is too
expensive

It is not free.  As I understand it, we are recursively walking the
namespace tree with every ls to get this.

This is not a scalable design.  Even posix doesn't do this!

This is a performance problem that will only get worse.  I suggest removing
this performance mistake and documenting the existence of dfs -du, which is
a rather familiar solution to most users.

On Nov 15, 2006, at 12:19 PM, Yoram Arnon wrote:

>  I opt for displaying the size in bytes for now, since it's computed 
> anyway, is readily available for free, and improves the UI.
> If/when we fix HADOOP-713 we can replace the computation of size with 
> a better value for #files.
> Let's not prevent an improvement just because it might change in the 
> future.
> Yoram
>
>> -----Original Message-----
>> From: Eric Baldeschwieler [mailto:eric14@yahoo-inc.com]
>> Sent: Tuesday, November 14, 2006 7:10 PM
>> To: hadoop-dev@lucene.apache.org
>> Subject: Re: [jira] Created: (HADOOP-713) dfs list operation is too 
>> expensive
>>
>> So let's display nothing for now and revisit this once we have a 
>> cleaner CRC story.
>>
>>
>> On Nov 14, 2006, at 10:55 AM, Hairong Kuang wrote:
>>
>>> Setting the size of a directory to be the # of files is a good idea. 
>>> But the problem is that dfs name node has no idea of checksum
>> files. So the
>>> number
>>> of files include that of checksum files. But what's displayed at the 
>>> client side has filtered out the checksum files. So the # of files 
>>> does not match what's really displayed at the client side.
>>>
>>> Hairong
>>>
>>> -----Original Message-----
>>> From: Arkady Borkovsky [mailto:arkady@yahoo-inc.com]
>>> Sent: Monday, November 13, 2006 5:07 PM
>>> To: hadoop-dev@lucene.apache.org
>>> Subject: Re: [jira] Created: (HADOOP-713) dfs list operation is too 
>>> expensive
>>>
>>> When listing a directory, for directory entries it may be more 
>>> useful to display the number of files in a directory, rather than 
>>> the number of bytes used by all the files in the directory and its 
>>> subdirectories.
>>> This a subjective opinion -- comments?
>>>
>>> (Currently, the value displayed subdirectory is "0")
>>>
>>> On Nov 13, 2006, at 3:25 PM, Hairong Kuang (JIRA) wrote:
>>>
>>>> dfs list operation is too expensive
>>>> -----------------------------------
>>>>
>>>>                  Key: HADOOP-713
>>>>                  URL:
>> http://issues.apache.org/jira/browse/HADOOP-713
>>>>              Project: Hadoop
>>>>           Issue Type: Improvement
>>>>           Components: dfs
>>>>     Affects Versions: 0.8.0
>>>>             Reporter: Hairong Kuang
>>>>
>>>>
>>>> A list request to dfs returns an array of DFSFileInfo. A
>> DFSFileInfo
>>>> of a directory contains a field called contentsLen, indicating its 
>>>> size  which gets computed at the namenode side by resursively going 
>>>> through its subdirs. At the same time, the whole dfs directory tree 
>>>> is locked.
>>>>
>>>> The list operation is used a lot by DFSClient for listing a 
>>>> directory, getting a file's size and # of replicas, and getting the
>> size of dfs.
>>>> Only the last operation needs the field contentsLen to be computed.
>>>>
>>>> To reduce its cost, we can add a flag to the list request.
>>>> ContentsLen
>>>> is computed If the flag is set. By default, the flag is false.
>>>>
>>>> --
>>>> This message is automatically generated by JIRA.
>>>> -
>>>> If you think it was sent incorrectly contact one of the
>>>> administrators:
>>>> http://issues.apache.org/jira/secure/Administrators.jspa
>>>> -
>>>> For more information on JIRA, see:
>>>> http://www.atlassian.com/software/jira
>>>>
>>>>
>>>
>>>
>>
>>
>



From MAILER-DAEMON Wed Nov 15 21:48:05 2006
Return-Path: 
 <hadoop-dev-return-5171-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60175 invoked from network); 15 Nov 2006 21:48:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 21:48:05 -0000
Received: (qmail 48473 invoked by uid 500); 15 Nov 2006 21:48:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48441 invoked by uid 500); 15 Nov 2006 21:48:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48432 invoked by uid 99); 15 Nov 2006 21:48:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 13:48:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 13:48:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1AC9E714323
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 13:47:42 -0800 (PST)
Message-ID: <14682399.1163627262105.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 13:47:42 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Status: Patch Available  (was: Open)

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, Hadoop-76_2.patch, Hadoop-76_3.patch, Hadoop-76_4.patch, Hadoop-76_5.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 22:06:51 2006
Return-Path: 
 <hadoop-dev-return-5172-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70813 invoked from network); 15 Nov 2006 22:06:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 22:06:51 -0000
Received: (qmail 83817 invoked by uid 500); 15 Nov 2006 22:07:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83656 invoked by uid 500); 15 Nov 2006 22:07:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83647 invoked by uid 99); 15 Nov 2006 22:07:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 14:07:00 -0800
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 14:06:47 -0800
Received: from memberfamouslx (memberfamous-lx.corp.yahoo.com [172.21.103.73])
	by mrout2-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 kAFM6Daj066754
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 14:06:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
	b=KKuUCQUB6R8DCD9hPRw/7h1T7cLLil01FXW3HZZdFgPxyFYAJZ7ANNrRGnbODwHM
From: "Yoram Arnon" <yarnon@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: [jira] Created: (HADOOP-713) dfs list operation is too expensive
Date: Wed, 15 Nov 2006 14:06:13 -0800
Message-ID: <010f01c70902$43f4a6c0$929015ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <10ADFE58-C842-4722-8EF9-18A01D18C80B@yahoo-inc.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccI+qz2bwzQknwCRjOzyfCZaW413QABuwRg
X-Virus-Checked: Checked by ClamAV on apache.org

I agree with all that, except that that's how the ls command works now,
performance issues and all, and that will change only when we fix
HADOOP-713. Until then, using that field is free - it's being computed
anyway.

That said, HADOOP-713 not a current pain point. Users running ls is pretty
much a non issue, since it's a rare operation, and it takes a fraction of a
second on the name node with our largish dfs. M-R jobs don't really pay a
penalty for this behaviour, since they normally execute on the last level of
the tree anyway, where the current behaviour is desirable. 
With all that in mind, the bug may stay in the queue for a while, until more
important issues are addressed.
Until then, we may as well get a better UI.

Yoram

> -----Original Message-----
> From: Eric Baldeschwieler [mailto:eric14@yahoo-inc.com] 
> Sent: Wednesday, November 15, 2006 1:11 PM
> To: hadoop-dev@lucene.apache.org
> Subject: Re: [jira] Created: (HADOOP-713) dfs list operation 
> is too expensive
> 
> It is not free.  As I understand it, we are recursively walking the  
> namespace tree with every ls to get this.
> 
> This is not a scalable design.  Even posix doesn't do this!
> 
> This is a performance problem that will only get worse.  I suggest  
> removing this performance mistake and documenting the existence of  
> dfs -du, which is a rather familiar solution to most users.
> 
> On Nov 15, 2006, at 12:19 PM, Yoram Arnon wrote:
> 
> >  I opt for displaying the size in bytes for now, since it's  
> > computed anyway,
> > is readily available for free, and improves the UI.
> > If/when we fix HADOOP-713 we can replace the computation of size  
> > with a
> > better value for #files.
> > Let's not prevent an improvement just because it might change in  
> > the future.
> > Yoram
> >
> >> -----Original Message-----
> >> From: Eric Baldeschwieler [mailto:eric14@yahoo-inc.com]
> >> Sent: Tuesday, November 14, 2006 7:10 PM
> >> To: hadoop-dev@lucene.apache.org
> >> Subject: Re: [jira] Created: (HADOOP-713) dfs list operation
> >> is too expensive
> >>
> >> So let's display nothing for now and revisit this once we have a
> >> cleaner CRC story.
> >>
> >>
> >> On Nov 14, 2006, at 10:55 AM, Hairong Kuang wrote:
> >>
> >>> Setting the size of a directory to be the # of files is a good
> >>> idea. But the
> >>> problem is that dfs name node has no idea of checksum
> >> files. So the
> >>> number
> >>> of files include that of checksum files. But what's displayed at
> >>> the client
> >>> side has filtered out the checksum files. So the # of files does
> >>> not match
> >>> what's really displayed at the client side.
> >>>
> >>> Hairong
> >>>
> >>> -----Original Message-----
> >>> From: Arkady Borkovsky [mailto:arkady@yahoo-inc.com]
> >>> Sent: Monday, November 13, 2006 5:07 PM
> >>> To: hadoop-dev@lucene.apache.org
> >>> Subject: Re: [jira] Created: (HADOOP-713) dfs list 
> operation is too
> >>> expensive
> >>>
> >>> When listing a directory, for directory entries it may be more
> >>> useful to
> >>> display the number of files in a directory, rather than the number
> >>> of bytes
> >>> used by all the files in the directory and its subdirectories.
> >>> This a subjective opinion -- comments?
> >>>
> >>> (Currently, the value displayed subdirectory is "0")
> >>>
> >>> On Nov 13, 2006, at 3:25 PM, Hairong Kuang (JIRA) wrote:
> >>>
> >>>> dfs list operation is too expensive
> >>>> -----------------------------------
> >>>>
> >>>>                  Key: HADOOP-713
> >>>>                  URL:
> >> http://issues.apache.org/jira/browse/HADOOP-713
> >>>>              Project: Hadoop
> >>>>           Issue Type: Improvement
> >>>>           Components: dfs
> >>>>     Affects Versions: 0.8.0
> >>>>             Reporter: Hairong Kuang
> >>>>
> >>>>
> >>>> A list request to dfs returns an array of DFSFileInfo. A
> >> DFSFileInfo
> >>>> of a directory contains a field called contentsLen, 
> indicating its
> >>>> size  which gets computed at the namenode side by 
> resursively going
> >>>> through its subdirs. At the same time, the whole dfs directory
> >>>> tree is
> >>>> locked.
> >>>>
> >>>> The list operation is used a lot by DFSClient for listing a
> >>>> directory,
> >>>> getting a file's size and # of replicas, and getting the
> >> size of dfs.
> >>>> Only the last operation needs the field contentsLen to 
> be computed.
> >>>>
> >>>> To reduce its cost, we can add a flag to the list request.
> >>>> ContentsLen
> >>>> is computed If the flag is set. By default, the flag is false.
> >>>>
> >>>> --
> >>>> This message is automatically generated by JIRA.
> >>>> -
> >>>> If you think it was sent incorrectly contact one of the
> >>>> administrators:
> >>>> http://issues.apache.org/jira/secure/Administrators.jspa
> >>>> -
> >>>> For more information on JIRA, see:
> >>>> http://www.atlassian.com/software/jira
> >>>>
> >>>>
> >>>
> >>>
> >>
> >>
> >
> 
> 


From MAILER-DAEMON Wed Nov 15 23:05:03 2006
Return-Path: 
 <hadoop-dev-return-5173-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86844 invoked from network); 15 Nov 2006 23:05:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 23:05:03 -0000
Received: (qmail 78286 invoked by uid 500); 15 Nov 2006 23:05:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78256 invoked by uid 500); 15 Nov 2006 23:05:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78223 invoked by uid 99); 15 Nov 2006 23:05:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 15:05:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 15:05:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 27D81714327
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 15:04:41 -0800 (PST)
Message-ID: <25698006.1163631881160.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 15:04:41 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-571) Path should use URI syntax
In-Reply-To: <6678550.1159825879600.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-571?page=all ]

Work on HADOOP-571 started by Doug Cutting.

> Path should use URI syntax
> --------------------------
>
>                 Key: HADOOP-571
>                 URL: http://issues.apache.org/jira/browse/HADOOP-571
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>
> The following changes are proposed:
> 1. Add a factory/registry of FileSystem implementations.  Given a protocol, hostname and port, it should be possible to get a FileSystem implementation.
> 2. Path's constructor should accept URI-formatted strings & a configuration.
> 3. A new Path method should be added: FileSystem.getFileSystem().  This returns the filesystem named in the path or the default configured filesystem.
> 4. Most methods which currently take FileSystem and Path parameters can be changed to take only Path.
> 5. Many FileSystem operations (create, open, delete, list, etc.) can become convenience methods on Path.
> 6. A URLStreamHandler can be defined in terms of the FileSystem API, so that URLs for any protocol with a registered FileSystem implementation can be accessed with a java.net.URL, permitting FileSystem implementations to be used on the classpath, etc.
> It is tempting to try to replace Path with java.net.URL, but URL's methods are insufficient for mapreduce.  We require directory listings, random access, location hints, etc., which are not supported by existing URLStreamHandler implementations.  But we can expose all FileSystem implementations for access with java.net.URL.
> (From a brainstorm with Owen.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 23:26:26 2006
Return-Path: 
 <hadoop-dev-return-5174-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95504 invoked from network); 15 Nov 2006 23:26:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 23:26:26 -0000
Received: (qmail 14339 invoked by uid 500); 15 Nov 2006 23:26:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14316 invoked by uid 500); 15 Nov 2006 23:26:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14307 invoked by uid 99); 15 Nov 2006 23:26:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 15:26:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 15:26:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3E34E714322
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 15:25:40 -0800 (PST)
Message-ID: <28385711.1163633140252.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 15:25:40 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-76?page=comments#action_12450232 ] 
            
Owen O'Malley commented on HADOOP-76:
-------------------------------------

The propsed PhasedFileSystem needs to support mkdirs in order to work with MapFileOutputFormat.

It will break less user OutputFormats if we also support the read operations:
exists
openRaw
getLength
isDirectory
listPathsRaw
setWorkingDirectory
getWorkingDirectory
by passing the request to the underlying FileSystem.

It is confusing to use the TaskInProgress.hasSucceededTask for reduces and TaskInProgress.completes for maps. I think it would be better to use the completes for both.

Thanks for putting the generic types into activeTasks, but it should look like:

Map<String, String> activeTasks = new HashMap();

The declared type should use the interface and the constructor doesn't need the generic types.

The logic in TaskInProgress.isRunnable is pretty convoluted although I think if you use completes for reduces, it doesn't need to change.

TaskInProgress.hasRanOnMachine should be hasRunOnMachine.

findNewTask should add a new condition instead of continue:


               } else if (specTarget == -1 &&
                          task.hasSpeculativeTask(avgProgress)) {
+                if(task.hasRanOnMachine(taskTracker)){
+                  continue ;
+                }
                 specTarget = i;
               }

should be:

               } else if (specTarget == -1 &&
                              task.hasSpeculativeTask(avgProgress) &&
                              !task.hasRanOnMachine(taskTracker)) {
                 specTarget = i;
               }

The patch always creates a PhasedFileSystem even when it won't be used because there is no speculative execution.

@@ -298,7 +305,14 @@

     } finally {
       reducer.close();
-      out.close(reporter);
+      if( runSpeculative ){
+        out.close(reporter);
+        pfs.commit();
+        pfs.close();
+       }else{
+        out.close(reporter);
+        fs.close();
+      }
     }

"out.close(reporter);" should be lifted out of the branch. And it is usually better to not close the file system because they are cached and may be used in another context. So I'd drop the else clause all together.




> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, Hadoop-76_2.patch, Hadoop-76_3.patch, Hadoop-76_4.patch, Hadoop-76_5.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 23:43:57 2006
Return-Path: 
 <hadoop-dev-return-5175-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98139 invoked from network); 15 Nov 2006 23:43:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 23:43:57 -0000
Received: (qmail 25470 invoked by uid 500); 15 Nov 2006 23:33:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25446 invoked by uid 500); 15 Nov 2006 23:33:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25436 invoked by uid 99); 15 Nov 2006 23:33:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 15:33:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 15:32:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DD165714323
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 15:32:38 -0800 (PST)
Message-ID: <25362231.1163633558903.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 15:32:38 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-723) Race condition exists in the method
 MapOutputLocation.getFile
In-Reply-To: <5078563.1163609197143.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-723?page=all ]

Owen O'Malley updated HADOOP-723:
---------------------------------

    Assignee: Owen O'Malley

Good catch. This is the cause of the FileNotFoundExceptions.

> Race condition exists in the method MapOutputLocation.getFile
> -------------------------------------------------------------
>
>                 Key: HADOOP-723
>                 URL: http://issues.apache.org/jira/browse/HADOOP-723
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Owen O'Malley
>
> There seems to be a race condition in the way the Reduces copy the map output files from the Maps. If a copier is blocked in the connect method (in the beginning of the method MapOutputLocation.getFile) to a Jetty on a Map, and the MapCopyLeaseChecker detects that the copier was idle for too long, it will go ahead and issue a interrupt (read 'kill') to this thread and create a new Copier thread. However, the copier, currently blocked trying to connect to Jetty on a Map, doesn't actually get killed until the connect timeout expires and as soon as the connect comes out (with an IOException), it will delete the map output file which actually could have been (successfully) created by the new Copier thread. This leads to the Sort phase for that reducer failing with a FileNotFoundException.
> One simple way to fix this is to not delete the file if the file was not created within this getFile method.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 23:50:18 2006
Return-Path: 
 <hadoop-dev-return-5176-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99372 invoked from network); 15 Nov 2006 23:50:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 23:50:18 -0000
Received: (qmail 33326 invoked by uid 500); 15 Nov 2006 23:41:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33296 invoked by uid 500); 15 Nov 2006 23:41:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33281 invoked by uid 99); 15 Nov 2006 23:41:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 15:41:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 15:40:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 68D12714324
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 15:40:38 -0800 (PST)
Message-ID: <20896583.1163634038426.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 15:40:38 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-725) chooseTargets method in FSNamesystem
 is very inefficient
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

chooseTargets method in FSNamesystem is very inefficient
--------------------------------------------------------

                 Key: HADOOP-725
                 URL: http://issues.apache.org/jira/browse/HADOOP-725
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
    Affects Versions: 0.8.0
         Environment: All
            Reporter: Milind Bhandarkar
         Assigned To: Milind Bhandarkar
             Fix For: 0.9.0


Currently the chooseTargets method (that selects datanodes for block-placement) takes in excess of 20% of cpu on a namenode. This is the most time-consuming namenode method, according to the profiler. This inefficiency has already contributed to cascading crash in DFS earlier. As datanodes went down, new locations needed to be found for the blocks on dead datanodes, and since this was done inside a synchronized method, it locked the whole namesystem for several minutes, which caused more datanode failures, when the namenode marked them dead because no heartbeat could be processed during that interval. This has been detailed in HADOOP-572.

The patch I am about to upload reduces the time taken in the chooseTarget method to be proportional to nReplicas per block, instead of the current implementation, which is proportional to (nDataNodes * nReplicas). Also, when a number of datanodes crash, their blocks are put on the pendingReplications list one datanode at a time in a synchronized section. (Currently, the syncchronized section processes ALL the dead datanodes, thus locking the namesystem for a considerable amount of time.) Also, this patch will add a unit test to check replication.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 15 23:52:10 2006
Return-Path: 
 <hadoop-dev-return-5177-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99747 invoked from network); 15 Nov 2006 23:52:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 23:52:10 -0000
Received: (qmail 35628 invoked by uid 500); 15 Nov 2006 23:43:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35611 invoked by uid 500); 15 Nov 2006 23:43:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35602 invoked by uid 99); 15 Nov 2006 23:43:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 15:43:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 15:42:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 292A7714326
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 15:42:39 -0800 (PST)
Message-ID: <5285681.1163634159166.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 15:42:39 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-726) HDFS locking mechanisms should be
 simplified or removed
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

HDFS locking mechanisms should be simplified or removed
-------------------------------------------------------

                 Key: HADOOP-726
                 URL: http://issues.apache.org/jira/browse/HADOOP-726
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
            Reporter: Sameer Paranjpye
            Priority: Minor


HDFS includes a locking mechanism that allows clients to lock files and directories in the filesystem. This requires that the Namenode, in addition to all other management of filesystem state also has to act like a lock manager on behalf of clients. Rather than burden the Namenode with this Hadoop should include a distinct general purpose distributed lock manager.

In the interim, the locking functionality on the filesystem should be simplified to permit only file locks or removed altogether. At this point, removing or simplifying the functionality is not likely to break client code, removing it later will be much harder. In any case, locks in HDFS don't work very well, see HADOOP-656. Also, directory locks are overkill most UNIX fses don't support it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 00:00:17 2006
Return-Path: 
 <hadoop-dev-return-5178-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1153 invoked from network); 16 Nov 2006 00:00:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 00:00:17 -0000
Received: (qmail 43966 invoked by uid 500); 15 Nov 2006 23:51:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43945 invoked by uid 500); 15 Nov 2006 23:51:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43936 invoked by uid 99); 15 Nov 2006 23:51:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 15:51:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 15:50:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1875D714322
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 15:50:37 -0800 (PST)
Message-ID: <23035532.1163634637097.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 15:50:37 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-727) Hadoop should include a general
 purpose distributed lock manager
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hadoop should include a general purpose distributed lock manager
----------------------------------------------------------------

                 Key: HADOOP-727
                 URL: http://issues.apache.org/jira/browse/HADOOP-727
             Project: Hadoop
          Issue Type: New Feature
          Components: ipc
            Reporter: Sameer Paranjpye
            Priority: Minor


Related to HADOOP-726. Currently, there is no good way for distributed apps using HDFS or Map/Reduce to synchronize their operations. HDFS locking doesn't work very well and lock management is an unnecessary burden on the namenode. In addition, it depending on the filesystem for locking could make applications less portable. Hadoop should implement a general purpose distributed lock management service.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 00:01:37 2006
Return-Path: 
 <hadoop-dev-return-5179-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2965 invoked from network); 16 Nov 2006 00:01:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 00:01:37 -0000
Received: (qmail 64396 invoked by uid 500); 16 Nov 2006 00:01:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64368 invoked by uid 500); 16 Nov 2006 00:01:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64302 invoked by uid 99); 16 Nov 2006 00:01:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 16:01:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 16:00:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3DB16714322
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 16:00:38 -0800 (PST)
Message-ID: <5433627.1163635238250.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 16:00:38 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-645) Map-reduce task does not finish
 correctly when -reducer NONE is specified
In-Reply-To: <18535487.1161894916590.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-645?page=all ]

Owen O'Malley resolved HADOOP-645.
----------------------------------

    Resolution: Fixed

Let's create a new bug for the other issues.

> Map-reduce task does not finish correctly when -reducer NONE is specified
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-645
>                 URL: http://issues.apache.org/jira/browse/HADOOP-645
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>             Fix For: 0.9.0
>
>         Attachments: reducernone.patch
>
>
> Map-reduce task does not finish correctly when -reducer NONE is specified, The NONE option means that the reducer should not be generating any output. Using this option causes an exception in the task tracker:
> java.lang.IllegalArgumentException: URI is not hierarchical
> TaskRunner: at java.io.File.<init>(File.java:335)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:583)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:96)
> TaskRunner: at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:49)
> TaskRunner: at org.apache.hadoop.mapred.MapTask.run(MapTask.java:213)
> TaskRunner: at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1240)
> TaskRunner: sideEffectURI_ file:output length 11

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 00:06:59 2006
Return-Path: 
 <hadoop-dev-return-5180-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5177 invoked from network); 16 Nov 2006 00:06:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 00:06:59 -0000
Received: (qmail 78089 invoked by uid 500); 16 Nov 2006 00:07:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78059 invoked by uid 500); 16 Nov 2006 00:07:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78050 invoked by uid 99); 16 Nov 2006 00:07:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 16:07:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 16:06:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 19065714322
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 16:06:37 -0800 (PST)
Message-ID: <30411461.1163635597099.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 16:06:37 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
--------------------------------------------------------------------------------------------------

                 Key: HADOOP-728
                 URL: http://issues.apache.org/jira/browse/HADOOP-728
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
            Reporter: dhruba borthakur


a) a file is create for the output instead of a directory.
b) there is no way to understand what is going on from the client output

I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
~


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 00:18:59 2006
Return-Path: 
 <hadoop-dev-return-5181-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8940 invoked from network); 16 Nov 2006 00:18:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 00:18:59 -0000
Received: (qmail 98868 invoked by uid 500); 16 Nov 2006 00:19:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98638 invoked by uid 500); 16 Nov 2006 00:19:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98628 invoked by uid 99); 16 Nov 2006 00:19:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 16:19:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 16:18:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 38E57714322
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 16:18:38 -0800 (PST)
Message-ID: <4764017.1163636318230.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 16:18:38 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-725) chooseTargets method in FSNamesystem
 is very inefficient
In-Reply-To: <20896583.1163634038426.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-725?page=all ]

Milind Bhandarkar updated HADOOP-725:
-------------------------------------

    Attachment: chooseTargets.patch

Patch implementing optimized chooseTargets method in namenode.

> chooseTargets method in FSNamesystem is very inefficient
> --------------------------------------------------------
>
>                 Key: HADOOP-725
>                 URL: http://issues.apache.org/jira/browse/HADOOP-725
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: chooseTargets.patch
>
>
> Currently the chooseTargets method (that selects datanodes for block-placement) takes in excess of 20% of cpu on a namenode. This is the most time-consuming namenode method, according to the profiler. This inefficiency has already contributed to cascading crash in DFS earlier. As datanodes went down, new locations needed to be found for the blocks on dead datanodes, and since this was done inside a synchronized method, it locked the whole namesystem for several minutes, which caused more datanode failures, when the namenode marked them dead because no heartbeat could be processed during that interval. This has been detailed in HADOOP-572.
> The patch I am about to upload reduces the time taken in the chooseTarget method to be proportional to nReplicas per block, instead of the current implementation, which is proportional to (nDataNodes * nReplicas). Also, when a number of datanodes crash, their blocks are put on the pendingReplications list one datanode at a time in a synchronized section. (Currently, the syncchronized section processes ALL the dead datanodes, thus locking the namesystem for a considerable amount of time.) Also, this patch will add a unit test to check replication.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 00:19:01 2006
Return-Path: 
 <hadoop-dev-return-5182-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8982 invoked from network); 16 Nov 2006 00:19:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 00:19:01 -0000
Received: (qmail 98916 invoked by uid 500); 16 Nov 2006 00:19:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98888 invoked by uid 500); 16 Nov 2006 00:19:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98879 invoked by uid 99); 16 Nov 2006 00:19:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 16:19:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 16:18:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 837BB714323
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 16:18:39 -0800 (PST)
Message-ID: <28242511.1163636319536.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 16:18:39 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-725) chooseTargets method in FSNamesystem
 is very inefficient
In-Reply-To: <20896583.1163634038426.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-725?page=all ]

Milind Bhandarkar updated HADOOP-725:
-------------------------------------

    Status: Patch Available  (was: Open)

> chooseTargets method in FSNamesystem is very inefficient
> --------------------------------------------------------
>
>                 Key: HADOOP-725
>                 URL: http://issues.apache.org/jira/browse/HADOOP-725
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: chooseTargets.patch
>
>
> Currently the chooseTargets method (that selects datanodes for block-placement) takes in excess of 20% of cpu on a namenode. This is the most time-consuming namenode method, according to the profiler. This inefficiency has already contributed to cascading crash in DFS earlier. As datanodes went down, new locations needed to be found for the blocks on dead datanodes, and since this was done inside a synchronized method, it locked the whole namesystem for several minutes, which caused more datanode failures, when the namenode marked them dead because no heartbeat could be processed during that interval. This has been detailed in HADOOP-572.
> The patch I am about to upload reduces the time taken in the chooseTarget method to be proportional to nReplicas per block, instead of the current implementation, which is proportional to (nDataNodes * nReplicas). Also, when a number of datanodes crash, their blocks are put on the pendingReplications list one datanode at a time in a synchronized section. (Currently, the syncchronized section processes ALL the dead datanodes, thus locking the namesystem for a considerable amount of time.) Also, this patch will add a unit test to check replication.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 00:21:39 2006
Return-Path: 
 <hadoop-dev-return-5183-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9580 invoked from network); 16 Nov 2006 00:21:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 00:21:39 -0000
Received: (qmail 1262 invoked by uid 500); 16 Nov 2006 00:21:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1230 invoked by uid 500); 16 Nov 2006 00:21:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1218 invoked by uid 99); 16 Nov 2006 00:21:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 16:21:48 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_ID,NO_REAL_NAME,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received: from [140.211.11.75] (HELO lucene.zones.apache.org) (140.211.11.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 16:21:36 -0800
Received: from lucene.zones.apache.org (localhost [127.0.0.1])
	by lucene.zones.apache.org (8.13.7+Sun/8.13.7) with SMTP id kAG0LFBX007702
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 00:21:16 GMT
Message-Id: <200611160021.kAG0LFBX007702@lucene.zones.apache.org>
Date: Thu, 16 Nov 2006 00:21:15 +0000
Subject: Hadoop nightly build failure
From: hadoop-dev@lucene.apache.org
To: hadoop-dev@lucene.apache.org
X-Mailer: org.apache.tools.mail.MailMessage (ant.apache.org)
X-Virus-Checked: Checked by ClamAV on apache.org


init:
    [mkdir] Created dir: /tmp/hadoop-nightly/build
    [mkdir] Created dir: /tmp/hadoop-nightly/build/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/src
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/task/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/job/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/dfs/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/datanode/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/examples
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/testjar
     [copy] Copying 6 files to /tmp/hadoop-nightly/build/webapps
     [copy] Copying 4 files to /tmp/hadoop-nightly/conf
     [copy] Copying /tmp/hadoop-nightly/conf/slaves.template to /tmp/hadoop-nightly/conf/slaves
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-site.xml.template to /tmp/hadoop-nightly/conf/hadoop-site.xml
     [copy] Copying /tmp/hadoop-nightly/conf/mapred-default.xml.template to /tmp/hadoop-nightly/conf/mapred-default.xml
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-env.sh.template to /tmp/hadoop-nightly/conf/hadoop-env.sh
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: whoami: not found

record-parser:

compile-core-classes:
    [javac] Compiling 257 source files to /tmp/hadoop-nightly/build/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-native:

compile-core:

compile-examples:
    [javac] Compiling 7 source files to /tmp/hadoop-nightly/build/examples
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-test:
    [javac] Compiling 62 source files to /tmp/hadoop-nightly/build/test/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] Compiling 1 source file to /tmp/hadoop-nightly/build/test/testjar
      [jar] Building jar: /tmp/hadoop-nightly/build/test/testjar/testjob.jar
      [jar] Building jar: /tmp/hadoop-nightly/build/hadoop-nightly-test.jar
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache

test-core:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/data
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/logs
    [junit] Running org.apache.hadoop.conf.TestConfiguration
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.826 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSMkdirs
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 6.258 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSShellGenericOptions
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 10.598 sec
    [junit] Running org.apache.hadoop.dfs.TestFsck
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.575 sec
    [junit] Running org.apache.hadoop.dfs.TestLocalDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.604 sec
    [junit] Running org.apache.hadoop.dfs.TestPread
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 4.603 sec
    [junit] Running org.apache.hadoop.dfs.TestSeekBug
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 4.679 sec
    [junit] Running org.apache.hadoop.dfs.TestSmallBlock
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.584 sec
    [junit] Running org.apache.hadoop.fs.TestCopyFiles
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 16.252 sec
    [junit] Running org.apache.hadoop.fs.TestDFSIO
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 5.315 sec
    [junit] Running org.apache.hadoop.fs.TestFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.28 sec
    [junit] Running org.apache.hadoop.fs.TestGlobPaths
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.472 sec
    [junit] Running org.apache.hadoop.fs.TestLocalFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.463 sec
    [junit] Running org.apache.hadoop.fs.TestPath
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.012 sec
    [junit] Running org.apache.hadoop.io.TestArrayFile
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 3.567 sec
    [junit] Running org.apache.hadoop.io.TestBytesWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.015 sec
    [junit] Running org.apache.hadoop.io.TestMD5Hash
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.311 sec
    [junit] Running org.apache.hadoop.io.TestSequenceFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 19.42 sec
    [junit] Running org.apache.hadoop.io.TestSetFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.931 sec
    [junit] Running org.apache.hadoop.io.TestText
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.54 sec
    [junit] Running org.apache.hadoop.io.TestTextNonUTF8
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.011 sec
    [junit] Running org.apache.hadoop.io.TestUTF8
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.125 sec
    [junit] Running org.apache.hadoop.io.TestVersionedWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.02 sec
    [junit] Running org.apache.hadoop.io.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.009 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodec
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 1.539 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodecFactory
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.843 sec
    [junit] Running org.apache.hadoop.ipc.TestIPC
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.671 sec
    [junit] Running org.apache.hadoop.ipc.TestRPC
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.134 sec
    [junit] Running org.apache.hadoop.mapred.TestEmptyJobWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 9.498 sec
    [junit] Running org.apache.hadoop.mapred.TestMapRed
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 12.842 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRBringup
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.512 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRClasspath
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 25.856 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRDFSCaching
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 25.002 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRLocalFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 59.877 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 79.008 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFilter
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 12.402 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFormat
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 13.081 sec
    [junit] Running org.apache.hadoop.mapred.TestTextInputFormat
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 5.996 sec
    [junit] Running org.apache.hadoop.mapred.jobcontrol.TestJobControl
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 73.199 sec
    [junit] Running org.apache.hadoop.record.test.TestMapRed
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.889 sec
    [junit] Running org.apache.hadoop.record.test.TestRecordIO
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.372 sec
    [junit] Running org.apache.hadoop.record.test.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.584 sec

test-contrib:

test:

init:
     [echo] contrib: smallJobsBenchmark
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/test/logs
    [mkdir] Created dir: /tmp/hadoop-nightly/build/minimr

init-contrib:

compile:
     [echo] contrib: smallJobsBenchmark
    [javac] Compiling 5 source files to /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: /tmp/hadoop-nightly/src/contrib/smallJobsBenchmark/src/java/org/apache/hadoop/benchmarks/mapred/MultiJobRunner.java uses unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-test:

jar:
      [jar] Building jar: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/MRBenchmark.jar

deploy:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/bin
     [copy] Copying 2 files to /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/bin

test:

test:

init:
     [echo] contrib: streaming
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming/test/logs

init-contrib:

compile:
     [echo] contrib: streaming
    [javac] Compiling 22 source files to /tmp/hadoop-nightly/build/contrib/streaming/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-test:
     [echo] contrib: streaming
    [javac] Compiling 6 source files to /tmp/hadoop-nightly/build/contrib/streaming/test
    [javac] Note: /tmp/hadoop-nightly/src/contrib/streaming/src/test/org/apache/hadoop/streaming/TestStreamedMerge.java uses or overrides a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: /tmp/hadoop-nightly/src/contrib/streaming/src/test/org/apache/hadoop/streaming/TestStreamedMerge.java uses unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

jar:
      [jar] Building jar: /tmp/hadoop-nightly/build/contrib/streaming/hadoop-streaming.jar

deploy:
     [echo] contrib: streaming
     [copy] Copying 1 file to /tmp/hadoop-nightly/build

hadoopbuildcontrib.test:
     [echo] contrib: streaming
   [delete] Deleting directory /tmp/hadoop-nightly/build/contrib/streaming/test/logs
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming/test/logs
    [junit] Running org.apache.hadoop.streaming.TestStreaming
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.108 sec
    [junit] Running org.apache.hadoop.streaming.TestSymLink
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 35.439 sec

test:

jar:
      [tar] Building tar: /tmp/hadoop-nightly/build/classes/bin.tgz
      [jar] Building jar: /tmp/hadoop-nightly/build/hadoop-nightly.jar

default-doc:
    [style] Transforming into /tmp/hadoop-nightly/build/docs
    [style] Processing /tmp/hadoop-nightly/conf/hadoop-default.xml to /tmp/hadoop-nightly/build/docs/hadoop-default.html
    [style] Loading stylesheet /tmp/hadoop-nightly/conf/configuration.xsl

javadoc:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/docs/api
  [javadoc] Generating Javadoc
  [javadoc] Javadoc execution
  [javadoc] Loading source files for package org.apache.hadoop...
  [javadoc] Loading source files for package org.apache.hadoop.conf...
  [javadoc] Loading source files for package org.apache.hadoop.dfs...
  [javadoc] Loading source files for package org.apache.hadoop.filecache...
  [javadoc] Loading source files for package org.apache.hadoop.fs...
  [javadoc] Loading source files for package org.apache.hadoop.io...
  [javadoc] Loading source files for package org.apache.hadoop.io.compress...
  [javadoc] Loading source files for package org.apache.hadoop.io.compress.zlib...
  [javadoc] Loading source files for package org.apache.hadoop.ipc...
  [javadoc] Loading source files for package org.apache.hadoop.mapred...
  [javadoc] Loading source files for package org.apache.hadoop.mapred.jobcontrol...
  [javadoc] Loading source files for package org.apache.hadoop.mapred.lib...
  [javadoc] Loading source files for package org.apache.hadoop.metrics...
  [javadoc] Loading source files for package org.apache.hadoop.metrics.file...
  [javadoc] Loading source files for package org.apache.hadoop.metrics.ganglia...
  [javadoc] Loading source files for package org.apache.hadoop.metrics.spi...
  [javadoc] Loading source files for package org.apache.hadoop.net...
  [javadoc] Loading source files for package org.apache.hadoop.record...
  [javadoc] Loading source files for package org.apache.hadoop.record.compiler...
  [javadoc] Loading source files for package org.apache.hadoop.record.compiler.generated...
  [javadoc] Loading source files for package org.apache.hadoop.tools...
  [javadoc] Loading source files for package org.apache.hadoop.util...
  [javadoc] Loading source files for package org.apache.hadoop.examples...
  [javadoc] Constructing Javadoc information...
  [javadoc] Standard Doclet version 1.5.0_06
  [javadoc] Building tree for all the packages and classes...
  [javadoc] Building index for all the packages and classes...
  [javadoc] Building index for all classes...

examples:
      [jar] Building jar: /tmp/hadoop-nightly/build/hadoop-nightly-examples.jar

package:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/hadoop-nightly
    [mkdir] Created dir: /tmp/hadoop-nightly/build/hadoop-nightly/lib
    [mkdir] Created dir: /tmp/hadoop-nightly/build/hadoop-nightly/bin
    [mkdir] Created dir: /tmp/hadoop-nightly/build/hadoop-nightly/docs
    [mkdir] Created dir: /tmp/hadoop-nightly/build/hadoop-nightly/docs/api
     [copy] Copying 20 files to /tmp/hadoop-nightly/build/hadoop-nightly/lib
    [mkdir] Created dir: /tmp/hadoop-nightly/build/hadoop-nightly/lib/native
     [exec] /tmp/hadoop-nightly/src/native/packageNativeHadoop.sh: test: argument expected

BUILD FAILED
/tmp/hadoop-nightly/build.xml:463: exec returned: 1

Total time: 9 minutes 26 seconds



From MAILER-DAEMON Thu Nov 16 00:42:03 2006
Return-Path: 
 <hadoop-dev-return-5184-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16780 invoked from network); 16 Nov 2006 00:42:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 00:42:03 -0000
Received: (qmail 36485 invoked by uid 500); 16 Nov 2006 00:42:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36454 invoked by uid 500); 16 Nov 2006 00:42:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36445 invoked by uid 99); 16 Nov 2006 00:42:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 16:42:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 16:42:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B7FFC71431F
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 16:41:41 -0800 (PST)
Message-ID: <21692424.1163637701751.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 16:41:41 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-727) Hadoop should include a general
 purpose distributed lock manager
In-Reply-To: <23035532.1163634637097.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-727?page=comments#action_12450248 ] 
            
Runping Qi commented on HADOOP-727:
-----------------------------------

If this is for coarse grain locking, then Chubby is a good candidate to implement.


> Hadoop should include a general purpose distributed lock manager
> ----------------------------------------------------------------
>
>                 Key: HADOOP-727
>                 URL: http://issues.apache.org/jira/browse/HADOOP-727
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: ipc
>            Reporter: Sameer Paranjpye
>            Priority: Minor
>
> Related to HADOOP-726. Currently, there is no good way for distributed apps using HDFS or Map/Reduce to synchronize their operations. HDFS locking doesn't work very well and lock management is an unnecessary burden on the namenode. In addition, it depending on the filesystem for locking could make applications less portable. Hadoop should implement a general purpose distributed lock management service.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 01:44:00 2006
Return-Path: 
 <hadoop-dev-return-5185-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37918 invoked from network); 16 Nov 2006 01:44:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 01:44:00 -0000
Received: (qmail 8834 invoked by uid 500); 16 Nov 2006 01:44:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8653 invoked by uid 500); 16 Nov 2006 01:44:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8644 invoked by uid 99); 16 Nov 2006 01:44:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 17:44:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 17:43:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E9BB2714323
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 17:43:38 -0800 (PST)
Message-ID: <11805558.1163641418954.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 17:43:38 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-447)
 DistributedFileSystem.getBlockSize(Path) does not resolve absolute path
In-Reply-To: <5956345.1155318013880.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-447?page=comments#action_12450255 ] 
            
Raghu Angadi commented on HADOOP-447:
-------------------------------------


Is there a way reproduce this?

Is the fix simply replacing 

       public long getBlockSize(Path f) throws IOException { 
          return dfs.getBlockSize(f); 
       } 

with

      public long getBlockSize(Path f) throws IOException { 
        return dfs.getBlockSize( makeAbsolute(f) ); 
      } 

in DistributedFileSystem.java ?
thanks.

> DistributedFileSystem.getBlockSize(Path) does not resolve absolute path
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-447
>                 URL: http://issues.apache.org/jira/browse/HADOOP-447
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Benjamin Reed
>         Assigned To: Raghu Angadi
>
> getBlockSize() does not check for an absolute path like the rest of the DistributeFileSystem API does. Consequently getBlockSize(Path) does not work with relative paths.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 04:15:48 2006
Return-Path: 
 <hadoop-dev-return-5186-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81200 invoked from network); 16 Nov 2006 04:15:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 04:15:48 -0000
Received: (qmail 37637 invoked by uid 500); 16 Nov 2006 04:15:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37533 invoked by uid 500); 16 Nov 2006 04:15:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37524 invoked by uid 99); 16 Nov 2006 04:15:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 20:15:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.142.198.211] (HELO smtp112.sbc.mail.mud.yahoo.com)
 (68.142.198.211)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Nov 2006 20:15:43 -0800
Received: (qmail 87743 invoked from network); 16 Nov 2006 04:15:21 -0000
Received: from unknown (HELO ?192.168.50.163?)
 (schmed7@pacbell.net@69.17.55.128 with plain)
  by smtp112.sbc.mail.mud.yahoo.com with SMTP; 16 Nov 2006 04:15:20 -0000
X-YMail-OSG: 
 UOfB0DIVM1n3nnkFO4lEIAzMESotD2s551Zo22fkh5N_AGT6IkeEo0jU7ZuYt1RQWpB5w.Ja21rFUqYAxh4.oPGosz7aUjfpybhF9CCQB1KieAgNsYffdWwoKAw63rz8GqVm4evt3a6CbVspGmQMmGFwt_Zd2alSyZywQfzt_XgKQ7119uw4TS4.TlEfKLOZQPVkx.vU54LMMqCA
Mime-Version: 1.0
Message-Id: <p06210209c18194e7fe3c@[192.168.50.163]>
In-Reply-To: <53C43701-5971-41F2-9076-88464B9F2815@yahoo-inc.com>
References: <p06210205c18107b7e6be@[192.168.50.163]>
 <53C43701-5971-41F2-9076-88464B9F2815@yahoo-inc.com>
Date: Wed, 15 Nov 2006 20:11:17 -0800
To: hadoop-dev@lucene.apache.org
From: Chris Schneider <Schmed@TransPac.com>
Subject: Re: DFS/RPC problems
Content-Type: text/plain; charset="us-ascii"
X-Virus-Checked: Checked by ClamAV on apache.org

Eric,

>How many files are you creating in HDFS?
>
>I wonder if the messaging package may simply be swamping the namenode with many, many small files?  It really is not designed to deal with that use case.  How big are your checkpoint files?

Thanks for your excellent suggestion! It appears that this was indeed causing the problem. I will work with Andrzej to come up with a solution to limit the number of files created by his message queue subsystem.

Best Regards,

- Chris

>On Nov 15, 2006, at 10:52 AM, Chris Schneider wrote:
>
>>Fellow Hadoop coders,
>>
>>I'm getting tragic DFS/RPC problems running Nutch 0.8+ atop Hadoop 0.5.1+ that seem similar to problems others have been reporting (e.g., HADOOP-707). My great hope was that the HADOOP-563 patch would resolve them, and it may well have improved things somewhat. However, I'm still unable to complete the crawl I've been attempting even after rolling in this patch. A few notes about my setup that may be relevant:
>>
>>1) I'm running a crawl through a proxy server, and I've modified Nutch so that it skips the server delay whenever it gets a hit in the proxy cache. Since I've been attempting the same crawl over and over again, the first part of it may run so fast that it taxes the DFS and RPC in a way that exposes fundamental problems.
>>
>>2) I'm injecting 26M URLs into a brand new DB and then trying to fetch them all at once. I've tuned the fetcher.threads.fetch to 500 in order to avoid fatal memory swapping on my cluster of 10 slaves (2 tasktrackers per slave).
>>
>>3) I've been using hadoop job -kill to stop the fetch job when I notice things not going the way I want (not necessarily catastrophic problems). I wonder whether this (in combination with the heavy loading I've applied to hadoop) may result in my DFS becoming "unusable".
>>
>>4) Once my DFS becomes "unusable", I can stop-all.sh/start-all.sh, reboot my systems, etc., but nothing will give me back a cluster I can reliably use to do even relatively simple things like hadoop dfs -du. The start-all.sh script takes a very long time to execute, but hadoop eventually does come up, including its web server. The hadoop fsck / command (unless it dies do to an RPC problem) also reports that my DFS is healthy, though things are very sick indeed. Even simple DFS commands either execute slowly or die with RPC problems (SocketTimeoutException). Crawling at this point may also get started OK, though the fetch will eventually die.
>>
>>5) Part of the modifications we've made to Nutch are a message queue subsystem developed by Andrzej. Since this doesn't use NIO to do any of its communication, I doubt that it is interfering with hadoop's RPC. However, it does a fair amount of writing to the DFS itself, and many of the error messages in the logs are associated with these requests.
>>
>>6) To resolve the "unusable" DFS problem, I'm forced to use the local FS to delete all of the DFS contents (on both master and slaves), and then I tell the namenode to format the DFS. I also wonder whether this operation may leave things in some kind of strange state, though I can't imagine what might be the problem.
>>
>>After resorting to step #6 above yesterday, I performed another test and conducted a fairly detailed analysis of the log files. I injected my 26M URLs into a new crawldb, generated a fetch list (without specifying any topN) and started fetching it. After over an hour of fetching, I noticed that I wanted to do a little more logging on the Nutch side, so I killed the fetch job, did a stop-all.sh, deployed a modified version of Nutch, did a start-all.sh, and tried my crawl again from scratch (i.e., I injected my 26M URLs into a brand new crawldb, etc.) I let this run until the fetch job died, then mined the logs for the following information.
>>
>>Any help our insight you could provide would be greatly appreciated.
>>
>>Best Regards,
>>
>>- Chris
>>
>>-------------------------------------------------------------------------------------------
>>I didn't find anything unusual in the stdout for start-all.sh.
>>
>>The namenode may have had trouble removing files immediately after it was first
>>launched, but this is probably just housekeeping (making sure that it deletes
>>any files that are sometimes left over from previous runs):
>>
>>  2006-11-14 11:13:23,276 WARN  dfs.StateChange - DIR* FSDirectory.unprotectedDelete: failed to remove /tmp/hadoop/mapred/.system.crc because it does not exist
>>  2006-11-14 11:13:23,280 WARN  dfs.StateChange - DIR* FSDirectory.unprotectedDelete: failed to remove /tmp/hadoop/mapred/system because it does not exist
>>
>>Immediately after the injection for the first crawl began
>>  2006-11-14 11:45:45,141 INFO  crawl.Injector - Injector: starting
>>there is a significant(?) DFS block issue in the s1 datanode's log:
>>
>>  2006-11-14 11:45:49,021 WARN  dfs.DataNode - DataXCeiver
>>  java.io.IOException: Block blk_452376043108156205 has already been started (though not completed), and thus cannot be created.
>>          at org.apache.hadoop.dfs.FSDataset.writeToBlock(FSDataset.java:298)
>>          at org.apache.hadoop.dfs.DataNode$DataXceiver.writeBlock(DataNode.java:663)
>>          at org.apache.hadoop.dfs.DataNode$DataXceiver.run(DataNode.java:507)
>>          at java.lang.Thread.run(Thread.java:595)
>>
>>This problem is reflected in the requesting (s7) datanode's log as well and
>>apparently results in its connection to the namenode getting reset(?):
>>
>>  2006-11-14 11:45:49,010 WARN  dfs.DataNode - Failed to transfer blk_452376043108156205 to s1-crawlera/10.10.16.101:50010
>>  java.net.SocketException: Connection reset
>>          at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
>>          at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
>>          at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>>          at java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)
>>          at java.io.DataOutputStream.write(DataOutputStream.java:90)
>>          at org.apache.hadoop.dfs.DataNode$DataTransfer.run(DataNode.java:912)
>>          at java.lang.Thread.run(Thread.java:595)
>>
>>(There are three of these events in s7's datanode log during the injection,
>>generation and fetching, which seem to be correlated with some of the message
>>queue subsystem problems mentioned below.)
>>
>>As the injection for the first crawl completed
>>  2006-11-14 12:06:13,613 INFO  crawl.Injector - Injector: done
>>there are a couple of unimportant(?) messages that I can attribute to a brand
>>new crawldb:
>>
>>  2006-11-14 12:06:13,603 WARN  dfs.StateChange - DIR* FSDirectory.unprotectedDelete: failed to remove /user/crawler/crawl-20061114114341/crawldb/.old.crc because it does not exist
>>  2006-11-14 12:06:13,603 WARN  dfs.StateChange - DIR* FSDirectory.unprotectedDelete: failed to remove /user/crawler/crawl-20061114114341/crawldb/old because it does not exist
>>  2006-11-14 12:06:13,604 WARN  dfs.StateChange - DIR* FSDirectory.unprotectedRenameTo: failed to rename /user/crawler/crawl-20061114114341/crawldb/current to /user/crawler/crawl-20061114114341/crawldb/old because source does not exist
>>  2006-11-14 12:06:13,607 WARN  dfs.StateChange - DIR* FSDirectory.unprotectedDelete: failed to remove /user/crawler/crawl-20061114114341/crawldb/.old.crc because it does not exist
>>  2006-11-14 12:06:13,608 WARN  dfs.StateChange - DIR* FSDirectory.unprotectedDelete: failed to remove /user/crawler/crawl-20061114114341/crawldb/old because it does not exist
>>
>>Once the fetcher job got going
>>  2006-11-14 12:21:30,654 INFO  fetcher.Fetcher - Fetcher: segment: /user/crawler/crawl-20061114114341/segments/20061114120615
>>Andrzej's message queue subsystem apparently had tons of trouble creating
>>various files, with messages getting spit out every minute or so:
>>
>>  2006-11-14 12:21:54,827 WARN  dfs.StateChange - DIR* NameSystem.startFile: failed to create file /mq/alerts/fetcher/.1163535714813.s7-crawlera.crc for DFSClient_task_0005_m_000010_0 on client s7-crawlera because pendingCreates is non-null.
>>  ...
>>  2006-11-14 13:10:50,457 WARN  dfs.StateChange - DIR* NameSystem.startFile: failed to create file /mq/alerts/fetcher/.1163538650385.s7-crawlera.crc for DFSClient_task_0005_m_000019_0 on client s7-crawlera because pendingCreates is non-null.
>>
>>These may be correlated with entries in the datanode logs:
>>
>>  2006-11-14 13:10:46,387 WARN  dfs.DataNode - DataXCeiver
>>  java.io.IOException: Block blk_-8970705341808748626 is valid, and cannot be written to.
>>          at org.apache.hadoop.dfs.FSDataset.writeToBlock(FSDataset.java:285)
>>          at org.apache.hadoop.dfs.DataNode$DataXceiver.writeBlock(DataNode.java:663)
>>          at org.apache.hadoop.dfs.DataNode$DataXceiver.run(DataNode.java:507)
>>          at java.lang.Thread.run(Thread.java:595)
>>
>>The namenode also noticed a few redundant addStoredBlock requests:
>>
>>  2006-11-14 13:10:56,103 WARN  dfs.StateChange - BLOCK* NameSystem.addStoredBlock: Redundant addStoredBlock request received for blk_-4818305081009377296 on s10-crawlera:50010
>>
>>But I *don't* find anything in the datanode logs mentioning these blocks.
>>
>>Finally (perhaps in response to me killing this first fetch job?), we see our
>>first ClosedChannelException in the namenode log:
>>
>>  2006-11-14 13:40:44,634 WARN  ipc.Server - handler output error
>>  java.nio.channels.ClosedChannelException
>>    at sun.nio.ch.SocketChannelImpl.ensureWriteOpen(SocketChannelImpl.java:125)
>>    at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:294)
>>    at org.apache.hadoop.ipc.SocketChannelOutputStream.flushBuffer(SocketChannelOutputStream.java:120)
>>    at org.apache.hadoop.ipc.SocketChannelOutputStream.write(SocketChannelOutputStream.java:93)
>>    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>>    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>>    at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>>    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:486)
>>
>>This is associated with "unknown opcode" messages in most of the datanode logs:
>>
>>  s3-crawlera.prod.krugle.net: 2006-11-14 13:40:43,678 WARN dfs.DataNode - DataXCeiver
>>  s3-crawlera.prod.krugle.net: java.io.IOException: Unknown opcode for incoming data stream
>>  s3-crawlera.prod.krugle.net:    at org.apache.hadoop.dfs.DataNode$DataXceiver.run(DataNode.java:515)
>>  s3-crawlera.prod.krugle.net:    at java.lang.Thread.run(Thread.java:595)
>>
>>
>>--------------------------------------------------------------------------------
>>Here I did a stop-all.sh, deployed a version of nutch with a bit more logging,
>>and then did a start-all.sh
>>--------------------------------------------------------------------------------
>>
>>
>>The jobtracker log shows that it was apparently unable to connect to the
>>namenode just after it gets launched the second time. The connection error
>>repeats over and over again, but eventually we get a few messages about the
>>web server starting up that may indicate that the jobtracker was finally able
>>to connect to the namenode(?)
>>
>>  2006-11-14 13:59:52,321 WARN  mapred.JobTracker - Starting tracker
>>  java.net.ConnectException: Connection refused
>>    at java.net.PlainSocketImpl.socketConnect(Native Method)
>>    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
>>    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
>>    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
>>    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
>>    at java.net.Socket.connect(Socket.java:507)
>>    at java.net.Socket.connect(Socket.java:457)
>>    at java.net.Socket.<init>(Socket.java:365)
>>    at java.net.Socket.<init>(Socket.java:207)
>>    at org.apache.hadoop.ipc.Client$Connection.<init>(Client.java:113)
>>    at org.apache.hadoop.ipc.Client.getConnection(Client.java:359)
>>    at org.apache.hadoop.ipc.Client.call(Client.java:297)
>>    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:161)
>>    at org.apache.hadoop.dfs.$Proxy0.getProtocolVersion(Unknown Source)
>>    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:245)
>>    at org.apache.hadoop.dfs.DFSClient.<init>(DFSClient.java:103)
>>    at org.apache.hadoop.dfs.DistributedFileSystem.<init>(DistributedFileSystem.java:47)
>>    at org.apache.hadoop.fs.FileSystem.getNamed(FileSystem.java:101)
>>    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:86)
>>    at org.apache.hadoop.mapred.JobTracker.<init>(JobTracker.java:486)
>>    at org.apache.hadoop.mapred.JobTracker.startTracker(JobTracker.java:68)
>>    at org.apache.hadoop.mapred.JobTracker.main(JobTracker.java:1200)
>>  ...
>>  2006-11-14 14:00:18,352 WARN  mapred.JobTracker - Starting tracker
>>  java.net.ConnectException: Connection refused
>>    at java.net.PlainSocketImpl.socketConnect(Native Method)
>>    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
>>    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
>>    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
>>    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
>>    at java.net.Socket.connect(Socket.java:507)
>>    at java.net.Socket.connect(Socket.java:457)
>>    at java.net.Socket.<init>(Socket.java:365)
>>    at java.net.Socket.<init>(Socket.java:207)
>>    at org.apache.hadoop.ipc.Client$Connection.<init>(Client.java:113)
>>    at org.apache.hadoop.ipc.Client.getConnection(Client.java:359)
>>    at org.apache.hadoop.ipc.Client.call(Client.java:297)
>>    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:161)
>>    at org.apache.hadoop.dfs.$Proxy0.getProtocolVersion(Unknown Source)
>>    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:245)
>>    at org.apache.hadoop.dfs.DFSClient.<init>(DFSClient.java:103)
>>    at org.apache.hadoop.dfs.DistributedFileSystem.<init>(DistributedFileSystem.java:47)
>>    at org.apache.hadoop.fs.FileSystem.getNamed(FileSystem.java:101)
>>    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:86)
>>    at org.apache.hadoop.mapred.JobTracker.<init>(JobTracker.java:486)
>>    at org.apache.hadoop.mapred.JobTracker.startTracker(JobTracker.java:68)
>>    at org.apache.hadoop.mapred.JobTracker.main(JobTracker.java:1200)
>>  2006-11-14 14:00:19,516 INFO  util.Credential - Checking Resource aliases
>>  2006-11-14 14:00:19,534 INFO  http.HttpServer - Version Jetty/5.1.4
>>  2006-11-14 14:00:20,423 INFO  util.Container - Started org.mortbay.jetty.servlet.WebApplicationHandler@69267649
>>  2006-11-14 14:00:20,492 INFO  util.Container - Started WebApplicationContext[/,/]
>>  2006-11-14 14:00:20,493 INFO  util.Container - Started HttpContext[/logs,/logs]
>>  2006-11-14 14:00:20,493 INFO  util.Container - Started HttpContext[/static,/static]
>>  2006-11-14 14:00:20,496 INFO  http.SocketListener - Started SocketListener on 0.0.0.0:50030
>>  2006-11-14 14:00:20,496 INFO  util.Container - Started org.mortbay.jetty.Server@b6e39f
>>
>>Once the second crawl gets started
>>  2006-11-14 14:02:03,392 INFO  crawl.Injector - Injector: starting
>>the same issues with the new crawldb, the message queue, and redundant blocks
>>mentioned above appear again in the namenode log (not shown).
>>
>>The DFS/RPC problems finally begin to surface in the jobtracker log (and these
>>bubble up to tool output) several hours into the second crawl:
>>
>>  2006-11-14 17:07:27,539 WARN  fs.DFSClient - Problem renewing lease for DFSClient_-284911018: java.net.SocketTimeoutException: timed out waiting for rpc response
>>    at org.apache.hadoop.ipc.Client.call(Client.java:312)
>>    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:161)
>>    at org.apache.hadoop.dfs.$Proxy0.renewLease(Unknown Source)
>>    at org.apache.hadoop.dfs.DFSClient$LeaseChecker.run(DFSClient.java:440)
>>    at java.lang.Thread.run(Thread.java:595)
>>
>>Nothing special appears during this same timeframe in the namenode log (just
>>the continuing message queue and redundant blocks errors).
>>
>>Finally, there is an indication in the jobtracker log (embedded in the
>>continuing DFS/RPC problems) that the fetch job has died and is being garbage
>>collected:
>>
>>  2006-11-14 18:46:37,681 WARN  fs.DFSClient - Problem renewing lease for DFSClient_-284911018: java.net.SocketTimeoutException: timed out waiting for rpc response
>>    at org.apache.hadoop.ipc.Client.call(Client.java:312)
>>    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:161)
>>    at org.apache.hadoop.dfs.$Proxy0.renewLease(Unknown Source)
>>    at org.apache.hadoop.dfs.DFSClient$LeaseChecker.run(DFSClient.java:440)
>>    at java.lang.Thread.run(Thread.java:595)
>>
>>  2006-11-14 18:47:37,339 WARN  mapred.JobInProgress - Error cleaning up job_0005: java.net.SocketTimeoutException: timed out waiting for rpc response
>>  2006-11-14 18:47:38,696 WARN  fs.DFSClient - Problem renewing lease for DFSClient_-284911018: java.net.SocketTimeoutException: timed out waiting for rpc response
>>    at org.apache.hadoop.ipc.Client.call(Client.java:312)
>>    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:161)
>>    at org.apache.hadoop.dfs.$Proxy0.renewLease(Unknown Source)
>>    at org.apache.hadoop.dfs.DFSClient$LeaseChecker.run(DFSClient.java:440)
>>    at java.lang.Thread.run(Thread.java:595)
>>
>>About 20 minutes later, we finally see the first of a series of broken pipe
>>exceptions in the namenode log:
>>
>>  2006-11-14 19:09:54,440 WARN  ipc.Server - handler output error
>>  java.io.IOException: Broken pipe
>>    at sun.nio.ch.FileDispatcher.write0(Native Method)
>>    at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:29)
>>    at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:104)
>>    at sun.nio.ch.IOUtil.write(IOUtil.java:60)
>>    at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:302)
>>    at org.apache.hadoop.ipc.SocketChannelOutputStream.flushBuffer(SocketChannelOutputStream.java:120)
>>    at org.apache.hadoop.ipc.SocketChannelOutputStream.write(SocketChannelOutputStream.java:93)
>>    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>>    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>>    at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>>    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:486)
>>
>>About 30 minutes later, the first of a series of closed channel exceptions
>>appears in the namenode log (along with an indication that the namenode may
>>have lost connection to all but one of its datanodes):
>>
>>  2006-11-14 19:39:43,142 WARN  ipc.Server - handler output error
>>  java.nio.channels.ClosedChannelException
>>    at sun.nio.ch.SocketChannelImpl.ensureWriteOpen(SocketChannelImpl.java:125)
>>    at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:294)
>>    at org.apache.hadoop.ipc.SocketChannelOutputStream.flushBuffer(SocketChannelOutputStream.java:120)
>>    at org.apache.hadoop.ipc.SocketChannelOutputStream.write(SocketChannelOutputStream.java:93)
>>    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>>    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>>    at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>>    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:486)
>>  2006-11-14 19:39:43,142 WARN  fs.FSNamesystem - Replication requested of 3 is larger than cluster size (1). Using cluster size.
>>
>>The namenode process eventually dies, though the jobtracker survives (as do
>>all of the datanodes and tasktrackers on the slaves).
>>--
>>------------------------
>>Chris Schneider
>>TransPac Software, Inc.
>>Schmed@TransPac.com
>>------------------------


-- 
------------------------
Chris Schneider
TransPac Software, Inc.
Schmed@TransPac.com
------------------------

From MAILER-DAEMON Thu Nov 16 06:24:18 2006
Return-Path: 
 <hadoop-dev-return-5187-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12621 invoked from network); 16 Nov 2006 06:24:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 06:24:18 -0000
Received: (qmail 75602 invoked by uid 500); 16 Nov 2006 06:24:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75519 invoked by uid 500); 16 Nov 2006 06:24:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75494 invoked by uid 99); 16 Nov 2006 06:24:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 22:24:28 -0800
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 22:24:15 -0800
Received: from [192.168.1.100] (snvvpn2-10-72-76-c241.corp.yahoo.com
 [10.72.76.241])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kAG6Ng2K053192
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 22:23:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=KBqJ9Dh8Q8GE9iVqddZ4W3eXtUqC1CZ/EwduHl4Ha4UfQgTdrbmXxAjByFlfQGZf
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <010f01c70902$43f4a6c0$929015ac@ds.corp.yahoo.com>
References: <010f01c70902$43f4a6c0$929015ac@ds.corp.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9A9B7AA0-56F1-4688-A152-29536291F1E5@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Created: (HADOOP-713) dfs list operation is too expensive
Date: Wed, 15 Nov 2006 22:23:43 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Come on.  This is a time bomb.  Let's fix it.  Let's not wire it into  
our web UI.  That makes tree browsing dangerously expensive and sets  
us up to have users expect this misfeature be supported.

The goal is to keep things simple.  Expanding the deployment of  
unsustainable / unscalable features is a distraction.

Name node lockups are hardly a hypothetical problem for us.

-1


On Nov 15, 2006, at 2:06 PM, Yoram Arnon wrote:

> I agree with all that, except that that's how the ls command works  
> now,
> performance issues and all, and that will change only when we fix
> HADOOP-713. Until then, using that field is free - it's being computed
> anyway.
>
> That said, HADOOP-713 not a current pain point. Users running ls is  
> pretty
> much a non issue, since it's a rare operation, and it takes a  
> fraction of a
> second on the name node with our largish dfs. M-R jobs don't really  
> pay a
> penalty for this behaviour, since they normally execute on the last  
> level of
> the tree anyway, where the current behaviour is desirable.
> With all that in mind, the bug may stay in the queue for a while,  
> until more
> important issues are addressed.
> Until then, we may as well get a better UI.
>
> Yoram
>
>> -----Original Message-----
>> From: Eric Baldeschwieler [mailto:eric14@yahoo-inc.com]
>> Sent: Wednesday, November 15, 2006 1:11 PM
>> To: hadoop-dev@lucene.apache.org
>> Subject: Re: [jira] Created: (HADOOP-713) dfs list operation
>> is too expensive
>>
>> It is not free.  As I understand it, we are recursively walking the
>> namespace tree with every ls to get this.
>>
>> This is not a scalable design.  Even posix doesn't do this!
>>
>> This is a performance problem that will only get worse.  I suggest
>> removing this performance mistake and documenting the existence of
>> dfs -du, which is a rather familiar solution to most users.
>>
>> On Nov 15, 2006, at 12:19 PM, Yoram Arnon wrote:
>>
>>>  I opt for displaying the size in bytes for now, since it's
>>> computed anyway,
>>> is readily available for free, and improves the UI.
>>> If/when we fix HADOOP-713 we can replace the computation of size
>>> with a
>>> better value for #files.
>>> Let's not prevent an improvement just because it might change in
>>> the future.
>>> Yoram
>>>
>>>> -----Original Message-----
>>>> From: Eric Baldeschwieler [mailto:eric14@yahoo-inc.com]
>>>> Sent: Tuesday, November 14, 2006 7:10 PM
>>>> To: hadoop-dev@lucene.apache.org
>>>> Subject: Re: [jira] Created: (HADOOP-713) dfs list operation
>>>> is too expensive
>>>>
>>>> So let's display nothing for now and revisit this once we have a
>>>> cleaner CRC story.
>>>>
>>>>
>>>> On Nov 14, 2006, at 10:55 AM, Hairong Kuang wrote:
>>>>
>>>>> Setting the size of a directory to be the # of files is a good
>>>>> idea. But the
>>>>> problem is that dfs name node has no idea of checksum
>>>> files. So the
>>>>> number
>>>>> of files include that of checksum files. But what's displayed at
>>>>> the client
>>>>> side has filtered out the checksum files. So the # of files does
>>>>> not match
>>>>> what's really displayed at the client side.
>>>>>
>>>>> Hairong
>>>>>
>>>>> -----Original Message-----
>>>>> From: Arkady Borkovsky [mailto:arkady@yahoo-inc.com]
>>>>> Sent: Monday, November 13, 2006 5:07 PM
>>>>> To: hadoop-dev@lucene.apache.org
>>>>> Subject: Re: [jira] Created: (HADOOP-713) dfs list
>> operation is too
>>>>> expensive
>>>>>
>>>>> When listing a directory, for directory entries it may be more
>>>>> useful to
>>>>> display the number of files in a directory, rather than the number
>>>>> of bytes
>>>>> used by all the files in the directory and its subdirectories.
>>>>> This a subjective opinion -- comments?
>>>>>
>>>>> (Currently, the value displayed subdirectory is "0")
>>>>>
>>>>> On Nov 13, 2006, at 3:25 PM, Hairong Kuang (JIRA) wrote:
>>>>>
>>>>>> dfs list operation is too expensive
>>>>>> -----------------------------------
>>>>>>
>>>>>>                  Key: HADOOP-713
>>>>>>                  URL:
>>>> http://issues.apache.org/jira/browse/HADOOP-713
>>>>>>              Project: Hadoop
>>>>>>           Issue Type: Improvement
>>>>>>           Components: dfs
>>>>>>     Affects Versions: 0.8.0
>>>>>>             Reporter: Hairong Kuang
>>>>>>
>>>>>>
>>>>>> A list request to dfs returns an array of DFSFileInfo. A
>>>> DFSFileInfo
>>>>>> of a directory contains a field called contentsLen,
>> indicating its
>>>>>> size  which gets computed at the namenode side by
>> resursively going
>>>>>> through its subdirs. At the same time, the whole dfs directory
>>>>>> tree is
>>>>>> locked.
>>>>>>
>>>>>> The list operation is used a lot by DFSClient for listing a
>>>>>> directory,
>>>>>> getting a file's size and # of replicas, and getting the
>>>> size of dfs.
>>>>>> Only the last operation needs the field contentsLen to
>> be computed.
>>>>>>
>>>>>> To reduce its cost, we can add a flag to the list request.
>>>>>> ContentsLen
>>>>>> is computed If the flag is set. By default, the flag is false.
>>>>>>
>>>>>> --
>>>>>> This message is automatically generated by JIRA.
>>>>>> -
>>>>>> If you think it was sent incorrectly contact one of the
>>>>>> administrators:
>>>>>> http://issues.apache.org/jira/secure/Administrators.jspa
>>>>>> -
>>>>>> For more information on JIRA, see:
>>>>>> http://www.atlassian.com/software/jira
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>
>>
>>
>


From MAILER-DAEMON Thu Nov 16 07:03:02 2006
Return-Path: 
 <hadoop-dev-return-5188-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31329 invoked from network); 16 Nov 2006 07:03:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 07:03:02 -0000
Received: (qmail 18111 invoked by uid 500); 16 Nov 2006 07:03:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18084 invoked by uid 500); 16 Nov 2006 07:03:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18069 invoked by uid 99); 16 Nov 2006 07:03:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 23:03:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 23:03:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 68220714328
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 23:02:40 -0800 (PST)
Message-ID: <28114689.1163660560423.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 23:02:40 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-724) bin/hadoop:111 uses java directly,
 it should use JAVA_HOME
In-Reply-To: <18503374.1163617001480.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-724?page=comments#action_12450295 ] 
            
Arun C Murthy commented on HADOOP-724:
--------------------------------------

Hmm... we could do that; however it wouldn't be useful if we are going to check-in prebuilt Linux libraries into lib/native/Linux-i386-32 ... 
What are your current thoughts on checking-in prebuilt linux libs Doug?

> bin/hadoop:111 uses java directly, it should use JAVA_HOME
> ----------------------------------------------------------
>
>                 Key: HADOOP-724
>                 URL: http://issues.apache.org/jira/browse/HADOOP-724
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>            Reporter: Sanjay Dahiya
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-724_20061116.patch
>
>
> JAVA_PLATFORM=`CLASSPATH=${CLASSPATH} java org.apache.hadoop.util.PlatformName`
> should use JAVA_HOME instead of java.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 07:07:00 2006
Return-Path: 
 <hadoop-dev-return-5189-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32700 invoked from network); 16 Nov 2006 07:07:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 07:07:00 -0000
Received: (qmail 25162 invoked by uid 500); 16 Nov 2006 07:07:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25140 invoked by uid 500); 16 Nov 2006 07:07:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25131 invoked by uid 99); 16 Nov 2006 07:07:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 23:07:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 23:06:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1F4D2714327
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 23:06:37 -0800 (PST)
Message-ID: <18260067.1163660797125.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 23:06:37 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-729) packageNativeHadoop.sh has
 non-standard sh code
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

packageNativeHadoop.sh has non-standard sh code
-----------------------------------------------

                 Key: HADOOP-729
                 URL: http://issues.apache.org/jira/browse/HADOOP-729
             Project: Hadoop
          Issue Type: Bug
          Components: scripts
         Environment: Solaris
            Reporter: Arun C Murthy
         Assigned To: Arun C Murthy
            Priority: Critical
             Fix For: 0.9.0


packageNativeHadoop.sh uses the shell check "-e" which fails on Solaris; this caused a nightly build to fail.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 07:12:59 2006
Return-Path: 
 <hadoop-dev-return-5190-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33586 invoked from network); 16 Nov 2006 07:12:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 07:12:59 -0000
Received: (qmail 32095 invoked by uid 500); 16 Nov 2006 07:13:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32064 invoked by uid 500); 16 Nov 2006 07:13:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32055 invoked by uid 99); 16 Nov 2006 07:13:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 23:13:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 23:12:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 418D2714327
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 23:12:38 -0800 (PST)
Message-ID: <7386069.1163661158265.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 23:12:38 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-729) packageNativeHadoop.sh has
 non-standard sh code
In-Reply-To: <18260067.1163660797125.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-729?page=all ]

Arun C Murthy updated HADOOP-729:
---------------------------------

    Attachment: packageNativeHadoop.sh.patch

Fixed to use "-d" instead of "-e".

> packageNativeHadoop.sh has non-standard sh code
> -----------------------------------------------
>
>                 Key: HADOOP-729
>                 URL: http://issues.apache.org/jira/browse/HADOOP-729
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>         Environment: Solaris
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>            Priority: Critical
>             Fix For: 0.9.0
>
>         Attachments: packageNativeHadoop.sh.patch
>
>
> packageNativeHadoop.sh uses the shell check "-e" which fails on Solaris; this caused a nightly build to fail.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 07:15:00 2006
Return-Path: 
 <hadoop-dev-return-5191-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33867 invoked from network); 16 Nov 2006 07:15:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 07:15:00 -0000
Received: (qmail 36882 invoked by uid 500); 16 Nov 2006 07:15:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36851 invoked by uid 500); 16 Nov 2006 07:15:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36841 invoked by uid 99); 16 Nov 2006 07:15:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 23:15:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 23:14:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3C8D1714327
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 23:14:38 -0800 (PST)
Message-ID: <20267375.1163661278245.JavaMail.jira@brutus>
Date: Wed, 15 Nov 2006 23:14:38 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-729) packageNativeHadoop.sh has
 non-standard sh code
In-Reply-To: <18260067.1163660797125.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-729?page=all ]

Arun C Murthy updated HADOOP-729:
---------------------------------

    Status: Patch Available  (was: Open)

Can you please verify this Doug? I don't have access to a Solaris box.

> packageNativeHadoop.sh has non-standard sh code
> -----------------------------------------------
>
>                 Key: HADOOP-729
>                 URL: http://issues.apache.org/jira/browse/HADOOP-729
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>         Environment: Solaris
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>            Priority: Critical
>             Fix For: 0.9.0
>
>         Attachments: packageNativeHadoop.sh.patch
>
>
> packageNativeHadoop.sh uses the shell check "-e" which fails on Solaris; this caused a nightly build to fail.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 07:29:35 2006
Return-Path: 
 <hadoop-dev-return-5192-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37623 invoked from network); 16 Nov 2006 07:29:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 07:29:35 -0000
Received: (qmail 50123 invoked by uid 500); 16 Nov 2006 07:29:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49935 invoked by uid 500); 16 Nov 2006 07:29:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49926 invoked by uid 99); 16 Nov 2006 07:29:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 23:29:45 -0800
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 23:29:32 -0800
Received: from [192.168.1.66] (snvvpn2-10-72-76-c243.corp.yahoo.com
 [10.72.76.243])
	by rsmtp1.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kAG7T6cx062612
	for <hadoop-dev@lucene.apache.org>; Wed, 15 Nov 2006 23:29:06 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=Vjtd63Wxb0immQqnVOqLSbWwYANg8e+m8iUKEIcPLPwlhTXWt6pBosoOLEHAhicJ
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <9A9B7AA0-56F1-4688-A152-29536291F1E5@yahoo-inc.com>
References: <010f01c70902$43f4a6c0$929015ac@ds.corp.yahoo.com>
 <9A9B7AA0-56F1-4688-A152-29536291F1E5@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <0a93a9c05dacb7dff37d29f886d94429@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Created: (HADOOP-713) dfs list operation is too expensive
Date: Wed, 15 Nov 2006 23:29:04 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org

Eric,

there is some difference between the foundation components and user 
facing components like UI.
While foundation is expected to be stable and compatible from release 
to release,
UI is expected to evolve, continuously becoming more and more useful 
and powerful, and providing as much of useful functionality at any 
given time as possible.  The specific issue discussed in this thread 
(what datums to show in directory listing for a subdirectory) is pretty 
minor -- the more the better, commensurate with resources, and nothing 
too misleading is the answer,
But as the matter of design principles, user facing components have 
different nature than the infrastructure.  There can be no "time bomb" 
in the UI.

-- ab

On Nov 15, 2006, at 10:23 PM, Eric Baldeschwieler wrote:

> Come on.  This is a time bomb.  Let's fix it.  Let's not wire it into 
> our web UI.  That makes tree browsing dangerously expensive and sets 
> us up to have users expect this misfeature be supported.
>
> The goal is to keep things simple.  Expanding the deployment of 
> unsustainable / unscalable features is a distraction.
>
> Name node lockups are hardly a hypothetical problem for us.
>
> -1
>
>
> On Nov 15, 2006, at 2:06 PM, Yoram Arnon wrote:
>
>> I agree with all that, except that that's how the ls command works 
>> now,
>> performance issues and all, and that will change only when we fix
>> HADOOP-713. Until then, using that field is free - it's being computed
>> anyway.
>>
>> That said, HADOOP-713 not a current pain point. Users running ls is 
>> pretty
>> much a non issue, since it's a rare operation, and it takes a 
>> fraction of a
>> second on the name node with our largish dfs. M-R jobs don't really 
>> pay a
>> penalty for this behaviour, since they normally execute on the last 
>> level of
>> the tree anyway, where the current behaviour is desirable.
>> With all that in mind, the bug may stay in the queue for a while, 
>> until more
>> important issues are addressed.
>> Until then, we may as well get a better UI.
>>
>> Yoram
>>
>>> -----Original Message-----
>>> From: Eric Baldeschwieler [mailto:eric14@yahoo-inc.com]
>>> Sent: Wednesday, November 15, 2006 1:11 PM
>>> To: hadoop-dev@lucene.apache.org
>>> Subject: Re: [jira] Created: (HADOOP-713) dfs list operation
>>> is too expensive
>>>
>>> It is not free.  As I understand it, we are recursively walking the
>>> namespace tree with every ls to get this.
>>>
>>> This is not a scalable design.  Even posix doesn't do this!
>>>
>>> This is a performance problem that will only get worse.  I suggest
>>> removing this performance mistake and documenting the existence of
>>> dfs -du, which is a rather familiar solution to most users.
>>>
>>> On Nov 15, 2006, at 12:19 PM, Yoram Arnon wrote:
>>>
>>>>  I opt for displaying the size in bytes for now, since it's
>>>> computed anyway,
>>>> is readily available for free, and improves the UI.
>>>> If/when we fix HADOOP-713 we can replace the computation of size
>>>> with a
>>>> better value for #files.
>>>> Let's not prevent an improvement just because it might change in
>>>> the future.
>>>> Yoram
>>>>
>>>>> -----Original Message-----
>>>>> From: Eric Baldeschwieler [mailto:eric14@yahoo-inc.com]
>>>>> Sent: Tuesday, November 14, 2006 7:10 PM
>>>>> To: hadoop-dev@lucene.apache.org
>>>>> Subject: Re: [jira] Created: (HADOOP-713) dfs list operation
>>>>> is too expensive
>>>>>
>>>>> So let's display nothing for now and revisit this once we have a
>>>>> cleaner CRC story.
>>>>>
>>>>>
>>>>> On Nov 14, 2006, at 10:55 AM, Hairong Kuang wrote:
>>>>>
>>>>>> Setting the size of a directory to be the # of files is a good
>>>>>> idea. But the
>>>>>> problem is that dfs name node has no idea of checksum
>>>>> files. So the
>>>>>> number
>>>>>> of files include that of checksum files. But what's displayed at
>>>>>> the client
>>>>>> side has filtered out the checksum files. So the # of files does
>>>>>> not match
>>>>>> what's really displayed at the client side.
>>>>>>
>>>>>> Hairong
>>>>>>
>>>>>> -----Original Message-----
>>>>>> From: Arkady Borkovsky [mailto:arkady@yahoo-inc.com]
>>>>>> Sent: Monday, November 13, 2006 5:07 PM
>>>>>> To: hadoop-dev@lucene.apache.org
>>>>>> Subject: Re: [jira] Created: (HADOOP-713) dfs list
>>> operation is too
>>>>>> expensive
>>>>>>
>>>>>> When listing a directory, for directory entries it may be more
>>>>>> useful to
>>>>>> display the number of files in a directory, rather than the number
>>>>>> of bytes
>>>>>> used by all the files in the directory and its subdirectories.
>>>>>> This a subjective opinion -- comments?
>>>>>>
>>>>>> (Currently, the value displayed subdirectory is "0")
>>>>>>
>>>>>> On Nov 13, 2006, at 3:25 PM, Hairong Kuang (JIRA) wrote:
>>>>>>
>>>>>>> dfs list operation is too expensive
>>>>>>> -----------------------------------
>>>>>>>
>>>>>>>                  Key: HADOOP-713
>>>>>>>                  URL:
>>>>> http://issues.apache.org/jira/browse/HADOOP-713
>>>>>>>              Project: Hadoop
>>>>>>>           Issue Type: Improvement
>>>>>>>           Components: dfs
>>>>>>>     Affects Versions: 0.8.0
>>>>>>>             Reporter: Hairong Kuang
>>>>>>>
>>>>>>>
>>>>>>> A list request to dfs returns an array of DFSFileInfo. A
>>>>> DFSFileInfo
>>>>>>> of a directory contains a field called contentsLen,
>>> indicating its
>>>>>>> size  which gets computed at the namenode side by
>>> resursively going
>>>>>>> through its subdirs. At the same time, the whole dfs directory
>>>>>>> tree is
>>>>>>> locked.
>>>>>>>
>>>>>>> The list operation is used a lot by DFSClient for listing a
>>>>>>> directory,
>>>>>>> getting a file's size and # of replicas, and getting the
>>>>> size of dfs.
>>>>>>> Only the last operation needs the field contentsLen to
>>> be computed.
>>>>>>>
>>>>>>> To reduce its cost, we can add a flag to the list request.
>>>>>>> ContentsLen
>>>>>>> is computed If the flag is set. By default, the flag is false.
>>>>>>>
>>>>>>> --
>>>>>>> This message is automatically generated by JIRA.
>>>>>>> -
>>>>>>> If you think it was sent incorrectly contact one of the
>>>>>>> administrators:
>>>>>>> http://issues.apache.org/jira/secure/Administrators.jspa
>>>>>>> -
>>>>>>> For more information on JIRA, see:
>>>>>>> http://www.atlassian.com/software/jira
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>
>>>
>>>
>>
>


From MAILER-DAEMON Thu Nov 16 08:08:59 2006
Return-Path: 
 <hadoop-dev-return-5193-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56338 invoked from network); 16 Nov 2006 08:08:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 08:08:59 -0000
Received: (qmail 3555 invoked by uid 500); 16 Nov 2006 08:09:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3532 invoked by uid 500); 16 Nov 2006 08:09:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3523 invoked by uid 99); 16 Nov 2006 08:09:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 00:09:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 00:08:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 26330714328
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 00:08:37 -0800 (PST)
Message-ID: <18309280.1163664517154.JavaMail.jira@brutus>
Date: Thu, 16 Nov 2006 00:08:37 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-730) Local file system uses copy to
 implement rename
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Local file system uses copy to implement rename
-----------------------------------------------

                 Key: HADOOP-730
                 URL: http://issues.apache.org/jira/browse/HADOOP-730
             Project: Hadoop
          Issue Type: Bug
          Components: fs
    Affects Versions: 0.8.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.9.0


There is a variable LocalFileSystem.useCopyForRename that is set to true. When true, the local file system will implement rename as a copy followed by a delete. This is likely a performance problem. Is there a reason that useCopyForRename is set?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 14:40:09 2006
Return-Path: 
 <hadoop-dev-return-5194-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15536 invoked from network); 16 Nov 2006 14:40:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 14:40:09 -0000
Received: (qmail 39993 invoked by uid 500); 16 Nov 2006 14:40:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39973 invoked by uid 500); 16 Nov 2006 14:40:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39964 invoked by uid 99); 16 Nov 2006 14:40:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 06:40:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dpp@athena.com designates
 207.7.137.24 as permitted sender)
Received: from [207.7.137.24] (HELO mailhost.lostlake.org) (207.7.137.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 06:40:04 -0800
Received: from [10.57.4.104] ([75.2.151.108])
	(authenticated user dpp@athena.com)
	by mailhost.lostlake.org
	(using TLSv1/SSLv3 with cipher RC4-SHA (128 bits))
	for hadoop-dev@lucene.apache.org;
	Thu, 16 Nov 2006 06:39:40 -0800
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <94C60AE0-EF3E-4A12-B146-59BDF98544A0@athena.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: David Pollak <dpp@athena.com>
Subject: Administrative Request
Date: Thu, 16 Nov 2006 06:41:41 -0800
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Folks,

Would it be possible to add [Hadoop-Dev] to the subject of each  
message in this mailing list?  I receive hundreds of pieces of spam a  
day (this is after filtering... with filter off, it's > 5,000  
pieces.)  One of my mental filters is looking for people I know or  
subjects I care about and I've found that I've been deleting too many  
Hadoop-Dev messages accidentally.

Thanks,

David



From MAILER-DAEMON Thu Nov 16 16:03:11 2006
Return-Path: 
 <hadoop-dev-return-5195-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52349 invoked from network); 16 Nov 2006 16:03:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 16:03:11 -0000
Received: (qmail 77561 invoked by uid 500); 16 Nov 2006 16:03:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77535 invoked by uid 500); 16 Nov 2006 16:03:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77526 invoked by uid 99); 16 Nov 2006 16:03:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 08:03:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.230.241.31] (HELO fed1rmmtao08.cox.net) (68.230.241.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 08:03:05 -0800
Received: from fed1rmimpo01.cox.net ([70.169.32.71])
          by fed1rmmtao08.cox.net
          (InterMail vM.6.01.06.03 201-2131-130-104-20060516) with ESMTP
          id
 <20061116160244.SFT18207.fed1rmmtao08.cox.net@fed1rmimpo01.cox.net>
          for <hadoop-dev@lucene.apache.org>;
          Thu, 16 Nov 2006 11:02:44 -0500
Received: from [192.168.1.101] ([70.181.87.35])
	by fed1rmimpo01.cox.net with bizsmtp
	id nU2E1V00V0ll8Vy0000000; Thu, 16 Nov 2006 11:02:15 -0500
Message-ID: <455C8BA9.7090902@pagesmiths.com>
Date: Thu, 16 Nov 2006 08:02:49 -0800
From: Jim White <jim@pagesmiths.com>
User-Agent: Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US;
 rv:1.7.11) Gecko/20050727
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Administrative Request
References: <94C60AE0-EF3E-4A12-B146-59BDF98544A0@athena.com>
In-Reply-To: <94C60AE0-EF3E-4A12-B146-59BDF98544A0@athena.com>
X-Enigmail-Version: 0.93.0.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

David Pollak wrote:

> Would it be possible to add [Hadoop-Dev] to the subject of each  message
> in this mailing list?  I receive hundreds of pieces of spam a  day (this
> is after filtering... with filter off, it's > 5,000  pieces.)  One of my
> mental filters is looking for people I know or  subjects I care about
> and I've found that I've been deleting too many  Hadoop-Dev messages
> accidentally.

I totally relate as I'm in the same boat with mail volume.  But I don't
think adding [hadoop-dev] is really helpful.  The subjects here are
already pretty long.

I set up filters for my mailing lists so that they go into their own
folders based on the headers.  If you use "show all headers" or "show
message source" you will see that there is a:

List-Id: <hadoop-dev.lucene.apache.org>

So I have a rule that looks for contains "hadoop" in the the List-Id header.

Of course that doesn't help off-list replies, and occasionally I do find
messages that I have to retrieve from the spam filter which apparently
doesn't like excessive quoting.

Jim


From MAILER-DAEMON Thu Nov 16 17:46:01 2006
Return-Path: 
 <hadoop-dev-return-5196-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94436 invoked from network); 16 Nov 2006 17:46:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 17:46:01 -0000
Received: (qmail 49138 invoked by uid 500); 16 Nov 2006 17:46:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49108 invoked by uid 500); 16 Nov 2006 17:46:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49081 invoked by uid 99); 16 Nov 2006 17:46:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 09:46:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 09:45:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ED940714326
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 09:45:38 -0800 (PST)
Message-ID: <11298222.1163699138970.JavaMail.jira@brutus>
Date: Thu, 16 Nov 2006 09:45:38 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-657) Free temporary space should be
 modelled better
In-Reply-To: <11001957.1162254376612.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-657?page=comments#action_12450470 ] 
            
Arun C Murthy commented on HADOOP-657:
--------------------------------------

I see the value in Doug's suggestion... for e.g. at some point in the future we might also put in metrics like CPU load, VM stats etc. and this would let the JobTracker make 'smarter' decisions about which task to assign to which TaskTrackers i.e. CPU-bound tasks to IO-laden TTs and vice-versa. 

I do agree that it might be a very futuristic scenario, but the point is to keep the infrastructure robust when we can...

> Free temporary space should be modelled better
> ----------------------------------------------
>
>                 Key: HADOOP-657
>                 URL: http://issues.apache.org/jira/browse/HADOOP-657
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>
> Currently, there is a configurable size that must be free for a task tracker to accept a new task. However, that isn't a very good model of what the task is likely to take. I'd like to propose:
> Map tasks:  totalInputSize * conf.getFloat("map.output.growth.factor", 1.0) / numMaps
> Reduce tasks: totalInputSize * 2 * conf.getFloat("map.output.growth.factor", 1.0) / numReduces
> where totalInputSize is the size of all the maps inputs for the given job.
> To start a new task, 
>   newTaskAllocation + (sum over running tasks of (1.0 - done) * allocation) >= 
>        free disk * conf.getFloat("mapred.max.scratch.allocation", 0.90);
> So in English, we will model the expected sizes of tasks and only task tasks that should leave us a 10% margin. With:
> map.output.growth.factor -- the relative size of the transient data relative to the map inputs
> mapred.max.scratch.allocation -- the maximum amount of our disk we want to allocate to tasks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 17:52:00 2006
Return-Path: 
 <hadoop-dev-return-5197-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96198 invoked from network); 16 Nov 2006 17:52:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 17:52:00 -0000
Received: (qmail 60489 invoked by uid 500); 16 Nov 2006 17:52:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60462 invoked by uid 500); 16 Nov 2006 17:52:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60448 invoked by uid 99); 16 Nov 2006 17:52:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 09:52:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 09:51:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 023D971431A
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 09:51:39 -0800 (PST)
Message-ID: <18415314.1163699499006.JavaMail.jira@brutus>
Date: Thu, 16 Nov 2006 09:51:39 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-657) Free temporary space should be
 modelled better
In-Reply-To: <11001957.1162254376612.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-657?page=comments#action_12450471 ] 
            
Owen O'Malley commented on HADOOP-657:
--------------------------------------

Actually, I'd rather have the unallocated disk space in the heartbeat, because when HADOOP-639 is implemented, the JobTracker should be given fresh information to decide which tasks should be launched there.

> Free temporary space should be modelled better
> ----------------------------------------------
>
>                 Key: HADOOP-657
>                 URL: http://issues.apache.org/jira/browse/HADOOP-657
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>
> Currently, there is a configurable size that must be free for a task tracker to accept a new task. However, that isn't a very good model of what the task is likely to take. I'd like to propose:
> Map tasks:  totalInputSize * conf.getFloat("map.output.growth.factor", 1.0) / numMaps
> Reduce tasks: totalInputSize * 2 * conf.getFloat("map.output.growth.factor", 1.0) / numReduces
> where totalInputSize is the size of all the maps inputs for the given job.
> To start a new task, 
>   newTaskAllocation + (sum over running tasks of (1.0 - done) * allocation) >= 
>        free disk * conf.getFloat("mapred.max.scratch.allocation", 0.90);
> So in English, we will model the expected sizes of tasks and only task tasks that should leave us a 10% margin. With:
> map.output.growth.factor -- the relative size of the transient data relative to the map inputs
> mapred.max.scratch.allocation -- the maximum amount of our disk we want to allocate to tasks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 18:00:01 2006
Return-Path: 
 <hadoop-dev-return-5198-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99864 invoked from network); 16 Nov 2006 18:00:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 18:00:01 -0000
Received: (qmail 79087 invoked by uid 500); 16 Nov 2006 18:00:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79062 invoked by uid 500); 16 Nov 2006 18:00:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79053 invoked by uid 99); 16 Nov 2006 18:00:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 10:00:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 09:59:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1E38D714324
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 09:59:39 -0800 (PST)
Message-ID: <30852466.1163699979121.JavaMail.jira@brutus>
Date: Thu, 16 Nov 2006 09:59:39 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-657) Free temporary space should be
 modelled better
In-Reply-To: <11001957.1162254376612.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-657?page=comments#action_12450472 ] 
            
Doug Cutting commented on HADOOP-657:
-------------------------------------

> I'd rather have the unallocated disk space in the heartbeat [ ...]

I agree, but I think we should use a general mechanism to route metrics to the jobtracker through heartbeats, rather than hack things in one-by-one.

> Free temporary space should be modelled better
> ----------------------------------------------
>
>                 Key: HADOOP-657
>                 URL: http://issues.apache.org/jira/browse/HADOOP-657
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>
> Currently, there is a configurable size that must be free for a task tracker to accept a new task. However, that isn't a very good model of what the task is likely to take. I'd like to propose:
> Map tasks:  totalInputSize * conf.getFloat("map.output.growth.factor", 1.0) / numMaps
> Reduce tasks: totalInputSize * 2 * conf.getFloat("map.output.growth.factor", 1.0) / numReduces
> where totalInputSize is the size of all the maps inputs for the given job.
> To start a new task, 
>   newTaskAllocation + (sum over running tasks of (1.0 - done) * allocation) >= 
>        free disk * conf.getFloat("mapred.max.scratch.allocation", 0.90);
> So in English, we will model the expected sizes of tasks and only task tasks that should leave us a 10% margin. With:
> map.output.growth.factor -- the relative size of the transient data relative to the map inputs
> mapred.max.scratch.allocation -- the maximum amount of our disk we want to allocate to tasks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 18:05:33 2006
Return-Path: 
 <hadoop-dev-return-5199-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3267 invoked from network); 16 Nov 2006 18:05:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 18:05:33 -0000
Received: (qmail 88510 invoked by uid 500); 16 Nov 2006 18:05:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88486 invoked by uid 500); 16 Nov 2006 18:05:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88477 invoked by uid 99); 16 Nov 2006 18:05:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 10:05:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.148.227.155] (HELO rwcrmhc15.comcast.net)
 (216.148.227.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 10:05:27 -0800
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc15) with ESMTP
          id <20061116180506m1500c0reqe>; Thu, 16 Nov 2006 18:05:06 +0000
Message-ID: <455CA851.9010406@apache.org>
Date: Thu, 16 Nov 2006 10:05:05 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Administrative Request
References: <94C60AE0-EF3E-4A12-B146-59BDF98544A0@athena.com>
In-Reply-To: <94C60AE0-EF3E-4A12-B146-59BDF98544A0@athena.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

David Pollak wrote:
> Would it be possible to add [Hadoop-Dev] to the subject of each message 
> in this mailing list?

It might be possible, but it is not the Apache convention.  You can use 
a filter to file messages by list-id, or you you can subscribe under a 
different email address.

Doug

From MAILER-DAEMON Thu Nov 16 18:18:11 2006
Return-Path: 
 <hadoop-dev-return-5200-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5537 invoked from network); 16 Nov 2006 18:18:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 18:18:11 -0000
Received: (qmail 10578 invoked by uid 500); 16 Nov 2006 18:18:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10553 invoked by uid 500); 16 Nov 2006 18:18:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10529 invoked by uid 99); 16 Nov 2006 18:18:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 10:18:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 10:17:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 43C99714324
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 10:17:38 -0800 (PST)
Message-ID: <16522803.1163701058275.JavaMail.jira@brutus>
Date: Thu, 16 Nov 2006 10:17:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-730) Local file system uses copy to
 implement rename
In-Reply-To: <18309280.1163664517154.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-730?page=comments#action_12450476 ] 
            
Doug Cutting commented on HADOOP-730:
-------------------------------------

I think the issue was that rename isn't guaranteed to work across volumes.  Linux 'mv' typically works across volumes these days, by resorting to copying, but I'm not sure what Java's file rename does.


> Local file system uses copy to implement rename
> -----------------------------------------------
>
>                 Key: HADOOP-730
>                 URL: http://issues.apache.org/jira/browse/HADOOP-730
>             Project: Hadoop
>          Issue Type: Bug
>          Components: fs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>
> There is a variable LocalFileSystem.useCopyForRename that is set to true. When true, the local file system will implement rename as a copy followed by a delete. This is likely a performance problem. Is there a reason that useCopyForRename is set?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 18:28:01 2006
Return-Path: 
 <hadoop-dev-return-5201-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8956 invoked from network); 16 Nov 2006 18:28:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 18:28:01 -0000
Received: (qmail 33064 invoked by uid 500); 16 Nov 2006 18:28:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33038 invoked by uid 500); 16 Nov 2006 18:28:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33029 invoked by uid 99); 16 Nov 2006 18:28:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 10:28:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 10:27:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1F9B8714324
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 10:27:39 -0800 (PST)
Message-ID: <15663013.1163701659126.JavaMail.jira@brutus>
Date: Thu, 16 Nov 2006 10:27:39 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-724) bin/hadoop:111 uses java directly,
 it should use JAVA_HOME
In-Reply-To: <18503374.1163617001480.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-724?page=comments#action_12450479 ] 
            
Doug Cutting commented on HADOOP-724:
-------------------------------------

> What are your current thoughts on checking-in prebuilt linux libs Doug?

I'm not sure.  Not comitting them means they'll never be out of date.  On the other hand, it means that folks who wish to use them must install a native build environment (gcc, etc.).  The proper way to do this is to package different downloads for different platforms, a 32-bit linux tar file, a Windows tar file, etc.  Perhaps the primary release could be platform independent, then we could also release platform-specific native libraries as a separate download?  What do others think?

In summary, I'm reluctant to commit them until we have a bit more experience.  Given that, we might as well avoid launching another JVM per command.

> bin/hadoop:111 uses java directly, it should use JAVA_HOME
> ----------------------------------------------------------
>
>                 Key: HADOOP-724
>                 URL: http://issues.apache.org/jira/browse/HADOOP-724
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>            Reporter: Sanjay Dahiya
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-724_20061116.patch
>
>
> JAVA_PLATFORM=`CLASSPATH=${CLASSPATH} java org.apache.hadoop.util.PlatformName`
> should use JAVA_HOME instead of java.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 18:29:48 2006
Return-Path: 
 <hadoop-dev-return-5202-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9457 invoked from network); 16 Nov 2006 18:29:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 18:29:48 -0000
Received: (qmail 34764 invoked by uid 500); 16 Nov 2006 18:29:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34726 invoked by uid 500); 16 Nov 2006 18:29:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34712 invoked by uid 99); 16 Nov 2006 18:29:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 10:29:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [204.127.192.81] (HELO rwcrmhc11.comcast.net) (204.127.192.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 10:29:43 -0800
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc11) with ESMTP
          id <20061116182923m110019ma2e>; Thu, 16 Nov 2006 18:29:23 +0000
Message-ID: <455CAE02.6030309@apache.org>
Date: Thu, 16 Nov 2006 10:29:22 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Created: (HADOOP-713) dfs list operation is too expensive
References: <002701c708fe$77c2d0c0$d09215ac@ds.corp.yahoo.com>
In-Reply-To: <002701c708fe$77c2d0c0$d09215ac@ds.corp.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hairong Kuang wrote:
> "Dfs -du" is implemented using list requests. So I propose that we support
> two types of list: one computing subtree size and one not.

Put another way: there should be a namenode method that computes a 
subtree size: we don't want to compute these client-side.

Doug

From MAILER-DAEMON Thu Nov 16 18:30:00 2006
Return-Path: 
 <hadoop-dev-return-5203-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9529 invoked from network); 16 Nov 2006 18:30:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 18:30:00 -0000
Received: (qmail 35248 invoked by uid 500); 16 Nov 2006 18:30:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35069 invoked by uid 500); 16 Nov 2006 18:30:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35060 invoked by uid 99); 16 Nov 2006 18:30:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 10:30:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 10:29:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 05C67714326
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 10:29:39 -0800 (PST)
Message-ID: <17414960.1163701779021.JavaMail.jira@brutus>
Date: Thu, 16 Nov 2006 10:29:39 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-723) Race condition exists in the method
 MapOutputLocation.getFile
In-Reply-To: <5078563.1163609197143.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-723?page=all ]

Owen O'Malley updated HADOOP-723:
---------------------------------

    Attachment: map-out-lost.patch

This patch:
  1. Gives each map copier thread a unique id.
  2. Uses the id to generate unique names for the fetched files.
  3. Adds timeouts for the connect/read in getFile.
  4. Adds checks for interrupted in getFile.
  5. Add exception handlers inside the while loop of the map output copier threads and the map output lease thread.
  6. Add synchronization around the renames of the temporary files so that there aren't any race conditions.

We might consider putting this one into a 0.8.1 release.

> Race condition exists in the method MapOutputLocation.getFile
> -------------------------------------------------------------
>
>                 Key: HADOOP-723
>                 URL: http://issues.apache.org/jira/browse/HADOOP-723
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Devaraj Das
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>         Attachments: map-out-lost.patch
>
>
> There seems to be a race condition in the way the Reduces copy the map output files from the Maps. If a copier is blocked in the connect method (in the beginning of the method MapOutputLocation.getFile) to a Jetty on a Map, and the MapCopyLeaseChecker detects that the copier was idle for too long, it will go ahead and issue a interrupt (read 'kill') to this thread and create a new Copier thread. However, the copier, currently blocked trying to connect to Jetty on a Map, doesn't actually get killed until the connect timeout expires and as soon as the connect comes out (with an IOException), it will delete the map output file which actually could have been (successfully) created by the new Copier thread. This leads to the Sort phase for that reducer failing with a FileNotFoundException.
> One simple way to fix this is to not delete the file if the file was not created within this getFile method.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 18:30:06 2006
Return-Path: 
 <hadoop-dev-return-5204-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9603 invoked from network); 16 Nov 2006 18:30:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 18:30:06 -0000
Received: (qmail 35444 invoked by uid 500); 16 Nov 2006 18:30:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35429 invoked by uid 500); 16 Nov 2006 18:30:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35420 invoked by uid 99); 16 Nov 2006 18:30:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 10:30:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 10:30:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5E0DF714329
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 10:29:42 -0800 (PST)
Message-ID: <3343525.1163701782382.JavaMail.jira@brutus>
Date: Thu, 16 Nov 2006 10:29:42 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-723) Race condition exists in the method
 MapOutputLocation.getFile
In-Reply-To: <5078563.1163609197143.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-723?page=all ]

Owen O'Malley updated HADOOP-723:
---------------------------------

               Status: Patch Available  (was: Open)
        Fix Version/s: 0.9.0
    Affects Version/s: 0.8.0

> Race condition exists in the method MapOutputLocation.getFile
> -------------------------------------------------------------
>
>                 Key: HADOOP-723
>                 URL: http://issues.apache.org/jira/browse/HADOOP-723
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Devaraj Das
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>         Attachments: map-out-lost.patch
>
>
> There seems to be a race condition in the way the Reduces copy the map output files from the Maps. If a copier is blocked in the connect method (in the beginning of the method MapOutputLocation.getFile) to a Jetty on a Map, and the MapCopyLeaseChecker detects that the copier was idle for too long, it will go ahead and issue a interrupt (read 'kill') to this thread and create a new Copier thread. However, the copier, currently blocked trying to connect to Jetty on a Map, doesn't actually get killed until the connect timeout expires and as soon as the connect comes out (with an IOException), it will delete the map output file which actually could have been (successfully) created by the new Copier thread. This leads to the Sort phase for that reducer failing with a FileNotFoundException.
> One simple way to fix this is to not delete the file if the file was not created within this getFile method.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 18:33:01 2006
Return-Path: 
 <hadoop-dev-return-5205-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10226 invoked from network); 16 Nov 2006 18:33:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 18:33:01 -0000
Received: (qmail 39895 invoked by uid 500); 16 Nov 2006 18:33:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39879 invoked by uid 500); 16 Nov 2006 18:33:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39870 invoked by uid 99); 16 Nov 2006 18:33:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 10:33:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 10:33:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 45666714327
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 10:32:40 -0800 (PST)
Message-ID: <8491067.1163701960281.JavaMail.jira@brutus>
Date: Thu, 16 Nov 2006 10:32:40 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-574?page=comments#action_12450482 ] 
            
Doug Cutting commented on HADOOP-574:
-------------------------------------

That sounds like a good plan: by default unit tests should not attempt to connect to S3.  But it should be easy to configure things so that S3 is used, and we can do that in the nightlies (provided my wife approves the expense!).

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>         Attachments: dependencies.zip, HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 19:23:58 2006
Return-Path: 
 <hadoop-dev-return-5206-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23085 invoked from network); 16 Nov 2006 19:23:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 19:23:58 -0000
Received: (qmail 23618 invoked by uid 500); 16 Nov 2006 19:24:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23594 invoked by uid 500); 16 Nov 2006 19:24:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23583 invoked by uid 99); 16 Nov 2006 19:24:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 11:24:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 11:23:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1EE8071431F
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 11:23:37 -0800 (PST)
Message-ID: <32320319.1163705017123.JavaMail.jira@brutus>
Date: Thu, 16 Nov 2006 11:23:37 -0800 (PST)
From: "Dick King (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-731) Sometimes when a dfs file is accessed
 and one copy has a checksum error the I/O command fails, even if another
 copy is alright.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sometimes when a dfs file is accessed and one copy has a checksum error the I/O command fails, even if another copy is alright.
-------------------------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-731
                 URL: http://issues.apache.org/jira/browse/HADOOP-731
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.7.2
            Reporter: Dick King


for a particular file [alas, the file no longer exists -- I had to progress]  

    $dfs -cp foo bar        

and

    $dfs -get foo local

failed on a checksum error.  The dfs browser's download function retrieved the file, so either that function doesn't check, or more likely the download function got a different copy.

When a checksum fails on one copy of a file that is redundantly stored, I would prefer that dfs try a different copy, mark the bad one as not existing [which should induce a fresh copy being made from one of the good copies eventually], and make the call continue to work and deliver bytes.

Ideally, if all copies have checksum errors but it's possible to piece together a good copy I would like that to be done.

-dk


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 19:36:00 2006
Return-Path: 
 <hadoop-dev-return-5207-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30569 invoked from network); 16 Nov 2006 19:36:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 19:36:00 -0000
Received: (qmail 51618 invoked by uid 500); 16 Nov 2006 19:36:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51594 invoked by uid 500); 16 Nov 2006 19:36:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51585 invoked by uid 99); 16 Nov 2006 19:36:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 11:36:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 11:35:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5EE6D71431F
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 11:35:38 -0800 (PST)
Message-ID: <3066434.1163705738386.JavaMail.jira@brutus>
Date: Thu, 16 Nov 2006 11:35:38 -0800 (PST)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-442) slaves file should include an
 'exclude' section, to prevent "bad" datanodes and tasktrackers from
 disrupting  a cluster
In-Reply-To: <650567.1155195793928.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-442?page=comments#action_12450506 ] 
            
eric baldeschwieler commented on HADOOP-442:
--------------------------------------------

Current proposal:

- Add config variables that points to file containing list of nodes HDFS should expect (slaves file) (optional config)
- Add config variable that points to a file containing a list of excluded nodes (from previous list) (optional config)

- The nameNode reads these files on startup (iff config).  It keeps a list of included nodes and another of excluded nodes.  If the include list is configured, it will be tested when a node registers or heartbeats.  If the node is not on the list, it will be told to shutdown on the response.  If the exclude list is configured, than a node will also be shutdown if listed.

- We will add an admin command to re-read the inclusion and exclusion files

- The job tracker will also read these lists and have a new admin command to reread the files



> slaves file should include an 'exclude' section, to prevent "bad" datanodes and tasktrackers from disrupting  a cluster
> -----------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-442
>                 URL: http://issues.apache.org/jira/browse/HADOOP-442
>             Project: Hadoop
>          Issue Type: Bug
>          Components: conf
>            Reporter: Yoram Arnon
>
> I recently had a few nodes go bad, such that they were inaccessible to ssh, but were still running their java processes.
> tasks that executed on them were failing, causing jobs to fail.
> I couldn't stop the java processes, because of the ssh issue, so I was helpless until I could actually power down these nodes.
> restarting the cluster doesn't help, even when removing the bad nodes from the slaves file - they just reconnect and are accepted.
> while we plan to avoid tasks from launching on the same nodes over and over, what I'd like is to be able to prevent rogue processes from connecting to the masters.
> Ideally, the slaves file will contain an 'exclude' section, which will list nodes that shouldn't be accessed, and should be ignored if they try to connect. That would also help in configuring the slaves file for a large cluster - I'd list the full range of machines in the cluster, then list the ones that are down in the 'exclude' section

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 20:35:00 2006
Return-Path: 
 <hadoop-dev-return-5208-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58636 invoked from network); 16 Nov 2006 20:35:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 20:35:00 -0000
Received: (qmail 61577 invoked by uid 500); 16 Nov 2006 20:35:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61555 invoked by uid 500); 16 Nov 2006 20:35:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61546 invoked by uid 99); 16 Nov 2006 20:35:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 12:35:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 12:34:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B99271431F
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 12:34:38 -0800 (PST)
Message-ID: <14668483.1163709278306.JavaMail.jira@brutus>
Date: Thu, 16 Nov 2006 12:34:38 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-729) packageNativeHadoop.sh has
 non-standard sh code
In-Reply-To: <18260067.1163660797125.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-729?page=all ]

Doug Cutting updated HADOOP-729:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I verified that the nightly build succeeds with this and committed it.  Thanks, Arun!

> packageNativeHadoop.sh has non-standard sh code
> -----------------------------------------------
>
>                 Key: HADOOP-729
>                 URL: http://issues.apache.org/jira/browse/HADOOP-729
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>         Environment: Solaris
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>            Priority: Critical
>             Fix For: 0.9.0
>
>         Attachments: packageNativeHadoop.sh.patch
>
>
> packageNativeHadoop.sh uses the shell check "-e" which fails on Solaris; this caused a nightly build to fail.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 21:19:00 2006
Return-Path: 
 <hadoop-dev-return-5209-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70319 invoked from network); 16 Nov 2006 21:19:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 21:19:00 -0000
Received: (qmail 59140 invoked by uid 500); 16 Nov 2006 21:19:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59114 invoked by uid 500); 16 Nov 2006 21:19:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59104 invoked by uid 99); 16 Nov 2006 21:19:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 13:19:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 13:18:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 46A35714324
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 13:18:38 -0800 (PST)
Message-ID: <15422157.1163711918286.JavaMail.jira@brutus>
Date: Thu, 16 Nov 2006 13:18:38 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-702) DFS Upgrade Proposal
In-Reply-To: <13641771.1163042497986.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-702?page=comments#action_12450530 ] 
            
Raghu Angadi commented on HADOOP-702:
-------------------------------------


With the manual rollback on each of the nodes on the cluster, I think we will need a way to know if a data-node is connecting to namenode with wrong fs version because there will be some datanodes which did not run the rollback procedure. One indirect way for namenode to recognize such nodes is to check if "latest stored version" on datanode is "later" than namenode's. What should Namenode do if it notices such a datanode? Since rollback is supposed to be rare, it could 'fail fast' and somehow let admin to fix such nodes.

> DFS Upgrade Proposal
> --------------------
>
>                 Key: HADOOP-702
>                 URL: http://issues.apache.org/jira/browse/HADOOP-702
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Konstantin Shvachko
>         Attachments: DFSUpgradeProposal.html
>
>
> Currently the DFS cluster upgrade procedure is manual.
> http://wiki.apache.org/lucene-hadoop/Hadoop_Upgrade
> It is rather complicated and does not guarantee data recoverability in case of software errors or administrator mistakes.
> This is a description of utilities that make the upgrade process almost automatic and minimize chance of loosing or corrupting data.
> Please see the attached html file for details.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 22:21:11 2006
Return-Path: 
 <hadoop-dev-return-5210-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88838 invoked from network); 16 Nov 2006 22:21:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 22:21:11 -0000
Received: (qmail 73502 invoked by uid 500); 16 Nov 2006 22:21:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73476 invoked by uid 500); 16 Nov 2006 22:21:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73346 invoked by uid 99); 16 Nov 2006 22:21:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 14:21:19 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.145.48.34] (HELO mail-relay1.yahoo.com) (216.145.48.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 14:21:05 -0800
Received: from KEPTSHOULDLX (keptshould-lx.corp.yahoo.com [10.72.114.54])
	by mail-relay1.yahoo.com (8.13.8/8.13.6/mr1) with ESMTP id kAGMKjrH048148
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 14:20:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
	b=WAp7AjcaBu2xro9zPO8WUQE0dpkwrmm79XIzC2yIxex8zl5szLhEi5t1oPxqVFVT
From: "Hairong Kuang" <hairong@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: [jira] Created: (HADOOP-713) dfs list operation is too expensive
Date: Thu, 16 Nov 2006 14:20:45 -0800
Message-ID: <001801c709cd$75c5a020$d09215ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <455CAE02.6030309@apache.org>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccJrTjImTtw+I1OREK6K7H+uw1GlwAH8PCg
X-Virus-Checked: Checked by ClamAV on apache.org

Currently a subtree size is computed at the name node side as a side effect
of the list command. Did you mean that we should have a seperate command?

Hairong

-----Original Message-----
From: Doug Cutting [mailto:cutting@apache.org] 
Sent: Thursday, November 16, 2006 10:29 AM
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Created: (HADOOP-713) dfs list operation is too
expensive

Hairong Kuang wrote:
> "Dfs -du" is implemented using list requests. So I propose that we 
> support two types of list: one computing subtree size and one not.

Put another way: there should be a namenode method that computes a subtree
size: we don't want to compute these client-side.

Doug



From MAILER-DAEMON Thu Nov 16 23:31:00 2006
Return-Path: 
 <hadoop-dev-return-5211-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8749 invoked from network); 16 Nov 2006 23:31:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 23:31:00 -0000
Received: (qmail 54918 invoked by uid 500); 16 Nov 2006 23:31:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54897 invoked by uid 500); 16 Nov 2006 23:31:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54888 invoked by uid 99); 16 Nov 2006 23:31:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 15:31:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 15:30:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E495E714316
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 15:30:38 -0800 (PST)
Message-ID: <22882641.1163719838933.JavaMail.jira@brutus>
Date: Thu, 16 Nov 2006 15:30:38 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-447)
 DistributedFileSystem.getBlockSize(Path) does not resolve absolute path
In-Reply-To: <5956345.1155318013880.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-447?page=all ]

Raghu Angadi updated HADOOP-447:
--------------------------------

    Attachment: HADOOP-447.patch

patch for the fix mentioned above. Looks like using makeAbsolute(f) in place of 'f' fixes it.


> DistributedFileSystem.getBlockSize(Path) does not resolve absolute path
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-447
>                 URL: http://issues.apache.org/jira/browse/HADOOP-447
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Benjamin Reed
>         Assigned To: Raghu Angadi
>         Attachments: HADOOP-447.patch
>
>
> getBlockSize() does not check for an absolute path like the rest of the DistributeFileSystem API does. Consequently getBlockSize(Path) does not work with relative paths.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 16 23:33:00 2006
Return-Path: 
 <hadoop-dev-return-5212-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9022 invoked from network); 16 Nov 2006 23:33:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 23:33:00 -0000
Received: (qmail 57091 invoked by uid 500); 16 Nov 2006 23:33:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56855 invoked by uid 500); 16 Nov 2006 23:33:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56846 invoked by uid 99); 16 Nov 2006 23:33:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 15:33:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 15:32:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2D3D8714316
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 15:32:39 -0800 (PST)
Message-ID: <5462219.1163719959182.JavaMail.jira@brutus>
Date: Thu, 16 Nov 2006 15:32:39 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-447)
 DistributedFileSystem.getBlockSize(Path) does not resolve absolute path
In-Reply-To: <5956345.1155318013880.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-447?page=all ]

Raghu Angadi updated HADOOP-447:
--------------------------------

    Status: Patch Available  (was: Open)

> DistributedFileSystem.getBlockSize(Path) does not resolve absolute path
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-447
>                 URL: http://issues.apache.org/jira/browse/HADOOP-447
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Benjamin Reed
>         Assigned To: Raghu Angadi
>         Attachments: HADOOP-447.patch
>
>
> getBlockSize() does not check for an absolute path like the rest of the DistributeFileSystem API does. Consequently getBlockSize(Path) does not work with relative paths.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 17 00:20:58 2006
Return-Path: 
 <hadoop-dev-return-5213-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19115 invoked from network); 17 Nov 2006 00:20:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 00:20:58 -0000
Received: (qmail 14597 invoked by uid 500); 17 Nov 2006 00:21:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14395 invoked by uid 500); 17 Nov 2006 00:21:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14383 invoked by uid 99); 17 Nov 2006 00:21:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 16:21:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 16:20:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1A850714324
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 16:20:37 -0800 (PST)
Message-ID: <31123399.1163722837105.JavaMail.jira@brutus>
Date: Thu, 16 Nov 2006 16:20:37 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-732) SequenceFile's header should allow to
 store metadata in the form of key/value pairs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

SequenceFile's header should allow to store metadata in the form of key/value pairs 
------------------------------------------------------------------------------------

                 Key: HADOOP-732
                 URL: http://issues.apache.org/jira/browse/HADOOP-732
             Project: Hadoop
          Issue Type: New Feature
            Reporter: Runping Qi



The sequence file currently stores a fixed list of metadata attributes, such as key/value class names, 
compression method, etc.  To make sequence file more self descriptable, it should allow to store a list of key/value pairs.  One particular attribute of interest is to indicate whether the key/value classes are actually hadoop record classes, 
if so, store the DDls for the records. This way, we may create tools to extract DDl from a sequence file and 
then generate necessary classes. It also make it possible to provide an interpretive version of Hadoop record. 
This way, even in the situation where Hadoop or the application does not have the necessary classes, 
a sequence file of Hadoop records can be read and deserialized "interpretively".



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 17 04:22:01 2006
Return-Path: 
 <hadoop-dev-return-5214-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74727 invoked from network); 17 Nov 2006 04:22:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 04:22:01 -0000
Received: (qmail 72221 invoked by uid 500); 17 Nov 2006 04:22:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72199 invoked by uid 500); 17 Nov 2006 04:22:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72179 invoked by uid 99); 17 Nov 2006 04:22:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 20:22:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 20:21:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ED069714327
	for <hadoop-dev@lucene.apache.org>; Thu, 16 Nov 2006 20:21:38 -0800 (PST)
Message-ID: <2719012.1163737298968.JavaMail.jira@brutus>
Date: Thu, 16 Nov 2006 20:21:38 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-724) bin/hadoop:111 uses java directly, it
 should use JAVA_HOME
In-Reply-To: <18503374.1163617001480.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-724?page=all ]

Arun C Murthy updated HADOOP-724:
---------------------------------

    Attachment: HADOOP_724-20061117.patch

Sounds good... I think it makes sense to distribute the Linux-i386-32 libraries as a separate download (atleast in the short/medium term).

Here is an updated patch incorporating your suggestion...

> bin/hadoop:111 uses java directly, it should use JAVA_HOME
> ----------------------------------------------------------
>
>                 Key: HADOOP-724
>                 URL: http://issues.apache.org/jira/browse/HADOOP-724
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>            Reporter: Sanjay Dahiya
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-724_20061116.patch, HADOOP_724-20061117.patch
>
>
> JAVA_PLATFORM=`CLASSPATH=${CLASSPATH} java org.apache.hadoop.util.PlatformName`
> should use JAVA_HOME instead of java.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 17 16:54:09 2006
Return-Path: 
 <hadoop-dev-return-5215-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94141 invoked from network); 17 Nov 2006 16:54:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 16:54:09 -0000
Received: (qmail 96000 invoked by uid 500); 17 Nov 2006 16:54:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95818 invoked by uid 500); 17 Nov 2006 16:54:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95755 invoked by uid 99); 17 Nov 2006 16:54:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 08:54:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 08:54:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7BF63714333
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 08:53:40 -0800 (PST)
Message-ID: <72960.1163782420503.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 08:53:40 -0800 (PST)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-733) dfs shell has inconsistent exit codes
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

dfs shell has inconsistent exit codes
-------------------------------------

                 Key: HADOOP-733
                 URL: http://issues.apache.org/jira/browse/HADOOP-733
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.8.0
            Reporter: Christian Kunz


After upgrading to 0.8.0, some of my script applications stopped to work properly, seemingly because of hadoop dfs utility returning 0 exit code when it should not (kind of revival of hadoop-488, with a different cause).

dfs -cat  and dfs -rm always return exit code 0, even for non-existing files. The former can be traced back to the fact that DFSShell's 'run' method calls a 'doall' method without passing on the exit code ('doall' catches its own exceptions and returns an exit code). The latter occurs because the return code of the DFSClient delete method is only used in DFS Shell to print different messages without affecting exit code.

There might be more inconsistent behavior of the dfs shell. Hadoop dfs command line should return 0 signaling success exactly when the corresponding unix command returns 0 (or at least it should be related to success whatever this means in a documented manner).

I also would recommend to use a kind of regression test to prevent that this gets broken again.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 17 17:24:08 2006
Return-Path: 
 <hadoop-dev-return-5216-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6562 invoked from network); 17 Nov 2006 17:24:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 17:24:08 -0000
Received: (qmail 61474 invoked by uid 500); 17 Nov 2006 17:24:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61403 invoked by uid 500); 17 Nov 2006 17:24:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61303 invoked by uid 99); 17 Nov 2006 17:24:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 09:24:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 09:24:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7F0F271432D
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 09:23:40 -0800 (PST)
Message-ID: <25824974.1163784220517.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 09:23:40 -0800 (PST)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-707) Final map task gets stuck
In-Reply-To: <30328258.1163169157124.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-707?page=comments#action_12450802 ] 
            
Johan Oskarson commented on HADOOP-707:
---------------------------------------

Same problem, different job.
Full thread dump.

2006-11-17 15:08:14,707 INFO org.apache.hadoop.mapred.TaskTracker: task_0133_m_000948_0: Task failed to report status for 608 seconds. Killing.
2006-11-17 15:08:14,722 INFO org.apache.hadoop.mapred.TaskTracker: Process Thread Dump: lost task
65 active threads
Thread 46827 (IPC Client connection to master1.herd1/10.0.5.10:9001):
  State: WAITING
  Blocked count: 1
  Waited count: 2
  Waiting on org.apache.hadoop.ipc.Client$Connection@74e65f
  Stack:
    java.lang.Object.wait(Native Method)
    java.lang.Object.wait(Object.java:474)
    org.apache.hadoop.ipc.Client$Connection.waitForWork(Client.java:195)
    org.apache.hadoop.ipc.Client$Connection.run(Client.java:234)
Thread 46826 (btpool0-893):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 0
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 46825 (btpool0-892):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 0
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 46822 (btpool0-891):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 1
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 46811 (btpool0-890):
  State: RUNNABLE
  Blocked count: 3
  Waited count: 1
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 46810 (btpool0-889):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 0
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 46803 (btpool0-888):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 8
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 46408 (btpool0-887):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 41
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 46402 (btpool0-886):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 26
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 46396 (btpool0-885):
  State: RUNNABLE
  Blocked count: 4
  Waited count: 48
  Stack:
    java.io.FileInputStream.readBytes(Native Method)
    java.io.FileInputStream.read(FileInputStream.java:194)
    org.apache.hadoop.fs.LocalFileSystem$LocalFSFileInputStream.read(LocalFileSystem.java:113)
    org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:91)
    org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:189)
    java.io.BufferedInputStream.read1(BufferedInputStream.java:254)
    java.io.BufferedInputStream.read(BufferedInputStream.java:313)
    java.io.DataInputStream.read(DataInputStream.java:80)
    org.apache.hadoop.mapred.TaskTracker$MapOutputServlet.doGet(TaskTracker.java:1411)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
    org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:445)
    org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:356)
    org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:226)
    org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:627)
    org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:149)
    org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:141)
    org.mortbay.jetty.Server.handle(Server.java:269)
    org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:430)
    org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:687)
Thread 46345 (btpool0-883):
  State: TIMED_WAITING
  Blocked count: 0
  Waited count: 26
  Stack:
    java.lang.Object.wait(Native Method)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:469)
Thread 46333 (btpool0-881):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 42
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 46305 (btpool0-880):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 43
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 46304 (btpool0-879):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 37
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 46295 (btpool0-878):
  State: RUNNABLE
  Blocked count: 1
  Waited count: 36
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 46253 (btpool0-877):
  State: RUNNABLE
  Blocked count: 1
  Waited count: 48
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 46252 (btpool0-876):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 46
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 46251 (btpool0-875):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 51
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
   org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 46242 (btpool0-874):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 43
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 45039 (Thread-28307):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 0
  Stack:
    java.io.FileInputStream.readBytes(Native Method)
    java.io.FileInputStream.read(FileInputStream.java:194)
    sun.nio.cs.StreamDecoder$CharsetSD.readBytes(StreamDecoder.java:411)
    sun.nio.cs.StreamDecoder$CharsetSD.implRead(StreamDecoder.java:453)
    sun.nio.cs.StreamDecoder.read(StreamDecoder.java:183)
    java.io.InputStreamReader.read(InputStreamReader.java:167)
    java.io.BufferedReader.fill(BufferedReader.java:136)
    java.io.BufferedReader.readLine(BufferedReader.java:299)
    java.io.BufferedReader.readLine(BufferedReader.java:362)
    org.apache.hadoop.mapred.TaskRunner.logStream(TaskRunner.java:340)
    org.apache.hadoop.mapred.TaskRunner.access$100(TaskRunner.java:36)
    org.apache.hadoop.mapred.TaskRunner$1.run(TaskRunner.java:304)
Thread 45038 (process reaper):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 0
  Stack:
    java.lang.UNIXProcess.waitForProcessExit(Native Method)
    java.lang.UNIXProcess.access$900(UNIXProcess.java:20)
    java.lang.UNIXProcess$1$1.run(UNIXProcess.java:132)
Thread 45031 (Thread-28302):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 0
  Stack:
    java.io.FileInputStream.readBytes(Native Method)
    java.io.FileInputStream.read(FileInputStream.java:194)
    sun.nio.cs.StreamDecoder$CharsetSD.readBytes(StreamDecoder.java:411)
    sun.nio.cs.StreamDecoder$CharsetSD.implRead(StreamDecoder.java:453)
    sun.nio.cs.StreamDecoder.read(StreamDecoder.java:183)
    java.io.InputStreamReader.read(InputStreamReader.java:167)
    java.io.BufferedReader.fill(BufferedReader.java:136)
    java.io.BufferedReader.readLine(BufferedReader.java:299)
    java.io.BufferedReader.readLine(BufferedReader.java:362)
    org.apache.hadoop.mapred.TaskRunner.logStream(TaskRunner.java:340)
    org.apache.hadoop.mapred.TaskRunner.access$100(TaskRunner.java:36)
    org.apache.hadoop.mapred.TaskRunner$1.run(TaskRunner.java:304)
Thread 45030 (process reaper):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 0
  Stack:
    java.lang.UNIXProcess.waitForProcessExit(Native Method)
    java.lang.UNIXProcess.access$900(UNIXProcess.java:20)
    java.lang.UNIXProcess$1$1.run(UNIXProcess.java:132)
Thread 45026 (Thread-28299):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 0
  Stack:
    java.io.FileInputStream.readBytes(Native Method)
    java.io.FileInputStream.read(FileInputStream.java:194)
    sun.nio.cs.StreamDecoder$CharsetSD.readBytes(StreamDecoder.java:411)
    sun.nio.cs.StreamDecoder$CharsetSD.implRead(StreamDecoder.java:453)
    sun.nio.cs.StreamDecoder.read(StreamDecoder.java:183)
    java.io.InputStreamReader.read(InputStreamReader.java:167)
    java.io.BufferedReader.fill(BufferedReader.java:136)
    java.io.BufferedReader.readLine(BufferedReader.java:299)
    java.io.BufferedReader.readLine(BufferedReader.java:362)
    org.apache.hadoop.mapred.TaskRunner.logStream(TaskRunner.java:340)
    org.apache.hadoop.mapred.TaskRunner.access$100(TaskRunner.java:36)
    org.apache.hadoop.mapred.TaskRunner$1.run(TaskRunner.java:304)
Thread 45025 (process reaper):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 0
  Stack:
    java.lang.UNIXProcess.waitForProcessExit(Native Method)
    java.lang.UNIXProcess.access$900(UNIXProcess.java:20)
    java.lang.UNIXProcess$1$1.run(UNIXProcess.java:132)
Thread 44998 (Thread-28283):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 0
  Stack:
    java.io.FileInputStream.readBytes(Native Method)
    java.io.FileInputStream.read(FileInputStream.java:194)
    sun.nio.cs.StreamDecoder$CharsetSD.readBytes(StreamDecoder.java:411)
    sun.nio.cs.StreamDecoder$CharsetSD.implRead(StreamDecoder.java:453)
    sun.nio.cs.StreamDecoder.read(StreamDecoder.java:183)
    java.io.InputStreamReader.read(InputStreamReader.java:167)
    java.io.BufferedReader.fill(BufferedReader.java:136)
    java.io.BufferedReader.readLine(BufferedReader.java:299)
    java.io.BufferedReader.readLine(BufferedReader.java:362)
    org.apache.hadoop.mapred.TaskRunner.logStream(TaskRunner.java:340)
    org.apache.hadoop.mapred.TaskRunner.access$100(TaskRunner.java:36)
    org.apache.hadoop.mapred.TaskRunner$1.run(TaskRunner.java:304)
Thread 44997 (process reaper):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 0
  Stack:
    java.lang.UNIXProcess.waitForProcessExit(Native Method)
    java.lang.UNIXProcess.access$900(UNIXProcess.java:20)
    java.lang.UNIXProcess$1$1.run(UNIXProcess.java:132)
Thread 44987 (Thread-28277):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 0
  Stack:
    java.io.FileInputStream.readBytes(Native Method)
    java.io.FileInputStream.read(FileInputStream.java:194)
    sun.nio.cs.StreamDecoder$CharsetSD.readBytes(StreamDecoder.java:411)
    sun.nio.cs.StreamDecoder$CharsetSD.implRead(StreamDecoder.java:453)
    sun.nio.cs.StreamDecoder.read(StreamDecoder.java:183)
    java.io.InputStreamReader.read(InputStreamReader.java:167)
    java.io.BufferedReader.fill(BufferedReader.java:136)
    java.io.BufferedReader.readLine(BufferedReader.java:299)
    java.io.BufferedReader.readLine(BufferedReader.java:362)
    org.apache.hadoop.mapred.TaskRunner.logStream(TaskRunner.java:340)
    org.apache.hadoop.mapred.TaskRunner.access$100(TaskRunner.java:36)
    org.apache.hadoop.mapred.TaskRunner$1.run(TaskRunner.java:304)
Thread 44986 (process reaper):
  State: RUNNABLE
  Blocked count: 0
  Waited count: 0
  Stack:
    java.lang.UNIXProcess.waitForProcessExit(Native Method)
    java.lang.UNIXProcess.access$900(UNIXProcess.java:20)
    java.lang.UNIXProcess$1$1.run(UNIXProcess.java:132)
Thread 44905 (btpool0-872):
  State: TIMED_WAITING
  Blocked count: 2
  Waited count: 87
  Stack:
    java.lang.Object.wait(Native Method)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:469)
Thread 44903 (btpool0-870):
  State: TIMED_WAITING
  Blocked count: 1
  Waited count: 103
  Stack:
    java.lang.Object.wait(Native Method)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:469)
Thread 44891 (btpool0-865):
  State: RUNNABLE
  Blocked count: 5
  Waited count: 55
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 44888 (btpool0-863):
  State: RUNNABLE
  Blocked count: 7
  Waited count: 135
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 44887 (btpool0-862):
  State: RUNNABLE
  Blocked count: 4
  Waited count: 131
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 44882 (btpool0-857):
  State: RUNNABLE
  Blocked count: 9
  Waited count: 138
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 44881 (btpool0-856):
  State: RUNNABLE
  Blocked count: 3
  Waited count: 127
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 44841 (btpool0-851):
  State: RUNNABLE
  Blocked count: 6
  Waited count: 127
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 44752 (btpool0-849):
  State: RUNNABLE
  Blocked count: 7
  Waited count: 134
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 43631 (Thread-27401):
  State: RUNNABLE
  Blocked count: 114
  Waited count: 1730
  Stack:
    java.io.FileInputStream.readBytes(Native Method)
    java.io.FileInputStream.read(FileInputStream.java:194)
    java.io.BufferedInputStream.read1(BufferedInputStream.java:254)
    java.io.BufferedInputStream.read(BufferedInputStream.java:313)
    sun.nio.cs.StreamDecoder$CharsetSD.readBytes(StreamDecoder.java:411)
    sun.nio.cs.StreamDecoder$CharsetSD.implRead(StreamDecoder.java:453)
    sun.nio.cs.StreamDecoder.read(StreamDecoder.java:183)
    java.io.InputStreamReader.read(InputStreamReader.java:167)
    java.io.BufferedReader.fill(BufferedReader.java:136)
    java.io.BufferedReader.readLine(BufferedReader.java:299)
    java.io.BufferedReader.readLine(BufferedReader.java:362)
    org.apache.hadoop.mapred.TaskRunner.logStream(TaskRunner.java:340)
    org.apache.hadoop.mapred.TaskRunner.runChild(TaskRunner.java:308)
    org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:198)
Thread 43610 (Thread-27384):
  State: RUNNABLE
  Blocked count: 116
  Waited count: 1687
  Stack:
    java.io.FileInputStream.readBytes(Native Method)
    java.io.FileInputStream.read(FileInputStream.java:194)
    java.io.BufferedInputStream.read1(BufferedInputStream.java:254)
    java.io.BufferedInputStream.read(BufferedInputStream.java:313)
    sun.nio.cs.StreamDecoder$CharsetSD.readBytes(StreamDecoder.java:411)
    sun.nio.cs.StreamDecoder$CharsetSD.implRead(StreamDecoder.java:453)
    sun.nio.cs.StreamDecoder.read(StreamDecoder.java:183)
    java.io.InputStreamReader.read(InputStreamReader.java:167)
    java.io.BufferedReader.fill(BufferedReader.java:136)
    java.io.BufferedReader.readLine(BufferedReader.java:299)
    java.io.BufferedReader.readLine(BufferedReader.java:362)
    org.apache.hadoop.mapred.TaskRunner.logStream(TaskRunner.java:340)
    org.apache.hadoop.mapred.TaskRunner.runChild(TaskRunner.java:308)
    org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:198)
Thread 43591 (Thread-27369):
  State: RUNNABLE
  Blocked count: 79
  Waited count: 1690
  Stack:
    java.io.FileInputStream.readBytes(Native Method)
    java.io.FileInputStream.read(FileInputStream.java:194)
    java.io.BufferedInputStream.read1(BufferedInputStream.java:254)
    java.io.BufferedInputStream.read(BufferedInputStream.java:313)
    sun.nio.cs.StreamDecoder$CharsetSD.readBytes(StreamDecoder.java:411)
    sun.nio.cs.StreamDecoder$CharsetSD.implRead(StreamDecoder.java:453)
    sun.nio.cs.StreamDecoder.read(StreamDecoder.java:183)
    java.io.InputStreamReader.read(InputStreamReader.java:167)
    java.io.BufferedReader.fill(BufferedReader.java:136)
    java.io.BufferedReader.readLine(BufferedReader.java:299)
    java.io.BufferedReader.readLine(BufferedReader.java:362)
    org.apache.hadoop.mapred.TaskRunner.logStream(TaskRunner.java:340)
    org.apache.hadoop.mapred.TaskRunner.runChild(TaskRunner.java:308)
    org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:198)
Thread 43583 (Thread-27361):
  State: RUNNABLE
  Blocked count: 109
  Waited count: 1690
  Stack:
    java.io.FileInputStream.readBytes(Native Method)
    java.io.FileInputStream.read(FileInputStream.java:194)
    java.io.BufferedInputStream.read1(BufferedInputStream.java:254)
    java.io.BufferedInputStream.read(BufferedInputStream.java:313)
    sun.nio.cs.StreamDecoder$CharsetSD.readBytes(StreamDecoder.java:411)
    sun.nio.cs.StreamDecoder$CharsetSD.implRead(StreamDecoder.java:453)
    sun.nio.cs.StreamDecoder.read(StreamDecoder.java:183)
    java.io.InputStreamReader.read(InputStreamReader.java:167)
    java.io.BufferedReader.fill(BufferedReader.java:136)
    java.io.BufferedReader.readLine(BufferedReader.java:299)
    java.io.BufferedReader.readLine(BufferedReader.java:362)
    org.apache.hadoop.mapred.TaskRunner.logStream(TaskRunner.java:340)
    org.apache.hadoop.mapred.TaskRunner.runChild(TaskRunner.java:308)
    org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:198)
Thread 43575 (Thread-27353):
  State: RUNNABLE
  Blocked count: 128
  Waited count: 1726
  Stack:
    java.io.FileInputStream.readBytes(Native Method)
    java.io.FileInputStream.read(FileInputStream.java:194)
    java.io.BufferedInputStream.read1(BufferedInputStream.java:254)
    java.io.BufferedInputStream.read(BufferedInputStream.java:313)
    sun.nio.cs.StreamDecoder$CharsetSD.readBytes(StreamDecoder.java:411)
    sun.nio.cs.StreamDecoder$CharsetSD.implRead(StreamDecoder.java:453)
    sun.nio.cs.StreamDecoder.read(StreamDecoder.java:183)
    java.io.InputStreamReader.read(InputStreamReader.java:167)
    java.io.BufferedReader.fill(BufferedReader.java:136)
    java.io.BufferedReader.readLine(BufferedReader.java:299)
    java.io.BufferedReader.readLine(BufferedReader.java:362)
    org.apache.hadoop.mapred.TaskRunner.logStream(TaskRunner.java:340)
    org.apache.hadoop.mapred.TaskRunner.runChild(TaskRunner.java:308)
    org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:198)
Thread 43052 (btpool0-844):
  State: RUNNABLE
  Blocked count: 6
  Waited count: 217
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 43049 (btpool0-842):
  State: RUNNABLE
  Blocked count: 4
  Waited count: 213
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 43042 (btpool0-835):
  State: RUNNABLE
  Blocked count: 12
  Waited count: 229
  Stack:
    java.io.FileInputStream.readBytes(Native Method)
    java.io.FileInputStream.read(FileInputStream.java:194)
    org.apache.hadoop.fs.LocalFileSystem$LocalFSFileInputStream.read(LocalFileSystem.java:113)
    org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:189)
    java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
    java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
    java.io.BufferedInputStream.read(BufferedInputStream.java:313)
    java.io.DataInputStream.readFully(DataInputStream.java:176)
    java.io.DataInputStream.readFully(DataInputStream.java:152)
    org.apache.hadoop.fs.FSDataInputStream$Checker.<init>(FSDataInputStream.java:60)
    org.apache.hadoop.fs.FSDataInputStream.<init>(FSDataInputStream.java:279)
    org.apache.hadoop.fs.FileSystem.open(FileSystem.java:156)
    org.apache.hadoop.mapred.TaskTracker$MapOutputServlet.doGet(TaskTracker.java:1409)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
    org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:445)
    org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:356)
    org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:226)
    org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:627)
    org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:149)
Thread 40895 (btpool0-803):
  State: RUNNABLE
  Blocked count: 3
  Waited count: 361
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 40380 (btpool0-790):
  State: RUNNABLE
  Blocked count: 7
  Waited count: 391
  Stack:
    java.io.FileInputStream.readBytes(Native Method)
    java.io.FileInputStream.read(FileInputStream.java:194)
    org.apache.hadoop.fs.LocalFileSystem$LocalFSFileInputStream.read(LocalFileSystem.java:113)
    org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:91)
    org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:189)
    java.io.BufferedInputStream.read1(BufferedInputStream.java:254)
    java.io.BufferedInputStream.read(BufferedInputStream.java:313)
    java.io.DataInputStream.read(DataInputStream.java:80)
    org.apache.hadoop.mapred.TaskTracker$MapOutputServlet.doGet(TaskTracker.java:1411)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
    org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:445)
    org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:356)
    org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:226)
    org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:627)
    org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:149)
    org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:141)
    org.mortbay.jetty.Server.handle(Server.java:269)
    org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:430)
    org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:687)
Thread 39121 (btpool0-784):
  State: RUNNABLE
  Blocked count: 16
  Waited count: 439
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 39112 (btpool0-775):
  State: RUNNABLE
  Blocked count: 13
  Waited count: 396
  Stack:
    java.net.SocketInputStream.socketRead0(Native Method)
    java.net.SocketInputStream.read(SocketInputStream.java:129)
    org.mortbay.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:168)
    org.mortbay.io.bio.StreamEndPoint.fill(StreamEndPoint.java:98)
    org.mortbay.jetty.bio.SocketConnector$Connection.fill(SocketConnector.java:181)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:263)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:193)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:208)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 28 (org.apache.hadoop.dfs.DFSClient$LeaseChecker@1a7ddcf):
  State: TIMED_WAITING
  Blocked count: 0
  Waited count: 0
  Stack:
    java.lang.Thread.sleep(Native Method)
    org.apache.hadoop.dfs.DFSClient$LeaseChecker.run(DFSClient.java:462)
    java.lang.Thread.run(Thread.java:595)
Thread 19 (org.apache.hadoop.io.ObjectWritable Connection Culler):
  State: TIMED_WAITING
  Blocked count: 154
  Waited count: 0
  Stack:
    java.lang.Thread.sleep(Native Method)
    org.apache.hadoop.ipc.Client$ConnectionCuller.run(Client.java:388)
Thread 18 (IPC Server handler 4 on 50050):
  State: TIMED_WAITING
  Blocked count: 1769
  Waited count: 51161
  Stack:
    java.lang.Object.wait(Native Method)
    org.apache.hadoop.ipc.Server$Handler.run(Server.java:486)
Thread 17 (IPC Server handler 3 on 50050):
  State: TIMED_WAITING
  Blocked count: 1673
  Waited count: 51202
  Stack:
    java.lang.Object.wait(Native Method)
    org.apache.hadoop.ipc.Server$Handler.run(Server.java:486)
Thread 16 (IPC Server handler 2 on 50050):
  State: TIMED_WAITING
  Blocked count: 1685
  Waited count: 51188
  Stack:
    java.lang.Object.wait(Native Method)
    org.apache.hadoop.ipc.Server$Handler.run(Server.java:486)
Thread 15 (IPC Server handler 1 on 50050):
  State: TIMED_WAITING
  Blocked count: 1694
  Waited count: 51183
  Stack:
    java.lang.Object.wait(Native Method)
    org.apache.hadoop.ipc.Server$Handler.run(Server.java:486)
Thread 14 (IPC Server handler 0 on 50050):
  State: TIMED_WAITING
  Blocked count: 1913
  Waited count: 51137
  Stack:
    java.lang.Object.wait(Native Method)
    org.apache.hadoop.ipc.Server$Handler.run(Server.java:486)
Thread 13 (IPC Server listener on 50050):
  State: RUNNABLE
  Blocked count: 634
  Waited count: 0
  Stack:
    sun.nio.ch.PollArrayWrapper.poll0(Native Method)
    sun.nio.ch.PollArrayWrapper.poll(PollArrayWrapper.java:100)
    sun.nio.ch.PollSelectorImpl.doSelect(PollSelectorImpl.java:56)
    sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)
    sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)
    sun.nio.ch.SelectorImpl.select(SelectorImpl.java:84)
    org.apache.hadoop.ipc.Server$Listener.run(Server.java:224)
Thread 12 (btpool0-1 - Acceptor0 SocketConnector @ 0.0.0.0:50060):
  State: RUNNABLE
  Blocked count: 85
  Waited count: 1517
  Stack:
    java.net.PlainSocketImpl.socketAccept(Native Method)
    java.net.PlainSocketImpl.accept(PlainSocketImpl.java:384)
    java.net.ServerSocket.implAccept(ServerSocket.java:450)
    java.net.ServerSocket.accept(ServerSocket.java:421)
    org.mortbay.jetty.bio.SocketConnector.accept(SocketConnector.java:97)
    org.mortbay.jetty.AbstractConnector$Acceptor.run(AbstractConnector.java:630)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 11 (btpool0-0 - Invalidator - /):
  State: TIMED_WAITING
  Blocked count: 0
  Waited count: 1
  Stack:
    java.lang.Thread.sleep(Native Method)
    org.mortbay.jetty.servlet.AbstractSessionManager$SessionScavenger.run(AbstractSessionManager.java:933)
    org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Thread 9 (taskCleanup):
  State: WAITING
  Blocked count: 457
  Waited count: 118
  Waiting on java.util.ArrayList@15192a
  Stack:
    java.lang.Object.wait(Native Method)
    java.lang.Object.wait(Object.java:474)
    org.apache.hadoop.mapred.TaskTracker$BlockingQueue.take(TaskTracker.java:783)
    org.apache.hadoop.mapred.TaskTracker$1.run(TaskTracker.java:143)
    java.lang.Thread.run(Thread.java:595)
Thread 4 (Signal Dispatcher):
  State: RUNNABLE
  Blocked count: 0
 Waited count: 0
  Stack:
Thread 3 (Finalizer):
  State: WAITING
  Blocked count: 99047
  Waited count: 39648
  Waiting on java.lang.ref.ReferenceQueue$Lock@ac6214
  Stack:
    java.lang.Object.wait(Native Method)
    java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:116)
    java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:132)
    java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)
Thread 2 (Reference Handler):
  State: WAITING
  Blocked count: 102986
  Waited count: 3131
  Waiting on java.lang.ref.Reference$Lock@15b40a1
  Stack:
    java.lang.Object.wait(Native Method)
    java.lang.Object.wait(Object.java:474)
    java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)
Thread 1 (main):
  State: RUNNABLE
  Blocked count: 1538
  Waited count: 107465
  Stack:
    sun.management.ThreadImpl.getThreadInfo0(Native Method)
    sun.management.ThreadImpl.getThreadInfo(ThreadImpl.java:144)
    sun.management.ThreadImpl.getThreadInfo(ThreadImpl.java:120)
    org.apache.hadoop.util.ReflectionUtils.printThreadInfo(ReflectionUtils.java:93)
    org.apache.hadoop.util.ReflectionUtils.logThreadInfo(ReflectionUtils.java:141)
    org.apache.hadoop.mapred.TaskTracker.markUnresponsiveTasks(TaskTracker.java:553)
    org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:449)
    org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
    org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)


> Final map task gets stuck
> -------------------------
>
>                 Key: HADOOP-707
>                 URL: http://issues.apache.org/jira/browse/HADOOP-707
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>         Environment: using latest trunk
>            Reporter: Johan Oskarson
>            Priority: Critical
>
> I've seen numerous jobs lately where the final map task gets stuck, never finishing.
> The jobtracker doesn't reassign the task. A restart of the tasktracker solves the issue and the job can finish.
> In the web interface it turns up as:
> task_0028_m_000534_0 node17.herd1 RUNNING 0.00%    10-Nov-2006 12:21:12 10-Nov-2006 12:22:19 (1mins, 6sec)
> Task failed to report status for 604 seconds. Killing.
> Only exception I find in that tasktracker log is this (a few times):
> java.nio.channels.ClosedChannelException
>         at sun.nio.ch.SocketChannelImpl.ensureWriteOpen(SocketChannelImpl.java:125)
>         at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:294)
>         at org.apache.hadoop.ipc.SocketChannelOutputStream.flushBuffer(SocketChannelOutputStream.java:108)
>         at org.apache.hadoop.ipc.SocketChannelOutputStream.write(SocketChannelOutputStream.java:89)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:532)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 17 17:35:12 2006
Return-Path: 
 <hadoop-dev-return-5217-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12112 invoked from network); 17 Nov 2006 17:35:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 17:35:12 -0000
Received: (qmail 95420 invoked by uid 500); 17 Nov 2006 17:35:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95398 invoked by uid 500); 17 Nov 2006 17:35:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95378 invoked by uid 99); 17 Nov 2006 17:35:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 09:35:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 09:35:06 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E22E3714333
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 09:34:45 -0800 (PST)
Message-ID: <4273455.1163784885923.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 09:34:45 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-733) dfs shell has inconsistent exit codes
In-Reply-To: <72960.1163782420503.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-733?page=all ]

dhruba borthakur reassigned HADOOP-733:
---------------------------------------

    Assignee: dhruba borthakur

> dfs shell has inconsistent exit codes
> -------------------------------------
>
>                 Key: HADOOP-733
>                 URL: http://issues.apache.org/jira/browse/HADOOP-733
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Christian Kunz
>         Assigned To: dhruba borthakur
>
> After upgrading to 0.8.0, some of my script applications stopped to work properly, seemingly because of hadoop dfs utility returning 0 exit code when it should not (kind of revival of hadoop-488, with a different cause).
> dfs -cat  and dfs -rm always return exit code 0, even for non-existing files. The former can be traced back to the fact that DFSShell's 'run' method calls a 'doall' method without passing on the exit code ('doall' catches its own exceptions and returns an exit code). The latter occurs because the return code of the DFSClient delete method is only used in DFS Shell to print different messages without affecting exit code.
> There might be more inconsistent behavior of the dfs shell. Hadoop dfs command line should return 0 signaling success exactly when the corresponding unix command returns 0 (or at least it should be related to success whatever this means in a documented manner).
> I also would recommend to use a kind of regression test to prevent that this gets broken again.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 17 18:58:00 2006
Return-Path: 
 <hadoop-dev-return-5218-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39336 invoked from network); 17 Nov 2006 18:58:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 18:58:00 -0000
Received: (qmail 55248 invoked by uid 500); 17 Nov 2006 18:58:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55221 invoked by uid 500); 17 Nov 2006 18:58:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55212 invoked by uid 99); 17 Nov 2006 18:58:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 10:58:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 10:57:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EAF63714327
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 10:57:38 -0800 (PST)
Message-ID: <19790939.1163789858959.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 10:57:38 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-733) dfs shell has inconsistent exit codes
In-Reply-To: <72960.1163782420503.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-733?page=all ]

dhruba borthakur updated HADOOP-733:
------------------------------------

    Attachment: shellerrorcodes.patch

This patch contains a fix to return appropriate error codes while trying to delete or cat a non-existent file. It also has a regression-test-case to test the return codes from DFSShell. The test case currently has tests for 'cat' and 'rm' and I will be adding to it in the future.

> dfs shell has inconsistent exit codes
> -------------------------------------
>
>                 Key: HADOOP-733
>                 URL: http://issues.apache.org/jira/browse/HADOOP-733
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Christian Kunz
>         Assigned To: dhruba borthakur
>         Attachments: shellerrorcodes.patch
>
>
> After upgrading to 0.8.0, some of my script applications stopped to work properly, seemingly because of hadoop dfs utility returning 0 exit code when it should not (kind of revival of hadoop-488, with a different cause).
> dfs -cat  and dfs -rm always return exit code 0, even for non-existing files. The former can be traced back to the fact that DFSShell's 'run' method calls a 'doall' method without passing on the exit code ('doall' catches its own exceptions and returns an exit code). The latter occurs because the return code of the DFSClient delete method is only used in DFS Shell to print different messages without affecting exit code.
> There might be more inconsistent behavior of the dfs shell. Hadoop dfs command line should return 0 signaling success exactly when the corresponding unix command returns 0 (or at least it should be related to success whatever this means in a documented manner).
> I also would recommend to use a kind of regression test to prevent that this gets broken again.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 17 18:58:03 2006
Return-Path: 
 <hadoop-dev-return-5219-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39375 invoked from network); 17 Nov 2006 18:58:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 18:58:03 -0000
Received: (qmail 55495 invoked by uid 500); 17 Nov 2006 18:58:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55472 invoked by uid 500); 17 Nov 2006 18:58:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55463 invoked by uid 99); 17 Nov 2006 18:58:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 10:58:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 10:58:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DE77271432A
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 10:57:40 -0800 (PST)
Message-ID: <22436602.1163789860908.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 10:57:40 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-733) dfs shell has inconsistent exit codes
In-Reply-To: <72960.1163782420503.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-733?page=all ]

dhruba borthakur updated HADOOP-733:
------------------------------------

    Status: Patch Available  (was: Open)

This patch contains a fix to return appropriate error codes while trying to delete or cat a non-existent file. It also has a regression-test-case to test the return codes from DFSShell. The test case currently has tests for 'cat' and 'rm' and I will be adding to it in the future.

> dfs shell has inconsistent exit codes
> -------------------------------------
>
>                 Key: HADOOP-733
>                 URL: http://issues.apache.org/jira/browse/HADOOP-733
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Christian Kunz
>         Assigned To: dhruba borthakur
>         Attachments: shellerrorcodes.patch
>
>
> After upgrading to 0.8.0, some of my script applications stopped to work properly, seemingly because of hadoop dfs utility returning 0 exit code when it should not (kind of revival of hadoop-488, with a different cause).
> dfs -cat  and dfs -rm always return exit code 0, even for non-existing files. The former can be traced back to the fact that DFSShell's 'run' method calls a 'doall' method without passing on the exit code ('doall' catches its own exceptions and returns an exit code). The latter occurs because the return code of the DFSClient delete method is only used in DFS Shell to print different messages without affecting exit code.
> There might be more inconsistent behavior of the dfs shell. Hadoop dfs command line should return 0 signaling success exactly when the corresponding unix command returns 0 (or at least it should be related to success whatever this means in a documented manner).
> I also would recommend to use a kind of regression test to prevent that this gets broken again.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 17 19:00:18 2006
Return-Path: 
 <hadoop-dev-return-5220-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40205 invoked from network); 17 Nov 2006 19:00:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 19:00:18 -0000
Received: (qmail 59221 invoked by uid 500); 17 Nov 2006 19:00:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59182 invoked by uid 500); 17 Nov 2006 19:00:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59156 invoked by uid 99); 17 Nov 2006 19:00:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 11:00:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 11:00:03 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D000F71432D
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 10:59:42 -0800 (PST)
Message-ID: <11751291.1163789982849.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 10:59:42 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-707) Final map task gets stuck
In-Reply-To: <30328258.1163169157124.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-707?page=comments#action_12450855 ] 
            
Owen O'Malley commented on HADOOP-707:
--------------------------------------

Where is the task being lost? Use the web/ui to see if the JobTracker thinks the map is running somewhere. If so, follow the link to the TaskTracker to see if the assigned TaskTracker thinks it is still running. If so, look to see if the the process is still running.

Otherwise, look at the logs to determine where the task the task ran and look at the logs on the task tracker's node to see what the task tracker thinks happened to it.

> Final map task gets stuck
> -------------------------
>
>                 Key: HADOOP-707
>                 URL: http://issues.apache.org/jira/browse/HADOOP-707
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>         Environment: using latest trunk
>            Reporter: Johan Oskarson
>            Priority: Critical
>
> I've seen numerous jobs lately where the final map task gets stuck, never finishing.
> The jobtracker doesn't reassign the task. A restart of the tasktracker solves the issue and the job can finish.
> In the web interface it turns up as:
> task_0028_m_000534_0 node17.herd1 RUNNING 0.00%    10-Nov-2006 12:21:12 10-Nov-2006 12:22:19 (1mins, 6sec)
> Task failed to report status for 604 seconds. Killing.
> Only exception I find in that tasktracker log is this (a few times):
> java.nio.channels.ClosedChannelException
>         at sun.nio.ch.SocketChannelImpl.ensureWriteOpen(SocketChannelImpl.java:125)
>         at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:294)
>         at org.apache.hadoop.ipc.SocketChannelOutputStream.flushBuffer(SocketChannelOutputStream.java:108)
>         at org.apache.hadoop.ipc.SocketChannelOutputStream.write(SocketChannelOutputStream.java:89)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:532)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 17 20:18:00 2006
Return-Path: 
 <hadoop-dev-return-5221-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68259 invoked from network); 17 Nov 2006 20:18:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 20:18:00 -0000
Received: (qmail 24114 invoked by uid 500); 17 Nov 2006 20:18:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24086 invoked by uid 500); 17 Nov 2006 20:18:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24077 invoked by uid 99); 17 Nov 2006 20:18:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 12:18:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 12:17:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1F657714321
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 12:17:39 -0800 (PST)
Message-ID: <13615377.1163794659125.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 12:17:39 -0800 (PST)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-733) dfs shell has inconsistent exit
 codes
In-Reply-To: <72960.1163782420503.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-733?page=comments#action_12450876 ] 
            
Christian Kunz commented on HADOOP-733:
---------------------------------------

I applied the patch. Thank you, Dhruba, for the quick response.

> dfs shell has inconsistent exit codes
> -------------------------------------
>
>                 Key: HADOOP-733
>                 URL: http://issues.apache.org/jira/browse/HADOOP-733
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Christian Kunz
>         Assigned To: dhruba borthakur
>         Attachments: shellerrorcodes.patch
>
>
> After upgrading to 0.8.0, some of my script applications stopped to work properly, seemingly because of hadoop dfs utility returning 0 exit code when it should not (kind of revival of hadoop-488, with a different cause).
> dfs -cat  and dfs -rm always return exit code 0, even for non-existing files. The former can be traced back to the fact that DFSShell's 'run' method calls a 'doall' method without passing on the exit code ('doall' catches its own exceptions and returns an exit code). The latter occurs because the return code of the DFSClient delete method is only used in DFS Shell to print different messages without affecting exit code.
> There might be more inconsistent behavior of the dfs shell. Hadoop dfs command line should return 0 signaling success exactly when the corresponding unix command returns 0 (or at least it should be related to success whatever this means in a documented manner).
> I also would recommend to use a kind of regression test to prevent that this gets broken again.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 17 20:28:59 2006
Return-Path: 
 <hadoop-dev-return-5222-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78523 invoked from network); 17 Nov 2006 20:28:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 20:28:59 -0000
Received: (qmail 42387 invoked by uid 500); 17 Nov 2006 20:29:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42365 invoked by uid 500); 17 Nov 2006 20:29:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42354 invoked by uid 99); 17 Nov 2006 20:29:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 12:29:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 12:28:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 405B0714327
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 12:28:38 -0800 (PST)
Message-ID: <33511935.1163795318260.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 12:28:38 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-692?page=all ]

Hairong Kuang updated HADOOP-692:
---------------------------------

    Attachment: Rack_aware_HDFS_proposal.pdf

Attached please read my revised proposal.

> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.0
>
>         Attachments: Rack_aware_HDFS_proposal.pdf
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 17 23:27:59 2006
Return-Path: 
 <hadoop-dev-return-5223-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37076 invoked from network); 17 Nov 2006 23:27:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 23:27:59 -0000
Received: (qmail 731 invoked by uid 500); 17 Nov 2006 23:28:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 698 invoked by uid 500); 17 Nov 2006 23:28:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 688 invoked by uid 99); 17 Nov 2006 23:28:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 15:28:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 15:27:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 17003714322
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 15:27:37 -0800 (PST)
Message-ID: <16336352.1163806057091.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 15:27:37 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-734) Link to the FAQ in the "Documentation"
 section of the hadoop website
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Link to the FAQ in the "Documentation" section of the hadoop website
--------------------------------------------------------------------

                 Key: HADOOP-734
                 URL: http://issues.apache.org/jira/browse/HADOOP-734
             Project: Hadoop
          Issue Type: Bug
            Reporter: Konstantin Shvachko
         Assigned To: Konstantin Shvachko


We should place commonly discussed topics on the wiki FAQ.
This patch provides a link to the wiki FAQ from hadoop web site.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 17 23:33:59 2006
Return-Path: 
 <hadoop-dev-return-5224-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38368 invoked from network); 17 Nov 2006 23:33:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 23:33:59 -0000
Received: (qmail 6686 invoked by uid 500); 17 Nov 2006 23:34:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6539 invoked by uid 500); 17 Nov 2006 23:34:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6530 invoked by uid 99); 17 Nov 2006 23:34:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 15:34:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 15:33:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 41303714322
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 15:33:38 -0800 (PST)
Message-ID: <1210067.1163806418264.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 15:33:38 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-734) Link to the FAQ in the "Documentation"
 section of the hadoop website
In-Reply-To: <16336352.1163806057091.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-734?page=all ]

Konstantin Shvachko updated HADOOP-734:
---------------------------------------

    Attachment: FAQLink.patch

The patch contains both modified site.xml and a diff of files generated by forrest.


> Link to the FAQ in the "Documentation" section of the hadoop website
> --------------------------------------------------------------------
>
>                 Key: HADOOP-734
>                 URL: http://issues.apache.org/jira/browse/HADOOP-734
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: FAQLink.patch
>
>
> We should place commonly discussed topics on the wiki FAQ.
> This patch provides a link to the wiki FAQ from hadoop web site.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 17 23:35:59 2006
Return-Path: 
 <hadoop-dev-return-5225-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38750 invoked from network); 17 Nov 2006 23:35:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 23:35:59 -0000
Received: (qmail 8338 invoked by uid 500); 17 Nov 2006 23:36:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8301 invoked by uid 500); 17 Nov 2006 23:36:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8292 invoked by uid 99); 17 Nov 2006 23:36:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 15:36:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 15:35:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5E52C714322
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 15:35:38 -0800 (PST)
Message-ID: <19614328.1163806538383.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 15:35:38 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-734) Link to the FAQ in the "Documentation"
 section of the hadoop website
In-Reply-To: <16336352.1163806057091.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-734?page=all ]

Konstantin Shvachko updated HADOOP-734:
---------------------------------------

               Status: Patch Available  (was: Open)
        Fix Version/s: 0.9.0
    Affects Version/s: 0.8.0

> Link to the FAQ in the "Documentation" section of the hadoop website
> --------------------------------------------------------------------
>
>                 Key: HADOOP-734
>                 URL: http://issues.apache.org/jira/browse/HADOOP-734
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.8.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.9.0
>
>         Attachments: FAQLink.patch
>
>
> We should place commonly discussed topics on the wiki FAQ.
> This patch provides a link to the wiki FAQ from hadoop web site.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 17 23:59:58 2006
Return-Path: 
 <hadoop-dev-return-5226-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44474 invoked from network); 17 Nov 2006 23:59:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 23:59:58 -0000
Received: (qmail 30227 invoked by uid 500); 18 Nov 2006 00:00:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30203 invoked by uid 500); 18 Nov 2006 00:00:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30194 invoked by uid 99); 18 Nov 2006 00:00:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 16:00:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 15:59:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 15B08714322
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 15:59:37 -0800 (PST)
Message-ID: <11740819.1163807977086.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 15:59:37 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-735) The underlying data structure,
 ByteArrayOutputStream,  for buffer type of Jute record is inappropriate
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The underlying data structure, ByteArrayOutputStream,  for buffer type of Jute record is inappropriate
------------------------------------------------------------------------------------------------------

                 Key: HADOOP-735
                 URL: http://issues.apache.org/jira/browse/HADOOP-735
             Project: Hadoop
          Issue Type: Bug
            Reporter: Runping Qi



With ByteArrayOutputStream as the underlying data structure for a buffer, the user is forced to convert it into a byte [] object in order to do any operations other than sequence append on the buffer. The convertion will create a new copy of bytes. That will cause huge performance problem. 

It seems BytesWritable is a better replacement.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 18 00:02:00 2006
Return-Path: 
 <hadoop-dev-return-5227-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45336 invoked from network); 18 Nov 2006 00:02:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 00:02:00 -0000
Received: (qmail 33973 invoked by uid 500); 18 Nov 2006 00:02:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33807 invoked by uid 500); 18 Nov 2006 00:02:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33796 invoked by uid 99); 18 Nov 2006 00:02:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 16:02:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 16:01:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DD516714324
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 16:01:38 -0800 (PST)
Message-ID: <19801402.1163808098903.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 16:01:38 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-673?page=comments#action_12450931 ] 
            
Mahadev konar commented on HADOOP-673:
--------------------------------------

I have the following proposal:

The tasks run in the task specific directory that is 
<local>/jobcache/<jobid>/<taskid> to create a virtual isolated environment for the tasks 

and streaming and all other applications access the job.jar files 
using 
../work/

does that seem ok?
I will be implementing this soon so please comment if you have any suggestions or problems with the above proposal.

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 18 00:06:00 2006
Return-Path: 
 <hadoop-dev-return-5228-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46102 invoked from network); 18 Nov 2006 00:06:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 00:06:00 -0000
Received: (qmail 38527 invoked by uid 500); 18 Nov 2006 00:06:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38362 invoked by uid 500); 18 Nov 2006 00:06:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38352 invoked by uid 99); 18 Nov 2006 00:06:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 16:06:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 16:05:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9B42F714324
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 16:05:39 -0800 (PST)
Message-ID: <1992191.1163808339633.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 16:05:39 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-673) the task execution environment should
 have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-673?page=all ]

Mahadev konar reassigned HADOOP-673:
------------------------------------

    Assignee: Mahadev konar  (was: Owen O'Malley)

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.9.0
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 18 00:08:00 2006
Return-Path: 
 <hadoop-dev-return-5229-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46414 invoked from network); 18 Nov 2006 00:08:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 00:08:00 -0000
Received: (qmail 42770 invoked by uid 500); 18 Nov 2006 00:08:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42742 invoked by uid 500); 18 Nov 2006 00:08:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42733 invoked by uid 99); 18 Nov 2006 00:08:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 16:08:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 16:07:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 42247714322
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 16:07:38 -0800 (PST)
Message-ID: <31007001.1163808458268.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 16:07:38 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-709) streaming job with Control characters
 in the command causes runtime exception in the job tracker
In-Reply-To: <22924647.1163198079083.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-709?page=all ]

dhruba borthakur updated HADOOP-709:
------------------------------------

    Attachment: ctrlchars_in_streaming

URLEncode the streaming related key-value pairs in the job.xml file.
   stream.map.streamprocessor
   stream.reduce.streamprocessor
   stream.combine.streamprocessor



> streaming job with Control characters in the command causes runtime exception in the job tracker
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-709
>                 URL: http://issues.apache.org/jira/browse/HADOOP-709
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: ctrlchars_in_streaming
>
>
> I run a streaming job with a Ctrl-A character in the command line option as follows:
> $HSTREAMING -mapper "/bin/sort -t'^A'" -input "input/*" -output output
> It causes a exeception as listed below. If i run the same command without the Ctrl-A character the command completes successfully.
> Exception in thread "main" org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.lang.RuntimeException: org.xml.sax.SAXParseException: Character reference "&#1" is an invalid XML character.
>         at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:551)
>         at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:472)
>         at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:453)
>         at org.apache.hadoop.conf.Configuration.get(Configuration.java:201)
>         at org.apache.hadoop.mapred.JobConf.getUser(JobConf.java:175)
>         at org.apache.hadoop.mapred.JobInProgress.<init>(JobInProgress.java:88)
>         at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:1016)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:337)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:514)
>         at org.apache.hadoop.ipc.Client$Connection.run(Client.java:248)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 18 00:10:00 2006
Return-Path: 
 <hadoop-dev-return-5230-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46773 invoked from network); 18 Nov 2006 00:10:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 00:10:00 -0000
Received: (qmail 48087 invoked by uid 500); 18 Nov 2006 00:10:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48061 invoked by uid 500); 18 Nov 2006 00:10:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48052 invoked by uid 99); 18 Nov 2006 00:10:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 16:10:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 16:09:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B60BD714324
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 16:09:38 -0800 (PST)
Message-ID: <19938930.1163808578743.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 16:09:38 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-709) streaming job with Control characters
 in the command causes runtime exception in the job tracker
In-Reply-To: <22924647.1163198079083.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-709?page=all ]

dhruba borthakur updated HADOOP-709:
------------------------------------

    Status: Patch Available  (was: Open)

URLEncode the streaming related key-value pairs in the job.xml file.
   stream.map.streamprocessor
   stream.reduce.streamprocessor
   stream.combine.streamprocessor 

Reviewed: mahadev.

> streaming job with Control characters in the command causes runtime exception in the job tracker
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-709
>                 URL: http://issues.apache.org/jira/browse/HADOOP-709
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: ctrlchars_in_streaming
>
>
> I run a streaming job with a Ctrl-A character in the command line option as follows:
> $HSTREAMING -mapper "/bin/sort -t'^A'" -input "input/*" -output output
> It causes a exeception as listed below. If i run the same command without the Ctrl-A character the command completes successfully.
> Exception in thread "main" org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.lang.RuntimeException: org.xml.sax.SAXParseException: Character reference "&#1" is an invalid XML character.
>         at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:551)
>         at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:472)
>         at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:453)
>         at org.apache.hadoop.conf.Configuration.get(Configuration.java:201)
>         at org.apache.hadoop.mapred.JobConf.getUser(JobConf.java:175)
>         at org.apache.hadoop.mapred.JobInProgress.<init>(JobInProgress.java:88)
>         at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:1016)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:337)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:514)
>         at org.apache.hadoop.ipc.Client$Connection.run(Client.java:248)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 18 00:26:01 2006
Return-Path: 
 <hadoop-dev-return-5231-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51112 invoked from network); 18 Nov 2006 00:26:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 00:26:01 -0000
Received: (qmail 64785 invoked by uid 500); 18 Nov 2006 00:26:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64548 invoked by uid 500); 18 Nov 2006 00:26:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64539 invoked by uid 99); 18 Nov 2006 00:26:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 16:26:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 16:25:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AF52A714322
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 16:25:39 -0800 (PST)
Message-ID: <27414107.1163809539715.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 16:25:39 -0800 (PST)
From: "Richard Kasperski (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-673?page=comments#action_12450936 ] 
            
Richard Kasperski commented on HADOOP-673:
------------------------------------------

I think that it is very important that there be a way for an application to run in a sandbox <local>/jobcache/<jobid>/<taskid>  that contains the contents of the jar file and is the current working directory. How one accomplishes this is an implementation detail. If the only way to do it is to unjar the archive more than once then I guess that would have to be the solution. This saves the potential for a lot of grief. No shared files are ever modified because they aren't actually shared. This causes more unpacking of jars but I don't really see that as a problem. How the jar's are copied to a node and the  subsequent reuse of the jar is important. 

That is the sandbox. Then there is the shared sandbox which is also two different instance to memory map a file and pay a single cost. This is best handled by either softlinks or hardlinks under unix/linux. 

Why do I think these are important models? Most of the programs that I write and that I use run out of the current directory and expect all of the their configuration files/resources can be read from there. For programs that have more sophisticated models of deployment the models above are still ok. For the simpler programs the proposed external repository doesn't work.

OTOH I can always run a script that will hard link the files from the directory where the jar to my current working directory. I just don't believe that this should be forced on the users. Having the users do system'ish things is potentially dangerous.

Even more restrictive then the above sandbox would be one in which the application is run chroot'd. That way there is no way it could muck with anything system like on the nodes. This is an important consideration when one lets arbitrary programs to be run. 

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.9.0
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 18 00:31:00 2006
Return-Path: 
 <hadoop-dev-return-5232-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52555 invoked from network); 18 Nov 2006 00:31:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 00:31:00 -0000
Received: (qmail 69263 invoked by uid 500); 18 Nov 2006 00:31:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69238 invoked by uid 500); 18 Nov 2006 00:31:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69229 invoked by uid 99); 18 Nov 2006 00:31:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 16:31:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 16:30:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3F3F4714322
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 16:30:38 -0800 (PST)
Message-ID: <30290388.1163809838256.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 16:30:38 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-677) RPC should send a fixed header and
 version at the start of connection
In-Reply-To: <13169984.1162511057744.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-677?page=all ]

Owen O'Malley updated HADOOP-677:
---------------------------------

    Attachment: rpc-header.patch

This patch causes the server to ignore a header on the start of ipc/rpc connections that look like:

"hrpc" <version byte>

The client has a static boolean variable about whether it should send such headers and it is currently set to false.

My plan is to have:
0.9: permissive server, old client
0.10: permissive server, new client
0.11: strict server, new client

If the hdfs protocol changes before 0.11, we can move to strict servers sooner. *smile*

> RPC should send a fixed header and version at the start of connection
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-677
>                 URL: http://issues.apache.org/jira/browse/HADOOP-677
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>         Attachments: rpc-header.patch
>
>
> There have been problems with http clients connecting to the RPC servers, which causes the RPC to try and allocate huge buffers and get OutOfMemoryExceptions. I want to have a fixed prefix that is sent first that identifies it as an RPC client. To make the system compatible as much as possible, I'd make the servers accept both forms for a Hadoop release and then change the clients to send the prefix, and finally make the servers only accept the new form.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 18 00:32:59 2006
Return-Path: 
 <hadoop-dev-return-5233-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52860 invoked from network); 18 Nov 2006 00:32:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 00:32:59 -0000
Received: (qmail 71266 invoked by uid 500); 18 Nov 2006 00:33:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71033 invoked by uid 500); 18 Nov 2006 00:33:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71024 invoked by uid 99); 18 Nov 2006 00:33:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 16:33:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 16:32:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6751F714322
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 16:32:38 -0800 (PST)
Message-ID: <11869177.1163809958420.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 16:32:38 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-677) RPC should send a fixed header and
 version at the start of connection
In-Reply-To: <13169984.1162511057744.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-677?page=all ]

Owen O'Malley updated HADOOP-677:
---------------------------------

    Status: Patch Available  (was: Open)

> RPC should send a fixed header and version at the start of connection
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-677
>                 URL: http://issues.apache.org/jira/browse/HADOOP-677
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>         Attachments: rpc-header.patch
>
>
> There have been problems with http clients connecting to the RPC servers, which causes the RPC to try and allocate huge buffers and get OutOfMemoryExceptions. I want to have a fixed prefix that is sent first that identifies it as an RPC client. To make the system compatible as much as possible, I'd make the servers accept both forms for a Hadoop release and then change the clients to send the prefix, and finally make the servers only accept the new form.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 18 01:03:11 2006
Return-Path: 
 <hadoop-dev-return-5234-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66998 invoked from network); 18 Nov 2006 01:03:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 01:03:11 -0000
Received: (qmail 6537 invoked by uid 500); 18 Nov 2006 01:03:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6509 invoked by uid 500); 18 Nov 2006 01:03:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6499 invoked by uid 99); 18 Nov 2006 01:03:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 17:03:20 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 17:03:08 -0800
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kAI12gwE075725
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 17:02:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=s+jPDdRbD0wSeDl3uLJaEcFt9jW1oHVXk6V7Wf/Tw6jik9uNTRq67ojcHv7heK/1
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <27414107.1163809539715.JavaMail.jira@brutus>
References: <27414107.1163809539715.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1b30439a743af3f962246eae1614df03@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
Date: Fri, 17 Nov 2006 17:02:40 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org

+1  on Richard's comments
+1  on Dick's (MR should symlink the files that belong to the task into  
the task running directory)
-10 on ../work

On Nov 17, 2006, at 4:25 PM, Richard Kasperski (JIRA) wrote:

>     [  
> http://issues.apache.org/jira/browse/HADOOP-673? 
> page=comments#action_12450936 ]
>
> Richard Kasperski commented on HADOOP-673:
> ------------------------------------------
>
> I think that it is very important that there be a way for an  
> application to run in a sandbox <local>/jobcache/<jobid>/<taskid>   
> that contains the contents of the jar file and is the current working  
> directory. How one accomplishes this is an implementation detail. If  
> the only way to do it is to unjar the archive more than once then I  
> guess that would have to be the solution. This saves the potential for  
> a lot of grief. No shared files are ever modified because they aren't  
> actually shared. This causes more unpacking of jars but I don't really  
> see that as a problem. How the jar's are copied to a node and the   
> subsequent reuse of the jar is important.
>
> That is the sandbox. Then there is the shared sandbox which is also  
> two different instance to memory map a file and pay a single cost.  
> This is best handled by either softlinks or hardlinks under  
> unix/linux.
>
> Why do I think these are important models? Most of the programs that I  
> write and that I use run out of the current directory and expect all  
> of the their configuration files/resources can be read from there. For  
> programs that have more sophisticated models of deployment the models  
> above are still ok. For the simpler programs the proposed external  
> repository doesn't work.
>
> OTOH I can always run a script that will hard link the files from the  
> directory where the jar to my current working directory. I just don't  
> believe that this should be forced on the users. Having the users do  
> system'ish things is potentially dangerous.
>
> Even more restrictive then the above sandbox would be one in which the  
> application is run chroot'd. That way there is no way it could muck  
> with anything system like on the nodes. This is an important  
> consideration when one lets arbitrary programs to be run.
>
>> the task execution environment should have a current working  
>> directory that is task specific
>> ---------------------------------------------------------------------- 
>> ----------------------
>>
>>                 Key: HADOOP-673
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>>             Project: Hadoop
>>          Issue Type: Bug
>>          Components: mapred
>>    Affects Versions: 0.7.2
>>            Reporter: Owen O'Malley
>>         Assigned To: Mahadev konar
>>             Fix For: 0.9.0
>>
>>
>> The tasks should be run in a work directory that is specific to a  
>> single task. In particular, I'd suggest using the  
>> <local>/jobcache/<jobid>/<taskid> as the current working directory.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Sat Nov 18 01:06:02 2006
Return-Path: 
 <hadoop-dev-return-5235-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67428 invoked from network); 18 Nov 2006 01:06:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 01:06:02 -0000
Received: (qmail 9363 invoked by uid 500); 18 Nov 2006 01:06:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9115 invoked by uid 500); 18 Nov 2006 01:06:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9106 invoked by uid 99); 18 Nov 2006 01:06:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 17:06:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 17:06:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E8FD7714324
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 17:05:40 -0800 (PST)
Message-ID: <13856747.1163811940951.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 17:05:40 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-673?page=comments#action_12450942 ] 
            
Owen O'Malley commented on HADOOP-673:
--------------------------------------

Richard, I don't understand why having the jar expanded in ".." is unacceptable to you. It seems to me the requirements are:
  1. there be an easy way to get to the expanded jar
  2. each task run in sandbox
In previous systems we've taken this approach and it has worked very well.

The problem with links is that they are not supported in Java, which is our implementation language, or in Windows, which is a supported platform. Furthermore, since the files are a SHARED resource it is not appropriate for them to be hardlinked into the sandbox. If the application uses "../foo.txt" they are aware that they are leaving the sandbox and that they need to play nicely.



> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.9.0
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 18 02:13:24 2006
Return-Path: 
 <hadoop-dev-return-5236-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81377 invoked from network); 18 Nov 2006 02:13:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 02:13:24 -0000
Received: (qmail 68667 invoked by uid 500); 18 Nov 2006 02:13:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68487 invoked by uid 500); 18 Nov 2006 02:13:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68018 invoked by uid 99); 18 Nov 2006 02:13:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 18:13:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yichao.zhang@gmail.com
 designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 18:13:14 -0800
Received: by wx-out-0506.google.com with SMTP id h26so1002962wxd
        for <hadoop-dev@lucene.apache.org>;
 Fri, 17 Nov 2006 18:12:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WVMdGEzyk6oQzSo0VV9PrEMrMLtLq00QUWdsr21H8D4knQ4MnxL1dS042MWzpPW6dWhYVe6eUzlD+5ptMSru2p1LAGEB8Yjrq6w2SBazWFgvC6fMTmON4qo7S+d0tq6jmekKydZRuR+KYBZYaybtFl9z2z+NohrpAl0ezNWYQAU=
Received: by 10.70.9.8 with SMTP id 8mr4309672wxi.1163815972983;
        Fri, 17 Nov 2006 18:12:52 -0800 (PST)
Received: by 10.70.122.15 with HTTP; Fri, 17 Nov 2006 18:12:52 -0800 (PST)
Message-ID: <c1c2fd520611171812s2603b7a6ndf0db45df6b4b159@mail.gmail.com>
Date: Sat, 18 Nov 2006 10:12:52 +0800
From: yichao.zhang <yichao.zhang@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: Administrative Request
In-Reply-To: <455CA851.9010406@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_101717_3140535.1163815972853"
References: <94C60AE0-EF3E-4A12-B146-59BDF98544A0@athena.com>
	 <455CA851.9010406@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_101717_3140535.1163815972853
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

In gmail, I create two filters:
mail Matches: to:(hadoop-dev@lucene.apache.org) subject:(-[jira]) will skip
inbox and applied with label "hdp-dev"
mail Matches: to:(hadoop-dev@lucene.apache.org) subject:([jira]) will skip
inbox and applied with label "hdp-dev-jira"

On 11/17/06, Doug Cutting <cutting@apache.org> wrote:
>
> David Pollak wrote:
> > Would it be possible to add [Hadoop-Dev] to the subject of each message
> > in this mailing list?
>
> It might be possible, but it is not the Apache convention.  You can use
> a filter to file messages by list-id, or you you can subscribe under a
> different email address.
>
> Doug
>

------=_Part_101717_3140535.1163815972853--

From MAILER-DAEMON Sat Nov 18 05:09:00 2006
Return-Path: 
 <hadoop-dev-return-5237-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16872 invoked from network); 18 Nov 2006 05:09:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 05:09:00 -0000
Received: (qmail 74937 invoked by uid 500); 18 Nov 2006 05:09:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74905 invoked by uid 500); 18 Nov 2006 05:09:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74896 invoked by uid 99); 18 Nov 2006 05:09:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 21:09:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 21:08:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 534527142F7
	for <hadoop-dev@lucene.apache.org>; Fri, 17 Nov 2006 21:08:38 -0800 (PST)
Message-ID: <26365575.1163826518338.JavaMail.jira@brutus>
Date: Fri, 17 Nov 2006 21:08:38 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-702) DFS Upgrade Proposal
In-Reply-To: <13641771.1163042497986.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-702?page=all ]

Konstantin Shvachko updated HADOOP-702:
---------------------------------------

    Attachment: DFSUpgradeProposal2.html

I substantially modified the upgrade proposal.

- There will be more changes in the data layout.
Please let me know if something is not satisfactory. E.g. changing file or directory
names will be very hard with backward compatibility and up-/de-gradability in mind.

- Taking into account massive layout changes and also that upgrades with rollback are 
hard to support for versions with different directory structures, I propose to keep automatic 
data conversion (as we had until now) from the current version to the next one. 
No going back (rollback) and force (upgrade) between current and the next versions. 
The upgrades will be supported once the data is converted to the new format.
Hope that makes sense.

- The proposal contains more details to cover different failure scenarios.
Like data-node started the upgrade or discard process but crashed before completing.

- The discard and the rollback commands are not commands, but rather server startup
options. We do not have administrative authorization and this should make harder to 
do an upgrade, discard or rollback by mistake.


> DFS Upgrade Proposal
> --------------------
>
>                 Key: HADOOP-702
>                 URL: http://issues.apache.org/jira/browse/HADOOP-702
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Konstantin Shvachko
>         Attachments: DFSUpgradeProposal.html, DFSUpgradeProposal2.html
>
>
> Currently the DFS cluster upgrade procedure is manual.
> http://wiki.apache.org/lucene-hadoop/Hadoop_Upgrade
> It is rather complicated and does not guarantee data recoverability in case of software errors or administrator mistakes.
> This is a description of utilities that make the upgrade process almost automatic and minimize chance of loosing or corrupting data.
> Please see the attached html file for details.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Nov 18 12:47:01 2006
Return-Path: 
 <hadoop-dev-return-5238-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15295 invoked from network); 18 Nov 2006 12:47:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 12:47:01 -0000
Received: (qmail 42191 invoked by uid 500); 18 Nov 2006 12:47:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41968 invoked by uid 500); 18 Nov 2006 12:47:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41959 invoked by uid 99); 18 Nov 2006 12:47:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 04:47:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 04:46:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 58C9071430D
	for <hadoop-dev@lucene.apache.org>; Sat, 18 Nov 2006 04:46:39 -0800 (PST)
Message-ID: <19983315.1163853999359.JavaMail.jira@brutus>
Date: Sat, 18 Nov 2006 04:46:39 -0800 (PST)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-707) Final map task gets stuck
In-Reply-To: <30328258.1163169157124.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-707?page=comments#action_12451007 ] 
            
Johan Oskarson commented on HADOOP-707:
---------------------------------------

The jobtracker ui shows the task as still running. The tasktracker web ui also shows the task as running. Howerver, on that node there is only a datanode and tasktracker running.

In the tasktracker log on that node:

2006-11-18 01:39:53,722 INFO org.apache.hadoop.mapred.TaskRunner: task_0197_m_000137_0 06/11/18 01:39:53 WARN mapred.TaskRunner: java.net.SocketTimeoutException: timed out waiting for rpc response
2006-11-18 01:39:53,722 INFO org.apache.hadoop.mapred.TaskRunner: task_0197_m_000137_0  at org.apache.hadoop.ipc.Client.call(Client.java:460)
2006-11-18 01:39:53,722 INFO org.apache.hadoop.mapred.TaskRunner: task_0197_m_000137_0  at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:164)
2006-11-18 01:39:53,722 INFO org.apache.hadoop.mapred.TaskRunner: task_0197_m_000137_0  at org.apache.hadoop.mapred.$Proxy0.progress(Unknown Source)
2006-11-18 01:39:53,723 INFO org.apache.hadoop.mapred.TaskRunner: task_0197_m_000137_0  at org.apache.hadoop.mapred.Task.reportProgress(Task.java:173)
2006-11-18 01:39:53,723 INFO org.apache.hadoop.mapred.TaskRunner: task_0197_m_000137_0  at org.apache.hadoop.mapred.Task.reportProgress(Task.java:162)
2006-11-18 01:39:53,723 INFO org.apache.hadoop.mapred.TaskRunner: task_0197_m_000137_0  at org.apache.hadoop.mapred.MapTask$3.next(MapTask.java:200)
2006-11-18 01:39:53,723 INFO org.apache.hadoop.mapred.TaskRunner: task_0197_m_000137_0  at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:46)
2006-11-18 01:39:53,723 INFO org.apache.hadoop.mapred.TaskRunner: task_0197_m_000137_0  at org.apache.hadoop.mapred.MapTask.run(MapTask.java:215)
2006-11-18 01:39:53,723 INFO org.apache.hadoop.mapred.TaskRunner: task_0197_m_000137_0  at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1247)
2006-11-18 01:39:53,723 INFO org.apache.hadoop.mapred.TaskRunner: task_0197_m_000137_0
2006-11-18 01:39:54,166 INFO org.apache.hadoop.mapred.TaskTracker: task_0197_m_000137_0 0.8654954% /user/hadoop/data/submissions/1160000000/1163000000/1163730000/1163730000:30169435+6033887
2006-11-18 01:39:54,166 INFO org.apache.hadoop.mapred.TaskRunner: task_0194_m_001875_0 done; removing files.
2006-11-18 01:39:54,894 INFO org.apache.hadoop.mapred.TaskTracker: task_0197_m_000137_0 1.0% /user/hadoop/data/submissions/1160000000/1163000000/1163730000/1163730000:30169435+6033887
2006-11-18 01:39:54,894 INFO org.apache.hadoop.mapred.TaskRunner: task_0194_m_001888_0 done; removing files.
2006-11-18 01:39:55,268 INFO org.apache.hadoop.mapred.TaskTracker: Task task_0197_m_000137_0 is done.

And a bit further down:

2006-11-18 01:39:56,257 WARN org.apache.hadoop.ipc.Server: handler output error
java.nio.channels.ClosedChannelException
        at sun.nio.ch.SocketChannelImpl.ensureWriteOpen(SocketChannelImpl.java:125)
        at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:294)
        at org.apache.hadoop.ipc.SocketChannelOutputStream.flushBuffer(SocketChannelOutputStream.java:108)
        at org.apache.hadoop.ipc.SocketChannelOutputStream.write(SocketChannelOutputStream.java:89)
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
        at java.io.DataOutputStream.flush(DataOutputStream.java:106)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:532)

> Final map task gets stuck
> -------------------------
>
>                 Key: HADOOP-707
>                 URL: http://issues.apache.org/jira/browse/HADOOP-707
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>         Environment: using latest trunk
>            Reporter: Johan Oskarson
>            Priority: Critical
>
> I've seen numerous jobs lately where the final map task gets stuck, never finishing.
> The jobtracker doesn't reassign the task. A restart of the tasktracker solves the issue and the job can finish.
> In the web interface it turns up as:
> task_0028_m_000534_0 node17.herd1 RUNNING 0.00%    10-Nov-2006 12:21:12 10-Nov-2006 12:22:19 (1mins, 6sec)
> Task failed to report status for 604 seconds. Killing.
> Only exception I find in that tasktracker log is this (a few times):
> java.nio.channels.ClosedChannelException
>         at sun.nio.ch.SocketChannelImpl.ensureWriteOpen(SocketChannelImpl.java:125)
>         at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:294)
>         at org.apache.hadoop.ipc.SocketChannelOutputStream.flushBuffer(SocketChannelOutputStream.java:108)
>         at org.apache.hadoop.ipc.SocketChannelOutputStream.write(SocketChannelOutputStream.java:89)
>         at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
>         at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
>         at java.io.DataOutputStream.flush(DataOutputStream.java:106)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:532)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Nov 19 00:21:26 2006
Return-Path: 
 <hadoop-dev-return-5239-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30486 invoked from network); 19 Nov 2006 00:21:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2006 00:21:26 -0000
Received: (qmail 64703 invoked by uid 500); 19 Nov 2006 00:21:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64652 invoked by uid 500); 19 Nov 2006 00:21:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64633 invoked by uid 99); 19 Nov 2006 00:21:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 16:21:35 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_ID,NO_REAL_NAME,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received: from [140.211.11.75] (HELO lucene.zones.apache.org) (140.211.11.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 16:21:23 -0800
Received: from lucene.zones.apache.org (localhost [127.0.0.1])
	by lucene.zones.apache.org (8.13.7+Sun/8.13.7) with SMTP id kAJ0L2IF001355
	for <hadoop-dev@lucene.apache.org>; Sun, 19 Nov 2006 00:21:02 GMT
Message-Id: <200611190021.kAJ0L2IF001355@lucene.zones.apache.org>
Date: Sun, 19 Nov 2006 00:21:02 +0000
Subject: Hadoop nightly build failure
From: hadoop-dev@lucene.apache.org
To: hadoop-dev@lucene.apache.org
X-Mailer: org.apache.tools.mail.MailMessage (ant.apache.org)
X-Virus-Checked: Checked by ClamAV on apache.org


init:
    [mkdir] Created dir: /tmp/hadoop-nightly/build
    [mkdir] Created dir: /tmp/hadoop-nightly/build/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/src
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/task/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/job/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/dfs/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/datanode/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/examples
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/testjar
     [copy] Copying 6 files to /tmp/hadoop-nightly/build/webapps
     [copy] Copying 4 files to /tmp/hadoop-nightly/conf
     [copy] Copying /tmp/hadoop-nightly/conf/slaves.template to /tmp/hadoop-nightly/conf/slaves
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-site.xml.template to /tmp/hadoop-nightly/conf/hadoop-site.xml
     [copy] Copying /tmp/hadoop-nightly/conf/mapred-default.xml.template to /tmp/hadoop-nightly/conf/mapred-default.xml
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-env.sh.template to /tmp/hadoop-nightly/conf/hadoop-env.sh
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: whoami: not found

record-parser:

compile-core-classes:
    [javac] Compiling 257 source files to /tmp/hadoop-nightly/build/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-native:

compile-core:

compile-examples:
    [javac] Compiling 7 source files to /tmp/hadoop-nightly/build/examples
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-test:
    [javac] Compiling 62 source files to /tmp/hadoop-nightly/build/test/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] Compiling 1 source file to /tmp/hadoop-nightly/build/test/testjar
      [jar] Building jar: /tmp/hadoop-nightly/build/test/testjar/testjob.jar
      [jar] Building jar: /tmp/hadoop-nightly/build/hadoop-nightly-test.jar
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache

test-core:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/data
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/logs
    [junit] Running org.apache.hadoop.conf.TestConfiguration
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 1.112 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSMkdirs
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.697 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSShellGenericOptions
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 12.251 sec
    [junit] Running org.apache.hadoop.dfs.TestFsck
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.562 sec
    [junit] Running org.apache.hadoop.dfs.TestLocalDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 6.895 sec
    [junit] Running org.apache.hadoop.dfs.TestPread
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 4.894 sec
    [junit] Running org.apache.hadoop.dfs.TestSeekBug
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 5.942 sec
    [junit] Running org.apache.hadoop.dfs.TestSmallBlock
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.492 sec
    [junit] Running org.apache.hadoop.fs.TestCopyFiles
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 19.121 sec
    [junit] Running org.apache.hadoop.fs.TestDFSIO
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 6.683 sec
    [junit] Running org.apache.hadoop.fs.TestFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.147 sec
    [junit] Running org.apache.hadoop.fs.TestGlobPaths
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.493 sec
    [junit] Running org.apache.hadoop.fs.TestLocalFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.937 sec
    [junit] Running org.apache.hadoop.fs.TestPath
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.009 sec
    [junit] Running org.apache.hadoop.io.TestArrayFile
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 3.947 sec
    [junit] Running org.apache.hadoop.io.TestBytesWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.012 sec
    [junit] Running org.apache.hadoop.io.TestMD5Hash
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.438 sec
    [junit] Running org.apache.hadoop.io.TestSequenceFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 19.517 sec
    [junit] Running org.apache.hadoop.io.TestSetFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 5.636 sec
    [junit] Running org.apache.hadoop.io.TestText
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.781 sec
    [junit] Running org.apache.hadoop.io.TestTextNonUTF8
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.014 sec
    [junit] Running org.apache.hadoop.io.TestUTF8
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.147 sec
    [junit] Running org.apache.hadoop.io.TestVersionedWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.068 sec
    [junit] Running org.apache.hadoop.io.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.045 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodec
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 1.783 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodecFactory
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 1.306 sec
    [junit] Running org.apache.hadoop.ipc.TestIPC
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 2.698 sec
    [junit] Running org.apache.hadoop.ipc.TestRPC
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.164 sec
    [junit] Running org.apache.hadoop.mapred.TestEmptyJobWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 9.495 sec
    [junit] Running org.apache.hadoop.mapred.TestMapRed
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 12.743 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRBringup
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.027 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRClasspath
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 27.483 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRDFSCaching
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 27.342 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRLocalFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 59.77 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 84.994 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFilter
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 26.128 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFormat
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 8.742 sec
    [junit] Running org.apache.hadoop.mapred.TestTextInputFormat
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 5.515 sec
    [junit] Running org.apache.hadoop.mapred.jobcontrol.TestJobControl
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 104.483 sec
    [junit] Running org.apache.hadoop.record.test.TestMapRed
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.648 sec
    [junit] Running org.apache.hadoop.record.test.TestRecordIO
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.332 sec
    [junit] Running org.apache.hadoop.record.test.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 5.853 sec

test-contrib:

test:

init:
     [echo] contrib: smallJobsBenchmark
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/test/logs
    [mkdir] Created dir: /tmp/hadoop-nightly/build/minimr

init-contrib:

compile:
     [echo] contrib: smallJobsBenchmark
    [javac] Compiling 5 source files to /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: /tmp/hadoop-nightly/src/contrib/smallJobsBenchmark/src/java/org/apache/hadoop/benchmarks/mapred/MultiJobRunner.java uses unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-test:

jar:
      [jar] Building jar: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/MRBenchmark.jar

deploy:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/bin
     [copy] Copying 2 files to /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/bin

test:

test:

init:
     [echo] contrib: streaming
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming/test/logs

init-contrib:

compile:
     [echo] contrib: streaming
    [javac] Compiling 22 source files to /tmp/hadoop-nightly/build/contrib/streaming/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-test:
     [echo] contrib: streaming
    [javac] Compiling 6 source files to /tmp/hadoop-nightly/build/contrib/streaming/test
    [javac] Note: /tmp/hadoop-nightly/src/contrib/streaming/src/test/org/apache/hadoop/streaming/TestStreamedMerge.java uses or overrides a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: /tmp/hadoop-nightly/src/contrib/streaming/src/test/org/apache/hadoop/streaming/TestStreamedMerge.java uses unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

jar:
      [jar] Building jar: /tmp/hadoop-nightly/build/contrib/streaming/hadoop-streaming.jar

deploy:
     [echo] contrib: streaming
     [copy] Copying 1 file to /tmp/hadoop-nightly/build

hadoopbuildcontrib.test:
     [echo] contrib: streaming
   [delete] Deleting directory /tmp/hadoop-nightly/build/contrib/streaming/test/logs
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming/test/logs
    [junit] Running org.apache.hadoop.streaming.TestStreaming
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.782 sec
    [junit] Running org.apache.hadoop.streaming.TestSymLink
    [junit] Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 13.635 sec
    [junit] Test org.apache.hadoop.streaming.TestSymLink FAILED

BUILD FAILED
/tmp/hadoop-nightly/build.xml:394: The following error occurred while executing this line:
/tmp/hadoop-nightly/src/contrib/build.xml:23: The following error occurred while executing this line:
/tmp/hadoop-nightly/src/contrib/streaming/build.xml:25: The following error occurred while executing this line:
/tmp/hadoop-nightly/src/contrib/build-contrib.xml:164: Tests failed!

Total time: 9 minutes 21 seconds



From MAILER-DAEMON Sun Nov 19 07:53:59 2006
Return-Path: 
 <hadoop-dev-return-5240-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90520 invoked from network); 19 Nov 2006 07:53:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2006 07:53:59 -0000
Received: (qmail 94123 invoked by uid 500); 19 Nov 2006 07:54:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94091 invoked by uid 500); 19 Nov 2006 07:54:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94081 invoked by uid 99); 19 Nov 2006 07:54:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 23:54:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 23:53:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 52E4E7142F6
	for <hadoop-dev@lucene.apache.org>; Sat, 18 Nov 2006 23:53:38 -0800 (PST)
Message-ID: <8160356.1163922818336.JavaMail.jira@brutus>
Date: Sat, 18 Nov 2006 23:53:38 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-700) bin/hadoop includes in classpath all
 jar files in HADOOP_HOME
In-Reply-To: <4773319.1163036617124.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-700?page=comments#action_12451118 ] 
            
Hadoop QA commented on HADOOP-700:
----------------------------------

a\ntest

> bin/hadoop includes in classpath all jar files in HADOOP_HOME
> -------------------------------------------------------------
>
>                 Key: HADOOP-700
>                 URL: http://issues.apache.org/jira/browse/HADOOP-700
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>
> The hadoop script includes all jars from HADOOP_HOME in the classpath.  This means that all the daemons get the examples and tests included in their class paths.  If a change is made to an example or test, all the daemons have to be restarted to see the affect of the change.  This doesn't seem desirable.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 07:25:25 2006
Return-Path: 
 <hadoop-dev-return-5241-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44770 invoked from network); 20 Nov 2006 07:25:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 07:25:25 -0000
Received: (qmail 70396 invoked by uid 500); 20 Nov 2006 07:25:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70160 invoked by uid 500); 20 Nov 2006 07:25:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70059 invoked by uid 99); 20 Nov 2006 07:25:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Nov 2006 23:25:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Nov 2006 23:25:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 52A017142D2
	for <hadoop-dev@lucene.apache.org>; Sun, 19 Nov 2006 23:25:03 -0800 (PST)
Message-ID: <25654499.1164007503335.JavaMail.jira@brutus>
Date: Sun, 19 Nov 2006 23:25:03 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-736) Roll back Jetty6.0.1 to Jetty5.1.4
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Roll back Jetty6.0.1 to Jetty5.1.4
----------------------------------

                 Key: HADOOP-736
                 URL: http://issues.apache.org/jira/browse/HADOOP-736
             Project: Hadoop
          Issue Type: Bug
            Reporter: Devaraj Das
         Assigned To: Devaraj Das


There seems to be a problem with the current version of Jetty (6.0.1) in the case where we are using it for serving map outputs. It becomes very slow after serving a few outputs and doesn't recover from that state. Tried with the current release of Jetty - 6.1.0(pre1), but the problem seems to be there even with that release. So roll back to the previous Jetty version (5.1.4) seems to be right thing to do for now. This is the URL for the Jira issue on Jetty's performance issue: 
http://jira.codehaus.org/browse/JETTY-177

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 08:24:27 2006
Return-Path: 
 <hadoop-dev-return-5242-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63986 invoked from network); 20 Nov 2006 08:24:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 08:24:27 -0000
Received: (qmail 39752 invoked by uid 500); 20 Nov 2006 08:24:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39525 invoked by uid 500); 20 Nov 2006 08:24:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39516 invoked by uid 99); 20 Nov 2006 08:24:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 00:24:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 00:24:25 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D15FF7142CD
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 00:24:04 -0800 (PST)
Message-ID: <32803926.1164011044854.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 00:24:04 -0800 (PST)
From: "Gal Nitzan (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-24) make Configuration an interface
In-Reply-To: <52371844.1139256627178.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-24?page=comments#action_12451250 ] 
            
Gal Nitzan commented on HADOOP-24:
----------------------------------

Any comment???

> make Configuration an interface
> -------------------------------
>
>                 Key: HADOOP-24
>                 URL: http://issues.apache.org/jira/browse/HADOOP-24
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>    Affects Versions: 0.7.2
>            Reporter: Doug Cutting
>         Attachments: conf-with-factory.patch, configuration.java, configuration.patch, HADOOP-24-2.patch, HADOOP-24-3.patch, HADOOP-24-4.patch, HADOOP-24.patch, HADOOP-24.patch
>
>
> The Configuration class should become an interface, e.g.:
> public interface Configuration {
>   String get(String nam);
>   String set(String name, String value);
>   int getInt(String name);
>   void setInt(String name, int value);
>   float getFloat(String name);
>   void setFloat(String name, float value);
>   //... other utility methods based on get(String) and set(String,String) ...
> }
> An abstract class named ConfigurationBase should be implemented as follows:
> public abstract class ConfigurationBase implements Configuration {
>   abstract public String get(String nam);
>   abstract public String set(String name, String value);
>   public  int getInt(String name) { ... implementation in terms of get(String) ... }
>   public void setInt(String name, int value) {... implementation in terms of set(String, String) ...}
>   public float getFloat(String name)  { ... implementation in terms of get(String) ... }
>   public void setFloat(String name, float value)  {... implementation in terms of set(String, String) ...}
>   //... other utility methods based on get(String) and set(String,String) ...
> }
> A concrete, default implementation will be provided as follows:
> public class ConfigurationImpl implements Writable extends ConfigurationBase {
>   private Properties properties;
>   // implement abstract methods from ConfigurationBase
>   public String get(String name) { ... implemented in terms of props ...}
>   public String set(String name, String value) { .. implemented in terms of props ... }
>   // Writable methods
>   public write(DataOutputStream out);
>   public readFields(DataInputStream in);
>   // permit chaining of configurations
>   public Configuration getDefaults();
>   public void setDefaults(Configuration defaults);
> }
> Only code which creates configurations should need to be updated, so this shouldn't be a huge change.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 08:55:24 2006
Return-Path: 
 <hadoop-dev-return-5243-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72448 invoked from network); 20 Nov 2006 08:55:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 08:55:24 -0000
Received: (qmail 74427 invoked by uid 500); 20 Nov 2006 08:55:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74395 invoked by uid 500); 20 Nov 2006 08:55:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74386 invoked by uid 99); 20 Nov 2006 08:55:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 00:55:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 00:55:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2BDA27142D7
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 00:55:03 -0800 (PST)
Message-ID: <31941614.1164012903176.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 00:55:03 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-736) Roll back Jetty6.0.1 to Jetty5.1.4
In-Reply-To: <25654499.1164007503335.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-736?page=all ]

Devaraj Das updated HADOOP-736:
-------------------------------

    Attachment: jettyfiles-5.1.4.tar.gz

The files/directories which should be removed from the current version of trunk/lib are:
1) jetty-6.0.1.jar
2) servlet-api-2.5-6.0.1.jar
3) jsp-2.0
4) jetty-util-6.0.1.jar
5) slf4j-jcl.jar
6) slf4j-jcl.LICENSE.txt

The attached tarball contains the trunk/lib files/directories that need to be there for Jetty5.1.4.

> Roll back Jetty6.0.1 to Jetty5.1.4
> ----------------------------------
>
>                 Key: HADOOP-736
>                 URL: http://issues.apache.org/jira/browse/HADOOP-736
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: jettyfiles-5.1.4.tar.gz
>
>
> There seems to be a problem with the current version of Jetty (6.0.1) in the case where we are using it for serving map outputs. It becomes very slow after serving a few outputs and doesn't recover from that state. Tried with the current release of Jetty - 6.1.0(pre1), but the problem seems to be there even with that release. So roll back to the previous Jetty version (5.1.4) seems to be right thing to do for now. This is the URL for the Jira issue on Jetty's performance issue: 
> http://jira.codehaus.org/browse/JETTY-177

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 09:10:25 2006
Return-Path: 
 <hadoop-dev-return-5244-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75614 invoked from network); 20 Nov 2006 09:10:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 09:10:25 -0000
Received: (qmail 92496 invoked by uid 500); 20 Nov 2006 09:10:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92298 invoked by uid 500); 20 Nov 2006 09:10:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92289 invoked by uid 99); 20 Nov 2006 09:10:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 01:10:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 01:10:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 292957142D1
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 01:10:03 -0800 (PST)
Message-ID: <27418360.1164013803165.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 01:10:03 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-736) Roll back Jetty6.0.1 to Jetty5.1.4
In-Reply-To: <25654499.1164007503335.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-736?page=all ]

Devaraj Das updated HADOOP-736:
-------------------------------

    Attachment: jetty5.1.4.patch

jetty5.1.4.patch is for updating the files StatusHttpServer.java and bin/hadoop.

> Roll back Jetty6.0.1 to Jetty5.1.4
> ----------------------------------
>
>                 Key: HADOOP-736
>                 URL: http://issues.apache.org/jira/browse/HADOOP-736
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: jetty5.1.4.patch, jettyfiles-5.1.4.tar.gz
>
>
> There seems to be a problem with the current version of Jetty (6.0.1) in the case where we are using it for serving map outputs. It becomes very slow after serving a few outputs and doesn't recover from that state. Tried with the current release of Jetty - 6.1.0(pre1), but the problem seems to be there even with that release. So roll back to the previous Jetty version (5.1.4) seems to be right thing to do for now. This is the URL for the Jira issue on Jetty's performance issue: 
> http://jira.codehaus.org/browse/JETTY-177

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 09:29:25 2006
Return-Path: 
 <hadoop-dev-return-5245-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82596 invoked from network); 20 Nov 2006 09:29:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 09:29:25 -0000
Received: (qmail 13968 invoked by uid 500); 20 Nov 2006 09:29:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13737 invoked by uid 500); 20 Nov 2006 09:29:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13728 invoked by uid 99); 20 Nov 2006 09:29:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 01:29:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 01:29:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 666B97142F5
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 01:29:03 -0800 (PST)
Message-ID: <20352800.1164014943416.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 01:29:03 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-736) Roll back Jetty6.0.1 to Jetty5.1.4
In-Reply-To: <25654499.1164007503335.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-736?page=all ]

Devaraj Das updated HADOOP-736:
-------------------------------

    Status: Patch Available  (was: Open)

> Roll back Jetty6.0.1 to Jetty5.1.4
> ----------------------------------
>
>                 Key: HADOOP-736
>                 URL: http://issues.apache.org/jira/browse/HADOOP-736
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: jetty5.1.4.patch, jettyfiles-5.1.4.tar.gz
>
>
> There seems to be a problem with the current version of Jetty (6.0.1) in the case where we are using it for serving map outputs. It becomes very slow after serving a few outputs and doesn't recover from that state. Tried with the current release of Jetty - 6.1.0(pre1), but the problem seems to be there even with that release. So roll back to the previous Jetty version (5.1.4) seems to be right thing to do for now. This is the URL for the Jira issue on Jetty's performance issue: 
> http://jira.codehaus.org/browse/JETTY-177

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 12:47:25 2006
Return-Path: 
 <hadoop-dev-return-5246-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37961 invoked from network); 20 Nov 2006 12:47:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 12:47:25 -0000
Received: (qmail 84232 invoked by uid 500); 20 Nov 2006 12:47:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83995 invoked by uid 500); 20 Nov 2006 12:47:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83986 invoked by uid 99); 20 Nov 2006 12:47:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 04:47:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 04:47:22 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 04BFE7142CD
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 04:47:02 -0800 (PST)
Message-ID: <21785112.1164026822016.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 04:47:02 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-737) TaskTracker's job cleanup loop should
 check for finished job before deleting local directories
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

TaskTracker's job cleanup loop should check for finished job before deleting local directories 
-----------------------------------------------------------------------------------------------

                 Key: HADOOP-737
                 URL: http://issues.apache.org/jira/browse/HADOOP-737
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Sanjay Dahiya
         Assigned To: Sanjay Dahiya
            Priority: Critical


TaskTracker  uses jobClient.pollForTaskWithClosedJob() to find tasks which should be closed. This mechanism doesnt pass the information on whether the job is really finished or the task is being killed for some other reason( speculative instance succeeded). Since Tasktracker doesnt know this state it assumes job is finished and deletes local job dir, causing any subsequent tasks on the same task tracker for same job to fail with job.xml not found exception as reported in HADOOP-546 and possibly in HADOOP-543. This causes my patch for HADOOP-76 to fail for a large number of reduce tasks in some cases.
 
Same causes extra exceptions in logs while a job is being killed, the first task that gets closed will delete local directories and any other tasks (if any) which are about to get launched will throw this exception. In this case it is less significant is as the job is killed anyways and only logs get extra exceptions. 

Possible solutions : 
1. Add an extra method in InetTrackerProtocol for checking for job status before deleting local directory. 
2. Set TaskTracker.RunningJob.localized to false once the local directory is deleted so that new tasks don't look for it there. 

There is clearly a race condition in this and logs may still get the exception while shutdown but in normal cases it would work. 

Comments ? 


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 13:28:02 2006
Return-Path: 
 <hadoop-dev-return-5247-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49086 invoked from network); 20 Nov 2006 13:28:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 13:28:02 -0000
Received: (qmail 40481 invoked by uid 500); 20 Nov 2006 13:28:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40249 invoked by uid 500); 20 Nov 2006 13:28:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40240 invoked by uid 99); 20 Nov 2006 13:28:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 05:28:11 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: error (herse.apache.org: encountered temporary error during SPF
 processing of domain of enis.soz.nutch@gmail.com)
Received: from [69.50.210.250] (HELO server.handydns.com) (69.50.210.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 05:27:57 -0800
Received: from [212.174.130.110] (helo=[192.168.15.18])
	by server.handydns.com with esmtpa (Exim 4.52)
	id 1Gm9C2-0005EG-Pl
	for hadoop-dev@lucene.apache.org; Mon, 20 Nov 2006 06:28:15 -0700
Message-ID: <4561AD44.8010104@gmail.com>
Date: Mon, 20 Nov 2006 15:27:32 +0200
From: Enis Soztutar <enis.soz.nutch@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (X11/20060918)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: File to Path conversion
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse,
 please include it with any abuse report
X-AntiAbuse: Primary Hostname - server.handydns.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - gmail.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am currently working on converting the patch in Nutch-251 
<http://issues.apache.org/jira/browse/NUTCH-251> to work with the 
current trunk. the patch uses java.io.File instead of 
org.apache.hadoop.fs.Path.

My question is that path.isAbsolute() exists, but path.getAbsolute() 
does not. What is the way of getting the absolute path. if any. 
LocalFileSystem does not contain the code also. Also any help or advice 
will be appreciated in converting from File to Path.


And i have some problems with the FileSytem. Since some methods in the 
patch are static, i need a static LocalFileSystem object, but the 
constructor needs a Configuration as a parameter. Does any of you known 
that FileSystem fs = new LocalFileSystem(null) will work?

From MAILER-DAEMON Mon Nov 20 16:31:29 2006
Return-Path: 
 <hadoop-dev-return-5248-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17834 invoked from network); 20 Nov 2006 16:31:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 16:31:29 -0000
Received: (qmail 73927 invoked by uid 500); 20 Nov 2006 16:31:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73880 invoked by uid 500); 20 Nov 2006 16:31:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73862 invoked by uid 99); 20 Nov 2006 16:31:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 08:31:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 08:31:27 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DDBC97142CD
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 08:31:06 -0800 (PST)
Message-ID: <1920685.1164040266905.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 08:31:06 -0800 (PST)
From: "Richard Kasperski (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-673?page=comments#action_12451359 ] 
            
Richard Kasperski commented on HADOOP-673:
------------------------------------------

Owen,
  There are two primary reasons. 
1. Maybe I don't have access to the source of all programs that I might want to run, or I have the source and don't desire to make any changes. Having the data for an application be rooted in the current directory allows many more programs to be run with no changes.
2. I think of hadoop as an infrastructure to run other progams. not as something to write programs too. This means that I do not want to write into my progams hadoop'isms. 

Running streaming apps on hadoop should be as transparent as possible.

Files being a shared resource is an efficiency consideration not one required for proper operation. Is there an operational requirement for the files being shared such as I need to mmap the same file? Is this likely the way that most programs will be. 

It's not that I'm absolutely against the .. structure, just that it seems to me not to be the most useful structure. I would contend that if you desire the .. placement you need also, some how, provide for placement in the current working directory.

The above comments only apply to streaming. 

A more general comment, perhaps philosophical, perhaps religious.

The purpose of hadoop is to allow work to be divided and then executed with a belief of correctness that is the same as would have if I ran it as a single job on a single machine. Sharing data in a way that allows inadvertant/unintended manipulation of 'SHARED' data violates this. It seems to me that this should be used when efficiency is needed and the user can take an appropriate explicit action to enable it. 




> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.9.0
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 19:45:33 2006
Return-Path: 
 <hadoop-dev-return-5249-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74594 invoked from network); 20 Nov 2006 19:45:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 19:45:33 -0000
Received: (qmail 64166 invoked by uid 500); 20 Nov 2006 19:45:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64104 invoked by uid 500); 20 Nov 2006 19:45:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64069 invoked by uid 99); 20 Nov 2006 19:45:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 11:45:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 11:45:25 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6B0047142DC
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 11:45:05 -0800 (PST)
Message-ID: <13814125.1164051905435.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 11:45:05 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-731) Sometimes when a dfs file is
 accessed and one copy has a checksum error the I/O command fails, even if
 another copy is alright.
In-Reply-To: <32320319.1163705017123.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-731?page=comments#action_12451394 ] 
            
Hairong Kuang commented on HADOOP-731:
--------------------------------------

I feel that a patch to http://issues.apache.org/jira/browse/HADOOP-698 should also fix this problem.

> Sometimes when a dfs file is accessed and one copy has a checksum error the I/O command fails, even if another copy is alright.
> -------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-731
>                 URL: http://issues.apache.org/jira/browse/HADOOP-731
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: Dick King
>
> for a particular file [alas, the file no longer exists -- I had to progress]  
>     $dfs -cp foo bar        
> and
>     $dfs -get foo local
> failed on a checksum error.  The dfs browser's download function retrieved the file, so either that function doesn't check, or more likely the download function got a different copy.
> When a checksum fails on one copy of a file that is redundantly stored, I would prefer that dfs try a different copy, mark the bad one as not existing [which should induce a fresh copy being made from one of the good copies eventually], and make the call continue to work and deliver bytes.
> Ideally, if all copies have checksum errors but it's possible to piece together a good copy I would like that to be done.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 20:02:24 2006
Return-Path: 
 <hadoop-dev-return-5250-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78504 invoked from network); 20 Nov 2006 20:02:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 20:02:24 -0000
Received: (qmail 95704 invoked by uid 500); 20 Nov 2006 20:02:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95443 invoked by uid 500); 20 Nov 2006 20:02:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95429 invoked by uid 99); 20 Nov 2006 20:02:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 12:02:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 12:02:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 378DC7142CD
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 12:02:03 -0800 (PST)
Message-ID: <16050733.1164052923224.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 12:02:03 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-699) "Browse the filesystem" link on Name
 Node redirects to wrong port on DataNode
In-Reply-To: <23861455.1163033924750.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-699?page=all ]

Raghu Angadi updated HADOOP-699:
--------------------------------

    Attachment: dfshealth.patch


Attached patch contains fix for the port reported by the data nodes. Now registration is done Http server is started and the correct port is reported to NameNode. Another change is to update datanode info in NameNode when it receives a registration.

This patch also includes various changes to name node front page. It includes #blocks for each datanode. Datanode table can be sorted on any field, etc.


> "Browse the filesystem" link on Name Node redirects to wrong port on DataNode
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-699
>                 URL: http://issues.apache.org/jira/browse/HADOOP-699
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>         Attachments: dfshealth.patch
>
>
> "Browse the filesystem" link on NameNode front page does not work since it redirects to Datanode:65535/ . 
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 20:02:26 2006
Return-Path: 
 <hadoop-dev-return-5251-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78545 invoked from network); 20 Nov 2006 20:02:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 20:02:26 -0000
Received: (qmail 95900 invoked by uid 500); 20 Nov 2006 20:02:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95731 invoked by uid 500); 20 Nov 2006 20:02:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95722 invoked by uid 99); 20 Nov 2006 20:02:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 12:02:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 12:02:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 890007142D2
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 12:02:04 -0800 (PST)
Message-ID: <22362048.1164052924558.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 12:02:04 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-699) "Browse the filesystem" link on Name
 Node redirects to wrong port on DataNode
In-Reply-To: <23861455.1163033924750.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-699?page=all ]

Raghu Angadi updated HADOOP-699:
--------------------------------

    Status: Patch Available  (was: Open)

> "Browse the filesystem" link on Name Node redirects to wrong port on DataNode
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-699
>                 URL: http://issues.apache.org/jira/browse/HADOOP-699
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>         Attachments: dfshealth.patch
>
>
> "Browse the filesystem" link on NameNode front page does not work since it redirects to Datanode:65535/ . 
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 20:42:29 2006
Return-Path: 
 <hadoop-dev-return-5252-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97031 invoked from network); 20 Nov 2006 20:42:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 20:42:29 -0000
Received: (qmail 88950 invoked by uid 500); 20 Nov 2006 20:42:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88929 invoked by uid 500); 20 Nov 2006 20:42:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88920 invoked by uid 99); 20 Nov 2006 20:42:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 12:42:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 12:42:27 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 887F071429F
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 12:42:07 -0800 (PST)
Message-ID: <15471842.1164055327556.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 12:42:07 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Attachment: Hadoop-76_6.patch

This patch removes the part of killing a reduce task if another speculative instance is running due to issue reported in HADOOP-737. Now the task is left running till job finishes. 
Also includes Owen's review comments

thanks Owen for the review. 

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, Hadoop-76_2.patch, Hadoop-76_3.patch, Hadoop-76_4.patch, Hadoop-76_5.patch, Hadoop-76_6.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 21:43:37 2006
Return-Path: 
 <hadoop-dev-return-5253-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15343 invoked from network); 20 Nov 2006 21:43:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 21:43:37 -0000
Received: (qmail 3327 invoked by uid 500); 20 Nov 2006 21:43:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3226 invoked by uid 500); 20 Nov 2006 21:43:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2824 invoked by uid 99); 20 Nov 2006 21:43:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 13:43:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 13:43:27 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 027167142EC
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 13:43:07 -0800 (PST)
Message-ID: <14168215.1164058987007.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 13:43:07 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-571) Path should use URI syntax
In-Reply-To: <6678550.1159825879600.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-571?page=all ]

Doug Cutting updated HADOOP-571:
--------------------------------

    Attachment: uri.patch

Here's a first version of this.  It passes all unit tests except TestCopyFiles.  I haven't yet figured out why that one fails.

A few notes:

Path is now a wrapper on a URI.  For back-compatibility, Path differs from URI in a number of ways.  Path.toString() returns an unescaped string, and 'new Path(String)' does not expect an escaped string, unlike the corresponding URI methods.  Thus, one can easily construct Paths containing characters like question marks (used in globbing).  A Path's URI never has a query or fragment part.  Path directories are always normalized as follows: // and \\ are replaced with /, and terminal slashes are removed.

A FileSystem is now named by a URI containing only a scheme and authority.  The local filesystem is thus now named "file:///", and an HDFS filesystem is named something like "hdfs://namenode:50002".

Configuration properties are used to map from URI scheme to FileSystem implementation.  A FileSystem is named by fs.<scheme>.impl.  A FileSystem instance is cached for each unique scheme and authority string.  Instances are constructed using a no-arg constructor, then the initialize(URI,Configuration) method is called.  FileSystem implementations typically check that a Path provided to them indeed belongs to them, and thereafter typically ignore the scheme and authority of the Path's URI, using the URI's path to determine the file.

In general, a file is now identified by a Path and a Configuration (to determine the default FileSystem).  Thus, to operate on a Path, one typically does something like 'path.getFileSystem(conf).open(path)'.  We could add convenience methods for things like this to Path, but I have not yet done that.

In MapReduce, input formats are modified to generate and consume fully-qualified paths.  This makes the FileSystem parameter in most InputFormat and OutputFormat methods redundant.

> Path should use URI syntax
> --------------------------
>
>                 Key: HADOOP-571
>                 URL: http://issues.apache.org/jira/browse/HADOOP-571
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>         Attachments: uri.patch
>
>
> The following changes are proposed:
> 1. Add a factory/registry of FileSystem implementations.  Given a protocol, hostname and port, it should be possible to get a FileSystem implementation.
> 2. Path's constructor should accept URI-formatted strings & a configuration.
> 3. A new Path method should be added: FileSystem.getFileSystem().  This returns the filesystem named in the path or the default configured filesystem.
> 4. Most methods which currently take FileSystem and Path parameters can be changed to take only Path.
> 5. Many FileSystem operations (create, open, delete, list, etc.) can become convenience methods on Path.
> 6. A URLStreamHandler can be defined in terms of the FileSystem API, so that URLs for any protocol with a registered FileSystem implementation can be accessed with a java.net.URL, permitting FileSystem implementations to be used on the classpath, etc.
> It is tempting to try to replace Path with java.net.URL, but URL's methods are insufficient for mapreduce.  We require directory listings, random access, location hints, etc., which are not supported by existing URLStreamHandler implementations.  But we can expose all FileSystem implementations for access with java.net.URL.
> (From a brainstorm with Owen.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 21:54:28 2006
Return-Path: 
 <hadoop-dev-return-5254-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19753 invoked from network); 20 Nov 2006 21:54:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 21:54:28 -0000
Received: (qmail 38915 invoked by uid 500); 20 Nov 2006 21:54:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38891 invoked by uid 500); 20 Nov 2006 21:54:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38882 invoked by uid 99); 20 Nov 2006 21:54:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 13:54:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 13:54:26 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8E0027142F3
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 13:54:06 -0800 (PST)
Message-ID: <7243629.1164059646579.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 13:54:06 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-736) Roll back Jetty6.0.1 to Jetty5.1.4
In-Reply-To: <25654499.1164007503335.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-736?page=comments#action_12451446 ] 
            
Doug Cutting commented on HADOOP-736:
-------------------------------------

Is this different than doing 'svn merge -r 472202:472201 .'?  That's certainly a lot simpler, and the only conflict is CHANGES.txt...

> Roll back Jetty6.0.1 to Jetty5.1.4
> ----------------------------------
>
>                 Key: HADOOP-736
>                 URL: http://issues.apache.org/jira/browse/HADOOP-736
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: jetty5.1.4.patch, jettyfiles-5.1.4.tar.gz
>
>
> There seems to be a problem with the current version of Jetty (6.0.1) in the case where we are using it for serving map outputs. It becomes very slow after serving a few outputs and doesn't recover from that state. Tried with the current release of Jetty - 6.1.0(pre1), but the problem seems to be there even with that release. So roll back to the previous Jetty version (5.1.4) seems to be right thing to do for now. This is the URL for the Jira issue on Jetty's performance issue: 
> http://jira.codehaus.org/browse/JETTY-177

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 22:03:23 2006
Return-Path: 
 <hadoop-dev-return-5255-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22541 invoked from network); 20 Nov 2006 22:03:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 22:03:23 -0000
Received: (qmail 57970 invoked by uid 500); 20 Nov 2006 22:03:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57952 invoked by uid 500); 20 Nov 2006 22:03:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57943 invoked by uid 99); 20 Nov 2006 22:03:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:03:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:03:22 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 29D3B7142EC
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 14:03:02 -0800 (PST)
Message-ID: <18953484.1164060182168.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 14:03:02 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-738) dfs get or copyToLocal should not copy
 crc file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

dfs get or copyToLocal should not copy crc file
-----------------------------------------------

                 Key: HADOOP-738
                 URL: http://issues.apache.org/jira/browse/HADOOP-738
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.8.0
         Environment: all
            Reporter: Milind Bhandarkar
         Assigned To: Milind Bhandarkar
             Fix For: 0.9.0


Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 22:03:25 2006
Return-Path: 
 <hadoop-dev-return-5256-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22584 invoked from network); 20 Nov 2006 22:03:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 22:03:25 -0000
Received: (qmail 58233 invoked by uid 500); 20 Nov 2006 22:03:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58213 invoked by uid 500); 20 Nov 2006 22:03:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58204 invoked by uid 99); 20 Nov 2006 22:03:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:03:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:03:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 909C17142DC
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 14:03:03 -0800 (PST)
Message-ID: <27589751.1164060183589.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 14:03:03 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-738) dfs get or copyToLocal should not
 copy crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-738?page=all ]

Work on HADOOP-738 started by Milind Bhandarkar.

> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 22:05:25 2006
Return-Path: 
 <hadoop-dev-return-5257-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23191 invoked from network); 20 Nov 2006 22:05:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 22:05:25 -0000
Received: (qmail 62562 invoked by uid 500); 20 Nov 2006 22:05:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62540 invoked by uid 500); 20 Nov 2006 22:05:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62531 invoked by uid 99); 20 Nov 2006 22:05:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:05:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:05:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3284C7142DC
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 14:05:03 -0800 (PST)
Message-ID: <9104244.1164060303203.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 14:05:03 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-738) dfs get or copyToLocal should not copy
 crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-738?page=all ]

Milind Bhandarkar updated HADOOP-738:
-------------------------------------

    Attachment: hadoop-crc.patch

This patch adds one more parameter to FileUtil.copy method, which specifies whether to exclude crc files.

> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 22:05:26 2006
Return-Path: 
 <hadoop-dev-return-5258-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23218 invoked from network); 20 Nov 2006 22:05:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 22:05:26 -0000
Received: (qmail 62857 invoked by uid 500); 20 Nov 2006 22:05:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62818 invoked by uid 500); 20 Nov 2006 22:05:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62809 invoked by uid 99); 20 Nov 2006 22:05:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:05:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:05:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 83BFD7142F3
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 14:05:04 -0800 (PST)
Message-ID: <15946467.1164060304537.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 14:05:04 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-738) dfs get or copyToLocal should not copy
 crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-738?page=all ]

Milind Bhandarkar updated HADOOP-738:
-------------------------------------

    Status: Patch Available  (was: In Progress)

> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 22:10:26 2006
Return-Path: 
 <hadoop-dev-return-5259-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25065 invoked from network); 20 Nov 2006 22:10:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 22:10:26 -0000
Received: (qmail 68878 invoked by uid 500); 20 Nov 2006 22:10:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68854 invoked by uid 500); 20 Nov 2006 22:10:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68845 invoked by uid 99); 20 Nov 2006 22:10:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:10:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:10:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 636027142DC
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 14:10:03 -0800 (PST)
Message-ID: <15960507.1164060603403.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 14:10:03 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-738) dfs get or copyToLocal should not
 copy crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-738?page=comments#action_12451449 ] 
            
Doug Cutting commented on HADOOP-738:
-------------------------------------

For the particular problem cited, wouldn't the fix be to remove the old .crc file before writing the new file?  CRC files are useful outside of DFS.  Throwing them away means the data is no longer checked for end-to-end corruption.

> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 22:10:28 2006
Return-Path: 
 <hadoop-dev-return-5260-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25139 invoked from network); 20 Nov 2006 22:10:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 22:10:28 -0000
Received: (qmail 69143 invoked by uid 500); 20 Nov 2006 22:10:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69114 invoked by uid 500); 20 Nov 2006 22:10:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69105 invoked by uid 99); 20 Nov 2006 22:10:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:10:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:10:26 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 59A747142D7
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 14:10:06 -0800 (PST)
Message-ID: <24456358.1164060606364.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 14:10:06 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-673?page=comments#action_12451450 ] 
            
Owen O'Malley commented on HADOOP-673:
--------------------------------------

Ok, I propose that we handle this as a streaming option. So:

1. For all map/reduce jobs the task has current working directory set to the task specific directory.
2. For streaming if the property "mapred.create.symlink" is true, the contents of the job directory (other than the task directories) are symlinked into the task directory. Note that this property is already used for the file cache for a similar purpose and in streaming defaults to true.

If there was a convenient way to make the job cache files read only in Java, that would make me more comfortable about violating the sandbox isolation. But as it is, I guess it is upto the application writer to make sure they don't change any of the shared files.

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.9.0
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 22:16:27 2006
Return-Path: 
 <hadoop-dev-return-5261-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26847 invoked from network); 20 Nov 2006 22:16:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 22:16:27 -0000
Received: (qmail 80428 invoked by uid 500); 20 Nov 2006 22:16:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80391 invoked by uid 500); 20 Nov 2006 22:16:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80381 invoked by uid 99); 20 Nov 2006 22:16:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:16:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:16:25 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BA4167142DC
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 14:16:04 -0800 (PST)
Message-ID: <20649365.1164060964760.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 14:16:04 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-673?page=comments#action_12451451 ] 
            
Doug Cutting commented on HADOOP-673:
-------------------------------------

> if there was a convenient way to make the job cache files read only [ ... ]

runtime.exec(new String[] { "chmod" "-w", file });

Works under cygwin!

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.9.0
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 22:53:17 2006
Return-Path: 
 <hadoop-dev-return-5262-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11091 invoked from network); 20 Nov 2006 22:53:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 22:53:17 -0000
Received: (qmail 2767 invoked by uid 500); 20 Nov 2006 22:26:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2733 invoked by uid 500); 20 Nov 2006 22:26:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2724 invoked by uid 99); 20 Nov 2006 22:26:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:26:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:26:31 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5DF7371431A
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 14:26:11 -0800 (PST)
Message-ID: <169313.1164061571382.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 14:26:11 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-332) Implement remote replication of dfs
 namespace images and transaction logs
In-Reply-To: <10603792.1151562509899.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-332?page=comments#action_12451455 ] 
            
Milind Bhandarkar commented on HADOOP-332:
------------------------------------------

should this issue be closed now that we have a patch committed for HADOOP-90 ?

> Implement remote replication of dfs namespace images and transaction logs
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-332
>                 URL: http://issues.apache.org/jira/browse/HADOOP-332
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace information (image and transaction logs) needs to be replicated on hosts other than the namenode to prevent data loss if a namenode crashes. In the short term we will add a new protocol to the datanodes to receive and store the namespace information.
> In the long term, it would be nice to have read-only namenodes that could receive the information and serve it up for users that want to read data, but do not need to write to the namespace.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 22:57:08 2006
Return-Path: 
 <hadoop-dev-return-5263-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14457 invoked from network); 20 Nov 2006 22:57:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 22:57:08 -0000
Received: (qmail 8760 invoked by uid 500); 20 Nov 2006 22:30:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8729 invoked by uid 500); 20 Nov 2006 22:30:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8720 invoked by uid 99); 20 Nov 2006 22:30:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:30:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:30:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5195A714321
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 14:30:04 -0800 (PST)
Message-ID: <25995084.1164061804331.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 14:30:04 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-698) When DFS client fails to read from a
 datanode, the failed datanode is not excluded from target reselection
In-Reply-To: <17466448.1163027091463.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-698?page=all ]

Milind Bhandarkar reassigned HADOOP-698:
----------------------------------------

    Assignee: Milind Bhandarkar

> When DFS client fails to read from a datanode, the failed datanode is not excluded from target reselection
> ----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-698
>                 URL: http://issues.apache.org/jira/browse/HADOOP-698
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Hairong Kuang
>         Assigned To: Milind Bhandarkar
>
> In the method read(byte buf[ ], int off, int len) of DFSInputStream, when read fails,  it calls "blockSeekTo" to reselect a datanode. However, the failed datanode does not feed back to blockSeekTo. The datanode selection algorithm works as follows:
> * If the machine that the client is running on has a local copy, return the local machine;
> * Otherwise, randomly pick up one location.
> When the failed data node info does not feed back to target reselection, this leads to two flaws:
> 1. When a client fails to read from the local copy, for example, because of the checksum error, the local machine will always be chosen in retries.
> 2. Random selection may still return the same failed node.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 22:57:07 2006
Return-Path: 
 <hadoop-dev-return-5264-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14439 invoked from network); 20 Nov 2006 22:57:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 22:57:07 -0000
Received: (qmail 9020 invoked by uid 500); 20 Nov 2006 22:30:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9000 invoked by uid 500); 20 Nov 2006 22:30:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8991 invoked by uid 99); 20 Nov 2006 22:30:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:30:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:30:26 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6A114714325
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 14:30:06 -0800 (PST)
Message-ID: <32113213.1164061806432.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 14:30:06 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-698) When DFS client fails to read
 from a datanode, the failed datanode is not excluded from target
 reselection
In-Reply-To: <17466448.1163027091463.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-698?page=all ]

Work on HADOOP-698 started by Milind Bhandarkar.

> When DFS client fails to read from a datanode, the failed datanode is not excluded from target reselection
> ----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-698
>                 URL: http://issues.apache.org/jira/browse/HADOOP-698
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Hairong Kuang
>         Assigned To: Milind Bhandarkar
>
> In the method read(byte buf[ ], int off, int len) of DFSInputStream, when read fails,  it calls "blockSeekTo" to reselect a datanode. However, the failed datanode does not feed back to blockSeekTo. The datanode selection algorithm works as follows:
> * If the machine that the client is running on has a local copy, return the local machine;
> * Otherwise, randomly pick up one location.
> When the failed data node info does not feed back to target reselection, this leads to two flaws:
> 1. When a client fails to read from the local copy, for example, because of the checksum error, the local machine will always be chosen in retries.
> 2. Random selection may still return the same failed node.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 22:41:24 2006
Return-Path: 
 <hadoop-dev-return-5265-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3653 invoked from network); 20 Nov 2006 22:41:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 22:41:24 -0000
Received: (qmail 39006 invoked by uid 500); 20 Nov 2006 22:41:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38978 invoked by uid 500); 20 Nov 2006 22:41:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38969 invoked by uid 99); 20 Nov 2006 22:41:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:41:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:41:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 38B367142F8
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 14:41:03 -0800 (PST)
Message-ID: <3458073.1164062463229.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 14:41:03 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-699) "Browse the filesystem" link on Name
 Node redirects to wrong port on DataNode
In-Reply-To: <23861455.1163033924750.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-699?page=all ]

Raghu Angadi updated HADOOP-699:
--------------------------------

    Attachment: dfshealth-2.patch


dfshealth-2.patch : with a minor modification from prev patch.

> "Browse the filesystem" link on Name Node redirects to wrong port on DataNode
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-699
>                 URL: http://issues.apache.org/jira/browse/HADOOP-699
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>         Attachments: dfshealth-2.patch
>
>
> "Browse the filesystem" link on NameNode front page does not work since it redirects to Datanode:65535/ . 
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 22:41:26 2006
Return-Path: 
 <hadoop-dev-return-5266-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3711 invoked from network); 20 Nov 2006 22:41:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 22:41:26 -0000
Received: (qmail 39268 invoked by uid 500); 20 Nov 2006 22:41:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39241 invoked by uid 500); 20 Nov 2006 22:41:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39232 invoked by uid 99); 20 Nov 2006 22:41:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:41:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:41:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9AA8D71431A
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 14:41:04 -0800 (PST)
Message-ID: <20381016.1164062464630.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 14:41:04 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-699) "Browse the filesystem" link on Name
 Node redirects to wrong port on DataNode
In-Reply-To: <23861455.1163033924750.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-699?page=all ]

Raghu Angadi updated HADOOP-699:
--------------------------------

    Attachment:     (was: dfshealth.patch)

> "Browse the filesystem" link on Name Node redirects to wrong port on DataNode
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-699
>                 URL: http://issues.apache.org/jira/browse/HADOOP-699
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>         Attachments: dfshealth-2.patch
>
>
> "Browse the filesystem" link on NameNode front page does not work since it redirects to Datanode:65535/ . 
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 22:58:50 2006
Return-Path: 
 <hadoop-dev-return-5267-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17345 invoked from network); 20 Nov 2006 22:58:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 22:58:50 -0000
Received: (qmail 74965 invoked by uid 500); 20 Nov 2006 22:58:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74931 invoked by uid 500); 20 Nov 2006 22:58:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74902 invoked by uid 99); 20 Nov 2006 22:58:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:58:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 14:58:28 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1F92B714315
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 14:58:08 -0800 (PST)
Message-ID: <8547119.1164063488126.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 14:58:08 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-738) dfs get or copyToLocal should not
 copy crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-738?page=comments#action_12451472 ] 
            
Yoram Arnon commented on HADOOP-738:
------------------------------------

local files in general do not have a crc file associated with them.
making a local copy of dfs file implies losing the crc file IMO, just like putting a file into dfs should assume the source filed doesn't have a crc file associated with it.
yes, we lose something, but that something is the norm in the local fs world. To me that makes sense, especially since the crc files are hidden, and thus confusing for the uninitiated.

> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 23:14:25 2006
Return-Path: 
 <hadoop-dev-return-5268-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23578 invoked from network); 20 Nov 2006 23:14:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 23:14:25 -0000
Received: (qmail 10852 invoked by uid 500); 20 Nov 2006 23:14:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10819 invoked by uid 500); 20 Nov 2006 23:14:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10810 invoked by uid 99); 20 Nov 2006 23:14:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 15:14:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 15:14:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A69107142F3
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 15:14:03 -0800 (PST)
Message-ID: <2887336.1164064443679.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 15:14:03 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-652) Not all Datastructures are updated
 when a block is deleted
In-Reply-To: <8743293.1161975076609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-652?page=all ]

Doug Cutting updated HADOOP-652:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks Vladimir & Raghu!

> Not all Datastructures are updated when a block is deleted
> ----------------------------------------------------------
>
>                 Key: HADOOP-652
>                 URL: http://issues.apache.org/jira/browse/HADOOP-652
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.9.0
>            Reporter: Raghu Angadi
>             Fix For: 0.9.0
>
>         Attachments: FSDataset.java.patch, FSDataset.java.patch, FSDataset.java.patch
>
>
> Currently when a block is deleted, DataNode just deletes the physical file and updates its map. We need to update more things. For e.g. numBlocks in FSDir is not decremented.. effect of this would be that we will create more subdirectories than necessary. It might not show up badly yet since numBlocks gets correct value when the dataNode restarts. I have to see what else needs to be updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 23:14:31 2006
Return-Path: 
 <hadoop-dev-return-5269-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23682 invoked from network); 20 Nov 2006 23:14:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 23:14:31 -0000
Received: (qmail 11530 invoked by uid 500); 20 Nov 2006 23:14:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11504 invoked by uid 500); 20 Nov 2006 23:14:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11439 invoked by uid 99); 20 Nov 2006 23:14:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 15:14:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 15:14:27 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 08D3B714318
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 15:14:07 -0800 (PST)
Message-ID: <31082319.1164064447033.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 15:14:07 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-76?page=comments#action_12451476 ] 
            
Owen O'Malley commented on HADOOP-76:
-------------------------------------

I see a couple more points:
  1. The code in TaskInProgress starting at line 445 is duplicated between the then/else branches and should be re-written to use a single test.
  2. The directory ${system.dir}/${jobid}/${tipid}/${taskid} should always be deleted when a task completes or fails regardless of whether speculative execution was running so that non-speculative execution tasks can use the PhasedFileSystem too.
  3. Equivalently, ${system.dir}/${jobid} should be always be deleted when a job completes or fails.
  4. Why did you remove the "/ reduces.length" in computing the avgProgress in JobInProgress.java line 357? That seems wrong.
  5. The JobInProgress.findNewTask should not break if it finds a speculative task. That would make it run a speculative task rather than a regular task that comes after it in the task list.

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, Hadoop-76_2.patch, Hadoop-76_3.patch, Hadoop-76_4.patch, Hadoop-76_5.patch, Hadoop-76_6.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 23:26:24 2006
Return-Path: 
 <hadoop-dev-return-5270-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28559 invoked from network); 20 Nov 2006 23:26:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 23:26:24 -0000
Received: (qmail 40646 invoked by uid 500); 20 Nov 2006 23:26:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40618 invoked by uid 500); 20 Nov 2006 23:26:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40609 invoked by uid 99); 20 Nov 2006 23:26:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 15:26:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 15:26:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 303E1714311
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 15:26:03 -0800 (PST)
Message-ID: <20776067.1164065163195.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 15:26:03 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-725) chooseTargets method in FSNamesystem
 is very inefficient
In-Reply-To: <20896583.1163634038426.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-725?page=all ]

Doug Cutting updated HADOOP-725:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Milind!

> chooseTargets method in FSNamesystem is very inefficient
> --------------------------------------------------------
>
>                 Key: HADOOP-725
>                 URL: http://issues.apache.org/jira/browse/HADOOP-725
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: chooseTargets.patch
>
>
> Currently the chooseTargets method (that selects datanodes for block-placement) takes in excess of 20% of cpu on a namenode. This is the most time-consuming namenode method, according to the profiler. This inefficiency has already contributed to cascading crash in DFS earlier. As datanodes went down, new locations needed to be found for the blocks on dead datanodes, and since this was done inside a synchronized method, it locked the whole namesystem for several minutes, which caused more datanode failures, when the namenode marked them dead because no heartbeat could be processed during that interval. This has been detailed in HADOOP-572.
> The patch I am about to upload reduces the time taken in the chooseTarget method to be proportional to nReplicas per block, instead of the current implementation, which is proportional to (nDataNodes * nReplicas). Also, when a number of datanodes crash, their blocks are put on the pendingReplications list one datanode at a time in a synchronized section. (Currently, the syncchronized section processes ALL the dead datanodes, thus locking the namesystem for a considerable amount of time.) Also, this patch will add a unit test to check replication.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 23:30:25 2006
Return-Path: 
 <hadoop-dev-return-5271-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29524 invoked from network); 20 Nov 2006 23:30:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 23:30:25 -0000
Received: (qmail 52206 invoked by uid 500); 20 Nov 2006 23:30:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52185 invoked by uid 500); 20 Nov 2006 23:30:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52173 invoked by uid 99); 20 Nov 2006 23:30:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 15:30:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 15:30:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2BD53714311
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 15:30:03 -0800 (PST)
Message-ID: <15069589.1164065403176.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 15:30:03 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-738) dfs get or copyToLocal should not
 copy crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-738?page=comments#action_12451479 ] 
            
Doug Cutting commented on HADOOP-738:
-------------------------------------

In Hadoop, local files generally *do* have a .crc file associated with them.  This has caught lots of data corruption problems (mostly for folks w/o ECC memory).

I'm okay having an option to not create crc files when exporting files, but I think it's the wrong fix for the problem in the description of this issue.  Getting and putting files should work with local .crc files enabled.

> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 23:36:30 2006
Return-Path: 
 <hadoop-dev-return-5272-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30996 invoked from network); 20 Nov 2006 23:36:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 23:36:30 -0000
Received: (qmail 60453 invoked by uid 500); 20 Nov 2006 23:36:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60420 invoked by uid 500); 20 Nov 2006 23:36:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60402 invoked by uid 99); 20 Nov 2006 23:36:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 15:36:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 15:36:27 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3E498714318
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 15:36:07 -0800 (PST)
Message-ID: <24761924.1164065767252.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 15:36:07 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-723) Race condition exists in the method
 MapOutputLocation.getFile
In-Reply-To: <5078563.1163609197143.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-723?page=all ]

Doug Cutting updated HADOOP-723:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> Race condition exists in the method MapOutputLocation.getFile
> -------------------------------------------------------------
>
>                 Key: HADOOP-723
>                 URL: http://issues.apache.org/jira/browse/HADOOP-723
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Devaraj Das
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>         Attachments: map-out-lost.patch
>
>
> There seems to be a race condition in the way the Reduces copy the map output files from the Maps. If a copier is blocked in the connect method (in the beginning of the method MapOutputLocation.getFile) to a Jetty on a Map, and the MapCopyLeaseChecker detects that the copier was idle for too long, it will go ahead and issue a interrupt (read 'kill') to this thread and create a new Copier thread. However, the copier, currently blocked trying to connect to Jetty on a Map, doesn't actually get killed until the connect timeout expires and as soon as the connect comes out (with an IOException), it will delete the map output file which actually could have been (successfully) created by the new Copier thread. This leads to the Sort phase for that reducer failing with a FileNotFoundException.
> One simple way to fix this is to not delete the file if the file was not created within this getFile method.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 23:48:25 2006
Return-Path: 
 <hadoop-dev-return-5273-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32952 invoked from network); 20 Nov 2006 23:48:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 23:48:25 -0000
Received: (qmail 73939 invoked by uid 500); 20 Nov 2006 23:48:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73834 invoked by uid 500); 20 Nov 2006 23:48:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73815 invoked by uid 99); 20 Nov 2006 23:48:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 15:48:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 15:48:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3E7037142D7
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 15:48:04 -0800 (PST)
Message-ID: <3352060.1164066484253.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 15:48:04 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-447)
 DistributedFileSystem.getBlockSize(Path) does not resolve absolute path
In-Reply-To: <5956345.1155318013880.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-447?page=all ]

Doug Cutting updated HADOOP-447:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Raghu.

> DistributedFileSystem.getBlockSize(Path) does not resolve absolute path
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-447
>                 URL: http://issues.apache.org/jira/browse/HADOOP-447
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Benjamin Reed
>         Assigned To: Raghu Angadi
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-447.patch
>
>
> getBlockSize() does not check for an absolute path like the rest of the DistributeFileSystem API does. Consequently getBlockSize(Path) does not work with relative paths.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 20 23:59:25 2006
Return-Path: 
 <hadoop-dev-return-5274-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35883 invoked from network); 20 Nov 2006 23:59:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 23:59:25 -0000
Received: (qmail 95192 invoked by uid 500); 20 Nov 2006 23:59:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95168 invoked by uid 500); 20 Nov 2006 23:59:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95159 invoked by uid 99); 20 Nov 2006 23:59:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 15:59:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 15:59:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0C5157142F5
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 15:59:04 -0800 (PST)
Message-ID: <8055948.1164067144047.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 15:59:04 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-724) bin/hadoop:111 uses java directly, it
 should use JAVA_HOME
In-Reply-To: <18503374.1163617001480.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-724?page=all ]

Doug Cutting updated HADOOP-724:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Arun!

> bin/hadoop:111 uses java directly, it should use JAVA_HOME
> ----------------------------------------------------------
>
>                 Key: HADOOP-724
>                 URL: http://issues.apache.org/jira/browse/HADOOP-724
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>            Reporter: Sanjay Dahiya
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-724_20061116.patch, HADOOP_724-20061117.patch
>
>
> JAVA_PLATFORM=`CLASSPATH=${CLASSPATH} java org.apache.hadoop.util.PlatformName`
> should use JAVA_HOME instead of java.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 00:10:26 2006
Return-Path: 
 <hadoop-dev-return-5275-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37456 invoked from network); 21 Nov 2006 00:10:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 00:10:26 -0000
Received: (qmail 5221 invoked by uid 500); 21 Nov 2006 00:10:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5199 invoked by uid 500); 21 Nov 2006 00:10:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5190 invoked by uid 99); 21 Nov 2006 00:10:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 16:10:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 16:10:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 43FCA7142D7
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 16:10:04 -0800 (PST)
Message-ID: <30660940.1164067804275.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 16:10:04 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-733) dfs shell has inconsistent exit codes
In-Reply-To: <72960.1163782420503.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-733?page=all ]

Doug Cutting updated HADOOP-733:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba!

> dfs shell has inconsistent exit codes
> -------------------------------------
>
>                 Key: HADOOP-733
>                 URL: http://issues.apache.org/jira/browse/HADOOP-733
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Christian Kunz
>         Assigned To: dhruba borthakur
>             Fix For: 0.9.0
>
>         Attachments: shellerrorcodes.patch
>
>
> After upgrading to 0.8.0, some of my script applications stopped to work properly, seemingly because of hadoop dfs utility returning 0 exit code when it should not (kind of revival of hadoop-488, with a different cause).
> dfs -cat  and dfs -rm always return exit code 0, even for non-existing files. The former can be traced back to the fact that DFSShell's 'run' method calls a 'doall' method without passing on the exit code ('doall' catches its own exceptions and returns an exit code). The latter occurs because the return code of the DFSClient delete method is only used in DFS Shell to print different messages without affecting exit code.
> There might be more inconsistent behavior of the dfs shell. Hadoop dfs command line should return 0 signaling success exactly when the corresponding unix command returns 0 (or at least it should be related to success whatever this means in a documented manner).
> I also would recommend to use a kind of regression test to prevent that this gets broken again.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 00:12:29 2006
Return-Path: 
 <hadoop-dev-return-5276-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37760 invoked from network); 21 Nov 2006 00:12:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 00:12:29 -0000
Received: (qmail 9753 invoked by uid 500); 21 Nov 2006 00:12:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9731 invoked by uid 500); 21 Nov 2006 00:12:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9722 invoked by uid 99); 21 Nov 2006 00:12:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 16:12:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 16:12:27 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B2B97142F8
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 16:12:07 -0800 (PST)
Message-ID: <28826688.1164067927305.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 16:12:07 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-76?page=comments#action_12451490 ] 
            
Sanjay Dahiya commented on HADOOP-76:
-------------------------------------

  4. Why did you remove the "/ reduces.length" in computing the avgProgress in JobInProgress.java line 357? That seems wrong. 


JobInProgress.java:313 already divides the progressDelta of a task by no of tasks before adding it to reduce progress. That averages it out over reduces, or am I missing something there? 

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, Hadoop-76_2.patch, Hadoop-76_3.patch, Hadoop-76_4.patch, Hadoop-76_5.patch, Hadoop-76_6.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 00:14:26 2006
Return-Path: 
 <hadoop-dev-return-5277-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38295 invoked from network); 21 Nov 2006 00:14:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 00:14:26 -0000
Received: (qmail 13946 invoked by uid 500); 21 Nov 2006 00:14:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13717 invoked by uid 500); 21 Nov 2006 00:14:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13708 invoked by uid 99); 21 Nov 2006 00:14:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 16:14:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 16:14:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A641A7142F8
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 16:14:04 -0800 (PST)
Message-ID: <32338684.1164068044678.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 16:14:04 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-734) Link to the FAQ in the "Documentation"
 section of the hadoop website
In-Reply-To: <16336352.1163806057091.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-734?page=all ]

Doug Cutting updated HADOOP-734:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Konstantin!

> Link to the FAQ in the "Documentation" section of the hadoop website
> --------------------------------------------------------------------
>
>                 Key: HADOOP-734
>                 URL: http://issues.apache.org/jira/browse/HADOOP-734
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.8.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.9.0
>
>         Attachments: FAQLink.patch
>
>
> We should place commonly discussed topics on the wiki FAQ.
> This patch provides a link to the wiki FAQ from hadoop web site.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 00:19:24 2006
Return-Path: 
 <hadoop-dev-return-5278-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39028 invoked from network); 21 Nov 2006 00:19:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 00:19:24 -0000
Received: (qmail 16558 invoked by uid 500); 21 Nov 2006 00:19:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16528 invoked by uid 500); 21 Nov 2006 00:19:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16519 invoked by uid 99); 21 Nov 2006 00:19:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 16:19:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 16:19:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 27E3C7142E4
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 16:19:03 -0800 (PST)
Message-ID: <13853624.1164068343160.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 16:19:03 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-709) streaming job with Control characters
 in the command causes runtime exception in the job tracker
In-Reply-To: <22924647.1163198079083.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-709?page=all ]

Doug Cutting updated HADOOP-709:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba!

> streaming job with Control characters in the command causes runtime exception in the job tracker
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-709
>                 URL: http://issues.apache.org/jira/browse/HADOOP-709
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>             Fix For: 0.9.0
>
>         Attachments: ctrlchars_in_streaming
>
>
> I run a streaming job with a Ctrl-A character in the command line option as follows:
> $HSTREAMING -mapper "/bin/sort -t'^A'" -input "input/*" -output output
> It causes a exeception as listed below. If i run the same command without the Ctrl-A character the command completes successfully.
> Exception in thread "main" org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.lang.RuntimeException: org.xml.sax.SAXParseException: Character reference "&#1" is an invalid XML character.
>         at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:551)
>         at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:472)
>         at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:453)
>         at org.apache.hadoop.conf.Configuration.get(Configuration.java:201)
>         at org.apache.hadoop.mapred.JobConf.getUser(JobConf.java:175)
>         at org.apache.hadoop.mapred.JobInProgress.<init>(JobInProgress.java:88)
>         at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:1016)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:337)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:514)
>         at org.apache.hadoop.ipc.Client$Connection.run(Client.java:248)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 00:27:28 2006
Return-Path: 
 <hadoop-dev-return-5279-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40565 invoked from network); 21 Nov 2006 00:27:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 00:27:28 -0000
Received: (qmail 24745 invoked by uid 500); 21 Nov 2006 00:27:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24713 invoked by uid 500); 21 Nov 2006 00:27:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24671 invoked by uid 99); 21 Nov 2006 00:27:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 16:27:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 16:27:25 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3E6307142E4
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 16:27:05 -0800 (PST)
Message-ID: <3294406.1164068825252.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 16:27:05 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-677) RPC should send a fixed header and
 version at the start of connection
In-Reply-To: <13169984.1162511057744.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-677?page=all ]

Doug Cutting updated HADOOP-677:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> RPC should send a fixed header and version at the start of connection
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-677
>                 URL: http://issues.apache.org/jira/browse/HADOOP-677
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>         Attachments: rpc-header.patch
>
>
> There have been problems with http clients connecting to the RPC servers, which causes the RPC to try and allocate huge buffers and get OutOfMemoryExceptions. I want to have a fixed prefix that is sent first that identifies it as an RPC client. To make the system compatible as much as possible, I'd make the servers accept both forms for a Hadoop release and then change the clients to send the prefix, and finally make the servers only accept the new form.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 00:47:26 2006
Return-Path: 
 <hadoop-dev-return-5280-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43983 invoked from network); 21 Nov 2006 00:47:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 00:47:26 -0000
Received: (qmail 41836 invoked by uid 500); 21 Nov 2006 00:47:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41816 invoked by uid 500); 21 Nov 2006 00:47:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41807 invoked by uid 99); 21 Nov 2006 00:47:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 16:47:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 16:47:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 87C767142F3
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 16:47:04 -0800 (PST)
Message-ID: <6310968.1164070024553.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 16:47:04 -0800 (PST)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-738) dfs get or copyToLocal should not
 copy crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-738?page=comments#action_12451500 ] 
            
eric baldeschwieler commented on HADOOP-738:
--------------------------------------------

I'd suggest we turn this around.  Exporting CRCs is not the expected default and causes regular user confusion in our environment.  Let's add a command line option to turn CRC export on.  This will let sophisticated users who have a need for CRCs use them, but removes them from the common case where they are simply causing confusion and pain.

Fair enough?

> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 02:26:25 2006
Return-Path: 
 <hadoop-dev-return-5281-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75168 invoked from network); 21 Nov 2006 02:26:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 02:26:25 -0000
Received: (qmail 22183 invoked by uid 500); 21 Nov 2006 02:26:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22165 invoked by uid 500); 21 Nov 2006 02:26:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22156 invoked by uid 99); 21 Nov 2006 02:26:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 18:26:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 18:26:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2A3817142F3
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 18:26:03 -0800 (PST)
Message-ID: <27697944.1164075963170.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 18:26:03 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-700) bin/hadoop includes in classpath all
 jar files in HADOOP_HOME
In-Reply-To: <4773319.1163036617124.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-700?page=comments#action_12451504 ] 
            
Nigel Daley commented on HADOOP-700:
------------------------------------

I propose that the jar files stay where they are and that bin/hadoop only include the hadoop-<version>.jar file in the classpath.

> bin/hadoop includes in classpath all jar files in HADOOP_HOME
> -------------------------------------------------------------
>
>                 Key: HADOOP-700
>                 URL: http://issues.apache.org/jira/browse/HADOOP-700
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>
> The hadoop script includes all jars from HADOOP_HOME in the classpath.  This means that all the daemons get the examples and tests included in their class paths.  If a change is made to an example or test, all the daemons have to be restarted to see the affect of the change.  This doesn't seem desirable.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 04:22:34 2006
Return-Path: 
 <hadoop-dev-return-5282-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2751 invoked from network); 21 Nov 2006 04:22:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 04:22:34 -0000
Received: (qmail 29175 invoked by uid 500); 21 Nov 2006 04:22:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29152 invoked by uid 500); 21 Nov 2006 04:22:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29143 invoked by uid 99); 21 Nov 2006 04:22:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 20:22:43 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 20:22:30 -0800
Received: from [192.168.1.100] (snvvpn2-10-72-76-c193.corp.yahoo.com
 [10.72.76.193])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kAL4M8g5055417
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 20:22:08 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=Ib8oZfV+Ty5I+gsHXIRO5oG+DvDy1HUNuL0clfVf4axSX+fmXkG6srLEckhk3vg/
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <0a93a9c05dacb7dff37d29f886d94429@yahoo-inc.com>
References: <010f01c70902$43f4a6c0$929015ac@ds.corp.yahoo.com>
 <9A9B7AA0-56F1-4688-A152-29536291F1E5@yahoo-inc.com>
 <0a93a9c05dacb7dff37d29f886d94429@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <25EA28E3-6116-4F98-953C-A6E56CC83E7A@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Created: (HADOOP-713) dfs list operation is too expensive
Date: Mon, 20 Nov 2006 20:22:11 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I've got to disagree with that.  It's simply not responsible to add  
features that are not going to be easy to support as we near our  
medium term size targets.  Especially not in a central interface.   
I'd welcome anyone who wants to contribute an expanded viewer that  
lists recursive sizes, guess dates and does other cool things.

I'd just not support adding it to the project core or into the  
primary HDFS browse API that is built into all name and data nodes.   
We want these daemons to be simple, fast and stable.

That would commit us to either:

a) Taking a feature away later to ease scaling the system.  Always  
hard to do.

b) Doing a lot of extra engineering to make this fast later, even  
though it is not central to the framework.


On Nov 15, 2006, at 11:29 PM, Arkady Borkovsky wrote:

> Eric,
>
> there is some difference between the foundation components and user  
> facing components like UI.
> While foundation is expected to be stable and compatible from  
> release to release,
> UI is expected to evolve, continuously becoming more and more  
> useful and powerful, and providing as much of useful functionality  
> at any given time as possible.  The specific issue discussed in  
> this thread (what datums to show in directory listing for a  
> subdirectory) is pretty minor -- the more the better, commensurate  
> with resources, and nothing too misleading is the answer,
> But as the matter of design principles, user facing components have  
> different nature than the infrastructure.  There can be no "time  
> bomb" in the UI.
>
> -- ab
...

From MAILER-DAEMON Tue Nov 21 06:09:25 2006
Return-Path: 
 <hadoop-dev-return-5283-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24771 invoked from network); 21 Nov 2006 06:09:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 06:09:25 -0000
Received: (qmail 51908 invoked by uid 500); 21 Nov 2006 06:09:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51676 invoked by uid 500); 21 Nov 2006 06:09:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51667 invoked by uid 99); 21 Nov 2006 06:09:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 22:09:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 22:09:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 32AAE7142F8
	for <hadoop-dev@lucene.apache.org>; Mon, 20 Nov 2006 22:09:04 -0800 (PST)
Message-ID: <19582945.1164089344204.JavaMail.jira@brutus>
Date: Mon, 20 Nov 2006 22:09:04 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-736) Roll back Jetty6.0.1 to Jetty5.1.4
In-Reply-To: <25654499.1164007503335.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-736?page=comments#action_12451549 ] 
            
Devaraj Das commented on HADOOP-736:
------------------------------------

If 'svn merge' is easier, I don't have any problems. Do I need to do anything on my part for this?

> Roll back Jetty6.0.1 to Jetty5.1.4
> ----------------------------------
>
>                 Key: HADOOP-736
>                 URL: http://issues.apache.org/jira/browse/HADOOP-736
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: jetty5.1.4.patch, jettyfiles-5.1.4.tar.gz
>
>
> There seems to be a problem with the current version of Jetty (6.0.1) in the case where we are using it for serving map outputs. It becomes very slow after serving a few outputs and doesn't recover from that state. Tried with the current release of Jetty - 6.1.0(pre1), but the problem seems to be there even with that release. So roll back to the previous Jetty version (5.1.4) seems to be right thing to do for now. This is the URL for the Jira issue on Jetty's performance issue: 
> http://jira.codehaus.org/browse/JETTY-177

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 08:12:27 2006
Return-Path: 
 <hadoop-dev-return-5284-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48261 invoked from network); 21 Nov 2006 08:12:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 08:12:27 -0000
Received: (qmail 99377 invoked by uid 500); 21 Nov 2006 08:12:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99329 invoked by uid 500); 21 Nov 2006 08:12:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99320 invoked by uid 99); 21 Nov 2006 08:12:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 00:12:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 00:12:25 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 947BA7142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 00:12:05 -0800 (PST)
Message-ID: <24344982.1164096725605.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 00:12:05 -0800 (PST)
From: "Tom White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-574?page=comments#action_12451572 ] 
            
Tom White commented on HADOOP-574:
----------------------------------

I've been looking at Jim Kellerman's suggestion of using a URL-safe Base64 encoding for path names since they are more compact than regular URL encoding. (An S3 key is a maximum of 1024 bytes.) See http://www.faqs.org/rfcs/rfc3548.html and http://www.faqs.org/qa/rfcc-1940.html for details. Jim has implemented these algorithms in a public domain Base64 encoding package
(http://iharder.sourceforge.net/current/java/base64/, version 2.2).

However, I don't think Base 64 encoding is compatible with the delimiter request parameter for S3 bucket listing since base 64 encoding doesn't preserve byte boundaries, so it is not possible to search for a substring in the base 64 encoded representation of some text. The current S3 FileSystem code uses  the delimiter request parameter as an efficient way to implement the listPathsRaw method. Therefore I think it is probably best to stick with the current URL encoding solution.

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>         Attachments: dependencies.zip, HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 10:33:27 2006
Return-Path: 
 <hadoop-dev-return-5285-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94066 invoked from network); 21 Nov 2006 10:33:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 10:33:27 -0000
Received: (qmail 28960 invoked by uid 500); 21 Nov 2006 10:33:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28939 invoked by uid 500); 21 Nov 2006 10:33:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28930 invoked by uid 99); 21 Nov 2006 10:33:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 02:33:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 02:33:25 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 152867142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 02:33:04 -0800 (PST)
Message-ID: <23048867.1164105184083.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 02:33:04 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
In-Reply-To: <30411461.1163635597099.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-728?page=all ]

Sanjay Dahiya reassigned HADOOP-728:
------------------------------------

    Assignee: Sanjay Dahiya

> Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-728
>                 URL: http://issues.apache.org/jira/browse/HADOOP-728
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: Sanjay Dahiya
>
> a) a file is create for the output instead of a directory.
> b) there is no way to understand what is going on from the client output
> I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
> ~

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 16:08:26 2006
Return-Path: 
 <hadoop-dev-return-5286-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10146 invoked from network); 21 Nov 2006 16:08:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 16:08:26 -0000
Received: (qmail 59319 invoked by uid 500); 21 Nov 2006 16:08:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59300 invoked by uid 500); 21 Nov 2006 16:08:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59291 invoked by uid 99); 21 Nov 2006 16:08:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 08:08:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 08:08:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0A2477142F7
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 08:08:04 -0800 (PST)
Message-ID: <30995151.1164125284038.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 08:08:04 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-736) Roll back Jetty6.0.1 to Jetty5.1.4
In-Reply-To: <25654499.1164007503335.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-736?page=comments#action_12451687 ] 
            
Owen O'Malley commented on HADOOP-736:
--------------------------------------

Actually, the Jetty developers found a probable fix: http://jira.codehaus.org/browse/JETTY-177#action_80644

Can we try the fix before rolling back?

> Roll back Jetty6.0.1 to Jetty5.1.4
> ----------------------------------
>
>                 Key: HADOOP-736
>                 URL: http://issues.apache.org/jira/browse/HADOOP-736
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: jetty5.1.4.patch, jettyfiles-5.1.4.tar.gz
>
>
> There seems to be a problem with the current version of Jetty (6.0.1) in the case where we are using it for serving map outputs. It becomes very slow after serving a few outputs and doesn't recover from that state. Tried with the current release of Jetty - 6.1.0(pre1), but the problem seems to be there even with that release. So roll back to the previous Jetty version (5.1.4) seems to be right thing to do for now. This is the URL for the Jira issue on Jetty's performance issue: 
> http://jira.codehaus.org/browse/JETTY-177

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 19:35:26 2006
Return-Path: 
 <hadoop-dev-return-5287-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85619 invoked from network); 21 Nov 2006 19:35:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 19:35:26 -0000
Received: (qmail 70757 invoked by uid 500); 21 Nov 2006 19:35:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70739 invoked by uid 500); 21 Nov 2006 19:35:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70730 invoked by uid 99); 21 Nov 2006 19:35:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 11:35:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 11:35:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D8A867142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 11:35:03 -0800 (PST)
Message-ID: <5924019.1164137703884.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 11:35:03 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-738) dfs get or copyToLocal should not
 copy crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-738?page=comments#action_12451750 ] 
            
Doug Cutting commented on HADOOP-738:
-------------------------------------

> Let's add a command line option to turn CRC export on.

As I said, I'm fine with that, but that sounds like a separate issue than the one described: It doesn't fix this issue, but rather hides it for some users.  When crc's *are* enabled, it shouldn't cause problems to 'dfs -put' files that have crcs.  That's the issue here.  Disabling crcs for 'dfs -get' for folks who have ECC memory and don't ever have file corruption issues on local disks is not something I object to.

> This will let sophisticated users who have a need for CRCs use them [ ... ]

So 'sophisticated' now means that you don't have ECC memory and reliable hard drives?


> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 19:55:25 2006
Return-Path: 
 <hadoop-dev-return-5288-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95057 invoked from network); 21 Nov 2006 19:55:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 19:55:25 -0000
Received: (qmail 8208 invoked by uid 500); 21 Nov 2006 19:55:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8182 invoked by uid 500); 21 Nov 2006 19:55:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8173 invoked by uid 99); 21 Nov 2006 19:55:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 11:55:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 11:55:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3839F714311
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 11:55:03 -0800 (PST)
Message-ID: <5395003.1164138903227.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 11:55:03 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-699) "Browse the filesystem" link on Name
 Node redirects to wrong port on DataNode
In-Reply-To: <23861455.1163033924750.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-699?page=all ]

Doug Cutting updated HADOOP-699:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Raghu!

> "Browse the filesystem" link on Name Node redirects to wrong port on DataNode
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-699
>                 URL: http://issues.apache.org/jira/browse/HADOOP-699
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>             Fix For: 0.9.0
>
>         Attachments: dfshealth-2.patch
>
>
> "Browse the filesystem" link on NameNode front page does not work since it redirects to Datanode:65535/ . 
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 20:34:25 2006
Return-Path: 
 <hadoop-dev-return-5289-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12698 invoked from network); 21 Nov 2006 20:34:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 20:34:25 -0000
Received: (qmail 91341 invoked by uid 500); 21 Nov 2006 20:34:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91317 invoked by uid 500); 21 Nov 2006 20:34:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91276 invoked by uid 99); 21 Nov 2006 20:34:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 12:34:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 12:34:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 727257142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 12:34:03 -0800 (PST)
Message-ID: <7568889.1164141243464.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 12:34:03 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-739) TestIPC occassionally fails with
 BindException
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

TestIPC occassionally fails with BindException
----------------------------------------------

                 Key: HADOOP-739
                 URL: http://issues.apache.org/jira/browse/HADOOP-739
             Project: Hadoop
          Issue Type: Bug
          Components: test
    Affects Versions: 0.8.0
            Reporter: Nigel Daley
         Assigned To: Nigel Daley
            Priority: Minor


org.apache.hadoop.ipc.TestIPC.testParallel occassionally fails with

java.net.BindException: Address already in use
	at sun.nio.ch.Net.bind(Native Method)
	at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:119)
	at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59)
	at org.apache.hadoop.ipc.Server$Listener.<init>(Server.java:161)
	at org.apache.hadoop.ipc.Server.start(Server.java:607)
	at org.apache.hadoop.ipc.TestIPC.testParallel(TestIPC.java:174)
	at org.apache.hadoop.ipc.TestIPC.testParallel(TestIPC.java:164)

My guess is that port 1234 used by TestIPC.testSerial hasn't been cleaned up by the time TestIPC.testParallel tries to use it.  The failure rate of this test seems around 5%.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 20:36:32 2006
Return-Path: 
 <hadoop-dev-return-5290-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13289 invoked from network); 21 Nov 2006 20:36:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 20:36:32 -0000
Received: (qmail 94562 invoked by uid 500); 21 Nov 2006 20:36:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94531 invoked by uid 500); 21 Nov 2006 20:36:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94512 invoked by uid 99); 21 Nov 2006 20:36:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 12:36:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 12:36:25 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3D3CA7142F8
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 12:36:05 -0800 (PST)
Message-ID: <10076329.1164141365248.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 12:36:05 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-739) TestIPC occassionally fails with
 BindException
In-Reply-To: <7568889.1164141243464.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-739?page=all ]

Nigel Daley updated HADOOP-739:
-------------------------------

    Attachment: HADOOP-739.patch

This patch drops the failure rate of this test to zero based on 200 runs.

> TestIPC occassionally fails with BindException
> ----------------------------------------------
>
>                 Key: HADOOP-739
>                 URL: http://issues.apache.org/jira/browse/HADOOP-739
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Minor
>         Attachments: HADOOP-739.patch
>
>
> org.apache.hadoop.ipc.TestIPC.testParallel occassionally fails with
> java.net.BindException: Address already in use
> 	at sun.nio.ch.Net.bind(Native Method)
> 	at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:119)
> 	at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59)
> 	at org.apache.hadoop.ipc.Server$Listener.<init>(Server.java:161)
> 	at org.apache.hadoop.ipc.Server.start(Server.java:607)
> 	at org.apache.hadoop.ipc.TestIPC.testParallel(TestIPC.java:174)
> 	at org.apache.hadoop.ipc.TestIPC.testParallel(TestIPC.java:164)
> My guess is that port 1234 used by TestIPC.testSerial hasn't been cleaned up by the time TestIPC.testParallel tries to use it.  The failure rate of this test seems around 5%.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 20:38:37 2006
Return-Path: 
 <hadoop-dev-return-5291-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14371 invoked from network); 21 Nov 2006 20:38:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 20:38:37 -0000
Received: (qmail 708 invoked by uid 500); 21 Nov 2006 20:38:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 682 invoked by uid 500); 21 Nov 2006 20:38:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 672 invoked by uid 99); 21 Nov 2006 20:38:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 12:38:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 12:38:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4A0D27142F7
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 12:38:03 -0800 (PST)
Message-ID: <9917204.1164141483300.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 12:38:03 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-739) TestIPC occassionally fails with
 BindException
In-Reply-To: <7568889.1164141243464.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-739?page=all ]

Nigel Daley updated HADOOP-739:
-------------------------------

    Status: Patch Available  (was: Open)

> TestIPC occassionally fails with BindException
> ----------------------------------------------
>
>                 Key: HADOOP-739
>                 URL: http://issues.apache.org/jira/browse/HADOOP-739
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Minor
>         Attachments: HADOOP-739.patch
>
>
> org.apache.hadoop.ipc.TestIPC.testParallel occassionally fails with
> java.net.BindException: Address already in use
> 	at sun.nio.ch.Net.bind(Native Method)
> 	at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:119)
> 	at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59)
> 	at org.apache.hadoop.ipc.Server$Listener.<init>(Server.java:161)
> 	at org.apache.hadoop.ipc.Server.start(Server.java:607)
> 	at org.apache.hadoop.ipc.TestIPC.testParallel(TestIPC.java:174)
> 	at org.apache.hadoop.ipc.TestIPC.testParallel(TestIPC.java:164)
> My guess is that port 1234 used by TestIPC.testSerial hasn't been cleaned up by the time TestIPC.testParallel tries to use it.  The failure rate of this test seems around 5%.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 20:41:28 2006
Return-Path: 
 <hadoop-dev-return-5292-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15554 invoked from network); 21 Nov 2006 20:41:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 20:41:28 -0000
Received: (qmail 15529 invoked by uid 500); 21 Nov 2006 20:41:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15503 invoked by uid 500); 21 Nov 2006 20:41:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15494 invoked by uid 99); 21 Nov 2006 20:41:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 12:41:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 12:41:26 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5EAB67142F8
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 12:41:06 -0800 (PST)
Message-ID: <5858413.1164141666383.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 12:41:06 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Doug Cutting updated HADOOP-76:
-------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.

I made one change, making PhasedFileSystem package-private rather than public.  It's easier to make something public later than to make it non-public once it is public, and we should strive to minimize our public APIs.

Thanks, Sanjay!

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: Hadoop-76.patch, Hadoop-76_1.patch, Hadoop-76_2.patch, Hadoop-76_3.patch, Hadoop-76_4.patch, Hadoop-76_5.patch, Hadoop-76_6.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 21:09:27 2006
Return-Path: 
 <hadoop-dev-return-5293-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23792 invoked from network); 21 Nov 2006 21:09:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 21:09:27 -0000
Received: (qmail 74476 invoked by uid 500); 21 Nov 2006 21:09:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74452 invoked by uid 500); 21 Nov 2006 21:09:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74443 invoked by uid 99); 21 Nov 2006 21:09:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 13:09:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 13:09:25 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 720DB714316
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 13:09:05 -0800 (PST)
Message-ID: <30461766.1164143345464.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 13:09:05 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-571) Path should use URI syntax
In-Reply-To: <6678550.1159825879600.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-571?page=comments#action_12451774 ] 
            
Owen O'Malley commented on HADOOP-571:
--------------------------------------

+1

after removing the broken tests in TestPath.

> Path should use URI syntax
> --------------------------
>
>                 Key: HADOOP-571
>                 URL: http://issues.apache.org/jira/browse/HADOOP-571
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>         Attachments: uri.patch
>
>
> The following changes are proposed:
> 1. Add a factory/registry of FileSystem implementations.  Given a protocol, hostname and port, it should be possible to get a FileSystem implementation.
> 2. Path's constructor should accept URI-formatted strings & a configuration.
> 3. A new Path method should be added: FileSystem.getFileSystem().  This returns the filesystem named in the path or the default configured filesystem.
> 4. Most methods which currently take FileSystem and Path parameters can be changed to take only Path.
> 5. Many FileSystem operations (create, open, delete, list, etc.) can become convenience methods on Path.
> 6. A URLStreamHandler can be defined in terms of the FileSystem API, so that URLs for any protocol with a registered FileSystem implementation can be accessed with a java.net.URL, permitting FileSystem implementations to be used on the classpath, etc.
> It is tempting to try to replace Path with java.net.URL, but URL's methods are insufficient for mapreduce.  We require directory listings, random access, location hints, etc., which are not supported by existing URLStreamHandler implementations.  But we can expose all FileSystem implementations for access with java.net.URL.
> (From a brainstorm with Owen.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 21:31:28 2006
Return-Path: 
 <hadoop-dev-return-5294-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30068 invoked from network); 21 Nov 2006 21:31:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 21:31:28 -0000
Received: (qmail 20847 invoked by uid 500); 21 Nov 2006 21:31:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20799 invoked by uid 500); 21 Nov 2006 21:31:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20575 invoked by uid 99); 21 Nov 2006 21:31:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 13:31:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 13:31:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8AC677142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 13:31:04 -0800 (PST)
Message-ID: <19044587.1164144664565.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 13:31:04 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-740) JobTracker does not clean up task
 entries at job completion
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

JobTracker does not clean up task entries at job completion
-----------------------------------------------------------

                 Key: HADOOP-740
                 URL: http://issues.apache.org/jira/browse/HADOOP-740
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.8.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley


The JobTracker never calls removeTaskEntry on tasks that don't fail. This causes the JobTracker to use more and more heap space as jobs run. The fix is to:

removeTaskEntry on reduces in completeTask
removeTaskEntry on everything when a job is killed or completes

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 22:17:29 2006
Return-Path: 
 <hadoop-dev-return-5295-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69491 invoked from network); 21 Nov 2006 22:17:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 22:17:29 -0000
Received: (qmail 15653 invoked by uid 500); 21 Nov 2006 22:17:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15626 invoked by uid 500); 21 Nov 2006 22:17:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15594 invoked by uid 99); 21 Nov 2006 22:17:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:17:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:17:25 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD81C714312
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 14:17:05 -0800 (PST)
Message-ID: <7010845.1164147425838.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 14:17:05 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-732) SequenceFile's header should allow
 to store metadata in the form of key/value pairs
In-Reply-To: <31123399.1163722837105.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-732?page=comments#action_12451794 ] 
            
Owen O'Malley commented on HADOOP-732:
--------------------------------------

Would the meta-data key/value pairs be required to be strings? That would simplify everything. It isn't clear what the right API for this would be.

> SequenceFile's header should allow to store metadata in the form of key/value pairs
> -----------------------------------------------------------------------------------
>
>                 Key: HADOOP-732
>                 URL: http://issues.apache.org/jira/browse/HADOOP-732
>             Project: Hadoop
>          Issue Type: New Feature
>            Reporter: Runping Qi
>
> The sequence file currently stores a fixed list of metadata attributes, such as key/value class names, 
> compression method, etc.  To make sequence file more self descriptable, it should allow to store a list of key/value pairs.  One particular attribute of interest is to indicate whether the key/value classes are actually hadoop record classes, 
> if so, store the DDls for the records. This way, we may create tools to extract DDl from a sequence file and 
> then generate necessary classes. It also make it possible to provide an interpretive version of Hadoop record. 
> This way, even in the situation where Hadoop or the application does not have the necessary classes, 
> a sequence file of Hadoop records can be read and deserialized "interpretively".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 22:21:26 2006
Return-Path: 
 <hadoop-dev-return-5296-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77947 invoked from network); 21 Nov 2006 22:21:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 22:21:26 -0000
Received: (qmail 20140 invoked by uid 500); 21 Nov 2006 22:21:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20117 invoked by uid 500); 21 Nov 2006 22:21:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20108 invoked by uid 99); 21 Nov 2006 22:21:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:21:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:21:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B607A7142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 14:21:04 -0800 (PST)
Message-ID: <13957877.1164147664743.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 14:21:04 -0800 (PST)
From: "Richard Kasperski (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-673?page=comments#action_12451795 ] 
            
Richard Kasperski commented on HADOOP-673:
------------------------------------------

Owen, 
 What you have proposed sounds great! It allows external programs written to run on the cluster and legacy apps to run. thanks

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.9.0
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 22:23:23 2006
Return-Path: 
 <hadoop-dev-return-5297-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79674 invoked from network); 21 Nov 2006 22:23:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 22:23:23 -0000
Received: (qmail 28407 invoked by uid 500); 21 Nov 2006 22:23:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28380 invoked by uid 500); 21 Nov 2006 22:23:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28365 invoked by uid 99); 21 Nov 2006 22:23:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:23:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:23:22 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F35FF7142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 14:23:01 -0800 (PST)
Message-ID: <20910012.1164147781994.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 14:23:01 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-741) Fix average progress calculation in
 speculative execution of maps + fix pending issues in speculative execution
 of reduces
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Fix average progress calculation in speculative execution of maps + fix pending issues in speculative execution of reduces
--------------------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-741
                 URL: http://issues.apache.org/jira/browse/HADOOP-741
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Sanjay Dahiya


This issue addresses following  
1. Avg progress in speculative execution of map tasks should not divide / maps.length again in JonInProgress.java:331
2. Normal tasks should get priority over speculative tasks in reduce. JobInProgress.findNewTask should not break if a spec task is found. 
3. Delete directories used by PhasedFileSystem irrespective of whether speculative execution is enable to allow tasks to use PhasedFileSystem independently. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 22:31:24 2006
Return-Path: 
 <hadoop-dev-return-5298-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84006 invoked from network); 21 Nov 2006 22:31:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 22:31:24 -0000
Received: (qmail 48213 invoked by uid 500); 21 Nov 2006 22:31:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48187 invoked by uid 500); 21 Nov 2006 22:31:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48178 invoked by uid 99); 21 Nov 2006 22:31:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:31:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:31:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4707F7142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 14:31:03 -0800 (PST)
Message-ID: <29896585.1164148263288.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 14:31:03 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-741) Fix average progress calculation in
 speculative execution of maps + fix pending issues in speculative execution
 of reduces
In-Reply-To: <20910012.1164147781994.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-741?page=all ]

Sanjay Dahiya updated HADOOP-741:
---------------------------------

    Attachment: Hadoop-741.patch

Patch attached. 

> Fix average progress calculation in speculative execution of maps + fix pending issues in speculative execution of reduces
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-741
>                 URL: http://issues.apache.org/jira/browse/HADOOP-741
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Attachments: Hadoop-741.patch
>
>
> This issue addresses following  
> 1. Avg progress in speculative execution of map tasks should not divide / maps.length again in JonInProgress.java:331
> 2. Normal tasks should get priority over speculative tasks in reduce. JobInProgress.findNewTask should not break if a spec task is found. 
> 3. Delete directories used by PhasedFileSystem irrespective of whether speculative execution is enable to allow tasks to use PhasedFileSystem independently. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 22:31:26 2006
Return-Path: 
 <hadoop-dev-return-5299-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84112 invoked from network); 21 Nov 2006 22:31:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 22:31:26 -0000
Received: (qmail 48491 invoked by uid 500); 21 Nov 2006 22:31:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48458 invoked by uid 500); 21 Nov 2006 22:31:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48449 invoked by uid 99); 21 Nov 2006 22:31:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:31:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:31:25 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 935E37142D1
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 14:31:04 -0800 (PST)
Message-ID: <29255237.1164148264601.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 14:31:04 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-741) Fix average progress calculation in
 speculative execution of maps + fix pending issues in speculative execution
 of reduces
In-Reply-To: <20910012.1164147781994.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-741?page=all ]

Sanjay Dahiya updated HADOOP-741:
---------------------------------

    Status: Patch Available  (was: Open)

> Fix average progress calculation in speculative execution of maps + fix pending issues in speculative execution of reduces
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-741
>                 URL: http://issues.apache.org/jira/browse/HADOOP-741
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Attachments: Hadoop-741.patch
>
>
> This issue addresses following  
> 1. Avg progress in speculative execution of map tasks should not divide / maps.length again in JonInProgress.java:331
> 2. Normal tasks should get priority over speculative tasks in reduce. JobInProgress.findNewTask should not break if a spec task is found. 
> 3. Delete directories used by PhasedFileSystem irrespective of whether speculative execution is enable to allow tasks to use PhasedFileSystem independently. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 22:44:24 2006
Return-Path: 
 <hadoop-dev-return-5300-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11043 invoked from network); 21 Nov 2006 22:44:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 22:44:24 -0000
Received: (qmail 74478 invoked by uid 500); 21 Nov 2006 22:44:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74452 invoked by uid 500); 21 Nov 2006 22:44:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74425 invoked by uid 99); 21 Nov 2006 22:44:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:44:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:44:22 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0EDDE7142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 14:44:02 -0800 (PST)
Message-ID: <2834254.1164149042058.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 14:44:02 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-742) JobConf needs better javadoc
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

JobConf needs better javadoc
----------------------------

                 Key: HADOOP-742
                 URL: http://issues.apache.org/jira/browse/HADOOP-742
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.8.0
            Reporter: Nigel Daley
            Priority: Minor


The org.apache.hadoop.mapred.JobConf class needs better javadoc comments.  

In general terms, these guidelines should be followed:
  - http://java.sun.com/j2se/javadoc/writingdoccomments/#styleguide
      - document the unchecked exceptions that the caller might reasonably want to catch
      - use <code> font appropriately (detailed in link above)
  - document default values and appropriate configuration file properties
  - comments, tags, links, etc used consistently across API

In particular, the javadoc for this class should at least answer these questions:
  - all constructors: what happens if the supplied class, file path, or configuration doesn't exist or is null?
  - JobConf() constructor: where are default values loaded from?
  - JobConf(Configuration) constructor: indicate that this is effectively a copy constructor
  - JobConf(String) constructor: are there any format requirements on the string?  local and dfs paths allowed?
  - setter methods that take a path: what happens if the path doesn't exist?
  - getter methods returning objects: if value has not been set, is null returned or something else?
  - are JobConf objects immutable?  If not, why not?
  - setNum*Tasks: is this per TaskTracker? or something else?
  - methods that take a Path: what if the path is relative?
  - setWorkingDirectory: is this deleted at the end of a job?  should it be local or dfs?
  - *KeepFailedTaskFiles: if they are kept, where can they be found?
  - *KeepTaskFilesPattern: what does "the files" mean? if they are kept, where can they be found?
  - deleteLocalFiles: undoubtedly a risky operation.  Need a good spec.  Is it a recursive delete?
  - which configuration entries are mandatory (i.e. must be set before submitting the job)?


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 22:44:25 2006
Return-Path: 
 <hadoop-dev-return-5301-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11139 invoked from network); 21 Nov 2006 22:44:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 22:44:25 -0000
Received: (qmail 74803 invoked by uid 500); 21 Nov 2006 22:44:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74768 invoked by uid 500); 21 Nov 2006 22:44:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74746 invoked by uid 99); 21 Nov 2006 22:44:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:44:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:44:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 59D807142D1
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 14:44:03 -0800 (PST)
Message-ID: <18829555.1164149043365.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 14:44:03 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-732) SequenceFile's header should allow
 to store metadata in the form of key/value pairs
In-Reply-To: <31123399.1163722837105.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-732?page=comments#action_12451802 ] 
            
Runping Qi commented on HADOOP-732:
-----------------------------------

Strings sgould be fine.


> SequenceFile's header should allow to store metadata in the form of key/value pairs
> -----------------------------------------------------------------------------------
>
>                 Key: HADOOP-732
>                 URL: http://issues.apache.org/jira/browse/HADOOP-732
>             Project: Hadoop
>          Issue Type: New Feature
>            Reporter: Runping Qi
>
> The sequence file currently stores a fixed list of metadata attributes, such as key/value class names, 
> compression method, etc.  To make sequence file more self descriptable, it should allow to store a list of key/value pairs.  One particular attribute of interest is to indicate whether the key/value classes are actually hadoop record classes, 
> if so, store the DDls for the records. This way, we may create tools to extract DDl from a sequence file and 
> then generate necessary classes. It also make it possible to provide an interpretive version of Hadoop record. 
> This way, even in the situation where Hadoop or the application does not have the necessary classes, 
> a sequence file of Hadoop records can be read and deserialized "interpretively".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 22:57:25 2006
Return-Path: 
 <hadoop-dev-return-5302-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23193 invoked from network); 21 Nov 2006 22:57:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 22:57:25 -0000
Received: (qmail 6960 invoked by uid 500); 21 Nov 2006 22:57:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6936 invoked by uid 500); 21 Nov 2006 22:57:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6923 invoked by uid 99); 21 Nov 2006 22:57:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:57:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:57:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 70B337142CD
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 14:57:03 -0800 (PST)
Message-ID: <25693221.1164149823458.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 14:57:03 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-741) Fix average progress calculation in
 speculative execution of maps + fix pending issues in speculative execution
 of reduces
In-Reply-To: <20910012.1164147781994.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-741?page=all ]

Sanjay Dahiya updated HADOOP-741:
---------------------------------

    Attachment:     (was: Hadoop-741.patch)

> Fix average progress calculation in speculative execution of maps + fix pending issues in speculative execution of reduces
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-741
>                 URL: http://issues.apache.org/jira/browse/HADOOP-741
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Attachments: Hadoop-741.patch
>
>
> This issue addresses following  
> 1. Avg progress in speculative execution of map tasks should not divide / maps.length again in JonInProgress.java:331
> 2. Normal tasks should get priority over speculative tasks in reduce. JobInProgress.findNewTask should not break if a spec task is found. 
> 3. Delete directories used by PhasedFileSystem irrespective of whether speculative execution is enable to allow tasks to use PhasedFileSystem independently. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 22:57:26 2006
Return-Path: 
 <hadoop-dev-return-5303-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23223 invoked from network); 21 Nov 2006 22:57:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 22:57:26 -0000
Received: (qmail 7227 invoked by uid 500); 21 Nov 2006 22:57:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7191 invoked by uid 500); 21 Nov 2006 22:57:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7181 invoked by uid 99); 21 Nov 2006 22:57:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:57:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:57:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BDE0A7142D1
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 14:57:04 -0800 (PST)
Message-ID: <15270880.1164149824775.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 14:57:04 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-741) Fix average progress calculation in
 speculative execution of maps + fix pending issues in speculative execution
 of reduces
In-Reply-To: <20910012.1164147781994.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-741?page=all ]

Sanjay Dahiya updated HADOOP-741:
---------------------------------

    Attachment: Hadoop-741.patch

> Fix average progress calculation in speculative execution of maps + fix pending issues in speculative execution of reduces
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-741
>                 URL: http://issues.apache.org/jira/browse/HADOOP-741
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Attachments: Hadoop-741.patch
>
>
> This issue addresses following  
> 1. Avg progress in speculative execution of map tasks should not divide / maps.length again in JonInProgress.java:331
> 2. Normal tasks should get priority over speculative tasks in reduce. JobInProgress.findNewTask should not break if a spec task is found. 
> 3. Delete directories used by PhasedFileSystem irrespective of whether speculative execution is enable to allow tasks to use PhasedFileSystem independently. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 23:16:26 2006
Return-Path: 
 <hadoop-dev-return-5304-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29462 invoked from network); 21 Nov 2006 23:16:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 23:16:26 -0000
Received: (qmail 46310 invoked by uid 500); 21 Nov 2006 23:16:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46079 invoked by uid 500); 21 Nov 2006 23:16:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46070 invoked by uid 99); 21 Nov 2006 23:16:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:16:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:16:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 992EF7142CD
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 15:16:04 -0800 (PST)
Message-ID: <9162649.1164150964624.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 15:16:04 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-741) Fix average progress calculation in
 speculative execution of maps + fix pending issues in speculative execution
 of reduces
In-Reply-To: <20910012.1164147781994.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-741?page=comments#action_12451811 ] 
            
Owen O'Malley commented on HADOOP-741:
--------------------------------------

+1

> Fix average progress calculation in speculative execution of maps + fix pending issues in speculative execution of reduces
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-741
>                 URL: http://issues.apache.org/jira/browse/HADOOP-741
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Attachments: Hadoop-741.patch
>
>
> This issue addresses following  
> 1. Avg progress in speculative execution of map tasks should not divide / maps.length again in JonInProgress.java:331
> 2. Normal tasks should get priority over speculative tasks in reduce. JobInProgress.findNewTask should not break if a spec task is found. 
> 3. Delete directories used by PhasedFileSystem irrespective of whether speculative execution is enable to allow tasks to use PhasedFileSystem independently. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 23:16:27 2006
Return-Path: 
 <hadoop-dev-return-5305-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29507 invoked from network); 21 Nov 2006 23:16:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 23:16:27 -0000
Received: (qmail 46421 invoked by uid 500); 21 Nov 2006 23:16:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46333 invoked by uid 500); 21 Nov 2006 23:16:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46324 invoked by uid 99); 21 Nov 2006 23:16:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:16:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:16:26 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 117757142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 15:16:06 -0800 (PST)
Message-ID: <513095.1164150966069.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 15:16:06 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-741) Fix average progress calculation in
 speculative execution of maps + fix pending issues in speculative execution
 of reduces
In-Reply-To: <20910012.1164147781994.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-741?page=all ]

Owen O'Malley reassigned HADOOP-741:
------------------------------------

    Assignee: Sanjay Dahiya

> Fix average progress calculation in speculative execution of maps + fix pending issues in speculative execution of reduces
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-741
>                 URL: http://issues.apache.org/jira/browse/HADOOP-741
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-741.patch
>
>
> This issue addresses following  
> 1. Avg progress in speculative execution of map tasks should not divide / maps.length again in JonInProgress.java:331
> 2. Normal tasks should get priority over speculative tasks in reduce. JobInProgress.findNewTask should not break if a spec task is found. 
> 3. Delete directories used by PhasedFileSystem irrespective of whether speculative execution is enable to allow tasks to use PhasedFileSystem independently. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 23:20:36 2006
Return-Path: 
 <hadoop-dev-return-5306-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31731 invoked from network); 21 Nov 2006 23:20:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 23:20:36 -0000
Received: (qmail 58237 invoked by uid 500); 21 Nov 2006 23:20:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58214 invoked by uid 500); 21 Nov 2006 23:20:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57798 invoked by uid 99); 21 Nov 2006 23:20:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:20:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:20:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DB4457142D1
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 15:20:03 -0800 (PST)
Message-ID: <6588103.1164151203895.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 15:20:03 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-571) Path should use URI syntax
In-Reply-To: <6678550.1159825879600.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-571?page=all ]

Doug Cutting updated HADOOP-571:
--------------------------------

    Attachment: uri2.patch

Here's a slightly improved version, incorporating Owen's comments.  All unit tests now pass on Linux, but TestPath fails on Windows.

> Path should use URI syntax
> --------------------------
>
>                 Key: HADOOP-571
>                 URL: http://issues.apache.org/jira/browse/HADOOP-571
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>         Attachments: uri.patch, uri2.patch
>
>
> The following changes are proposed:
> 1. Add a factory/registry of FileSystem implementations.  Given a protocol, hostname and port, it should be possible to get a FileSystem implementation.
> 2. Path's constructor should accept URI-formatted strings & a configuration.
> 3. A new Path method should be added: FileSystem.getFileSystem().  This returns the filesystem named in the path or the default configured filesystem.
> 4. Most methods which currently take FileSystem and Path parameters can be changed to take only Path.
> 5. Many FileSystem operations (create, open, delete, list, etc.) can become convenience methods on Path.
> 6. A URLStreamHandler can be defined in terms of the FileSystem API, so that URLs for any protocol with a registered FileSystem implementation can be accessed with a java.net.URL, permitting FileSystem implementations to be used on the classpath, etc.
> It is tempting to try to replace Path with java.net.URL, but URL's methods are insufficient for mapreduce.  We require directory listings, random access, location hints, etc., which are not supported by existing URLStreamHandler implementations.  But we can expose all FileSystem implementations for access with java.net.URL.
> (From a brainstorm with Owen.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 23:22:25 2006
Return-Path: 
 <hadoop-dev-return-5307-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32798 invoked from network); 21 Nov 2006 23:22:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 23:22:25 -0000
Received: (qmail 64117 invoked by uid 500); 21 Nov 2006 23:22:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64093 invoked by uid 500); 21 Nov 2006 23:22:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64081 invoked by uid 99); 21 Nov 2006 23:22:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:22:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:22:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 52D827142CD
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 15:22:03 -0800 (PST)
Message-ID: <10022411.1164151323336.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 15:22:03 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-371) ant tar should package contrib jars
In-Reply-To: <22441907.1153248734143.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-371?page=comments#action_12451814 ] 
            
Nigel Daley commented on HADOOP-371:
------------------------------------

I think I'll propose a different solution that expands a bit on the scope of this bug to include consolidating benchmarks and reordering javadoc:

1) consolidate benchmarks into src/test/org/apache/hadoop/benchmark and include them in the test jar file.  This includes:
    - src/contrib/smallJobsBenchmark
    - src/examples/org/apache/hadoop/examples/NNBench.java

2) rename PiBenchmark example to PiEstimator and leave it in the examples package

3) build hadoop-streaming.jar into a top-level extensions directory using the package target

4) package the contrib javadoc into docs/contrib and package the example javadoc into docs/examples

5) create a top-level index.html that points to
    - hadoop api javadoc
    - examples javadoc
    - contrib javadoc
    - existing docs/hadoop-default.html
    - man pages for our command line utilities (would need to write these)
    - whitepapers
    - hadoop wiki
    - etc.

Comments?

> ant tar should package contrib jars
> -----------------------------------
>
>                 Key: HADOOP-371
>                 URL: http://issues.apache.org/jira/browse/HADOOP-371
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Michel Tourn
>         Attachments: build.tarcontrib.patch, contribbuild.patch
>
>
> From Hadoop-356:
> >I note that the contrib packages are not included in distributions (the "tar" target).  
> >They probably should be.  Michel, would you like to modify "tar" to include the contrib code?  
> >This should be done in a separate bug.
> OK.
> This packaging is done in target deploy-contrib.
> So I can just add a dependency to the top-level tar target:
> <!-- Make release tarball(s)                                               -->
> <target name="tar" depends="package, deploy-contrib">

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 21 23:51:25 2006
Return-Path: 
 <hadoop-dev-return-5308-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41743 invoked from network); 21 Nov 2006 23:51:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 23:51:25 -0000
Received: (qmail 19372 invoked by uid 500); 21 Nov 2006 23:51:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19337 invoked by uid 500); 21 Nov 2006 23:51:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19328 invoked by uid 99); 21 Nov 2006 23:51:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:51:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:51:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 488197142CD
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 15:51:03 -0800 (PST)
Message-ID: <10088137.1164153063293.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 15:51:03 -0800 (PST)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-738) dfs get or copyToLocal should not
 copy crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-738?page=comments#action_12451824 ] 
            
eric baldeschwieler commented on HADOOP-738:
--------------------------------------------

The issues you raise are real when you are moving multi-terabyte search indexes and such.  Having end-2-end CRC support is crucial and I'm all for keeping it in.  But yes, our average use is not "sophisticated" in that their average operation to local disk in our environment is just to pull some experiment results locally.  In general modern machines are good enough that megabyte to gigabyte sized files can be read and written reliably enough that CRC errors are not a dominate concern.

Where they are a concern, I suggest we make the CRC files visible.  Rather than using "dot" files, just append .crc to the file name.  Then at least folks can see them and ask the right questions, etc.  Things will work better that way.

> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 00:58:24 2006
Return-Path: 
 <hadoop-dev-return-5309-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88711 invoked from network); 22 Nov 2006 00:58:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 00:58:24 -0000
Received: (qmail 31247 invoked by uid 500); 22 Nov 2006 00:58:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31221 invoked by uid 500); 22 Nov 2006 00:58:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31212 invoked by uid 99); 22 Nov 2006 00:58:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 16:58:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 16:58:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 380127142CD
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 16:58:03 -0800 (PST)
Message-ID: <25213173.1164157083226.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 16:58:03 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-741) Fix average progress calculation in
 speculative execution of maps + fix pending issues in speculative execution
 of reduces
In-Reply-To: <20910012.1164147781994.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-741?page=all ]

Sanjay Dahiya updated HADOOP-741:
---------------------------------

    Attachment:     (was: Hadoop-741.patch)

> Fix average progress calculation in speculative execution of maps + fix pending issues in speculative execution of reduces
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-741
>                 URL: http://issues.apache.org/jira/browse/HADOOP-741
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-741.patch
>
>
> This issue addresses following  
> 1. Avg progress in speculative execution of map tasks should not divide / maps.length again in JonInProgress.java:331
> 2. Normal tasks should get priority over speculative tasks in reduce. JobInProgress.findNewTask should not break if a spec task is found. 
> 3. Delete directories used by PhasedFileSystem irrespective of whether speculative execution is enable to allow tasks to use PhasedFileSystem independently. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 00:58:26 2006
Return-Path: 
 <hadoop-dev-return-5310-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88749 invoked from network); 22 Nov 2006 00:58:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 00:58:26 -0000
Received: (qmail 31511 invoked by uid 500); 22 Nov 2006 00:58:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31487 invoked by uid 500); 22 Nov 2006 00:58:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31478 invoked by uid 99); 22 Nov 2006 00:58:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 16:58:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 16:58:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 84D7E7142C3
	for <hadoop-dev@lucene.apache.org>; Tue, 21 Nov 2006 16:58:04 -0800 (PST)
Message-ID: <5722314.1164157084541.JavaMail.jira@brutus>
Date: Tue, 21 Nov 2006 16:58:04 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-741) Fix average progress calculation in
 speculative execution of maps + fix pending issues in speculative execution
 of reduces
In-Reply-To: <20910012.1164147781994.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-741?page=all ]

Sanjay Dahiya updated HADOOP-741:
---------------------------------

    Attachment: Hadoop-741.patch

> Fix average progress calculation in speculative execution of maps + fix pending issues in speculative execution of reduces
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-741
>                 URL: http://issues.apache.org/jira/browse/HADOOP-741
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-741.patch
>
>
> This issue addresses following  
> 1. Avg progress in speculative execution of map tasks should not divide / maps.length again in JonInProgress.java:331
> 2. Normal tasks should get priority over speculative tasks in reduce. JobInProgress.findNewTask should not break if a spec task is found. 
> 3. Delete directories used by PhasedFileSystem irrespective of whether speculative execution is enable to allow tasks to use PhasedFileSystem independently. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 08:00:33 2006
Return-Path: 
 <hadoop-dev-return-5311-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76647 invoked from network); 22 Nov 2006 08:00:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 08:00:33 -0000
Received: (qmail 25306 invoked by uid 500); 22 Nov 2006 08:00:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25279 invoked by uid 500); 22 Nov 2006 08:00:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25270 invoked by uid 99); 22 Nov 2006 08:00:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 00:00:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 00:00:29 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F018D7142C3
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 00:00:06 -0800 (PST)
Message-ID: <3113719.1164182406980.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 00:00:06 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-432) support undelete, snapshots, or other
 mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-432?page=all ]

Wendy Chien updated HADOOP-432:
-------------------------------

    Attachment: undelete.patch

This patch has the changes from an initial review.  Another round would be good.

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 08:35:25 2006
Return-Path: 
 <hadoop-dev-return-5312-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98927 invoked from network); 22 Nov 2006 08:35:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 08:35:25 -0000
Received: (qmail 86423 invoked by uid 500); 22 Nov 2006 08:35:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86189 invoked by uid 500); 22 Nov 2006 08:35:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86180 invoked by uid 99); 22 Nov 2006 08:35:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 00:35:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 00:35:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D98437142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 00:35:03 -0800 (PST)
Message-ID: <29419504.1164184503888.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 00:35:03 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-736) Roll back Jetty6.0.1 to Jetty5.1.4
In-Reply-To: <25654499.1164007503335.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-736?page=comments#action_12451873 ] 
            
Devaraj Das commented on HADOOP-736:
------------------------------------

Tried the bugfixed release but sort benchmark fails with it (I ran the benchmark twice and both the times it failed). A whole lot of reduces fail and finally the job is terminated. I have not analysed why but I think it is not safe to proceed with this version of Jetty (though they fixed one major bug yesterday but there might be more lurking around). My recommendation is to roll back.

> Roll back Jetty6.0.1 to Jetty5.1.4
> ----------------------------------
>
>                 Key: HADOOP-736
>                 URL: http://issues.apache.org/jira/browse/HADOOP-736
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: jetty5.1.4.patch, jettyfiles-5.1.4.tar.gz
>
>
> There seems to be a problem with the current version of Jetty (6.0.1) in the case where we are using it for serving map outputs. It becomes very slow after serving a few outputs and doesn't recover from that state. Tried with the current release of Jetty - 6.1.0(pre1), but the problem seems to be there even with that release. So roll back to the previous Jetty version (5.1.4) seems to be right thing to do for now. This is the URL for the Jira issue on Jetty's performance issue: 
> http://jira.codehaus.org/browse/JETTY-177

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 10:12:24 2006
Return-Path: 
 <hadoop-dev-return-5313-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23980 invoked from network); 22 Nov 2006 10:12:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 10:12:24 -0000
Received: (qmail 28660 invoked by uid 500); 22 Nov 2006 10:12:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28499 invoked by uid 500); 22 Nov 2006 10:12:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28489 invoked by uid 99); 22 Nov 2006 10:12:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 02:12:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 02:12:22 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 09C817142C3
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 02:12:02 -0800 (PST)
Message-ID: <13125997.1164190322036.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 02:12:02 -0800 (PST)
From: "Thomas Friol (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-743) org.apache.hadoop.ipc.Server join
 method doees not wait for its subthreads to die
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

org.apache.hadoop.ipc.Server join method doees not wait for its subthreads to die
---------------------------------------------------------------------------------

                 Key: HADOOP-743
                 URL: http://issues.apache.org/jira/browse/HADOOP-743
             Project: Hadoop
          Issue Type: Bug
          Components: ipc
    Affects Versions: 0.6.1
            Reporter: Thomas Friol


Is there an explanation about this ?

In fact, my problem is that I have to launch consecutively two MiniMRCluster in order to perform unit tests as following :

 - Start first MiniMrCLuster
 - Do some tests
 - Stop first MiniMRCluster
 - Start second MiniMRCluster
 - Do some tests
 - Stop second MiniMRCluster

When executing this, the second MiniMRcluster give me continually this log :
06/11/22 11:09:22 INFO ipc.RPC: Problem connecting to server: localhost/127.0.0.1:60030
Waiting for task tracker to start.

The only solution I have found now is to insert a Thread.sleep(2000) between first MiniMRCluster stop and the second one start to ensure that the first one is completely stopped.

Any idea, suggestions, thoughts ?



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 16:23:25 2006
Return-Path: 
 <hadoop-dev-return-5314-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43253 invoked from network); 22 Nov 2006 16:23:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 16:23:25 -0000
Received: (qmail 38199 invoked by uid 500); 22 Nov 2006 16:23:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38176 invoked by uid 500); 22 Nov 2006 16:23:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38167 invoked by uid 99); 22 Nov 2006 16:23:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 08:23:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 08:23:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D4B5A7142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 08:23:03 -0800 (PST)
Message-ID: <27185514.1164212583868.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 08:23:03 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-736) Roll back Jetty6.0.1 to Jetty5.1.4
In-Reply-To: <25654499.1164007503335.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-736?page=comments#action_12451981 ] 
            
Owen O'Malley commented on HADOOP-736:
--------------------------------------

I agree. 6.0 is clearly not ready for us.

> Roll back Jetty6.0.1 to Jetty5.1.4
> ----------------------------------
>
>                 Key: HADOOP-736
>                 URL: http://issues.apache.org/jira/browse/HADOOP-736
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: jetty5.1.4.patch, jettyfiles-5.1.4.tar.gz
>
>
> There seems to be a problem with the current version of Jetty (6.0.1) in the case where we are using it for serving map outputs. It becomes very slow after serving a few outputs and doesn't recover from that state. Tried with the current release of Jetty - 6.1.0(pre1), but the problem seems to be there even with that release. So roll back to the previous Jetty version (5.1.4) seems to be right thing to do for now. This is the URL for the Jira issue on Jetty's performance issue: 
> http://jira.codehaus.org/browse/JETTY-177

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 16:25:25 2006
Return-Path: 
 <hadoop-dev-return-5315-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43696 invoked from network); 22 Nov 2006 16:25:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 16:25:25 -0000
Received: (qmail 42452 invoked by uid 500); 22 Nov 2006 16:25:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42418 invoked by uid 500); 22 Nov 2006 16:25:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42409 invoked by uid 99); 22 Nov 2006 16:25:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 08:25:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 08:25:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3AB6F7142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 08:25:03 -0800 (PST)
Message-ID: <7084700.1164212703237.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 08:25:03 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-639?page=comments#action_12451982 ] 
            
Arun C Murthy commented on HADOOP-639:
--------------------------------------

Ok, while we continue to track the *metrics* part of TaskTrackerStatus via HADOOP-657 I propose we move forward on the 'lost messages' part over here...

Here are some thoughts (with due credits to Owen):

Define new classes:

TaskTrackerAction implements Writable {
  byte actionId = 0;
  // ...
}

KillJobAction extends TaskTrackerAction {
  byte actionId = 1;
  // ...
}
KillTaskAction extends TaskTrackerAction {
  byte actionId = 2;
  // ...
}
StartTaskAction extends TaskTrackerAction {
  byte actionId = 3;
  // ...
}

The distinction between the KillTaskAction & KillJobAction is done to fix HADOOP-737 ... 

Another class:
class JTResponse {
  long seqNo;                  // explained below
  List<TaskTrackerAction> actions;
}

The new api replacing
  int emitHeartbeat(TaskTrackerStatus status, boolean initialContact) throws IOException;
  Task pollForNewTask(String trackerName) throws IOException;
  String[] pollForTaskWithClosedJob(String trackerName) throws IOException;
is:

  * JTResponse updateStatus(TaskTrackerStatus status, long ackNo) throws IOException; *

Details about the seqNo/ackNo:
------------------------------------

The idea is that there is a feedback (seq/ack) mechanism between the JT & TT which works as follows...

TT starts off by sending an ack of '-1' (indicates initial contact, replaces the existing 'initialContact' boolean); and at every step the JT increments the ack and sends a new JTResponse object with the incremented ack as the 'seqNo' and 'actions'. The JT also stores the last seq and the JTResponse object sent to each of the task-trackers. OTOH the TT also stores the last 'seq' which it recieved from the JT, which is what it sends out in the subsequent heartbeat as 'ack'.

How does this help? If a TT misses the heartbeat response from the JT, it sends a stale which 'ack' disagrees with the newer 'seq' on the JT, this prompts the JT to resend the 'saved' JTResponse object back to the TT... thus solving the 'lost messages' issue. If JT never hears back from a TT for a long time the existing ExpireTrackers.run removes the TT from its queue and also discards the saved JTResponse object for that TT.

-*-*-

Thoughts?


> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 16:31:26 2006
Return-Path: 
 <hadoop-dev-return-5316-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46976 invoked from network); 22 Nov 2006 16:31:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 16:31:26 -0000
Received: (qmail 64804 invoked by uid 500); 22 Nov 2006 16:31:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64783 invoked by uid 500); 22 Nov 2006 16:31:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64774 invoked by uid 99); 22 Nov 2006 16:31:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 08:31:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 08:31:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DD9617142D2
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 08:31:03 -0800 (PST)
Message-ID: <27330473.1164213063904.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 08:31:03 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-639?page=all ]

Arun C Murthy reassigned HADOOP-639:
------------------------------------

    Assignee: Arun C Murthy  (was: Owen O'Malley)

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 16:56:25 2006
Return-Path: 
 <hadoop-dev-return-5317-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58243 invoked from network); 22 Nov 2006 16:56:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 16:56:25 -0000
Received: (qmail 35485 invoked by uid 500); 22 Nov 2006 16:56:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35460 invoked by uid 500); 22 Nov 2006 16:56:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35451 invoked by uid 99); 22 Nov 2006 16:56:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 08:56:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 08:56:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DF9807142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 08:56:03 -0800 (PST)
Message-ID: <29830454.1164214563913.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 08:56:03 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-639?page=comments#action_12451988 ] 
            
Owen O'Malley commented on HADOOP-639:
--------------------------------------

To clarify, the point of the type ids in the TaskTrackerActions is so that we can serialize the list of actions efficiently.

I'd make TaskTrackerAction an abstract class like:

abstract class TaskTrackerAction implements Writable {
  /** Get the type id for a type */
  public abstract int getTypeId();

  /** Create an instance of the appropriate child type. */
  public static TaskTrackerAction newInstance(int typeId);
}

and then the children look like:

class StartTaskAction extends TaskTrackerAction {
  int getTypeId() { return 1; }
  Task newTask;
  public void readFields(...) throws IOException {...}
  public void write(...) throws IOException {...}
}

KillTaskAction has a jobid and taskid.
KillJobAction has a jobid.

We also need a action to reinitialize the task tracker (ReinitializeSelfAction?).

"JTResponse" is too information free. How about "TaskTrackerActionList" instead.

I think we are better off using a boolean than a special value for ackNo. As a side effect we can use short for ackNo because it is ok if it rolls around. And taking a hint from linux, we are probably better starting at a -100 so that we wrap pretty soon after start up. *smile*

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 17:01:06 2006
Return-Path: 
 <hadoop-dev-return-5318-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60046 invoked from network); 22 Nov 2006 17:01:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 17:01:06 -0000
Received: (qmail 44793 invoked by uid 500); 22 Nov 2006 17:01:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44773 invoked by uid 500); 22 Nov 2006 17:01:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44764 invoked by uid 99); 22 Nov 2006 17:01:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 09:01:14 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 09:01:02 -0800
Received: from [10.0.1.2] (snvvpn2-10-72-77-c106.corp.yahoo.com
 [10.72.77.106])
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kAMH0R5I053674
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 09:00:27 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=mj356ANeqnwg8p9M4LYoZNCGhcBDStBFYCGJp2jU0t//UfGnZ0HjlewL6CZ2NADm
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <7084700.1164212703237.JavaMail.jira@brutus>
References: <7084700.1164212703237.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <42DA89B2-F019-41E7-85B0-844FD2726BFB@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Nigel Daley <ndaley@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-639) task cleanup messages can get
 lost, causing task trackers to keep tasks forever
Date: Wed, 22 Nov 2006 09:00:23 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Arun, the proposal looks good.  If the JT always gets a stale seqNo  
from the TT (because of some unrecoverable problem in the TT), will  
it send the saved response forever?  Or should there be some maximum  
resends?

Also, when the JT is resending a JTResponse, can it add or change the  
list of actions?  Or do they need to be identical?

Is it possible that a TT can get the same JTResponse more than once?   
If so, does the TT need to recognize this?


On Nov 22, 2006, at 8:25 AM, Arun C Murthy (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-639? 
> page=comments#action_12451982 ]
>
> Arun C Murthy commented on HADOOP-639:
> --------------------------------------
>
> Ok, while we continue to track the *metrics* part of  
> TaskTrackerStatus via HADOOP-657 I propose we move forward on the  
> 'lost messages' part over here...
>
> Here are some thoughts (with due credits to Owen):
>
> Define new classes:
>
> TaskTrackerAction implements Writable {
>   byte actionId = 0;
>   // ...
> }
>
> KillJobAction extends TaskTrackerAction {
>   byte actionId = 1;
>   // ...
> }
> KillTaskAction extends TaskTrackerAction {
>   byte actionId = 2;
>   // ...
> }
> StartTaskAction extends TaskTrackerAction {
>   byte actionId = 3;
>   // ...
> }
>
> The distinction between the KillTaskAction & KillJobAction is done  
> to fix HADOOP-737 ...
>
> Another class:
> class JTResponse {
>   long seqNo;                  // explained below
>   List<TaskTrackerAction> actions;
> }
>
> The new api replacing
>   int emitHeartbeat(TaskTrackerStatus status, boolean  
> initialContact) throws IOException;
>   Task pollForNewTask(String trackerName) throws IOException;
>   String[] pollForTaskWithClosedJob(String trackerName) throws  
> IOException;
> is:
>
>   * JTResponse updateStatus(TaskTrackerStatus status, long ackNo)  
> throws IOException; *
>
> Details about the seqNo/ackNo:
> ------------------------------------
>
> The idea is that there is a feedback (seq/ack) mechanism between  
> the JT & TT which works as follows...
>
> TT starts off by sending an ack of '-1' (indicates initial contact,  
> replaces the existing 'initialContact' boolean); and at every step  
> the JT increments the ack and sends a new JTResponse object with  
> the incremented ack as the 'seqNo' and 'actions'. The JT also  
> stores the last seq and the JTResponse object sent to each of the  
> task-trackers. OTOH the TT also stores the last 'seq' which it  
> recieved from the JT, which is what it sends out in the subsequent  
> heartbeat as 'ack'.
>
> How does this help? If a TT misses the heartbeat response from the  
> JT, it sends a stale which 'ack' disagrees with the newer 'seq' on  
> the JT, this prompts the JT to resend the 'saved' JTResponse object  
> back to the TT... thus solving the 'lost messages' issue. If JT  
> never hears back from a TT for a long time the existing  
> ExpireTrackers.run removes the TT from its queue and also discards  
> the saved JTResponse object for that TT.
>
> -*-*-
>
> Thoughts?
>
>
>> task cleanup messages can get lost, causing task trackers to keep  
>> tasks forever
>> --------------------------------------------------------------------- 
>> ----------
>>
>>                 Key: HADOOP-639
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>>             Project: Hadoop
>>          Issue Type: Bug
>>          Components: mapred
>>    Affects Versions: 0.7.2
>>            Reporter: Owen O'Malley
>>         Assigned To: Owen O'Malley
>>             Fix For: 0.9.0
>>
>>
>> If the pollForTaskWithClosedJob call from a job tracker to a task  
>> tracker times out when a job completes, the tasks are never  
>> cleaned up. This can cause the mini m/r cluster to hang on  
>> shutdown, but also is a resource leak.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Wed Nov 22 17:28:25 2006
Return-Path: 
 <hadoop-dev-return-5319-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69311 invoked from network); 22 Nov 2006 17:28:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 17:28:25 -0000
Received: (qmail 11715 invoked by uid 500); 22 Nov 2006 17:28:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11690 invoked by uid 500); 22 Nov 2006 17:28:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11681 invoked by uid 99); 22 Nov 2006 17:28:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 09:28:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 09:28:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2CA507142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 09:28:03 -0800 (PST)
Message-ID: <16694936.1164216483180.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 09:28:03 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-720?page=all ]

dhruba borthakur updated HADOOP-720:
------------------------------------

    Attachment: HadoopArchitecture_v2.doc

Here is a second draft of the document that describes HDFS architecture, design and features. This incorporates most of the feedback I have received so far. Review comments welcome.

I am attaching a MS Word Doc as well as a HTML document.

I plan on checking in these documents into source-code-control. I would be creating a top level "doc" directory (at the same level as "src") and check in the doc(s) there.



> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture.html, HadoopArchitecture_v2.doc
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 17:32:24 2006
Return-Path: 
 <hadoop-dev-return-5320-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70511 invoked from network); 22 Nov 2006 17:32:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 17:32:24 -0000
Received: (qmail 19481 invoked by uid 500); 22 Nov 2006 17:32:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19451 invoked by uid 500); 22 Nov 2006 17:32:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19441 invoked by uid 99); 22 Nov 2006 17:32:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 09:32:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 09:32:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2D7F17142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 09:32:03 -0800 (PST)
Message-ID: <1189846.1164216723183.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 09:32:03 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-720?page=all ]

dhruba borthakur updated HADOOP-720:
------------------------------------

    Attachment: HadoopArchitecture_v2.htm

Here is a html version of the same document.

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture.html, HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 18:41:25 2006
Return-Path: 
 <hadoop-dev-return-5321-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91849 invoked from network); 22 Nov 2006 18:41:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 18:41:25 -0000
Received: (qmail 28659 invoked by uid 500); 22 Nov 2006 18:41:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28423 invoked by uid 500); 22 Nov 2006 18:41:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28413 invoked by uid 99); 22 Nov 2006 18:41:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 10:41:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 10:41:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F2F207142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 10:41:03 -0800 (PST)
Message-ID: <22431852.1164220863992.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 10:41:03 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-371) ant tar should package contrib jars
In-Reply-To: <22441907.1153248734143.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-371?page=comments#action_12452011 ] 
            
Doug Cutting commented on HADOOP-371:
-------------------------------------

I believe smallJobsBenchmark was initially placed in contrib to keep it in a separate jar, not on the default classpath.  So wherever it is moved, it should retain that property.

I would prefer putting the contrib javadoc together with the main javadoc, as is done in Lucene:

http://lucene.apache.org/java/docs/api/overview-summary.html

As for a top-level index.html, should that really differ from site/index.html?  That's included in releases and links to everything you mention, I think.  Perhaps we should simply add an index.html with a meta-redirect to that page.  Lucene does this:

http://svn.apache.org/viewvc/lucene/java/trunk/index.html?view=markup

(Like the last-modified date on that one?)


> ant tar should package contrib jars
> -----------------------------------
>
>                 Key: HADOOP-371
>                 URL: http://issues.apache.org/jira/browse/HADOOP-371
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Michel Tourn
>         Attachments: build.tarcontrib.patch, contribbuild.patch
>
>
> From Hadoop-356:
> >I note that the contrib packages are not included in distributions (the "tar" target).  
> >They probably should be.  Michel, would you like to modify "tar" to include the contrib code?  
> >This should be done in a separate bug.
> OK.
> This packaging is done in target deploy-contrib.
> So I can just add a dependency to the top-level tar target:
> <!-- Make release tarball(s)                                               -->
> <target name="tar" depends="package, deploy-contrib">

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 18:47:26 2006
Return-Path: 
 <hadoop-dev-return-5322-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96135 invoked from network); 22 Nov 2006 18:47:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 18:47:26 -0000
Received: (qmail 34392 invoked by uid 500); 22 Nov 2006 18:47:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34370 invoked by uid 500); 22 Nov 2006 18:47:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34361 invoked by uid 99); 22 Nov 2006 18:47:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 10:47:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 10:47:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 28E7771429F
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 10:47:04 -0800 (PST)
Message-ID: <8381049.1164221224164.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 10:47:04 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-639?page=comments#action_12452013 ] 
            
Arun C Murthy commented on HADOOP-639:
--------------------------------------

I'd like to counterpropose:
HeartbeatResponse instead of JTResponse

and clarify:
HeartbeatResponse statusUpdate(TaskTrackerStatus status, boolean initialContact, short heartbeatResponseId);


> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 18:53:26 2006
Return-Path: 
 <hadoop-dev-return-5323-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2020 invoked from network); 22 Nov 2006 18:53:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 18:53:26 -0000
Received: (qmail 46978 invoked by uid 500); 22 Nov 2006 18:53:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46950 invoked by uid 500); 22 Nov 2006 18:53:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46941 invoked by uid 99); 22 Nov 2006 18:53:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 10:53:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 10:53:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8B0D671429F
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 10:53:04 -0800 (PST)
Message-ID: <24295608.1164221584566.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 10:53:04 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-738) dfs get or copyToLocal should not
 copy crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-738?page=comments#action_12452016 ] 
            
Doug Cutting commented on HADOOP-738:
-------------------------------------

> I suggest we make the CRC files visible.

Either someone needs to change the description of this issue, or this discussion needs to move to a new issue.  As I keep saying, the fixes proposed don't fix the described problem: when local CRC files are used then 'dfs -put' fails.  I have not verified this, but, if this is the case, it is a bug that should be fixed.  Disabling CRC files for some folks, while a reasonable thing to do, won't fix this.  Neither will changing their names.

> multi-terabyte search indexes [ ... not typical ...]

Aren't these prototypical for Hadoop?  Isn't that why we're building Hadoop?  Should such uses require special configuration?

> [...] CRC errors are not a dominate concern

If you have ECC memory, which you do, but not all folks do.


> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 18:55:26 2006
Return-Path: 
 <hadoop-dev-return-5324-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4101 invoked from network); 22 Nov 2006 18:55:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 18:55:26 -0000
Received: (qmail 50502 invoked by uid 500); 22 Nov 2006 18:55:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50485 invoked by uid 500); 22 Nov 2006 18:55:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50476 invoked by uid 99); 22 Nov 2006 18:55:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 10:55:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 10:55:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CCEFB7142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 10:55:03 -0800 (PST)
Message-ID: <18258273.1164221703836.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 10:55:03 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-736) Roll back Jetty6.0.1 to Jetty5.1.4
In-Reply-To: <25654499.1164007503335.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-736?page=comments#action_12452017 ] 
            
Doug Cutting commented on HADOOP-736:
-------------------------------------

Can someone verify whether 'svn merge -r 472202:472201 .' is sufficient?  If so, it's considerably simpler.

> Roll back Jetty6.0.1 to Jetty5.1.4
> ----------------------------------
>
>                 Key: HADOOP-736
>                 URL: http://issues.apache.org/jira/browse/HADOOP-736
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: jetty5.1.4.patch, jettyfiles-5.1.4.tar.gz
>
>
> There seems to be a problem with the current version of Jetty (6.0.1) in the case where we are using it for serving map outputs. It becomes very slow after serving a few outputs and doesn't recover from that state. Tried with the current release of Jetty - 6.1.0(pre1), but the problem seems to be there even with that release. So roll back to the previous Jetty version (5.1.4) seems to be right thing to do for now. This is the URL for the Jira issue on Jetty's performance issue: 
> http://jira.codehaus.org/browse/JETTY-177

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 19:06:31 2006
Return-Path: 
 <hadoop-dev-return-5325-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9855 invoked from network); 22 Nov 2006 19:06:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 19:06:31 -0000
Received: (qmail 69522 invoked by uid 500); 22 Nov 2006 19:06:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69500 invoked by uid 500); 22 Nov 2006 19:06:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69485 invoked by uid 99); 22 Nov 2006 19:06:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:06:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:06:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2A1C57142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 11:06:03 -0800 (PST)
Message-ID: <19432468.1164222363169.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 11:06:03 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-720?page=comments#action_12452019 ] 
            
Doug Cutting commented on HADOOP-720:
-------------------------------------

We should not maintain documentation in MS Word.  This should either be hand-editted HTML or XML, of if we wish to use a WSYWIG editor, then we should store the document in ODF or some other open format.  The original format that we maintain should be easy for all to edit.

Is there a reason not to use Forrest, and include this in the site documents?  Forrest documentation is written in XML, but PDF is produced automatically along with HTML.

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture.html, HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 19:12:24 2006
Return-Path: 
 <hadoop-dev-return-5326-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12841 invoked from network); 22 Nov 2006 19:12:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 19:12:24 -0000
Received: (qmail 77155 invoked by uid 500); 22 Nov 2006 19:12:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76914 invoked by uid 500); 22 Nov 2006 19:12:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76905 invoked by uid 99); 22 Nov 2006 19:12:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:12:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:12:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 456197142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 11:12:03 -0800 (PST)
Message-ID: <29892501.1164222723281.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 11:12:03 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-720?page=comments#action_12452021 ] 
            
dhruba borthakur commented on HADOOP-720:
-----------------------------------------

Got It. I will switch to Forrest.




> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture.html, HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 19:16:23 2006
Return-Path: 
 <hadoop-dev-return-5327-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13565 invoked from network); 22 Nov 2006 19:16:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 19:16:23 -0000
Received: (qmail 81182 invoked by uid 500); 22 Nov 2006 19:16:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81155 invoked by uid 500); 22 Nov 2006 19:16:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81146 invoked by uid 99); 22 Nov 2006 19:16:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:16:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:16:22 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 00A917142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 11:16:02 -0800 (PST)
Message-ID: <12485261.1164222962000.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 11:16:01 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-744) The site docs are not included in the
 release tar file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The site docs are not included in the release tar file
------------------------------------------------------

                 Key: HADOOP-744
                 URL: http://issues.apache.org/jira/browse/HADOOP-744
             Project: Hadoop
          Issue Type: Bug
          Components: documentation
    Affects Versions: 0.8.0
            Reporter: Nigel Daley


The top-level site directory should be included somewhere in the release, perhaps inside the docs directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 19:18:09 2006
Return-Path: 
 <hadoop-dev-return-5328-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14207 invoked from network); 22 Nov 2006 19:18:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 19:18:09 -0000
Received: (qmail 84251 invoked by uid 500); 22 Nov 2006 19:18:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84226 invoked by uid 500); 22 Nov 2006 19:18:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84217 invoked by uid 99); 22 Nov 2006 19:18:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:18:18 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:18:06 -0800
Received: from [10.0.1.2] (snvvpn2-10-72-77-c106.corp.yahoo.com
 [10.72.77.106])
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kAMJHYZn062036
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 11:17:34 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=pg26rrygUKRzgQSqt6LBzQb8WPitvD2xdE/nB7xM+lUpIEP6Q1grhgglC3Fw4+HO
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <22431852.1164220863992.JavaMail.jira@brutus>
References: <22431852.1164220863992.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AE39961C-E6CF-49C8-9593-0855D6575346@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Nigel Daley <ndaley@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-371) ant tar should package contrib
 jars
Date: Wed, 22 Nov 2006 11:17:29 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

The default classpath problem should be fixed by http:// 
issues.apache.org/jira/browse/HADOOP-700.

Along with the contrib javadoc, do you also want the example javadoc  
mixed in with the api docs as it currently is?  In my mind, the  
examples pollute the "All Known Implementing Classes" and "Direct  
Known Subclasses" sections of the api javadoc.

The site docs are not currently included in the release tar file.   
I've filed http://issues.apache.org/jira/browse/HADOOP-744 to capture  
this bug.  I like the redirect idea for a top-level index.html.


On Nov 22, 2006, at 10:41 AM, Doug Cutting (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-371? 
> page=comments#action_12452011 ]
>
> Doug Cutting commented on HADOOP-371:
> -------------------------------------
>
> I believe smallJobsBenchmark was initially placed in contrib to  
> keep it in a separate jar, not on the default classpath.  So  
> wherever it is moved, it should retain that property.
>
> I would prefer putting the contrib javadoc together with the main  
> javadoc, as is done in Lucene:
>
> http://lucene.apache.org/java/docs/api/overview-summary.html
>
> As for a top-level index.html, should that really differ from site/ 
> index.html?  That's included in releases and links to everything  
> you mention, I think.  Perhaps we should simply add an index.html  
> with a meta-redirect to that page.  Lucene does this:
>
> http://svn.apache.org/viewvc/lucene/java/trunk/index.html?view=markup
>
> (Like the last-modified date on that one?)
>
>
>> ant tar should package contrib jars
>> -----------------------------------
>>
>>                 Key: HADOOP-371
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-371
>>             Project: Hadoop
>>          Issue Type: Improvement
>>            Reporter: Michel Tourn
>>         Attachments: build.tarcontrib.patch, contribbuild.patch
>>
>>
>> From Hadoop-356:
>>> I note that the contrib packages are not included in  
>>> distributions (the "tar" target).
>>> They probably should be.  Michel, would you like to modify "tar"  
>>> to include the contrib code?
>>> This should be done in a separate bug.
>> OK.
>> This packaging is done in target deploy-contrib.
>> So I can just add a dependency to the top-level tar target:
>> <!-- Make release tarball 
>> (s)                                               -->
>> <target name="tar" depends="package, deploy-contrib">
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Wed Nov 22 19:24:24 2006
Return-Path: 
 <hadoop-dev-return-5329-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16875 invoked from network); 22 Nov 2006 19:24:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 19:24:24 -0000
Received: (qmail 94300 invoked by uid 500); 22 Nov 2006 19:24:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94268 invoked by uid 500); 22 Nov 2006 19:24:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94256 invoked by uid 99); 22 Nov 2006 19:24:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:24:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:24:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 346167142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 11:24:03 -0800 (PST)
Message-ID: <7283155.1164223443212.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 11:24:03 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-744) The site docs are not included in
 the release tar file
In-Reply-To: <12485261.1164222962000.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-744?page=comments#action_12452027 ] 
            
Doug Cutting commented on HADOOP-744:
-------------------------------------

Perhaps the site directory should be renamed docs, so that it has the same name in releases and in subversion.

> The site docs are not included in the release tar file
> ------------------------------------------------------
>
>                 Key: HADOOP-744
>                 URL: http://issues.apache.org/jira/browse/HADOOP-744
>             Project: Hadoop
>          Issue Type: Bug
>          Components: documentation
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>
> The top-level site directory should be included somewhere in the release, perhaps inside the docs directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 19:29:26 2006
Return-Path: 
 <hadoop-dev-return-5330-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18043 invoked from network); 22 Nov 2006 19:29:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 19:29:26 -0000
Received: (qmail 1550 invoked by uid 500); 22 Nov 2006 19:29:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1516 invoked by uid 500); 22 Nov 2006 19:29:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1507 invoked by uid 99); 22 Nov 2006 19:29:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:29:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:29:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 75BA871429F
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 11:29:04 -0800 (PST)
Message-ID: <14092841.1164223744479.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 11:29:04 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-738) dfs get or copyToLocal should not
 copy crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-738?page=comments#action_12452029 ] 
            
Konstantin Shvachko commented on HADOOP-738:
--------------------------------------------

We plan to remove crc files as separate entities replacing them by
per block crcs on data-nodes. Do we still want to support crc files
just for local fs after that? If not then Milinds solution seems right.


> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 19:38:45 2006
Return-Path: 
 <hadoop-dev-return-5331-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20001 invoked from network); 22 Nov 2006 19:38:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 19:38:45 -0000
Received: (qmail 16704 invoked by uid 500); 22 Nov 2006 19:38:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16668 invoked by uid 500); 22 Nov 2006 19:38:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16654 invoked by uid 99); 22 Nov 2006 19:38:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:38:53 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.151.94.5] (HELO megs8.100mwh.com) (209.151.94.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:38:40 -0800
Received: from meetsawglad.corp.yahoo.com ([66.228.162.219])
	by megs8.100mwh.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.52)
	id 1GmxvH-00041b-24
	for hadoop-dev@lucene.apache.org; Wed, 22 Nov 2006 12:38:20 -0700
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <42DA89B2-F019-41E7-85B0-844FD2726BFB@yahoo-inc.com>
References: <7084700.1164212703237.JavaMail.jira@brutus>
 <42DA89B2-F019-41E7-85B0-844FD2726BFB@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <80E3F22D-276F-460A-AE87-D0D0E0A03033@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Owen O'Malley <owen@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-639) task cleanup messages can get
 lost, causing task trackers to keep tasks forever
Date: Wed, 22 Nov 2006 11:38:26 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-AntiAbuse: This header was added to track abuse,
 please include it with any abuse report
X-AntiAbuse: Primary Hostname - megs8.100mwh.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - yahoo-inc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org


On Nov 22, 2006, at 9:00 AM, Nigel Daley wrote:

> Arun, the proposal looks good.  If the JT always gets a stale seqNo  
> from the TT (because of some unrecoverable problem in the TT), will  
> it send the saved response forever?  Or should there be some  
> maximum resends?

I think that if the SeqNo doesn't match, it shouldn't count for the  
10 minute task tracker timeout. So if a task tracker gets stuck, it  
will get lost in 10 minutes.

> Also, when the JT is resending a JTResponse, can it add or change  
> the list of actions?  Or do they need to be identical?

For a first pass I'd require that they be identical. If the actions  
change, you need to assign a new SeqNo and track both the old and new  
SeqNo. Furthermore, piling more work on a task tracker that is  
running behind doesn't sound like a good strategy.

> Is it possible that a TT can get the same JTResponse more than  
> once?  If so, does the TT need to recognize this?

No. The RPC framework and the fact that only one task will be sending  
heartbeats will prevent that.

-- Owen

From MAILER-DAEMON Wed Nov 22 19:45:26 2006
Return-Path: 
 <hadoop-dev-return-5332-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22182 invoked from network); 22 Nov 2006 19:45:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 19:45:26 -0000
Received: (qmail 29093 invoked by uid 500); 22 Nov 2006 19:45:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29058 invoked by uid 500); 22 Nov 2006 19:45:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29049 invoked by uid 99); 22 Nov 2006 19:45:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:45:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:45:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A755A7142C3
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 11:45:04 -0800 (PST)
Message-ID: <10618106.1164224704682.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 11:45:04 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-738) dfs get or copyToLocal should not
 copy crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-738?page=comments#action_12452033 ] 
            
Doug Cutting commented on HADOOP-738:
-------------------------------------

> Do we still want to support crc files [ ...]

MapReduce data spends a lot of time in memory (while sorting) and on local disks.  Most checksum errors folks see are from local disks during sorting, not HDFS.  So, yes, we'll still need it.

And per-block checksums are different.  They're not end-to-end.  Currently we checksum the data as it is written to the output stream's buffer, and validate it as it is read from the input stream's buffer.  A lot can happen between that time and it winding up in a DFS block.  To replace this we'd ideally want to still compute the checksum as it is written, transmit it along with the block to datanodes, then transmit it back to the client when the data is read, and verify as it is read.  We'd also need sub-block checksums, not per-block, so that one can seek without checksumming an entire block.  Yes, TCP does checksums, but memory errors can be introduced on either end outside of the TCP stack, and, if blocks are temporarily stored on local disk, it can also be a source of block corruption.  So getting rid of CRC files for even HDFS will take more than just per-block checksums on datanodes.

> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 22:14:25 2006
Return-Path: 
 <hadoop-dev-return-5333-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67209 invoked from network); 22 Nov 2006 22:14:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 22:14:25 -0000
Received: (qmail 53257 invoked by uid 500); 22 Nov 2006 22:14:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53234 invoked by uid 500); 22 Nov 2006 22:14:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53225 invoked by uid 99); 22 Nov 2006 22:14:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 14:14:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 14:14:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D344D7142D1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 14:14:03 -0800 (PST)
Message-ID: <12840193.1164233643862.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 14:14:03 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-571) Path should use URI syntax
In-Reply-To: <6678550.1159825879600.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-571?page=all ]

Doug Cutting updated HADOOP-571:
--------------------------------

    Attachment: uri3.patch

Another update.  This now works correctly on Windows.  However the contrib/streaming unit tests now fail.  My suspicion is that streaming uses path.toString() on paths, then process the strings to create new paths.  Such code will likely break, since path syntax has changed.  It's better to manipulate Paths with Path methods...

> Path should use URI syntax
> --------------------------
>
>                 Key: HADOOP-571
>                 URL: http://issues.apache.org/jira/browse/HADOOP-571
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>         Attachments: uri.patch, uri2.patch, uri3.patch
>
>
> The following changes are proposed:
> 1. Add a factory/registry of FileSystem implementations.  Given a protocol, hostname and port, it should be possible to get a FileSystem implementation.
> 2. Path's constructor should accept URI-formatted strings & a configuration.
> 3. A new Path method should be added: FileSystem.getFileSystem().  This returns the filesystem named in the path or the default configured filesystem.
> 4. Most methods which currently take FileSystem and Path parameters can be changed to take only Path.
> 5. Many FileSystem operations (create, open, delete, list, etc.) can become convenience methods on Path.
> 6. A URLStreamHandler can be defined in terms of the FileSystem API, so that URLs for any protocol with a registered FileSystem implementation can be accessed with a java.net.URL, permitting FileSystem implementations to be used on the classpath, etc.
> It is tempting to try to replace Path with java.net.URL, but URL's methods are insufficient for mapreduce.  We require directory listings, random access, location hints, etc., which are not supported by existing URLStreamHandler implementations.  But we can expose all FileSystem implementations for access with java.net.URL.
> (From a brainstorm with Owen.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 22:16:25 2006
Return-Path: 
 <hadoop-dev-return-5334-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67933 invoked from network); 22 Nov 2006 22:16:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 22:16:25 -0000
Received: (qmail 58850 invoked by uid 500); 22 Nov 2006 22:16:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58830 invoked by uid 500); 22 Nov 2006 22:16:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58821 invoked by uid 99); 22 Nov 2006 22:16:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 14:16:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 14:16:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DE39971429F
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 14:16:03 -0800 (PST)
Message-ID: <6347040.1164233763907.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 14:16:03 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-736) Roll back Jetty6.0.1 to Jetty5.1.4
In-Reply-To: <25654499.1164007503335.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-736?page=comments#action_12452059 ] 
            
Owen O'Malley commented on HADOOP-736:
--------------------------------------

I tried:

% svn merge -r 472202:472201 .
% svn merge -r 472349:472348 .

and the cluster works and runs jobs.

> Roll back Jetty6.0.1 to Jetty5.1.4
> ----------------------------------
>
>                 Key: HADOOP-736
>                 URL: http://issues.apache.org/jira/browse/HADOOP-736
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: jetty5.1.4.patch, jettyfiles-5.1.4.tar.gz
>
>
> There seems to be a problem with the current version of Jetty (6.0.1) in the case where we are using it for serving map outputs. It becomes very slow after serving a few outputs and doesn't recover from that state. Tried with the current release of Jetty - 6.1.0(pre1), but the problem seems to be there even with that release. So roll back to the previous Jetty version (5.1.4) seems to be right thing to do for now. This is the URL for the Jira issue on Jetty's performance issue: 
> http://jira.codehaus.org/browse/JETTY-177

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 22:28:28 2006
Return-Path: 
 <hadoop-dev-return-5335-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70352 invoked from network); 22 Nov 2006 22:28:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 22:28:28 -0000
Received: (qmail 74832 invoked by uid 500); 22 Nov 2006 22:28:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74626 invoked by uid 500); 22 Nov 2006 22:28:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74615 invoked by uid 99); 22 Nov 2006 22:28:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 14:28:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 14:28:26 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1AB3B7142D2
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 14:28:06 -0800 (PST)
Message-ID: <4677911.1164234486106.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 14:28:06 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-736) Roll back Jetty6.0.1 to Jetty5.1.4
In-Reply-To: <25654499.1164007503335.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-736?page=all ]

Doug Cutting updated HADOOP-736:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks!

> Roll back Jetty6.0.1 to Jetty5.1.4
> ----------------------------------
>
>                 Key: HADOOP-736
>                 URL: http://issues.apache.org/jira/browse/HADOOP-736
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>             Fix For: 0.9.0
>
>         Attachments: jetty5.1.4.patch, jettyfiles-5.1.4.tar.gz
>
>
> There seems to be a problem with the current version of Jetty (6.0.1) in the case where we are using it for serving map outputs. It becomes very slow after serving a few outputs and doesn't recover from that state. Tried with the current release of Jetty - 6.1.0(pre1), but the problem seems to be there even with that release. So roll back to the previous Jetty version (5.1.4) seems to be right thing to do for now. This is the URL for the Jira issue on Jetty's performance issue: 
> http://jira.codehaus.org/browse/JETTY-177

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 22:40:26 2006
Return-Path: 
 <hadoop-dev-return-5336-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74662 invoked from network); 22 Nov 2006 22:40:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 22:40:26 -0000
Received: (qmail 88830 invoked by uid 500); 22 Nov 2006 22:40:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88805 invoked by uid 500); 22 Nov 2006 22:40:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88796 invoked by uid 99); 22 Nov 2006 22:40:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 14:40:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 14:40:25 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 48BC97142D1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 14:40:05 -0800 (PST)
Message-ID: <1227783.1164235205295.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 14:40:05 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-739) TestIPC occassionally fails with
 BindException
In-Reply-To: <7568889.1164141243464.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-739?page=all ]

Doug Cutting updated HADOOP-739:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Nigel!

> TestIPC occassionally fails with BindException
> ----------------------------------------------
>
>                 Key: HADOOP-739
>                 URL: http://issues.apache.org/jira/browse/HADOOP-739
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-739.patch
>
>
> org.apache.hadoop.ipc.TestIPC.testParallel occassionally fails with
> java.net.BindException: Address already in use
> 	at sun.nio.ch.Net.bind(Native Method)
> 	at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:119)
> 	at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59)
> 	at org.apache.hadoop.ipc.Server$Listener.<init>(Server.java:161)
> 	at org.apache.hadoop.ipc.Server.start(Server.java:607)
> 	at org.apache.hadoop.ipc.TestIPC.testParallel(TestIPC.java:174)
> 	at org.apache.hadoop.ipc.TestIPC.testParallel(TestIPC.java:164)
> My guess is that port 1234 used by TestIPC.testSerial hasn't been cleaned up by the time TestIPC.testParallel tries to use it.  The failure rate of this test seems around 5%.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 22:52:25 2006
Return-Path: 
 <hadoop-dev-return-5337-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79113 invoked from network); 22 Nov 2006 22:52:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 22:52:25 -0000
Received: (qmail 9461 invoked by uid 500); 22 Nov 2006 22:52:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9437 invoked by uid 500); 22 Nov 2006 22:52:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9428 invoked by uid 99); 22 Nov 2006 22:52:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 14:52:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 14:52:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 46A547142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 14:52:03 -0800 (PST)
Message-ID: <27072662.1164235923286.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 14:52:03 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-741) Fix average progress calculation in
 speculative execution of maps + fix pending issues in speculative execution
 of reduces
In-Reply-To: <20910012.1164147781994.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-741?page=all ]

Doug Cutting updated HADOOP-741:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Sanjay!

> Fix average progress calculation in speculative execution of maps + fix pending issues in speculative execution of reduces
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-741
>                 URL: http://issues.apache.org/jira/browse/HADOOP-741
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.9.0
>
>         Attachments: Hadoop-741.patch
>
>
> This issue addresses following  
> 1. Avg progress in speculative execution of map tasks should not divide / maps.length again in JonInProgress.java:331
> 2. Normal tasks should get priority over speculative tasks in reduce. JobInProgress.findNewTask should not break if a spec task is found. 
> 3. Delete directories used by PhasedFileSystem irrespective of whether speculative execution is enable to allow tasks to use PhasedFileSystem independently. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 23:39:23 2006
Return-Path: 
 <hadoop-dev-return-5338-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90093 invoked from network); 22 Nov 2006 23:39:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 23:39:23 -0000
Received: (qmail 75371 invoked by uid 500); 22 Nov 2006 23:39:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75334 invoked by uid 500); 22 Nov 2006 23:39:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75322 invoked by uid 99); 22 Nov 2006 23:39:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 15:39:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 15:39:22 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F38FF7142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 15:39:01 -0800 (PST)
Message-ID: <9757325.1164238741994.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 15:39:01 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-745) NameNode throws FileNotFoundException:
 Parent path does not exist on startup
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

NameNode throws FileNotFoundException: Parent path does not exist on startup
----------------------------------------------------------------------------

                 Key: HADOOP-745
                 URL: http://issues.apache.org/jira/browse/HADOOP-745
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.8.0
            Reporter: Nigel Daley


(with credit to Christian)

The following exception is reported by the namenode upon startup:

2006-11-22 12:18:17,713 ERROR org.apache.hadoop.dfs.NameNode:
java.io.FileNotFoundException: Parent path does not exist: /foo/bar
        at org.apache.hadoop.dfs.FSDirectory$INode.addNode(FSDirectory.java:186)
        at org.apache.hadoop.dfs.FSDirectory.unprotectedMkdir(FSDirectory.java:731)
        at org.apache.hadoop.dfs.FSEditLog.loadFSEdits(FSEditLog.java:254)
        at org.apache.hadoop.dfs.FSImage.loadFSImage(FSImage.java:191)
        at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:321)
        at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:230)
        at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:145)
        at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:137)
        at org.apache.hadoop.dfs.NameNode.main(NameNode.java:585)

Perhaps the 'mkdirs' section

               INode inserted = unprotectedMkdir(cur);
               if (inserted != null) {
                   NameNode.stateChangeLog.debug("DIR* FSDirectory.mkdirs: "
                        +"created directory "+cur );
                   fsImage.getEditLog().logMkDir( inserted );

needs to be synchronized or the unprotectedMkdir method needs to be changed
to allow creating missing parent directories.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 22 23:54:28 2006
Return-Path: 
 <hadoop-dev-return-5339-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95545 invoked from network); 22 Nov 2006 23:54:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 23:54:28 -0000
Received: (qmail 98545 invoked by uid 500); 22 Nov 2006 23:54:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98509 invoked by uid 500); 22 Nov 2006 23:54:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98472 invoked by uid 99); 22 Nov 2006 23:54:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 15:54:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 15:54:22 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 06CC27142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 15:54:02 -0800 (PST)
Message-ID: <3687865.1164239642025.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 15:54:02 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-746) CRC computation and reading should
 move into a nested FileSystem
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

CRC computation and reading should move into a nested FileSystem
----------------------------------------------------------------

                 Key: HADOOP-746
                 URL: http://issues.apache.org/jira/browse/HADOOP-746
             Project: Hadoop
          Issue Type: Improvement
          Components: fs
    Affects Versions: 0.8.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley


Currently FileSystem provides both an interface and a mechanism for computing and checking crc files. I propose splitting the crc code into a nestable FileSystem that like the PhasedFileSystem has a backing FileSystem. Once the Paths are converted to URI, this is fairly natural to express. To use crc files, your uris will look like:

crc://hdfs:%2f%2fhost1:8020/ which is a crc FileSystem with an underlying file system of hdfs://host1:8020

This will allow users to use crc files where they make sense for their application/cluster and get rid of the "raw" methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 23 00:26:26 2006
Return-Path: 
 <hadoop-dev-return-5340-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5058 invoked from network); 23 Nov 2006 00:26:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 00:26:26 -0000
Received: (qmail 35639 invoked by uid 500); 23 Nov 2006 00:26:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35614 invoked by uid 500); 23 Nov 2006 00:26:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35605 invoked by uid 99); 23 Nov 2006 00:26:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 16:26:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 16:26:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AF9C67142C3
	for <hadoop-dev@lucene.apache.org>; Wed, 22 Nov 2006 16:26:04 -0800 (PST)
Message-ID: <24972404.1164241564716.JavaMail.jira@brutus>
Date: Wed, 22 Nov 2006 16:26:04 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-430) http server should die if the
 Datanode fails.
In-Reply-To: <21253528.1154990113889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-430?page=all ]

Wendy Chien reassigned HADOOP-430:
----------------------------------

    Assignee: Wendy Chien

> http server should die if the Datanode fails.
> ---------------------------------------------
>
>                 Key: HADOOP-430
>                 URL: http://issues.apache.org/jira/browse/HADOOP-430
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Wendy Chien
>         Attachments: RegistrationOrder.patch
>
>
> HADOOP-375 changed the order in which a data node registers and starts its http server.
> Current version first starts the http server, then registers. As a result if the registration fails,
> which can happen e.g. if the datanode has illegal storage id (=does not belong to the cluster),
> the http server keeps running, which makes the data node seem running too.
> I think 2 things need to be done.
> 1) Datanode registration should precede the http server startup.
> 2) The http server should shutdown when the datanode fails (in general).
> I am attaching a patch for the first item.
> Does anybody know how the latter can be done in the version of jetty we are on now?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 23 18:55:36 2006
Return-Path: 
 <hadoop-dev-return-5341-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86639 invoked from network); 23 Nov 2006 18:55:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 18:55:36 -0000
Received: (qmail 21181 invoked by uid 500); 23 Nov 2006 18:55:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21139 invoked by uid 500); 23 Nov 2006 18:55:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Delivered-To: moderator for hadoop-dev@lucene.apache.org
Received: (qmail 6317 invoked by uid 99); 23 Nov 2006 04:23:48 -0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of awwy10@gmail.com designates
 66.249.82.229 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=sPxgFmFzKQ1k9kdjC1Xv9jM+CXDjiP3RArsp+ZJrbKVTxsT1LQwcoIzQOyfBojaJocOGK7iEun7ou0MAl1H49SwsLj5k/7t97m9rnj9oszBzw8Dq3AzhBJ3VWjtzc8t/nB6jSW7BbGEd+jXUzOZDq+MDLt3Gr5/BXxCj8n0AR2s=
Message-ID: <14631ae80611222023m20f17749jb8937874218da7af@mail.gmail.com>
Date: Thu, 23 Nov 2006 12:23:15 +0800
From: AaRon <awwy10@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Replication warning
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_48786_11346268.1164255795300"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48786_11346268.1164255795300
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I just began exploring hadoop using standalone operation. My indexing job
ended with the following error and the output directory is not created:

[11:25:29#aaron@melon034] ~/hadoop-0.8.0 >bin/hadoop jar
/home/NGPP/Aaron/nutchwax-0.6.1/nutchwax-0.6.1.jar all inputs outputs test
06/11/23 11:25:38 INFO conf.Configuration: parsing
file:/home/NGPP/Aaron/hadoop-0.8.0/hadoop-default.xml
06/11/23 11:25:38 INFO conf.Configuration: parsing
file:/tmp/hadoop-unjar11027/nutch-default.xml
06/11/23 11:25:39 INFO conf.Configuration: parsing
file:/tmp/hadoop-unjar11027/wax-default.xml
06/11/23 11:25:39 INFO conf.Configuration: parsing
file:/home/NGPP/Aaron/hadoop-0.8.0/conf/mapred-default.xml
06/11/23 11:25:39 INFO ipc.Client:
org.apache.hadoop.io.ObjectWritableConnection culler maxidletime= 1000ms
06/11/23 11:25:39 INFO ipc.Client:
org.apache.hadoop.io.ObjectWritableConnection Culler: starting
061123 112539 importing arcs in inputs to outputs/segments/20061123112539
061123 112539 ImportArcs segment: outputs/segments/20061123112539, src:
inputs, collection: test
06/11/23 11:25:39 INFO conf.Configuration: parsing
file:/home/NGPP/Aaron/hadoop-0.8.0/hadoop-default.xml
06/11/23 11:25:39 INFO conf.Configuration: parsing
file:/tmp/hadoop-unjar11027/nutch-default.xml
06/11/23 11:25:39 INFO conf.Configuration: parsing
file:/tmp/hadoop-unjar11027/wax-default.xml
06/11/23 11:25:39 INFO conf.Configuration: parsing
file:/home/NGPP/Aaron/hadoop-0.8.0/conf/mapred-default.xml
06/11/23 11:25:39 INFO conf.Configuration: parsing
file:/home/NGPP/Aaron/hadoop-0.8.0/conf/mapred-default.xml
06/11/23 11:25:39 INFO conf.Configuration: parsing
file:/home/NGPP/Aaron/hadoop-0.8.0/conf/mapred-default.xml
06/11/23 11:25:39 INFO conf.Configuration: parsing
file:/home/NGPP/Aaron/hadoop-0.8.0/hadoop-default.xml
06/11/23 11:25:41 INFO mapred.JobClient: Running job: job_0001
06/11/23 11:25:42 INFO mapred.JobClient:  map 0% reduce 0%
06/11/23 11:25:51 INFO mapred.JobClient:  map 50% reduce 0%
06/11/23 11:25:59 INFO mapred.JobClient:  map 50% reduce 8%
06/11/23 11:26:08 INFO mapred.JobClient:  map 100% reduce 100%
Exception in thread "main" java.io.IOException: Job failed!
        at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:399)
        at org.archive.access.nutch.ImportArcs.importArcs(ImportArcs.java
:519)
        at org.archive.access.nutch.IndexArcs.doImport(IndexArcs.java:154)
        at org.archive.access.nutch.IndexArcs.doAll(IndexArcs.java:139)
        at org.archive.access.nutch.IndexArcs.doJob(IndexArcs.java:246)
        at org.archive.access.nutch.IndexArcs.main(IndexArcs.java:439)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(
NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(
DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:149)


>>From namenode log, there is a huge number of these warnings generated even
though I have dfs.replication set to 1 in conf/hadoop-site.xml.

WARN org.apache.hadoop.fs.FSNamesystem: Zero targets found,
forbidden1.size=1 forbidden2.size()=0
WARN org.apache.hadoop.fs.FSNamesystem: Replication requested of 2 is larger
than cluster size (1). Using cluster size.

Can anyone advise? Thanks.

-Ron

------=_Part_48786_11346268.1164255795300--

From MAILER-DAEMON Thu Nov 23 22:17:27 2006
Return-Path: 
 <hadoop-dev-return-5342-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24330 invoked from network); 23 Nov 2006 22:17:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 22:17:27 -0000
Received: (qmail 5629 invoked by uid 500); 23 Nov 2006 22:17:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5399 invoked by uid 500); 23 Nov 2006 22:17:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5390 invoked by uid 99); 23 Nov 2006 22:17:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 14:17:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 14:17:26 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E017471429F
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Nov 2006 14:17:05 -0800 (PST)
Message-ID: <14065552.1164320225915.JavaMail.jira@brutus>
Date: Thu, 23 Nov 2006 14:17:05 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
In-Reply-To: <30411461.1163635597099.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-728?page=comments#action_12452337 ] 
            
Sanjay Dahiya commented on HADOOP-728:
--------------------------------------

In case -reducer NONE is specified, useSingleSideOutputURI_ flag is true ( PipeMapred.java:332), causing the value given in -output <path> to be treated as the output file for map task [PipeMapRed.java:261]. 

It probably assumes that in reducer NONE, there will be no reduce output generated in DFS and map tasks writing to DFS use the same assumption as the code for executing external commands lies in configure(). 

The change I plan to make is to treat <path> as a directory name in case of -reduce NONE, and use a unique suffix as in PipeMapRed.java:268, which includes task id in map output file.

> Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-728
>                 URL: http://issues.apache.org/jira/browse/HADOOP-728
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: Sanjay Dahiya
>
> a) a file is create for the output instead of a directory.
> b) there is no way to understand what is going on from the client output
> I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
> ~

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 23 22:23:25 2006
Return-Path: 
 <hadoop-dev-return-5343-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25451 invoked from network); 23 Nov 2006 22:23:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 22:23:25 -0000
Received: (qmail 9783 invoked by uid 500); 23 Nov 2006 22:23:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9549 invoked by uid 500); 23 Nov 2006 22:23:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9540 invoked by uid 99); 23 Nov 2006 22:23:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 14:23:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 14:23:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E424471429F
	for <hadoop-dev@lucene.apache.org>; Thu, 23 Nov 2006 14:23:03 -0800 (PST)
Message-ID: <14647369.1164320583931.JavaMail.jira@brutus>
Date: Thu, 23 Nov 2006 14:23:03 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
In-Reply-To: <30411461.1163635597099.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-728?page=all ]

Sanjay Dahiya updated HADOOP-728:
---------------------------------

    Comment: was deleted

> Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-728
>                 URL: http://issues.apache.org/jira/browse/HADOOP-728
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: Sanjay Dahiya
>
> a) a file is create for the output instead of a directory.
> b) there is no way to understand what is going on from the client output
> I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
> ~

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 24 11:17:27 2006
Return-Path: 
 <hadoop-dev-return-5344-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86628 invoked from network); 24 Nov 2006 11:17:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2006 11:17:27 -0000
Received: (qmail 75267 invoked by uid 500); 24 Nov 2006 11:17:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75219 invoked by uid 500); 24 Nov 2006 11:17:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75205 invoked by uid 99); 24 Nov 2006 11:17:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 03:17:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 03:17:25 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 50E817141E4
	for <hadoop-dev@lucene.apache.org>; Fri, 24 Nov 2006 03:17:05 -0800 (PST)
Message-ID: <23428764.1164367025328.JavaMail.jira@brutus>
Date: Fri, 24 Nov 2006 03:17:05 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
In-Reply-To: <30411461.1163635597099.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-728?page=comments#action_12452419 ] 
            
Sanjay Dahiya commented on HADOOP-728:
--------------------------------------

planning to make following changes in streaming for this - 

1. Use PhasedFileSystem for mapoutput  in case of reducer -NONE. Its currently package protected I have made it public for streaming to be able to use it. This enables maps to generate multiple files with side effect and avoids duplicate functionality. 

2. Currently in case of reducer -NONE, the output of maps is written explicitly to a DFS file, so all map tasks try to write to the same file in DFS. (@see PipeMapRed.java:264) causing this problem. This part is changed to treat <-output> as  directory and map output goes in this. Each map output file name includes the task id to avoid conflict, PhasedFileSystem now takes care of speculative maps trying to write to same DFS file. 

Comments?


> Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-728
>                 URL: http://issues.apache.org/jira/browse/HADOOP-728
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: Sanjay Dahiya
>
> a) a file is create for the output instead of a directory.
> b) there is no way to understand what is going on from the client output
> I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
> ~

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Nov 24 13:59:02 2006
Return-Path: 
 <hadoop-dev-return-5345-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29941 invoked from network); 24 Nov 2006 13:59:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2006 13:59:02 -0000
Received: (qmail 84340 invoked by uid 500); 24 Nov 2006 13:59:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84094 invoked by uid 500); 24 Nov 2006 13:59:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84085 invoked by uid 99); 24 Nov 2006 13:59:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 05:59:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of arale.jianglei@gmail.com
 designates 64.233.162.204 as permitted sender)
Received: from [64.233.162.204] (HELO nz-out-0102.google.com) (64.233.162.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 05:58:57 -0800
Received: by nz-out-0102.google.com with SMTP id i1so430236nzh
        for <hadoop-dev@lucene.apache.org>;
 Fri, 24 Nov 2006 05:58:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:subject:from:to:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        b=k808eiiHWiiPiYPPumQdls6WlvwroJv0NhHxuRLSbG2/o6Wno9mya7K16egVS7Eyf6Gj0HEIt8IWJQtJpuuUiF/+BFxKOkcPcDqba5fhnkZXdesQiPA9GOvlaDd34eW49HmW/nvBCQb/hoQ33zGMntBgA1+NLgBkHmCkzCuwr4A=
Received: by 10.64.241.3 with SMTP id o3mr16569988qbh.1164376709879;
        Fri, 24 Nov 2006 05:58:29 -0800 (PST)
Received: from unknown-10-62-132-95.yahoo.com ( [202.165.107.100])
        by mx.google.com with ESMTP id e15sm17682192qba.2006.11.24.05.58.27;
        Fri, 24 Nov 2006 05:58:28 -0800 (PST)
Subject: Can I set more than one dfs.name.dir?
From: "arale.jianglei@gmail.com" <arale.jianglei@gmail.com>
To: hadoop-dev@lucene.apache.org
Content-Type: text/plain
Date: Fri, 24 Nov 2006 21:58:23 +0800
Message-Id: <1164376703.18576.7.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all:
	I found that I can set more than one dfs.name.dir in hadoop-site.xml
like below:
<property>
  <name>dfs.name.dir</name>
  <value>/opt/hadoop/dfs/name1</value>
  <value>/opt/..../name2</value>
  <description>Determines where on the local filesystem the NDFS name
node
     should store the name table.</description>
</property>

Does this mean I have a backup of my namenode info? Or this is for some
other special reasons?

Best Regards,

Jianglei
2006-11-24


From MAILER-DAEMON Sat Nov 25 08:12:06 2006
Return-Path: 
 <hadoop-dev-return-5346-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17822 invoked from network); 25 Nov 2006 08:12:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2006 08:12:06 -0000
Received: (qmail 90354 invoked by uid 500); 25 Nov 2006 08:12:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90318 invoked by uid 500); 25 Nov 2006 08:12:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90309 invoked by uid 99); 25 Nov 2006 08:12:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 00:12:14 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 00:12:02 -0800
Received: from coatspeaklx (coatspeak-lx.corp.yahoo.com [10.72.110.26])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kAP8BYVm003772
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Sat, 25 Nov 2006 00:11:34 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
	b=eCwGpzVVNg8KZ8c72bsmXvWqA2OxmSwuIGhty06B+x2DM9BSz8opPZ2W72J4m+3g
From: "Dhruba Borthakur" <dhruba@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: Can I set more than one dfs.name.dir?
Date: Sat, 25 Nov 2006 00:11:34 -0800
Message-ID: <003001c71069$5275f0a0$639115ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <1164376703.18576.7.camel@localhost.localdomain>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccP0LPyXPvZKL+2TH2PWn8MHbeulAAmEyhg
X-Virus-Checked: Checked by ClamAV on apache.org

Your reasoning is absolutely correct. The Namenode writes its metadata to
all these directories. This setting automatically replicates the Namenode
metadata to multiple locations.

Thanks,
dhruba 

-----Original Message-----
From: arale.jianglei@gmail.com [mailto:arale.jianglei@gmail.com] 
Sent: Friday, November 24, 2006 5:58 AM
To: hadoop-dev@lucene.apache.org
Subject: Can I set more than one dfs.name.dir?

Hi all:
	I found that I can set more than one dfs.name.dir in hadoop-site.xml
like below:
<property>
  <name>dfs.name.dir</name>
  <value>/opt/hadoop/dfs/name1</value>
  <value>/opt/..../name2</value>
  <description>Determines where on the local filesystem the NDFS name
node
     should store the name table.</description>
</property>

Does this mean I have a backup of my namenode info? Or this is for some
other special reasons?

Best Regards,

Jianglei
2006-11-24



From MAILER-DAEMON Mon Nov 27 20:57:21 2006
Return-Path: 
 <hadoop-dev-return-5363-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72841 invoked from network); 27 Nov 2006 20:57:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 20:57:21 -0000
Received: (qmail 40453 invoked by uid 500); 27 Nov 2006 20:57:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40246 invoked by uid 500); 27 Nov 2006 20:57:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Delivered-To: moderator for hadoop-dev@lucene.apache.org
Received: (qmail 68733 invoked by uid 99); 25 Nov 2006 19:51:34 -0000
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Date: Sat, 25 Nov 2006 20:51:00 +0100
Message-Id: <J9AXT0$E4F3E8F02192B33F0BC34105F9B9AFA3@libero.it>
Subject: distributed search
MIME-Version: 1.0
X-Sensitivity: 3
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
From: "Giuseppe Cannella" <cannella72@libero.it>
To: "hadoop-dev" <hadoop-dev@lucene.apache.org>
X-XaM3-API-Version: 4.3 (R1) (B3pl17)
X-SenderIP: 88.46.81.18
X-Scanned: with antispam and antivirus automated system at libero.it
X-Virus-Checked: Checked by ClamAV on apache.org


in http://wiki.apache.org/nutch/NutchHadoopTutorial page

at 'Distributed Searching' section 
i read:

"On each of the search servers you would use the startup the distributed =
search server by using the nutch server command like this:
bin/nutch server 1234 /d01/local/crawled"

but /d01/local/crawled has been created only for the first server, how co=
uld i create it for all server? 
if i use "bin/hadoop dfs -copyToLocal crawled /d01/local/" on every serve=
r, the search finds N identical results (where N is how many servers are =
into the cluster)=0A=0A=0A-----------------------------------------------=
-------=0APassa a Infostrada. ADSL e Telefono senza limiti e senza canone=
 Telecom=0Ahttp://click.libero.it/infostrada25nov06=0A


From MAILER-DAEMON Sat Nov 25 23:57:40 2006
Return-Path: 
 <hadoop-dev-return-5347-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85672 invoked from network); 25 Nov 2006 23:57:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2006 23:57:40 -0000
Received: (qmail 20772 invoked by uid 500); 25 Nov 2006 23:57:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20746 invoked by uid 500); 25 Nov 2006 23:57:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20736 invoked by uid 99); 25 Nov 2006 23:57:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 15:57:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 15:57:29 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E93557142D1
	for <hadoop-dev@lucene.apache.org>; Sat, 25 Nov 2006 15:57:03 -0800 (PST)
Message-ID: <23602921.1164499023952.JavaMail.jira@brutus>
Date: Sat, 25 Nov 2006 15:57:03 -0800 (PST)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-738) dfs get or copyToLocal should not
 copy crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-738?page=comments#action_12452613 ] 
            
eric baldeschwieler commented on HADOOP-738:
--------------------------------------------

Well the discussion does seem to be on the topic of the subject.  As discussed in the thread there are several reasons to consider the change.  Enhancing the description could be done.

I agree that we probably should fix the interaction of the CRC files in the current copy too.  Although renaming them so they are visible would help a lot no mater what.

I also agree that we will need sub-block CRC info even when we move the CRC data to be a block attribute.

Moving multi-terrabyte objects to local disk is not the prototypical use of Hadoop in our environment.  It is certainly not the prototypical reason we invoke -get or -copyToLocal.

We don't seem to be converging here.  Maybe we should create two commands.  One which is typically used for lightweight copies and does not write CRCs and one which does and has an inverse command that validates the CRCs on import.  Although what happens when a CRC does not match on import?  The CRC exporter would create visible CRCs and would have well defined semantics for overwriting files.  (Failing if the target directory would avoid the problem in the description ...)

> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Nov 26 00:09:24 2006
Return-Path: 
 <hadoop-dev-return-5348-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87714 invoked from network); 26 Nov 2006 00:09:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2006 00:09:24 -0000
Received: (qmail 28082 invoked by uid 500); 26 Nov 2006 00:09:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28044 invoked by uid 500); 26 Nov 2006 00:09:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28034 invoked by uid 99); 26 Nov 2006 00:09:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 16:09:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 16:09:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 41A067142D1
	for <hadoop-dev@lucene.apache.org>; Sat, 25 Nov 2006 16:09:03 -0800 (PST)
Message-ID: <20525325.1164499743266.JavaMail.jira@brutus>
Date: Sat, 25 Nov 2006 16:09:03 -0800 (PST)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-746) CRC computation and reading should
 move into a nested FileSystem
In-Reply-To: <3687865.1164239642025.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-746?page=comments#action_12452615 ] 
            
eric baldeschwieler commented on HADOOP-746:
--------------------------------------------

interesting.

This seems like it would have advantages in how we manage temporary storage and such.  BUT... I think HDFS needs to support CRCs for all files "below the covers".  I don't think we should rip that out and leave it to use code to invoke CRCs.  

The FS needs CRCs to manage replication and validation and should have a uniform internal mechanism.  I don't know that it is necessary that these CRCs be user accessible, but I do think that it is necessary that all blocks CRC in the same simple way. 

Nor is that URL very friendly...  Also nominally the URI prefix is supposted to specify the protocol / transport, right?  CRC seems like it belongs below the transport, not wrapping it.  odd.

> CRC computation and reading should move into a nested FileSystem
> ----------------------------------------------------------------
>
>                 Key: HADOOP-746
>                 URL: http://issues.apache.org/jira/browse/HADOOP-746
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>
> Currently FileSystem provides both an interface and a mechanism for computing and checking crc files. I propose splitting the crc code into a nestable FileSystem that like the PhasedFileSystem has a backing FileSystem. Once the Paths are converted to URI, this is fairly natural to express. To use crc files, your uris will look like:
> crc://hdfs:%2f%2fhost1:8020/ which is a crc FileSystem with an underlying file system of hdfs://host1:8020
> This will allow users to use crc files where they make sense for their application/cluster and get rid of the "raw" methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Nov 26 18:26:53 2006
Return-Path: 
 <hadoop-dev-return-5349-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46105 invoked from network); 26 Nov 2006 18:26:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2006 18:26:53 -0000
Received: (qmail 91706 invoked by uid 500); 26 Nov 2006 18:27:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91680 invoked by uid 500); 26 Nov 2006 18:27:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91671 invoked by uid 99); 26 Nov 2006 18:27:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 10:27:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 10:26:51 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 20259714359
	for <hadoop-dev@lucene.apache.org>; Sun, 26 Nov 2006 10:25:56 -0800 (PST)
Message-ID: <18871736.1164565556128.JavaMail.jira@brutus>
Date: Sun, 26 Nov 2006 10:25:56 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12453449 ] 
            
Milind Bhandarkar commented on HADOOP-227:
------------------------------------------

Proposal for Checkpointing the Namesystem State in DFS
------------------------------------------------------

Currently, the namesystem state in memory consists of a tree
where the leaf nodes are files and internal nodes are directories.
This is serialized onto a disk file once when the namenode starts
up. During the namenode operation, the state changes are made in
memory, but the on-disk copy of the image is not modified. Instead,
a transaction log (called edits log) for the namesystem changes
is stored on the disk. When the namenode starts up again, it merges
the on-disk image and the edits log, and writes out the updated image.

While the namenode is in operation, the edits log keeps on growing,
irrespective of the size of the namesystem. For example, if a single file
is constantly created and deleted, the namesystem state will be of
constant size, however, the edits log will keep on growing.

Therefore it is necessary to periodically checkpoint the current state
of the namesystem, and to purge the edits log.

Image File Format on Disk
-------------------------

The image on the disk consists of a header followed by a list of
path entries, followed by known datanode entries. The header consists
of DFS version number, namespace ID, and number of path entries.
Each path entry corresponds to either a file or a directory. A file entry
contains the full path of the file, it's replication factor, number of
blocks, and a list of block-entries for blocks belonging to that file.
Each block entry consists of blockID and length of the block.
A directory entry consists of full path of the directory, replication
factor (which, for a directory is always 0), followed by 0. This last
0 distinguishes between files and directories.
The datanodes section of the image begins with number of known datanodes
from the datanode map that the FSNameSystem maintains, followed by
serialized form of each DatanodeDescriptor in that map.

Edits Log File Format on Disk
-----------------------------

The edits log contains a list of namespace transactions. Each transaction
begins with a transaction op-code that signifies type of the transaction.
There are seven types of transactions, and each type contains different
properties associated with it. These types of transactions and their
associated properties are listed
below:

1. Add File : Full path of the file, replication factor, list of blocks
2. Rename : Old path of the file, new path of the file
3. Delete : Path of the file deleted
4. Make Directory : Path of the created directory
5. Set Replication : Path of the file, new replication factor
6. Add Datanode : datanode descriptor of the node
7. Remove Datanode : datanode ID of the node

When should we Checkpoint ?
---------------------------

Checkpointing decision could be based on elapsed time (e.g. every hour)
or based on number of transactions (e.g. every 100,000 changes to the
namesystem). Since the later is approximately reflected in the size of
the edits log, this decision could also be based on the size of the
edits log. This is preferred since, the cpu and/or memory requirements
of checkpointing are determined by the size of the image as well as
size of the edits log. Also, this choice ensures that an idle
namenode is not checkpointed unnecessarily based on elapsed time.

How should we Checkpoint ?
--------------------------

There are a number of choices here. We describe each choice, and its pros
and cons below.

1. Lock the entire namespace in the main namenode thread, while we save
the entire image on disk.

This would disable all namenode operations while we are checkpointing
the image. That would include processing of heartbeats also, and would
cause datanodes to consider namenode to be dead, and cause cascading
DFS crash.

2. While saving an INode (i.e. path), only lock those nodes in the tree
from root to that node.

This would require extensive changes in the simple locking model used
in the namenode. Currently all the operations that the namenode
performs are fairly inexpensive. Therefore the simple locking model
that locks the entire namespace durung the transaction suffices. With
the new fine-grained locking model, one would need to acquire multiple
locks for each namspace operation, thus incurring additional overhead
for normal operations, which is the common case.

3. Lock the entire namespace while we make an in-memory copy of the
namespace. Hand the copy over to a checkpointing thread, unlock the
namespace.

This would certainly be faster that option 1, since it does not involve
writing the namespace to disk while it is locked. However, it would
require double the amount of virtual memory to hold the namespace
while checkpointing is in progress.

4. Lock the namespace. Rename the edits log. Start a new edits log.
Unlock the namespace. Fork off a separate process, which loads old image
and old edits log, and saves new image.

This method suffers from the same problem of requiring double the virtual
memory as does option 3. In addition, the forked process doubles the
system resources such as open files and sockets.

5. Lock the namespace. Rename the edits log. Start a new edits log.
Unlock the namespace. Start a new thread, which merges old image on disk
with old edits log on disk to create a new image.

One observation that makes this proposal attractive is that the current
in-memory image of the namesystem can be recreated by merging the old
image on the disk with the current edits log. On the face of it, this
method would also suffer from extensive virtual memory requirements,
having to load an entire disk image into memory. However, upon closer
inspection, merging an on-disk image with on-disk edits log can be
achieved with very small memory footprint, if we change the way the image
is stored on disk. These changes and their rationale is explained below.

Each entry in the on-disk image corresponds to a path. The only
requirement on the order of these entries for successfully loading
the image is that the entries corresponding to directories be before
the entries for files within those directories.

If we store the image where entries are sorted by their 'path' field,
clearly entries for directories would be earlier than entries for files
within them. With the sorted image, checkpointing process would involve
in-memory sorting of edit log on the 'path' field, and then merging
the path-related ttransaction one path at a time before writing the
final path record on the new disk image.

Almost all the path-related transactions in the edits log correspond to
a single path. The only exception to this is the 'rename' transaction,
which corresponds to two paths, one old and one new. For files, this
transaction could be split into a pair of transactions that corresponds
to one path each. 'rename old-path new-path' can be split into
'delete old-path' and 'create new-path' for the sake of transaction
logging. Even for directories that are empty, one can do a similar
split. However, for directories that contains files and/or subdirectories
it becomes complicated, because each file/subdirectory under the
renamed directory needs to have a pair of log-entries corresponding
to a 'delete' and 'create'. This will increase the edits log size
by a factor proportional to the number of files in the renamed directory.

One approach to handle the directory rename operation while periodically
checkpointing, is to apply the rename operations both on the on-disk
image, and on the edits log entries previous to the rename operation.
After renaming, though, the image will need to be sorted again according
to the path names. This could be very expensive, since the on-disk image
of a large filesystem (>1PB) could be a few GB.

The edits log would typically be a few Megabytes at the time of
periodic checkpointing, typically much smaller than the image. We take
advantage of this size difference, and an observation about the directory
rename operation, to propose a solution to this problem.

A rename operation "rename srcPath dstPath" in the edits log can be
moved to the end of the edits log, by applying other rename operations
on the edits log entries timestamped after the rename entry. That is,

rename srcPath dstPath

operation can be removed, and 

rename srcPath dstPath
rename tmpPath srcPath

can be appended at the end of the edits log, if we apply the following
rename operations to all edits log entries that occur after the rename
directory operations:

rename srcPath tmpPath
rename dstPath srcPath

This way, we can manipulate the edits log, so that all the rename
directory transactions are moved to the end. Then, we remove these
rename operations into a separate file called the rename-table.

We change the definition of the on-disk image, so that it consists not
only of the sorted list of all paths in the namesystem, but also this
rename-table. When the namenode starts up, it loads the list of paths
into memory to form a filesystem tree, and the applies the rename
operations from the rename-table, to get the final image.

With this modification for handling directory-renames, our periodic
checkpointing algorithm becomes:

Id = On disk image
Rd = Rename table on the disk
Ed = Edits log on the disk

1. Load Ed into memory as a list of edits entries
2. Scan from the end of the edits log in order to find a directory rename
   By applying the transformation described above, move these renames
   towards the end. Do this for all directory renames.
3. Append these rename operation to Rd.
4. Sort the remaining edits log in memory.
5. Merge Id (which is sorted), and sorted Ed, to get a new Id.

The namenode startup procedure is also modified, to be:

1. Load Id, form a root directory tree.
2. For each entry in Rd, apply rename operations on the image.
3. Merge edits log, if exists.
4. Store back the image as a sorted list of paths.
5. Delete renames-table, and edits log.


> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Nov 26 21:03:11 2006
Return-Path: 
 <hadoop-dev-return-5350-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84482 invoked from network); 26 Nov 2006 21:03:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2006 21:03:11 -0000
Received: (qmail 66586 invoked by uid 500); 26 Nov 2006 21:03:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66493 invoked by uid 500); 26 Nov 2006 21:03:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66484 invoked by uid 99); 26 Nov 2006 21:03:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 13:03:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 13:03:03 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 395807142FA
	for <hadoop-dev@lucene.apache.org>; Sun, 26 Nov 2006 13:02:24 -0800 (PST)
Message-ID: <18045719.1164574944232.JavaMail.jira@brutus>
Date: Sun, 26 Nov 2006 13:02:24 -0800 (PST)
From: "Tom White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-574?page=all ]

Tom White updated HADOOP-574:
-----------------------------

    Attachment: HADOOP-574-v2.patch

Please find attached an updated patch that includes a stub implementation of FileSystemStore for the unit tests. The nightly tests should be the only ones that run against S3 (as discussed), but I haven't changed any config to actually make this happen.

The patch also includes updates for many of the remaining TODOs, which were mainly testing and implementing edge cases.

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>         Attachments: dependencies.zip, HADOOP-574-v2.patch, HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Nov 26 21:33:46 2006
Return-Path: 
 <hadoop-dev-return-5351-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89592 invoked from network); 26 Nov 2006 21:33:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2006 21:33:46 -0000
Received: (qmail 90286 invoked by uid 500); 26 Nov 2006 21:33:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90059 invoked by uid 500); 26 Nov 2006 21:33:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90050 invoked by uid 99); 26 Nov 2006 21:33:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 13:33:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 13:33:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 791837142F3
	for <hadoop-dev@lucene.apache.org>; Sun, 26 Nov 2006 13:33:24 -0800 (PST)
Message-ID: <27394526.1164576804493.JavaMail.jira@brutus>
Date: Sun, 26 Nov 2006 13:33:24 -0800 (PST)
From: "Tom White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-574?page=comments#action_12453453 ] 
            
Tom White commented on HADOOP-574:
----------------------------------

As an experiment I modified FileSystem.getNamed() to include a check for s3 (note that this change is not in HADOOP-574-v2.patch):

        if ("local".equals(name)) {
          fs = new LocalFileSystem(conf);
        } else if ("s3".equals(name)) {
          fs = new S3FileSystem(conf);
        } else {
          fs = new DistributedFileSystem(DataNode.createSocketAddr(name), conf);
        }

I then built a hadoop distribution, unpacked, created a hadoop-site.xml wih my S3 keys and bucket name and ran the following in the bin directory:

./hadoop dfs -conf hadoop-site.xml -fs s3 -mkdir /tmp/tom
./hadoop dfs -conf hadoop-site.xml -fs s3 -copyFromLocal s3test.txt /tmp/tom/s3test.txt
./hadoop dfs -conf hadoop-site.xml -fs s3 -copyToLocal /tmp/tom/s3test.txt s3test.copy.txt 
diff s3test.copy.txt s3test.txt
./hadoop dfs -conf hadoop-site.xml -fs s3 -rm /tmp/tom/s3test.txt
./hadoop dfs -conf hadoop-site.xml -fs s3 -rmr /tmp/tom

All the commands succeeded and the diff showed that the files were the same. This was a great sanity check!

This suggests to me that DFSShell is really more general than DFS - perhaps it should be renamed FSShell? 

Next steps - I guess I need to see how the S3 implementation fits with HADOOP-571. Suggestions welcome.

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>         Attachments: dependencies.zip, HADOOP-574-v2.patch, HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 02:06:44 2006
Return-Path: 
 <hadoop-dev-return-5352-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38299 invoked from network); 27 Nov 2006 02:06:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 02:06:44 -0000
Received: (qmail 12930 invoked by uid 500); 27 Nov 2006 02:06:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12693 invoked by uid 500); 27 Nov 2006 02:06:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12684 invoked by uid 99); 27 Nov 2006 02:06:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 18:06:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 18:06:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7290C7142F6
	for <hadoop-dev@lucene.apache.org>; Sun, 26 Nov 2006 18:06:22 -0800 (PST)
Message-ID: <29447577.1164593182466.JavaMail.jira@brutus>
Date: Sun, 26 Nov 2006 18:06:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-681) Adminstrative hook to pull live nodes
 out of a HDFS cluster
In-Reply-To: <29893636.1162789960338.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-681?page=all ]

dhruba borthakur updated HADOOP-681:
------------------------------------

    Attachment: nodedecommission1.patch

This is the first version of code change. Review comments welcome.

> Adminstrative hook to pull live nodes out of a HDFS cluster
> -----------------------------------------------------------
>
>                 Key: HADOOP-681
>                 URL: http://issues.apache.org/jira/browse/HADOOP-681
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: nodedecommission1.patch
>
>
> Introduction
> ------------
> An administrator sometimes needs to bring down a datanode for scheduled maintenance. It would be nice if HDFS can be informed about this event. On receipt of this event, HDFS can take steps so that HDFS data is not lost when the node goes down at a later time.
> Architecture
> -----------
> In the existing architecture, a datanode can be in one of two states: dead or alive. A datanode is alive if its heartbeats are being processed by the namenode. Otherwise that datanode is in dead state. We extend the architecture to introduce the concept of a tranquil state for a datanode.
> A datanode is in tranquil state if:
>     - it cannot be a target for replicating any blocks
>     - any block replica that it currently contains does not count towards the target-replication-factor of that block
> Thus, a node that is in tranquil state can be brought down without impacting the guarantees provided by HDFS.
> The tranquil state is not persisted across namenode restarts. If the namenode restarts then that datanode will go back to being in the dead or alive state.
> The datanode is completely transparent to the fact that it has been labeled as being in tranquil state. It can continue to heartbeat and serve read requests for datablocks.
> DFSShell Design
> -----------------------
> We extend the DFS Shell utility to specify a list of nodes to the namenode.
>     hadoop dfs -tranquil {set|clear|get} datanodename1 [,datanodename2]
> The DFSShell utility sends this list to the namenode. This DFSShell command invoked with the "set" option completes when the list is transferred to the namenode. This command is non-blocking; it returns before the datanode is actually in the tranquil state. The client can then query the state by re-issuing the command with the "get" option. This option will indicate whether the datanode is in tranquil state or is "being tranquiled". The "clear" option is used to transition a tranquil datanode to the alive state. The "clear" option is a no-op if the datanode is not in the "tranquil" state.
> ClientProtocol Design
> --------------------
> The ClientProtocol is the protocol exported by the namenode for its client.
> This protocol is extended to incorporate three new methods:
>    ClientProtocol.setTranquil(String[] datanodes)
>    ClientProtocol.getTranquil(String datanode)
>    ClientProtocol.clearTranquil(String[] datanodes)
> The ProtocolVersion is incremented to prevent conversations between imcompatible clients and servers. An old DFSShell cannot talk to the new NameNode and vice-versa.
> NameNode Design
> -------------------------
> The namenode does the bulk of the work for supporting this new feature.
> The DatanodeInfo object has a new private member named "state". It also has three new member functions:
>     datanodeInfo.tranquilStarted(): start the process of tranquilization
>     datanodeInfo.tranquilCompleted(): node is not in tranquil state
>     datanodeInfo.clearTranquil() : remove tranquilization from node
> The namenode exposes a new API to set and clear tranquil states for a datanode. On receipt of a "set tranquil" command, it invokes datanodeInfo.tranquilStarted().
> The FSNamesystem.chooseTarget() method skips over datanodes that are marked as being in the "tranquil" state. This ensures that tranquil-datanodes are never chosen as targets of replication. The namenode does *not* record
> this operation in either the FsImage or the EditLogs.
> The namenode puts all the blocks from a being-tranquiled node into the neededReplication data structure. Necessary code changes are made to ensure that these blocks get replicated by the regular replication method. As of now, the regular replication code does not distinguish between these blocks and the blocks that are replication candidates because some other datanode might have died. It might be prudent to give different (lower?) weightage to this type of replication requests, but that exercise is deferred to a later date. In this design, replication requests generated because of a node going to a tranquil state are not distinguished from replication requests generated by a datanode going to the dead state.
> The DatanodeInfo object has another new private member named "pendingTranquilCount". This field stores the remaining number of blocks that still remain to be replicated. This field is valid only if the node is in the ets being-tranquiled state.  On receipt of every 'n' heartbeats from the being-tranquiled datanode, the namenode calculates the amount of data that is still remaining to be replicated and updates the "pendingTranquilCount". in the DatanodeInfo.When all the replications complete, the datanode is marked as tranquiled. The number 'n' is selected in such a way that the average heartbeat processing time does not increase appreciably.
> It is possible that the namenode might stop receving heartbeats from a datanode that is being-tranquiled. In this case,   the tranquil flag of the datanode gets cleared. It transitions to the dead state and the normal processing for alive-to-dead transition occurs here.
> Web Interface
> -------------------
> The dfshealth.jsp displays the live nodes, dead nodes, being-tranquiled and tranquil nodes. For nodes in the being-tranquiled state, it displays the percentage of tranquilization completed till now.
> Issues
> --------
> 1. If a request for tranquilization starts getting processed and there aren't enough space available in DFS to complete the necessary replication, then that node might remain in the being-tranquiled state for a long long time. This is not necessarily a bad thing but is there a better option?
> 2. We have opted for not storing cluster configuration information in the persistent image of the file system. (The tranquil state of a datanode may be lost if the namenode restarts).
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 15:06:49 2006
Return-Path: 
 <hadoop-dev-return-5353-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59543 invoked from network); 27 Nov 2006 15:06:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 15:06:49 -0000
Received: (qmail 5457 invoked by uid 500); 27 Nov 2006 15:06:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5373 invoked by uid 500); 27 Nov 2006 15:06:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5322 invoked by uid 99); 27 Nov 2006 15:06:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 07:06:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 07:06:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D4F627142F8
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 07:06:23 -0800 (PST)
Message-ID: <29470493.1164639983869.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 07:06:23 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
In-Reply-To: <30411461.1163635597099.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-728?page=all ]

Sanjay Dahiya updated HADOOP-728:
---------------------------------

    Attachment: Hadoop-728.patch

This patch makes following changes, for review - 
1. Uses phasedFileSystem. 
2. Fixes a bug where if  -mapsideoutput is not defined then it still tried to write to same file. With this patch is -mapsideout is not defined then it uses -output as the output directory and all map tasks create output files in that directory. 

from older documentation -mapsideoutput option should be deprecated, Is anyone using this option or should we remove it?

> Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-728
>                 URL: http://issues.apache.org/jira/browse/HADOOP-728
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-728.patch
>
>
> a) a file is create for the output instead of a directory.
> b) there is no way to understand what is going on from the client output
> I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
> ~

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 19:55:54 2006
Return-Path: 
 <hadoop-dev-return-5354-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49483 invoked from network); 27 Nov 2006 19:55:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 19:55:54 -0000
Received: (qmail 3874 invoked by uid 500); 27 Nov 2006 19:55:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3784 invoked by uid 500); 27 Nov 2006 19:55:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3709 invoked by uid 99); 27 Nov 2006 19:55:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 11:55:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 11:55:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 295337142F9
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 11:55:23 -0800 (PST)
Message-ID: <27032202.1164657323166.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 11:55:23 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-747) RecordIO compiler does not produce
 correct Java code when buffer is used as key or value in map
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

RecordIO compiler does not produce correct Java code when buffer is used as key or value in map
-----------------------------------------------------------------------------------------------

                 Key: HADOOP-747
                 URL: http://issues.apache.org/jira/browse/HADOOP-747
             Project: Hadoop
          Issue Type: Bug
          Components: record
    Affects Versions: 0.8.0
         Environment: All
            Reporter: Milind Bhandarkar
         Assigned To: Milind Bhandarkar
             Fix For: 0.9.0


When buffer type is used as a key type or value type in map, the record IO translator does not produce correct serialization of deserialization code. Patch forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 19:55:55 2006
Return-Path: 
 <hadoop-dev-return-5355-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49515 invoked from network); 27 Nov 2006 19:55:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 19:55:55 -0000
Received: (qmail 4162 invoked by uid 500); 27 Nov 2006 19:55:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4137 invoked by uid 500); 27 Nov 2006 19:55:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4114 invoked by uid 99); 27 Nov 2006 19:55:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 11:55:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 11:55:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 848EC7142F8
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 11:55:24 -0800 (PST)
Message-ID: <20811129.1164657324540.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 11:55:24 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-747) RecordIO compiler does not
 produce correct Java code when buffer is used as key or value in map
In-Reply-To: <27032202.1164657323166.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-747?page=all ]

Work on HADOOP-747 started by Milind Bhandarkar.

> RecordIO compiler does not produce correct Java code when buffer is used as key or value in map
> -----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-747
>                 URL: http://issues.apache.org/jira/browse/HADOOP-747
>             Project: Hadoop
>          Issue Type: Bug
>          Components: record
>    Affects Versions: 0.8.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>
> When buffer type is used as a key type or value type in map, the record IO translator does not produce correct serialization of deserialization code. Patch forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 19:57:44 2006
Return-Path: 
 <hadoop-dev-return-5356-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50988 invoked from network); 27 Nov 2006 19:57:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 19:57:44 -0000
Received: (qmail 9431 invoked by uid 500); 27 Nov 2006 19:57:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9403 invoked by uid 500); 27 Nov 2006 19:57:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9394 invoked by uid 99); 27 Nov 2006 19:57:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 11:57:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 11:57:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9049F7142F8
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 11:57:22 -0800 (PST)
Message-ID: <14116065.1164657442588.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 11:57:22 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-747) RecordIO compiler does not produce
 correct Java code when buffer is used as key or value in map
In-Reply-To: <27032202.1164657323166.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-747?page=all ]

Milind Bhandarkar updated HADOOP-747:
-------------------------------------

    Attachment: record-buffer.patch

Patch attached.

> RecordIO compiler does not produce correct Java code when buffer is used as key or value in map
> -----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-747
>                 URL: http://issues.apache.org/jira/browse/HADOOP-747
>             Project: Hadoop
>          Issue Type: Bug
>          Components: record
>    Affects Versions: 0.8.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: record-buffer.patch
>
>
> When buffer type is used as a key type or value type in map, the record IO translator does not produce correct serialization of deserialization code. Patch forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 19:57:46 2006
Return-Path: 
 <hadoop-dev-return-5357-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51032 invoked from network); 27 Nov 2006 19:57:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 19:57:46 -0000
Received: (qmail 9700 invoked by uid 500); 27 Nov 2006 19:57:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9665 invoked by uid 500); 27 Nov 2006 19:57:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9656 invoked by uid 99); 27 Nov 2006 19:57:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 11:57:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 11:57:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3A41E7142F9
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 11:57:23 -0800 (PST)
Message-ID: <28391263.1164657443997.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 11:57:23 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-747) RecordIO compiler does not produce
 correct Java code when buffer is used as key or value in map
In-Reply-To: <27032202.1164657323166.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-747?page=all ]

Milind Bhandarkar updated HADOOP-747:
-------------------------------------

    Status: Patch Available  (was: In Progress)

> RecordIO compiler does not produce correct Java code when buffer is used as key or value in map
> -----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-747
>                 URL: http://issues.apache.org/jira/browse/HADOOP-747
>             Project: Hadoop
>          Issue Type: Bug
>          Components: record
>    Affects Versions: 0.8.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: record-buffer.patch
>
>
> When buffer type is used as a key type or value type in map, the record IO translator does not produce correct serialization of deserialization code. Patch forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 19:59:43 2006
Return-Path: 
 <hadoop-dev-return-5358-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51339 invoked from network); 27 Nov 2006 19:59:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 19:59:43 -0000
Received: (qmail 11111 invoked by uid 500); 27 Nov 2006 19:59:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10880 invoked by uid 500); 27 Nov 2006 19:59:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10871 invoked by uid 99); 27 Nov 2006 19:59:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 11:59:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 11:59:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3F0C07142F8
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 11:59:22 -0800 (PST)
Message-ID: <18363677.1164657562255.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 11:59:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-720?page=comments#action_12453686 ] 
            
dhruba borthakur commented on HADOOP-720:
-----------------------------------------

Hi Doug, 

I read through the Forrest documentation and played around with it.  i still have a few questions, will appreciate your response.

1. Where is the process of including it in Hadoop site-documentation? I see a directory named "site" but I could not see the relevent xml files in there?
2. From which directory do I need to run "forrest run"? to convert xml to html/pdf?
3. Can you pl point me to an sample xml document for Hadoop that uses Forrest? I can then use those XML tags in my document.



> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture.html, HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 20:07:46 2006
Return-Path: 
 <hadoop-dev-return-5359-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55031 invoked from network); 27 Nov 2006 20:07:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 20:07:46 -0000
Received: (qmail 37153 invoked by uid 500); 27 Nov 2006 20:07:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37128 invoked by uid 500); 27 Nov 2006 20:07:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37108 invoked by uid 99); 27 Nov 2006 20:07:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:07:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:07:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9633F7142F9
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 12:07:23 -0800 (PST)
Message-ID: <5003466.1164658043612.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 12:07:23 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-702) DFS Upgrade Proposal
In-Reply-To: <13641771.1163042497986.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-702?page=comments#action_12453689 ] 
            
Raghu Angadi commented on HADOOP-702:
-------------------------------------


The latest proposal includes <BuildVersion> in directory name and also includes in "VERSION" file. I am not sure what BuildVersion would be used for. Each backed up directory is uniquely identified by FFSID. If we include build version also in its name, it gives an impression that directory is somehow connected to build version. But it is not. Build version will change often and increases number of things to consider in the code and error handling.


> DFS Upgrade Proposal
> --------------------
>
>                 Key: HADOOP-702
>                 URL: http://issues.apache.org/jira/browse/HADOOP-702
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Konstantin Shvachko
>         Attachments: DFSUpgradeProposal.html, DFSUpgradeProposal2.html
>
>
> Currently the DFS cluster upgrade procedure is manual.
> http://wiki.apache.org/lucene-hadoop/Hadoop_Upgrade
> It is rather complicated and does not guarantee data recoverability in case of software errors or administrator mistakes.
> This is a description of utilities that make the upgrade process almost automatic and minimize chance of loosing or corrupting data.
> Please see the attached html file for details.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 20:28:45 2006
Return-Path: 
 <hadoop-dev-return-5360-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65717 invoked from network); 27 Nov 2006 20:28:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 20:28:45 -0000
Received: (qmail 83301 invoked by uid 500); 27 Nov 2006 20:28:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83277 invoked by uid 500); 27 Nov 2006 20:28:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83268 invoked by uid 99); 27 Nov 2006 20:28:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:28:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:28:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A28237142F8
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 12:28:23 -0800 (PST)
Message-ID: <19826550.1164659303663.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 12:28:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-720?page=comments#action_12453695 ] 
            
Doug Cutting commented on HADOOP-720:
-------------------------------------

The site sources are under src/site.  The directory structure there is Forrest's default, with page sources in src/site/src/documentation/content/xdocs.  The pages are re-generated by running forrest while connected to src/site.  They're produced in src/site/build, and then hand-copied to src/site.  This process could certainly be improved, but that's the way it works today.

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture.html, HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 20:51:15 2006
Return-Path: 
 <hadoop-dev-return-5361-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71510 invoked from network); 27 Nov 2006 20:51:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 20:51:15 -0000
Received: (qmail 29165 invoked by uid 500); 27 Nov 2006 20:51:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29131 invoked by uid 500); 27 Nov 2006 20:51:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29122 invoked by uid 99); 27 Nov 2006 20:51:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:51:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:50:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9A7237142F7
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 12:50:23 -0800 (PST)
Message-ID: <22278137.1164660623629.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 12:50:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-746) CRC computation and reading should
 move into a nested FileSystem
In-Reply-To: <3687865.1164239642025.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-746?page=comments#action_12453700 ] 
            
Doug Cutting commented on HADOOP-746:
-------------------------------------

> The FS needs CRCs to manage replication and validation and should have a uniform internal mechanism.

I think you mean "HDFS needs...", right?  But HDFS is not the only FS we wish to support, and not all of these will have a sufficient, end-to-end CRC system.  So a reusable, end-to-end CRC system is useful to Hadoop.  Whether or not that suffices for HDFS seems to be what you're answering with a "no", although I'm not sure why.  It seems to me that a well-designed reusable, end-to-end CRC system could be used by HDFS, so that HDFS doesn't have to re-invent it all.  The CRC system could, e.g., make CRCs available along with data buffers.  Maybe that's more pain than it's worth, and it would in fact be simpler to have two CRC systems, one built in to HDFS and a reusable one that's disabled in HDFS but used by other FSes.  Is that what you're arguing?

> Nor is that URL very friendly...

I agree that is a problem with this proposal.  It would be better if users see hdfs:, s3: and file: urls.


> CRC computation and reading should move into a nested FileSystem
> ----------------------------------------------------------------
>
>                 Key: HADOOP-746
>                 URL: http://issues.apache.org/jira/browse/HADOOP-746
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>
> Currently FileSystem provides both an interface and a mechanism for computing and checking crc files. I propose splitting the crc code into a nestable FileSystem that like the PhasedFileSystem has a backing FileSystem. Once the Paths are converted to URI, this is fairly natural to express. To use crc files, your uris will look like:
> crc://hdfs:%2f%2fhost1:8020/ which is a crc FileSystem with an underlying file system of hdfs://host1:8020
> This will allow users to use crc files where they make sense for their application/cluster and get rid of the "raw" methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 20:56:47 2006
Return-Path: 
 <hadoop-dev-return-5362-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72602 invoked from network); 27 Nov 2006 20:56:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 20:56:47 -0000
Received: (qmail 38201 invoked by uid 500); 27 Nov 2006 20:56:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38176 invoked by uid 500); 27 Nov 2006 20:56:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38162 invoked by uid 99); 27 Nov 2006 20:56:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:56:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:56:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EB85E7142F8
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 12:56:22 -0800 (PST)
Message-ID: <23606985.1164660982962.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 12:56:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
In-Reply-To: <30411461.1163635597099.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-728?page=comments#action_12453701 ] 
            
Doug Cutting commented on HADOOP-728:
-------------------------------------

I haven't looked at this patch in any detail, but, if PhasedFileSystem is to be public, it probably should not be in the mapred package, since it's not mapred-specific, but rather in the fs package, no?  It should also perhaps build on a FilteredFileSystem abstract base class that wraps another FS impl.

> Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-728
>                 URL: http://issues.apache.org/jira/browse/HADOOP-728
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-728.patch
>
>
> a) a file is create for the output instead of a directory.
> b) there is no way to understand what is going on from the client output
> I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
> ~

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 21:00:46 2006
Return-Path: 
 <hadoop-dev-return-5364-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73664 invoked from network); 27 Nov 2006 21:00:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 21:00:46 -0000
Received: (qmail 46549 invoked by uid 500); 27 Nov 2006 21:00:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46509 invoked by uid 500); 27 Nov 2006 21:00:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46495 invoked by uid 99); 27 Nov 2006 21:00:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 13:00:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 13:00:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 504C57142FA
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 13:00:23 -0800 (PST)
Message-ID: <21932766.1164661223326.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 13:00:23 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-748) the delete in localfilesystem
 traverses symlinks to delete files which is not expected
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

the delete in localfilesystem traverses symlinks to delete files which is not expected
--------------------------------------------------------------------------------------

                 Key: HADOOP-748
                 URL: http://issues.apache.org/jira/browse/HADOOP-748
             Project: Hadoop
          Issue Type: Bug
            Reporter: Mahadev konar
         Assigned To: Mahadev konar
            Priority: Minor


the fullyDelete in FileUtil follows symlinks and deletes all the files in the symlinks. This is unexpected behaviour. Creates issues with caching as well.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 21:15:47 2006
Return-Path: 
 <hadoop-dev-return-5365-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77398 invoked from network); 27 Nov 2006 21:15:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 21:15:47 -0000
Received: (qmail 71313 invoked by uid 500); 27 Nov 2006 21:15:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71272 invoked by uid 500); 27 Nov 2006 21:15:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71246 invoked by uid 99); 27 Nov 2006 21:15:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 13:15:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 13:15:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A6BF87142F3
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 13:15:22 -0800 (PST)
Message-ID: <13364772.1164662122680.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 13:15:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-749) The jobfailures.jsp gets a
 NullPointerException after a task tracker has been lost
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The jobfailures.jsp gets a NullPointerException after a task tracker has been lost
----------------------------------------------------------------------------------

                 Key: HADOOP-749
                 URL: http://issues.apache.org/jira/browse/HADOOP-749
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.8.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.9.0


The job tracker gets a NullPointerException:

2006-11-27 06:59:25,148 WARN /: /jobfailures.jsp?jobid=job_0001&kind=map:
java.lang.NullPointerException
        at org.apache.hadoop.mapred.jobfailures_jsp.printFailedAttempts(jobfailu
res_jsp.java:57)
        at org.apache.hadoop.mapred.jobfailures_jsp.printFailures(jobfailures_js
p.java:103)
        at org.apache.hadoop.mapred.jobfailures_jsp._jspService(jobfailures_jsp.
java:168)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:427
)
        at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicati
onHandler.java:475)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:5
67)
        at org.mortbay.http.HttpContext.handle(HttpContext.java:1565)
        at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplication
Context.java:635)
        at org.mortbay.http.HttpContext.handle(HttpContext.java:1517)
        at org.mortbay.http.HttpServer.service(HttpServer.java:954)
        at org.mortbay.http.HttpConnection.service(HttpConnection.java:814)
        at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:981)
        at org.mortbay.http.HttpConnection.handle(HttpConnection.java:831)
        at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:
244)
        at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)
        at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)

when there is a lost task tracker. Since the task tracker was lost, when the jsp tries to get the task tracker object for that task, it gets a null value. The jsp needs to protect itself from nulls.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 21:41:46 2006
Return-Path: 
 <hadoop-dev-return-5366-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83390 invoked from network); 27 Nov 2006 21:41:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 21:41:46 -0000
Received: (qmail 22690 invoked by uid 500); 27 Nov 2006 21:41:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22671 invoked by uid 500); 27 Nov 2006 21:41:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22649 invoked by uid 99); 27 Nov 2006 21:41:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 13:41:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 13:41:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4EBB57142F3
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 13:41:22 -0800 (PST)
Message-ID: <29841985.1164663682319.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 13:41:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-749) The jobfailures.jsp gets a
 NullPointerException after a task tracker has been lost
In-Reply-To: <13364772.1164662122680.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-749?page=all ]

Owen O'Malley updated HADOOP-749:
---------------------------------

    Attachment: jsp-null.patch

This patch puts a check for taskTracker == null into the jsp before using it to build a link for the user logs.

> The jobfailures.jsp gets a NullPointerException after a task tracker has been lost
> ----------------------------------------------------------------------------------
>
>                 Key: HADOOP-749
>                 URL: http://issues.apache.org/jira/browse/HADOOP-749
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>         Attachments: jsp-null.patch
>
>
> The job tracker gets a NullPointerException:
> 2006-11-27 06:59:25,148 WARN /: /jobfailures.jsp?jobid=job_0001&kind=map:
> java.lang.NullPointerException
>         at org.apache.hadoop.mapred.jobfailures_jsp.printFailedAttempts(jobfailu
> res_jsp.java:57)
>         at org.apache.hadoop.mapred.jobfailures_jsp.printFailures(jobfailures_js
> p.java:103)
>         at org.apache.hadoop.mapred.jobfailures_jsp._jspService(jobfailures_jsp.
> java:168)
>         at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)
>         at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
>         at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:427
> )
>         at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicati
> onHandler.java:475)
>         at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:5
> 67)
>         at org.mortbay.http.HttpContext.handle(HttpContext.java:1565)
>         at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplication
> Context.java:635)
>         at org.mortbay.http.HttpContext.handle(HttpContext.java:1517)
>         at org.mortbay.http.HttpServer.service(HttpServer.java:954)
>         at org.mortbay.http.HttpConnection.service(HttpConnection.java:814)
>         at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:981)
>         at org.mortbay.http.HttpConnection.handle(HttpConnection.java:831)
>         at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:
> 244)
>         at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)
>         at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
> when there is a lost task tracker. Since the task tracker was lost, when the jsp tries to get the task tracker object for that task, it gets a null value. The jsp needs to protect itself from nulls.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 21:58:46 2006
Return-Path: 
 <hadoop-dev-return-5367-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87118 invoked from network); 27 Nov 2006 21:58:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 21:58:46 -0000
Received: (qmail 61340 invoked by uid 500); 27 Nov 2006 21:58:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61312 invoked by uid 500); 27 Nov 2006 21:58:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61302 invoked by uid 99); 27 Nov 2006 21:58:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 13:58:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 13:58:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 570F37142F3
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 13:58:22 -0800 (PST)
Message-ID: <16942842.1164664702353.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 13:58:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12453716 ] 
            
Doug Cutting commented on HADOOP-227:
-------------------------------------

A checkpointing approach you don't seem to evaluate is making it very cheap to clone the in-memory  tree, specifically, by always copying nodes between the root and each edit.  That way one can checkpoint by just grabbing the pointer to the root, and then writing the shadow tree in the background.  No merging required, no complex re-sorting of operations, etc.

> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 22:08:45 2006
Return-Path: 
 <hadoop-dev-return-5368-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90179 invoked from network); 27 Nov 2006 22:08:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 22:08:45 -0000
Received: (qmail 87373 invoked by uid 500); 27 Nov 2006 22:08:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87351 invoked by uid 500); 27 Nov 2006 22:08:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87342 invoked by uid 99); 27 Nov 2006 22:08:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 14:08:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 14:08:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 20FB47142BF
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 14:08:23 -0800 (PST)
Message-ID: <25285071.1164665303132.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 14:08:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-749) The jobfailures.jsp gets a
 NullPointerException after a task tracker has been lost
In-Reply-To: <13364772.1164662122680.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-749?page=all ]

Owen O'Malley updated HADOOP-749:
---------------------------------

    Status: Patch Available  (was: Open)

> The jobfailures.jsp gets a NullPointerException after a task tracker has been lost
> ----------------------------------------------------------------------------------
>
>                 Key: HADOOP-749
>                 URL: http://issues.apache.org/jira/browse/HADOOP-749
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>         Attachments: jsp-null.patch
>
>
> The job tracker gets a NullPointerException:
> 2006-11-27 06:59:25,148 WARN /: /jobfailures.jsp?jobid=job_0001&kind=map:
> java.lang.NullPointerException
>         at org.apache.hadoop.mapred.jobfailures_jsp.printFailedAttempts(jobfailu
> res_jsp.java:57)
>         at org.apache.hadoop.mapred.jobfailures_jsp.printFailures(jobfailures_js
> p.java:103)
>         at org.apache.hadoop.mapred.jobfailures_jsp._jspService(jobfailures_jsp.
> java:168)
>         at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)
>         at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
>         at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:427
> )
>         at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicati
> onHandler.java:475)
>         at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:5
> 67)
>         at org.mortbay.http.HttpContext.handle(HttpContext.java:1565)
>         at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplication
> Context.java:635)
>         at org.mortbay.http.HttpContext.handle(HttpContext.java:1517)
>         at org.mortbay.http.HttpServer.service(HttpServer.java:954)
>         at org.mortbay.http.HttpConnection.service(HttpConnection.java:814)
>         at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:981)
>         at org.mortbay.http.HttpConnection.handle(HttpConnection.java:831)
>         at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:
> 244)
>         at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)
>         at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
> when there is a lost task tracker. Since the task tracker was lost, when the jsp tries to get the task tracker object for that task, it gets a null value. The jsp needs to protect itself from nulls.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 23:22:44 2006
Return-Path: 
 <hadoop-dev-return-5369-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8581 invoked from network); 27 Nov 2006 23:22:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 23:22:44 -0000
Received: (qmail 17442 invoked by uid 500); 27 Nov 2006 23:22:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17406 invoked by uid 500); 27 Nov 2006 23:22:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17397 invoked by uid 99); 27 Nov 2006 23:22:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 15:22:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 15:22:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1280D7142BF
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 15:22:23 -0800 (PST)
Message-ID: <29059709.1164669743073.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 15:22:23 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-698) When DFS client fails to read from a
 datanode, the failed datanode is not excluded from target reselection
In-Reply-To: <17466448.1163027091463.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-698?page=all ]

Milind Bhandarkar updated HADOOP-698:
-------------------------------------

    Attachment: datanode-exclude.patch

Patch attached. It also include two unit tests.

> When DFS client fails to read from a datanode, the failed datanode is not excluded from target reselection
> ----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-698
>                 URL: http://issues.apache.org/jira/browse/HADOOP-698
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Hairong Kuang
>         Assigned To: Milind Bhandarkar
>         Attachments: datanode-exclude.patch
>
>
> In the method read(byte buf[ ], int off, int len) of DFSInputStream, when read fails,  it calls "blockSeekTo" to reselect a datanode. However, the failed datanode does not feed back to blockSeekTo. The datanode selection algorithm works as follows:
> * If the machine that the client is running on has a local copy, return the local machine;
> * Otherwise, randomly pick up one location.
> When the failed data node info does not feed back to target reselection, this leads to two flaws:
> 1. When a client fails to read from the local copy, for example, because of the checksum error, the local machine will always be chosen in retries.
> 2. Random selection may still return the same failed node.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 23:22:46 2006
Return-Path: 
 <hadoop-dev-return-5370-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8630 invoked from network); 27 Nov 2006 23:22:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 23:22:46 -0000
Received: (qmail 17713 invoked by uid 500); 27 Nov 2006 23:22:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17679 invoked by uid 500); 27 Nov 2006 23:22:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17670 invoked by uid 99); 27 Nov 2006 23:22:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 15:22:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 15:22:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0DC7A7142F3
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 15:22:25 -0800 (PST)
Message-ID: <18062873.1164669745053.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 15:22:25 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-698) When DFS client fails to read from a
 datanode, the failed datanode is not excluded from target reselection
In-Reply-To: <17466448.1163027091463.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-698?page=all ]

Milind Bhandarkar updated HADOOP-698:
-------------------------------------

    Status: Patch Available  (was: In Progress)

> When DFS client fails to read from a datanode, the failed datanode is not excluded from target reselection
> ----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-698
>                 URL: http://issues.apache.org/jira/browse/HADOOP-698
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Hairong Kuang
>         Assigned To: Milind Bhandarkar
>         Attachments: datanode-exclude.patch
>
>
> In the method read(byte buf[ ], int off, int len) of DFSInputStream, when read fails,  it calls "blockSeekTo" to reselect a datanode. However, the failed datanode does not feed back to blockSeekTo. The datanode selection algorithm works as follows:
> * If the machine that the client is running on has a local copy, return the local machine;
> * Otherwise, randomly pick up one location.
> When the failed data node info does not feed back to target reselection, this leads to two flaws:
> 1. When a client fails to read from the local copy, for example, because of the checksum error, the local machine will always be chosen in retries.
> 2. Random selection may still return the same failed node.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 23:27:46 2006
Return-Path: 
 <hadoop-dev-return-5371-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10357 invoked from network); 27 Nov 2006 23:27:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 23:27:46 -0000
Received: (qmail 30403 invoked by uid 500); 27 Nov 2006 23:27:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30378 invoked by uid 500); 27 Nov 2006 23:27:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30369 invoked by uid 99); 27 Nov 2006 23:27:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 15:27:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 15:27:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 896F47142FA
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 15:27:24 -0800 (PST)
Message-ID: <13722102.1164670044552.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 15:27:24 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-574?page=comments#action_12453742 ] 
            
Doug Cutting commented on HADOOP-574:
-------------------------------------

> DFSShell is really more general than DFS - perhaps it should be renamed FSShell?

Yes, it probably should, since it is largely generic.

> I need to see how the S3 implementation fits with HADOOP-571. Suggestions welcome.

What should the URI look like?  The scheme should be "s3", that's easy, but what about the authority?  I think it makes sense to map bucket to host, access key id to user and secret access key to password.  So that would give URIs like s3://id:secret@bucket/.  One's hadoop-site.xml could then just specify the fs.default.name using this syntax.

Other than that, all you should need to do is define a few new FileSystem methods (getUri(), initialize(URI, Configuration)) and a new configuration property (fs.s3.impl).

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>         Attachments: dependencies.zip, HADOOP-574-v2.patch, HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 23:32:15 2006
Return-Path: 
 <hadoop-dev-return-5372-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11775 invoked from network); 27 Nov 2006 23:32:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 23:32:15 -0000
Received: (qmail 44060 invoked by uid 500); 27 Nov 2006 23:32:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44021 invoked by uid 500); 27 Nov 2006 23:32:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44012 invoked by uid 99); 27 Nov 2006 23:32:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 15:32:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 15:32:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3B0827142F3
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 15:31:22 -0800 (PST)
Message-ID: <27871855.1164670282239.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 15:31:22 -0800 (PST)
From: "Anonymous (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-720?page=all ]


    Attachment: HDFSForrest.patch

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture.html, HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm, HDFSForrest.patch
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 23:33:46 2006
Return-Path: 
 <hadoop-dev-return-5373-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12257 invoked from network); 27 Nov 2006 23:33:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 23:33:46 -0000
Received: (qmail 49156 invoked by uid 500); 27 Nov 2006 23:33:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49126 invoked by uid 500); 27 Nov 2006 23:33:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49117 invoked by uid 99); 27 Nov 2006 23:33:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 15:33:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 15:33:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 389AF7142F3
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 15:33:22 -0800 (PST)
Message-ID: <9172309.1164670402229.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 15:33:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-720?page=all ]

dhruba borthakur updated HADOOP-720:
------------------------------------

    Attachment: HDFSArchitecture.jpg
                HDFSDatanodes.jpg

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture.html, HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm, HDFSArchitecture.jpg, HDFSDatanodes.jpg, HDFSForrest.patch
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Nov 27 23:53:44 2006
Return-Path: 
 <hadoop-dev-return-5374-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16047 invoked from network); 27 Nov 2006 23:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 23:53:44 -0000
Received: (qmail 84063 invoked by uid 500); 27 Nov 2006 23:53:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83845 invoked by uid 500); 27 Nov 2006 23:53:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83833 invoked by uid 99); 27 Nov 2006 23:53:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 15:53:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 15:53:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4ED007142FC
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 15:53:22 -0800 (PST)
Message-ID: <2978809.1164671602319.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 15:53:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-720?page=comments#action_12453751 ] 
            
dhruba borthakur commented on HADOOP-720:
-----------------------------------------

Hi Doug, I have attached a patch to the Forrest framework and also attached the two image files. Would appreciate your review comments. thanks. dhruba

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture.html, HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm, HDFSArchitecture.jpg, HDFSDatanodes.jpg, HDFSForrest.patch
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 00:30:43 2006
Return-Path: 
 <hadoop-dev-return-5375-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23789 invoked from network); 28 Nov 2006 00:30:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 00:30:43 -0000
Received: (qmail 36232 invoked by uid 500); 28 Nov 2006 00:30:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36208 invoked by uid 500); 28 Nov 2006 00:30:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36198 invoked by uid 99); 28 Nov 2006 00:30:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 16:30:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 16:30:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0CB657142E4
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 16:30:21 -0800 (PST)
Message-ID: <10490830.1164673821049.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 16:30:21 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-750) race condition on stalled map output
 fetches
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

race condition on stalled map output fetches
--------------------------------------------

                 Key: HADOOP-750
                 URL: http://issues.apache.org/jira/browse/HADOOP-750
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.8.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.9.0


I've seen reduces getting killed because of a race condition in the ReduceTaskRunner.  In the logs it looks like:

2006-11-27 08:40:44,795 WARN org.apache.hadoop.mapred.TaskRunner: Map output copy stalled on http://kry2296.inktomisearch.com:7030/mapOutput?map=task_0001_m_015626_0
...
2006-11-27 09:16:41,361 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 Need 52 map output(s)
2006-11-27 09:16:41,361 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 Got 39 known map output location(s); scheduling...
2006-11-27 09:16:41,361 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 Scheduled 0 of 39 known outputs (0 slow hosts and 39 dup hosts)
...
2006-11-27 09:16:47,071 INFO org.apache.hadoop.mapred.TaskTracker: task_0001_r_000658_0 0.3328575% reduce > copy (28679 of 28720 at 0.76 MB/s) >
...
2006-11-27 09:16:47,338 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 done copying task_0001_m_015462_0 output from node1
...
2006-11-27 09:36:51,398 INFO org.apache.hadoop.mapred.TaskTracker: task_0001_r_000658_0: Task failed to report status for 1204 seconds. Killing.

Basically, the handling of the stall has a race condition that leaves the fetcher in a bad state. At the end of the fetch, all of the tasks finish and their results never get handled. When the thread times out, all of the map output copiers are waiting for things to fetch and the prepare thread is waiting for results.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 00:32:58 2006
Return-Path: 
 <hadoop-dev-return-5376-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24238 invoked from network); 28 Nov 2006 00:32:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 00:32:58 -0000
Received: (qmail 40007 invoked by uid 500); 28 Nov 2006 00:33:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39764 invoked by uid 500); 28 Nov 2006 00:33:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39755 invoked by uid 99); 28 Nov 2006 00:33:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 16:33:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 16:32:56 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0F1697142E4
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 16:32:21 -0800 (PST)
Message-ID: <6752273.1164673941058.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 16:32:21 -0800 (PST)
From: "Koji Noguchi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-751) Namenode constantly using up 100% CPU
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Namenode constantly using up 100% CPU 
--------------------------------------

                 Key: HADOOP-751
                 URL: http://issues.apache.org/jira/browse/HADOOP-751
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.8.0
            Reporter: Koji Noguchi


Trying to figure out the exact cause, but CPU load of the namenode is constantly 100% without any file exchanges.

.log file of the namenode showing the following exception about every 20 seconds.

2006-11-27 16:02:07,199 INFO org.apache.hadoop.ipc.Server: IPC Server handler 5 on 8020 call error: java.io.IOException: java.util.NoSuchElementException
java.io.IOException: java.util.NoSuchElementException
  at java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1029)
  at java.util.TreeMap$KeyIterator.next(TreeMap.java:1058)
  at java.util.AbstractCollection.toArray(AbstractCollection.java:176)
  at org.apache.hadoop.dfs.DatanodeDescriptor.getBlocks(DatanodeDescriptor.java:96)
  at org.apache.hadoop.dfs.FSNamesystem.processReport(FSNamesystem.java:1446)
  at org.apache.hadoop.dfs.NameNode.blockReport(NameNode.java:506)
  at sun.reflect.GeneratedMethodAccessor11.invoke(Unknown Source)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
  at java.lang.reflect.Method.invoke(Method.java:585)
  at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:387)
  at org.apache.hadoop.ipc.Server$Handler.run(Server.java:518)



On some of the datanodes, .log file is showing

2006-11-27 16:03:57,542 WARN org.apache.hadoop.dfs.DataNode: org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.util.NoSuchElementException
  at java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1029)
  at java.util.TreeMap$KeyIterator.next(TreeMap.java:1058)
  at java.util.AbstractCollection.toArray(AbstractCollection.java:176)
  at org.apache.hadoop.dfs.DatanodeDescriptor.getBlocks(DatanodeDescriptor.java:96)
  at org.apache.hadoop.dfs.FSNamesystem.processReport(FSNamesystem.java:1446)
  at org.apache.hadoop.dfs.NameNode.blockReport(NameNode.java:506)
  at sun.reflect.GeneratedMethodAccessor11.invoke(Unknown Source)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
  at java.lang.reflect.Method.invoke(Method.java:585)
  at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:387)
  at org.apache.hadoop.ipc.Server$Handler.run(Server.java:518)

  at org.apache.hadoop.ipc.Client$Connection.run(Client.java:248)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 00:36:51 2006
Return-Path: 
 <hadoop-dev-return-5377-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24943 invoked from network); 28 Nov 2006 00:36:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 00:36:51 -0000
Received: (qmail 43233 invoked by uid 500); 28 Nov 2006 00:37:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43003 invoked by uid 500); 28 Nov 2006 00:36:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42994 invoked by uid 99); 28 Nov 2006 00:36:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 16:36:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 16:36:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3EEEF7142E4
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 16:36:22 -0800 (PST)
Message-ID: <6741037.1164674182255.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 16:36:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-750) race condition on stalled map output
 fetches
In-Reply-To: <10490830.1164673821049.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-750?page=comments#action_12453764 ] 
            
Owen O'Malley commented on HADOOP-750:
--------------------------------------

The thread call stacks look like:

Thread 1525 (Thread-1403):
  State: WAITING
  Blocked count: 126
  Waited count: 1
  Waiting on java.util.ArrayList@943dc4
  Stack:
    java.lang.Object.wait(Native Method)
    java.lang.Object.wait(Object.java:474)
    org.apache.hadoop.mapred.ReduceTaskRunner$MapOutputCopier.run(ReduceTaskRunner.java:207)

Thread 102 (Thread-89):
  State: TIMED_WAITING
  Blocked count: 7
  Waited count: 0
  Stack:
    java.lang.Thread.sleep(Native Method)
    org.apache.hadoop.mapred.ReduceTaskRunner$MapCopyLeaseChecker.run(ReduceTaskRunner.java:303)

Thread 79 (Thread-66):
  State: WAITING
  Blocked count: 151
  Waited count: 26481
  Waiting on java.util.ArrayList@14eaec9
  Stack:
    java.lang.Object.wait(Native Method)
    java.lang.Object.wait(Object.java:474)
    org.apache.hadoop.mapred.ReduceTaskRunner.getCopyResult(ReduceTaskRunner.java:527)
    org.apache.hadoop.mapred.ReduceTaskRunner.prepare(ReduceTaskRunner.java:453)
    org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:120)


> race condition on stalled map output fetches
> --------------------------------------------
>
>                 Key: HADOOP-750
>                 URL: http://issues.apache.org/jira/browse/HADOOP-750
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>
> I've seen reduces getting killed because of a race condition in the ReduceTaskRunner.  In the logs it looks like:
> 2006-11-27 08:40:44,795 WARN org.apache.hadoop.mapred.TaskRunner: Map output copy stalled on http://kry2296.inktomisearch.com:7030/mapOutput?map=task_0001_m_015626_0
> ...
> 2006-11-27 09:16:41,361 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 Need 52 map output(s)
> 2006-11-27 09:16:41,361 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 Got 39 known map output location(s); scheduling...
> 2006-11-27 09:16:41,361 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 Scheduled 0 of 39 known outputs (0 slow hosts and 39 dup hosts)
> ...
> 2006-11-27 09:16:47,071 INFO org.apache.hadoop.mapred.TaskTracker: task_0001_r_000658_0 0.3328575% reduce > copy (28679 of 28720 at 0.76 MB/s) >
> ...
> 2006-11-27 09:16:47,338 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 done copying task_0001_m_015462_0 output from node1
> ...
> 2006-11-27 09:36:51,398 INFO org.apache.hadoop.mapred.TaskTracker: task_0001_r_000658_0: Task failed to report status for 1204 seconds. Killing.
> Basically, the handling of the stall has a race condition that leaves the fetcher in a bad state. At the end of the fetch, all of the tasks finish and their results never get handled. When the thread times out, all of the map output copiers are waiting for things to fetch and the prepare thread is waiting for results.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 00:41:24 2006
Return-Path: 
 <hadoop-dev-return-5378-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25688 invoked from network); 28 Nov 2006 00:41:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 00:41:24 -0000
Received: (qmail 52599 invoked by uid 500); 28 Nov 2006 00:41:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52567 invoked by uid 500); 28 Nov 2006 00:41:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52467 invoked by uid 99); 28 Nov 2006 00:41:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 16:41:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 16:41:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3F4097142E4
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 16:40:22 -0800 (PST)
Message-ID: <6898574.1164674422256.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 16:40:22 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-674) Hadoop records should provide
 comvenient APIs for serialization/deserialization
In-Reply-To: <10006323.1162509916598.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-674?page=comments#action_12453765 ] 
            
Milind Bhandarkar commented on HADOOP-674:
------------------------------------------

What does the argument format indicate ? serialization format like "xml", "csv", "binary" ?

> Hadoop records should provide comvenient APIs for serialization/deserialization
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-674
>                 URL: http://issues.apache.org/jira/browse/HADOOP-674
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>            Reporter: Runping Qi
>
> I found the following APIs are very convenient to use and should be  part of the generated class from Jute IDL :
> public BytesWritable serialize(String format);
> public void deserialize(BytesWitable data, String format);
> public static MyRecordJT deserialize(BytesWitable data, String format);

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 01:07:27 2006
Return-Path: 
 <hadoop-dev-return-5379-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32083 invoked from network); 28 Nov 2006 01:07:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 01:07:27 -0000
Received: (qmail 89849 invoked by uid 500); 28 Nov 2006 01:07:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89820 invoked by uid 500); 28 Nov 2006 01:07:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89811 invoked by uid 99); 28 Nov 2006 01:07:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 17:07:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 17:07:19 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 41D987142E4
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 17:06:22 -0800 (PST)
Message-ID: <8723147.1164675982266.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 17:06:22 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-674) Hadoop records should provide
 comvenient APIs for serialization/deserialization
In-Reply-To: <10006323.1162509916598.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-674?page=comments#action_12453768 ] 
            
Runping Qi commented on HADOOP-674:
-----------------------------------

Yes, argument format is the serialization format.


> Hadoop records should provide comvenient APIs for serialization/deserialization
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-674
>                 URL: http://issues.apache.org/jira/browse/HADOOP-674
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>            Reporter: Runping Qi
>
> I found the following APIs are very convenient to use and should be  part of the generated class from Jute IDL :
> public BytesWritable serialize(String format);
> public void deserialize(BytesWitable data, String format);
> public static MyRecordJT deserialize(BytesWitable data, String format);

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 01:32:43 2006
Return-Path: 
 <hadoop-dev-return-5380-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40690 invoked from network); 28 Nov 2006 01:32:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 01:32:43 -0000
Received: (qmail 27855 invoked by uid 500); 28 Nov 2006 01:32:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27828 invoked by uid 500); 28 Nov 2006 01:32:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27818 invoked by uid 99); 28 Nov 2006 01:32:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 17:32:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 17:32:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 461577142E4
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 17:32:22 -0800 (PST)
Message-ID: <1800477.1164677542284.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 17:32:22 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12453772 ] 
            
Milind Bhandarkar commented on HADOOP-227:
------------------------------------------

Well, the sort-merge approach does not seem performant anyway if the number of renames is large. So, I am adding the copy-on-write (Dhruba's comment on HADOOP-334) to the proposal. This proposal suggests adding a clone member to every node. While checkpointing is in progress, change to a node is instead made to a clone. When periodic checkpointing is finished, the checkpointer resets the clones by making them actual nodes. I will write up a better description and post as RFC soon.


> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 01:32:45 2006
Return-Path: 
 <hadoop-dev-return-5381-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40741 invoked from network); 28 Nov 2006 01:32:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 01:32:45 -0000
Received: (qmail 28120 invoked by uid 500); 28 Nov 2006 01:32:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28094 invoked by uid 500); 28 Nov 2006 01:32:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28084 invoked by uid 99); 28 Nov 2006 01:32:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 17:32:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 17:32:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 433B87142BF
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 17:32:24 -0800 (PST)
Message-ID: <26795864.1164677544273.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 17:32:24 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-227?page=all ]

Milind Bhandarkar reassigned HADOOP-227:
----------------------------------------

    Assignee: Milind Bhandarkar  (was: Konstantin Shvachko)

> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Milind Bhandarkar
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 02:54:45 2006
Return-Path: 
 <hadoop-dev-return-5382-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69440 invoked from network); 28 Nov 2006 02:54:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 02:54:45 -0000
Received: (qmail 42091 invoked by uid 500); 28 Nov 2006 02:54:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42055 invoked by uid 500); 28 Nov 2006 02:54:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42046 invoked by uid 99); 28 Nov 2006 02:54:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 18:54:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 18:54:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 42A527142F3
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 18:54:23 -0800 (PST)
Message-ID: <11077485.1164682463270.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 18:54:23 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12453781 ] 
            
Konstantin Shvachko commented on HADOOP-227:
--------------------------------------------

Complex rename relocation stuff could be avoided if we used (unique) files ids to identify files.
In this case file name is just an attribute of the file. Renaming does not change the file id.
File hierarchy is based on ids rather than file names.
And if we need to sort, we sort by file ids rather than their names.

I like the merging approach. It is simple in general (not in details though) and does not
involve introducing additional structures in the name-node, which will be hard to support,
especially if we plan to replace global locking by something more elaborate.
And best of all it can work as a separate component.

> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Milind Bhandarkar
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 03:23:45 2006
Return-Path: 
 <hadoop-dev-return-5383-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75560 invoked from network); 28 Nov 2006 03:23:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 03:23:45 -0000
Received: (qmail 71017 invoked by uid 500); 28 Nov 2006 03:23:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70976 invoked by uid 500); 28 Nov 2006 03:23:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70967 invoked by uid 99); 28 Nov 2006 03:23:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 19:23:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 19:23:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9D02E7142BF
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 19:23:23 -0800 (PST)
Message-ID: <7383202.1164684203640.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 19:23:23 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-738) dfs get or copyToLocal should not
 copy crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-738?page=comments#action_12453783 ] 
            
Konstantin Shvachko commented on HADOOP-738:
--------------------------------------------

I see two different issues here.
The first is that MR needs to copy locally dfs files and it turns out to be using local fs for that.
And the second is that -put and -get commands of DFSShell are not symmetrical, meaning
when a user "puts" he doesn't need crc, while when he "gets" he sees a crc file.

> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 05:53:42 2006
Return-Path: 
 <hadoop-dev-return-5384-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5937 invoked from network); 28 Nov 2006 05:53:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 05:53:42 -0000
Received: (qmail 30458 invoked by uid 500); 28 Nov 2006 05:53:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30223 invoked by uid 500); 28 Nov 2006 05:53:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30214 invoked by uid 99); 28 Nov 2006 05:53:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 21:53:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 21:53:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 147E17142F7
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 21:53:21 -0800 (PST)
Message-ID: <3588846.1164693201081.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 21:53:21 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-752) Possible locking issues in HDFS
 Namenode
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Possible locking issues in HDFS Namenode
----------------------------------------

                 Key: HADOOP-752
                 URL: http://issues.apache.org/jira/browse/HADOOP-752
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: dhruba borthakur
         Assigned To: dhruba borthakur


I have been investigating the cause of random Namenode memory corruptions/memory overflows, etc. Please comment.

 1. The functions datanodeReport() and DFSNodesStatus() do not acquire the global lock.
   This can race with another thread invoking registerDatanode(). registerDatanode()
   can remove a datanode (thru wipeDatanode()) while the datanodeReport thread is
   traversing the list of datanodes. This can cause exceptions to occur.

 2. The blocksMap is protected by the global lock. The setReplication() call does not acquire
   the global lock when it calls proccessOverReplicatedBlock(). This can cause corruption in blockMap.




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 06:44:46 2006
Return-Path: 
 <hadoop-dev-return-5385-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15719 invoked from network); 28 Nov 2006 06:44:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 06:44:46 -0000
Received: (qmail 88625 invoked by uid 500); 28 Nov 2006 06:44:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88588 invoked by uid 500); 28 Nov 2006 06:44:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88555 invoked by uid 99); 28 Nov 2006 06:44:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 22:44:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 22:44:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 48C6C7142F7
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 22:44:22 -0800 (PST)
Message-ID: <11567028.1164696262295.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 22:44:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-749) The jobfailures.jsp gets a
 NullPointerException after a task tracker has been lost
In-Reply-To: <13364772.1164662122680.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-749?page=comments#action_12453807 ] 
            
Hadoop QA commented on HADOOP-749:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12345863/jsp-null.patch applied and successfully tested against trunk revision 479926

> The jobfailures.jsp gets a NullPointerException after a task tracker has been lost
> ----------------------------------------------------------------------------------
>
>                 Key: HADOOP-749
>                 URL: http://issues.apache.org/jira/browse/HADOOP-749
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>         Attachments: jsp-null.patch
>
>
> The job tracker gets a NullPointerException:
> 2006-11-27 06:59:25,148 WARN /: /jobfailures.jsp?jobid=job_0001&kind=map:
> java.lang.NullPointerException
>         at org.apache.hadoop.mapred.jobfailures_jsp.printFailedAttempts(jobfailu
> res_jsp.java:57)
>         at org.apache.hadoop.mapred.jobfailures_jsp.printFailures(jobfailures_js
> p.java:103)
>         at org.apache.hadoop.mapred.jobfailures_jsp._jspService(jobfailures_jsp.
> java:168)
>         at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)
>         at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
>         at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:427
> )
>         at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicati
> onHandler.java:475)
>         at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:5
> 67)
>         at org.mortbay.http.HttpContext.handle(HttpContext.java:1565)
>         at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplication
> Context.java:635)
>         at org.mortbay.http.HttpContext.handle(HttpContext.java:1517)
>         at org.mortbay.http.HttpServer.service(HttpServer.java:954)
>         at org.mortbay.http.HttpConnection.service(HttpConnection.java:814)
>         at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:981)
>         at org.mortbay.http.HttpConnection.handle(HttpConnection.java:831)
>         at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:
> 244)
>         at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)
>         at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
> when there is a lost task tracker. Since the task tracker was lost, when the jsp tries to get the task tracker object for that task, it gets a null value. The jsp needs to protect itself from nulls.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 06:59:38 2006
Return-Path: 
 <hadoop-dev-return-5386-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18106 invoked from network); 28 Nov 2006 06:59:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 06:59:38 -0000
Received: (qmail 7969 invoked by uid 500); 28 Nov 2006 06:59:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7945 invoked by uid 500); 28 Nov 2006 06:59:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7936 invoked by uid 99); 28 Nov 2006 06:59:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 22:59:47 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 22:59:35 -0800
Received: from [10.0.1.2] (snvvpn-10-72-66-c176.corp.yahoo.com [10.72.66.176])
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kAS6xAYF066524
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 22:59:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:content-transfer-encoding:message-id:
	content-type:to:from:subject:date:x-mailer;
	b=Div69hDREZzR22p5w6okAJwI1DCmVzuweQa2RlWdi9J7tcXX9PwpN3KeHoiMhFtE
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <26FA5E0F-3691-4B5E-B119-88640F45ABE6@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: Nigel Daley <ndaley@yahoo-inc.com>
Subject: testing patches
Date: Mon, 27 Nov 2006 22:59:02 -0800
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Just wanted to let you know that I've setup a build and test server  
for patches.  When a patch is submitted to JIRA, my automated process  
will download it, apply it to HEAD and execute the following:

   ant clean clean-libhdfs compile test test-libhdfs package-libhdfs tar

If the build and test of the patch succeeds, my process will add a  
"+1" comment to the JIRA bug as can be seen in the email below.  This  
is done as the "Hadoop QA" JIRA user.  Note, this isn't meant to be a  
replacement for your own build and testing before you submit your  
patch ;-)

Currently, only the latest .patch attachment is downloaded and  
applied by my process.

Hope this helps!

Cheers,
Nige
QA guy


On Nov 27, 2006, at 10:44 PM, Hadoop QA (JIRA) wrote:
> Hadoop QA commented on HADOOP-:
> ----------------------------------
>
> +1, http://issues.apache.org/jira/secure/attachment/12345863/jsp- 
> null.patch applied and successfully tested against trunk revision  
> 479926
>
>> The jobfailures.jsp gets a NullPointerException after a task  
>> tracker has been lost
>> --------------------------------------------------------------------- 
>> -------------
>>
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-749
>>             Project: Hadoop
>>          Issue Type: Bug
>>          Components: mapred
>>    Affects Versions: 0.8.0
>>            Reporter: Owen O'Malley
>>         Assigned To: Owen O'Malley
>>             Fix For: 0.9.0
>>
>>         Attachments: jsp-null.patch
>>



From MAILER-DAEMON Tue Nov 28 07:04:43 2006
Return-Path: 
 <hadoop-dev-return-5387-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18791 invoked from network); 28 Nov 2006 07:04:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 07:04:43 -0000
Received: (qmail 11802 invoked by uid 500); 28 Nov 2006 07:04:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11567 invoked by uid 500); 28 Nov 2006 07:04:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11558 invoked by uid 99); 28 Nov 2006 07:04:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 23:04:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 23:04:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 470767142F7
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 23:04:22 -0800 (PST)
Message-ID: <14506578.1164697462288.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 23:04:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-747) RecordIO compiler does not produce
 correct Java code when buffer is used as key or value in map
In-Reply-To: <27032202.1164657323166.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-747?page=comments#action_12453812 ] 
            
Hadoop QA commented on HADOOP-747:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12345858/record-buffer.patch applied and successfully tested against trunk revision 479930

> RecordIO compiler does not produce correct Java code when buffer is used as key or value in map
> -----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-747
>                 URL: http://issues.apache.org/jira/browse/HADOOP-747
>             Project: Hadoop
>          Issue Type: Bug
>          Components: record
>    Affects Versions: 0.8.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: record-buffer.patch
>
>
> When buffer type is used as a key type or value type in map, the record IO translator does not produce correct serialization of deserialization code. Patch forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 07:26:45 2006
Return-Path: 
 <hadoop-dev-return-5388-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23150 invoked from network); 28 Nov 2006 07:26:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 07:26:45 -0000
Received: (qmail 30824 invoked by uid 500); 28 Nov 2006 07:26:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30790 invoked by uid 500); 28 Nov 2006 07:26:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30781 invoked by uid 99); 28 Nov 2006 07:26:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 23:26:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 23:26:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 35A527142F3
	for <hadoop-dev@lucene.apache.org>; Mon, 27 Nov 2006 23:26:23 -0800 (PST)
Message-ID: <26298023.1164698783216.JavaMail.jira@brutus>
Date: Mon, 27 Nov 2006 23:26:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-698) When DFS client fails to read from a
 datanode, the failed datanode is not excluded from target reselection
In-Reply-To: <17466448.1163027091463.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-698?page=comments#action_12453815 ] 
            
Hadoop QA commented on HADOOP-698:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12345881/datanode-exclude.patch applied and successfully tested against trunk revision 479931

> When DFS client fails to read from a datanode, the failed datanode is not excluded from target reselection
> ----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-698
>                 URL: http://issues.apache.org/jira/browse/HADOOP-698
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Hairong Kuang
>         Assigned To: Milind Bhandarkar
>         Attachments: datanode-exclude.patch
>
>
> In the method read(byte buf[ ], int off, int len) of DFSInputStream, when read fails,  it calls "blockSeekTo" to reselect a datanode. However, the failed datanode does not feed back to blockSeekTo. The datanode selection algorithm works as follows:
> * If the machine that the client is running on has a local copy, return the local machine;
> * Otherwise, randomly pick up one location.
> When the failed data node info does not feed back to target reselection, this leads to two flaws:
> 1. When a client fails to read from the local copy, for example, because of the checksum error, the local machine will always be chosen in retries.
> 2. Random selection may still return the same failed node.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 08:41:45 2006
Return-Path: 
 <hadoop-dev-return-5389-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47607 invoked from network); 28 Nov 2006 08:41:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 08:41:45 -0000
Received: (qmail 15651 invoked by uid 500); 28 Nov 2006 08:41:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15619 invoked by uid 500); 28 Nov 2006 08:41:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15610 invoked by uid 99); 28 Nov 2006 08:41:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 00:41:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 00:41:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A79127142F7
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 00:41:23 -0800 (PST)
Message-ID: <11653766.1164703283683.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 00:41:23 -0800 (PST)
From: "Feng Jiang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-689) hadoop should provide a common way to
 wrap instances with different types into one type
In-Reply-To: <2487900.1162955810892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-689?page=all ]

Feng Jiang updated HADOOP-689:
------------------------------

    Status: Patch Available  (was: Open)

Submit a new patch to replace the old patch. (just refine the javadoc.)

> hadoop should provide a common way to wrap instances with different types into one type
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-689
>                 URL: http://issues.apache.org/jira/browse/HADOOP-689
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>         Environment: All environment
>            Reporter: Feng Jiang
>         Attachments: HADOOP-689.patch
>
>
> When two sequence files, which have same Key type but different Value types, are mapped out to reduce, multiple Value types is not allowed. In this case, we need a way to wrap instances with different types into one class type to reduce.
> In current code, ObjectWritable is a sole choice. but it costs too many space, because the class declaration will be appended into output file as a string for every Key-value pair.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 08:43:43 2006
Return-Path: 
 <hadoop-dev-return-5390-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48578 invoked from network); 28 Nov 2006 08:43:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 08:43:43 -0000
Received: (qmail 16899 invoked by uid 500); 28 Nov 2006 08:43:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16665 invoked by uid 500); 28 Nov 2006 08:43:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16656 invoked by uid 99); 28 Nov 2006 08:43:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 00:43:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 00:43:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 420A27142F7
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 00:43:22 -0800 (PST)
Message-ID: <16751743.1164703402267.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 00:43:22 -0800 (PST)
From: "Feng Jiang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-689) hadoop should provide a common way to
 wrap instances with different types into one type
In-Reply-To: <2487900.1162955810892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-689?page=all ]

Feng Jiang updated HADOOP-689:
------------------------------

    Attachment: HADOOP-689.patch.new

Update the patch, just refined the javadoc.

> hadoop should provide a common way to wrap instances with different types into one type
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-689
>                 URL: http://issues.apache.org/jira/browse/HADOOP-689
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>         Environment: All environment
>            Reporter: Feng Jiang
>         Attachments: HADOOP-689.patch, HADOOP-689.patch.new
>
>
> When two sequence files, which have same Key type but different Value types, are mapped out to reduce, multiple Value types is not allowed. In this case, we need a way to wrap instances with different types into one class type to reduce.
> In current code, ObjectWritable is a sole choice. but it costs too many space, because the class declaration will be appended into output file as a string for every Key-value pair.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 11:07:48 2006
Return-Path: 
 <hadoop-dev-return-5391-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91398 invoked from network); 28 Nov 2006 11:07:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 11:07:48 -0000
Received: (qmail 64345 invoked by uid 500); 28 Nov 2006 11:07:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64217 invoked by uid 500); 28 Nov 2006 11:07:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64198 invoked by uid 99); 28 Nov 2006 11:07:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 03:07:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 03:07:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 99AB87142FB
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 03:07:24 -0800 (PST)
Message-ID: <16084593.1164712044626.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 03:07:24 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-753) Problem with the patch for Hadoop-723
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Problem with the patch for Hadoop-723
-------------------------------------

                 Key: HADOOP-753
                 URL: http://issues.apache.org/jira/browse/HADOOP-753
             Project: Hadoop
          Issue Type: Bug
            Reporter: Devaraj Das




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 11:09:44 2006
Return-Path: 
 <hadoop-dev-return-5392-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91741 invoked from network); 28 Nov 2006 11:09:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 11:09:44 -0000
Received: (qmail 66072 invoked by uid 500); 28 Nov 2006 11:09:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65831 invoked by uid 500); 28 Nov 2006 11:09:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65822 invoked by uid 99); 28 Nov 2006 11:09:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 03:09:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 03:09:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 613817142F7
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 03:09:22 -0800 (PST)
Message-ID: <1164744.1164712162395.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 03:09:22 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-753) Problem with the patch for
 Hadoop-723
In-Reply-To: <16084593.1164712044626.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-753?page=comments#action_12453880 ] 
            
Devaraj Das commented on HADOOP-753:
------------------------------------

There seems to be a problem with the patch for Hadoop-723. The sort benchmark throws up lots of errors (of the form mentioned in Hadoop-750) with this patch and the errors disappear when this patch is reversed.

> Problem with the patch for Hadoop-723
> -------------------------------------
>
>                 Key: HADOOP-753
>                 URL: http://issues.apache.org/jira/browse/HADOOP-753
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Devaraj Das
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 12:15:43 2006
Return-Path: 
 <hadoop-dev-return-5393-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19439 invoked from network); 28 Nov 2006 12:15:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 12:15:43 -0000
Received: (qmail 56843 invoked by uid 500); 28 Nov 2006 12:15:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56825 invoked by uid 500); 28 Nov 2006 12:15:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56808 invoked by uid 99); 28 Nov 2006 12:15:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 04:15:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 04:15:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 068FA7142F7
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 04:15:21 -0800 (PST)
Message-ID: <32202758.1164716121024.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 04:15:21 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-754) Problem with the patch for Hadoop-741
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Problem with the patch for Hadoop-741
-------------------------------------

                 Key: HADOOP-754
                 URL: http://issues.apache.org/jira/browse/HADOOP-754
             Project: Hadoop
          Issue Type: Bug
            Reporter: Devaraj Das


This is related to Hadoop-753. There seems to be a problem with the patch for Hadoop-741 also. The sort benchmark fails to run with this patch and without this patch (and the Hadoop-723 patch) the benchmark runs to completion (and in the last run without these patches in, the sort benchmark ran with 0 failures on a 355 node cluster).
Maybe these patches makes some other bugs surface.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 12:33:46 2006
Return-Path: 
 <hadoop-dev-return-5394-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27675 invoked from network); 28 Nov 2006 12:33:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 12:33:46 -0000
Received: (qmail 85069 invoked by uid 500); 28 Nov 2006 12:33:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85045 invoked by uid 500); 28 Nov 2006 12:33:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85036 invoked by uid 99); 28 Nov 2006 12:33:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 04:33:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 04:33:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0F40A7142F7
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 04:33:25 -0800 (PST)
Message-ID: <28790792.1164717205059.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 04:33:25 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
In-Reply-To: <30411461.1163635597099.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-728?page=comments#action_12453904 ] 
            
Sanjay Dahiya commented on HADOOP-728:
--------------------------------------

The reason of keeping PhasedFileSystem in mapred package was that it works only for tasks in a mapred job as of now. it used jobid/tipid/taskid in "mapred.system.dir" for temporary storage to avoid any possible conflicts among task outputs. Is it ok to have this in fs package with this dependency ? 
Also currently it extends FileSystem abstract base class for API compatibility, it takes another pre initialized file system as constructor argument and channels calls to that, Just for this there doesnt seem to be a need for another FIlterFileSystem. 



> Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-728
>                 URL: http://issues.apache.org/jira/browse/HADOOP-728
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-728.patch
>
>
> a) a file is create for the output instead of a directory.
> b) there is no way to understand what is going on from the client output
> I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
> ~

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 16:13:17 2006
Return-Path: 
 <hadoop-dev-return-5395-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20820 invoked from network); 28 Nov 2006 16:13:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 16:13:17 -0000
Received: (qmail 47372 invoked by uid 500); 28 Nov 2006 16:13:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47348 invoked by uid 500); 28 Nov 2006 16:13:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47338 invoked by uid 99); 28 Nov 2006 16:13:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 08:13:25 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.145.54.173] (HELO mrout3.yahoo.com) (216.145.54.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 08:13:12 -0800
Received: from [IPv6:::1] (socks1.corp.yahoo.com [216.145.54.158])
	by mrout3.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id kASGCB5B044659
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 08:12:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=wajyUY/LYxp1H4sIj6PlDKRKIx0PRIzmZwwrb2EljNMl/q/sbOryYcWvHbCYvAzk
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <26FA5E0F-3691-4B5E-B119-88640F45ABE6@yahoo-inc.com>
References: <26FA5E0F-3691-4B5E-B119-88640F45ABE6@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <053D5673-6F66-4A45-B8AF-8663CEB2F50C@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Sanjay Dahiya <sanjayd@yahoo-inc.com>
Subject: Re: testing patches
Date: Tue, 28 Nov 2006 21:42:17 +0530
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Nigel,

this is great!
Does it happen for all submitted patches or for patches with a "patch  
available" status on JIRA?

Sanjay

On 28-Nov-06, at 12:29 PM, Nigel Daley wrote:

> Hi all,
>
> Just wanted to let you know that I've setup a build and test server  
> for patches.  When a patch is submitted to JIRA, my automated  
> process will download it, apply it to HEAD and execute the following:
>
>   ant clean clean-libhdfs compile test test-libhdfs package-libhdfs  
> tar
>
> If the build and test of the patch succeeds, my process will add a  
> "+1" comment to the JIRA bug as can be seen in the email below.   
> This is done as the "Hadoop QA" JIRA user.  Note, this isn't meant  
> to be a replacement for your own build and testing before you  
> submit your patch ;-)
>
> Currently, only the latest .patch attachment is downloaded and  
> applied by my process.
>
> Hope this helps!
>
> Cheers,
> Nige
> QA guy
>
>
> On Nov 27, 2006, at 10:44 PM, Hadoop QA (JIRA) wrote:
>> Hadoop QA commented on HADOOP-:
>> ----------------------------------
>>
>> +1, http://issues.apache.org/jira/secure/attachment/12345863/jsp- 
>> null.patch applied and successfully tested against trunk revision  
>> 479926
>>
>>> The jobfailures.jsp gets a NullPointerException after a task  
>>> tracker has been lost
>>> -------------------------------------------------------------------- 
>>> --------------
>>>
>>>                 URL: http://issues.apache.org/jira/browse/HADOOP-749
>>>             Project: Hadoop
>>>          Issue Type: Bug
>>>          Components: mapred
>>>    Affects Versions: 0.8.0
>>>            Reporter: Owen O'Malley
>>>         Assigned To: Owen O'Malley
>>>             Fix For: 0.9.0
>>>
>>>         Attachments: jsp-null.patch
>>>
>
>


From MAILER-DAEMON Tue Nov 28 17:17:48 2006
Return-Path: 
 <hadoop-dev-return-5396-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47301 invoked from network); 28 Nov 2006 17:17:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 17:17:48 -0000
Received: (qmail 52231 invoked by uid 500); 28 Nov 2006 17:17:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52128 invoked by uid 500); 28 Nov 2006 17:17:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52117 invoked by uid 99); 28 Nov 2006 17:17:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 09:17:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 09:17:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6EEE47142FD
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 09:17:26 -0800 (PST)
Message-ID: <19855481.1164734246451.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 09:17:26 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-639?page=all ]

Arun C Murthy updated HADOOP-639:
---------------------------------

    Attachment: HADOOP-639_1.patch

Ok, here is an initial patch for review; I'll test this on a bigger cluster once HADOOP-753 / HADOOP-754 are resolved... meanwhile I'd appreciate feedback on this one...

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-639_1.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 17:44:34 2006
Return-Path: 
 <hadoop-dev-return-5397-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57054 invoked from network); 28 Nov 2006 17:44:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 17:44:34 -0000
Received: (qmail 31815 invoked by uid 500); 28 Nov 2006 17:44:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31583 invoked by uid 500); 28 Nov 2006 17:44:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31574 invoked by uid 99); 28 Nov 2006 17:44:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 09:44:42 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 09:44:30 -0800
Received: from [10.72.109.129] (thickbeside-lm.corp.yahoo.com [10.72.109.129])
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kASHi3EU092890
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 09:44:04 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=zvnF2QO1Nm+m6cjAYrd0NS2fagSWJl6XYvIS71h7wCNVMyksr5K1EoXqDULl0C6c
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <053D5673-6F66-4A45-B8AF-8663CEB2F50C@yahoo-inc.com>
References: <26FA5E0F-3691-4B5E-B119-88640F45ABE6@yahoo-inc.com>
 <053D5673-6F66-4A45-B8AF-8663CEB2F50C@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <65E91440-AE2E-4182-9D76-880E3200B261@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Nigel Daley <ndaley@yahoo-inc.com>
Subject: Re: testing patches
Date: Tue, 28 Nov 2006 09:43:55 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

This process only kicks in for "patch available" patches.  It's meant  
as an aid to the project commiters.

Cheers,
Nige


On Nov 28, 2006, at 8:12 AM, Sanjay Dahiya wrote:

> Hi Nigel,
>
> this is great!
> Does it happen for all submitted patches or for patches with a  
> "patch available" status on JIRA?
>
> Sanjay
>
> On 28-Nov-06, at 12:29 PM, Nigel Daley wrote:
>
>> Hi all,
>>
>> Just wanted to let you know that I've setup a build and test  
>> server for patches.  When a patch is submitted to JIRA, my  
>> automated process will download it, apply it to HEAD and execute  
>> the following:
>>
>>   ant clean clean-libhdfs compile test test-libhdfs package- 
>> libhdfs tar
>>
>> If the build and test of the patch succeeds, my process will add a  
>> "+1" comment to the JIRA bug as can be seen in the email below.   
>> This is done as the "Hadoop QA" JIRA user.  Note, this isn't meant  
>> to be a replacement for your own build and testing before you  
>> submit your patch ;-)
>>
>> Currently, only the latest .patch attachment is downloaded and  
>> applied by my process.
>>
>> Hope this helps!
>>
>> Cheers,
>> Nige
>> QA guy
>>
>>
>> On Nov 27, 2006, at 10:44 PM, Hadoop QA (JIRA) wrote:
>>> Hadoop QA commented on HADOOP-:
>>> ----------------------------------
>>>
>>> +1, http://issues.apache.org/jira/secure/attachment/12345863/jsp- 
>>> null.patch applied and successfully tested against trunk revision  
>>> 479926
>>>
>>>> The jobfailures.jsp gets a NullPointerException after a task  
>>>> tracker has been lost
>>>> ------------------------------------------------------------------- 
>>>> ---------------
>>>>
>>>>                 URL: http://issues.apache.org/jira/browse/ 
>>>> HADOOP-749
>>>>             Project: Hadoop
>>>>          Issue Type: Bug
>>>>          Components: mapred
>>>>    Affects Versions: 0.8.0
>>>>            Reporter: Owen O'Malley
>>>>         Assigned To: Owen O'Malley
>>>>             Fix For: 0.9.0
>>>>
>>>>         Attachments: jsp-null.patch
>>>>
>>
>>
>


From MAILER-DAEMON Tue Nov 28 18:12:54 2006
Return-Path: 
 <hadoop-dev-return-5398-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67344 invoked from network); 28 Nov 2006 18:12:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 18:12:54 -0000
Received: (qmail 14421 invoked by uid 500); 28 Nov 2006 18:13:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14381 invoked by uid 500); 28 Nov 2006 18:13:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14372 invoked by uid 99); 28 Nov 2006 18:13:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:13:02 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:12:51 -0800
Received: from memberfamouslx (memberfamous-lx.corp.yahoo.com [172.21.103.73])
	by mrout2-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 kASICHw9029551
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 10:12:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:thread-index:x-mimeole;
	b=qqwETXhBwJ6fEkFEVzIbxPbJEN4sQkXOiJPeKhPdNCtOhTTZ7BCeEtsGzpWzVwLW
From: "Yoram Arnon" <yarnon@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: testing patches
Date: Tue, 28 Nov 2006 10:12:17 -0800
Message-ID: <004701c71318$bd3505a0$929015ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <26FA5E0F-3691-4B5E-B119-88640F45ABE6@yahoo-inc.com>
Thread-Index: AccSus0+fsMody4hRsqWU4qhY5HoFQAXc7Lw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org

Building contrib and test-contrib may help catch bugs that affect
hadoop-streaming
Yoram

> -----Original Message-----
> From: Nigel Daley [mailto:ndaley@yahoo-inc.com] 
> Sent: Monday, November 27, 2006 10:59 PM
> To: hadoop-dev@lucene.apache.org
> Subject: testing patches
> 
> Hi all,
> 
> Just wanted to let you know that I've setup a build and test server  
> for patches.  When a patch is submitted to JIRA, my automated 
> process  
> will download it, apply it to HEAD and execute the following:
> 
>    ant clean clean-libhdfs compile test test-libhdfs 
> package-libhdfs tar
> 
> If the build and test of the patch succeeds, my process will add a  
> "+1" comment to the JIRA bug as can be seen in the email 
> below.  This  
> is done as the "Hadoop QA" JIRA user.  Note, this isn't meant 
> to be a  
> replacement for your own build and testing before you submit your  
> patch ;-)
> 
> Currently, only the latest .patch attachment is downloaded and  
> applied by my process.
> 
> Hope this helps!
> 
> Cheers,
> Nige
> QA guy
> 
> 
> On Nov 27, 2006, at 10:44 PM, Hadoop QA (JIRA) wrote:
> > Hadoop QA commented on HADOOP-:
> > ----------------------------------
> >
> > +1, http://issues.apache.org/jira/secure/attachment/12345863/jsp- 
> > null.patch applied and successfully tested against trunk revision  
> > 479926
> >
> >> The jobfailures.jsp gets a NullPointerException after a task  
> >> tracker has been lost
> >> 
> --------------------------------------------------------------------- 
> >> -------------
> >>
> >>                 URL: 
> http://issues.apache.org/jira/browse/HADOOP-749
> >>             Project: Hadoop
> >>          Issue Type: Bug
> >>          Components: mapred
> >>    Affects Versions: 0.8.0
> >>            Reporter: Owen O'Malley
> >>         Assigned To: Owen O'Malley
> >>             Fix For: 0.9.0
> >>
> >>         Attachments: jsp-null.patch
> >>
> 
> 
> 


From MAILER-DAEMON Tue Nov 28 18:19:54 2006
Return-Path: 
 <hadoop-dev-return-5399-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70945 invoked from network); 28 Nov 2006 18:19:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 18:19:54 -0000
Received: (qmail 32732 invoked by uid 500); 28 Nov 2006 18:19:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32648 invoked by uid 500); 28 Nov 2006 18:19:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32504 invoked by uid 99); 28 Nov 2006 18:19:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:19:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:19:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CA5417142F9
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 10:19:26 -0800 (PST)
Message-ID: <29490979.1164737966826.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 10:19:26 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-689) hadoop should provide a common way
 to wrap instances with different types into one type
In-Reply-To: <2487900.1162955810892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-689?page=comments#action_12454060 ] 
            
Hadoop QA commented on HADOOP-689:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12345896/HADOOP-689.patch.new applied and successfully tested against trunk revision 480142

> hadoop should provide a common way to wrap instances with different types into one type
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-689
>                 URL: http://issues.apache.org/jira/browse/HADOOP-689
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>         Environment: All environment
>            Reporter: Feng Jiang
>         Attachments: HADOOP-689.patch, HADOOP-689.patch.new
>
>
> When two sequence files, which have same Key type but different Value types, are mapped out to reduce, multiple Value types is not allowed. In this case, we need a way to wrap instances with different types into one class type to reduce.
> In current code, ObjectWritable is a sole choice. but it costs too many space, because the class declaration will be appended into output file as a string for every Key-value pair.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 18:19:55 2006
Return-Path: 
 <hadoop-dev-return-5400-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70975 invoked from network); 28 Nov 2006 18:19:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 18:19:55 -0000
Received: (qmail 33097 invoked by uid 500); 28 Nov 2006 18:19:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33027 invoked by uid 500); 28 Nov 2006 18:19:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32994 invoked by uid 99); 28 Nov 2006 18:19:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:19:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:19:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C06D77142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 10:19:28 -0800 (PST)
Message-ID: <9075376.1164737968785.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 10:19:28 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-657) Free temporary space should be
 modelled better
In-Reply-To: <11001957.1162254376612.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-657?page=comments#action_12454061 ] 
            
Arun C Murthy commented on HADOOP-657:
--------------------------------------

Taking things forward, looks like both Owen/Doug agree that we need to send metrics through the heartbeat... 

... given this we are looking at implementing a MapReduceMetricsContext which sends over heartbeat (with metrics) via RPC to the JT and TaskTracker.offerService() becoming a callback for the timer. Does that make sense or do folks prefer something different?

> Free temporary space should be modelled better
> ----------------------------------------------
>
>                 Key: HADOOP-657
>                 URL: http://issues.apache.org/jira/browse/HADOOP-657
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>
> Currently, there is a configurable size that must be free for a task tracker to accept a new task. However, that isn't a very good model of what the task is likely to take. I'd like to propose:
> Map tasks:  totalInputSize * conf.getFloat("map.output.growth.factor", 1.0) / numMaps
> Reduce tasks: totalInputSize * 2 * conf.getFloat("map.output.growth.factor", 1.0) / numReduces
> where totalInputSize is the size of all the maps inputs for the given job.
> To start a new task, 
>   newTaskAllocation + (sum over running tasks of (1.0 - done) * allocation) >= 
>        free disk * conf.getFloat("mapred.max.scratch.allocation", 0.90);
> So in English, we will model the expected sizes of tasks and only task tasks that should leave us a 10% margin. With:
> map.output.growth.factor -- the relative size of the transient data relative to the map inputs
> mapred.max.scratch.allocation -- the maximum amount of our disk we want to allocate to tasks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 18:29:07 2006
Return-Path: 
 <hadoop-dev-return-5401-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74073 invoked from network); 28 Nov 2006 18:29:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 18:29:07 -0000
Received: (qmail 46180 invoked by uid 500); 28 Nov 2006 18:29:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46136 invoked by uid 500); 28 Nov 2006 18:29:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46097 invoked by uid 99); 28 Nov 2006 18:29:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:29:11 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:29:00 -0800
Received: from [10.72.109.129] (thickbeside-lm.corp.yahoo.com [10.72.109.129])
	by rsmtp1.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kASIScwG003348
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 10:28:38 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=foBcZ9o1FbE8kwDGcm8qIxMf9401T0+U8D+mHUw6regU2d7fWucMkbp2CRAMvQUn
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <004701c71318$bd3505a0$929015ac@ds.corp.yahoo.com>
References: <004701c71318$bd3505a0$929015ac@ds.corp.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A1C80A5F-4738-41CC-A36B-C7D7208D680E@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Nigel Daley <ndaley@yahoo-inc.com>
Subject: Re: testing patches
Date: Tue, 28 Nov 2006 10:28:30 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

The test target already incorporates test-contrib, so streaming is  
getting built and tested :-)

Cheers,
Nige

On Nov 28, 2006, at 10:12 AM, Yoram Arnon wrote:

> Building contrib and test-contrib may help catch bugs that affect
> hadoop-streaming
> Yoram
>
>> -----Original Message-----
>> From: Nigel Daley [mailto:ndaley@yahoo-inc.com]
>> Sent: Monday, November 27, 2006 10:59 PM
>> To: hadoop-dev@lucene.apache.org
>> Subject: testing patches
>>
>> Hi all,
>>
>> Just wanted to let you know that I've setup a build and test server
>> for patches.  When a patch is submitted to JIRA, my automated
>> process
>> will download it, apply it to HEAD and execute the following:
>>
>>    ant clean clean-libhdfs compile test test-libhdfs
>> package-libhdfs tar
>>
>> If the build and test of the patch succeeds, my process will add a
>> "+1" comment to the JIRA bug as can be seen in the email
>> below.  This
>> is done as the "Hadoop QA" JIRA user.  Note, this isn't meant
>> to be a
>> replacement for your own build and testing before you submit your
>> patch ;-)
>>
>> Currently, only the latest .patch attachment is downloaded and
>> applied by my process.
>>
>> Hope this helps!
>>
>> Cheers,
>> Nige
>> QA guy
>>
>>
>> On Nov 27, 2006, at 10:44 PM, Hadoop QA (JIRA) wrote:
>>> Hadoop QA commented on HADOOP-:
>>> ----------------------------------
>>>
>>> +1, http://issues.apache.org/jira/secure/attachment/12345863/jsp-
>>> null.patch applied and successfully tested against trunk revision
>>> 479926
>>>
>>>> The jobfailures.jsp gets a NullPointerException after a task
>>>> tracker has been lost
>>>>
>> ---------------------------------------------------------------------
>>>> -------------
>>>>
>>>>                 URL:
>> http://issues.apache.org/jira/browse/HADOOP-749
>>>>             Project: Hadoop
>>>>          Issue Type: Bug
>>>>          Components: mapred
>>>>    Affects Versions: 0.8.0
>>>>            Reporter: Owen O'Malley
>>>>         Assigned To: Owen O'Malley
>>>>             Fix For: 0.9.0
>>>>
>>>>         Attachments: jsp-null.patch
>>>>
>>
>>
>>
>


From MAILER-DAEMON Tue Nov 28 18:38:29 2006
Return-Path: 
 <hadoop-dev-return-5402-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76739 invoked from network); 28 Nov 2006 18:38:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 18:38:29 -0000
Received: (qmail 71225 invoked by uid 500); 28 Nov 2006 18:38:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71169 invoked by uid 500); 28 Nov 2006 18:38:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71003 invoked by uid 99); 28 Nov 2006 18:38:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:38:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:38:16 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B81CD7142F9
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 10:37:24 -0800 (PST)
Message-ID: <22136110.1164739044751.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 10:37:24 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-674) Hadoop records should provide
 comvenient APIs for serialization/deserialization
In-Reply-To: <10006323.1162509916598.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-674?page=comments#action_12454068 ] 
            
Doug Cutting commented on HADOOP-674:
-------------------------------------

Should this be an interface that's implemented by the generated code?

> Hadoop records should provide comvenient APIs for serialization/deserialization
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-674
>                 URL: http://issues.apache.org/jira/browse/HADOOP-674
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>            Reporter: Runping Qi
>
> I found the following APIs are very convenient to use and should be  part of the generated class from Jute IDL :
> public BytesWritable serialize(String format);
> public void deserialize(BytesWitable data, String format);
> public static MyRecordJT deserialize(BytesWitable data, String format);

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 18:48:45 2006
Return-Path: 
 <hadoop-dev-return-5403-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79998 invoked from network); 28 Nov 2006 18:48:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 18:48:45 -0000
Received: (qmail 93771 invoked by uid 500); 28 Nov 2006 18:48:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93748 invoked by uid 500); 28 Nov 2006 18:48:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93739 invoked by uid 99); 28 Nov 2006 18:48:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:48:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:48:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0E30A7142F5
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 10:48:24 -0800 (PST)
Message-ID: <15361021.1164739704055.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 10:48:24 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-738) dfs get or copyToLocal should not
 copy crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-738?page=comments#action_12454070 ] 
            
Doug Cutting commented on HADOOP-738:
-------------------------------------

> I see two different issues here.

Me too, but I'm not sure they are the same two.

One is a bug.  From the original description, "When we -put, since the crc files already exist on DFS, this put fails."  When local CRC files are enabled, a -get followed by a -put of the same file should not fail, but apparently it does.  This should work, no?

The other is a feature request to be able to disable CRC creation in -get.  I'm okay with this feature.

I'd rather fix the bug before we introduce the feature, especially if CRC-free -get becomes the default, since it masks the bug.


> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 18:50:04 2006
Return-Path: 
 <hadoop-dev-return-5404-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80143 invoked from network); 28 Nov 2006 18:50:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 18:50:04 -0000
Received: (qmail 94712 invoked by uid 500); 28 Nov 2006 18:50:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94477 invoked by uid 500); 28 Nov 2006 18:50:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94468 invoked by uid 99); 28 Nov 2006 18:50:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:50:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [204.127.192.84] (HELO rwcrmhc14.comcast.net) (204.127.192.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:49:59 -0800
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc14) with ESMTP
          id <20061128184938m14002mco1e>; Tue, 28 Nov 2006 18:49:39 +0000
Message-ID: <456C84C2.4080105@apache.org>
Date: Tue, 28 Nov 2006 10:49:38 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: testing patches
References: <26FA5E0F-3691-4B5E-B119-88640F45ABE6@yahoo-inc.com>
In-Reply-To: <26FA5E0F-3691-4B5E-B119-88640F45ABE6@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Nigel Daley wrote:
> If the build and test of the patch succeeds, my process will add a "+1" 
> comment to the JIRA bug as can be seen in the email below.

And if it fails is any comment added?

Doug

From MAILER-DAEMON Tue Nov 28 18:52:47 2006
Return-Path: 
 <hadoop-dev-return-5405-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80711 invoked from network); 28 Nov 2006 18:52:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 18:52:47 -0000
Received: (qmail 97839 invoked by uid 500); 28 Nov 2006 18:52:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97805 invoked by uid 500); 28 Nov 2006 18:52:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97259 invoked by uid 99); 28 Nov 2006 18:52:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:52:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:52:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BB3FB7142F9
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 10:52:22 -0800 (PST)
Message-ID: <7969481.1164739942763.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 10:52:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-755) Streaming causes a lot of broken pipes
 which leads to job failure
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Streaming causes a lot of broken pipes which leads to job failure
-----------------------------------------------------------------

                 Key: HADOOP-755
                 URL: http://issues.apache.org/jira/browse/HADOOP-755
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
            Reporter: Mahadev konar
         Assigned To: Sameer Paranjpye


java.io.IOException: Broken pipe
	at java.io.FileOutputStream.writeBytes(Native Method)
	at java.io.FileOutputStream.write(FileOutputStream.java:260)
	at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
	at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
	at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:124)
	at java.io.DataOutputStream.flush(DataOutputStream.java:106)
	at org.apache.hadoop.streaming.PipeMapper.map(PipeMapper.java:77)
	at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:48)
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:215)
	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1247)


	at org.apache.hadoop.streaming.PipeMapper.map(PipeMapper.java:88)
	at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:48)
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:215)
	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1247)

A lot of these errors occur in streaming. THis leads to job failure. I still am not sure what the reason might be of these errors, but these erros occur too often. I will try and invetigate more to see what the reason might be.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 18:54:45 2006
Return-Path: 
 <hadoop-dev-return-5406-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81414 invoked from network); 28 Nov 2006 18:54:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 18:54:45 -0000
Received: (qmail 2289 invoked by uid 500); 28 Nov 2006 18:54:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2265 invoked by uid 500); 28 Nov 2006 18:54:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2255 invoked by uid 99); 28 Nov 2006 18:54:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:54:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:54:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E2F807142F7
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 10:54:23 -0800 (PST)
Message-ID: <5166091.1164740063927.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 10:54:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-753) Problem with the patch for
 Hadoop-723
In-Reply-To: <16084593.1164712044626.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-753?page=comments#action_12454075 ] 
            
Doug Cutting commented on HADOOP-753:
-------------------------------------

Note that if you use HADOOP (all-caps) in bug ids then will Jira create links to the relevant issues, HADOOP-723 and HADOOP-750 in this case.

> Problem with the patch for Hadoop-723
> -------------------------------------
>
>                 Key: HADOOP-753
>                 URL: http://issues.apache.org/jira/browse/HADOOP-753
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Devaraj Das
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 18:57:27 2006
Return-Path: 
 <hadoop-dev-return-5407-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82284 invoked from network); 28 Nov 2006 18:57:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 18:57:27 -0000
Received: (qmail 6911 invoked by uid 500); 28 Nov 2006 18:57:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6881 invoked by uid 500); 28 Nov 2006 18:57:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6854 invoked by uid 99); 28 Nov 2006 18:57:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:57:23 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:57:12 -0800
Received: from [10.72.109.129] (thickbeside-lm.corp.yahoo.com [10.72.109.129])
	by rsmtp1.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kASIupN2005496
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 10:56:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=CxVds8BLfa37dHpaD4oc3WgYw18FOC6LYP4m3hIj55vGapDFdPWRf5mwKGMrgXa3
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <456C84C2.4080105@apache.org>
References: <26FA5E0F-3691-4B5E-B119-88640F45ABE6@yahoo-inc.com>
 <456C84C2.4080105@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D09827C2-E75F-4C6B-AB5B-60AE25EA8885@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Nigel Daley <ndaley@yahoo-inc.com>
Subject: Re: testing patches
Date: Tue, 28 Nov 2006 10:56:42 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Nov 28, 2006, at 10:49 AM, Doug Cutting wrote:

> Nigel Daley wrote:
>> If the build and test of the patch succeeds, my process will add a  
>> "+1" comment to the JIRA bug as can be seen in the email below.
>
> And if it fails is any comment added?

Not automatically.  Currently I get an email if it fails.  This  
allows me to look into any number of reason that the patch or process  
may have failed.  If the failure seems legitimate, I will manually  
add a -1 comment to JIRA.

Also, the process now picks up the last attachment on the bug (before  
it was the last .patch attachment).

Nige

From MAILER-DAEMON Tue Nov 28 19:18:45 2006
Return-Path: 
 <hadoop-dev-return-5408-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89183 invoked from network); 28 Nov 2006 19:18:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 19:18:45 -0000
Received: (qmail 68459 invoked by uid 500); 28 Nov 2006 19:18:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68421 invoked by uid 500); 28 Nov 2006 19:18:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68404 invoked by uid 99); 28 Nov 2006 19:18:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 11:18:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 11:18:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0E6B97142F9
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 11:18:23 -0800 (PST)
Message-ID: <23232561.1164741503056.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 11:18:23 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-752) Possible locking issues in HDFS
 Namenode
In-Reply-To: <3588846.1164693201081.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-752?page=comments#action_12454079 ] 
            
Raghu Angadi commented on HADOOP-752:
-------------------------------------


DFSNodesStatus() locks 'heartBeats' and 'datanodeMap'.  As you noted these are not locked in registerDatanode().

I think we should have explicitly stated policy about the locking, which locks are held to protect which state. This will help anyone writing new code or reading the code.


> Possible locking issues in HDFS Namenode
> ----------------------------------------
>
>                 Key: HADOOP-752
>                 URL: http://issues.apache.org/jira/browse/HADOOP-752
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> I have been investigating the cause of random Namenode memory corruptions/memory overflows, etc. Please comment.
>  1. The functions datanodeReport() and DFSNodesStatus() do not acquire the global lock.
>    This can race with another thread invoking registerDatanode(). registerDatanode()
>    can remove a datanode (thru wipeDatanode()) while the datanodeReport thread is
>    traversing the list of datanodes. This can cause exceptions to occur.
>  2. The blocksMap is protected by the global lock. The setReplication() call does not acquire
>    the global lock when it calls proccessOverReplicatedBlock(). This can cause corruption in blockMap.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 19:59:42 2006
Return-Path: 
 <hadoop-dev-return-5409-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3038 invoked from network); 28 Nov 2006 19:59:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 19:59:42 -0000
Received: (qmail 59460 invoked by uid 500); 28 Nov 2006 19:59:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59438 invoked by uid 500); 28 Nov 2006 19:59:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59428 invoked by uid 99); 28 Nov 2006 19:59:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 11:59:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 11:59:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3A5E57142FA
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 11:59:21 -0800 (PST)
Message-ID: <26310722.1164743961235.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 11:59:21 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

new dfsadmin command to wait until safe mode is exited
------------------------------------------------------

                 Key: HADOOP-756
                 URL: http://issues.apache.org/jira/browse/HADOOP-756
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
    Affects Versions: 0.8.0
            Reporter: Owen O'Malley
         Assigned To: Sameer Paranjpye
            Priority: Minor


I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 20:10:44 2006
Return-Path: 
 <hadoop-dev-return-5410-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6659 invoked from network); 28 Nov 2006 20:10:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 20:10:44 -0000
Received: (qmail 82761 invoked by uid 500); 28 Nov 2006 20:10:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82737 invoked by uid 500); 28 Nov 2006 20:10:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82728 invoked by uid 99); 28 Nov 2006 20:10:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 12:10:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 12:10:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 41E8F7142F8
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 12:10:22 -0800 (PST)
Message-ID: <20532609.1164744622267.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 12:10:22 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-674) Hadoop records should provide
 comvenient APIs for serialization/deserialization
In-Reply-To: <10006323.1162509916598.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-674?page=comments#action_12454097 ] 
            
Milind Bhandarkar commented on HADOOP-674:
------------------------------------------

Yes, the first two methods should definitely be part of the Record interface.

> Hadoop records should provide comvenient APIs for serialization/deserialization
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-674
>                 URL: http://issues.apache.org/jira/browse/HADOOP-674
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>            Reporter: Runping Qi
>
> I found the following APIs are very convenient to use and should be  part of the generated class from Jute IDL :
> public BytesWritable serialize(String format);
> public void deserialize(BytesWitable data, String format);
> public static MyRecordJT deserialize(BytesWitable data, String format);

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 20:10:46 2006
Return-Path: 
 <hadoop-dev-return-5411-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6695 invoked from network); 28 Nov 2006 20:10:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 20:10:46 -0000
Received: (qmail 83026 invoked by uid 500); 28 Nov 2006 20:10:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82994 invoked by uid 500); 28 Nov 2006 20:10:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82985 invoked by uid 99); 28 Nov 2006 20:10:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 12:10:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 12:10:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3C5637142F7
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 12:10:24 -0800 (PST)
Message-ID: <26554697.1164744624244.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 12:10:24 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-674) Hadoop records should provide
 comvenient APIs for serialization/deserialization
In-Reply-To: <10006323.1162509916598.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-674?page=all ]

Milind Bhandarkar reassigned HADOOP-674:
----------------------------------------

    Assignee: Milind Bhandarkar

> Hadoop records should provide comvenient APIs for serialization/deserialization
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-674
>                 URL: http://issues.apache.org/jira/browse/HADOOP-674
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>            Reporter: Runping Qi
>         Assigned To: Milind Bhandarkar
>
> I found the following APIs are very convenient to use and should be  part of the generated class from Jute IDL :
> public BytesWritable serialize(String format);
> public void deserialize(BytesWitable data, String format);
> public static MyRecordJT deserialize(BytesWitable data, String format);

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 23:33:54 2006
Return-Path: 
 <hadoop-dev-return-5412-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75021 invoked from network); 28 Nov 2006 23:33:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 23:33:54 -0000
Received: (qmail 7559 invoked by uid 500); 28 Nov 2006 23:33:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7390 invoked by uid 500); 28 Nov 2006 23:33:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7341 invoked by uid 99); 28 Nov 2006 23:33:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 15:33:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 15:33:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D0CBE7142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 15:33:23 -0800 (PST)
Message-ID: <22695407.1164756803852.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 15:33:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-749) The jobfailures.jsp gets a
 NullPointerException after a task tracker has been lost
In-Reply-To: <13364772.1164662122680.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-749?page=all ]

Doug Cutting updated HADOOP-749:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> The jobfailures.jsp gets a NullPointerException after a task tracker has been lost
> ----------------------------------------------------------------------------------
>
>                 Key: HADOOP-749
>                 URL: http://issues.apache.org/jira/browse/HADOOP-749
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>         Attachments: jsp-null.patch
>
>
> The job tracker gets a NullPointerException:
> 2006-11-27 06:59:25,148 WARN /: /jobfailures.jsp?jobid=job_0001&kind=map:
> java.lang.NullPointerException
>         at org.apache.hadoop.mapred.jobfailures_jsp.printFailedAttempts(jobfailu
> res_jsp.java:57)
>         at org.apache.hadoop.mapred.jobfailures_jsp.printFailures(jobfailures_js
> p.java:103)
>         at org.apache.hadoop.mapred.jobfailures_jsp._jspService(jobfailures_jsp.
> java:168)
>         at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)
>         at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
>         at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:427
> )
>         at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicati
> onHandler.java:475)
>         at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:5
> 67)
>         at org.mortbay.http.HttpContext.handle(HttpContext.java:1565)
>         at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplication
> Context.java:635)
>         at org.mortbay.http.HttpContext.handle(HttpContext.java:1517)
>         at org.mortbay.http.HttpServer.service(HttpServer.java:954)
>         at org.mortbay.http.HttpConnection.service(HttpConnection.java:814)
>         at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:981)
>         at org.mortbay.http.HttpConnection.handle(HttpConnection.java:831)
>         at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:
> 244)
>         at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)
>         at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
> when there is a lost task tracker. Since the task tracker was lost, when the jsp tries to get the task tracker object for that task, it gets a null value. The jsp needs to protect itself from nulls.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 23:37:57 2006
Return-Path: 
 <hadoop-dev-return-5413-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76746 invoked from network); 28 Nov 2006 23:37:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 23:37:57 -0000
Received: (qmail 15076 invoked by uid 500); 28 Nov 2006 23:37:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15037 invoked by uid 500); 28 Nov 2006 23:37:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14964 invoked by uid 99); 28 Nov 2006 23:37:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 15:37:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 15:37:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 038E37142FB
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 15:37:25 -0800 (PST)
Message-ID: <7483001.1164757045012.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 15:37:25 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-747) RecordIO compiler does not produce
 correct Java code when buffer is used as key or value in map
In-Reply-To: <27032202.1164657323166.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-747?page=all ]

Doug Cutting updated HADOOP-747:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Milind!

> RecordIO compiler does not produce correct Java code when buffer is used as key or value in map
> -----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-747
>                 URL: http://issues.apache.org/jira/browse/HADOOP-747
>             Project: Hadoop
>          Issue Type: Bug
>          Components: record
>    Affects Versions: 0.8.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: record-buffer.patch
>
>
> When buffer type is used as a key type or value type in map, the record IO translator does not produce correct serialization of deserialization code. Patch forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Nov 28 23:51:47 2006
Return-Path: 
 <hadoop-dev-return-5414-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79724 invoked from network); 28 Nov 2006 23:51:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 23:51:47 -0000
Received: (qmail 42485 invoked by uid 500); 28 Nov 2006 23:51:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42461 invoked by uid 500); 28 Nov 2006 23:51:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42452 invoked by uid 99); 28 Nov 2006 23:51:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 15:51:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 15:51:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E20557142FB
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 15:51:25 -0800 (PST)
Message-ID: <8788492.1164757885923.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 15:51:25 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-698) When DFS client fails to read from a
 datanode, the failed datanode is not excluded from target reselection
In-Reply-To: <17466448.1163027091463.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-698?page=all ]

Doug Cutting updated HADOOP-698:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Milind!

> When DFS client fails to read from a datanode, the failed datanode is not excluded from target reselection
> ----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-698
>                 URL: http://issues.apache.org/jira/browse/HADOOP-698
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Hairong Kuang
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.9.0
>
>         Attachments: datanode-exclude.patch
>
>
> In the method read(byte buf[ ], int off, int len) of DFSInputStream, when read fails,  it calls "blockSeekTo" to reselect a datanode. However, the failed datanode does not feed back to blockSeekTo. The datanode selection algorithm works as follows:
> * If the machine that the client is running on has a local copy, return the local machine;
> * Otherwise, randomly pick up one location.
> When the failed data node info does not feed back to target reselection, this leads to two flaws:
> 1. When a client fails to read from the local copy, for example, because of the checksum error, the local machine will always be chosen in retries.
> 2. Random selection may still return the same failed node.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 00:07:49 2006
Return-Path: 
 <hadoop-dev-return-5415-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84575 invoked from network); 29 Nov 2006 00:07:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 00:07:49 -0000
Received: (qmail 74620 invoked by uid 500); 29 Nov 2006 00:07:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74593 invoked by uid 500); 29 Nov 2006 00:07:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74583 invoked by uid 99); 29 Nov 2006 00:07:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 16:07:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 16:07:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3145F7142FD
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 16:07:27 -0800 (PST)
Message-ID: <22058307.1164758847199.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 16:07:27 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-689) hadoop should provide a common way to
 wrap instances with different types into one type
In-Reply-To: <2487900.1162955810892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-689?page=all ]

Doug Cutting updated HADOOP-689:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Feng Jiang!

> hadoop should provide a common way to wrap instances with different types into one type
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-689
>                 URL: http://issues.apache.org/jira/browse/HADOOP-689
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>         Environment: All environment
>            Reporter: Feng Jiang
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-689.patch, HADOOP-689.patch.new
>
>
> When two sequence files, which have same Key type but different Value types, are mapped out to reduce, multiple Value types is not allowed. In this case, we need a way to wrap instances with different types into one class type to reduce.
> In current code, ObjectWritable is a sole choice. but it costs too many space, because the class declaration will be appended into output file as a string for every Key-value pair.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 03:14:45 2006
Return-Path: 
 <hadoop-dev-return-5416-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37360 invoked from network); 29 Nov 2006 03:14:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 03:14:45 -0000
Received: (qmail 80671 invoked by uid 500); 29 Nov 2006 03:14:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80585 invoked by uid 500); 29 Nov 2006 03:14:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80554 invoked by uid 99); 29 Nov 2006 03:14:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 19:14:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 19:14:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4A5F47142EC
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 19:14:23 -0800 (PST)
Message-ID: <20997368.1164770063302.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 19:14:23 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-430) http server should die if the Datanode
 fails.
In-Reply-To: <21253528.1154990113889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-430?page=all ]

Wendy Chien updated HADOOP-430:
-------------------------------

    Attachment: hadoop-430.patch

This patch checks if the datanode registration has failed.  If it has, it stops the http server.  


> http server should die if the Datanode fails.
> ---------------------------------------------
>
>                 Key: HADOOP-430
>                 URL: http://issues.apache.org/jira/browse/HADOOP-430
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Wendy Chien
>         Attachments: hadoop-430.patch
>
>
> HADOOP-375 changed the order in which a data node registers and starts its http server.
> Current version first starts the http server, then registers. As a result if the registration fails,
> which can happen e.g. if the datanode has illegal storage id (=does not belong to the cluster),
> the http server keeps running, which makes the data node seem running too.
> I think 2 things need to be done.
> 1) Datanode registration should precede the http server startup.
> 2) The http server should shutdown when the datanode fails (in general).
> I am attaching a patch for the first item.
> Does anybody know how the latter can be done in the version of jetty we are on now?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 03:14:46 2006
Return-Path: 
 <hadoop-dev-return-5417-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37405 invoked from network); 29 Nov 2006 03:14:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 03:14:46 -0000
Received: (qmail 81139 invoked by uid 500); 29 Nov 2006 03:14:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80907 invoked by uid 500); 29 Nov 2006 03:14:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80898 invoked by uid 99); 29 Nov 2006 03:14:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 19:14:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 19:14:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5AABF7142F8
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 19:14:25 -0800 (PST)
Message-ID: <3905751.1164770065369.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 19:14:25 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-430) http server should die if the Datanode
 fails.
In-Reply-To: <21253528.1154990113889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-430?page=all ]

Wendy Chien updated HADOOP-430:
-------------------------------

    Attachment:     (was: RegistrationOrder.patch)

> http server should die if the Datanode fails.
> ---------------------------------------------
>
>                 Key: HADOOP-430
>                 URL: http://issues.apache.org/jira/browse/HADOOP-430
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Wendy Chien
>         Attachments: hadoop-430.patch
>
>
> HADOOP-375 changed the order in which a data node registers and starts its http server.
> Current version first starts the http server, then registers. As a result if the registration fails,
> which can happen e.g. if the datanode has illegal storage id (=does not belong to the cluster),
> the http server keeps running, which makes the data node seem running too.
> I think 2 things need to be done.
> 1) Datanode registration should precede the http server startup.
> 2) The http server should shutdown when the datanode fails (in general).
> I am attaching a patch for the first item.
> Does anybody know how the latter can be done in the version of jetty we are on now?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 03:14:50 2006
Return-Path: 
 <hadoop-dev-return-5418-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37463 invoked from network); 29 Nov 2006 03:14:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 03:14:50 -0000
Received: (qmail 81559 invoked by uid 500); 29 Nov 2006 03:14:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81532 invoked by uid 500); 29 Nov 2006 03:14:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81523 invoked by uid 99); 29 Nov 2006 03:14:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 19:14:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 19:14:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D4C8B7142FA
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 19:14:28 -0800 (PST)
Message-ID: <6201483.1164770068869.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 19:14:28 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-430) http server should die if the Datanode
 fails.
In-Reply-To: <21253528.1154990113889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-430?page=all ]

Wendy Chien updated HADOOP-430:
-------------------------------

    Status: Patch Available  (was: Open)

> http server should die if the Datanode fails.
> ---------------------------------------------
>
>                 Key: HADOOP-430
>                 URL: http://issues.apache.org/jira/browse/HADOOP-430
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Wendy Chien
>         Attachments: hadoop-430.patch
>
>
> HADOOP-375 changed the order in which a data node registers and starts its http server.
> Current version first starts the http server, then registers. As a result if the registration fails,
> which can happen e.g. if the datanode has illegal storage id (=does not belong to the cluster),
> the http server keeps running, which makes the data node seem running too.
> I think 2 things need to be done.
> 1) Datanode registration should precede the http server startup.
> 2) The http server should shutdown when the datanode fails (in general).
> I am attaching a patch for the first item.
> Does anybody know how the latter can be done in the version of jetty we are on now?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 03:18:45 2006
Return-Path: 
 <hadoop-dev-return-5419-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38314 invoked from network); 29 Nov 2006 03:18:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 03:18:45 -0000
Received: (qmail 85982 invoked by uid 500); 29 Nov 2006 03:18:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85962 invoked by uid 500); 29 Nov 2006 03:18:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85953 invoked by uid 99); 29 Nov 2006 03:18:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 19:18:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 19:18:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BCE717142EC
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 19:18:23 -0800 (PST)
Message-ID: <28922293.1164770303771.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 19:18:23 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-430) http server should die if the
 Datanode fails.
In-Reply-To: <21253528.1154990113889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-430?page=comments#action_12454224 ] 
            
Wendy Chien commented on HADOOP-430:
------------------------------------

I should add that we intentionally did not switch the order of first starting up the http server and then registering the datanode.  

It also looks like the http server is stopped when a datanode fails (in general), so no changes were added for that.  

> http server should die if the Datanode fails.
> ---------------------------------------------
>
>                 Key: HADOOP-430
>                 URL: http://issues.apache.org/jira/browse/HADOOP-430
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Wendy Chien
>         Attachments: hadoop-430.patch
>
>
> HADOOP-375 changed the order in which a data node registers and starts its http server.
> Current version first starts the http server, then registers. As a result if the registration fails,
> which can happen e.g. if the datanode has illegal storage id (=does not belong to the cluster),
> the http server keeps running, which makes the data node seem running too.
> I think 2 things need to be done.
> 1) Datanode registration should precede the http server startup.
> 2) The http server should shutdown when the datanode fails (in general).
> I am attaching a patch for the first item.
> Does anybody know how the latter can be done in the version of jetty we are on now?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 03:38:51 2006
Return-Path: 
 <hadoop-dev-return-5420-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43076 invoked from network); 29 Nov 2006 03:38:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 03:38:51 -0000
Received: (qmail 23638 invoked by uid 500); 29 Nov 2006 03:38:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23614 invoked by uid 500); 29 Nov 2006 03:38:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23605 invoked by uid 99); 29 Nov 2006 03:38:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 19:38:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 19:38:49 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F41777142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 19:38:28 -0800 (PST)
Message-ID: <28316205.1164771508997.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 19:38:28 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-432) support undelete, snapshots, or other
 mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-432?page=all ]

Wendy Chien updated HADOOP-432:
-------------------------------

    Attachment: undelete11.patch

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete.patch, undelete11.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 05:35:43 2006
Return-Path: 
 <hadoop-dev-return-5421-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68307 invoked from network); 29 Nov 2006 05:35:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 05:35:43 -0000
Received: (qmail 63599 invoked by uid 500); 29 Nov 2006 05:35:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63575 invoked by uid 500); 29 Nov 2006 05:35:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63565 invoked by uid 99); 29 Nov 2006 05:35:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 21:35:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 21:35:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 858EC7142F9
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 21:35:21 -0800 (PST)
Message-ID: <30899512.1164778521544.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 21:35:21 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-757) "Bad File Descriptor" in closing DFS
 file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

"Bad File Descriptor" in closing DFS file
-----------------------------------------

                 Key: HADOOP-757
                 URL: http://issues.apache.org/jira/browse/HADOOP-757
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.8.0
            Reporter: Owen O'Malley
         Assigned To: Sameer Paranjpye


Running the sort benchmark, I had a reduce fail with a DFS error:

java.io.IOException: Bad file descriptor
	at java.io.FileOutputStream.writeBytes(Native Method)
	at java.io.FileOutputStream.write(FileOutputStream.java:260)
	at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.flushData(DFSClient.java:1128)
	at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.flush(DFSClient.java:1114)
	at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.close(DFSClient.java:1241)
	at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
	at org.apache.hadoop.fs.FSDataOutputStream$Summer.close(FSDataOutputStream.java:99)
	at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
	at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
	at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
	at org.apache.hadoop.io.SequenceFile$Writer.close(SequenceFile.java:515)
	at org.apache.hadoop.mapred.SequenceFileOutputFormat$1.close(SequenceFileOutputFormat.java:71)
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:310)
	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1271)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 05:42:42 2006
Return-Path: 
 <hadoop-dev-return-5422-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70419 invoked from network); 29 Nov 2006 05:42:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 05:42:42 -0000
Received: (qmail 71478 invoked by uid 500); 29 Nov 2006 05:42:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71251 invoked by uid 500); 29 Nov 2006 05:42:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71241 invoked by uid 99); 29 Nov 2006 05:42:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 21:42:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 21:42:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1FF307142F9
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 21:42:21 -0800 (PST)
Message-ID: <2482003.1164778941128.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 21:42:21 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-758) FileNotFound on DFS block file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

FileNotFound on DFS block file
------------------------------

                 Key: HADOOP-758
                 URL: http://issues.apache.org/jira/browse/HADOOP-758
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.8.0
            Reporter: Owen O'Malley
         Assigned To: Sameer Paranjpye


While run the sort benchmark a reduce failed with:

java.io.FileNotFoundException: /tmp/hadoop-oom/dfs/tmp/tmp/client-4362164194084664090 (No such file or directory)
	at java.io.FileInputStream.open(Native Method)
	at java.io.FileInputStream.(FileInputStream.java:106)
	at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.endBlock(DFSClient.java:1156)
	at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.close(DFSClient.java:1244)
	at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
	at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
	at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
	at org.apache.hadoop.fs.FSDataOutputStream$Summer.close(FSDataOutputStream.java:98)
	at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
	at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
	at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
	at org.apache.hadoop.io.SequenceFile$Writer.close(SequenceFile.java:515)
	at org.apache.hadoop.mapred.SequenceFileOutputFormat$1.close(SequenceFileOutputFormat.java:71)
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:310)
	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1271)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 06:24:45 2006
Return-Path: 
 <hadoop-dev-return-5423-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81631 invoked from network); 29 Nov 2006 06:24:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 06:24:45 -0000
Received: (qmail 31192 invoked by uid 500); 29 Nov 2006 06:24:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30841 invoked by uid 500); 29 Nov 2006 06:24:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30825 invoked by uid 99); 29 Nov 2006 06:24:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 22:24:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 22:24:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 170BF7142FA
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 21:54:23 -0800 (PST)
Message-ID: <10853195.1164779663091.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 21:54:23 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-759) TextInputFormat should allow different
 treatment on carriage return char '\r'
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

TextInputFormat should allow different treatment on carriage return char '\r'
-----------------------------------------------------------------------------

                 Key: HADOOP-759
                 URL: http://issues.apache.org/jira/browse/HADOOP-759
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Runping Qi



The current implementation treat '\r' and '\n' both as line breakers. However, in some cases, it is desiable to strictly use '\n' as the solely line breaker and treat '\r' as a part of data in a line. 

One way to do this is to make readline function as a member function so that the user can create a subclass to overwrite the function with the desired behavior.



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 06:54:44 2006
Return-Path: 
 <hadoop-dev-return-5424-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86388 invoked from network); 29 Nov 2006 06:54:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 06:54:44 -0000
Received: (qmail 56492 invoked by uid 500); 29 Nov 2006 06:54:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56470 invoked by uid 500); 29 Nov 2006 06:54:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56461 invoked by uid 99); 29 Nov 2006 06:54:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 22:54:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 22:54:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 443407142F5
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 22:54:22 -0800 (PST)
Message-ID: <19224098.1164783262276.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 22:54:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-681) Adminstrative hook to pull live nodes
 out of a HDFS cluster
In-Reply-To: <29893636.1162789960338.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-681?page=all ]

dhruba borthakur updated HADOOP-681:
------------------------------------

    Attachment: nodedecommission2.patch

The  previous patch went stale, it was unable to automatic merge. Uploading a more recent patch file for code review.

> Adminstrative hook to pull live nodes out of a HDFS cluster
> -----------------------------------------------------------
>
>                 Key: HADOOP-681
>                 URL: http://issues.apache.org/jira/browse/HADOOP-681
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: nodedecommission2.patch
>
>
> Introduction
> ------------
> An administrator sometimes needs to bring down a datanode for scheduled maintenance. It would be nice if HDFS can be informed about this event. On receipt of this event, HDFS can take steps so that HDFS data is not lost when the node goes down at a later time.
> Architecture
> -----------
> In the existing architecture, a datanode can be in one of two states: dead or alive. A datanode is alive if its heartbeats are being processed by the namenode. Otherwise that datanode is in dead state. We extend the architecture to introduce the concept of a tranquil state for a datanode.
> A datanode is in tranquil state if:
>     - it cannot be a target for replicating any blocks
>     - any block replica that it currently contains does not count towards the target-replication-factor of that block
> Thus, a node that is in tranquil state can be brought down without impacting the guarantees provided by HDFS.
> The tranquil state is not persisted across namenode restarts. If the namenode restarts then that datanode will go back to being in the dead or alive state.
> The datanode is completely transparent to the fact that it has been labeled as being in tranquil state. It can continue to heartbeat and serve read requests for datablocks.
> DFSShell Design
> -----------------------
> We extend the DFS Shell utility to specify a list of nodes to the namenode.
>     hadoop dfs -tranquil {set|clear|get} datanodename1 [,datanodename2]
> The DFSShell utility sends this list to the namenode. This DFSShell command invoked with the "set" option completes when the list is transferred to the namenode. This command is non-blocking; it returns before the datanode is actually in the tranquil state. The client can then query the state by re-issuing the command with the "get" option. This option will indicate whether the datanode is in tranquil state or is "being tranquiled". The "clear" option is used to transition a tranquil datanode to the alive state. The "clear" option is a no-op if the datanode is not in the "tranquil" state.
> ClientProtocol Design
> --------------------
> The ClientProtocol is the protocol exported by the namenode for its client.
> This protocol is extended to incorporate three new methods:
>    ClientProtocol.setTranquil(String[] datanodes)
>    ClientProtocol.getTranquil(String datanode)
>    ClientProtocol.clearTranquil(String[] datanodes)
> The ProtocolVersion is incremented to prevent conversations between imcompatible clients and servers. An old DFSShell cannot talk to the new NameNode and vice-versa.
> NameNode Design
> -------------------------
> The namenode does the bulk of the work for supporting this new feature.
> The DatanodeInfo object has a new private member named "state". It also has three new member functions:
>     datanodeInfo.tranquilStarted(): start the process of tranquilization
>     datanodeInfo.tranquilCompleted(): node is not in tranquil state
>     datanodeInfo.clearTranquil() : remove tranquilization from node
> The namenode exposes a new API to set and clear tranquil states for a datanode. On receipt of a "set tranquil" command, it invokes datanodeInfo.tranquilStarted().
> The FSNamesystem.chooseTarget() method skips over datanodes that are marked as being in the "tranquil" state. This ensures that tranquil-datanodes are never chosen as targets of replication. The namenode does *not* record
> this operation in either the FsImage or the EditLogs.
> The namenode puts all the blocks from a being-tranquiled node into the neededReplication data structure. Necessary code changes are made to ensure that these blocks get replicated by the regular replication method. As of now, the regular replication code does not distinguish between these blocks and the blocks that are replication candidates because some other datanode might have died. It might be prudent to give different (lower?) weightage to this type of replication requests, but that exercise is deferred to a later date. In this design, replication requests generated because of a node going to a tranquil state are not distinguished from replication requests generated by a datanode going to the dead state.
> The DatanodeInfo object has another new private member named "pendingTranquilCount". This field stores the remaining number of blocks that still remain to be replicated. This field is valid only if the node is in the ets being-tranquiled state.  On receipt of every 'n' heartbeats from the being-tranquiled datanode, the namenode calculates the amount of data that is still remaining to be replicated and updates the "pendingTranquilCount". in the DatanodeInfo.When all the replications complete, the datanode is marked as tranquiled. The number 'n' is selected in such a way that the average heartbeat processing time does not increase appreciably.
> It is possible that the namenode might stop receving heartbeats from a datanode that is being-tranquiled. In this case,   the tranquil flag of the datanode gets cleared. It transitions to the dead state and the normal processing for alive-to-dead transition occurs here.
> Web Interface
> -------------------
> The dfshealth.jsp displays the live nodes, dead nodes, being-tranquiled and tranquil nodes. For nodes in the being-tranquiled state, it displays the percentage of tranquilization completed till now.
> Issues
> --------
> 1. If a request for tranquilization starts getting processed and there aren't enough space available in DFS to complete the necessary replication, then that node might remain in the being-tranquiled state for a long long time. This is not necessarily a bad thing but is there a better option?
> 2. We have opted for not storing cluster configuration information in the persistent image of the file system. (The tranquil state of a datanode may be lost if the namenode restarts).
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 06:54:45 2006
Return-Path: 
 <hadoop-dev-return-5425-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86431 invoked from network); 29 Nov 2006 06:54:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 06:54:45 -0000
Received: (qmail 56767 invoked by uid 500); 29 Nov 2006 06:54:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56732 invoked by uid 500); 29 Nov 2006 06:54:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56719 invoked by uid 99); 29 Nov 2006 06:54:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 22:54:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 22:54:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 99FA87142F3
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 22:54:23 -0800 (PST)
Message-ID: <32607052.1164783263628.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 22:54:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-681) Adminstrative hook to pull live nodes
 out of a HDFS cluster
In-Reply-To: <29893636.1162789960338.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-681?page=all ]

dhruba borthakur updated HADOOP-681:
------------------------------------

    Attachment:     (was: nodedecommission1.patch)

> Adminstrative hook to pull live nodes out of a HDFS cluster
> -----------------------------------------------------------
>
>                 Key: HADOOP-681
>                 URL: http://issues.apache.org/jira/browse/HADOOP-681
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: nodedecommission2.patch
>
>
> Introduction
> ------------
> An administrator sometimes needs to bring down a datanode for scheduled maintenance. It would be nice if HDFS can be informed about this event. On receipt of this event, HDFS can take steps so that HDFS data is not lost when the node goes down at a later time.
> Architecture
> -----------
> In the existing architecture, a datanode can be in one of two states: dead or alive. A datanode is alive if its heartbeats are being processed by the namenode. Otherwise that datanode is in dead state. We extend the architecture to introduce the concept of a tranquil state for a datanode.
> A datanode is in tranquil state if:
>     - it cannot be a target for replicating any blocks
>     - any block replica that it currently contains does not count towards the target-replication-factor of that block
> Thus, a node that is in tranquil state can be brought down without impacting the guarantees provided by HDFS.
> The tranquil state is not persisted across namenode restarts. If the namenode restarts then that datanode will go back to being in the dead or alive state.
> The datanode is completely transparent to the fact that it has been labeled as being in tranquil state. It can continue to heartbeat and serve read requests for datablocks.
> DFSShell Design
> -----------------------
> We extend the DFS Shell utility to specify a list of nodes to the namenode.
>     hadoop dfs -tranquil {set|clear|get} datanodename1 [,datanodename2]
> The DFSShell utility sends this list to the namenode. This DFSShell command invoked with the "set" option completes when the list is transferred to the namenode. This command is non-blocking; it returns before the datanode is actually in the tranquil state. The client can then query the state by re-issuing the command with the "get" option. This option will indicate whether the datanode is in tranquil state or is "being tranquiled". The "clear" option is used to transition a tranquil datanode to the alive state. The "clear" option is a no-op if the datanode is not in the "tranquil" state.
> ClientProtocol Design
> --------------------
> The ClientProtocol is the protocol exported by the namenode for its client.
> This protocol is extended to incorporate three new methods:
>    ClientProtocol.setTranquil(String[] datanodes)
>    ClientProtocol.getTranquil(String datanode)
>    ClientProtocol.clearTranquil(String[] datanodes)
> The ProtocolVersion is incremented to prevent conversations between imcompatible clients and servers. An old DFSShell cannot talk to the new NameNode and vice-versa.
> NameNode Design
> -------------------------
> The namenode does the bulk of the work for supporting this new feature.
> The DatanodeInfo object has a new private member named "state". It also has three new member functions:
>     datanodeInfo.tranquilStarted(): start the process of tranquilization
>     datanodeInfo.tranquilCompleted(): node is not in tranquil state
>     datanodeInfo.clearTranquil() : remove tranquilization from node
> The namenode exposes a new API to set and clear tranquil states for a datanode. On receipt of a "set tranquil" command, it invokes datanodeInfo.tranquilStarted().
> The FSNamesystem.chooseTarget() method skips over datanodes that are marked as being in the "tranquil" state. This ensures that tranquil-datanodes are never chosen as targets of replication. The namenode does *not* record
> this operation in either the FsImage or the EditLogs.
> The namenode puts all the blocks from a being-tranquiled node into the neededReplication data structure. Necessary code changes are made to ensure that these blocks get replicated by the regular replication method. As of now, the regular replication code does not distinguish between these blocks and the blocks that are replication candidates because some other datanode might have died. It might be prudent to give different (lower?) weightage to this type of replication requests, but that exercise is deferred to a later date. In this design, replication requests generated because of a node going to a tranquil state are not distinguished from replication requests generated by a datanode going to the dead state.
> The DatanodeInfo object has another new private member named "pendingTranquilCount". This field stores the remaining number of blocks that still remain to be replicated. This field is valid only if the node is in the ets being-tranquiled state.  On receipt of every 'n' heartbeats from the being-tranquiled datanode, the namenode calculates the amount of data that is still remaining to be replicated and updates the "pendingTranquilCount". in the DatanodeInfo.When all the replications complete, the datanode is marked as tranquiled. The number 'n' is selected in such a way that the average heartbeat processing time does not increase appreciably.
> It is possible that the namenode might stop receving heartbeats from a datanode that is being-tranquiled. In this case,   the tranquil flag of the datanode gets cleared. It transitions to the dead state and the normal processing for alive-to-dead transition occurs here.
> Web Interface
> -------------------
> The dfshealth.jsp displays the live nodes, dead nodes, being-tranquiled and tranquil nodes. For nodes in the being-tranquiled state, it displays the percentage of tranquilization completed till now.
> Issues
> --------
> 1. If a request for tranquilization starts getting processed and there aren't enough space available in DFS to complete the necessary replication, then that node might remain in the being-tranquiled state for a long long time. This is not necessarily a bad thing but is there a better option?
> 2. We have opted for not storing cluster configuration information in the persistent image of the file system. (The tranquil state of a datanode may be lost if the namenode restarts).
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 07:27:45 2006
Return-Path: 
 <hadoop-dev-return-5426-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94081 invoked from network); 29 Nov 2006 07:27:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 07:27:45 -0000
Received: (qmail 98576 invoked by uid 500); 29 Nov 2006 07:27:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98554 invoked by uid 500); 29 Nov 2006 07:27:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98545 invoked by uid 99); 29 Nov 2006 07:27:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 23:27:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 23:27:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E700E7142F3
	for <hadoop-dev@lucene.apache.org>; Tue, 28 Nov 2006 23:27:22 -0800 (PST)
Message-ID: <1323858.1164785242942.JavaMail.jira@brutus>
Date: Tue, 28 Nov 2006 23:27:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12454242 ] 
            
dhruba borthakur commented on HADOOP-432:
-----------------------------------------

I have two questions:

1. The trash directory is hardcoded to /trash. Does it make sense to introduce yet another config variable dfs.thrash.dir to allow the administrator to set the trash directory?

2. The code allows undeleting a file. The act of "undeleting" moves the file from /trash to its original location. Suppose I had a file named /user/dhruba/input/file.txt; I deleted it and it moved to /trash/user/dhruba/input/file.txt. Now I deleted the directory /user/dhruba/input. Then I tried to undelete the above file. Will the "/user/dhruba/input" directory get recreated in the process? ( An alternative would be to not have the "undelete" but an user can browse the /trash directory and copy files from /trash to anywhere else in his namespace).



> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete.patch, undelete11.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 09:48:04 2006
Return-Path: 
 <hadoop-dev-return-5427-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65621 invoked from network); 29 Nov 2006 09:48:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 09:48:04 -0000
Received: (qmail 75770 invoked by uid 500); 29 Nov 2006 09:48:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75747 invoked by uid 500); 29 Nov 2006 09:48:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75729 invoked by uid 99); 29 Nov 2006 09:48:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 01:48:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 01:48:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0C1567142F5
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 01:47:21 -0800 (PST)
Message-ID: <12345392.1164793641046.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 01:47:21 -0800 (PST)
From: "Philippe Gassmann (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-760) HDFS edits log file corrupted can lead
 to a major loss of data.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

HDFS edits log file corrupted can lead to a major loss of data.
---------------------------------------------------------------

                 Key: HADOOP-760
                 URL: http://issues.apache.org/jira/browse/HADOOP-760
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.6.1
            Reporter: Philippe Gassmann
            Priority: Critical


In one of our test system, our HDFS gets corrupted after the edits log file has been corrupted (i can tell how).

When we restarted the HDFS, the namenode refusses to started with a exception in hadoop-namenode-xxx.out.

Unfortunately, a rm mistake has been done, and I was not able to save somewhere this exception. 

But it was an ArrayIndexOutOfBoundException somewhere in a UTF8 method called from FSEditLog.loadFSEdits.

The result : the namenode was unable to start, the only way to get it fixed was the removing of the edits log file.

As it was on a test machine we do not have any backup, so all files created in the hdfs since the last start of the namenode were lost.

Is there a way to periodically commit changes to the hdfs in fsimage instead of keeping a huge logfile ? (eg every 10 minutes or so.)

Even if the namenode files are rsync'ed, what can be done in that particular case ? (if we periodically rsync the fsimage and its corrupted edits file).

This issue affects the 0.6.1 HDFS version. After looking at the hadoop trunk code, I am not able to says if this can be happening anymore... (I would say yes because of the use of UTF8 class in the same way as in 0.6.1)




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 11:23:39 2006
Return-Path: 
 <hadoop-dev-return-5428-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89314 invoked from network); 29 Nov 2006 11:23:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 11:23:39 -0000
Received: (qmail 26768 invoked by uid 500); 29 Nov 2006 11:23:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26536 invoked by uid 500); 29 Nov 2006 11:23:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26524 invoked by uid 99); 29 Nov 2006 11:23:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 03:23:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EF68B71430E
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 03:22:22 -0800 (PST)
Message-ID: <31889216.1164799342978.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 03:22:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-639?page=all ]

Arun C Murthy updated HADOOP-639:
---------------------------------

    Status: Patch Available  (was: Open)

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-639_1.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 12:01:37 2006
Return-Path: 
 <hadoop-dev-return-5429-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5725 invoked from network); 29 Nov 2006 12:01:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 12:01:37 -0000
Received: (qmail 82918 invoked by uid 500); 29 Nov 2006 12:01:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82896 invoked by uid 500); 29 Nov 2006 12:01:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82887 invoked by uid 99); 29 Nov 2006 12:01:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 04:01:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 04:01:36 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A19F9714318
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 03:59:22 -0800 (PST)
Message-ID: <28981014.1164801562659.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 03:59:22 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-761) Unit tests should not cleanup created
 files in /tmp. It causes tests to fail if more than one users run tests on
 same machine.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Unit tests should not cleanup created files in /tmp. It causes tests to fail if more than one users run tests on same machine. 
-------------------------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-761
                 URL: http://issues.apache.org/jira/browse/HADOOP-761
             Project: Hadoop
          Issue Type: Bug
          Components: test
            Reporter: Sanjay Dahiya
            Priority: Minor


TestMiniMRLocalFS  test cases creates /tmp/wc/input/, which is not cleaned up, any other user running test on same machine simultaneously or later will see test failures. 
It should either use a temp directory in the build/test or use java's File.createTempFile method for temporary data and then clean it up. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 12:06:40 2006
Return-Path: 
 <hadoop-dev-return-5430-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8345 invoked from network); 29 Nov 2006 12:06:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 12:06:40 -0000
Received: (qmail 89803 invoked by uid 500); 29 Nov 2006 12:06:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89775 invoked by uid 500); 29 Nov 2006 12:06:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89766 invoked by uid 99); 29 Nov 2006 12:06:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 04:06:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3D35E71431C
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 04:05:22 -0800 (PST)
Message-ID: <30268059.1164801922248.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 04:05:22 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-761) Unit tests should cleanup created
 files in /tmp. It causes tests to fail if more than one users run tests on
 same machine.
In-Reply-To: <28981014.1164801562659.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-761?page=all ]

Sanjay Dahiya updated HADOOP-761:
---------------------------------

    Summary: Unit tests should cleanup created files in /tmp. It causes tests to fail if more than one users run tests on same machine.  (was: Unit tests should not cleanup created files in /tmp. It causes tests to fail if more than one users run tests on same machine.)

> Unit tests should cleanup created files in /tmp. It causes tests to fail if more than one users run tests on same machine.
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-761
>                 URL: http://issues.apache.org/jira/browse/HADOOP-761
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>            Reporter: Sanjay Dahiya
>            Priority: Minor
>
> TestMiniMRLocalFS  test cases creates /tmp/wc/input/, which is not cleaned up, any other user running test on same machine simultaneously or later will see test failures. 
> It should either use a temp directory in the build/test or use java's File.createTempFile method for temporary data and then clean it up. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 15:43:45 2006
Return-Path: 
 <hadoop-dev-return-5431-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4321 invoked from network); 29 Nov 2006 15:43:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 15:43:45 -0000
Received: (qmail 3272 invoked by uid 500); 29 Nov 2006 15:43:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3239 invoked by uid 500); 29 Nov 2006 15:43:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3230 invoked by uid 99); 29 Nov 2006 15:43:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 07:43:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 07:43:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E95037142CD
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 07:43:22 -0800 (PST)
Message-ID: <20732602.1164815002953.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 07:43:22 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-476) Streaming should check for
 correctness of the task
In-Reply-To: <20801208.1156462750189.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-476?page=comments#action_12454343 ] 
            
Sanjay Dahiya commented on HADOOP-476:
--------------------------------------

I have the cli2 implementation in place, there is one issue with cli2 which is holding it back. Command line arguments with -jobconf and -env get merged in the same properties set in CLI's parser and after parsing we dont know what property was passed with which trigger. 
I have raised on CLI jira CLI-126. I'll submit the patch once i resolve this one.. 

(http://issues.apache.org/jira/browse/CLI-126) in case auto link doesnt work for other projects. 

> Streaming should check for correctness of the task
> --------------------------------------------------
>
>                 Key: HADOOP-476
>                 URL: http://issues.apache.org/jira/browse/HADOOP-476
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>         Assigned To: Sanjay Dahiya
>
> Currently, if anythin is wrong with streaming job, it dies without any explanation.
> Before creating and running actual MapReduce job, Streaming should check if:
> -- the executables (or scripts) for -mapper and -reducer are available and have right permissions
> -- the input fragments exist

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 18:10:24 2006
Return-Path: 
 <hadoop-dev-return-5436-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62628 invoked from network); 29 Nov 2006 18:10:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 18:10:24 -0000
Received: (qmail 24044 invoked by uid 500); 29 Nov 2006 18:10:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24018 invoked by uid 500); 29 Nov 2006 18:10:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24007 invoked by uid 99); 29 Nov 2006 18:10:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 10:10:32 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 10:10:20 -0800
Received: from [207.126.231.236] (eric14-mac.corp.yahoo.com [207.126.231.236])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kATI9oSr072382
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 10:09:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=RF6LobBrDRBRNl2qoADrj+ON9C1M4GmZ3ErdaYqziOUQ/XnifiOKSfAwpj+K/03T
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
References: <26310722.1164743961235.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D27A2C2E-4930-4B34-B24A-CD2407D63732@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Created: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
Date: Wed, 29 Nov 2006 08:03:29 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Maybe just poll to see if it is in safe mode?  Slightly more versatile.

On Nov 28, 2006, at 11:59 AM, Owen O'Malley (JIRA) wrote:

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                  Key: HADOOP-756
>                  URL: http://issues.apache.org/jira/browse/HADOOP-756
>              Project: Hadoop
>           Issue Type: Improvement
>           Components: dfs
>     Affects Versions: 0.8.0
>             Reporter: Owen O'Malley
>          Assigned To: Sameer Paranjpye
>             Priority: Minor
>
>
> I would like to have a dfsadmin command that waits until dfs leaves  
> safemode. I want to be able to have my start up scripts wait until  
> dfs is up before starting my jobtracker.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Wed Nov 29 16:17:46 2006
Return-Path: 
 <hadoop-dev-return-5432-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12301 invoked from network); 29 Nov 2006 16:17:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 16:17:46 -0000
Received: (qmail 66219 invoked by uid 500); 29 Nov 2006 16:17:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66197 invoked by uid 500); 29 Nov 2006 16:17:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66168 invoked by uid 99); 29 Nov 2006 16:17:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 08:17:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 08:17:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 74A867142FB
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 08:17:24 -0800 (PST)
Message-ID: <32549034.1164817044474.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 08:17:24 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-639?page=comments#action_12454352 ] 
            
Hadoop QA commented on HADOOP-639:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12345946/HADOOP-639_1.patch applied and successfully tested against trunk revision 480610

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-639_1.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 16:32:45 2006
Return-Path: 
 <hadoop-dev-return-5433-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19281 invoked from network); 29 Nov 2006 16:32:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 16:32:45 -0000
Received: (qmail 7927 invoked by uid 500); 29 Nov 2006 16:32:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7898 invoked by uid 500); 29 Nov 2006 16:32:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7889 invoked by uid 99); 29 Nov 2006 16:32:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 08:32:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 08:32:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F08457142EC
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 08:32:22 -0800 (PST)
Message-ID: <1921385.1164817942982.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 08:32:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-430) http server should die if the
 Datanode fails.
In-Reply-To: <21253528.1154990113889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-430?page=comments#action_12454357 ] 
            
Hadoop QA commented on HADOOP-430:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12345986/hadoop-430.patch applied and successfully tested against trunk revision 480611

> http server should die if the Datanode fails.
> ---------------------------------------------
>
>                 Key: HADOOP-430
>                 URL: http://issues.apache.org/jira/browse/HADOOP-430
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Wendy Chien
>         Attachments: hadoop-430.patch
>
>
> HADOOP-375 changed the order in which a data node registers and starts its http server.
> Current version first starts the http server, then registers. As a result if the registration fails,
> which can happen e.g. if the datanode has illegal storage id (=does not belong to the cluster),
> the http server keeps running, which makes the data node seem running too.
> I think 2 things need to be done.
> 1) Datanode registration should precede the http server startup.
> 2) The http server should shutdown when the datanode fails (in general).
> I am attaching a patch for the first item.
> Does anybody know how the latter can be done in the version of jetty we are on now?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 17:45:45 2006
Return-Path: 
 <hadoop-dev-return-5434-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54989 invoked from network); 29 Nov 2006 17:45:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 17:45:45 -0000
Received: (qmail 85873 invoked by uid 500); 29 Nov 2006 17:45:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85844 invoked by uid 500); 29 Nov 2006 17:45:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85834 invoked by uid 99); 29 Nov 2006 17:45:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 09:45:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 09:45:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1255E7142FB
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 09:45:23 -0800 (PST)
Message-ID: <23638873.1164822323072.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 09:45:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
In-Reply-To: <30411461.1163635597099.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-728?page=comments#action_12454386 ] 
            
Owen O'Malley commented on HADOOP-728:
--------------------------------------

Currently, the PhasedFileSystem assumes it is running in a map/reduce context. It gets the task id out of the JobConf to make the unique name and counts on the TaskTracker cleaning up the storage if the process dies. So currently the mapred package is right in my opinion. Arguably, the map/reduce dependencies should be removed to make it a more general class, but that would be a different bug.

I haven't run this bug, but it looks like the right direction for streaming. Streaming needs to become much more unified with the rest of Hadoop.

> Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-728
>                 URL: http://issues.apache.org/jira/browse/HADOOP-728
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-728.patch
>
>
> a) a file is create for the output instead of a directory.
> b) there is no way to understand what is going on from the client output
> I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
> ~

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 18:02:44 2006
Return-Path: 
 <hadoop-dev-return-5435-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60428 invoked from network); 29 Nov 2006 18:02:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 18:02:44 -0000
Received: (qmail 8368 invoked by uid 500); 29 Nov 2006 18:02:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8142 invoked by uid 500); 29 Nov 2006 18:02:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8132 invoked by uid 99); 29 Nov 2006 18:02:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 10:02:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 10:02:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 110AC7142FB
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 10:02:23 -0800 (PST)
Message-ID: <20388332.1164823343067.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 10:02:23 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12454389 ] 
            
Yoram Arnon commented on HADOOP-432:
------------------------------------

what do windows/mac do in this situation?
let's do the same thing.

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete.patch, undelete11.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 18:12:47 2006
Return-Path: 
 <hadoop-dev-return-5437-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63713 invoked from network); 29 Nov 2006 18:12:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 18:12:47 -0000
Received: (qmail 27100 invoked by uid 500); 29 Nov 2006 18:12:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27069 invoked by uid 500); 29 Nov 2006 18:12:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27057 invoked by uid 99); 29 Nov 2006 18:12:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 10:12:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 10:12:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7C24C7142FD
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 10:12:24 -0800 (PST)
Message-ID: <6019835.1164823944505.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 10:12:24 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-760) HDFS edits log file corrupted can
 lead to a major loss of data.
In-Reply-To: <12345392.1164793641046.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-760?page=all ]

Yoram Arnon resolved HADOOP-760.
--------------------------------

    Resolution: Duplicate

this is a duplicate of HADOOP-227, which requests periodic checkpointing (and starting a fresh edits file) of the namenode image

> HDFS edits log file corrupted can lead to a major loss of data.
> ---------------------------------------------------------------
>
>                 Key: HADOOP-760
>                 URL: http://issues.apache.org/jira/browse/HADOOP-760
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.1
>            Reporter: Philippe Gassmann
>            Priority: Critical
>
> In one of our test system, our HDFS gets corrupted after the edits log file has been corrupted (i can tell how).
> When we restarted the HDFS, the namenode refusses to started with a exception in hadoop-namenode-xxx.out.
> Unfortunately, a rm mistake has been done, and I was not able to save somewhere this exception. 
> But it was an ArrayIndexOutOfBoundException somewhere in a UTF8 method called from FSEditLog.loadFSEdits.
> The result : the namenode was unable to start, the only way to get it fixed was the removing of the edits log file.
> As it was on a test machine we do not have any backup, so all files created in the hdfs since the last start of the namenode were lost.
> Is there a way to periodically commit changes to the hdfs in fsimage instead of keeping a huge logfile ? (eg every 10 minutes or so.)
> Even if the namenode files are rsync'ed, what can be done in that particular case ? (if we periodically rsync the fsimage and its corrupted edits file).
> This issue affects the 0.6.1 HDFS version. After looking at the hadoop trunk code, I am not able to says if this can be happening anymore... (I would say yes because of the use of UTF8 class in the same way as in 0.6.1)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 18:14:45 2006
Return-Path: 
 <hadoop-dev-return-5438-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64686 invoked from network); 29 Nov 2006 18:14:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 18:14:45 -0000
Received: (qmail 29217 invoked by uid 500); 29 Nov 2006 18:14:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29193 invoked by uid 500); 29 Nov 2006 18:14:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29184 invoked by uid 99); 29 Nov 2006 18:14:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 10:14:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 10:14:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2E7677142FB
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 10:14:24 -0800 (PST)
Message-ID: <27255745.1164824064187.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 10:14:24 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-756?page=comments#action_12454398 ] 
            
dhruba borthakur commented on HADOOP-756:
-----------------------------------------

A simple polling loop (outside of HDFS) can achieve this goal too.

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Sameer Paranjpye
>            Priority: Minor
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 18:29:44 2006
Return-Path: 
 <hadoop-dev-return-5439-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68504 invoked from network); 29 Nov 2006 18:29:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 18:29:44 -0000
Received: (qmail 57418 invoked by uid 500); 29 Nov 2006 18:29:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57384 invoked by uid 500); 29 Nov 2006 18:29:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57375 invoked by uid 99); 29 Nov 2006 18:29:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 10:29:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 10:29:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 38CA57142F5
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 10:29:22 -0800 (PST)
Message-ID: <17087111.1164824962230.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 10:29:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-720?page=all ]

dhruba borthakur updated HADOOP-720:
------------------------------------

    Status: Patch Available  (was: Open)

Hi Doug,

I have changed the status to "patch submitted" so that you can review the patches and provide me feedback. The only relevent patch file is Forrest.patch and the two jpeg images.

thanks,
dhruba

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture.html, HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm, HDFSArchitecture.jpg, HDFSDatanodes.jpg, HDFSForrest.patch
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 18:51:44 2006
Return-Path: 
 <hadoop-dev-return-5440-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77240 invoked from network); 29 Nov 2006 18:51:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 18:51:44 -0000
Received: (qmail 87686 invoked by uid 500); 29 Nov 2006 18:51:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87456 invoked by uid 500); 29 Nov 2006 18:51:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87447 invoked by uid 99); 29 Nov 2006 18:51:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 10:51:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 10:51:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EB9B57142EC
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 10:51:22 -0800 (PST)
Message-ID: <27306727.1164826282962.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 10:51:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
In-Reply-To: <30411461.1163635597099.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-728?page=comments#action_12454405 ] 
            
Owen O'Malley commented on HADOOP-728:
--------------------------------------

Ok, after running streaming for the first time and looking at the code to see why it is doing various things, you've got the wrong filename in the output files. The sideEffecURI_ is basically the temporary name. The final filename should be sideEffectPathFinal_.

The names should be ugly, but not that ugly. *smile*

> Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-728
>                 URL: http://issues.apache.org/jira/browse/HADOOP-728
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-728.patch
>
>
> a) a file is create for the output instead of a directory.
> b) there is no way to understand what is going on from the client output
> I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
> ~

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 19:07:42 2006
Return-Path: 
 <hadoop-dev-return-5441-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83600 invoked from network); 29 Nov 2006 19:07:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 19:07:42 -0000
Received: (qmail 17356 invoked by uid 500); 29 Nov 2006 19:07:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17327 invoked by uid 500); 29 Nov 2006 19:07:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17318 invoked by uid 99); 29 Nov 2006 19:07:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 11:07:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 11:07:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 07CBE7142F3
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 11:07:21 -0800 (PST)
Message-ID: <26510318.1164827241029.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 11:07:21 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-762) "Bad File Descriptor" in closing local
 file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

"Bad File Descriptor" in closing local file
-------------------------------------------

                 Key: HADOOP-762
                 URL: http://issues.apache.org/jira/browse/HADOOP-762
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.8.0
            Reporter: Nigel Daley


Running the sort benchmark, I had a map fail with this exception:

2006-11-28 17:59:36,770 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0001_m_001906_0: Map output lost, rescheduling: getMapOutput(task_0001_m_001906_0,786) failed :
java.io.IOException: Bad file descriptor
        at java.io.FileInputStream.close0(Native Method)
        at java.io.FileInputStream.close(FileInputStream.java:245)
        at org.apache.hadoop.fs.LocalFileSystem$LocalFSFileInputStream.close(LocalFileSystem.java:100)
        at java.io.FilterInputStream.close(FilterInputStream.java:159)
        at org.apache.hadoop.fs.FSDataInputStream$Checker.close(FSDataInputStream.java:162)
        at java.io.FilterInputStream.close(FilterInputStream.java:159)
        at java.io.BufferedInputStream.close(BufferedInputStream.java:440)
        at java.io.FilterInputStream.close(FilterInputStream.java:159)
        at org.apache.hadoop.mapred.TaskTracker$MapOutputServlet.doGet(TaskTracker.java:1446)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:427)
        at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.java:475)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:567)
        at org.mortbay.http.HttpContext.handle(HttpContext.java:1565)
        at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.java:635)
        at org.mortbay.http.HttpContext.handle(HttpContext.java:1517)
        at org.mortbay.http.HttpServer.service(HttpServer.java:954)
        at org.mortbay.http.HttpConnection.service(HttpConnection.java:814)
        at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:981)
        at org.mortbay.http.HttpConnection.handle(HttpConnection.java:831)
        at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:244)
        at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)
        at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 19:11:44 2006
Return-Path: 
 <hadoop-dev-return-5442-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84673 invoked from network); 29 Nov 2006 19:11:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 19:11:44 -0000
Received: (qmail 22150 invoked by uid 500); 29 Nov 2006 19:11:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22121 invoked by uid 500); 29 Nov 2006 19:11:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22112 invoked by uid 99); 29 Nov 2006 19:11:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 11:11:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 11:11:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E2FC27142F5
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 11:11:22 -0800 (PST)
Message-ID: <20934200.1164827482927.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 11:11:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-639?page=comments#action_12454414 ] 
            
Doug Cutting commented on HADOOP-639:
-------------------------------------

The new protocol method signature is inconsistent:

public HeartbeatResponse updateStatus(TaskTrackerStatus status, boolean);

Everyone refers to this as the heartbeat, why not still call it that?

public HeartBeatResponse heartbeat(TaskTrackerStatus status, boolean);

Either that, or completely remove 'heartbeat' from our vocabulary.  Personally, I prefer using heartbeat consistently for this, but I wouldn't reject this patch over that.  I feel more strongly however that the naming should be consistent.  We shouldn't call it a heartbeat response unless it's a response to something we call a heartbeat.

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-639_1.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 19:40:44 2006
Return-Path: 
 <hadoop-dev-return-5443-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94229 invoked from network); 29 Nov 2006 19:40:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 19:40:44 -0000
Received: (qmail 76338 invoked by uid 500); 29 Nov 2006 19:40:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76110 invoked by uid 500); 29 Nov 2006 19:40:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76101 invoked by uid 99); 29 Nov 2006 19:40:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 11:40:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 11:40:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4D6A47142EC
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 11:40:23 -0800 (PST)
Message-ID: <8713002.1164829223313.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 11:40:23 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-639?page=all ]

Arun C Murthy updated HADOOP-639:
---------------------------------

    Attachment: HADOOP-639_2_20061130.patch

Makes sense Doug, here is the naming change to 'heartbeat'... appreciate your feedback.

Meanwhile could you please hold off committing this patch till I do some further testing on a large cluster (am currently blocked on HADOOP-753 / HADOOP-754) ... once i get that done i'll give a heads-up. Meanwhile I'd love to hear about any other comments/nits you have with any part of this patch... thanks!

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-639_1.patch, HADOOP-639_2_20061130.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 19:52:44 2006
Return-Path: 
 <hadoop-dev-return-5444-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98611 invoked from network); 29 Nov 2006 19:52:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 19:52:44 -0000
Received: (qmail 93158 invoked by uid 500); 29 Nov 2006 19:52:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93134 invoked by uid 500); 29 Nov 2006 19:52:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93125 invoked by uid 99); 29 Nov 2006 19:52:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 11:52:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 11:52:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E85097142EC
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 11:52:22 -0800 (PST)
Message-ID: <22007496.1164829942948.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 11:52:22 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12454421 ] 
            
Wendy Chien commented on HADOOP-432:
------------------------------------

Concerning dhruba's comments:
1. We discussed making the trash directory name configurable and decided against it.  I think the general opinion was that the extra flexibility wasn't necessary.  
2. You are right.  In the case you descirbe, it fails because the original directory no longer exists.  This is a bug.  I checked what Windows does and it seems to give you the option to restore a recycle bin file to its original location or copy it to somewhere else.   When restoring, if the original folder no longer exists, it creates it again.

I can fix the bug so the directory is recreated.  Do we also want to allow the user to pick a new destination?



> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete.patch, undelete11.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 19:54:43 2006
Return-Path: 
 <hadoop-dev-return-5445-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99394 invoked from network); 29 Nov 2006 19:54:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 19:54:43 -0000
Received: (qmail 96881 invoked by uid 500); 29 Nov 2006 19:54:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96743 invoked by uid 500); 29 Nov 2006 19:54:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96731 invoked by uid 99); 29 Nov 2006 19:54:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 11:54:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 11:54:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3FB5D7142F3
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 11:54:22 -0800 (PST)
Message-ID: <10549559.1164830062258.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 11:54:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-720?page=all ]

Doug Cutting updated HADOOP-720:
--------------------------------

    Status: Open  (was: Patch Available)

Overally this looks great!

A few minor comments:

1. We don't need to mention Jetty.  That's an implementation detail.

2. The dfs commands are garbled, displaying as, e.g., '.rm' rather than '-rm'.

3. We should maintain this document in sync with the code.  So the /trash feature shouldn't be described yet, since it has not yet been committed.

4. It would be best if the diagrams were also easily editable by all, e.g., in ODG or SVG format.

Thanks!

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture.html, HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm, HDFSArchitecture.jpg, HDFSDatanodes.jpg, HDFSForrest.patch
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 20:12:45 2006
Return-Path: 
 <hadoop-dev-return-5446-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5406 invoked from network); 29 Nov 2006 20:12:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 20:12:45 -0000
Received: (qmail 21732 invoked by uid 500); 29 Nov 2006 20:12:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21706 invoked by uid 500); 29 Nov 2006 20:12:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21697 invoked by uid 99); 29 Nov 2006 20:12:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 12:12:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 12:12:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E6FE97142EC
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 12:12:22 -0800 (PST)
Message-ID: <17071354.1164831142943.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 12:12:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12454426 ] 
            
dhruba borthakur commented on HADOOP-432:
-----------------------------------------

My option would be to let the user browse the /trash directory and he/she should be able to copy any file from there to anywhere else in the namespace. I had seen this behaviour on unix online backup/recovery software. No special "undelete" command need to be supported by DFSShell.

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete.patch, undelete11.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 20:16:56 2006
Return-Path: 
 <hadoop-dev-return-5447-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6250 invoked from network); 29 Nov 2006 20:16:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 20:16:56 -0000
Received: (qmail 28617 invoked by uid 500); 29 Nov 2006 20:17:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28589 invoked by uid 500); 29 Nov 2006 20:17:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28578 invoked by uid 99); 29 Nov 2006 20:17:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 12:17:04 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 12:16:52 -0800
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kATKGOJn074566;
	Wed, 29 Nov 2006 12:16:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=in-reply-to:references:mime-version:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=v7vweTSeNhlBMMqWGlSKQVhCeomWA9YjmybZxx6tv1EWHn938tdPHZy/UptW+Zov
In-Reply-To: <20732602.1164815002953.JavaMail.jira@brutus>
References: <20732602.1164815002953.JavaMail.jira@brutus>
Mime-Version: 1.0 (Apple Message framework v624)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <c8741a3907d56b326278540eac146080@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-476) Streaming should check for
 correctness of the task
Date: Wed, 29 Nov 2006 12:16:22 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org

Sanjay,

does you implementation that ALL the scripts and executable available  
and have right permissions, and that the input exists?  Also: what  
about descriptive error messages?

-- ab

On Nov 29, 2006, at 7:43 AM, Sanjay Dahiya (JIRA) wrote:

>     [  
> http://issues.apache.org/jira/browse/HADOOP-476? 
> page=comments#action_12454343 ]
>
> Sanjay Dahiya commented on HADOOP-476:
> --------------------------------------
>
> I have the cli2 implementation in place, there is one issue with cli2  
> which is holding it back. Command line arguments with -jobconf and  
> -env get merged in the same properties set in CLI's parser and after  
> parsing we dont know what property was passed with which trigger.
> I have raised on CLI jira CLI-126. I'll submit the patch once i  
> resolve this one..
>
> (http://issues.apache.org/jira/browse/CLI-126) in case auto link  
> doesnt work for other projects.
>
>> Streaming should check for correctness of the task
>> --------------------------------------------------
>>
>>                 Key: HADOOP-476
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-476
>>             Project: Hadoop
>>          Issue Type: Bug
>>          Components: contrib/streaming
>>            Reporter: arkady borkovsky
>>         Assigned To: Sanjay Dahiya
>>
>> Currently, if anythin is wrong with streaming job, it dies without  
>> any explanation.
>> Before creating and running actual MapReduce job, Streaming should  
>> check if:
>> -- the executables (or scripts) for -mapper and -reducer are  
>> available and have right permissions
>> -- the input fragments exist
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Wed Nov 29 20:26:44 2006
Return-Path: 
 <hadoop-dev-return-5448-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14853 invoked from network); 29 Nov 2006 20:26:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 20:26:44 -0000
Received: (qmail 41307 invoked by uid 500); 29 Nov 2006 20:26:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41282 invoked by uid 500); 29 Nov 2006 20:26:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41273 invoked by uid 99); 29 Nov 2006 20:26:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 12:26:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 12:26:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F09837142EC
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 12:26:22 -0800 (PST)
Message-ID: <6981397.1164831982982.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 12:26:22 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12454429 ] 
            
Yoram Arnon commented on HADOOP-432:
------------------------------------

windows restores the original path of a file when its containing folder was deleted.

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete.patch, undelete11.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 21:03:48 2006
Return-Path: 
 <hadoop-dev-return-5449-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29365 invoked from network); 29 Nov 2006 21:03:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 21:03:48 -0000
Received: (qmail 97825 invoked by uid 500); 29 Nov 2006 21:03:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97798 invoked by uid 500); 29 Nov 2006 21:03:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97787 invoked by uid 99); 29 Nov 2006 21:03:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 13:03:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 13:03:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1B6677142FB
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 13:03:26 -0800 (PST)
Message-ID: <18736654.1164834206109.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 13:03:26 -0800 (PST)
From: "stack@archive.org (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-574?page=comments#action_12454434 ] 
            
stack@archive.org commented on HADOOP-574:
------------------------------------------

+1 on scheme.

Regards mixing in of access id and access secret, users will need to be a careful with job input files that list s3 files by URI.   On bucket as host, its probably safe to say the s3 hostname, s3.amazonaws.com, isn't likely to change any time soon.  And if ever there was to be an s3 filesystem that went over SSL, its scheme might be s3s?

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>         Attachments: dependencies.zip, HADOOP-574-v2.patch, HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 22:55:45 2006
Return-Path: 
 <hadoop-dev-return-5450-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64141 invoked from network); 29 Nov 2006 22:55:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 22:55:45 -0000
Received: (qmail 94493 invoked by uid 500); 29 Nov 2006 22:55:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94387 invoked by uid 500); 29 Nov 2006 22:55:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94377 invoked by uid 99); 29 Nov 2006 22:55:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 14:55:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 14:55:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F29967142FA
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 14:55:22 -0800 (PST)
Message-ID: <24327408.1164840922991.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 14:55:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-430) http server should die if the Datanode
 fails.
In-Reply-To: <21253528.1154990113889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-430?page=all ]

Doug Cutting updated HADOOP-430:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Wendy!

> http server should die if the Datanode fails.
> ---------------------------------------------
>
>                 Key: HADOOP-430
>                 URL: http://issues.apache.org/jira/browse/HADOOP-430
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Wendy Chien
>             Fix For: 0.9.0
>
>         Attachments: hadoop-430.patch
>
>
> HADOOP-375 changed the order in which a data node registers and starts its http server.
> Current version first starts the http server, then registers. As a result if the registration fails,
> which can happen e.g. if the datanode has illegal storage id (=does not belong to the cluster),
> the http server keeps running, which makes the data node seem running too.
> I think 2 things need to be done.
> 1) Datanode registration should precede the http server startup.
> 2) The http server should shutdown when the datanode fails (in general).
> I am attaching a patch for the first item.
> Does anybody know how the latter can be done in the version of jetty we are on now?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 23:20:43 2006
Return-Path: 
 <hadoop-dev-return-5451-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70609 invoked from network); 29 Nov 2006 23:20:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 23:20:43 -0000
Received: (qmail 53032 invoked by uid 500); 29 Nov 2006 23:20:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53004 invoked by uid 500); 29 Nov 2006 23:20:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52995 invoked by uid 99); 29 Nov 2006 23:20:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:20:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:20:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 667CE7142EC
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 15:20:22 -0800 (PST)
Message-ID: <13302241.1164842422416.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 15:20:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-720?page=all ]

dhruba borthakur updated HADOOP-720:
------------------------------------

    Attachment:     (was: HadoopArchitecture.html)

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 23:20:45 2006
Return-Path: 
 <hadoop-dev-return-5452-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70653 invoked from network); 29 Nov 2006 23:20:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 23:20:45 -0000
Received: (qmail 53432 invoked by uid 500); 29 Nov 2006 23:20:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53265 invoked by uid 500); 29 Nov 2006 23:20:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53256 invoked by uid 99); 29 Nov 2006 23:20:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:20:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:20:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BAB3F7142F8
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 15:20:23 -0800 (PST)
Message-ID: <19652191.1164842423762.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 15:20:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-720?page=all ]

dhruba borthakur updated HADOOP-720:
------------------------------------

    Attachment:     (was: HDFSArchitecture.jpg)

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 23:20:46 2006
Return-Path: 
 <hadoop-dev-return-5453-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70694 invoked from network); 29 Nov 2006 23:20:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 23:20:46 -0000
Received: (qmail 53554 invoked by uid 500); 29 Nov 2006 23:20:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53521 invoked by uid 500); 29 Nov 2006 23:20:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53512 invoked by uid 99); 29 Nov 2006 23:20:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:20:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:20:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 194AE7142FB
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 15:20:25 -0800 (PST)
Message-ID: <20084285.1164842425101.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 15:20:25 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-720?page=all ]

dhruba borthakur updated HADOOP-720:
------------------------------------

    Attachment:     (was: HDFSDatanodes.jpg)

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 23:20:48 2006
Return-Path: 
 <hadoop-dev-return-5454-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70738 invoked from network); 29 Nov 2006 23:20:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 23:20:48 -0000
Received: (qmail 53824 invoked by uid 500); 29 Nov 2006 23:20:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53785 invoked by uid 500); 29 Nov 2006 23:20:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53776 invoked by uid 99); 29 Nov 2006 23:20:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:20:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:20:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 691B87142FA
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 15:20:26 -0800 (PST)
Message-ID: <13799428.1164842426428.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 15:20:26 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-720?page=all ]

dhruba borthakur updated HADOOP-720:
------------------------------------

    Attachment:     (was: HDFSForrest.patch)

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 23:24:45 2006
Return-Path: 
 <hadoop-dev-return-5455-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71832 invoked from network); 29 Nov 2006 23:24:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 23:24:45 -0000
Received: (qmail 61926 invoked by uid 500); 29 Nov 2006 23:24:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61891 invoked by uid 500); 29 Nov 2006 23:24:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61882 invoked by uid 99); 29 Nov 2006 23:24:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:24:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:24:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AC4FD7142FA
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 15:24:23 -0800 (PST)
Message-ID: <15084003.1164842663703.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 15:24:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-720?page=all ]

dhruba borthakur updated HADOOP-720:
------------------------------------

    Attachment: HDFSForrest.patch
                hdfsarchitecture.odg
                hdfsdatanodes.odg

I incorporated Doug's comments. The patch file is HDFSForrest.patch and the two images should be copied to src/site/src/documentation/resources/images.

thanks,
dhruba

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm, hdfsarchitecture.odg, hdfsdatanodes.odg, HDFSForrest.patch
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 23:44:44 2006
Return-Path: 
 <hadoop-dev-return-5456-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75997 invoked from network); 29 Nov 2006 23:44:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 23:44:44 -0000
Received: (qmail 86480 invoked by uid 500); 29 Nov 2006 23:44:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86250 invoked by uid 500); 29 Nov 2006 23:44:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86241 invoked by uid 99); 29 Nov 2006 23:44:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:44:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:44:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4E9337142F7
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 15:44:22 -0800 (PST)
Message-ID: <17988639.1164843862319.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 15:44:22 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-681) Adminstrative hook to pull live
 nodes out of a HDFS cluster
In-Reply-To: <29893636.1162789960338.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-681?page=comments#action_12454491 ] 
            
Konstantin Shvachko commented on HADOOP-681:
--------------------------------------------

Comments:

= Index: src/java/org/apache/hadoop/dfs/ClientProtocol.java
  public static final long versionID = 4L;
You should write a comment what exactly changed for the ClientProtocol in new version (compared to the previous one).
That way you will be able to track changes back from version to version looking at the history of changes.

= Index: src/java/org/apache/hadoop/dfs/DFSClient.java
    may be it is better to use DatanodeID instead of mere String as a node parameter in decommission methods;
    this will require an additional public constructor DatanodeID( String nodeName )

= Index: src/java/org/apache/hadoop/dfs/DFSAdmin.java
    decommission() does not document the return value
    boolean mode is never used
    final String safeModeUsage is never used
    decommission usage does not specify data-node parameters, 
    it is not clear what identifies data-nodes (host-port or just host, or storage id)

= Index: src/java/org/apache/hadoop/dfs/FSNamesystem.java
    decommissionInProgress() should start with is***()
    replicationInProgress() should start with is***()
    in startDecommission() and stopDecommission() it is better to call public method getName()
        rather than directly accessing node.name the protected member
    Block decommissionblocks[] should be decommissionBlocks, please check other places too.
    May be it is not a part of this patch but at some point we should combine two methods datanodeReport() and
    DFSNodesStatus() so that data-node reports for the webUI and DFSShell were the same.

= Index: src/java/org/apache/hadoop/dfs/DatanodeDescriptor.java
    decommissioned() should start with is***()
    I don't think these constants are used anywhere in the code. They could be confused with the enum values having the same names.
  public static final int NORMAL = 0;
  public static final int DECOMMISSION_INPROGRESS = 1;
  public static final int DECOMMISSIONED = 2;
    I propose to rename AdminStates to DecommissionState and eliminate NORMAL state replacing it by null, where applicable.
    with a clear (imo) semantics: no decommission - no state.
    setAdminState() never uses the return value
    setAdminState( DECOMMISSIONED ) and setDecommissioned() are 2 ways to do the same thing

= Index: src/java/org/apache/hadoop/dfs/DatanodeInfo.java
= Index: src/java/org/apache/hadoop/dfs/DatanodeReport.java
    I don't think this class should be introduced at all.
    DatanodeReport effectively returns an entire DatanodeDescriptor.
    The original design of DatanodeInfo and DatanodeDescriptor distinguishes them in the way, that
    DatanodeDescriptor is an internal name-node class which is never passed to the outside world.
    Anything that should be returned back to a client or a data-node should be contained in the DatanodeInfo.
    So it is better to divide decommission-related methods and members to those that are name-node specific
    and those that are visible to the clients. The former should remain in the DatanodeDescriptor, and the latter
    should go into DatanodeInfo. E.g.
    DatanodeInfo has private decommissionState and getters isDecommissioned() and isDecommissionInProgress()
    as well as getDatanodeReport(),
    everything else is in DatanodeDescriptor.


> Adminstrative hook to pull live nodes out of a HDFS cluster
> -----------------------------------------------------------
>
>                 Key: HADOOP-681
>                 URL: http://issues.apache.org/jira/browse/HADOOP-681
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: nodedecommission2.patch
>
>
> Introduction
> ------------
> An administrator sometimes needs to bring down a datanode for scheduled maintenance. It would be nice if HDFS can be informed about this event. On receipt of this event, HDFS can take steps so that HDFS data is not lost when the node goes down at a later time.
> Architecture
> -----------
> In the existing architecture, a datanode can be in one of two states: dead or alive. A datanode is alive if its heartbeats are being processed by the namenode. Otherwise that datanode is in dead state. We extend the architecture to introduce the concept of a tranquil state for a datanode.
> A datanode is in tranquil state if:
>     - it cannot be a target for replicating any blocks
>     - any block replica that it currently contains does not count towards the target-replication-factor of that block
> Thus, a node that is in tranquil state can be brought down without impacting the guarantees provided by HDFS.
> The tranquil state is not persisted across namenode restarts. If the namenode restarts then that datanode will go back to being in the dead or alive state.
> The datanode is completely transparent to the fact that it has been labeled as being in tranquil state. It can continue to heartbeat and serve read requests for datablocks.
> DFSShell Design
> -----------------------
> We extend the DFS Shell utility to specify a list of nodes to the namenode.
>     hadoop dfs -tranquil {set|clear|get} datanodename1 [,datanodename2]
> The DFSShell utility sends this list to the namenode. This DFSShell command invoked with the "set" option completes when the list is transferred to the namenode. This command is non-blocking; it returns before the datanode is actually in the tranquil state. The client can then query the state by re-issuing the command with the "get" option. This option will indicate whether the datanode is in tranquil state or is "being tranquiled". The "clear" option is used to transition a tranquil datanode to the alive state. The "clear" option is a no-op if the datanode is not in the "tranquil" state.
> ClientProtocol Design
> --------------------
> The ClientProtocol is the protocol exported by the namenode for its client.
> This protocol is extended to incorporate three new methods:
>    ClientProtocol.setTranquil(String[] datanodes)
>    ClientProtocol.getTranquil(String datanode)
>    ClientProtocol.clearTranquil(String[] datanodes)
> The ProtocolVersion is incremented to prevent conversations between imcompatible clients and servers. An old DFSShell cannot talk to the new NameNode and vice-versa.
> NameNode Design
> -------------------------
> The namenode does the bulk of the work for supporting this new feature.
> The DatanodeInfo object has a new private member named "state". It also has three new member functions:
>     datanodeInfo.tranquilStarted(): start the process of tranquilization
>     datanodeInfo.tranquilCompleted(): node is not in tranquil state
>     datanodeInfo.clearTranquil() : remove tranquilization from node
> The namenode exposes a new API to set and clear tranquil states for a datanode. On receipt of a "set tranquil" command, it invokes datanodeInfo.tranquilStarted().
> The FSNamesystem.chooseTarget() method skips over datanodes that are marked as being in the "tranquil" state. This ensures that tranquil-datanodes are never chosen as targets of replication. The namenode does *not* record
> this operation in either the FsImage or the EditLogs.
> The namenode puts all the blocks from a being-tranquiled node into the neededReplication data structure. Necessary code changes are made to ensure that these blocks get replicated by the regular replication method. As of now, the regular replication code does not distinguish between these blocks and the blocks that are replication candidates because some other datanode might have died. It might be prudent to give different (lower?) weightage to this type of replication requests, but that exercise is deferred to a later date. In this design, replication requests generated because of a node going to a tranquil state are not distinguished from replication requests generated by a datanode going to the dead state.
> The DatanodeInfo object has another new private member named "pendingTranquilCount". This field stores the remaining number of blocks that still remain to be replicated. This field is valid only if the node is in the ets being-tranquiled state.  On receipt of every 'n' heartbeats from the being-tranquiled datanode, the namenode calculates the amount of data that is still remaining to be replicated and updates the "pendingTranquilCount". in the DatanodeInfo.When all the replications complete, the datanode is marked as tranquiled. The number 'n' is selected in such a way that the average heartbeat processing time does not increase appreciably.
> It is possible that the namenode might stop receving heartbeats from a datanode that is being-tranquiled. In this case,   the tranquil flag of the datanode gets cleared. It transitions to the dead state and the normal processing for alive-to-dead transition occurs here.
> Web Interface
> -------------------
> The dfshealth.jsp displays the live nodes, dead nodes, being-tranquiled and tranquil nodes. For nodes in the being-tranquiled state, it displays the percentage of tranquilization completed till now.
> Issues
> --------
> 1. If a request for tranquilization starts getting processed and there aren't enough space available in DFS to complete the necessary replication, then that node might remain in the being-tranquiled state for a long long time. This is not necessarily a bad thing but is there a better option?
> 2. We have opted for not storing cluster configuration information in the persistent image of the file system. (The tranquil state of a datanode may be lost if the namenode restarts).
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 23:49:44 2006
Return-Path: 
 <hadoop-dev-return-5457-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77003 invoked from network); 29 Nov 2006 23:49:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 23:49:44 -0000
Received: (qmail 92991 invoked by uid 500); 29 Nov 2006 23:49:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92960 invoked by uid 500); 29 Nov 2006 23:49:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92951 invoked by uid 99); 29 Nov 2006 23:49:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:49:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:49:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 33E9E7142EC
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 15:49:23 -0800 (PST)
Message-ID: <5519900.1164844163210.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 15:49:23 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12454492 ] 
            
Milind Bhandarkar commented on HADOOP-227:
------------------------------------------

Proposal for Copy-On-Write FileSystem Tree For Periodic Checkpointing

We propose that the hadoop namenode image be checkpointed to disk after
every fixed (configurable) number of transactions.

The checkpointing method we propose:

1. Does not introduce extensive changes in the simple locking model
   currently used in the namesystem (FSNamesystem).
2. Does not fork a heavyweight process to perform checkpointing.
3. Does not lock the entire namesystem during checkpointing.
4. Does not change the image or transaction log format in any way.
5. Does not significantly increase garbage collection activity.

This proposal is based on making the filesystem tree copy-on-write
*only during checkpointing*. We keep track of the number of outstanding
transactions in the main namenode thread. When this number reaches the
configured (dfs.checkpoint.interval) number (say 10 million), the
namenode thread that was performing the transaction (in a synchronized
method) performs the following actions:

1. Close the transaction log 'edits.N', where N is the current
   generation number. (Current fsedits is considered equivalent to
   'edits.0', and current fsimage is considered to be 'fsimage.0').
3. Creates a new transaction log 'edits.<N+1>'.
4. Wakes up a checkpointing thread to dump a new image.
5. Release namesystem lock.

This checkpointing thread:

1. Acquires global namesystem lock.
2. Sets a namenode-global boolean volatile variable
'checkpointingInProgress' to true.
3. Releases global lock.
4. Starts traversing the filesystem tree in breadth-first manner, and
writing it to the disk in a file called 'fsimage.<N+1>' and removes
fsimage.N, and edits.N.
5. After writing the image, reacquires the global namesystem lock.
6. Applies the changes on the shadow nodes to actual nodes.
7. Set checkpointingInProgress to false.
8. Releases the global namesystem lock.
9. Sleep waiting for notification to do checkpointing again. 

Step 6 operation will become clear, when we describe how the namenode
server threads change the namesystem tree *while* checkpointing is in
progress.

Namenode server threads always acquire the global namesystem lock
before making any changes to the filesystem tree. Therefore all the
steps described below occur in critical-section.

1. Check if checkpointingInProgress is false.
2. If it is false, perform the requested namesystem changes, exactly as
they are performed currently.
3. If it is true, locate the node of the filesystem tree that needs to
   be changed.
  3.1 If its member named 'shadow' of type 'Inode' is non-null,
      perform the requested changes to that node.
  3.2 Otherwise, create a new shadow Inode, clone all the fields from
      original Inode there, assign it to the 'shadow' field of original
      Inode. And perform the requested changes to the shadow Inode.
      Append the original node in a list called 'changedNodes'.
      
Step 6 of the checkpointing node consists of traversing the
'changedNodes' list, and replacing the fields of original node, with
it's shadow node, and resetting the shadow reference to null.

With this checkpointing scheme, the namenode startup procedure remains
unchanged, except that now the namenode looks for a valid image.N with
maximum N in the dfs.name.dir(s).


> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Milind Bhandarkar
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 23:49:47 2006
Return-Path: 
 <hadoop-dev-return-5458-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77054 invoked from network); 29 Nov 2006 23:49:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 23:49:47 -0000
Received: (qmail 93452 invoked by uid 500); 29 Nov 2006 23:49:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93217 invoked by uid 500); 29 Nov 2006 23:49:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93208 invoked by uid 99); 29 Nov 2006 23:49:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:49:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:49:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7CCDD7142F7
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 15:49:25 -0800 (PST)
Message-ID: <4470148.1164844165508.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 15:49:25 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12454493 ] 
            
Milind Bhandarkar commented on HADOOP-227:
------------------------------------------

Minor correction:

In the comment above, instead of

Step 6 of the checkpointing *node* consists of 

Please read:

Step 6 of the checkpointing *thread* consists of 



> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Milind Bhandarkar
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 23:55:44 2006
Return-Path: 
 <hadoop-dev-return-5459-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78767 invoked from network); 29 Nov 2006 23:55:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 23:55:44 -0000
Received: (qmail 3765 invoked by uid 500); 29 Nov 2006 23:55:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3745 invoked by uid 500); 29 Nov 2006 23:55:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3736 invoked by uid 99); 29 Nov 2006 23:55:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:55:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:55:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0D7797142F7
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 15:55:21 -0800 (PST)
Message-ID: <25129528.1164844521052.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 15:55:21 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-763) NameNode benchmark using mapred is
 insufficient
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

NameNode benchmark using mapred is insufficient
-----------------------------------------------

                 Key: HADOOP-763
                 URL: http://issues.apache.org/jira/browse/HADOOP-763
             Project: Hadoop
          Issue Type: Improvement
          Components: test
    Affects Versions: 0.8.0
            Reporter: Nigel Daley
         Assigned To: Nigel Daley
            Priority: Minor


The current namenode benchmark (org.apache.hadoop.examples.NNBench) uses map/reduce to distribute a load on the namenode.  For the purposes of loading the namenode, this model gives insufficient control over job start and failure recovery.  I propose the namenode benchmark be re-written to use slaves.sh directly to execute the namenode benchmark.  The benchmark should also give finer control over the operations executed and the timings reported.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Nov 29 23:59:45 2006
Return-Path: 
 <hadoop-dev-return-5460-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80123 invoked from network); 29 Nov 2006 23:59:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 23:59:45 -0000
Received: (qmail 8246 invoked by uid 500); 29 Nov 2006 23:59:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8213 invoked by uid 500); 29 Nov 2006 23:59:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8201 invoked by uid 99); 29 Nov 2006 23:59:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:59:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:59:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3C35D7142F7
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 15:59:22 -0800 (PST)
Message-ID: <10898210.1164844762244.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 15:59:22 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-763) NameNode benchmark using mapred is
 insufficient
In-Reply-To: <25129528.1164844521052.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-763?page=all ]

Nigel Daley updated HADOOP-763:
-------------------------------

    Attachment: HADOOP-763.patch

Milind, others,

Please review new namenode benchmark.

> NameNode benchmark using mapred is insufficient
> -----------------------------------------------
>
>                 Key: HADOOP-763
>                 URL: http://issues.apache.org/jira/browse/HADOOP-763
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Minor
>         Attachments: HADOOP-763.patch
>
>
> The current namenode benchmark (org.apache.hadoop.examples.NNBench) uses map/reduce to distribute a load on the namenode.  For the purposes of loading the namenode, this model gives insufficient control over job start and failure recovery.  I propose the namenode benchmark be re-written to use slaves.sh directly to execute the namenode benchmark.  The benchmark should also give finer control over the operations executed and the timings reported.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 00:03:42 2006
Return-Path: 
 <hadoop-dev-return-5461-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81418 invoked from network); 30 Nov 2006 00:03:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 00:03:42 -0000
Received: (qmail 15630 invoked by uid 500); 30 Nov 2006 00:03:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15593 invoked by uid 500); 30 Nov 2006 00:03:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15583 invoked by uid 99); 30 Nov 2006 00:03:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 16:03:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 16:03:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 121627142F7
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 16:03:21 -0800 (PST)
Message-ID: <21824491.1164845001071.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 16:03:21 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-764) The memory consumption of
 processReport() in the namenode can be reduced
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The memory consumption of processReport() in the namenode can be reduced
------------------------------------------------------------------------

                 Key: HADOOP-764
                 URL: http://issues.apache.org/jira/browse/HADOOP-764
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: dhruba borthakur
         Assigned To: dhruba borthakur


The FSNamesystem.processReport() method converts the blocklist for a datanode into an array by calling node.getBlocks(). Although this memory allocation is transient, it could possibly require the garbage-collector to work that much harder. 

The method Block.getBlocks() should be deprecated. Code that currently uses this method should instead iterate over the Collection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 00:27:42 2006
Return-Path: 
 <hadoop-dev-return-5462-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85998 invoked from network); 30 Nov 2006 00:27:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 00:27:42 -0000
Received: (qmail 37634 invoked by uid 500); 30 Nov 2006 00:27:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37600 invoked by uid 500); 30 Nov 2006 00:27:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37590 invoked by uid 99); 30 Nov 2006 00:27:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 16:27:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 16:27:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1087F7142FA
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 16:27:21 -0800 (PST)
Message-ID: <19928150.1164846441065.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 16:27:21 -0800 (PST)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-765) Hadoop Streaming should (optionally)
 sort on secondary key
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hadoop Streaming should (optionally) sort on secondary key
----------------------------------------------------------

                 Key: HADOOP-765
                 URL: http://issues.apache.org/jira/browse/HADOOP-765
             Project: Hadoop
          Issue Type: Improvement
            Reporter: arkady borkovsky


This is related to HADOOP-485

As described in HADOOP-485 and HADOOP-686,  many algorithms need the values to come in specific order.  
(The most prominent is JOIN : in MapReduce implementation of JOIN, the value has to indicate which "table" the record comes from.  It is very useful to have records from the smaller "table" to come first.)

(a) once HADOOP-485 is implemented, it should be propagated to Streaming so that sorting by secondary is done without writing any code, but just with specifying a parameter.

(b) alternatively, as Hadoop Streaming records are lines of text with key(s) separated from the value by a tab, a simple hack of running a sort on the MERGED input of reduce will work fine.   This may be quite efficient and easy way to implement this important feature without relying on  HADOOP-485.   


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 00:29:44 2006
Return-Path: 
 <hadoop-dev-return-5463-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86456 invoked from network); 30 Nov 2006 00:29:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 00:29:44 -0000
Received: (qmail 39424 invoked by uid 500); 30 Nov 2006 00:29:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39190 invoked by uid 500); 30 Nov 2006 00:29:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39181 invoked by uid 99); 30 Nov 2006 00:29:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 16:29:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 16:29:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 02A4F7142F8
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 16:29:23 -0800 (PST)
Message-ID: <10405017.1164846563008.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 16:29:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-654) jobs fail with some hardware/system
 failures on a small number of nodes
In-Reply-To: <12549458.1162234096611.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-654?page=comments#action_12454502 ] 
            
Owen O'Malley commented on HADOOP-654:
--------------------------------------

The number of failures on each task tracker is already on the web/ui.

I propose a very simple mechanism where each job can configure the maximum number of task failures that it will tolerate from a single node.

JobConf gets:
   void setMaxTaskFailuresPerHost(int newValue);
   int getMaxTaskFailuresPerHost();

JobInProgress keeps a Map from task tracker id to counts of failures. Each task failure increments the count for the responsible tracker. (Should lost task trackers count as 1 failures or lots of failures?)

When the tracker is asking for new tasks, if it has failed too many times, it is not given a new task. Note that these counts (and penalty boxes) are per a job.

Does that sound like a reasonable starting point?

> jobs fail with some hardware/system failures on a small number of nodes
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-654
>                 URL: http://issues.apache.org/jira/browse/HADOOP-654
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>            Priority: Minor
>
> occasionally, such as when the OS is out of some resource, a node fails only partly. The node is up and running, the task tracker is running and sending heartbeats, but every task fails because the tasktracker can't fork tasks or something.
> In these cases, that task tracker keeps getting assigned tasks to execute, and they all fail.
> A couple of nodes like that and jobs start failing badly.
> The job tracker should avoid assigning tasks to tasktrackers that are misbehaving.
> simple approach: avoid tasktrackers that report many more failures than average (say 3X). Simply use the info sent by the TT.
> better but harder: track TT failures over time and:
>  1. avoid those that exhibit a high failure *rate*
>  2. tell them to shut down

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 00:33:44 2006
Return-Path: 
 <hadoop-dev-return-5464-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87121 invoked from network); 30 Nov 2006 00:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 00:33:44 -0000
Received: (qmail 44553 invoked by uid 500); 30 Nov 2006 00:33:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44528 invoked by uid 500); 30 Nov 2006 00:33:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44519 invoked by uid 99); 30 Nov 2006 00:33:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 16:33:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 16:33:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8E24E7142F7
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 16:33:22 -0800 (PST)
Message-ID: <14359275.1164846802579.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 16:33:22 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-763) NameNode benchmark using mapred is
 insufficient
In-Reply-To: <25129528.1164844521052.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-763?page=comments#action_12454503 ] 
            
Milind Bhandarkar commented on HADOOP-763:
------------------------------------------

Looks good.

+1


> NameNode benchmark using mapred is insufficient
> -----------------------------------------------
>
>                 Key: HADOOP-763
>                 URL: http://issues.apache.org/jira/browse/HADOOP-763
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Minor
>         Attachments: HADOOP-763.patch
>
>
> The current namenode benchmark (org.apache.hadoop.examples.NNBench) uses map/reduce to distribute a load on the namenode.  For the purposes of loading the namenode, this model gives insufficient control over job start and failure recovery.  I propose the namenode benchmark be re-written to use slaves.sh directly to execute the namenode benchmark.  The benchmark should also give finer control over the operations executed and the timings reported.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 00:35:44 2006
Return-Path: 
 <hadoop-dev-return-5465-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87452 invoked from network); 30 Nov 2006 00:35:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 00:35:44 -0000
Received: (qmail 45712 invoked by uid 500); 30 Nov 2006 00:35:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45481 invoked by uid 500); 30 Nov 2006 00:35:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45472 invoked by uid 99); 30 Nov 2006 00:35:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 16:35:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 16:35:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DC3A87142F7
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 16:35:22 -0800 (PST)
Message-ID: <29271645.1164846922899.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 16:35:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-654) jobs fail with some hardware/system
 failures on a small number of nodes
In-Reply-To: <12549458.1162234096611.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-654?page=comments#action_12454504 ] 
            
Owen O'Malley commented on HADOOP-654:
--------------------------------------

We also need the web/ui for a job to list the black listed nodes for that job.

The job needs to be killed if there are no non-blacklisted task trackers.

> jobs fail with some hardware/system failures on a small number of nodes
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-654
>                 URL: http://issues.apache.org/jira/browse/HADOOP-654
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>            Priority: Minor
>
> occasionally, such as when the OS is out of some resource, a node fails only partly. The node is up and running, the task tracker is running and sending heartbeats, but every task fails because the tasktracker can't fork tasks or something.
> In these cases, that task tracker keeps getting assigned tasks to execute, and they all fail.
> A couple of nodes like that and jobs start failing badly.
> The job tracker should avoid assigning tasks to tasktrackers that are misbehaving.
> simple approach: avoid tasktrackers that report many more failures than average (say 3X). Simply use the info sent by the TT.
> better but harder: track TT failures over time and:
>  1. avoid those that exhibit a high failure *rate*
>  2. tell them to shut down

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 00:40:16 2006
Return-Path: 
 <hadoop-dev-return-5466-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89398 invoked from network); 30 Nov 2006 00:40:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 00:40:16 -0000
Received: (qmail 48909 invoked by uid 500); 30 Nov 2006 00:40:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48876 invoked by uid 500); 30 Nov 2006 00:40:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48867 invoked by uid 99); 30 Nov 2006 00:40:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 16:40:25 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 16:40:12 -0800
Received: from [207.126.231.117] (broadcome-dx.corp.yahoo.com
 [207.126.231.117])
	by rsmtp1.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kAU0dflR098502
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 16:39:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:mime-version:to:subject:
	content-type:content-transfer-encoding;
	b=Q9ujhO6tDoalhvCEYu1B7Y/TIZBIXuPBrUBQCTfHB+D13p9IdtyeCaa5OgH0HZHd
Message-ID: <456E284D.3040805@yahoo-inc.com>
Date: Wed, 29 Nov 2006 16:39:41 -0800
From: Raghu Angadi <rangadi@yahoo-inc.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: minor change in dataNode handling of multiple directories.
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


As part of the "Version upgrade" related changes, thinking of strictly 
requiring that datanode be able to lock _all_ the configured directories 
instead of any one of them.

Currently if multiple data directories are specified for a datanode, it 
tries to lock a file is in each of the directories. If it fails to lock 
some of the directories, it will use the directories that it could. 
Looks like this flexibility was included mainly for convenience in 
config file.

This might not affect anyone, let us know of your opinions.

Note that all directories have the same storage id. So each individual 
directory is not complete by itself but a part of one storage.

Raghu.

From MAILER-DAEMON Thu Nov 30 00:59:42 2006
Return-Path: 
 <hadoop-dev-return-5467-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92184 invoked from network); 30 Nov 2006 00:59:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 00:59:42 -0000
Received: (qmail 66598 invoked by uid 500); 30 Nov 2006 00:59:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66573 invoked by uid 500); 30 Nov 2006 00:59:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66564 invoked by uid 99); 30 Nov 2006 00:59:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 16:59:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 16:59:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0F80E7142F7
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 16:59:21 -0800 (PST)
Message-ID: <11885082.1164848361060.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 16:59:21 -0800 (PST)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-766) Streaming command should be logged on
 the cluster
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Streaming command should be logged on the cluster
-------------------------------------------------

                 Key: HADOOP-766
                 URL: http://issues.apache.org/jira/browse/HADOOP-766
             Project: Hadoop
          Issue Type: Improvement
            Reporter: arkady borkovsky


Currently, when a streaming job fails, it is difficult for the cluster administrator to figure out what was going on.
Logging all streaming commands in a centralized place will make trouble shooting more efficient.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 01:30:43 2006
Return-Path: 
 <hadoop-dev-return-5468-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99653 invoked from network); 30 Nov 2006 01:30:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 01:30:43 -0000
Received: (qmail 10234 invoked by uid 500); 30 Nov 2006 01:30:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10203 invoked by uid 500); 30 Nov 2006 01:30:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10193 invoked by uid 99); 30 Nov 2006 01:30:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 17:30:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 17:30:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0A2D97142F7
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 17:30:21 -0800 (PST)
Message-ID: <21091886.1164850221038.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 17:30:21 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-767) timeout when writing dfs file causes
 infinite loop when closing the file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

timeout when writing dfs file causes infinite loop when closing the file
------------------------------------------------------------------------

                 Key: HADOOP-767
                 URL: http://issues.apache.org/jira/browse/HADOOP-767
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.8.0
            Reporter: Nigel Daley


If, when writing to a dfs file, I get a timeout exception:

06/11/29 11:16:05 WARN fs.DFSClient: Error while writing.
java.net.SocketTimeoutException: timed out waiting for rpc response
       at org.apache.hadoop.ipc.Client.call(Client.java:469)
       at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:164)
       at org.apache.hadoop.dfs.$Proxy0.reportWrittenBlock(Unknown Source)
       at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.internalClose(DFSClient.java:1220)
       at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.endBlock(DFSClient.java:1175)
       at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.flush(DFSClient.java:1121)
       at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.write(DFSClient.java:1103)
       at org.apache.hadoop.examples.NNBench2.createWrite(NNBench2.java:107)
       at org.apache.hadoop.examples.NNBench2.main(NNBench2.java:247)

then the close() operation on the file appears to go into an infinite loop of retrying:

06/11/29 13:11:19 INFO fs.DFSClient: Could not complete file, retrying...
06/11/29 13:11:20 INFO fs.DFSClient: Could not complete file, retrying...
06/11/29 13:11:21 INFO fs.DFSClient: Could not complete file, retrying...
06/11/29 13:11:23 INFO fs.DFSClient: Could not complete file, retrying...
06/11/29 13:11:24 INFO fs.DFSClient: Could not complete file, retrying...
...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 02:03:27 2006
Return-Path: 
 <hadoop-dev-return-5469-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5059 invoked from network); 30 Nov 2006 02:03:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 02:03:27 -0000
Received: (qmail 41458 invoked by uid 500); 30 Nov 2006 02:03:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41230 invoked by uid 500); 30 Nov 2006 02:03:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41219 invoked by uid 99); 30 Nov 2006 02:03:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 18:03:35 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of bpendleton@gmail.com
 designates 66.249.82.239 as permitted sender)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 18:03:24 -0800
Received: by wx-out-0506.google.com with SMTP id i29so2268645wxd
        for <hadoop-dev@lucene.apache.org>;
 Wed, 29 Nov 2006 18:03:04 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=AtayyRCPg/LYshJO1+P38C8LkX6plt/VHj8/yaJ065vCyFbPzm2ByGNktU95onGQwqHCjJVDc+ECdB8BA/xOalqRT3nBEAABrN0l4XSpCK3v6NGCGClsmVp9Msm8c9q5RyYHTIt/6gBUoGNjvGF2tUu2GDTZM71CuZtBf0GIhZc=
Received: by 10.70.84.6 with SMTP id h6mr5160068wxb.1164852183801;
        Wed, 29 Nov 2006 18:03:03 -0800 (PST)
Received: by 10.70.129.17 with HTTP; Wed, 29 Nov 2006 18:03:03 -0800 (PST)
Message-ID: <1bf79d3e0611291803h2b5e3b5dq2992255a00f7f92f@mail.gmail.com>
Date: Wed, 29 Nov 2006 18:03:03 -0800
From: "Bryan A. P. Pendleton" <bp@geekdom.net>
Sender: bpendleton@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: minor change in dataNode handling of multiple directories.
In-Reply-To: <456E284D.3040805@yahoo-inc.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_36981_8378998.1164852183770"
References: <456E284D.3040805@yahoo-inc.com>
X-Google-Sender-Auth: 21f4f0436e4231c1
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36981_8378998.1164852183770
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I would prefer this proposal not be implements. The current way things work
makes it possible to configure, centrally, a list of all directories that
_could_ be used for storage. Since there's no easy way to do per-node
configurations (nor would it be desirable, IMO, in this case), the
directories config ends up being the list of all possibly usable
directories. Many of my cluster nodes are configured using "rocksclusters":
they will have a uniform set of mounts created, one for each physical drive,
at boot/re-install. If I specify in my config the list of all directories up
to the most number of drives a machine will ever have, then I get easy
drop-in use, regardless of variations in nodes in the cluster. I have been
relying in the current behavior to keep me sane.

OTOH, I wouldn't oppose making this the default behavior, with a
configuration param that would set things back to the old behavior.

On 11/29/06, Raghu Angadi <rangadi@yahoo-inc.com> wrote:
>
>
> As part of the "Version upgrade" related changes, thinking of strictly
> requiring that datanode be able to lock _all_ the configured directories
> instead of any one of them.
>
> Currently if multiple data directories are specified for a datanode, it
> tries to lock a file is in each of the directories. If it fails to lock
> some of the directories, it will use the directories that it could.
> Looks like this flexibility was included mainly for convenience in
> config file.
>
> This might not affect anyone, let us know of your opinions.
>
> Note that all directories have the same storage id. So each individual
> directory is not complete by itself but a part of one storage.
>
> Raghu.
>



-- 
Bryan A. P. Pendleton
Ph: (877) geek-1-bp

------=_Part_36981_8378998.1164852183770--

From MAILER-DAEMON Thu Nov 30 02:28:44 2006
Return-Path: 
 <hadoop-dev-return-5470-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15520 invoked from network); 30 Nov 2006 02:28:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 02:28:44 -0000
Received: (qmail 67463 invoked by uid 500); 30 Nov 2006 02:28:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67235 invoked by uid 500); 30 Nov 2006 02:28:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67226 invoked by uid 99); 30 Nov 2006 02:28:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 18:28:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 18:28:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DC0AC7142F8
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 18:28:22 -0800 (PST)
Message-ID: <1989287.1164853702898.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 18:28:22 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-654) jobs fail with some hardware/system
 failures on a small number of nodes
In-Reply-To: <12549458.1162234096611.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-654?page=comments#action_12454517 ] 
            
Yoram Arnon commented on HADOOP-654:
------------------------------------

that would be a great starting point.
later on JT could instruct TT to shut down based on a more global error rate/number

> jobs fail with some hardware/system failures on a small number of nodes
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-654
>                 URL: http://issues.apache.org/jira/browse/HADOOP-654
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>            Priority: Minor
>
> occasionally, such as when the OS is out of some resource, a node fails only partly. The node is up and running, the task tracker is running and sending heartbeats, but every task fails because the tasktracker can't fork tasks or something.
> In these cases, that task tracker keeps getting assigned tasks to execute, and they all fail.
> A couple of nodes like that and jobs start failing badly.
> The job tracker should avoid assigning tasks to tasktrackers that are misbehaving.
> simple approach: avoid tasktrackers that report many more failures than average (say 3X). Simply use the info sent by the TT.
> better but harder: track TT failures over time and:
>  1. avoid those that exhibit a high failure *rate*
>  2. tell them to shut down

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 02:37:44 2006
Return-Path: 
 <hadoop-dev-return-5471-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17745 invoked from network); 30 Nov 2006 02:37:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 02:37:44 -0000
Received: (qmail 74210 invoked by uid 500); 30 Nov 2006 02:37:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73983 invoked by uid 500); 30 Nov 2006 02:37:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73974 invoked by uid 99); 30 Nov 2006 02:37:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 18:37:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 18:37:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F2D737142EC
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 18:37:22 -0800 (PST)
Message-ID: <23034428.1164854242992.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 18:37:22 -0800 (PST)
From: "Koji Noguchi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-751) Namenode constantly using up 100%
 CPU
In-Reply-To: <6752273.1164673941058.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-751?page=comments#action_12454518 ] 
            
Koji Noguchi commented on HADOOP-751:
-------------------------------------

This high CPU load was caused by not enough heap size for the jvm.

> Namenode constantly using up 100% CPU
> -------------------------------------
>
>                 Key: HADOOP-751
>                 URL: http://issues.apache.org/jira/browse/HADOOP-751
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Koji Noguchi
>
> Trying to figure out the exact cause, but CPU load of the namenode is constantly 100% without any file exchanges.
> .log file of the namenode showing the following exception about every 20 seconds.
> 2006-11-27 16:02:07,199 INFO org.apache.hadoop.ipc.Server: IPC Server handler 5 on 8020 call error: java.io.IOException: java.util.NoSuchElementException
> java.io.IOException: java.util.NoSuchElementException
>   at java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1029)
>   at java.util.TreeMap$KeyIterator.next(TreeMap.java:1058)
>   at java.util.AbstractCollection.toArray(AbstractCollection.java:176)
>   at org.apache.hadoop.dfs.DatanodeDescriptor.getBlocks(DatanodeDescriptor.java:96)
>   at org.apache.hadoop.dfs.FSNamesystem.processReport(FSNamesystem.java:1446)
>   at org.apache.hadoop.dfs.NameNode.blockReport(NameNode.java:506)
>   at sun.reflect.GeneratedMethodAccessor11.invoke(Unknown Source)
>   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>   at java.lang.reflect.Method.invoke(Method.java:585)
>   at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:387)
>   at org.apache.hadoop.ipc.Server$Handler.run(Server.java:518)
> On some of the datanodes, .log file is showing
> 2006-11-27 16:03:57,542 WARN org.apache.hadoop.dfs.DataNode: org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.util.NoSuchElementException
>   at java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1029)
>   at java.util.TreeMap$KeyIterator.next(TreeMap.java:1058)
>   at java.util.AbstractCollection.toArray(AbstractCollection.java:176)
>   at org.apache.hadoop.dfs.DatanodeDescriptor.getBlocks(DatanodeDescriptor.java:96)
>   at org.apache.hadoop.dfs.FSNamesystem.processReport(FSNamesystem.java:1446)
>   at org.apache.hadoop.dfs.NameNode.blockReport(NameNode.java:506)
>   at sun.reflect.GeneratedMethodAccessor11.invoke(Unknown Source)
>   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>   at java.lang.reflect.Method.invoke(Method.java:585)
>   at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:387)
>   at org.apache.hadoop.ipc.Server$Handler.run(Server.java:518)
>   at org.apache.hadoop.ipc.Client$Connection.run(Client.java:248)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 03:00:30 2006
Return-Path: 
 <hadoop-dev-return-5472-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21379 invoked from network); 30 Nov 2006 03:00:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 03:00:30 -0000
Received: (qmail 95587 invoked by uid 500); 30 Nov 2006 03:00:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95561 invoked by uid 500); 30 Nov 2006 03:00:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95552 invoked by uid 99); 30 Nov 2006 03:00:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 19:00:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 18:59:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EDAC77142F7
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 18:59:22 -0800 (PST)
Message-ID: <29264027.1164855562971.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 18:59:22 -0800 (PST)
From: "Koji Noguchi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-751) Namenode constantly using up 100%
 CPU
In-Reply-To: <6752273.1164673941058.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-751?page=comments#action_12454521 ] 
            
Koji Noguchi commented on HADOOP-751:
-------------------------------------

The error messages I initially copy&pasted are probably not directly related to this problem.
Once I increased the HADOOP_HEAPSIZE, this high CPU load problem went away.

Raghu pointed out 
"If increase of 500mb fixed the issue, wouldn't the main suspect be Java  GC?"

"attaching gdb to the pid shows jvm is handling "failed allocation" most of the time. I don't know if it is possible to check java stack for a given pid. I tried attaching multiple times and stack looks pretty much the same each time: "

#0  0xf771bea8 in instanceKlass::oop_adjust_pointers ()
   from libjvm.so
#1  0xf7937999 in PSMarkSweepDecorator::adjust_pointers ()
   from libjvm.so
#2  0xf79383af in PSOldGen::adjust_pointers () from libjvm.so
#3  0xf79370d6 in PSMarkSweep::mark_sweep_phase3 ()
   from libjvm.so
#4  0xf7936184 in PSMarkSweep::invoke_no_policy ()
   from libjvm.so
#5  0xf7940e7d in PSScavenge::invoke () from libjvm.so
#6  0xf790b40f in ParallelScavengeHeap::failed_mem_allocate ()
   from libjvm.so
#7  0xf79dfa6f in VM_ParallelGCFailedAllocation::doit ()
   from libjvm.so
#8  0xf79df466 in VM_Operation::evaluate () from libjvm.so
#9  0xf79dea77 in VMThread::evaluate_operation ()
   from libjvm.so
#10 0xf79dece5 in VMThread::loop () from libjvm.so
#11 0xf79de850 in VMThread::run () fromlibjvm.so
#12 0xf78fe338 in _start () from libjvm.so
#13 0xf7fd4341 in start_thread () from /lib/tls/libpthread.so.0
#14 0xf7f686fe in clone () from /lib/tls/libc.so.6 





> Namenode constantly using up 100% CPU
> -------------------------------------
>
>                 Key: HADOOP-751
>                 URL: http://issues.apache.org/jira/browse/HADOOP-751
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Koji Noguchi
>
> Trying to figure out the exact cause, but CPU load of the namenode is constantly 100% without any file exchanges.
> .log file of the namenode showing the following exception about every 20 seconds.
> 2006-11-27 16:02:07,199 INFO org.apache.hadoop.ipc.Server: IPC Server handler 5 on 8020 call error: java.io.IOException: java.util.NoSuchElementException
> java.io.IOException: java.util.NoSuchElementException
>   at java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1029)
>   at java.util.TreeMap$KeyIterator.next(TreeMap.java:1058)
>   at java.util.AbstractCollection.toArray(AbstractCollection.java:176)
>   at org.apache.hadoop.dfs.DatanodeDescriptor.getBlocks(DatanodeDescriptor.java:96)
>   at org.apache.hadoop.dfs.FSNamesystem.processReport(FSNamesystem.java:1446)
>   at org.apache.hadoop.dfs.NameNode.blockReport(NameNode.java:506)
>   at sun.reflect.GeneratedMethodAccessor11.invoke(Unknown Source)
>   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>   at java.lang.reflect.Method.invoke(Method.java:585)
>   at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:387)
>   at org.apache.hadoop.ipc.Server$Handler.run(Server.java:518)
> On some of the datanodes, .log file is showing
> 2006-11-27 16:03:57,542 WARN org.apache.hadoop.dfs.DataNode: org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.util.NoSuchElementException
>   at java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1029)
>   at java.util.TreeMap$KeyIterator.next(TreeMap.java:1058)
>   at java.util.AbstractCollection.toArray(AbstractCollection.java:176)
>   at org.apache.hadoop.dfs.DatanodeDescriptor.getBlocks(DatanodeDescriptor.java:96)
>   at org.apache.hadoop.dfs.FSNamesystem.processReport(FSNamesystem.java:1446)
>   at org.apache.hadoop.dfs.NameNode.blockReport(NameNode.java:506)
>   at sun.reflect.GeneratedMethodAccessor11.invoke(Unknown Source)
>   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>   at java.lang.reflect.Method.invoke(Method.java:585)
>   at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:387)
>   at org.apache.hadoop.ipc.Server$Handler.run(Server.java:518)
>   at org.apache.hadoop.ipc.Client$Connection.run(Client.java:248)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 03:07:44 2006
Return-Path: 
 <hadoop-dev-return-5473-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22738 invoked from network); 30 Nov 2006 03:07:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 03:07:44 -0000
Received: (qmail 433 invoked by uid 500); 30 Nov 2006 03:07:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 402 invoked by uid 500); 30 Nov 2006 03:07:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 389 invoked by uid 99); 30 Nov 2006 03:07:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 19:07:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 19:07:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E5D5B7142EC
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 19:07:22 -0800 (PST)
Message-ID: <26224654.1164856042938.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 19:07:22 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12454523 ] 
            
Konstantin Shvachko commented on HADOOP-227:
--------------------------------------------

The design looks pretty simple and clean.
I still like the merging approach better. It is stand-alone!
There is no need to change anything in the name-node code.
It is useful as a maintenance utility for merging edits and images externally.
Does not lock name-node.
At some point the name-node data structures should be revised substantially
and this copy-on-write effort will most probably be a wasted effort.
Does it make sense to invest more effort in designing a simpler merge algorithm?

If we still choose to do that:
- Should we use "standard name" for current image and edits files (without .N)?
Meaning before checkpointing edits is renamed to edits.N and new edits is re-created.
- Do we need to keep all old images? Looks like just the last one is required.
This is periodic checkpointing, not a backup procedure.
- If the node crashes in the middle of the checkpoint it is left with the old image,
old edits, and new edits files. Are we going to apply both old and new edits during startup?

> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Milind Bhandarkar
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 03:24:32 2006
Return-Path: 
 <hadoop-dev-return-5474-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24786 invoked from network); 30 Nov 2006 03:24:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 03:24:32 -0000
Received: (qmail 11203 invoked by uid 500); 30 Nov 2006 03:24:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11171 invoked by uid 500); 30 Nov 2006 03:24:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11162 invoked by uid 99); 30 Nov 2006 03:24:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 19:24:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of smallbadguy@gmail.com
 designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 19:24:29 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2736437nfc
        for <hadoop-dev@lucene.apache.org>;
 Wed, 29 Nov 2006 19:24:08 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=uBWnpLSkDSO1QC8YfXZigk5/AVH4Lj7PEc3xBgEB/k6M+fq7wwSmxeXLOkm1RFbe9Zfz80yb/5JK6zMttCrv+VfjqwUEymKdRmm5Cxf9DYQbzF8qH7ZmLuS1/uOYB4feqESwbY0qfpuIpHny0fEI9spvJcVKW+Na+i5Hhyeuejc=
Received: by 10.82.113.6 with SMTP id l6mr743602buc.1164857047911;
        Wed, 29 Nov 2006 19:24:07 -0800 (PST)
Received: by 10.82.155.12 with HTTP; Wed, 29 Nov 2006 19:24:07 -0800 (PST)
Message-ID: <6036f89e0611291924u1a0ca456i1b92b9d1f60537ab@mail.gmail.com>
Date: Thu, 30 Nov 2006 11:24:07 +0800
From: "Scott Green" <smallbadguy@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: HBase Design Ideas, Part II
Cc: michael.cafarella@gmail.com
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike

Are you still working on HBase? and could you please introduce the
project status to us? I have strong interesting in your idea :)

- Scott

On 5/16/06, Michael Cafarella <michael.cafarella@gmail.com> wrote:
> Hi everyone,
>
> My previous mail mentioned a bunch of design ideas that were mainly
> lifted from Jeff Dean's BigTable talk.  BigTable seems like a useful
> way to do large-scale row storage, and their decisions largely seem
> like the right ones.
>
> However, BigTable still leaves some things on the table.  Items to
> improve include a query language and multi-row locking, among
> other things.
>
> Dean said explicitly in his talk that they wanted to avoid multirow
> locking because it's complicated, error-prone, and maybe not necessary.
> He's right on at least the first two, and maybe the third.
>
> Multiple row locks are useful when you're making a change to
> several rows that should be atomic; you want all the changes
> or none of the changes.  It's also used in traditional databases
> if you want to perform an expensive read operation (like a
> multiway join) and you want to make sure the results don't
> get modified while you're reading.
>
> Distributed lock acquisition is very hard to do.  It's bug-prone
> and often has very weird performance ramifications.  It's
> difficult to get working, difficult to tune, difficult to everything.
>
> Here are a few ideas on what to do:
> 1)  Suck it up and have the client acquire locks on multiple
> HRegionServers simultaneously.  All clients would have to
> agree to acquire locks according to some global ordering to
> avoid deadlock.  HRegions would not be allowed to migrate
> to a new server if locked.
>
> If this is a rare circumstance, a better approach would be
> to have a dedicated "lock acquirer" through which clients
> make requests.  It doesn't help the theoretical problem here,
> but it would make debugging an awful lot easier.
>
> 2)  In the case of long-lasting read operations, we can
> use versioning to guarantee consistency.  If each row is
> annotated with an edit timestamp, and we know that there
> is sufficient version history available, the long-lasting job
> can run over a specific version only.
>
> Edits can continue to be made to the database while the
> read-only job is ongoing.  The operation is performed over
> the database as of the time the task was submitted.
>
> 3) In the case of multiple row updates, we may be able to
> use different edit semantics to avoid locking.  For example,
> consider that we want to add a single column/value pair to
> multiple rows.  We want this to happen atomically, so that
> both rows get the value or neither of them do so.
>
> If it's just an add, then we don't need to lock the rows at
> all; the add will always succeed, even if other writes
> intervene. Traditionally there's been no difference between
> among data "updates", so they all require locking.  If we
> can get a client to adjust the update semantics slightly,
> then the locking can be much more relaxed.
>
> I'd say that "add" or "append" semantics are likely to be
> at least as common as "edit" semantics.
>
> Can you think of the family of edit semantics you'd like
> to see offered here?
>
> Also, how useful do you think a general-purpose query language
> would be for HBase?  It would be fairly straightforward to implement,
> for example, a poor man's version of SQL that has different locking
> and update behavior (and which chucks out the more exotic elements).
> This might be compiled into a piece of code that is executed
> immediately, or it might be transformed into a long-lasting mapreduce
> job.
>
> I have a few ideas for such a language, but I'm worried it's getting
> a little far afield from what we're interested in for Hadoop.
>
> --Mike
>
>

From MAILER-DAEMON Thu Nov 30 03:24:44 2006
Return-Path: 
 <hadoop-dev-return-5475-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24835 invoked from network); 30 Nov 2006 03:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 03:24:44 -0000
Received: (qmail 11695 invoked by uid 500); 30 Nov 2006 03:24:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11461 invoked by uid 500); 30 Nov 2006 03:24:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11452 invoked by uid 99); 30 Nov 2006 03:24:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 19:24:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 19:24:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E31FE7142F7
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 19:24:22 -0800 (PST)
Message-ID: <30236676.1164857062927.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 19:24:22 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-432) support undelete, snapshots, or other
 mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-432?page=all ]

Wendy Chien updated HADOOP-432:
-------------------------------

    Attachment: undelete12.patch

This latest patch fixes a few bugs, including the one dhruba mentioned.  

1. when restoring a deleted item, create the directories in the path if they no longer exist.
2. handle deleting and undeleting directories correctly when the destination directory already exists (and contains files or subdirectories).
3. check operation (rename or delete) succeeded before making changes to the bookkeeping data structure.

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete.patch, undelete11.patch, undelete12.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 04:02:50 2006
Return-Path: 
 <hadoop-dev-return-5476-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32257 invoked from network); 30 Nov 2006 04:02:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 04:02:50 -0000
Received: (qmail 49010 invoked by uid 500); 30 Nov 2006 04:02:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48826 invoked by uid 500); 30 Nov 2006 04:02:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48816 invoked by uid 99); 30 Nov 2006 04:02:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 20:02:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of smallbadguy@gmail.com
 designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 20:02:46 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2743150nfc
        for <hadoop-dev@lucene.apache.org>;
 Wed, 29 Nov 2006 20:02:25 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=mtQTfKlH3+4p262Uqt20KrR3KFnf5hEY+Vd9gO8P1Eg6HQndCBqANJKaWed2jBurkLDykA4J7ilySE/tyvbT5DuCobJ9tmUGhxYZGjX+42LLA4by+o4unltC2ZKMDhwb2RzyR85QhnWOT2izNtPURVcrwtDBGucodttUgTjrYVc=
Received: by 10.82.105.13 with SMTP id d13mr738843buc.1164859344961;
        Wed, 29 Nov 2006 20:02:24 -0800 (PST)
Received: by 10.82.155.12 with HTTP; Wed, 29 Nov 2006 20:02:24 -0800 (PST)
Message-ID: <6036f89e0611292002h52021743ndbf24417ce38f192@mail.gmail.com>
Date: Thu, 30 Nov 2006 12:02:24 +0800
From: "Scott Green" <smallbadguy@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: HBase Design Ideas, Part II
Cc: michael.cafarella@gmail.com
In-Reply-To: <6036f89e0611291924u1a0ca456i1b92b9d1f60537ab@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6036f89e0611291924u1a0ca456i1b92b9d1f60537ab@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am not 100% sure HDFS/HBase is what I exactly want. And here I state
my requirement and please help me to evaluate it. I am still new to
HDFS.

I build one search engine using nutch, and now I need to collect other
related content  by other systems. The question is where should I
storge the *related content* and how to connect them with nutch index.

As to the storage, two choices are available: HDFS/HBase and RDMS. I'd
prefer the  first one. And at the beginning, the content are only be
appended w/o deleting, updating. And they should be retrieved by the
key(something like foreign key in RDMS, and the stuff is connected to
index.)

If you think i am on the right way, could you help to give me some
code snippets to show how to store the content? Big thanks

- Scott.



On 11/30/06, Scott Green <smallbadguy@gmail.com> wrote:
> Hi Mike
>
> Are you still working on HBase? and could you please introduce the
> project status to us? I have strong interesting in your idea :)
>
> - Scott
>
> On 5/16/06, Michael Cafarella <michael.cafarella@gmail.com> wrote:
> > Hi everyone,
> >
> > My previous mail mentioned a bunch of design ideas that were mainly
> > lifted from Jeff Dean's BigTable talk.  BigTable seems like a useful
> > way to do large-scale row storage, and their decisions largely seem
> > like the right ones.
> >
> > However, BigTable still leaves some things on the table.  Items to
> > improve include a query language and multi-row locking, among
> > other things.
> >
> > Dean said explicitly in his talk that they wanted to avoid multirow
> > locking because it's complicated, error-prone, and maybe not necessary.
> > He's right on at least the first two, and maybe the third.
> >
> > Multiple row locks are useful when you're making a change to
> > several rows that should be atomic; you want all the changes
> > or none of the changes.  It's also used in traditional databases
> > if you want to perform an expensive read operation (like a
> > multiway join) and you want to make sure the results don't
> > get modified while you're reading.
> >
> > Distributed lock acquisition is very hard to do.  It's bug-prone
> > and often has very weird performance ramifications.  It's
> > difficult to get working, difficult to tune, difficult to everything.
> >
> > Here are a few ideas on what to do:
> > 1)  Suck it up and have the client acquire locks on multiple
> > HRegionServers simultaneously.  All clients would have to
> > agree to acquire locks according to some global ordering to
> > avoid deadlock.  HRegions would not be allowed to migrate
> > to a new server if locked.
> >
> > If this is a rare circumstance, a better approach would be
> > to have a dedicated "lock acquirer" through which clients
> > make requests.  It doesn't help the theoretical problem here,
> > but it would make debugging an awful lot easier.
> >
> > 2)  In the case of long-lasting read operations, we can
> > use versioning to guarantee consistency.  If each row is
> > annotated with an edit timestamp, and we know that there
> > is sufficient version history available, the long-lasting job
> > can run over a specific version only.
> >
> > Edits can continue to be made to the database while the
> > read-only job is ongoing.  The operation is performed over
> > the database as of the time the task was submitted.
> >
> > 3) In the case of multiple row updates, we may be able to
> > use different edit semantics to avoid locking.  For example,
> > consider that we want to add a single column/value pair to
> > multiple rows.  We want this to happen atomically, so that
> > both rows get the value or neither of them do so.
> >
> > If it's just an add, then we don't need to lock the rows at
> > all; the add will always succeed, even if other writes
> > intervene. Traditionally there's been no difference between
> > among data "updates", so they all require locking.  If we
> > can get a client to adjust the update semantics slightly,
> > then the locking can be much more relaxed.
> >
> > I'd say that "add" or "append" semantics are likely to be
> > at least as common as "edit" semantics.
> >
> > Can you think of the family of edit semantics you'd like
> > to see offered here?
> >
> > Also, how useful do you think a general-purpose query language
> > would be for HBase?  It would be fairly straightforward to implement,
> > for example, a poor man's version of SQL that has different locking
> > and update behavior (and which chucks out the more exotic elements).
> > This might be compiled into a piece of code that is executed
> > immediately, or it might be transformed into a long-lasting mapreduce
> > job.
> >
> > I have a few ideas for such a language, but I'm worried it's getting
> > a little far afield from what we're interested in for Hadoop.
> >
> > --Mike
> >
> >
>

From MAILER-DAEMON Thu Nov 30 07:19:43 2006
Return-Path: 
 <hadoop-dev-return-5477-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71377 invoked from network); 30 Nov 2006 07:19:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 07:19:43 -0000
Received: (qmail 36768 invoked by uid 500); 30 Nov 2006 07:19:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36741 invoked by uid 500); 30 Nov 2006 07:19:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36732 invoked by uid 99); 30 Nov 2006 07:19:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 23:19:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 23:19:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3D7AE7142F7
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 23:19:22 -0800 (PST)
Message-ID: <9662541.1164871162249.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 23:19:22 -0800 (PST)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-759) TextInputFormat should allow
 different treatment on carriage return char '\r'
In-Reply-To: <10853195.1164779663091.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-759?page=comments#action_12454544 ] 
            
eric baldeschwieler commented on HADOOP-759:
--------------------------------------------

Is there a situation where we want to treat CR-LF ("\r\n" right?) as two line breaks?  If we can afford the extra processing, perhaps we should just check for this case when we see a CR in get line?  In the average case of only "\n" this will not cost us anything and we'll get CR-LF right for PC files.  I don't think there is a case we will get wrong and we'll only incur extra processing for CR only files, which are rather rare I expect, since apple abandoned this with osX and I'm not aware of any current system that uses this convention...

Just getting this right seems simpler than adding extra methods and complexity to the interface.

Thoughts?

> TextInputFormat should allow different treatment on carriage return char '\r'
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-759
>                 URL: http://issues.apache.org/jira/browse/HADOOP-759
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Runping Qi
>
> The current implementation treat '\r' and '\n' both as line breakers. However, in some cases, it is desiable to strictly use '\n' as the solely line breaker and treat '\r' as a part of data in a line. 
> One way to do this is to make readline function as a member function so that the user can create a subclass to overwrite the function with the desired behavior.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 07:39:21 2006
Return-Path: 
 <hadoop-dev-return-5478-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74160 invoked from network); 30 Nov 2006 07:39:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 07:39:21 -0000
Received: (qmail 51357 invoked by uid 500); 30 Nov 2006 07:39:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51124 invoked by uid 500); 30 Nov 2006 07:39:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51115 invoked by uid 99); 30 Nov 2006 07:39:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 23:39:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 23:39:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3FFCD7142F7
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 23:38:22 -0800 (PST)
Message-ID: <27094389.1164872302259.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 23:38:22 -0800 (PST)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-761) Unit tests should cleanup created
 files in /tmp. It causes tests to fail if more than one users run tests on
 same machine.
In-Reply-To: <28981014.1164801562659.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-761?page=comments#action_12454548 ] 
            
eric baldeschwieler commented on HADOOP-761:
--------------------------------------------

Using /tmp is simply not a good idea.  It leaves you vulnerable to various of system configuration differences, of which there are millions out there.  We should create temp files in the test's working directory. 

> Unit tests should cleanup created files in /tmp. It causes tests to fail if more than one users run tests on same machine.
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-761
>                 URL: http://issues.apache.org/jira/browse/HADOOP-761
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>            Reporter: Sanjay Dahiya
>            Priority: Minor
>
> TestMiniMRLocalFS  test cases creates /tmp/wc/input/, which is not cleaned up, any other user running test on same machine simultaneously or later will see test failures. 
> It should either use a temp directory in the build/test or use java's File.createTempFile method for temporary data and then clean it up. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 07:41:17 2006
Return-Path: 
 <hadoop-dev-return-5479-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74543 invoked from network); 30 Nov 2006 07:41:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 07:41:17 -0000
Received: (qmail 56268 invoked by uid 500); 30 Nov 2006 07:41:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56237 invoked by uid 500); 30 Nov 2006 07:41:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56228 invoked by uid 99); 30 Nov 2006 07:41:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 23:41:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 23:41:05 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4214B7142F7
	for <hadoop-dev@lucene.apache.org>; Wed, 29 Nov 2006 23:40:22 -0800 (PST)
Message-ID: <3739977.1164872422267.JavaMail.jira@brutus>
Date: Wed, 29 Nov 2006 23:40:22 -0800 (PST)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-761) Unit tests should cleanup created
 files in /tmp. It causes tests to fail if more than one users run tests on
 same machine.
In-Reply-To: <28981014.1164801562659.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-761?page=comments#action_12454549 ] 
            
eric baldeschwieler commented on HADOOP-761:
--------------------------------------------

We should start a unit test authors document and add this to it!

> Unit tests should cleanup created files in /tmp. It causes tests to fail if more than one users run tests on same machine.
> --------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-761
>                 URL: http://issues.apache.org/jira/browse/HADOOP-761
>             Project: Hadoop
>          Issue Type: Bug
>          Components: test
>            Reporter: Sanjay Dahiya
>            Priority: Minor
>
> TestMiniMRLocalFS  test cases creates /tmp/wc/input/, which is not cleaned up, any other user running test on same machine simultaneously or later will see test failures. 
> It should either use a temp directory in the build/test or use java's File.createTempFile method for temporary data and then clean it up. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 08:45:14 2006
Return-Path: 
 <hadoop-dev-return-5480-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96440 invoked from network); 30 Nov 2006 08:45:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 08:45:14 -0000
Received: (qmail 27965 invoked by uid 500); 30 Nov 2006 08:45:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27734 invoked by uid 500); 30 Nov 2006 08:45:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27724 invoked by uid 99); 30 Nov 2006 08:45:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 00:45:21 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 00:45:09 -0800
Received: from [192.168.1.100] (snvvpn2-10-72-76-c211.corp.yahoo.com
 [10.72.76.211])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kAU8ieHd012253
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 00:44:41 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=QU8KxyzLzjqI5lQQd/TX7KxHCM8MY/9yTHD1JnAhAnO6HA60Hrn064+sHKIiNUsq
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <1bf79d3e0611291803h2b5e3b5dq2992255a00f7f92f@mail.gmail.com>
References: <456E284D.3040805@yahoo-inc.com>
 <1bf79d3e0611291803h2b5e3b5dq2992255a00f7f92f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4E92968B-0994-4B8F-BC3E-EECC1F91A1B9@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: minor change in dataNode handling of multiple directories.
Date: Thu, 30 Nov 2006 00:44:48 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

We want to be able to support fail in place too.  IE a machine should  
be able to be used with one dead drive.  It sounds like this is a  
step in the wrong direction.

Perhaps we should just allow a node to upgrade new directories that  
appear later?  Need to be sure snapshotting works as expected in this  
case too...

I think it is worth solving this more complicated problem.

Upgrades should not be possible unless enough of the FS is reachable  
to leave safemode IMO.  This means we'll need to be able to test for  
this before we upgrade.  Fun!

On Nov 29, 2006, at 6:03 PM, Bryan A. P. Pendleton wrote:

> I would prefer this proposal not be implements. The current way  
> things work
> makes it possible to configure, centrally, a list of all  
> directories that
> _could_ be used for storage. Since there's no easy way to do per-node
> configurations (nor would it be desirable, IMO, in this case), the
> directories config ends up being the list of all possibly usable
> directories. Many of my cluster nodes are configured using  
> "rocksclusters":
> they will have a uniform set of mounts created, one for each  
> physical drive,
> at boot/re-install. If I specify in my config the list of all  
> directories up
> to the most number of drives a machine will ever have, then I get easy
> drop-in use, regardless of variations in nodes in the cluster. I  
> have been
> relying in the current behavior to keep me sane.
>
> OTOH, I wouldn't oppose making this the default behavior, with a
> configuration param that would set things back to the old behavior.
>
> On 11/29/06, Raghu Angadi <rangadi@yahoo-inc.com> wrote:
>>
>>
>> As part of the "Version upgrade" related changes, thinking of  
>> strictly
>> requiring that datanode be able to lock _all_ the configured  
>> directories
>> instead of any one of them.
>>
>> Currently if multiple data directories are specified for a  
>> datanode, it
>> tries to lock a file is in each of the directories. If it fails to  
>> lock
>> some of the directories, it will use the directories that it could.
>> Looks like this flexibility was included mainly for convenience in
>> config file.
>>
>> This might not affect anyone, let us know of your opinions.
>>
>> Note that all directories have the same storage id. So each  
>> individual
>> directory is not complete by itself but a part of one storage.
>>
>> Raghu.
>>
>
>
>
> -- 
> Bryan A. P. Pendleton
> Ph: (877) geek-1-bp


From MAILER-DAEMON Thu Nov 30 13:54:17 2006
Return-Path: 
 <hadoop-dev-return-5481-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96781 invoked from network); 30 Nov 2006 13:54:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 13:54:17 -0000
Received: (qmail 63237 invoked by uid 500); 30 Nov 2006 13:54:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63212 invoked by uid 500); 30 Nov 2006 13:54:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63200 invoked by uid 99); 30 Nov 2006 13:54:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 05:54:25 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 05:54:12 -0800
Received: from [IPv6:::1] (socks1.corp.yahoo.com [216.145.54.158])
	by mrout2-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 kAUDrhfe077242
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 05:53:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=uHfntkP1OJYVclUD3zfee5xxm/M/hBYkomLbphMsZNxY2mI+WfZZCBsuV6HAd5uW
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <c8741a3907d56b326278540eac146080@yahoo-inc.com>
References: <20732602.1164815002953.JavaMail.jira@brutus>
 <c8741a3907d56b326278540eac146080@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <565DC9B1-F1E2-4306-9FF8-76AF469349B1@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Sanjay Dahiya <sanjayd@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-476) Streaming should check for
 correctness of the task
Date: Thu, 30 Nov 2006 19:23:50 +0530
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

It does take care of existence input in DFS,  scripts on local FS and  
read permission for scripts. Execute permission check on a file is  
coming in java 6, so for now I have chmod +x on the file after  
checking other permissions.
On descriptive error messages there is another JIRA on that  
HADOOP-676, that patch contains some changes to improve errors and  
throwing new exceptions.

Sanjay

On 30-Nov-06, at 1:46 AM, Arkady Borkovsky wrote:

> Sanjay,
>
> does you implementation that ALL the scripts and executable  
> available and have right permissions, and that the input exists?   
> Also: what about descriptive error messages?
>
> -- ab
>
> On Nov 29, 2006, at 7:43 AM, Sanjay Dahiya (JIRA) wrote:
>
>>     [ http://issues.apache.org/jira/browse/HADOOP-476? 
>> page=comments#action_12454343 ]
>>
>> Sanjay Dahiya commented on HADOOP-476:
>> --------------------------------------
>>
>> I have the cli2 implementation in place, there is one issue with  
>> cli2 which is holding it back. Command line arguments with - 
>> jobconf and -env get merged in the same properties set in CLI's  
>> parser and after parsing we dont know what property was passed  
>> with which trigger.
>> I have raised on CLI jira CLI-126. I'll submit the patch once i  
>> resolve this one..
>>
>> (http://issues.apache.org/jira/browse/CLI-126) in case auto link  
>> doesnt work for other projects.
>>
>>> Streaming should check for correctness of the task
>>> --------------------------------------------------
>>>
>>>                 Key: HADOOP-476
>>>                 URL: http://issues.apache.org/jira/browse/HADOOP-476
>>>             Project: Hadoop
>>>          Issue Type: Bug
>>>          Components: contrib/streaming
>>>            Reporter: arkady borkovsky
>>>         Assigned To: Sanjay Dahiya
>>>
>>> Currently, if anythin is wrong with streaming job, it dies  
>>> without any explanation.
>>> Before creating and running actual MapReduce job, Streaming  
>>> should check if:
>>> -- the executables (or scripts) for -mapper and -reducer are  
>>> available and have right permissions
>>> -- the input fragments exist
>>
>> -- 
>> This message is automatically generated by JIRA.
>> -
>> If you think it was sent incorrectly contact one of the  
>> administrators: http://issues.apache.org/jira/secure/ 
>> Administrators.jspa
>> -
>> For more information on JIRA, see: http://www.atlassian.com/ 
>> software/jira
>>
>>
>


From MAILER-DAEMON Thu Nov 30 15:21:46 2006
Return-Path: 
 <hadoop-dev-return-5482-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32341 invoked from network); 30 Nov 2006 15:21:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 15:21:46 -0000
Received: (qmail 83071 invoked by uid 500); 30 Nov 2006 15:21:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83052 invoked by uid 500); 30 Nov 2006 15:21:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83043 invoked by uid 99); 30 Nov 2006 15:21:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 07:21:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 07:21:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3B2377142EC
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 07:21:22 -0800 (PST)
Message-ID: <17886867.1164900082239.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 07:21:22 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-759) TextInputFormat should allow
 different treatment on carriage return char '\r'
In-Reply-To: <10853195.1164779663091.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-759?page=comments#action_12454665 ] 
            
Runping Qi commented on HADOOP-759:
-----------------------------------

The case at my hand is a bit different. We have a file consisting of a sequence of records, separated by LF '\n':
REC1\nREC2\n...

And it is possible that some records may contain '\r'. 
Thus, it is wrong to interpret '\r' as a line breaker.


> TextInputFormat should allow different treatment on carriage return char '\r'
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-759
>                 URL: http://issues.apache.org/jira/browse/HADOOP-759
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Runping Qi
>
> The current implementation treat '\r' and '\n' both as line breakers. However, in some cases, it is desiable to strictly use '\n' as the solely line breaker and treat '\r' as a part of data in a line. 
> One way to do this is to make readline function as a member function so that the user can create a subclass to overwrite the function with the desired behavior.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 15:34:43 2006
Return-Path: 
 <hadoop-dev-return-5483-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36754 invoked from network); 30 Nov 2006 15:34:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 15:34:43 -0000
Received: (qmail 14386 invoked by uid 500); 30 Nov 2006 15:34:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14358 invoked by uid 500); 30 Nov 2006 15:34:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14349 invoked by uid 99); 30 Nov 2006 15:34:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 07:34:51 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.145.54.171] (HELO mrout1.yahoo.com) (216.145.54.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 07:34:39 -0800
Received: from [IPv6:::1] (socks1.corp.yahoo.com [216.145.54.158])
	by mrout1.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id kAUFY0jg071352
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 07:34:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=sjgWbXrLPN5dcKoXhLqDYpSAXMqlrH71L0fz2II43SAX/O87KoIyXBVTUBDocruO
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <565DC9B1-F1E2-4306-9FF8-76AF469349B1@yahoo-inc.com>
References: <20732602.1164815002953.JavaMail.jira@brutus>
 <c8741a3907d56b326278540eac146080@yahoo-inc.com>
 <565DC9B1-F1E2-4306-9FF8-76AF469349B1@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <42190D07-70B4-4C07-933C-822F3E7E31D5@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Sanjay Dahiya <sanjayd@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-476) Streaming should check for
 correctness of the task
Date: Thu, 30 Nov 2006 21:04:08 +0530
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

On second thoughts if we plan to support file patterns for input  
paths both in streaming and general map reduce. Then either we should  
be match and see if some files matching the pattern exist in DFS or  
not check at all.  Otherwise this check will break functionality.

Sanjay


On 30-Nov-06, at 7:23 PM, Sanjay Dahiya wrote:

> It does take care of existence input in DFS,  scripts on local FS  
> and read permission for scripts. Execute permission check on a file  
> is coming in java 6, so for now I have chmod +x on the file after  
> checking other permissions.
> On descriptive error messages there is another JIRA on that  
> HADOOP-676, that patch contains some changes to improve errors and  
> throwing new exceptions.
>
> Sanjay
>
> On 30-Nov-06, at 1:46 AM, Arkady Borkovsky wrote:
>
>> Sanjay,
>>
>> does you implementation that ALL the scripts and executable  
>> available and have right permissions, and that the input exists?   
>> Also: what about descriptive error messages?
>>
>> -- ab
>>
>> On Nov 29, 2006, at 7:43 AM, Sanjay Dahiya (JIRA) wrote:
>>
>>>     [ http://issues.apache.org/jira/browse/HADOOP-476? 
>>> page=comments#action_12454343 ]
>>>
>>> Sanjay Dahiya commented on HADOOP-476:
>>> --------------------------------------
>>>
>>> I have the cli2 implementation in place, there is one issue with  
>>> cli2 which is holding it back. Command line arguments with - 
>>> jobconf and -env get merged in the same properties set in CLI's  
>>> parser and after parsing we dont know what property was passed  
>>> with which trigger.
>>> I have raised on CLI jira CLI-126. I'll submit the patch once i  
>>> resolve this one..
>>>
>>> (http://issues.apache.org/jira/browse/CLI-126) in case auto link  
>>> doesnt work for other projects.
>>>
>>>> Streaming should check for correctness of the task
>>>> --------------------------------------------------
>>>>
>>>>                 Key: HADOOP-476
>>>>                 URL: http://issues.apache.org/jira/browse/ 
>>>> HADOOP-476
>>>>             Project: Hadoop
>>>>          Issue Type: Bug
>>>>          Components: contrib/streaming
>>>>            Reporter: arkady borkovsky
>>>>         Assigned To: Sanjay Dahiya
>>>>
>>>> Currently, if anythin is wrong with streaming job, it dies  
>>>> without any explanation.
>>>> Before creating and running actual MapReduce job, Streaming  
>>>> should check if:
>>>> -- the executables (or scripts) for -mapper and -reducer are  
>>>> available and have right permissions
>>>> -- the input fragments exist
>>>
>>> -- 
>>> This message is automatically generated by JIRA.
>>> -
>>> If you think it was sent incorrectly contact one of the  
>>> administrators: http://issues.apache.org/jira/secure/ 
>>> Administrators.jspa
>>> -
>>> For more information on JIRA, see: http://www.atlassian.com/ 
>>> software/jira
>>>
>>>
>>
>


From MAILER-DAEMON Thu Nov 30 15:59:48 2006
Return-Path: 
 <hadoop-dev-return-5484-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46725 invoked from network); 30 Nov 2006 15:59:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 15:59:48 -0000
Received: (qmail 69632 invoked by uid 500); 30 Nov 2006 15:59:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69610 invoked by uid 500); 30 Nov 2006 15:59:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69601 invoked by uid 99); 30 Nov 2006 15:59:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 07:59:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 07:59:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9231471430D
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 07:59:24 -0800 (PST)
Message-ID: <28827584.1164902364595.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 07:59:24 -0800 (PST)
From: "Tom White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-574?page=comments#action_12454681 ] 
            
Tom White commented on HADOOP-574:
----------------------------------

I like the proposal and started to implement it, but then I discovered that my secret key contains '/' characters (two in fact), which makes it awkward to turn into a URI, since you have to manually escape them.

While this is doable, it seems to me that it makes it harder to configure, and could be a source of interesting support questions. I haven't really got a better alternative though.



> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>         Attachments: dependencies.zip, HADOOP-574-v2.patch, HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 16:33:49 2006
Return-Path: 
 <hadoop-dev-return-5485-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61814 invoked from network); 30 Nov 2006 16:33:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 16:33:49 -0000
Received: (qmail 46701 invoked by uid 500); 30 Nov 2006 16:33:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46681 invoked by uid 500); 30 Nov 2006 16:33:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46672 invoked by uid 99); 30 Nov 2006 16:33:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 08:33:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 08:33:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 950167142FA
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 08:33:24 -0800 (PST)
Message-ID: <14276180.1164904404607.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 08:33:24 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-331?page=all ]

Devaraj Das updated HADOOP-331:
-------------------------------

    Attachment: 331-initial3.patch

This is the first version of the patch for review. While testing is in progress, I thought the review can go on in parallel. The main changes are:
1) The reduces don't do sort anymore. One change in ReduceTask.java is to do with that - "sort" string is replaced by "merge" in a couple of places.
2) The other change in ReduceTask.java is that the class ValuesIterator class has been upgraded to package private static class. This is because, I am using the functionality of this class in Combiner also. Thus, I have two new classes extending from ValuesIterator: ReduceValuesIterator and CombineValuesIterator defined in ReduceTask.java and MapTask.java respectively.
3) In MapTask.java, I have a couple of other new classes:
   3.1 MapOutputBuffer: this class does all the work to do with maintaining the buffer, sort, combine and spill. It implements the OutputCollector interface and a new interface called OutputWriter. The intent of having the second interface is for other classes to invoke the methods for writing the partition boundaries (syncs) and doing the final merge of the spills.
4) The sort has been refactored as an interface SorterBase.java (that extends from RawKeyValueIterator interface). It defines a couple of methods that the MapOutputBuffer invokes during the map phase. The reason for extending from RawKeyValueIterator is to allow easy iteration over the sorted data (during combining/spilling). Also, during iteration the OutputWriter in MapTask.java is notified of partition changes so that it can do things like ending a block boundary by writing a sync (for block compression), etc.
5) Implemented the SorterBase interface as a class BasicTypeSorterBase that implements the methods and the relevant datastructures as arrays of primitive int (as opposed to object arrays which could be implemented by another class implementing the SorterBase interface). The intent of BasicTypeSorterBase class is to serve all implementations of sort algos that rely on primitive arrays (of offsets/lengths/etc. to a read-only buffer). The sort() method itself is empty here.
6) MergeSorter.java extends from BasicTypeSorterBase.java and implements the sort method. Basically, it accesses the data structures that BasicTypeSorterBase created and sets up the input arguments for hadoop.util.MergeSort (that actually implements the core of the MergeSort algo). One could have a QuickSorter.java and a corresponding hadoop.util.QuickSort.java and so on. The bridge between the framework and the sort algo is the Comparator that is passed by the framework to the hadoop.util.MergeSort's constructor.
7) What sort algo to use in the framework can be set by map.sort.class which defaults to MergeSorter.class (for now).
8) TaskTracker.java has the necessary jsp changes to serve the map output data to the reduces.
9) SequenceFile.java has two new public APIs: createWriter and sync (this createWriter has slightly different args). Also refactored sort to use the new mergesort from hadoop.util.
10) A new class hadoop.util.ListOfArrays has been introduced to maintain lists of primitive arrays and handle things like growing of arrays internally.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>         Attachments: 331-design.txt, 331-initial3.patch, 331.txt
>
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 17:02:48 2006
Return-Path: 
 <hadoop-dev-return-5486-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72542 invoked from network); 30 Nov 2006 17:02:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 17:02:48 -0000
Received: (qmail 4512 invoked by uid 500); 30 Nov 2006 17:02:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4496 invoked by uid 500); 30 Nov 2006 17:02:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4487 invoked by uid 99); 30 Nov 2006 17:02:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 09:02:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 09:02:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 44DA97142FA
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 09:02:24 -0800 (PST)
Message-ID: <8156423.1164906144279.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 09:02:24 -0800 (PST)
From: "James P. White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-574?page=comments#action_12454699 ] 
            
James P. White commented on HADOOP-574:
---------------------------------------

What about putting the secret in a keystore, or at least some configuration file?

That also opens up the possibility of supporting a default id, which would enable folks to set up shared/reusable jobs.

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>         Attachments: dependencies.zip, HADOOP-574-v2.patch, HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 17:48:47 2006
Return-Path: 
 <hadoop-dev-return-5487-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90453 invoked from network); 30 Nov 2006 17:48:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 17:48:47 -0000
Received: (qmail 19483 invoked by uid 500); 30 Nov 2006 17:48:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19458 invoked by uid 500); 30 Nov 2006 17:48:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19449 invoked by uid 99); 30 Nov 2006 17:48:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 09:48:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 09:48:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DD48C7142F7
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 09:48:22 -0800 (PST)
Message-ID: <5697052.1164908902903.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 09:48:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-657) Free temporary space should be
 modelled better
In-Reply-To: <11001957.1162254376612.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-657?page=comments#action_12454714 ] 
            
Arun C Murthy commented on HADOOP-657:
--------------------------------------

It also necessiates a 'Writable' MetricsRecordImpl (for RPC) and some apis for 'reading' the metrics i.e. getMetric/getTag apis which the JobTracker can use to retrieve information.

> Free temporary space should be modelled better
> ----------------------------------------------
>
>                 Key: HADOOP-657
>                 URL: http://issues.apache.org/jira/browse/HADOOP-657
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>
> Currently, there is a configurable size that must be free for a task tracker to accept a new task. However, that isn't a very good model of what the task is likely to take. I'd like to propose:
> Map tasks:  totalInputSize * conf.getFloat("map.output.growth.factor", 1.0) / numMaps
> Reduce tasks: totalInputSize * 2 * conf.getFloat("map.output.growth.factor", 1.0) / numReduces
> where totalInputSize is the size of all the maps inputs for the given job.
> To start a new task, 
>   newTaskAllocation + (sum over running tasks of (1.0 - done) * allocation) >= 
>        free disk * conf.getFloat("mapred.max.scratch.allocation", 0.90);
> So in English, we will model the expected sizes of tasks and only task tasks that should leave us a 10% margin. With:
> map.output.growth.factor -- the relative size of the transient data relative to the map inputs
> mapred.max.scratch.allocation -- the maximum amount of our disk we want to allocate to tasks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 18:10:49 2006
Return-Path: 
 <hadoop-dev-return-5488-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1354 invoked from network); 30 Nov 2006 18:10:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 18:10:49 -0000
Received: (qmail 60244 invoked by uid 500); 30 Nov 2006 18:10:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60128 invoked by uid 500); 30 Nov 2006 18:10:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60119 invoked by uid 99); 30 Nov 2006 18:10:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 10:10:58 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.145.54.173] (HELO mrout3.yahoo.com) (216.145.54.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 10:10:46 -0800
Received: from [10.72.104.183] (enoughhot-lx.corp.yahoo.com [10.72.104.183])
	by mrout3.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id kAUI8t3q068150
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 10:08:55 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
	b=IwJXGXxToSEpw6xzYA2H2GN+3b2IO1EW11tdqyyY4SygGNefKMp/29LTKJBAp2H8
Message-ID: <456F1E37.3070706@yahoo-inc.com>
Date: Thu, 30 Nov 2006 10:08:55 -0800
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: minor change in dataNode handling of multiple directories.
References: <456E284D.3040805@yahoo-inc.com>
 <1bf79d3e0611291803h2b5e3b5dq2992255a00f7f92f@mail.gmail.com>
In-Reply-To: <1bf79d3e0611291803h2b5e3b5dq2992255a00f7f92f@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Good point.
I think we should document it (Javadoc?) making it a feature rather than 
a side effect.

Bryan A. P. Pendleton wrote:

> I would prefer this proposal not be implements. The current way things 
> work
> makes it possible to configure, centrally, a list of all directories that
> _could_ be used for storage. Since there's no easy way to do per-node
> configurations (nor would it be desirable, IMO, in this case), the
> directories config ends up being the list of all possibly usable
> directories. Many of my cluster nodes are configured using 
> "rocksclusters":
> they will have a uniform set of mounts created, one for each physical 
> drive,
> at boot/re-install. If I specify in my config the list of all 
> directories up
> to the most number of drives a machine will ever have, then I get easy
> drop-in use, regardless of variations in nodes in the cluster. I have 
> been
> relying in the current behavior to keep me sane.
>
> OTOH, I wouldn't oppose making this the default behavior, with a
> configuration param that would set things back to the old behavior.
>
> On 11/29/06, Raghu Angadi <rangadi@yahoo-inc.com> wrote:
>
>>
>>
>> As part of the "Version upgrade" related changes, thinking of strictly
>> requiring that datanode be able to lock _all_ the configured directories
>> instead of any one of them.
>>
>> Currently if multiple data directories are specified for a datanode, it
>> tries to lock a file is in each of the directories. If it fails to lock
>> some of the directories, it will use the directories that it could.
>> Looks like this flexibility was included mainly for convenience in
>> config file.
>>
>> This might not affect anyone, let us know of your opinions.
>>
>> Note that all directories have the same storage id. So each individual
>> directory is not complete by itself but a part of one storage.
>>
>> Raghu.
>

From MAILER-DAEMON Thu Nov 30 18:52:24 2006
Return-Path: 
 <hadoop-dev-return-5489-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13058 invoked from network); 30 Nov 2006 18:52:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 18:52:24 -0000
Received: (qmail 36244 invoked by uid 500); 30 Nov 2006 18:52:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36223 invoked by uid 500); 30 Nov 2006 18:52:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36214 invoked by uid 99); 30 Nov 2006 18:52:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 10:52:32 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 10:52:20 -0800
Received: from [200.18.87.8] (proxy7.corp.yahoo.com [216.145.48.98])
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kAUIpmso039305
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 10:51:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:mime-version:to:subject:
	references:in-reply-to:content-type:content-transfer-encoding;
	b=YLcDhkXVIdNchvnXBDyr0hy74rhoLmdk9EFZtjO9rTPYzmE7lNR2uz7cqcGye63v
Message-ID: <456F2843.4010807@yahoo-inc.com>
Date: Thu, 30 Nov 2006 10:51:47 -0800
From: Raghu Angadi <rangadi@yahoo-inc.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060808)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: minor change in dataNode handling of multiple directories.
References: <456E284D.3040805@yahoo-inc.com>
 <1bf79d3e0611291803h2b5e3b5dq2992255a00f7f92f@mail.gmail.com>
 <456F1E37.3070706@yahoo-inc.com>
In-Reply-To: <456F1E37.3070706@yahoo-inc.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Yes, we will retain the existing behavior.

Raghu.

Konstantin Shvachko wrote:
> Good point.
> I think we should document it (Javadoc?) making it a feature rather than 
> a side effect.
> 
> Bryan A. P. Pendleton wrote:
> 
>> I would prefer this proposal not be implements. The current way things 
>> work
>> makes it possible to configure, centrally, a list of all directories that
>> _could_ be used for storage. Since there's no easy way to do per-node
>> configurations (nor would it be desirable, IMO, in this case), the
>> directories config ends up being the list of all possibly usable
>> directories. Many of my cluster nodes are configured using 
>> "rocksclusters":
>> they will have a uniform set of mounts created, one for each physical 
>> drive,
>> at boot/re-install. If I specify in my config the list of all 
>> directories up
>> to the most number of drives a machine will ever have, then I get easy
>> drop-in use, regardless of variations in nodes in the cluster. I have 
>> been
>> relying in the current behavior to keep me sane.
>>
>> OTOH, I wouldn't oppose making this the default behavior, with a
>> configuration param that would set things back to the old behavior.
>>
>> On 11/29/06, Raghu Angadi <rangadi@yahoo-inc.com> wrote:
>>
>>>
>>>
>>> As part of the "Version upgrade" related changes, thinking of strictly
>>> requiring that datanode be able to lock _all_ the configured directories
>>> instead of any one of them.
>>>
>>> Currently if multiple data directories are specified for a datanode, it
>>> tries to lock a file is in each of the directories. If it fails to lock
>>> some of the directories, it will use the directories that it could.
>>> Looks like this flexibility was included mainly for convenience in
>>> config file.
>>>
>>> This might not affect anyone, let us know of your opinions.
>>>
>>> Note that all directories have the same storage id. So each individual
>>> directory is not complete by itself but a part of one storage.
>>>
>>> Raghu.
>>


From MAILER-DAEMON Thu Nov 30 19:12:45 2006
Return-Path: 
 <hadoop-dev-return-5490-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18853 invoked from network); 30 Nov 2006 19:12:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 19:12:45 -0000
Received: (qmail 77214 invoked by uid 500); 30 Nov 2006 19:12:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77180 invoked by uid 500); 30 Nov 2006 19:12:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77171 invoked by uid 99); 30 Nov 2006 19:12:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 11:12:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 11:12:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 626517142F7
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 11:12:23 -0800 (PST)
Message-ID: <23573883.1164913943399.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 11:12:23 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
In-Reply-To: <30411461.1163635597099.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-728?page=all ]

Sanjay Dahiya updated HADOOP-728:
---------------------------------

    Attachment: Hadoop-728.patch

This patch fixes a few other issues as well - 
1. Some map tasks writing to DFS were generating incomplete files, added flush() in MROutputThread
2. Added extra checks in TaskTracker and PhasedFileSystem to check for temporary file existence before attempting delete. This avoids extra lines in namenode logs. 
3. Changed a variable name, sideEffectURI_ is now finalOutputURI and is used to get correct file name. 

off topic : I was not aware that there are real languages written bottom to top http://en.wikipedia.org/wiki/Writing_system#Directionality 

> Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-728
>                 URL: http://issues.apache.org/jira/browse/HADOOP-728
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-728.patch, Hadoop-728.patch
>
>
> a) a file is create for the output instead of a directory.
> b) there is no way to understand what is going on from the client output
> I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
> ~

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 19:26:46 2006
Return-Path: 
 <hadoop-dev-return-5491-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22301 invoked from network); 30 Nov 2006 19:26:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 19:26:46 -0000
Received: (qmail 97056 invoked by uid 500); 30 Nov 2006 19:26:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97028 invoked by uid 500); 30 Nov 2006 19:26:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97019 invoked by uid 99); 30 Nov 2006 19:26:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 11:26:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 11:26:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 762E87142FB
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 11:26:24 -0800 (PST)
Message-ID: <23632528.1164914784480.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 11:26:24 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-681) Adminstrative hook to pull live
 nodes out of a HDFS cluster
In-Reply-To: <29893636.1162789960338.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-681?page=comments#action_12454736 ] 
            
dhruba borthakur commented on HADOOP-681:
-----------------------------------------

Hi Konstantin,

Thanks for your comments. My comments marked with <****>

1. Index: src/java/org/apache/hadoop/dfs/ClientProtocol.java
    public static final long versionID = 4L; You should write a comment 
          <****> Done.


2. Index: src/java/org/apache/hadoop/dfs/DFSClient.java
    may be it is better to use DatanodeID instead of mere String
         <****>The user can specify a name or a name:port. The code will match both formats. That's the reason
                  the user input is accepted as a string rather than a DatanodeID.

3. Index: src/java/org/apache/hadoop/dfs/DFSAdmin.java
    decommission() does not document the return value; boolean mode is never used
    final String safeModeUsage is never used decommission usage does not specify data-node parameters,
          <****> Done


4. Index: src/java/org/apache/hadoop/dfs/FSNamesystem.java
    decommissionInProgress() should start with is***(); replicationInProgress() should start with is***()
    in startDecommission() and stopDecommission() it is better to call public method getName()
    Block decommissionblocks[] should be decommissionBlocks.
         <****> Done


5. Index: src/java/org/apache/hadoop/dfs/DatanodeDescriptor.java
    decommissioned() should start with is***()
    I don't think these constants are used anywhere in the code. They could be confused with the enum 
    values having the same names. public static final int NORMAL = 0;
         <****> Done


6. I propose to rename AdminStates to DecommissionState and eliminate NORMAL state replacing it by null, 
    where applicable. with a clear (imo) semantics: no decommission - no state.
        <****> I have, on purpose, kept the API to be a little more generic. In the future, there could be more
                 adminstrative states of datanodes, e.g. ReadOnly Datanodes (?)


7. Index: src/java/org/apache/hadoop/dfs/DatanodeReport.java
    I don't think this class should be introduced at all.
    DatanodeReport effectively returns an entire DatanodeDescriptor.
        <****> There is one subtle difference between DatanodeReport and DatanodeInfo: their serialization 
                  methods. The Namenode serializes DatanodeInfo while writing it to the FsImage. I do not want 
                 any FSImage format change at present. The persistentcy of adminState will be bundled in with 
                  other FsImage changes at a later date. The DatanodeReport class has to report the 
                 adminState to the UI, thus it has to serialize the adminState too.

Please let me know if my counter-proposals sound ok.

> Adminstrative hook to pull live nodes out of a HDFS cluster
> -----------------------------------------------------------
>
>                 Key: HADOOP-681
>                 URL: http://issues.apache.org/jira/browse/HADOOP-681
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: nodedecommission2.patch
>
>
> Introduction
> ------------
> An administrator sometimes needs to bring down a datanode for scheduled maintenance. It would be nice if HDFS can be informed about this event. On receipt of this event, HDFS can take steps so that HDFS data is not lost when the node goes down at a later time.
> Architecture
> -----------
> In the existing architecture, a datanode can be in one of two states: dead or alive. A datanode is alive if its heartbeats are being processed by the namenode. Otherwise that datanode is in dead state. We extend the architecture to introduce the concept of a tranquil state for a datanode.
> A datanode is in tranquil state if:
>     - it cannot be a target for replicating any blocks
>     - any block replica that it currently contains does not count towards the target-replication-factor of that block
> Thus, a node that is in tranquil state can be brought down without impacting the guarantees provided by HDFS.
> The tranquil state is not persisted across namenode restarts. If the namenode restarts then that datanode will go back to being in the dead or alive state.
> The datanode is completely transparent to the fact that it has been labeled as being in tranquil state. It can continue to heartbeat and serve read requests for datablocks.
> DFSShell Design
> -----------------------
> We extend the DFS Shell utility to specify a list of nodes to the namenode.
>     hadoop dfs -tranquil {set|clear|get} datanodename1 [,datanodename2]
> The DFSShell utility sends this list to the namenode. This DFSShell command invoked with the "set" option completes when the list is transferred to the namenode. This command is non-blocking; it returns before the datanode is actually in the tranquil state. The client can then query the state by re-issuing the command with the "get" option. This option will indicate whether the datanode is in tranquil state or is "being tranquiled". The "clear" option is used to transition a tranquil datanode to the alive state. The "clear" option is a no-op if the datanode is not in the "tranquil" state.
> ClientProtocol Design
> --------------------
> The ClientProtocol is the protocol exported by the namenode for its client.
> This protocol is extended to incorporate three new methods:
>    ClientProtocol.setTranquil(String[] datanodes)
>    ClientProtocol.getTranquil(String datanode)
>    ClientProtocol.clearTranquil(String[] datanodes)
> The ProtocolVersion is incremented to prevent conversations between imcompatible clients and servers. An old DFSShell cannot talk to the new NameNode and vice-versa.
> NameNode Design
> -------------------------
> The namenode does the bulk of the work for supporting this new feature.
> The DatanodeInfo object has a new private member named "state". It also has three new member functions:
>     datanodeInfo.tranquilStarted(): start the process of tranquilization
>     datanodeInfo.tranquilCompleted(): node is not in tranquil state
>     datanodeInfo.clearTranquil() : remove tranquilization from node
> The namenode exposes a new API to set and clear tranquil states for a datanode. On receipt of a "set tranquil" command, it invokes datanodeInfo.tranquilStarted().
> The FSNamesystem.chooseTarget() method skips over datanodes that are marked as being in the "tranquil" state. This ensures that tranquil-datanodes are never chosen as targets of replication. The namenode does *not* record
> this operation in either the FsImage or the EditLogs.
> The namenode puts all the blocks from a being-tranquiled node into the neededReplication data structure. Necessary code changes are made to ensure that these blocks get replicated by the regular replication method. As of now, the regular replication code does not distinguish between these blocks and the blocks that are replication candidates because some other datanode might have died. It might be prudent to give different (lower?) weightage to this type of replication requests, but that exercise is deferred to a later date. In this design, replication requests generated because of a node going to a tranquil state are not distinguished from replication requests generated by a datanode going to the dead state.
> The DatanodeInfo object has another new private member named "pendingTranquilCount". This field stores the remaining number of blocks that still remain to be replicated. This field is valid only if the node is in the ets being-tranquiled state.  On receipt of every 'n' heartbeats from the being-tranquiled datanode, the namenode calculates the amount of data that is still remaining to be replicated and updates the "pendingTranquilCount". in the DatanodeInfo.When all the replications complete, the datanode is marked as tranquiled. The number 'n' is selected in such a way that the average heartbeat processing time does not increase appreciably.
> It is possible that the namenode might stop receving heartbeats from a datanode that is being-tranquiled. In this case,   the tranquil flag of the datanode gets cleared. It transitions to the dead state and the normal processing for alive-to-dead transition occurs here.
> Web Interface
> -------------------
> The dfshealth.jsp displays the live nodes, dead nodes, being-tranquiled and tranquil nodes. For nodes in the being-tranquiled state, it displays the percentage of tranquilization completed till now.
> Issues
> --------
> 1. If a request for tranquilization starts getting processed and there aren't enough space available in DFS to complete the necessary replication, then that node might remain in the being-tranquiled state for a long long time. This is not necessarily a bad thing but is there a better option?
> 2. We have opted for not storing cluster configuration information in the persistent image of the file system. (The tranquil state of a datanode may be lost if the namenode restarts).
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 19:49:42 2006
Return-Path: 
 <hadoop-dev-return-5492-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28672 invoked from network); 30 Nov 2006 19:49:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 19:49:42 -0000
Received: (qmail 45513 invoked by uid 500); 30 Nov 2006 19:49:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45498 invoked by uid 500); 30 Nov 2006 19:49:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45489 invoked by uid 99); 30 Nov 2006 19:49:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 11:49:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 11:49:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 118577142EC
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 11:49:21 -0800 (PST)
Message-ID: <3497752.1164916161069.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 11:49:21 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-768) directory browser can not  list all
 the entries for a large directory
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

directory browser can not  list all the entries for a large directory
---------------------------------------------------------------------

                 Key: HADOOP-768
                 URL: http://issues.apache.org/jira/browse/HADOOP-768
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.8.0
         Environment: IE Firefox Safari
            Reporter: Hairong Kuang


When browsing a large directory, for example, one with 500 files, web browser is not able to display all the entries. Instead, it stops loading the page in the middle.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 19:59:49 2006
Return-Path: 
 <hadoop-dev-return-5493-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31437 invoked from network); 30 Nov 2006 19:59:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 19:59:49 -0000
Received: (qmail 58887 invoked by uid 500); 30 Nov 2006 19:59:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58854 invoked by uid 500); 30 Nov 2006 19:59:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58826 invoked by uid 99); 30 Nov 2006 19:59:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 11:59:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 11:59:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 042377142FD
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 11:59:26 -0800 (PST)
Message-ID: <2303815.1164916766014.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 11:59:26 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
In-Reply-To: <30411461.1163635597099.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-728?page=all ]

Sanjay Dahiya updated HADOOP-728:
---------------------------------

    Attachment:     (was: Hadoop-728.patch)

> Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-728
>                 URL: http://issues.apache.org/jira/browse/HADOOP-728
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-728.patch, Hadoop-728_1.patch
>
>
> a) a file is create for the output instead of a directory.
> b) there is no way to understand what is going on from the client output
> I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
> ~

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 19:59:51 2006
Return-Path: 
 <hadoop-dev-return-5494-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31504 invoked from network); 30 Nov 2006 19:59:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 19:59:51 -0000
Received: (qmail 59286 invoked by uid 500); 30 Nov 2006 19:59:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59265 invoked by uid 500); 30 Nov 2006 19:59:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59243 invoked by uid 99); 30 Nov 2006 19:59:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 11:59:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 11:59:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3122A714310
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 11:59:28 -0800 (PST)
Message-ID: <29587028.1164916768198.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 11:59:28 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
In-Reply-To: <30411461.1163635597099.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-728?page=all ]

Sanjay Dahiya updated HADOOP-728:
---------------------------------

    Attachment: Hadoop-728_1.patch

> Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-728
>                 URL: http://issues.apache.org/jira/browse/HADOOP-728
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-728.patch, Hadoop-728_1.patch
>
>
> a) a file is create for the output instead of a directory.
> b) there is no way to understand what is going on from the client output
> I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
> ~

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 20:08:47 2006
Return-Path: 
 <hadoop-dev-return-5495-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34286 invoked from network); 30 Nov 2006 20:08:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 20:08:47 -0000
Received: (qmail 78980 invoked by uid 500); 30 Nov 2006 20:08:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78962 invoked by uid 500); 30 Nov 2006 20:08:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78905 invoked by uid 99); 30 Nov 2006 20:08:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 12:08:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 12:08:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4FC097142FB
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 12:08:21 -0800 (PST)
Message-ID: <16733904.1164917301323.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 12:08:21 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-769) Error in crc file after a
 FileSystem.rename operation.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Error in crc file after a FileSystem.rename operation. 
-------------------------------------------------------

                 Key: HADOOP-769
                 URL: http://issues.apache.org/jira/browse/HADOOP-769
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Sanjay Dahiya


I am not sure whats going wrong here but after a file rename operation on a bunch of files, I am losing crc files in the destination directory. It causes exceptions when doing dfs -get or any other operation on the file. 
I added some prints and it seems renameRaw() is called on checksum file but its not created in target path. There are no errors in namenode logs also. 

I will debug this further and more details if i find any. 

FileSystem.java:386 
-------
      Path checkFile = getChecksumFile(src);
        if (exists(checkFile)) { //try to rename checksum
          if(isDirectory(dst)) {
            renameRaw(checkFile, dst);
          } else {
            renameRaw(checkFile, getChecksumFile(dst));                    <=== This is executed. 
          }
        }


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 21:09:47 2006
Return-Path: 
 <hadoop-dev-return-5496-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57341 invoked from network); 30 Nov 2006 21:09:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 21:09:47 -0000
Received: (qmail 81906 invoked by uid 500); 30 Nov 2006 21:09:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81869 invoked by uid 500); 30 Nov 2006 21:09:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81860 invoked by uid 99); 30 Nov 2006 21:09:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 13:09:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 13:09:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 67F1E7142FB
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 13:09:25 -0800 (PST)
Message-ID: <20795317.1164920965423.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 13:09:25 -0800 (PST)
From: "Tom White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-574?page=comments#action_12454753 ] 
            
Tom White commented on HADOOP-574:
----------------------------------

Thinking about this more perhaps the best thing would be to put the access key and secret access key into the configuration file (as implemented in the first two patches, the properties are fs.s3.awsAccessKeyId and fs.s3.awsSecretAccessKey), but keep the bucket name as a part of the URI: s3://bucket/.

As an enhancement we might allow the keys to be specified in the URI (per Doug's original suggestion) if people wanted to put them there (escaped). These would take precedence over keys specified in the config file.

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>         Attachments: dependencies.zip, HADOOP-574-v2.patch, HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 21:13:43 2006
Return-Path: 
 <hadoop-dev-return-5497-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58116 invoked from network); 30 Nov 2006 21:13:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 21:13:43 -0000
Received: (qmail 84664 invoked by uid 500); 30 Nov 2006 21:13:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84425 invoked by uid 500); 30 Nov 2006 21:13:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84373 invoked by uid 99); 30 Nov 2006 21:13:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 13:13:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 13:13:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 10EFD7142EC
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 13:13:21 -0800 (PST)
Message-ID: <16531717.1164921201066.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 13:13:21 -0800 (PST)
From: "Koji Noguchi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-770) When JobTracker gets restarted, Job
 Tracker History doesn't show the jobs that were running. (incomplete jobs)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

When JobTracker gets restarted, Job Tracker History doesn't show the jobs that were running. (incomplete jobs)
--------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-770
                 URL: http://issues.apache.org/jira/browse/HADOOP-770
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Koji Noguchi
            Priority: Minor


When JobTracker fail or get killed manually,  last running jobs won't show up in the Job Track History.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 21:24:46 2006
Return-Path: 
 <hadoop-dev-return-5498-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62814 invoked from network); 30 Nov 2006 21:24:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 21:24:46 -0000
Received: (qmail 13307 invoked by uid 500); 30 Nov 2006 21:24:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13286 invoked by uid 500); 30 Nov 2006 21:24:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13277 invoked by uid 99); 30 Nov 2006 21:24:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 13:24:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 13:24:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 774F57142CD
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 13:24:23 -0800 (PST)
Message-ID: <20315714.1164921863485.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 13:24:23 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-770) When JobTracker gets restarted, Job
 Tracker History doesn't show the jobs that were running. (incomplete jobs)
In-Reply-To: <16531717.1164921201066.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-770?page=all ]

Sanjay Dahiya reassigned HADOOP-770:
------------------------------------

    Assignee: Sanjay Dahiya

> When JobTracker gets restarted, Job Tracker History doesn't show the jobs that were running. (incomplete jobs)
> --------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-770
>                 URL: http://issues.apache.org/jira/browse/HADOOP-770
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Koji Noguchi
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> When JobTracker fail or get killed manually,  last running jobs won't show up in the Job Track History.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 22:15:59 2006
Return-Path: 
 <hadoop-dev-return-5499-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81001 invoked from network); 30 Nov 2006 22:15:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 22:15:59 -0000
Received: (qmail 31819 invoked by uid 500); 30 Nov 2006 22:16:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31792 invoked by uid 500); 30 Nov 2006 22:16:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31766 invoked by uid 99); 30 Nov 2006 22:16:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 14:16:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 14:15:51 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E161F7142FC
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 14:15:25 -0800 (PST)
Message-ID: <4365446.1164924925920.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 14:15:25 -0800 (PST)
From: "James P. White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-574?page=comments#action_12454765 ] 
            
James P. White commented on HADOOP-574:
---------------------------------------

I was thinking that you would retain the parsing of the id and secret from the URI, but that the secret would be found by id in the keystore/configuration file if omitted.

The same approach would apply to the id if omitted, as the configuration file could supply a default id (fs.s3.awsAccessKeyId), which would then lead to the secret.

One way to do that would be to use the configuration file and put the id in the property name:

fs.s3.awsSecretAccessKey.<myid>
fs.s3.awsSecretAccessKey.<myfriendsid>

That ultimately would be compatible with the old schme if fs.s3.awsSecretAccessKey were the default secret if not otherwise specified (effectively fs.s3.awsSecretAccessKey.*).

The only reservation I have with putting the secret in the configuration file is I don't like using plain text for secrets.  An encrypted store would be nicer.  Supporting OpenSSH Agents would be very nice too.


> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>         Attachments: dependencies.zip, HADOOP-574-v2.patch, HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 22:33:44 2006
Return-Path: 
 <hadoop-dev-return-5500-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84994 invoked from network); 30 Nov 2006 22:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 22:33:44 -0000
Received: (qmail 68705 invoked by uid 500); 30 Nov 2006 22:33:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68645 invoked by uid 500); 30 Nov 2006 22:33:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68636 invoked by uid 99); 30 Nov 2006 22:33:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 14:33:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 14:33:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5075A7142EC
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 14:33:22 -0800 (PST)
Message-ID: <18089585.1164926002327.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 14:33:22 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-763) NameNode benchmark using mapred is
 insufficient
In-Reply-To: <25129528.1164844521052.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-763?page=comments#action_12454769 ] 
            
Nigel Daley commented on HADOOP-763:
------------------------------------

Elaborating on why running the namenode benchmark as a map/reduce is problematic, if a map fails, you either don't want it to rerun (not currently possible) or you want to detect a rerun map and disregard its output (not easily possible).  

> NameNode benchmark using mapred is insufficient
> -----------------------------------------------
>
>                 Key: HADOOP-763
>                 URL: http://issues.apache.org/jira/browse/HADOOP-763
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Minor
>         Attachments: HADOOP-763.patch
>
>
> The current namenode benchmark (org.apache.hadoop.examples.NNBench) uses map/reduce to distribute a load on the namenode.  For the purposes of loading the namenode, this model gives insufficient control over job start and failure recovery.  I propose the namenode benchmark be re-written to use slaves.sh directly to execute the namenode benchmark.  The benchmark should also give finer control over the operations executed and the timings reported.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 22:35:44 2006
Return-Path: 
 <hadoop-dev-return-5501-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85490 invoked from network); 30 Nov 2006 22:35:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 22:35:44 -0000
Received: (qmail 71574 invoked by uid 500); 30 Nov 2006 22:35:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71552 invoked by uid 500); 30 Nov 2006 22:35:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71543 invoked by uid 99); 30 Nov 2006 22:35:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 14:35:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 14:35:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 663827142EC
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 14:35:22 -0800 (PST)
Message-ID: <18289528.1164926122416.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 14:35:22 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-763) NameNode benchmark using mapred is
 insufficient
In-Reply-To: <25129528.1164844521052.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-763?page=all ]

Nigel Daley updated HADOOP-763:
-------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.9.0

> NameNode benchmark using mapred is insufficient
> -----------------------------------------------
>
>                 Key: HADOOP-763
>                 URL: http://issues.apache.org/jira/browse/HADOOP-763
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-763.patch
>
>
> The current namenode benchmark (org.apache.hadoop.examples.NNBench) uses map/reduce to distribute a load on the namenode.  For the purposes of loading the namenode, this model gives insufficient control over job start and failure recovery.  I propose the namenode benchmark be re-written to use slaves.sh directly to execute the namenode benchmark.  The benchmark should also give finer control over the operations executed and the timings reported.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 22:37:44 2006
Return-Path: 
 <hadoop-dev-return-5502-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85801 invoked from network); 30 Nov 2006 22:37:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 22:37:44 -0000
Received: (qmail 75886 invoked by uid 500); 30 Nov 2006 22:37:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75856 invoked by uid 500); 30 Nov 2006 22:37:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75847 invoked by uid 99); 30 Nov 2006 22:37:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 14:37:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 14:37:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4A3687142EC
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 14:37:22 -0800 (PST)
Message-ID: <20571892.1164926242301.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 14:37:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-763) NameNode benchmark using mapred is
 insufficient
In-Reply-To: <25129528.1164844521052.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-763?page=comments#action_12454771 ] 
            
Hadoop QA commented on HADOOP-763:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346076/HADOOP-763.patch applied and successfully tested against trunk revision 480686

> NameNode benchmark using mapred is insufficient
> -----------------------------------------------
>
>                 Key: HADOOP-763
>                 URL: http://issues.apache.org/jira/browse/HADOOP-763
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Minor
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-763.patch
>
>
> The current namenode benchmark (org.apache.hadoop.examples.NNBench) uses map/reduce to distribute a load on the namenode.  For the purposes of loading the namenode, this model gives insufficient control over job start and failure recovery.  I propose the namenode benchmark be re-written to use slaves.sh directly to execute the namenode benchmark.  The benchmark should also give finer control over the operations executed and the timings reported.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

