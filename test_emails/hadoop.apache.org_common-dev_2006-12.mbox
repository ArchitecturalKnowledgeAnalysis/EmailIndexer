From MAILER-DAEMON Thu Nov 30 23:05:42 2006
Return-Path: 
 <hadoop-dev-return-5503-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92334 invoked from network); 30 Nov 2006 23:05:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 23:05:42 -0000
Received: (qmail 30472 invoked by uid 500); 30 Nov 2006 23:05:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30443 invoked by uid 500); 30 Nov 2006 23:05:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30434 invoked by uid 99); 30 Nov 2006 23:05:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 15:05:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 15:05:40 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0D6F77142EC
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 15:05:21 -0800 (PST)
Message-ID: <31684831.1164927921052.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 15:05:21 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-771) Namenode should return error when
 trying to delete non-empty directory
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Namenode should return error when trying to delete non-empty directory
----------------------------------------------------------------------

                 Key: HADOOP-771
                 URL: http://issues.apache.org/jira/browse/HADOOP-771
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
    Affects Versions: 0.8.0
         Environment: all
            Reporter: Milind Bhandarkar


Currently, the namenode.delete() method allows recursive deletion of a directory. That is, even a non-empty directory could be deleted using namenode.delete(). To avoid costly programmer errors, the namenode should not remove the non-empty directories in this method. Recursively deleting directory should either be performed with listPaths() followed by a delete() for every path, or with a specific namenode method such as deleteRecursive().


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Nov 30 23:23:45 2006
Return-Path: 
 <hadoop-dev-return-5504-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97257 invoked from network); 30 Nov 2006 23:23:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 23:23:45 -0000
Received: (qmail 62280 invoked by uid 500); 30 Nov 2006 23:23:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62265 invoked by uid 500); 30 Nov 2006 23:23:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62256 invoked by uid 99); 30 Nov 2006 23:23:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 15:23:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 15:23:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5A95D7142FA
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 15:23:24 -0800 (PST)
Message-ID: <32939059.1164929004368.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 15:23:24 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-764) The memory consumption of
 processReport() in the namenode can be reduced
In-Reply-To: <21824491.1164845001071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-764?page=comments#action_12454778 ] 
            
Raghu Angadi commented on HADOOP-764:
-------------------------------------


Another memory overhead in processReport() is the fact that we seem to do blocks.clear() and rebuild the blocks tree each time. 

> The memory consumption of processReport() in the namenode can be reduced
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-764
>                 URL: http://issues.apache.org/jira/browse/HADOOP-764
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> The FSNamesystem.processReport() method converts the blocklist for a datanode into an array by calling node.getBlocks(). Although this memory allocation is transient, it could possibly require the garbage-collector to work that much harder. 
> The method Block.getBlocks() should be deprecated. Code that currently uses this method should instead iterate over the Collection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 02:57:47 2006
Return-Path: 
 <hadoop-dev-return-5505-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43808 invoked from network); 1 Dec 2006 02:57:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 02:57:47 -0000
Received: (qmail 69098 invoked by uid 500); 1 Dec 2006 02:57:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68877 invoked by uid 500); 1 Dec 2006 02:57:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68867 invoked by uid 99); 1 Dec 2006 02:57:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 18:57:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 18:57:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3F6227142EC
	for <hadoop-dev@lucene.apache.org>; Thu, 30 Nov 2006 18:57:22 -0800 (PST)
Message-ID: <26347973.1164941842256.JavaMail.jira@brutus>
Date: Thu, 30 Nov 2006 18:57:22 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-681) Adminstrative hook to pull live
 nodes out of a HDFS cluster
In-Reply-To: <29893636.1162789960338.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-681?page=comments#action_12454797 ] 
            
Konstantin Shvachko commented on HADOOP-681:
--------------------------------------------

6. From the top of my mind I cannot think of any other use of admin states right now.
My intention was to minimize the impact on the system state when decommissions are not happening.

7. I thought the intention was to make the decommission state persistent.
If not then just reset it to NORMAL or null while loading the image.
I don't think we should introduce a new class for temporary purposes.

May be we should keep DatanodeInfo unchanged and implement a separate call
getDecommissionedNodes( inProgress, decommissioned );
The web UI is getting the DatanodeDescriptor anyway now.


> Adminstrative hook to pull live nodes out of a HDFS cluster
> -----------------------------------------------------------
>
>                 Key: HADOOP-681
>                 URL: http://issues.apache.org/jira/browse/HADOOP-681
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: nodedecommission2.patch
>
>
> Introduction
> ------------
> An administrator sometimes needs to bring down a datanode for scheduled maintenance. It would be nice if HDFS can be informed about this event. On receipt of this event, HDFS can take steps so that HDFS data is not lost when the node goes down at a later time.
> Architecture
> -----------
> In the existing architecture, a datanode can be in one of two states: dead or alive. A datanode is alive if its heartbeats are being processed by the namenode. Otherwise that datanode is in dead state. We extend the architecture to introduce the concept of a tranquil state for a datanode.
> A datanode is in tranquil state if:
>     - it cannot be a target for replicating any blocks
>     - any block replica that it currently contains does not count towards the target-replication-factor of that block
> Thus, a node that is in tranquil state can be brought down without impacting the guarantees provided by HDFS.
> The tranquil state is not persisted across namenode restarts. If the namenode restarts then that datanode will go back to being in the dead or alive state.
> The datanode is completely transparent to the fact that it has been labeled as being in tranquil state. It can continue to heartbeat and serve read requests for datablocks.
> DFSShell Design
> -----------------------
> We extend the DFS Shell utility to specify a list of nodes to the namenode.
>     hadoop dfs -tranquil {set|clear|get} datanodename1 [,datanodename2]
> The DFSShell utility sends this list to the namenode. This DFSShell command invoked with the "set" option completes when the list is transferred to the namenode. This command is non-blocking; it returns before the datanode is actually in the tranquil state. The client can then query the state by re-issuing the command with the "get" option. This option will indicate whether the datanode is in tranquil state or is "being tranquiled". The "clear" option is used to transition a tranquil datanode to the alive state. The "clear" option is a no-op if the datanode is not in the "tranquil" state.
> ClientProtocol Design
> --------------------
> The ClientProtocol is the protocol exported by the namenode for its client.
> This protocol is extended to incorporate three new methods:
>    ClientProtocol.setTranquil(String[] datanodes)
>    ClientProtocol.getTranquil(String datanode)
>    ClientProtocol.clearTranquil(String[] datanodes)
> The ProtocolVersion is incremented to prevent conversations between imcompatible clients and servers. An old DFSShell cannot talk to the new NameNode and vice-versa.
> NameNode Design
> -------------------------
> The namenode does the bulk of the work for supporting this new feature.
> The DatanodeInfo object has a new private member named "state". It also has three new member functions:
>     datanodeInfo.tranquilStarted(): start the process of tranquilization
>     datanodeInfo.tranquilCompleted(): node is not in tranquil state
>     datanodeInfo.clearTranquil() : remove tranquilization from node
> The namenode exposes a new API to set and clear tranquil states for a datanode. On receipt of a "set tranquil" command, it invokes datanodeInfo.tranquilStarted().
> The FSNamesystem.chooseTarget() method skips over datanodes that are marked as being in the "tranquil" state. This ensures that tranquil-datanodes are never chosen as targets of replication. The namenode does *not* record
> this operation in either the FsImage or the EditLogs.
> The namenode puts all the blocks from a being-tranquiled node into the neededReplication data structure. Necessary code changes are made to ensure that these blocks get replicated by the regular replication method. As of now, the regular replication code does not distinguish between these blocks and the blocks that are replication candidates because some other datanode might have died. It might be prudent to give different (lower?) weightage to this type of replication requests, but that exercise is deferred to a later date. In this design, replication requests generated because of a node going to a tranquil state are not distinguished from replication requests generated by a datanode going to the dead state.
> The DatanodeInfo object has another new private member named "pendingTranquilCount". This field stores the remaining number of blocks that still remain to be replicated. This field is valid only if the node is in the ets being-tranquiled state.  On receipt of every 'n' heartbeats from the being-tranquiled datanode, the namenode calculates the amount of data that is still remaining to be replicated and updates the "pendingTranquilCount". in the DatanodeInfo.When all the replications complete, the datanode is marked as tranquiled. The number 'n' is selected in such a way that the average heartbeat processing time does not increase appreciably.
> It is possible that the namenode might stop receving heartbeats from a datanode that is being-tranquiled. In this case,   the tranquil flag of the datanode gets cleared. It transitions to the dead state and the normal processing for alive-to-dead transition occurs here.
> Web Interface
> -------------------
> The dfshealth.jsp displays the live nodes, dead nodes, being-tranquiled and tranquil nodes. For nodes in the being-tranquiled state, it displays the percentage of tranquilization completed till now.
> Issues
> --------
> 1. If a request for tranquilization starts getting processed and there aren't enough space available in DFS to complete the necessary replication, then that node might remain in the being-tranquiled state for a long long time. This is not necessarily a bad thing but is there a better option?
> 2. We have opted for not storing cluster configuration information in the persistent image of the file system. (The tranquil state of a datanode may be lost if the namenode restarts).
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 08:57:44 2006
Return-Path: 
 <hadoop-dev-return-5506-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25219 invoked from network); 1 Dec 2006 08:57:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 08:57:44 -0000
Received: (qmail 16109 invoked by uid 500); 1 Dec 2006 08:57:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15885 invoked by uid 500); 1 Dec 2006 08:57:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15876 invoked by uid 99); 1 Dec 2006 08:57:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 00:57:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 00:57:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B2097142EC
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 00:57:22 -0800 (PST)
Message-ID: <29217235.1164963442305.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 00:57:22 -0800 (PST)
From: "Thomas Friol (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-649) Jobs without any map and reduce
 operations seems to be lost after their execution
In-Reply-To: <20242862.1161948738186.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-649?page=all ]

Thomas Friol updated HADOOP-649:
--------------------------------

    Attachment: HADOOP-649.patch

After a long investigation, i finally found why these kind of jobs where retired by the jobtracker. This is because in this case, job finished time is never setted.
So here is a patch to correct this problem.
It could be great if my patch is correct to integrate it in the next 0.9.0 release if possible.
Thanks.

> Jobs without any map and reduce operations seems to be lost after their execution
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-649
>                 URL: http://issues.apache.org/jira/browse/HADOOP-649
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.1
>            Reporter: Thomas Friol
>         Attachments: HADOOP-649.patch
>
>
> When a job does not provide any file splits (because there is no data present), the job successes but then it is lost by the job tracker. Is this normal ?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 10:26:49 2006
Return-Path: 
 <hadoop-dev-return-5507-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46764 invoked from network); 1 Dec 2006 10:26:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 10:26:49 -0000
Received: (qmail 47101 invoked by uid 500); 1 Dec 2006 10:26:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47024 invoked by uid 500); 1 Dec 2006 10:26:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46976 invoked by uid 99); 1 Dec 2006 10:26:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 02:26:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 02:26:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2987F7142FC
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 02:26:26 -0800 (PST)
Message-ID: <23429576.1164968786166.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 02:26:26 -0800 (PST)
From: "Thomas Friol (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-649) Jobs without any map and reduce
 operations seems to be lost after their execution
In-Reply-To: <20242862.1161948738186.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-649?page=comments#action_12454867 ] 
            
Thomas Friol commented on HADOOP-649:
-------------------------------------

If my patch is correct and commited (I have tested it), I think that HADOOP-648 issue can also be resolved in the same time as this one because in fact, it is the same issue.

> Jobs without any map and reduce operations seems to be lost after their execution
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-649
>                 URL: http://issues.apache.org/jira/browse/HADOOP-649
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.1
>            Reporter: Thomas Friol
>         Attachments: HADOOP-649.patch
>
>
> When a job does not provide any file splits (because there is no data present), the job successes but then it is lost by the job tracker. Is this normal ?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 11:14:45 2006
Return-Path: 
 <hadoop-dev-return-5508-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57045 invoked from network); 1 Dec 2006 11:14:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 11:14:45 -0000
Received: (qmail 6463 invoked by uid 500); 1 Dec 2006 11:14:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6438 invoked by uid 500); 1 Dec 2006 11:14:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6428 invoked by uid 99); 1 Dec 2006 11:14:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 03:14:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 03:14:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DA8307142CD
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 03:14:22 -0800 (PST)
Message-ID: <20831251.1164971662892.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 03:14:22 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
In-Reply-To: <30411461.1163635597099.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-728?page=all ]

Sanjay Dahiya updated HADOOP-728:
---------------------------------

    Attachment:     (was: Hadoop-728_1.patch)

> Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-728
>                 URL: http://issues.apache.org/jira/browse/HADOOP-728
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-728.patch
>
>
> a) a file is create for the output instead of a directory.
> b) there is no way to understand what is going on from the client output
> I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
> ~

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 11:16:45 2006
Return-Path: 
 <hadoop-dev-return-5509-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57653 invoked from network); 1 Dec 2006 11:16:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 11:16:45 -0000
Received: (qmail 9462 invoked by uid 500); 1 Dec 2006 11:16:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9446 invoked by uid 500); 1 Dec 2006 11:16:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9434 invoked by uid 99); 1 Dec 2006 11:16:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 03:16:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 03:16:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 888047142CD
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 03:16:23 -0800 (PST)
Message-ID: <21218919.1164971783556.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 03:16:23 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
In-Reply-To: <30411461.1163635597099.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-728?page=all ]

Sanjay Dahiya updated HADOOP-728:
---------------------------------

    Attachment: Hadoop-728_1.patch

Fixed another issue in PipeMapRed where output file may not get closed properly.

> Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-728
>                 URL: http://issues.apache.org/jira/browse/HADOOP-728
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-728.patch, Hadoop-728_1.patch
>
>
> a) a file is create for the output instead of a directory.
> b) there is no way to understand what is going on from the client output
> I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
> ~

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 11:16:47 2006
Return-Path: 
 <hadoop-dev-return-5510-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57695 invoked from network); 1 Dec 2006 11:16:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 11:16:47 -0000
Received: (qmail 9745 invoked by uid 500); 1 Dec 2006 11:16:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9711 invoked by uid 500); 1 Dec 2006 11:16:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9702 invoked by uid 99); 1 Dec 2006 11:16:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 03:16:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 03:16:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9C2CB7142F7
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 03:16:25 -0800 (PST)
Message-ID: <27005623.1164971785637.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 03:16:25 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
In-Reply-To: <30411461.1163635597099.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-728?page=all ]

Sanjay Dahiya updated HADOOP-728:
---------------------------------

    Status: Patch Available  (was: Open)

> Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-728
>                 URL: http://issues.apache.org/jira/browse/HADOOP-728
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-728.patch, Hadoop-728_1.patch
>
>
> a) a file is create for the output instead of a directory.
> b) there is no way to understand what is going on from the client output
> I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
> ~

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 11:26:44 2006
Return-Path: 
 <hadoop-dev-return-5511-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59639 invoked from network); 1 Dec 2006 11:26:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 11:26:44 -0000
Received: (qmail 25268 invoked by uid 500); 1 Dec 2006 11:26:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25247 invoked by uid 500); 1 Dec 2006 11:26:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25238 invoked by uid 99); 1 Dec 2006 11:26:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 03:26:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 03:26:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5F8CE7142EC
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 03:26:22 -0800 (PST)
Message-ID: <17359139.1164972382387.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 03:26:22 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12454880 ] 
            
Sanjay Dahiya commented on HADOOP-619:
--------------------------------------

If we have patterns in input path to MR, do we still check for existence of files matching that pattern in dfs while validating the command? 
Currently its a single check which validates if directory exists, with patterns we will need to fetch all the files in the directory and match the pattern and if no file matches the pattern then show error and exit. This will be done in job client. 

comments?

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 11:26:45 2006
Return-Path: 
 <hadoop-dev-return-5512-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59682 invoked from network); 1 Dec 2006 11:26:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 11:26:45 -0000
Received: (qmail 25540 invoked by uid 500); 1 Dec 2006 11:26:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25510 invoked by uid 500); 1 Dec 2006 11:26:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25501 invoked by uid 99); 1 Dec 2006 11:26:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 03:26:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 03:26:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9BAD77142CD
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 03:26:24 -0800 (PST)
Message-ID: <1679775.1164972384635.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 03:26:24 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya reassigned HADOOP-619:
------------------------------------

    Assignee: Sanjay Dahiya

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 13:53:44 2006
Return-Path: 
 <hadoop-dev-return-5513-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9356 invoked from network); 1 Dec 2006 13:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 13:53:44 -0000
Received: (qmail 78626 invoked by uid 500); 1 Dec 2006 13:53:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78604 invoked by uid 500); 1 Dec 2006 13:53:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78595 invoked by uid 99); 1 Dec 2006 13:53:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 05:53:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 05:53:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7423F7142F7
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 05:53:22 -0800 (PST)
Message-ID: <2850068.1164981202473.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 05:53:22 -0800 (PST)
From: "Thomas Friol (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-649) Jobs without any map and reduce
 operations seems to be lost after their execution
In-Reply-To: <20242862.1161948738186.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-649?page=all ]

Thomas Friol updated HADOOP-649:
--------------------------------

    Attachment: HADOOP-649.patch

The previous patch is not really good. In fact, the finished time must be setted before the JobStatus in order not to be retire by the job tracker.
Here is new and valid patch. :-)

> Jobs without any map and reduce operations seems to be lost after their execution
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-649
>                 URL: http://issues.apache.org/jira/browse/HADOOP-649
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.1
>            Reporter: Thomas Friol
>         Attachments: HADOOP-649.patch, HADOOP-649.patch
>
>
> When a job does not provide any file splits (because there is no data present), the job successes but then it is lost by the job tracker. Is this normal ?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 14:35:48 2006
Return-Path: 
 <hadoop-dev-return-5514-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25931 invoked from network); 1 Dec 2006 14:35:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 14:35:48 -0000
Received: (qmail 61722 invoked by uid 500); 1 Dec 2006 14:35:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61697 invoked by uid 500); 1 Dec 2006 14:35:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61688 invoked by uid 99); 1 Dec 2006 14:35:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 06:35:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 06:35:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 234B97142EC
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 06:35:26 -0800 (PST)
Message-ID: <2389083.1164983726140.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 06:35:26 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-681) Adminstrative hook to pull live
 nodes out of a HDFS cluster
In-Reply-To: <29893636.1162789960338.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-681?page=comments#action_12454915 ] 
            
dhruba borthakur commented on HADOOP-681:
-----------------------------------------

6. I would prefer to keep the name "adminstate" unless you strongly insist otherwise. There isn't any impact to the system when no nodes are being decommissioned.

7. The DatanodeDescriptor is persisted in the fsimage whereas DatanodeReport is an object used by the ClientProtocol. In theory, I would like to keep them separate. The first one is an on-disk structure whereas the second one is a over-the-wire-protocol structure. In fact, at a later date, I was planning on changing the webUI to use Datanode Report. 

  My theory is to keep two different object for two different purposes, especially because their serialization requirements are different. The first oject DatanodeDescriptor gets written to disk while the second one DatanodeReport gets passed back to the client. In the DatanodeReport, I can visualize that other parameters will be added in the future, e.g. we could be adding computed statistics into the Report. These computed statistics might have to computed using a variety of namenode-data structures (instead of just using DatanodeDescriptor).

> Adminstrative hook to pull live nodes out of a HDFS cluster
> -----------------------------------------------------------
>
>                 Key: HADOOP-681
>                 URL: http://issues.apache.org/jira/browse/HADOOP-681
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: nodedecommission2.patch
>
>
> Introduction
> ------------
> An administrator sometimes needs to bring down a datanode for scheduled maintenance. It would be nice if HDFS can be informed about this event. On receipt of this event, HDFS can take steps so that HDFS data is not lost when the node goes down at a later time.
> Architecture
> -----------
> In the existing architecture, a datanode can be in one of two states: dead or alive. A datanode is alive if its heartbeats are being processed by the namenode. Otherwise that datanode is in dead state. We extend the architecture to introduce the concept of a tranquil state for a datanode.
> A datanode is in tranquil state if:
>     - it cannot be a target for replicating any blocks
>     - any block replica that it currently contains does not count towards the target-replication-factor of that block
> Thus, a node that is in tranquil state can be brought down without impacting the guarantees provided by HDFS.
> The tranquil state is not persisted across namenode restarts. If the namenode restarts then that datanode will go back to being in the dead or alive state.
> The datanode is completely transparent to the fact that it has been labeled as being in tranquil state. It can continue to heartbeat and serve read requests for datablocks.
> DFSShell Design
> -----------------------
> We extend the DFS Shell utility to specify a list of nodes to the namenode.
>     hadoop dfs -tranquil {set|clear|get} datanodename1 [,datanodename2]
> The DFSShell utility sends this list to the namenode. This DFSShell command invoked with the "set" option completes when the list is transferred to the namenode. This command is non-blocking; it returns before the datanode is actually in the tranquil state. The client can then query the state by re-issuing the command with the "get" option. This option will indicate whether the datanode is in tranquil state or is "being tranquiled". The "clear" option is used to transition a tranquil datanode to the alive state. The "clear" option is a no-op if the datanode is not in the "tranquil" state.
> ClientProtocol Design
> --------------------
> The ClientProtocol is the protocol exported by the namenode for its client.
> This protocol is extended to incorporate three new methods:
>    ClientProtocol.setTranquil(String[] datanodes)
>    ClientProtocol.getTranquil(String datanode)
>    ClientProtocol.clearTranquil(String[] datanodes)
> The ProtocolVersion is incremented to prevent conversations between imcompatible clients and servers. An old DFSShell cannot talk to the new NameNode and vice-versa.
> NameNode Design
> -------------------------
> The namenode does the bulk of the work for supporting this new feature.
> The DatanodeInfo object has a new private member named "state". It also has three new member functions:
>     datanodeInfo.tranquilStarted(): start the process of tranquilization
>     datanodeInfo.tranquilCompleted(): node is not in tranquil state
>     datanodeInfo.clearTranquil() : remove tranquilization from node
> The namenode exposes a new API to set and clear tranquil states for a datanode. On receipt of a "set tranquil" command, it invokes datanodeInfo.tranquilStarted().
> The FSNamesystem.chooseTarget() method skips over datanodes that are marked as being in the "tranquil" state. This ensures that tranquil-datanodes are never chosen as targets of replication. The namenode does *not* record
> this operation in either the FsImage or the EditLogs.
> The namenode puts all the blocks from a being-tranquiled node into the neededReplication data structure. Necessary code changes are made to ensure that these blocks get replicated by the regular replication method. As of now, the regular replication code does not distinguish between these blocks and the blocks that are replication candidates because some other datanode might have died. It might be prudent to give different (lower?) weightage to this type of replication requests, but that exercise is deferred to a later date. In this design, replication requests generated because of a node going to a tranquil state are not distinguished from replication requests generated by a datanode going to the dead state.
> The DatanodeInfo object has another new private member named "pendingTranquilCount". This field stores the remaining number of blocks that still remain to be replicated. This field is valid only if the node is in the ets being-tranquiled state.  On receipt of every 'n' heartbeats from the being-tranquiled datanode, the namenode calculates the amount of data that is still remaining to be replicated and updates the "pendingTranquilCount". in the DatanodeInfo.When all the replications complete, the datanode is marked as tranquiled. The number 'n' is selected in such a way that the average heartbeat processing time does not increase appreciably.
> It is possible that the namenode might stop receving heartbeats from a datanode that is being-tranquiled. In this case,   the tranquil flag of the datanode gets cleared. It transitions to the dead state and the normal processing for alive-to-dead transition occurs here.
> Web Interface
> -------------------
> The dfshealth.jsp displays the live nodes, dead nodes, being-tranquiled and tranquil nodes. For nodes in the being-tranquiled state, it displays the percentage of tranquilization completed till now.
> Issues
> --------
> 1. If a request for tranquilization starts getting processed and there aren't enough space available in DFS to complete the necessary replication, then that node might remain in the being-tranquiled state for a long long time. This is not necessarily a bad thing but is there a better option?
> 2. We have opted for not storing cluster configuration information in the persistent image of the file system. (The tranquil state of a datanode may be lost if the namenode restarts).
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 15:02:49 2006
Return-Path: 
 <hadoop-dev-return-5515-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34032 invoked from network); 1 Dec 2006 15:02:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 15:02:49 -0000
Received: (qmail 35122 invoked by uid 500); 1 Dec 2006 15:02:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35089 invoked by uid 500); 1 Dec 2006 15:02:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34988 invoked by uid 99); 1 Dec 2006 15:02:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 07:02:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 07:02:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DD51171430D
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 07:02:25 -0800 (PST)
Message-ID: <23437910.1164985345797.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 07:02:25 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-639?page=all ]

Arun C Murthy updated HADOOP-639:
---------------------------------

    Attachment: HADOOP-639_3_20061201.patch

Testing on a small cluster brought out a minor bug in the previous patch; hence this new one.

I'll keep testing some more; as alway appreciate any feedback...

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>         Attachments: HADOOP-639_1.patch, HADOOP-639_2_20061130.patch, HADOOP-639_3_20061201.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 16:52:44 2006
Return-Path: 
 <hadoop-dev-return-5516-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78602 invoked from network); 1 Dec 2006 16:52:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 16:52:44 -0000
Received: (qmail 20033 invoked by uid 500); 1 Dec 2006 16:52:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20008 invoked by uid 500); 1 Dec 2006 16:52:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19999 invoked by uid 99); 1 Dec 2006 16:52:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 08:52:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 08:52:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0441271429F
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 08:52:23 -0800 (PST)
Message-ID: <21763442.1164991943014.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 08:52:23 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12454951 ] 
            
Runping Qi commented on HADOOP-619:
-----------------------------------


We should check the existence of the path(s), but leave the pattern matching to InputFormatBase class.

We have three cases to consider: all paths exist, non exists, and some do, some do not.
Cases 1 and 2 are easy. Case 3, I hink it is reasonable that the job proceeds, but records that in the job
status.

When a job starts, we may should record all the input directories and number of files under it matching the pattern. If no file matches the pattern, the job should stop. Otherwise, the job generates splits from the matched files and proceeds.

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 17:26:04 2006
Return-Path: 
 <hadoop-dev-return-5517-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89992 invoked from network); 1 Dec 2006 17:26:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 17:26:04 -0000
Received: (qmail 98813 invoked by uid 500); 1 Dec 2006 17:26:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98585 invoked by uid 500); 1 Dec 2006 17:26:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98576 invoked by uid 99); 1 Dec 2006 17:26:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 09:26:12 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 09:26:01 -0800
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kB1HPePD003242
	for <hadoop-dev@lucene.apache.org>; Fri, 1 Dec 2006 09:25:40 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=IsP383maHO2zfc0fUSjN8rgtbmQhPbez7a7xJn3iRzuNxl4V5YUL5h2ILgXCu4so
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <21763442.1164991943014.JavaMail.jira@brutus>
References: <21763442.1164991943014.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <d40337448ac7c7ac7c221b5ce82970a8@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
Date: Fri, 1 Dec 2006 09:25:38 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org

+1 on Runping's comment.

It is very important to report the information about the matching input  
files to the user (as the output of Hadoop Streaming command)
Specifically
-- each wildcard parameter that does not match any files, should be  
explicitly reported, but not to cause a failure
-- an exact (non-wildcard) parameter that does not match any file or  
directory has to be reported and CAUSE a failure
-- for every directory, the number of files in the directory should be  
reported.
-- if after successful wildcard matching the input has 0 files, the  
command should fail.

Failure implies
-- exit with non-0 return status
-- produce an error message explaining a failure.  No un-handled  
exceptions.

-- ab

On Dec 1, 2006, at 8:52 AM, Runping Qi (JIRA) wrote:

>     [  
> http://issues.apache.org/jira/browse/HADOOP-619? 
> page=comments#action_12454951 ]
>
> Runping Qi commented on HADOOP-619:
> -----------------------------------
>
>
> We should check the existence of the path(s), but leave the pattern  
> matching to InputFormatBase class.
>
> We have three cases to consider: all paths exist, non exists, and some  
> do, some do not.
> Cases 1 and 2 are easy. Case 3, I hink it is reasonable that the job  
> proceeds, but records that in the job
> status.
>
> When a job starts, we may should record all the input directories and  
> number of files under it matching the pattern. If no file matches the  
> pattern, the job should stop. Otherwise, the job generates splits from  
> the matched files and proceeds.
>
>> Unify Map-Reduce and Streaming to take the same globbed input  
>> specification
>> ---------------------------------------------------------------------- 
>> -----
>>
>>                 Key: HADOOP-619
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>>             Project: Hadoop
>>          Issue Type: Improvement
>>          Components: mapred
>>            Reporter: eric baldeschwieler
>>         Assigned To: Sanjay Dahiya
>>
>> Right now streaming input is specified very differently from other  
>> map-reduce input.  It would be good if these two apps could take much  
>> more similar input specs.
>> In particular -input in streaming expects a file or glob pattern  
>> while MR takes a directory.  It would be cool if both could take a  
>> glob patern of files and if both took a directory by default (with  
>> some patern excluded to allow logs, metadata and other framework  
>> output to be safely stored).
>> We want to be sure that MR input is backward compatible over this  
>> change.  I propose that a single file should be accepted as an input  
>> or a single directory.  Globs should only match directories if the  
>> paterns is '/' terminated, to avoid massive inputs specified by  
>> mistake.
>> Thoughts?
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Fri Dec  1 17:50:44 2006
Return-Path: 
 <hadoop-dev-return-5518-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97154 invoked from network); 1 Dec 2006 17:50:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 17:50:44 -0000
Received: (qmail 33085 invoked by uid 500); 1 Dec 2006 17:50:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33063 invoked by uid 500); 1 Dec 2006 17:50:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33054 invoked by uid 99); 1 Dec 2006 17:50:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 09:50:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 09:50:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E88057142F7
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 09:50:22 -0800 (PST)
Message-ID: <31616012.1164995422949.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 09:50:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
In-Reply-To: <30411461.1163635597099.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-728?page=comments#action_12454965 ] 
            
Hadoop QA commented on HADOOP-728:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346211/Hadoop-728_1.patch applied and successfully tested against trunk revision 481099

> Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-728
>                 URL: http://issues.apache.org/jira/browse/HADOOP-728
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-728.patch, Hadoop-728_1.patch
>
>
> a) a file is create for the output instead of a directory.
> b) there is no way to understand what is going on from the client output
> I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
> ~

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 17:52:42 2006
Return-Path: 
 <hadoop-dev-return-5519-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97657 invoked from network); 1 Dec 2006 17:52:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 17:52:42 -0000
Received: (qmail 35099 invoked by uid 500); 1 Dec 2006 17:52:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34868 invoked by uid 500); 1 Dec 2006 17:52:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34859 invoked by uid 99); 1 Dec 2006 17:52:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 09:52:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 09:52:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0827A7142EC
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 09:52:21 -0800 (PST)
Message-ID: <3361670.1164995541030.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 09:52:21 -0800 (PST)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-772) DFS web UI does should have "TAIL this
 block" option
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

DFS web UI does should have "TAIL this block" option
----------------------------------------------------

                 Key: HADOOP-772
                 URL: http://issues.apache.org/jira/browse/HADOOP-772
             Project: Hadoop
          Issue Type: Bug
            Reporter: arkady borkovsky


It should be available either in addition or instead "TAIL this file" as it covers it.
In case of 1 block files, the two are the same.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 17:54:55 2006
Return-Path: 
 <hadoop-dev-return-5520-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98373 invoked from network); 1 Dec 2006 17:54:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 17:54:55 -0000
Received: (qmail 39008 invoked by uid 500); 1 Dec 2006 17:54:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38978 invoked by uid 500); 1 Dec 2006 17:54:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38952 invoked by uid 99); 1 Dec 2006 17:54:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 09:54:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 09:54:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0A5E17142F7
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 09:54:21 -0800 (PST)
Message-ID: <14402251.1164995661039.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 09:54:21 -0800 (PST)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-773) In Streaming output block boundaries
 cut records
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

In Streaming output block boundaries cut records
------------------------------------------------

                 Key: HADOOP-773
                 URL: http://issues.apache.org/jira/browse/HADOOP-773
             Project: Hadoop
          Issue Type: Bug
            Reporter: arkady borkovsky


I see blocks that start with an incomplete record.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 21:42:45 2006
Return-Path: 
 <hadoop-dev-return-5521-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13834 invoked from network); 1 Dec 2006 21:42:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 21:42:45 -0000
Received: (qmail 40417 invoked by uid 500); 1 Dec 2006 21:42:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40372 invoked by uid 500); 1 Dec 2006 21:42:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40362 invoked by uid 99); 1 Dec 2006 21:42:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 13:42:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 13:42:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1DFF37142FB
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 13:42:23 -0800 (PST)
Message-ID: <7549839.1165009343120.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 13:42:23 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-681) Adminstrative hook to pull live
 nodes out of a HDFS cluster
In-Reply-To: <29893636.1162789960338.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-681?page=comments#action_12455003 ] 
            
Konstantin Shvachko commented on HADOOP-681:
--------------------------------------------

6. The name is not so important. I'm concerned about the NORMAL state.
You will have to store an object for each data-node, which for most of them
will have the same value NORMAL. Treating null as the normal state would
be more space efficient.

7. I am just saying there is already an over-the-wire class. It is called DatanodeInfo.
The distinction between DatanodeDescriptor and DatanodeInfo is exactly as you described for the DatanodeReport.
DatanodeReport = DatanodeInfo?

There is a problem with serialization of DatanodeDescriptor, since it is not versioned.
Version number is required if fields are changing.
Versioning was discussed in HADOOP-224, but was never resolved.
A simple solution I'd propose is to create a new interface
Storable {
    readObject( version, inStream ) throws IOException;
    writeObject( version, outStream ) throws IOException;
}
Storable is used instead of Writable whenever an object needs to be stored on disk.
Writable is used solely for communication related serialization.

> Adminstrative hook to pull live nodes out of a HDFS cluster
> -----------------------------------------------------------
>
>                 Key: HADOOP-681
>                 URL: http://issues.apache.org/jira/browse/HADOOP-681
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: nodedecommission2.patch
>
>
> Introduction
> ------------
> An administrator sometimes needs to bring down a datanode for scheduled maintenance. It would be nice if HDFS can be informed about this event. On receipt of this event, HDFS can take steps so that HDFS data is not lost when the node goes down at a later time.
> Architecture
> -----------
> In the existing architecture, a datanode can be in one of two states: dead or alive. A datanode is alive if its heartbeats are being processed by the namenode. Otherwise that datanode is in dead state. We extend the architecture to introduce the concept of a tranquil state for a datanode.
> A datanode is in tranquil state if:
>     - it cannot be a target for replicating any blocks
>     - any block replica that it currently contains does not count towards the target-replication-factor of that block
> Thus, a node that is in tranquil state can be brought down without impacting the guarantees provided by HDFS.
> The tranquil state is not persisted across namenode restarts. If the namenode restarts then that datanode will go back to being in the dead or alive state.
> The datanode is completely transparent to the fact that it has been labeled as being in tranquil state. It can continue to heartbeat and serve read requests for datablocks.
> DFSShell Design
> -----------------------
> We extend the DFS Shell utility to specify a list of nodes to the namenode.
>     hadoop dfs -tranquil {set|clear|get} datanodename1 [,datanodename2]
> The DFSShell utility sends this list to the namenode. This DFSShell command invoked with the "set" option completes when the list is transferred to the namenode. This command is non-blocking; it returns before the datanode is actually in the tranquil state. The client can then query the state by re-issuing the command with the "get" option. This option will indicate whether the datanode is in tranquil state or is "being tranquiled". The "clear" option is used to transition a tranquil datanode to the alive state. The "clear" option is a no-op if the datanode is not in the "tranquil" state.
> ClientProtocol Design
> --------------------
> The ClientProtocol is the protocol exported by the namenode for its client.
> This protocol is extended to incorporate three new methods:
>    ClientProtocol.setTranquil(String[] datanodes)
>    ClientProtocol.getTranquil(String datanode)
>    ClientProtocol.clearTranquil(String[] datanodes)
> The ProtocolVersion is incremented to prevent conversations between imcompatible clients and servers. An old DFSShell cannot talk to the new NameNode and vice-versa.
> NameNode Design
> -------------------------
> The namenode does the bulk of the work for supporting this new feature.
> The DatanodeInfo object has a new private member named "state". It also has three new member functions:
>     datanodeInfo.tranquilStarted(): start the process of tranquilization
>     datanodeInfo.tranquilCompleted(): node is not in tranquil state
>     datanodeInfo.clearTranquil() : remove tranquilization from node
> The namenode exposes a new API to set and clear tranquil states for a datanode. On receipt of a "set tranquil" command, it invokes datanodeInfo.tranquilStarted().
> The FSNamesystem.chooseTarget() method skips over datanodes that are marked as being in the "tranquil" state. This ensures that tranquil-datanodes are never chosen as targets of replication. The namenode does *not* record
> this operation in either the FsImage or the EditLogs.
> The namenode puts all the blocks from a being-tranquiled node into the neededReplication data structure. Necessary code changes are made to ensure that these blocks get replicated by the regular replication method. As of now, the regular replication code does not distinguish between these blocks and the blocks that are replication candidates because some other datanode might have died. It might be prudent to give different (lower?) weightage to this type of replication requests, but that exercise is deferred to a later date. In this design, replication requests generated because of a node going to a tranquil state are not distinguished from replication requests generated by a datanode going to the dead state.
> The DatanodeInfo object has another new private member named "pendingTranquilCount". This field stores the remaining number of blocks that still remain to be replicated. This field is valid only if the node is in the ets being-tranquiled state.  On receipt of every 'n' heartbeats from the being-tranquiled datanode, the namenode calculates the amount of data that is still remaining to be replicated and updates the "pendingTranquilCount". in the DatanodeInfo.When all the replications complete, the datanode is marked as tranquiled. The number 'n' is selected in such a way that the average heartbeat processing time does not increase appreciably.
> It is possible that the namenode might stop receving heartbeats from a datanode that is being-tranquiled. In this case,   the tranquil flag of the datanode gets cleared. It transitions to the dead state and the normal processing for alive-to-dead transition occurs here.
> Web Interface
> -------------------
> The dfshealth.jsp displays the live nodes, dead nodes, being-tranquiled and tranquil nodes. For nodes in the being-tranquiled state, it displays the percentage of tranquilization completed till now.
> Issues
> --------
> 1. If a request for tranquilization starts getting processed and there aren't enough space available in DFS to complete the necessary replication, then that node might remain in the being-tranquiled state for a long long time. This is not necessarily a bad thing but is there a better option?
> 2. We have opted for not storing cluster configuration information in the persistent image of the file system. (The tranquil state of a datanode may be lost if the namenode restarts).
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 21:56:48 2006
Return-Path: 
 <hadoop-dev-return-5522-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17884 invoked from network); 1 Dec 2006 21:56:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 21:56:48 -0000
Received: (qmail 82761 invoked by uid 500); 1 Dec 2006 21:56:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82735 invoked by uid 500); 1 Dec 2006 21:56:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82716 invoked by uid 99); 1 Dec 2006 21:56:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 13:56:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 13:56:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 32CAE7142FD
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 13:56:23 -0800 (PST)
Message-ID: <26004439.1165010183205.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 13:56:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-750) race condition on stalled map output
 fetches
In-Reply-To: <10490830.1164673821049.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-750?page=all ]

Owen O'Malley updated HADOOP-750:
---------------------------------

    Attachment: fetch-no-lease.patch

This patch:
  1. Gives names to the threads in the shuffle fetch.
  2. Removes the fetch lease checker, because it is redundant with the socket timeouts.
  3. Makes the killed boolean volatile since it is updated by various threads without locking.

> race condition on stalled map output fetches
> --------------------------------------------
>
>                 Key: HADOOP-750
>                 URL: http://issues.apache.org/jira/browse/HADOOP-750
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>         Attachments: fetch-no-lease.patch
>
>
> I've seen reduces getting killed because of a race condition in the ReduceTaskRunner.  In the logs it looks like:
> 2006-11-27 08:40:44,795 WARN org.apache.hadoop.mapred.TaskRunner: Map output copy stalled on http://kry2296.inktomisearch.com:7030/mapOutput?map=task_0001_m_015626_0
> ...
> 2006-11-27 09:16:41,361 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 Need 52 map output(s)
> 2006-11-27 09:16:41,361 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 Got 39 known map output location(s); scheduling...
> 2006-11-27 09:16:41,361 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 Scheduled 0 of 39 known outputs (0 slow hosts and 39 dup hosts)
> ...
> 2006-11-27 09:16:47,071 INFO org.apache.hadoop.mapred.TaskTracker: task_0001_r_000658_0 0.3328575% reduce > copy (28679 of 28720 at 0.76 MB/s) >
> ...
> 2006-11-27 09:16:47,338 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 done copying task_0001_m_015462_0 output from node1
> ...
> 2006-11-27 09:36:51,398 INFO org.apache.hadoop.mapred.TaskTracker: task_0001_r_000658_0: Task failed to report status for 1204 seconds. Killing.
> Basically, the handling of the stall has a race condition that leaves the fetcher in a bad state. At the end of the fetch, all of the tasks finish and their results never get handled. When the thread times out, all of the map output copiers are waiting for things to fetch and the prepare thread is waiting for results.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 21:56:49 2006
Return-Path: 
 <hadoop-dev-return-5523-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17932 invoked from network); 1 Dec 2006 21:56:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 21:56:49 -0000
Received: (qmail 82883 invoked by uid 500); 1 Dec 2006 21:56:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82862 invoked by uid 500); 1 Dec 2006 21:56:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82809 invoked by uid 99); 1 Dec 2006 21:56:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 13:56:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 13:56:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8E82071430E
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 13:56:24 -0800 (PST)
Message-ID: <15085202.1165010184581.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 13:56:24 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-750) race condition on stalled map output
 fetches
In-Reply-To: <10490830.1164673821049.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-750?page=all ]

Owen O'Malley updated HADOOP-750:
---------------------------------

    Status: Patch Available  (was: Open)

> race condition on stalled map output fetches
> --------------------------------------------
>
>                 Key: HADOOP-750
>                 URL: http://issues.apache.org/jira/browse/HADOOP-750
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>         Attachments: fetch-no-lease.patch
>
>
> I've seen reduces getting killed because of a race condition in the ReduceTaskRunner.  In the logs it looks like:
> 2006-11-27 08:40:44,795 WARN org.apache.hadoop.mapred.TaskRunner: Map output copy stalled on http://kry2296.inktomisearch.com:7030/mapOutput?map=task_0001_m_015626_0
> ...
> 2006-11-27 09:16:41,361 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 Need 52 map output(s)
> 2006-11-27 09:16:41,361 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 Got 39 known map output location(s); scheduling...
> 2006-11-27 09:16:41,361 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 Scheduled 0 of 39 known outputs (0 slow hosts and 39 dup hosts)
> ...
> 2006-11-27 09:16:47,071 INFO org.apache.hadoop.mapred.TaskTracker: task_0001_r_000658_0 0.3328575% reduce > copy (28679 of 28720 at 0.76 MB/s) >
> ...
> 2006-11-27 09:16:47,338 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 done copying task_0001_m_015462_0 output from node1
> ...
> 2006-11-27 09:36:51,398 INFO org.apache.hadoop.mapred.TaskTracker: task_0001_r_000658_0: Task failed to report status for 1204 seconds. Killing.
> Basically, the handling of the stall has a race condition that leaves the fetcher in a bad state. At the end of the fetch, all of the tasks finish and their results never get handled. When the thread times out, all of the map output copiers are waiting for things to fetch and the prepare thread is waiting for results.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 22:22:45 2006
Return-Path: 
 <hadoop-dev-return-5524-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26244 invoked from network); 1 Dec 2006 22:22:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 22:22:45 -0000
Received: (qmail 23360 invoked by uid 500); 1 Dec 2006 22:22:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23127 invoked by uid 500); 1 Dec 2006 22:22:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23111 invoked by uid 99); 1 Dec 2006 22:22:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:22:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:22:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B728A7142F7
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 14:22:23 -0800 (PST)
Message-ID: <31429504.1165011743747.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 14:22:23 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12455021 ] 
            
Konstantin Shvachko commented on HADOOP-432:
--------------------------------------------

You have 2 config parameters

dfs.trash.mintime   trash item expiration time
dfs.trash.maxsize.pct   maximal size of trash

But the second parameter is not enforced, that is you do
not guarantee that trash will not grow above the maxsize.
If we do not want to support maxsize, then lets remove the config parameter.
If we support it, then we need to determine how we enforce it.
- Lets keep actual trashSize up-to-date at all times;
- When trash dir is full, do we fail to moveToTrash, or do we permanently remove
these files, or do we remove older files, and move to trash the requested ones?

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete.patch, undelete11.patch, undelete12.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 22:24:47 2006
Return-Path: 
 <hadoop-dev-return-5525-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26820 invoked from network); 1 Dec 2006 22:24:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 22:24:47 -0000
Received: (qmail 28196 invoked by uid 500); 1 Dec 2006 22:24:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28169 invoked by uid 500); 1 Dec 2006 22:24:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28160 invoked by uid 99); 1 Dec 2006 22:24:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:24:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:24:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 151F871430D
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 14:24:25 -0800 (PST)
Message-ID: <8429051.1165011865084.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 14:24:25 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-681) Adminstrative hook to pull live
 nodes out of a HDFS cluster
In-Reply-To: <29893636.1162789960338.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-681?page=comments#action_12455024 ] 
            
dhruba borthakur commented on HADOOP-681:
-----------------------------------------

Hi folks,

I would really like some comments on Konstantin's proposal to introduce the Storable Interface to persist namenode metadata on disk. This is to support versioned-persistent-metadata for HDFS.

thanks,
dhruba

> Adminstrative hook to pull live nodes out of a HDFS cluster
> -----------------------------------------------------------
>
>                 Key: HADOOP-681
>                 URL: http://issues.apache.org/jira/browse/HADOOP-681
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: nodedecommission2.patch
>
>
> Introduction
> ------------
> An administrator sometimes needs to bring down a datanode for scheduled maintenance. It would be nice if HDFS can be informed about this event. On receipt of this event, HDFS can take steps so that HDFS data is not lost when the node goes down at a later time.
> Architecture
> -----------
> In the existing architecture, a datanode can be in one of two states: dead or alive. A datanode is alive if its heartbeats are being processed by the namenode. Otherwise that datanode is in dead state. We extend the architecture to introduce the concept of a tranquil state for a datanode.
> A datanode is in tranquil state if:
>     - it cannot be a target for replicating any blocks
>     - any block replica that it currently contains does not count towards the target-replication-factor of that block
> Thus, a node that is in tranquil state can be brought down without impacting the guarantees provided by HDFS.
> The tranquil state is not persisted across namenode restarts. If the namenode restarts then that datanode will go back to being in the dead or alive state.
> The datanode is completely transparent to the fact that it has been labeled as being in tranquil state. It can continue to heartbeat and serve read requests for datablocks.
> DFSShell Design
> -----------------------
> We extend the DFS Shell utility to specify a list of nodes to the namenode.
>     hadoop dfs -tranquil {set|clear|get} datanodename1 [,datanodename2]
> The DFSShell utility sends this list to the namenode. This DFSShell command invoked with the "set" option completes when the list is transferred to the namenode. This command is non-blocking; it returns before the datanode is actually in the tranquil state. The client can then query the state by re-issuing the command with the "get" option. This option will indicate whether the datanode is in tranquil state or is "being tranquiled". The "clear" option is used to transition a tranquil datanode to the alive state. The "clear" option is a no-op if the datanode is not in the "tranquil" state.
> ClientProtocol Design
> --------------------
> The ClientProtocol is the protocol exported by the namenode for its client.
> This protocol is extended to incorporate three new methods:
>    ClientProtocol.setTranquil(String[] datanodes)
>    ClientProtocol.getTranquil(String datanode)
>    ClientProtocol.clearTranquil(String[] datanodes)
> The ProtocolVersion is incremented to prevent conversations between imcompatible clients and servers. An old DFSShell cannot talk to the new NameNode and vice-versa.
> NameNode Design
> -------------------------
> The namenode does the bulk of the work for supporting this new feature.
> The DatanodeInfo object has a new private member named "state". It also has three new member functions:
>     datanodeInfo.tranquilStarted(): start the process of tranquilization
>     datanodeInfo.tranquilCompleted(): node is not in tranquil state
>     datanodeInfo.clearTranquil() : remove tranquilization from node
> The namenode exposes a new API to set and clear tranquil states for a datanode. On receipt of a "set tranquil" command, it invokes datanodeInfo.tranquilStarted().
> The FSNamesystem.chooseTarget() method skips over datanodes that are marked as being in the "tranquil" state. This ensures that tranquil-datanodes are never chosen as targets of replication. The namenode does *not* record
> this operation in either the FsImage or the EditLogs.
> The namenode puts all the blocks from a being-tranquiled node into the neededReplication data structure. Necessary code changes are made to ensure that these blocks get replicated by the regular replication method. As of now, the regular replication code does not distinguish between these blocks and the blocks that are replication candidates because some other datanode might have died. It might be prudent to give different (lower?) weightage to this type of replication requests, but that exercise is deferred to a later date. In this design, replication requests generated because of a node going to a tranquil state are not distinguished from replication requests generated by a datanode going to the dead state.
> The DatanodeInfo object has another new private member named "pendingTranquilCount". This field stores the remaining number of blocks that still remain to be replicated. This field is valid only if the node is in the ets being-tranquiled state.  On receipt of every 'n' heartbeats from the being-tranquiled datanode, the namenode calculates the amount of data that is still remaining to be replicated and updates the "pendingTranquilCount". in the DatanodeInfo.When all the replications complete, the datanode is marked as tranquiled. The number 'n' is selected in such a way that the average heartbeat processing time does not increase appreciably.
> It is possible that the namenode might stop receving heartbeats from a datanode that is being-tranquiled. In this case,   the tranquil flag of the datanode gets cleared. It transitions to the dead state and the normal processing for alive-to-dead transition occurs here.
> Web Interface
> -------------------
> The dfshealth.jsp displays the live nodes, dead nodes, being-tranquiled and tranquil nodes. For nodes in the being-tranquiled state, it displays the percentage of tranquilization completed till now.
> Issues
> --------
> 1. If a request for tranquilization starts getting processed and there aren't enough space available in DFS to complete the necessary replication, then that node might remain in the being-tranquiled state for a long long time. This is not necessarily a bad thing but is there a better option?
> 2. We have opted for not storing cluster configuration information in the persistent image of the file system. (The tranquil state of a datanode may be lost if the namenode restarts).
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 22:28:44 2006
Return-Path: 
 <hadoop-dev-return-5526-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27702 invoked from network); 1 Dec 2006 22:28:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 22:28:44 -0000
Received: (qmail 38273 invoked by uid 500); 1 Dec 2006 22:28:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38245 invoked by uid 500); 1 Dec 2006 22:28:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38236 invoked by uid 99); 1 Dec 2006 22:28:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:28:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:28:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 29B927142FB
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 14:28:23 -0800 (PST)
Message-ID: <5780671.1165012103168.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 14:28:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-750) race condition on stalled map output
 fetches
In-Reply-To: <10490830.1164673821049.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-750?page=all ]

Doug Cutting updated HADOOP-750:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just fixed this.  Thanks, Owen!

> race condition on stalled map output fetches
> --------------------------------------------
>
>                 Key: HADOOP-750
>                 URL: http://issues.apache.org/jira/browse/HADOOP-750
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.0
>
>         Attachments: fetch-no-lease.patch
>
>
> I've seen reduces getting killed because of a race condition in the ReduceTaskRunner.  In the logs it looks like:
> 2006-11-27 08:40:44,795 WARN org.apache.hadoop.mapred.TaskRunner: Map output copy stalled on http://kry2296.inktomisearch.com:7030/mapOutput?map=task_0001_m_015626_0
> ...
> 2006-11-27 09:16:41,361 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 Need 52 map output(s)
> 2006-11-27 09:16:41,361 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 Got 39 known map output location(s); scheduling...
> 2006-11-27 09:16:41,361 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 Scheduled 0 of 39 known outputs (0 slow hosts and 39 dup hosts)
> ...
> 2006-11-27 09:16:47,071 INFO org.apache.hadoop.mapred.TaskTracker: task_0001_r_000658_0 0.3328575% reduce > copy (28679 of 28720 at 0.76 MB/s) >
> ...
> 2006-11-27 09:16:47,338 INFO org.apache.hadoop.mapred.TaskRunner: task_0001_r_000658_0 done copying task_0001_m_015462_0 output from node1
> ...
> 2006-11-27 09:36:51,398 INFO org.apache.hadoop.mapred.TaskTracker: task_0001_r_000658_0: Task failed to report status for 1204 seconds. Killing.
> Basically, the handling of the stall has a race condition that leaves the fetcher in a bad state. At the end of the fetch, all of the tasks finish and their results never get handled. When the thread times out, all of the map output copiers are waiting for things to fetch and the prepare thread is waiting for results.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 22:34:46 2006
Return-Path: 
 <hadoop-dev-return-5527-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28956 invoked from network); 1 Dec 2006 22:34:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 22:34:46 -0000
Received: (qmail 45471 invoked by uid 500); 1 Dec 2006 22:34:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45242 invoked by uid 500); 1 Dec 2006 22:34:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45233 invoked by uid 99); 1 Dec 2006 22:34:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:34:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:34:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 222B27142FB
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 14:34:25 -0800 (PST)
Message-ID: <2924319.1165012465137.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 14:34:25 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-728) Map-reduce task does not produce
 correct results when -reducer NONE is specified through streaming
In-Reply-To: <30411461.1163635597099.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-728?page=all ]

Doug Cutting updated HADOOP-728:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.9.0
       Resolution: Fixed

I just committed this.  Thanks, Sanjay!

> Map-reduce task does not produce correct results when -reducer NONE is specified through streaming
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-728
>                 URL: http://issues.apache.org/jira/browse/HADOOP-728
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: dhruba borthakur
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.9.0
>
>         Attachments: Hadoop-728.patch, Hadoop-728_1.patch
>
>
> a) a file is create for the output instead of a directory.
> b) there is no way to understand what is going on from the client output
> I can produce an example for you, if you like -- but the behavior is consistent, so $HSTREAM -mapper /bin/cat -reducer NONE should show the problem
> ~

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 22:34:48 2006
Return-Path: 
 <hadoop-dev-return-5528-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28999 invoked from network); 1 Dec 2006 22:34:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 22:34:48 -0000
Received: (qmail 45534 invoked by uid 500); 1 Dec 2006 22:34:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45511 invoked by uid 500); 1 Dec 2006 22:34:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45502 invoked by uid 99); 1 Dec 2006 22:34:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:34:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:34:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2C35E71430D
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 14:34:27 -0800 (PST)
Message-ID: <20961236.1165012467178.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 14:34:27 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-618) JobProfile and JobSubmissionProtocol
 should be public
In-Reply-To: <24570786.1161364115035.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-618?page=all ]

Owen O'Malley reassigned HADOOP-618:
------------------------------------

    Assignee: Owen O'Malley

> JobProfile and JobSubmissionProtocol should be public
> -----------------------------------------------------
>
>                 Key: HADOOP-618
>                 URL: http://issues.apache.org/jira/browse/HADOOP-618
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Are there any reasons why they are not public?
> Making them public adds a lot of flexibility for the client to interact with the Hadoop.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 22:38:46 2006
Return-Path: 
 <hadoop-dev-return-5529-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29643 invoked from network); 1 Dec 2006 22:38:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 22:38:46 -0000
Received: (qmail 49784 invoked by uid 500); 1 Dec 2006 22:38:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49748 invoked by uid 500); 1 Dec 2006 22:38:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49738 invoked by uid 99); 1 Dec 2006 22:38:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:38:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:38:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 88F7D7142FD
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 14:38:24 -0800 (PST)
Message-ID: <17588137.1165012704558.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 14:38:24 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-571) Path should use URI syntax
In-Reply-To: <6678550.1159825879600.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-571?page=all ]

Doug Cutting updated HADOOP-571:
--------------------------------

    Fix Version/s: 0.9.0

> Path should use URI syntax
> --------------------------
>
>                 Key: HADOOP-571
>                 URL: http://issues.apache.org/jira/browse/HADOOP-571
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>             Fix For: 0.9.0
>
>         Attachments: uri.patch, uri2.patch, uri3.patch
>
>
> The following changes are proposed:
> 1. Add a factory/registry of FileSystem implementations.  Given a protocol, hostname and port, it should be possible to get a FileSystem implementation.
> 2. Path's constructor should accept URI-formatted strings & a configuration.
> 3. A new Path method should be added: FileSystem.getFileSystem().  This returns the filesystem named in the path or the default configured filesystem.
> 4. Most methods which currently take FileSystem and Path parameters can be changed to take only Path.
> 5. Many FileSystem operations (create, open, delete, list, etc.) can become convenience methods on Path.
> 6. A URLStreamHandler can be defined in terms of the FileSystem API, so that URLs for any protocol with a registered FileSystem implementation can be accessed with a java.net.URL, permitting FileSystem implementations to be used on the classpath, etc.
> It is tempting to try to replace Path with java.net.URL, but URL's methods are insufficient for mapreduce.  We require directory listings, random access, location hints, etc., which are not supported by existing URLStreamHandler implementations.  But we can expose all FileSystem implementations for access with java.net.URL.
> (From a brainstorm with Owen.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 22:40:46 2006
Return-Path: 
 <hadoop-dev-return-5530-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30009 invoked from network); 1 Dec 2006 22:40:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 22:40:46 -0000
Received: (qmail 53060 invoked by uid 500); 1 Dec 2006 22:40:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53037 invoked by uid 500); 1 Dec 2006 22:40:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53028 invoked by uid 99); 1 Dec 2006 22:40:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:40:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:40:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 78BEB7142FD
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 14:40:24 -0800 (PST)
Message-ID: <6940414.1165012824492.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 14:40:24 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-571) Path should use URI syntax
In-Reply-To: <6678550.1159825879600.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-571?page=all ]

Doug Cutting updated HADOOP-571:
--------------------------------

    Fix Version/s: 0.10.0

> Path should use URI syntax
> --------------------------
>
>                 Key: HADOOP-571
>                 URL: http://issues.apache.org/jira/browse/HADOOP-571
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: uri.patch, uri2.patch, uri3.patch
>
>
> The following changes are proposed:
> 1. Add a factory/registry of FileSystem implementations.  Given a protocol, hostname and port, it should be possible to get a FileSystem implementation.
> 2. Path's constructor should accept URI-formatted strings & a configuration.
> 3. A new Path method should be added: FileSystem.getFileSystem().  This returns the filesystem named in the path or the default configured filesystem.
> 4. Most methods which currently take FileSystem and Path parameters can be changed to take only Path.
> 5. Many FileSystem operations (create, open, delete, list, etc.) can become convenience methods on Path.
> 6. A URLStreamHandler can be defined in terms of the FileSystem API, so that URLs for any protocol with a registered FileSystem implementation can be accessed with a java.net.URL, permitting FileSystem implementations to be used on the classpath, etc.
> It is tempting to try to replace Path with java.net.URL, but URL's methods are insufficient for mapreduce.  We require directory listings, random access, location hints, etc., which are not supported by existing URLStreamHandler implementations.  But we can expose all FileSystem implementations for access with java.net.URL.
> (From a brainstorm with Owen.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 22:42:46 2006
Return-Path: 
 <hadoop-dev-return-5531-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30516 invoked from network); 1 Dec 2006 22:42:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 22:42:46 -0000
Received: (qmail 55153 invoked by uid 500); 1 Dec 2006 22:42:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54913 invoked by uid 500); 1 Dec 2006 22:42:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54903 invoked by uid 99); 1 Dec 2006 22:42:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:42:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:42:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 635BE7142FD
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 14:42:25 -0800 (PST)
Message-ID: <24026790.1165012945403.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 14:42:25 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-574?page=all ]

Doug Cutting updated HADOOP-574:
--------------------------------

    Affects Version/s: 0.10.0
                           (was: 0.9.0)

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: dependencies.zip, HADOOP-574-v2.patch, HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 22:42:50 2006
Return-Path: 
 <hadoop-dev-return-5532-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30631 invoked from network); 1 Dec 2006 22:42:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 22:42:50 -0000
Received: (qmail 55323 invoked by uid 500); 1 Dec 2006 22:42:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55300 invoked by uid 500); 1 Dec 2006 22:42:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55290 invoked by uid 99); 1 Dec 2006 22:42:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:42:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 14:42:49 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5D0AE7142FC
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 14:42:29 -0800 (PST)
Message-ID: <14016308.1165012949378.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 14:42:29 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-574?page=all ]

Doug Cutting updated HADOOP-574:
--------------------------------

        Fix Version/s: 0.10.0
    Affects Version/s: 0.9.0
                           (was: 0.10.0)

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: dependencies.zip, HADOOP-574-v2.patch, HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  1 23:13:34 2006
Return-Path: 
 <hadoop-dev-return-5533-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38031 invoked from network); 1 Dec 2006 23:13:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 23:13:34 -0000
Received: (qmail 89388 invoked by uid 500); 1 Dec 2006 23:13:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89353 invoked by uid 500); 1 Dec 2006 23:13:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89344 invoked by uid 99); 1 Dec 2006 23:13:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 15:13:42 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 15:13:29 -0800
Received: from [207.126.231.117] (broadcome-dx.corp.yahoo.com
 [207.126.231.117])
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kB1NCvor026217
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Fri, 1 Dec 2006 15:12:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:mime-version:to:subject:
	references:in-reply-to:content-type:content-transfer-encoding;
	b=FObC0if4pNjoz48dlsljuobud7UQjBBWIw7FgexCeKSkBCPWBjwkNXZtAr6gF8Aa
Message-ID: <4570B6F9.50700@yahoo-inc.com>
Date: Fri, 01 Dec 2006 15:12:57 -0800
From: Raghu Angadi <rangadi@yahoo-inc.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: minor change in dataNode handling of multiple directories.
References: <456E284D.3040805@yahoo-inc.com>
 <1bf79d3e0611291803h2b5e3b5dq2992255a00f7f92f@mail.gmail.com>
 <456F1E37.3070706@yahoo-inc.com> <456F2843.4010807@yahoo-inc.com>
In-Reply-To: <456F2843.4010807@yahoo-inc.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Does anyone have a config where some data directories don't exists at 
all? The current datanode does not work in that case. It throws 
IOException. The current code only tolerates if the directory exist but 
could not be locked. Yes, we could decide not throw the exception if the 
directory does not exist.

For now I am just going to keep the same behavior as before.

Raghu.

> Konstantin Shvachko wrote:
>> Good point.
>> I think we should document it (Javadoc?) making it a feature rather 
>> than a side effect.
>>
>> Bryan A. P. Pendleton wrote:
>>
>>> I would prefer this proposal not be implements. The current way 
>>> things work
>>> makes it possible to configure, centrally, a list of all directories 
>>> that
>>> _could_ be used for storage. Since there's no easy way to do per-node
>>> configurations (nor would it be desirable, IMO, in this case), the
>>> directories config ends up being the list of all possibly usable
>>> directories. Many of my cluster nodes are configured using 
>>> "rocksclusters":
>>> they will have a uniform set of mounts created, one for each physical 
>>> drive,
>>> at boot/re-install. If I specify in my config the list of all 
>>> directories up
>>> to the most number of drives a machine will ever have, then I get easy
>>> drop-in use, regardless of variations in nodes in the cluster. I have 
>>> been
>>> relying in the current behavior to keep me sane.
>>>
>>> OTOH, I wouldn't oppose making this the default behavior, with a
>>> configuration param that would set things back to the old behavior.
>>>
>>> On 11/29/06, Raghu Angadi <rangadi@yahoo-inc.com> wrote:
>>>
>>>>
>>>>
>>>> As part of the "Version upgrade" related changes, thinking of strictly
>>>> requiring that datanode be able to lock _all_ the configured 
>>>> directories
>>>> instead of any one of them.
>>>>
>>>> Currently if multiple data directories are specified for a datanode, it
>>>> tries to lock a file is in each of the directories. If it fails to lock
>>>> some of the directories, it will use the directories that it could.
>>>> Looks like this flexibility was included mainly for convenience in
>>>> config file.
>>>>
>>>> This might not affect anyone, let us know of your opinions.
>>>>
>>>> Note that all directories have the same storage id. So each individual
>>>> directory is not complete by itself but a part of one storage.
>>>>
>>>> Raghu.
>>>
> 


From MAILER-DAEMON Fri Dec  1 23:23:44 2006
Return-Path: 
 <hadoop-dev-return-5534-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39941 invoked from network); 1 Dec 2006 23:23:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 23:23:44 -0000
Received: (qmail 99711 invoked by uid 500); 1 Dec 2006 23:23:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99473 invoked by uid 500); 1 Dec 2006 23:23:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99464 invoked by uid 99); 1 Dec 2006 23:23:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 15:23:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 15:23:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 94FF87142EC
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 15:23:23 -0800 (PST)
Message-ID: <13041198.1165015403607.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 15:23:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-451) Add a Split interface
In-Reply-To: <24919314.1155330613896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-451?page=all ]

Owen O'Malley reassigned HADOOP-451:
------------------------------------

    Assignee: Owen O'Malley

> Add a Split interface
> ---------------------
>
>                 Key: HADOOP-451
>                 URL: http://issues.apache.org/jira/browse/HADOOP-451
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Doug Cutting
>         Assigned To: Owen O'Malley
>
> The InputFormat interface has a method:
> FileSplit[] getSplits();
> This should change to:
> Split[] getSplits();
> The Split interface would look like:
> public interface Split extends Writable {
>   /** Returns a list of hosts that contain this split.
>        This is only used to optimize task placement, so this may be empty. */
>   String[] getLocations(FileSystem fs);
>   /** The relative, estimated cost of operating on this.  Typically the size of the data in the split.
>        Used to prioritize tasks in a job (high-cost tasks are run first).  */
>    long getCost();
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec  2 00:30:42 2006
Return-Path: 
 <hadoop-dev-return-5535-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55329 invoked from network); 2 Dec 2006 00:30:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2006 00:30:42 -0000
Received: (qmail 51366 invoked by uid 500); 2 Dec 2006 00:30:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51343 invoked by uid 500); 2 Dec 2006 00:30:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51334 invoked by uid 99); 2 Dec 2006 00:30:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 16:30:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 16:30:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 164DC7142F7
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 16:30:21 -0800 (PST)
Message-ID: <10916275.1165019421088.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 16:30:21 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-774) Datanodes fails to heartbeat when a
 directory with a large number of blocks is deleted
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Datanodes fails to heartbeat when a directory with a large number of blocks is deleted
--------------------------------------------------------------------------------------

                 Key: HADOOP-774
                 URL: http://issues.apache.org/jira/browse/HADOOP-774
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: dhruba borthakur
         Assigned To: dhruba borthakur


If a user removes a few files that are huge, it causes the namenode to send BlockInvalidate command to the relevant Datanodes. The Datanode process the blockInvalidate command as part of its heartbeat thread. If the number of blocks to be invalidated is huge, the datanode takes a long time to process it. This causes the datanode to not send new heartbeats to the namenode. The namenode declares the datanode as dead!

1. One option is to process the blockInvalidate as a separate thread from the heartbeat thread in the Datanode. 
2. Another option would be to constrain the namenode to send a max (e.g. 500) blocks per blockInvalidate message.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec  2 02:10:44 2006
Return-Path: 
 <hadoop-dev-return-5536-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74713 invoked from network); 2 Dec 2006 02:10:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2006 02:10:44 -0000
Received: (qmail 27279 invoked by uid 500); 2 Dec 2006 02:10:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27042 invoked by uid 500); 2 Dec 2006 02:10:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27031 invoked by uid 99); 2 Dec 2006 02:10:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 18:10:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 18:10:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F3B5471429F
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 18:10:22 -0800 (PST)
Message-ID: <2269410.1165025422995.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 18:10:22 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12455068 ] 
            
Yoram Arnon commented on HADOOP-432:
------------------------------------

-yes, trashSize should be kept up to date.
-I don't understand the concept of 'trash dir is full'. It's just a location in dfs - it can't be full if the dfs isn't full.
-when taking out the trash, the idea is to remove the oldest items *only if they're older than mintime*, until the trash size is under maxsize, and then stop. 
-size of the trash may be larger than maxsize if items in the trash are too new.
-if the DFS fills up then normal writes will fail until mintime is reached for some trash items or mintime is decreased, or maxsize is decreased. 

-Perhaps an admin command than clears the trash now would help after a very large one-time deletion of data.

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete.patch, undelete11.patch, undelete12.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec  2 02:42:42 2006
Return-Path: 
 <hadoop-dev-return-5537-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86070 invoked from network); 2 Dec 2006 02:42:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2006 02:42:42 -0000
Received: (qmail 43674 invoked by uid 500); 2 Dec 2006 02:42:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43632 invoked by uid 500); 2 Dec 2006 02:42:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43623 invoked by uid 99); 2 Dec 2006 02:42:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 18:42:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 18:42:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0D4427142EC
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 18:42:21 -0800 (PST)
Message-ID: <16555140.1165027341051.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 18:42:21 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-775) If the tasktracker kills a task it
 cleans up the job directory as well
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If the tasktracker kills a task it cleans up the job directory as well
----------------------------------------------------------------------

                 Key: HADOOP-775
                 URL: http://issues.apache.org/jira/browse/HADOOP-775
             Project: Hadoop
          Issue Type: Bug
            Reporter: Mahadev konar
         Assigned To: Mahadev konar


If the tasktracker kills a task it will clean up the job directory as well. So if other tasks of the same job will later fail saying there is no job.xml or job.jar

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec  2 03:45:43 2006
Return-Path: 
 <hadoop-dev-return-5538-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93953 invoked from network); 2 Dec 2006 03:45:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2006 03:45:43 -0000
Received: (qmail 75025 invoked by uid 500); 2 Dec 2006 03:45:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74995 invoked by uid 500); 2 Dec 2006 03:45:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74986 invoked by uid 99); 2 Dec 2006 03:45:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 19:45:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 19:45:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3D5707142EC
	for <hadoop-dev@lucene.apache.org>; Fri,  1 Dec 2006 19:45:22 -0800 (PST)
Message-ID: <26090946.1165031122248.JavaMail.jira@brutus>
Date: Fri, 1 Dec 2006 19:45:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-774) Datanodes fails to heartbeat when a
 directory with a large number of blocks is deleted
In-Reply-To: <10916275.1165019421088.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-774?page=comments#action_12455071 ] 
            
Doug Cutting commented on HADOOP-774:
-------------------------------------

I like (2), make the namenode limit the number of blocks per blockInvalidate message.

> Datanodes fails to heartbeat when a directory with a large number of blocks is deleted
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-774
>                 URL: http://issues.apache.org/jira/browse/HADOOP-774
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> If a user removes a few files that are huge, it causes the namenode to send BlockInvalidate command to the relevant Datanodes. The Datanode process the blockInvalidate command as part of its heartbeat thread. If the number of blocks to be invalidated is huge, the datanode takes a long time to process it. This causes the datanode to not send new heartbeats to the namenode. The namenode declares the datanode as dead!
> 1. One option is to process the blockInvalidate as a separate thread from the heartbeat thread in the Datanode. 
> 2. Another option would be to constrain the namenode to send a max (e.g. 500) blocks per blockInvalidate message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Dec  3 00:26:11 2006
Return-Path: 
 <hadoop-dev-return-5539-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39415 invoked from network); 3 Dec 2006 00:26:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2006 00:26:11 -0000
Received: (qmail 18584 invoked by uid 500); 3 Dec 2006 00:26:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18562 invoked by uid 500); 3 Dec 2006 00:26:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18552 invoked by uid 99); 3 Dec 2006 00:26:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Dec 2006 16:26:19 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_ID,NO_REAL_NAME,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received: from [140.211.11.75] (HELO lucene.zones.apache.org) (140.211.11.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Dec 2006 16:26:08 -0800
Received: from lucene.zones.apache.org (localhost [127.0.0.1])
	by lucene.zones.apache.org (8.13.7+Sun/8.13.7) with SMTP id kB30Pl67013733
	for <hadoop-dev@lucene.apache.org>; Sun, 3 Dec 2006 00:25:47 GMT
Message-Id: <200612030025.kB30Pl67013733@lucene.zones.apache.org>
Date: Sun, 03 Dec 2006 00:25:47 +0000
Subject: Hadoop nightly build failure
From: hadoop-dev@lucene.apache.org
To: hadoop-dev@lucene.apache.org
X-Mailer: org.apache.tools.mail.MailMessage (ant.apache.org)
X-Virus-Checked: Checked by ClamAV on apache.org


init:
    [mkdir] Created dir: /tmp/hadoop-nightly/build
    [mkdir] Created dir: /tmp/hadoop-nightly/build/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/src
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/task/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/job/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/dfs/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/datanode/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/examples
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/testjar
     [copy] Copying 6 files to /tmp/hadoop-nightly/build/webapps
     [copy] Copying 4 files to /tmp/hadoop-nightly/conf
     [copy] Copying /tmp/hadoop-nightly/conf/slaves.template to /tmp/hadoop-nightly/conf/slaves
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-site.xml.template to /tmp/hadoop-nightly/conf/hadoop-site.xml
     [copy] Copying /tmp/hadoop-nightly/conf/mapred-default.xml.template to /tmp/hadoop-nightly/conf/mapred-default.xml
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-env.sh.template to /tmp/hadoop-nightly/conf/hadoop-env.sh
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: whoami: not found

record-parser:

compile-core-classes:
    [javac] Compiling 259 source files to /tmp/hadoop-nightly/build/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-native:

compile-core:

compile-examples:
    [javac] Compiling 7 source files to /tmp/hadoop-nightly/build/examples
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-test:
    [javac] Compiling 66 source files to /tmp/hadoop-nightly/build/test/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] Compiling 1 source file to /tmp/hadoop-nightly/build/test/testjar
      [jar] Building jar: /tmp/hadoop-nightly/build/test/testjar/testjob.jar
      [jar] Building jar: /tmp/hadoop-nightly/build/hadoop-nightly-test.jar
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache

test-core:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/data
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/logs
    [junit] Running org.apache.hadoop.conf.TestConfiguration
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.373 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSMkdirs
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 8.115 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSShell
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 10.378 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSShellGenericOptions
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 12.525 sec
    [junit] Running org.apache.hadoop.dfs.TestFileCorruption
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 10.368 sec
    [junit] Running org.apache.hadoop.dfs.TestFsck
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 9.617 sec
    [junit] Running org.apache.hadoop.dfs.TestLocalDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 7.904 sec
    [junit] Running org.apache.hadoop.dfs.TestPread
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 10.376 sec
    [junit] Running org.apache.hadoop.dfs.TestReplication
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 24.09 sec
    [junit] Running org.apache.hadoop.dfs.TestRestartDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 18.817 sec
    [junit] Running org.apache.hadoop.dfs.TestSeekBug
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 8.318 sec
    [junit] Running org.apache.hadoop.dfs.TestSmallBlock
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 6.848 sec
    [junit] Running org.apache.hadoop.fs.TestCopyFiles
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 27.508 sec
    [junit] Running org.apache.hadoop.fs.TestDFSIO
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 6.019 sec
    [junit] Running org.apache.hadoop.fs.TestFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.873 sec
    [junit] Running org.apache.hadoop.fs.TestGlobPaths
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 7.246 sec
    [junit] Running org.apache.hadoop.fs.TestLocalFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.276 sec
    [junit] Running org.apache.hadoop.fs.TestPath
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.012 sec
    [junit] Running org.apache.hadoop.io.TestArrayFile
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 3.755 sec
    [junit] Running org.apache.hadoop.io.TestBytesWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.014 sec
    [junit] Running org.apache.hadoop.io.TestMD5Hash
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.354 sec
    [junit] Running org.apache.hadoop.io.TestSequenceFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 18.248 sec
    [junit] Running org.apache.hadoop.io.TestSetFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.72 sec
    [junit] Running org.apache.hadoop.io.TestText
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.809 sec
    [junit] Running org.apache.hadoop.io.TestTextNonUTF8
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.019 sec
    [junit] Running org.apache.hadoop.io.TestUTF8
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.247 sec
    [junit] Running org.apache.hadoop.io.TestVersionedWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.027 sec
    [junit] Running org.apache.hadoop.io.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.01 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodec
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 1.716 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodecFactory
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.35 sec
    [junit] Running org.apache.hadoop.ipc.TestIPC
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.545 sec
    [junit] Running org.apache.hadoop.ipc.TestRPC
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.213 sec
    [junit] Running org.apache.hadoop.mapred.TestEmptyJobWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 14.031 sec
    [junit] Running org.apache.hadoop.mapred.TestMapRed
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 12.951 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRBringup
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.656 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRClasspath
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 30.948 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRDFSCaching
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 29.535 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRLocalFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 63.869 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 153.021 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFilter
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 23.141 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFormat
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 7.909 sec
    [junit] Running org.apache.hadoop.mapred.TestTextInputFormat
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 9.008 sec
    [junit] Running org.apache.hadoop.mapred.jobcontrol.TestJobControl
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 122.458 sec
    [junit] Running org.apache.hadoop.record.test.TestMapRed
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 11.867 sec
    [junit] Running org.apache.hadoop.record.test.TestRecordIO
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.506 sec
    [junit] Running org.apache.hadoop.record.test.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 10.69 sec

test-contrib:

test:

init:
     [echo] contrib: smallJobsBenchmark
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/test/logs
    [mkdir] Created dir: /tmp/hadoop-nightly/build/minimr

init-contrib:

compile:
     [echo] contrib: smallJobsBenchmark
    [javac] Compiling 5 source files to /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: /tmp/hadoop-nightly/src/contrib/smallJobsBenchmark/src/java/org/apache/hadoop/benchmarks/mapred/MultiJobRunner.java uses unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-test:

jar:
      [jar] Building jar: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/MRBenchmark.jar

deploy:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/bin
     [copy] Copying 2 files to /tmp/hadoop-nightly/build/contrib/smallJobsBenchmark/bin

test:

test:

init:
     [echo] contrib: streaming
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming/test/logs

init-contrib:

compile:
     [echo] contrib: streaming
    [javac] Compiling 22 source files to /tmp/hadoop-nightly/build/contrib/streaming/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-test:
     [echo] contrib: streaming
    [javac] Compiling 6 source files to /tmp/hadoop-nightly/build/contrib/streaming/test
    [javac] Note: /tmp/hadoop-nightly/src/contrib/streaming/src/test/org/apache/hadoop/streaming/TestStreamedMerge.java uses or overrides a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: /tmp/hadoop-nightly/src/contrib/streaming/src/test/org/apache/hadoop/streaming/TestStreamedMerge.java uses unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

jar:
      [jar] Building jar: /tmp/hadoop-nightly/build/contrib/streaming/hadoop-streaming.jar

deploy:
     [echo] contrib: streaming
     [copy] Copying 1 file to /tmp/hadoop-nightly/build

hadoopbuildcontrib.test:
     [echo] contrib: streaming
   [delete] Deleting directory /tmp/hadoop-nightly/build/contrib/streaming/test/logs
    [mkdir] Created dir: /tmp/hadoop-nightly/build/contrib/streaming/test/logs
    [junit] Running org.apache.hadoop.streaming.TestStreaming
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 15.958 sec
    [junit] Running org.apache.hadoop.streaming.TestSymLink
    [junit] Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 89.628 sec
    [junit] Test org.apache.hadoop.streaming.TestSymLink FAILED

BUILD FAILED
/tmp/hadoop-nightly/build.xml:394: The following error occurred while executing this line:
/tmp/hadoop-nightly/src/contrib/build.xml:23: The following error occurred while executing this line:
/tmp/hadoop-nightly/src/contrib/streaming/build.xml:25: The following error occurred while executing this line:
/tmp/hadoop-nightly/src/contrib/build-contrib.xml:164: Tests failed!

Total time: 14 minutes 13 seconds



From MAILER-DAEMON Sun Dec  3 14:22:43 2006
Return-Path: 
 <hadoop-dev-return-5540-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64515 invoked from network); 3 Dec 2006 14:22:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2006 14:22:43 -0000
Received: (qmail 45224 invoked by uid 500); 3 Dec 2006 14:22:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44991 invoked by uid 500); 3 Dec 2006 14:22:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44979 invoked by uid 99); 3 Dec 2006 14:22:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 06:22:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 06:22:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0FF5D714310
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Dec 2006 06:22:21 -0800 (PST)
Message-ID: <11714309.1165155741062.JavaMail.jira@brutus>
Date: Sun, 3 Dec 2006 06:22:21 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-776) Task failed with java.io.IOException:
 No valid local directories in property: dfs.client.buffer.dir
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Task failed with java.io.IOException: No valid local directories in property: dfs.client.buffer.dir
---------------------------------------------------------------------------------------------------

                 Key: HADOOP-776
                 URL: http://issues.apache.org/jira/browse/HADOOP-776
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Devaraj Das


In the sort benchmark run, I noticed a reduce task failing with the following error/exception:

java.io.IOException: No valid local directories in property: dfs.client.buffer.dir
	at org.apache.hadoop.conf.Configuration.getFile(Configuration.java:401)
	at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.newBackupFile(DFSClient.java:915)
	at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.(DFSClient.java:905)
	at org.apache.hadoop.dfs.DFSClient.create(DFSClient.java:278)
	at org.apache.hadoop.dfs.DistributedFileSystem.createRaw(DistributedFileSystem.java:106)
	at org.apache.hadoop.fs.FSDataOutputStream$Summer.(FSDataOutputStream.java:58)
	at org.apache.hadoop.fs.FSDataOutputStream.(FSDataOutputStream.java:159)
	at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:283)
	at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:182)

However, another reduce task scheduled on the same node didn't throw any such exception. Maybe this is related to HADOOP-242

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Dec  3 18:35:43 2006
Return-Path: 
 <hadoop-dev-return-5541-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28891 invoked from network); 3 Dec 2006 18:35:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2006 18:35:43 -0000
Received: (qmail 99370 invoked by uid 500); 3 Dec 2006 18:35:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99337 invoked by uid 500); 3 Dec 2006 18:35:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99328 invoked by uid 99); 3 Dec 2006 18:35:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 10:35:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 10:35:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2D57F714316
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Dec 2006 10:35:21 -0800 (PST)
Message-ID: <10727461.1165170921181.JavaMail.jira@brutus>
Date: Sun, 3 Dec 2006 10:35:21 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-777) the tasktracker hostname is not fully
 qualified
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

the tasktracker hostname is not fully qualified
-----------------------------------------------

                 Key: HADOOP-777
                 URL: http://issues.apache.org/jira/browse/HADOOP-777
             Project: Hadoop
          Issue Type: Bug
            Reporter: Mahadev konar
         Assigned To: Mahadev konar
            Priority: Minor
         Attachments: fullyqualified.patch

The hostname of the tasktracker that is passed around in map reduce in all the UI's is not fully qualified. IT would be nice to have all the url's as fully qualified url's.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Dec  3 18:35:44 2006
Return-Path: 
 <hadoop-dev-return-5542-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28930 invoked from network); 3 Dec 2006 18:35:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2006 18:35:44 -0000
Received: (qmail 99644 invoked by uid 500); 3 Dec 2006 18:35:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99617 invoked by uid 500); 3 Dec 2006 18:35:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99604 invoked by uid 99); 3 Dec 2006 18:35:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 10:35:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 10:35:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9FAC3714317
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Dec 2006 10:35:22 -0800 (PST)
Message-ID: <21934324.1165170922649.JavaMail.jira@brutus>
Date: Sun, 3 Dec 2006 10:35:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-777) the tasktracker hostname is not fully
 qualified
In-Reply-To: <10727461.1165170921181.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-777?page=all ]

Mahadev konar updated HADOOP-777:
---------------------------------

    Attachment: fullyqualified.patch

this patch fixes the issue with the hostname of tasktracker being calculated as a fully qualified hostname.

> the tasktracker hostname is not fully qualified
> -----------------------------------------------
>
>                 Key: HADOOP-777
>                 URL: http://issues.apache.org/jira/browse/HADOOP-777
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>         Attachments: fullyqualified.patch
>
>
> The hostname of the tasktracker that is passed around in map reduce in all the UI's is not fully qualified. IT would be nice to have all the url's as fully qualified url's.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Dec  3 18:45:47 2006
Return-Path: 
 <hadoop-dev-return-5543-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31349 invoked from network); 3 Dec 2006 18:45:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2006 18:45:47 -0000
Received: (qmail 16431 invoked by uid 500); 3 Dec 2006 18:45:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16194 invoked by uid 500); 3 Dec 2006 18:45:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16185 invoked by uid 99); 3 Dec 2006 18:45:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 10:45:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 10:45:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5212C714316
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Dec 2006 10:45:22 -0800 (PST)
Message-ID: <28381353.1165171522333.JavaMail.jira@brutus>
Date: Sun, 3 Dec 2006 10:45:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-777) the tasktracker hostname is not fully
 qualified
In-Reply-To: <10727461.1165170921181.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-777?page=all ]

Mahadev konar updated HADOOP-777:
---------------------------------

    Status: Patch Available  (was: Open)

> the tasktracker hostname is not fully qualified
> -----------------------------------------------
>
>                 Key: HADOOP-777
>                 URL: http://issues.apache.org/jira/browse/HADOOP-777
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>         Attachments: fullyqualified.patch
>
>
> The hostname of the tasktracker that is passed around in map reduce in all the UI's is not fully qualified. IT would be nice to have all the url's as fully qualified url's.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Dec  3 19:49:43 2006
Return-Path: 
 <hadoop-dev-return-5544-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43362 invoked from network); 3 Dec 2006 19:49:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2006 19:49:43 -0000
Received: (qmail 59180 invoked by uid 500); 3 Dec 2006 19:49:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58947 invoked by uid 500); 3 Dec 2006 19:49:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58938 invoked by uid 99); 3 Dec 2006 19:49:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 11:49:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 11:49:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 50E87714316
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Dec 2006 11:49:22 -0800 (PST)
Message-ID: <3888057.1165175362328.JavaMail.jira@brutus>
Date: Sun, 3 Dec 2006 11:49:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-775) If the tasktracker kills a task it
 cleans up the job directory as well
In-Reply-To: <16555140.1165027341051.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-775?page=all ]

Mahadev konar updated HADOOP-775:
---------------------------------

    Attachment: jobdirfix.patch

this patch fixes the problem. The job directory is only cleaned up when all the tasks  for the job on the tasktracker have finished (completed or failed).

> If the tasktracker kills a task it cleans up the job directory as well
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-775
>                 URL: http://issues.apache.org/jira/browse/HADOOP-775
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>         Attachments: jobdirfix.patch
>
>
> If the tasktracker kills a task it will clean up the job directory as well. So if other tasks of the same job will later fail saying there is no job.xml or job.jar

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Dec  3 19:49:50 2006
Return-Path: 
 <hadoop-dev-return-5545-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43446 invoked from network); 3 Dec 2006 19:49:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2006 19:49:50 -0000
Received: (qmail 59363 invoked by uid 500); 3 Dec 2006 19:49:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59205 invoked by uid 500); 3 Dec 2006 19:49:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59195 invoked by uid 99); 3 Dec 2006 19:49:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 11:49:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 11:49:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A9D9D714315
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Dec 2006 11:49:23 -0800 (PST)
Message-ID: <22561351.1165175363693.JavaMail.jira@brutus>
Date: Sun, 3 Dec 2006 11:49:23 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-775) If the tasktracker kills a task it
 cleans up the job directory as well
In-Reply-To: <16555140.1165027341051.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-775?page=all ]

Mahadev konar updated HADOOP-775:
---------------------------------

    Status: Patch Available  (was: Open)

> If the tasktracker kills a task it cleans up the job directory as well
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-775
>                 URL: http://issues.apache.org/jira/browse/HADOOP-775
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>         Attachments: jobdirfix.patch
>
>
> If the tasktracker kills a task it will clean up the job directory as well. So if other tasks of the same job will later fail saying there is no job.xml or job.jar

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 05:59:44 2006
Return-Path: 
 <hadoop-dev-return-5546-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68152 invoked from network); 4 Dec 2006 05:59:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 05:59:44 -0000
Received: (qmail 29894 invoked by uid 500); 4 Dec 2006 05:59:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29761 invoked by uid 500); 4 Dec 2006 05:59:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29751 invoked by uid 99); 4 Dec 2006 05:59:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 21:59:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 21:59:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EA32A714317
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Dec 2006 21:59:22 -0800 (PST)
Message-ID: <14744571.1165211962956.JavaMail.jira@brutus>
Date: Sun, 3 Dec 2006 21:59:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-748) the delete in localfilesystem
 traverses symlinks to delete files which is not expected
In-Reply-To: <21932766.1164661223326.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-748?page=all ]

Mahadev konar updated HADOOP-748:
---------------------------------

    Attachment: fullydelete.patch

this patch fixes the issue. This patch uses rm -rf  for FileUtil.fullyDelete(). 

> the delete in localfilesystem traverses symlinks to delete files which is not expected
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-748
>                 URL: http://issues.apache.org/jira/browse/HADOOP-748
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>         Attachments: fullydelete.patch
>
>
> the fullyDelete in FileUtil follows symlinks and deletes all the files in the symlinks. This is unexpected behaviour. Creates issues with caching as well.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 07:17:44 2006
Return-Path: 
 <hadoop-dev-return-5547-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81468 invoked from network); 4 Dec 2006 07:17:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 07:17:44 -0000
Received: (qmail 14128 invoked by uid 500); 4 Dec 2006 07:17:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13899 invoked by uid 500); 4 Dec 2006 07:17:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13890 invoked by uid 99); 4 Dec 2006 07:17:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 23:17:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 23:17:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 443D171431B
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Dec 2006 23:17:22 -0800 (PST)
Message-ID: <12142826.1165216642276.JavaMail.jira@brutus>
Date: Sun, 3 Dec 2006 23:17:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-775) If the tasktracker kills a task it
 cleans up the job directory as well
In-Reply-To: <16555140.1165027341051.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-775?page=comments#action_12455240 ] 
            
Arun C Murthy commented on HADOOP-775:
--------------------------------------

Mahadev, Sanjay reported this first here: HADOOP-737; and HADOOP-639 tries to get this accomplised via directions from the JobTracker to the TaskTracker... can you review HADOOP-639 and check if it meets your needs? If so, we could resolve this issue as a 'duplicate'... thanks!

> If the tasktracker kills a task it cleans up the job directory as well
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-775
>                 URL: http://issues.apache.org/jira/browse/HADOOP-775
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>         Attachments: jobdirfix.patch
>
>
> If the tasktracker kills a task it will clean up the job directory as well. So if other tasks of the same job will later fail saying there is no job.xml or job.jar

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 07:47:43 2006
Return-Path: 
 <hadoop-dev-return-5548-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85099 invoked from network); 4 Dec 2006 07:47:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 07:47:43 -0000
Received: (qmail 41875 invoked by uid 500); 4 Dec 2006 07:47:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41842 invoked by uid 500); 4 Dec 2006 07:47:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41828 invoked by uid 99); 4 Dec 2006 07:47:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 23:47:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 23:47:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 48F1871431A
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Dec 2006 23:47:22 -0800 (PST)
Message-ID: <5921203.1165218442296.JavaMail.jira@brutus>
Date: Sun, 3 Dec 2006 23:47:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-681) Adminstrative hook to pull live nodes
 out of a HDFS cluster
In-Reply-To: <29893636.1162789960338.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-681?page=all ]

dhruba borthakur updated HADOOP-681:
------------------------------------

    Attachment:     (was: nodedecommission2.patch)

> Adminstrative hook to pull live nodes out of a HDFS cluster
> -----------------------------------------------------------
>
>                 Key: HADOOP-681
>                 URL: http://issues.apache.org/jira/browse/HADOOP-681
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> Introduction
> ------------
> An administrator sometimes needs to bring down a datanode for scheduled maintenance. It would be nice if HDFS can be informed about this event. On receipt of this event, HDFS can take steps so that HDFS data is not lost when the node goes down at a later time.
> Architecture
> -----------
> In the existing architecture, a datanode can be in one of two states: dead or alive. A datanode is alive if its heartbeats are being processed by the namenode. Otherwise that datanode is in dead state. We extend the architecture to introduce the concept of a tranquil state for a datanode.
> A datanode is in tranquil state if:
>     - it cannot be a target for replicating any blocks
>     - any block replica that it currently contains does not count towards the target-replication-factor of that block
> Thus, a node that is in tranquil state can be brought down without impacting the guarantees provided by HDFS.
> The tranquil state is not persisted across namenode restarts. If the namenode restarts then that datanode will go back to being in the dead or alive state.
> The datanode is completely transparent to the fact that it has been labeled as being in tranquil state. It can continue to heartbeat and serve read requests for datablocks.
> DFSShell Design
> -----------------------
> We extend the DFS Shell utility to specify a list of nodes to the namenode.
>     hadoop dfs -tranquil {set|clear|get} datanodename1 [,datanodename2]
> The DFSShell utility sends this list to the namenode. This DFSShell command invoked with the "set" option completes when the list is transferred to the namenode. This command is non-blocking; it returns before the datanode is actually in the tranquil state. The client can then query the state by re-issuing the command with the "get" option. This option will indicate whether the datanode is in tranquil state or is "being tranquiled". The "clear" option is used to transition a tranquil datanode to the alive state. The "clear" option is a no-op if the datanode is not in the "tranquil" state.
> ClientProtocol Design
> --------------------
> The ClientProtocol is the protocol exported by the namenode for its client.
> This protocol is extended to incorporate three new methods:
>    ClientProtocol.setTranquil(String[] datanodes)
>    ClientProtocol.getTranquil(String datanode)
>    ClientProtocol.clearTranquil(String[] datanodes)
> The ProtocolVersion is incremented to prevent conversations between imcompatible clients and servers. An old DFSShell cannot talk to the new NameNode and vice-versa.
> NameNode Design
> -------------------------
> The namenode does the bulk of the work for supporting this new feature.
> The DatanodeInfo object has a new private member named "state". It also has three new member functions:
>     datanodeInfo.tranquilStarted(): start the process of tranquilization
>     datanodeInfo.tranquilCompleted(): node is not in tranquil state
>     datanodeInfo.clearTranquil() : remove tranquilization from node
> The namenode exposes a new API to set and clear tranquil states for a datanode. On receipt of a "set tranquil" command, it invokes datanodeInfo.tranquilStarted().
> The FSNamesystem.chooseTarget() method skips over datanodes that are marked as being in the "tranquil" state. This ensures that tranquil-datanodes are never chosen as targets of replication. The namenode does *not* record
> this operation in either the FsImage or the EditLogs.
> The namenode puts all the blocks from a being-tranquiled node into the neededReplication data structure. Necessary code changes are made to ensure that these blocks get replicated by the regular replication method. As of now, the regular replication code does not distinguish between these blocks and the blocks that are replication candidates because some other datanode might have died. It might be prudent to give different (lower?) weightage to this type of replication requests, but that exercise is deferred to a later date. In this design, replication requests generated because of a node going to a tranquil state are not distinguished from replication requests generated by a datanode going to the dead state.
> The DatanodeInfo object has another new private member named "pendingTranquilCount". This field stores the remaining number of blocks that still remain to be replicated. This field is valid only if the node is in the ets being-tranquiled state.  On receipt of every 'n' heartbeats from the being-tranquiled datanode, the namenode calculates the amount of data that is still remaining to be replicated and updates the "pendingTranquilCount". in the DatanodeInfo.When all the replications complete, the datanode is marked as tranquiled. The number 'n' is selected in such a way that the average heartbeat processing time does not increase appreciably.
> It is possible that the namenode might stop receving heartbeats from a datanode that is being-tranquiled. In this case,   the tranquil flag of the datanode gets cleared. It transitions to the dead state and the normal processing for alive-to-dead transition occurs here.
> Web Interface
> -------------------
> The dfshealth.jsp displays the live nodes, dead nodes, being-tranquiled and tranquil nodes. For nodes in the being-tranquiled state, it displays the percentage of tranquilization completed till now.
> Issues
> --------
> 1. If a request for tranquilization starts getting processed and there aren't enough space available in DFS to complete the necessary replication, then that node might remain in the being-tranquiled state for a long long time. This is not necessarily a bad thing but is there a better option?
> 2. We have opted for not storing cluster configuration information in the persistent image of the file system. (The tranquil state of a datanode may be lost if the namenode restarts).
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 07:49:44 2006
Return-Path: 
 <hadoop-dev-return-5549-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85684 invoked from network); 4 Dec 2006 07:49:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 07:49:44 -0000
Received: (qmail 43465 invoked by uid 500); 4 Dec 2006 07:49:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43440 invoked by uid 500); 4 Dec 2006 07:49:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43431 invoked by uid 99); 4 Dec 2006 07:49:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 23:49:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 23:49:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 43B48714319
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Dec 2006 23:49:22 -0800 (PST)
Message-ID: <5997727.1165218562274.JavaMail.jira@brutus>
Date: Sun, 3 Dec 2006 23:49:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-681) Adminstrative hook to pull live nodes
 out of a HDFS cluster
In-Reply-To: <29893636.1162789960338.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-681?page=all ]

dhruba borthakur updated HADOOP-681:
------------------------------------

    Attachment: nodedecommission3.patch

Code changes after incorporating Code review comments. The only outstanding issue left is the issue of changing the fsImage format (to persistent decommissioned state). 

> Adminstrative hook to pull live nodes out of a HDFS cluster
> -----------------------------------------------------------
>
>                 Key: HADOOP-681
>                 URL: http://issues.apache.org/jira/browse/HADOOP-681
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: nodedecommission3.patch
>
>
> Introduction
> ------------
> An administrator sometimes needs to bring down a datanode for scheduled maintenance. It would be nice if HDFS can be informed about this event. On receipt of this event, HDFS can take steps so that HDFS data is not lost when the node goes down at a later time.
> Architecture
> -----------
> In the existing architecture, a datanode can be in one of two states: dead or alive. A datanode is alive if its heartbeats are being processed by the namenode. Otherwise that datanode is in dead state. We extend the architecture to introduce the concept of a tranquil state for a datanode.
> A datanode is in tranquil state if:
>     - it cannot be a target for replicating any blocks
>     - any block replica that it currently contains does not count towards the target-replication-factor of that block
> Thus, a node that is in tranquil state can be brought down without impacting the guarantees provided by HDFS.
> The tranquil state is not persisted across namenode restarts. If the namenode restarts then that datanode will go back to being in the dead or alive state.
> The datanode is completely transparent to the fact that it has been labeled as being in tranquil state. It can continue to heartbeat and serve read requests for datablocks.
> DFSShell Design
> -----------------------
> We extend the DFS Shell utility to specify a list of nodes to the namenode.
>     hadoop dfs -tranquil {set|clear|get} datanodename1 [,datanodename2]
> The DFSShell utility sends this list to the namenode. This DFSShell command invoked with the "set" option completes when the list is transferred to the namenode. This command is non-blocking; it returns before the datanode is actually in the tranquil state. The client can then query the state by re-issuing the command with the "get" option. This option will indicate whether the datanode is in tranquil state or is "being tranquiled". The "clear" option is used to transition a tranquil datanode to the alive state. The "clear" option is a no-op if the datanode is not in the "tranquil" state.
> ClientProtocol Design
> --------------------
> The ClientProtocol is the protocol exported by the namenode for its client.
> This protocol is extended to incorporate three new methods:
>    ClientProtocol.setTranquil(String[] datanodes)
>    ClientProtocol.getTranquil(String datanode)
>    ClientProtocol.clearTranquil(String[] datanodes)
> The ProtocolVersion is incremented to prevent conversations between imcompatible clients and servers. An old DFSShell cannot talk to the new NameNode and vice-versa.
> NameNode Design
> -------------------------
> The namenode does the bulk of the work for supporting this new feature.
> The DatanodeInfo object has a new private member named "state". It also has three new member functions:
>     datanodeInfo.tranquilStarted(): start the process of tranquilization
>     datanodeInfo.tranquilCompleted(): node is not in tranquil state
>     datanodeInfo.clearTranquil() : remove tranquilization from node
> The namenode exposes a new API to set and clear tranquil states for a datanode. On receipt of a "set tranquil" command, it invokes datanodeInfo.tranquilStarted().
> The FSNamesystem.chooseTarget() method skips over datanodes that are marked as being in the "tranquil" state. This ensures that tranquil-datanodes are never chosen as targets of replication. The namenode does *not* record
> this operation in either the FsImage or the EditLogs.
> The namenode puts all the blocks from a being-tranquiled node into the neededReplication data structure. Necessary code changes are made to ensure that these blocks get replicated by the regular replication method. As of now, the regular replication code does not distinguish between these blocks and the blocks that are replication candidates because some other datanode might have died. It might be prudent to give different (lower?) weightage to this type of replication requests, but that exercise is deferred to a later date. In this design, replication requests generated because of a node going to a tranquil state are not distinguished from replication requests generated by a datanode going to the dead state.
> The DatanodeInfo object has another new private member named "pendingTranquilCount". This field stores the remaining number of blocks that still remain to be replicated. This field is valid only if the node is in the ets being-tranquiled state.  On receipt of every 'n' heartbeats from the being-tranquiled datanode, the namenode calculates the amount of data that is still remaining to be replicated and updates the "pendingTranquilCount". in the DatanodeInfo.When all the replications complete, the datanode is marked as tranquiled. The number 'n' is selected in such a way that the average heartbeat processing time does not increase appreciably.
> It is possible that the namenode might stop receving heartbeats from a datanode that is being-tranquiled. In this case,   the tranquil flag of the datanode gets cleared. It transitions to the dead state and the normal processing for alive-to-dead transition occurs here.
> Web Interface
> -------------------
> The dfshealth.jsp displays the live nodes, dead nodes, being-tranquiled and tranquil nodes. For nodes in the being-tranquiled state, it displays the percentage of tranquilization completed till now.
> Issues
> --------
> 1. If a request for tranquilization starts getting processed and there aren't enough space available in DFS to complete the necessary replication, then that node might remain in the being-tranquiled state for a long long time. This is not necessarily a bad thing but is there a better option?
> 2. We have opted for not storing cluster configuration information in the persistent image of the file system. (The tranquil state of a datanode may be lost if the namenode restarts).
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 07:55:30 2006
Return-Path: 
 <hadoop-dev-return-5550-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86763 invoked from network); 4 Dec 2006 07:55:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 07:55:30 -0000
Received: (qmail 51285 invoked by uid 500); 4 Dec 2006 07:55:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51051 invoked by uid 500); 4 Dec 2006 07:55:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51042 invoked by uid 99); 4 Dec 2006 07:55:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 23:55:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 23:55:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0941571431B
	for <hadoop-dev@lucene.apache.org>; Sun,  3 Dec 2006 23:54:23 -0800 (PST)
Message-ID: <26123617.1165218863035.JavaMail.jira@brutus>
Date: Sun, 3 Dec 2006 23:54:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-756?page=comments#action_12455245 ] 
            
dhruba borthakur commented on HADOOP-756:
-----------------------------------------

Hi Owen, 

Can you pl give me some background regarding this issue? Can we achieve your required objective by implementing a simple polling loop outside HDFS?

thanks,
dhruba

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Sameer Paranjpye
>            Priority: Minor
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 08:03:44 2006
Return-Path: 
 <hadoop-dev-return-5551-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88298 invoked from network); 4 Dec 2006 08:03:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 08:03:44 -0000
Received: (qmail 60726 invoked by uid 500); 4 Dec 2006 08:03:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60532 invoked by uid 500); 4 Dec 2006 08:03:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60523 invoked by uid 99); 4 Dec 2006 08:03:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:03:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:03:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6944571431A
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 00:03:22 -0800 (PST)
Message-ID: <24770241.1165219402428.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 00:03:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-775) If the tasktracker kills a task it
 cleans up the job directory as well
In-Reply-To: <16555140.1165027341051.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-775?page=comments#action_12455246 ] 
            
Mahadev konar commented on HADOOP-775:
--------------------------------------

thanks for pointing it out arun. I should have goen thorugh the bugs before filing and fixing it :).  I just read went through the patch for HADOOP-639. It does seem to solve the problem. We can mark this one as duplicate. 

> If the tasktracker kills a task it cleans up the job directory as well
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-775
>                 URL: http://issues.apache.org/jira/browse/HADOOP-775
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>         Attachments: jobdirfix.patch
>
>
> If the tasktracker kills a task it will clean up the job directory as well. So if other tasks of the same job will later fail saying there is no job.xml or job.jar

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 08:03:50 2006
Return-Path: 
 <hadoop-dev-return-5552-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88420 invoked from network); 4 Dec 2006 08:03:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 08:03:50 -0000
Received: (qmail 61197 invoked by uid 500); 4 Dec 2006 08:03:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61171 invoked by uid 500); 4 Dec 2006 08:03:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61145 invoked by uid 99); 4 Dec 2006 08:03:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:03:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:03:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9928371431E
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 00:03:26 -0800 (PST)
Message-ID: <17328224.1165219406624.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 00:03:26 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-746) CRC computation and reading should
 move into a nested FileSystem
In-Reply-To: <3687865.1164239642025.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-746?page=comments#action_12455248 ] 
            
dhruba borthakur commented on HADOOP-746:
-----------------------------------------

Please allow me to see if I can sum up the ideas and try to arrive at a consensus:

1. There is a CRC that is computed and used internally by HDFS. HDFS computes this CRC per each block of the file. No files with *.crc are created in the namespace. 

2. HDFS exposes an API that allows an application to retrieve the CRC of each block of an HDFS file.

3. HDFS exposes another API that an application can use to switch off CRC usage and calculation by HDFS.



 

> CRC computation and reading should move into a nested FileSystem
> ----------------------------------------------------------------
>
>                 Key: HADOOP-746
>                 URL: http://issues.apache.org/jira/browse/HADOOP-746
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>
> Currently FileSystem provides both an interface and a mechanism for computing and checking crc files. I propose splitting the crc code into a nestable FileSystem that like the PhasedFileSystem has a backing FileSystem. Once the Paths are converted to URI, this is fairly natural to express. To use crc files, your uris will look like:
> crc://hdfs:%2f%2fhost1:8020/ which is a crc FileSystem with an underlying file system of hdfs://host1:8020
> This will allow users to use crc files where they make sense for their application/cluster and get rid of the "raw" methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 08:05:54 2006
Return-Path: 
 <hadoop-dev-return-5553-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88948 invoked from network); 4 Dec 2006 08:05:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 08:05:54 -0000
Received: (qmail 65182 invoked by uid 500); 4 Dec 2006 08:05:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65156 invoked by uid 500); 4 Dec 2006 08:05:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65076 invoked by uid 99); 4 Dec 2006 08:05:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:05:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:05:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2473B714319
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 00:05:23 -0800 (PST)
Message-ID: <22644757.1165219523146.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 00:05:23 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-639?page=comments#action_12455249 ] 
            
Mahadev konar commented on HADOOP-639:
--------------------------------------

I just went through the patch.. I had a qeustion regarding the patch... it seems like the JOB_KILL action is sent per task from the JobTracker to TaskTracker? (just had a glance so might be wrong).. If yes, shouldnt we be just sending one action per job from the jobtracker to tasktracker ? since we already have a list of job -> tasks_executed_on_tasktracker in the tasktracker itself? 

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-639_1.patch, HADOOP-639_2_20061130.patch, HADOOP-639_3_20061201.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 08:08:44 2006
Return-Path: 
 <hadoop-dev-return-5554-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89275 invoked from network); 4 Dec 2006 08:08:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 08:08:44 -0000
Received: (qmail 68655 invoked by uid 500); 4 Dec 2006 08:08:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68426 invoked by uid 500); 4 Dec 2006 08:08:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68417 invoked by uid 99); 4 Dec 2006 08:08:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:08:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:08:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 03825714319
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 00:08:23 -0800 (PST)
Message-ID: <17360319.1165219703011.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 00:08:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-621) When a dfs -cat command is killed by
 the user, the correspondig hadoop process does not get aborted
In-Reply-To: <11382556.1161379656653.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-621?page=all ]

dhruba borthakur reassigned HADOOP-621:
---------------------------------------

    Assignee: dhruba borthakur

> When a dfs -cat command is killed by the user, the correspondig hadoop process does not get aborted
> ---------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-621
>                 URL: http://issues.apache.org/jira/browse/HADOOP-621
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>            Priority: Minor
>
> if I use hadoop dfs -cat  in a pipeline, and kill the consumer of -cat output, the hadoop process stays alive.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 08:15:44 2006
Return-Path: 
 <hadoop-dev-return-5555-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90260 invoked from network); 4 Dec 2006 08:15:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 08:15:44 -0000
Received: (qmail 74072 invoked by uid 500); 4 Dec 2006 08:15:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74044 invoked by uid 500); 4 Dec 2006 08:15:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74035 invoked by uid 99); 4 Dec 2006 08:15:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:15:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:15:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0978F714319
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 00:15:23 -0800 (PST)
Message-ID: <29949844.1165220123035.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 00:15:23 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-639?page=comments#action_12455251 ] 
            
Mahadev konar commented on HADOOP-639:
--------------------------------------

sorry I meant TASK_KILL_ACTION is sent per task... 

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-639_1.patch, HADOOP-639_2_20061130.patch, HADOOP-639_3_20061201.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 08:28:51 2006
Return-Path: 
 <hadoop-dev-return-5556-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98500 invoked from network); 4 Dec 2006 08:28:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 08:28:51 -0000
Received: (qmail 84373 invoked by uid 500); 4 Dec 2006 08:28:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84345 invoked by uid 500); 4 Dec 2006 08:28:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84306 invoked by uid 99); 4 Dec 2006 08:28:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:28:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:28:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6E43271431A
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 00:28:22 -0800 (PST)
Message-ID: <12776346.1165220902449.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 00:28:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-775) If the tasktracker kills a task it
 cleans up the job directory as well
In-Reply-To: <16555140.1165027341051.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-775?page=all ]

Mahadev konar updated HADOOP-775:
---------------------------------

    Status: Open  (was: Patch Available)

> If the tasktracker kills a task it cleans up the job directory as well
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-775
>                 URL: http://issues.apache.org/jira/browse/HADOOP-775
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>         Attachments: jobdirfix.patch
>
>
> If the tasktracker kills a task it will clean up the job directory as well. So if other tasks of the same job will later fail saying there is no job.xml or job.jar

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 09:12:45 2006
Return-Path: 
 <hadoop-dev-return-5557-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15200 invoked from network); 4 Dec 2006 09:12:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 09:12:45 -0000
Received: (qmail 23778 invoked by uid 500); 4 Dec 2006 09:12:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23548 invoked by uid 500); 4 Dec 2006 09:12:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23539 invoked by uid 99); 4 Dec 2006 09:12:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 01:12:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 01:12:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0B86E7141D1
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 01:12:23 -0800 (PST)
Message-ID: <24881665.1165223543044.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 01:12:23 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-639?page=comments#action_12455258 ] 
            
Arun C Murthy commented on HADOOP-639:
--------------------------------------

Mahadev, TASK_KILL_ACTION has to be sent per task right? The same job could have multiple map/reduce task running on the same TaskTracker... or am I missing something here?


> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-639_1.patch, HADOOP-639_2_20061130.patch, HADOOP-639_3_20061201.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 13:44:45 2006
Return-Path: 
 <hadoop-dev-return-5558-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18018 invoked from network); 4 Dec 2006 13:44:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 13:44:45 -0000
Received: (qmail 87227 invoked by uid 500); 4 Dec 2006 13:44:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87190 invoked by uid 500); 4 Dec 2006 13:44:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87176 invoked by uid 99); 4 Dec 2006 13:44:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 05:44:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 05:44:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E56DC7142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 05:44:22 -0800 (PST)
Message-ID: <33177025.1165239862937.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 05:44:22 -0800 (PST)
From: "Jiang Lei (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-662) dfs -ls sometime prints "Found xxx
 items"; sometimes it does not print that string
In-Reply-To: <15693634.1162340057836.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-662?page=comments#action_12455307 ] 
            
Jiang Lei commented on HADOOP-662:
----------------------------------

What's your command line ? 
If you use command like "bin/hadoop dfs -ls *txt" , I think the bash will substitute the *.txt with the files who match the pattern in your current directory.
I think you can try to quot your pattern string with quotation marks. 
For instance: 
bin/hadoop dfs -ls "*txt"

> dfs -ls sometime prints "Found xxx items"; sometimes it does not print that string
> ----------------------------------------------------------------------------------
>
>                 Key: HADOOP-662
>                 URL: http://issues.apache.org/jira/browse/HADOOP-662
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>            Priority: Minor
>
> I get a different response from dfs -ls depending on whether or not the 
> ls contained a directory or a wildcard. The wild card misses the 
> response that tells me how many files.
> It did indeed cause a problem with my scripts. It was easy to filter 
> out. If it's a desired action to do it sometimes and others then that's 
> it's ok. It doesn't seem like this is really the intention so I pointed 
> it out. My script is now happy with both forms. I do really on the fact 
> that the 3 column of the output is the file size. Perhaps I shouldn't be 
> doing this but I am writing some automated scripts in python to drive 
> hadoop so it is useful to check file sizes. If you were to provide a 
> format string that would allow me to place the items in a specific 
> format then you would be free to change it, whenever, however, you wanted.
> -Richard

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 14:10:45 2006
Return-Path: 
 <hadoop-dev-return-5559-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27517 invoked from network); 4 Dec 2006 14:10:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 14:10:45 -0000
Received: (qmail 29349 invoked by uid 500); 4 Dec 2006 14:10:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29317 invoked by uid 500); 4 Dec 2006 14:10:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29301 invoked by uid 99); 4 Dec 2006 14:10:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 06:10:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 06:10:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4816F7142D7
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 06:10:23 -0800 (PST)
Message-ID: <17250138.1165241423292.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 06:10:23 -0800 (PST)
From: "Jiang Lei (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-662) dfs -ls sometime prints "Found xxx
 items"; sometimes it does not print that string
In-Reply-To: <15693634.1162340057836.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-662?page=comments#action_12455311 ] 
            
Jiang Lei commented on HADOOP-662:
----------------------------------

Oh, I understand exactly what you mean.  There are two virables( !recursive && printHeader) to control wheather print the "Found xxx items". I'll mail the author: Mike Cafarella for detail.  
-Jianglei

> dfs -ls sometime prints "Found xxx items"; sometimes it does not print that string
> ----------------------------------------------------------------------------------
>
>                 Key: HADOOP-662
>                 URL: http://issues.apache.org/jira/browse/HADOOP-662
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>            Priority: Minor
>
> I get a different response from dfs -ls depending on whether or not the 
> ls contained a directory or a wildcard. The wild card misses the 
> response that tells me how many files.
> It did indeed cause a problem with my scripts. It was easy to filter 
> out. If it's a desired action to do it sometimes and others then that's 
> it's ok. It doesn't seem like this is really the intention so I pointed 
> it out. My script is now happy with both forms. I do really on the fact 
> that the 3 column of the output is the file size. Perhaps I shouldn't be 
> doing this but I am writing some automated scripts in python to drive 
> hadoop so it is useful to check file sizes. If you were to provide a 
> format string that would allow me to place the items in a specific 
> format then you would be free to change it, whenever, however, you wanted.
> -Richard

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 15:33:45 2006
Return-Path: 
 <hadoop-dev-return-5560-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67871 invoked from network); 4 Dec 2006 15:33:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 15:33:45 -0000
Received: (qmail 4180 invoked by uid 500); 4 Dec 2006 15:33:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4114 invoked by uid 500); 4 Dec 2006 15:33:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4098 invoked by uid 99); 4 Dec 2006 15:33:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 07:33:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 07:33:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3A7BA7142F5
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 07:33:22 -0800 (PST)
Message-ID: <32880828.1165246402236.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 07:33:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-777) the tasktracker hostname is not
 fully qualified
In-Reply-To: <10727461.1165170921181.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-777?page=comments#action_12455329 ] 
            
Hadoop QA commented on HADOOP-777:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346299/fullyqualified.patch applied and successfully tested against trunk revision 482213

> the tasktracker hostname is not fully qualified
> -----------------------------------------------
>
>                 Key: HADOOP-777
>                 URL: http://issues.apache.org/jira/browse/HADOOP-777
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>         Attachments: fullyqualified.patch
>
>
> The hostname of the tasktracker that is passed around in map reduce in all the UI's is not fully qualified. IT would be nice to have all the url's as fully qualified url's.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 17:12:46 2006
Return-Path: 
 <hadoop-dev-return-5561-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3767 invoked from network); 4 Dec 2006 17:12:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 17:12:46 -0000
Received: (qmail 23377 invoked by uid 500); 4 Dec 2006 17:12:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23352 invoked by uid 500); 4 Dec 2006 17:12:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23343 invoked by uid 99); 4 Dec 2006 17:12:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 09:12:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 09:12:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F292B7142E1
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 09:12:24 -0800 (PST)
Message-ID: <6927522.1165252344990.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 09:12:24 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-476) Streaming should check for
 correctness of the task
In-Reply-To: <20801208.1156462750189.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-476?page=comments#action_12455355 ] 
            
Sanjay Dahiya commented on HADOOP-476:
--------------------------------------

Moved input path ( glob pattern ) checks and errors to JobClient as part of HADOOP-619 and removed from streaming. Also job client converts the patterns into actual files and writes back to jobconf . InputFormatBase is changed to accept files as input also. Will submit the patch in a while. 
comments ? 

> Streaming should check for correctness of the task
> --------------------------------------------------
>
>                 Key: HADOOP-476
>                 URL: http://issues.apache.org/jira/browse/HADOOP-476
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>         Assigned To: Sanjay Dahiya
>
> Currently, if anythin is wrong with streaming job, it dies without any explanation.
> Before creating and running actual MapReduce job, Streaming should check if:
> -- the executables (or scripts) for -mapper and -reducer are available and have right permissions
> -- the input fragments exist

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 17:36:52 2006
Return-Path: 
 <hadoop-dev-return-5562-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14224 invoked from network); 4 Dec 2006 17:36:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 17:36:52 -0000
Received: (qmail 61274 invoked by uid 500); 4 Dec 2006 17:36:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61238 invoked by uid 500); 4 Dec 2006 17:36:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61187 invoked by uid 99); 4 Dec 2006 17:36:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 09:36:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 09:36:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 172C17142D7
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 09:36:23 -0800 (PST)
Message-ID: <11520655.1165253783092.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 09:36:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-756?page=comments#action_12455362 ] 
            
Owen O'Malley commented on HADOOP-756:
--------------------------------------

Of course you could write a loop in each script that needs to do this, but it seems like a pretty common wish. You don't really want to start up map/reduce clusters until the underlying hdfs is ready. It should be a couple of lines to add the functionality.

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Sameer Paranjpye
>            Priority: Minor
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 18:13:43 2006
Return-Path: 
 <hadoop-dev-return-5563-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26128 invoked from network); 4 Dec 2006 18:13:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 18:13:43 -0000
Received: (qmail 24141 invoked by uid 500); 4 Dec 2006 18:13:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24114 invoked by uid 500); 4 Dec 2006 18:13:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24105 invoked by uid 99); 4 Dec 2006 18:13:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 10:13:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 10:13:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4317E7142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 10:13:22 -0800 (PST)
Message-ID: <28625815.1165256002272.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 10:13:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-774) Datanodes fails to heartbeat when a
 directory with a large number of blocks is deleted
In-Reply-To: <10916275.1165019421088.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-774?page=comments#action_12455370 ] 
            
dhruba borthakur commented on HADOOP-774:
-----------------------------------------

1. Option 2 is simple to implement, very few code change.

2. The namenode migth not have detailed knowledge about the computing resources of a Datanode. A Datanode that has a faster disk could process a blockinvalidate message faster than a datanode that has slower disk IO speeds. Thus it is best left to the datanodes to figure out the amount of computing power they want to spend on deleting blocks. This votes for Option 1.

2, Option 1 seems to be scalable because the namenode has to do bookkeeping for invalidatedNodes for lesser time. The namenode, once its sends out the blockInvalidate command, can get rid of the blocks from the recentInvalidateSets map immediately. This might mean that this piece of memory can be reused earlier. If the namenode adopts Option 2, it might take a while before all the blocks get sent to the Datanode. The memory for these block objects will hang around longer.

3. With Option1, the speed of blockinvalidation depends on the heartbeat frequency. Thus changing the heartbeat frequency might have an unintended side-effect on the block reclamation speed of the cluster.

4. Option 2 has the disadvantage that the Datanode has to throttle the creation of new threads (and queue if needed) if too-many individual block-invalidate commands arrive within a short period of time. This code might be non-trivial.

Given the above, I would go ahead and implement Option 2.

> Datanodes fails to heartbeat when a directory with a large number of blocks is deleted
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-774
>                 URL: http://issues.apache.org/jira/browse/HADOOP-774
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> If a user removes a few files that are huge, it causes the namenode to send BlockInvalidate command to the relevant Datanodes. The Datanode process the blockInvalidate command as part of its heartbeat thread. If the number of blocks to be invalidated is huge, the datanode takes a long time to process it. This causes the datanode to not send new heartbeats to the namenode. The namenode declares the datanode as dead!
> 1. One option is to process the blockInvalidate as a separate thread from the heartbeat thread in the Datanode. 
> 2. Another option would be to constrain the namenode to send a max (e.g. 500) blocks per blockInvalidate message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 18:34:44 2006
Return-Path: 
 <hadoop-dev-return-5564-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37150 invoked from network); 4 Dec 2006 18:34:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 18:34:44 -0000
Received: (qmail 63282 invoked by uid 500); 4 Dec 2006 18:34:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63243 invoked by uid 500); 4 Dec 2006 18:34:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63234 invoked by uid 99); 4 Dec 2006 18:34:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 10:34:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 10:34:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 326BC7141E4
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 10:34:23 -0800 (PST)
Message-ID: <13999969.1165257263203.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 10:34:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-756?page=comments#action_12455382 ] 
            
dhruba borthakur commented on HADOOP-756:
-----------------------------------------

Ok, then i will create a new dfsadmin. Currently we have a command of the following type:

bin/hadoop dfsadmin -safemode [get][set][clear]

I am going to add another option:

bin/hadoop dfsadmin -safemode [get][set][clear][wait]

The [wait] option will cause the command to block till HDFS exists safemode. Internally, the DFSAdmin class will use a while-sleep-poll loop to wait.

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Sameer Paranjpye
>            Priority: Minor
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 18:34:46 2006
Return-Path: 
 <hadoop-dev-return-5565-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37196 invoked from network); 4 Dec 2006 18:34:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 18:34:46 -0000
Received: (qmail 63549 invoked by uid 500); 4 Dec 2006 18:34:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63513 invoked by uid 500); 4 Dec 2006 18:34:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63504 invoked by uid 99); 4 Dec 2006 18:34:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 10:34:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 10:34:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 404FD7142D7
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 10:34:25 -0800 (PST)
Message-ID: <32337208.1165257265261.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 10:34:25 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-639?page=comments#action_12455383 ] 
            
Mahadev konar commented on HADOOP-639:
--------------------------------------

Arun, I meant ... the following:

The jobtracker should send the following two messages:

1) KILL_TASK-- which is per task message... and this one kills any task and cleans it up

2) THe other one I mentioned is the one when the JobTracker decides that a job has finished/failed and wants all the tasktrackers to cleanup. In this case we could just send a jobid and cleanup message from the Jobtracker to tasktracker since we have a mapping of jobID --> TIP_EXECUTED_OR_RUNNING on a tasktracker. So we do not need to send cleanup messages for all tasks at the end of job finish/fail. 

It is the second one that I was talking about in my previous comments.

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-639_1.patch, HADOOP-639_2_20061130.patch, HADOOP-639_3_20061201.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 18:39:44 2006
Return-Path: 
 <hadoop-dev-return-5566-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40142 invoked from network); 4 Dec 2006 18:39:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 18:39:44 -0000
Received: (qmail 73486 invoked by uid 500); 4 Dec 2006 18:39:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73262 invoked by uid 500); 4 Dec 2006 18:39:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73253 invoked by uid 99); 4 Dec 2006 18:39:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 10:39:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 10:39:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5C1E47142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 10:39:22 -0800 (PST)
Message-ID: <21595267.1165257562374.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 10:39:22 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-774) Datanodes fails to heartbeat when a
 directory with a large number of blocks is deleted
In-Reply-To: <10916275.1165019421088.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-774?page=comments#action_12455384 ] 
            
Raghu Angadi commented on HADOOP-774:
-------------------------------------

I think (1) is simpler, from namenode point of view.

One modification for (1) is that, Datanode should first delete the mapping inline and queue the physical file deletion on a separate thread.  This is required so that Datanode does not send the already invalidated blocks in in its next heartbeat.

Of course,  datanode should not create one thread for each RPC call. It could delete them inline if the number is small (say < 20), otherwise queue them up to be deleted by a thread (It will create one if one does not exist). The thread exits if there are no files to be deleted.


> Datanodes fails to heartbeat when a directory with a large number of blocks is deleted
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-774
>                 URL: http://issues.apache.org/jira/browse/HADOOP-774
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> If a user removes a few files that are huge, it causes the namenode to send BlockInvalidate command to the relevant Datanodes. The Datanode process the blockInvalidate command as part of its heartbeat thread. If the number of blocks to be invalidated is huge, the datanode takes a long time to process it. This causes the datanode to not send new heartbeats to the namenode. The namenode declares the datanode as dead!
> 1. One option is to process the blockInvalidate as a separate thread from the heartbeat thread in the Datanode. 
> 2. Another option would be to constrain the namenode to send a max (e.g. 500) blocks per blockInvalidate message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 19:22:43 2006
Return-Path: 
 <hadoop-dev-return-5567-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63776 invoked from network); 4 Dec 2006 19:22:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 19:22:43 -0000
Received: (qmail 65912 invoked by uid 500); 4 Dec 2006 19:22:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65889 invoked by uid 500); 4 Dec 2006 19:22:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65880 invoked by uid 99); 4 Dec 2006 19:22:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 11:22:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 11:22:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 451687142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 11:22:22 -0800 (PST)
Message-ID: <123276.1165260142280.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 11:22:22 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-769) Error in crc file after a
 FileSystem.rename operation.
In-Reply-To: <16733904.1164917301323.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-769?page=all ]

Sanjay Dahiya resolved HADOOP-769.
----------------------------------

    Resolution: Later

This problem is not appearing anymore, I presume it was something to do with file closing. 
Marking resolved. 

> Error in crc file after a FileSystem.rename operation.
> ------------------------------------------------------
>
>                 Key: HADOOP-769
>                 URL: http://issues.apache.org/jira/browse/HADOOP-769
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Sanjay Dahiya
>
> I am not sure whats going wrong here but after a file rename operation on a bunch of files, I am losing crc files in the destination directory. It causes exceptions when doing dfs -get or any other operation on the file. 
> I added some prints and it seems renameRaw() is called on checksum file but its not created in target path. There are no errors in namenode logs also. 
> I will debug this further and more details if i find any. 
> FileSystem.java:386 
> -------
>       Path checkFile = getChecksumFile(src);
>         if (exists(checkFile)) { //try to rename checksum
>           if(isDirectory(dst)) {
>             renameRaw(checkFile, dst);
>           } else {
>             renameRaw(checkFile, getChecksumFile(dst));                    <=== This is executed. 
>           }
>         }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 20:23:52 2006
Return-Path: 
 <hadoop-dev-return-5568-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 620 invoked from network); 4 Dec 2006 20:23:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 20:23:52 -0000
Received: (qmail 16596 invoked by uid 500); 4 Dec 2006 20:23:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16573 invoked by uid 500); 4 Dec 2006 20:23:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16559 invoked by uid 99); 4 Dec 2006 20:23:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 12:23:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 12:23:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F2EF07142EC
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 12:23:23 -0800 (PST)
Message-ID: <27040464.1165263803992.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 12:23:23 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-774) Datanodes fails to heartbeat when a
 directory with a large number of blocks is deleted
In-Reply-To: <10916275.1165019421088.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-774?page=comments#action_12455413 ] 
            
Konstantin Shvachko commented on HADOOP-774:
--------------------------------------------

+1 for option 2.
Making it conifgurable would be good too.
This btw does not exclude option 1 in the future.

> Datanodes fails to heartbeat when a directory with a large number of blocks is deleted
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-774
>                 URL: http://issues.apache.org/jira/browse/HADOOP-774
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> If a user removes a few files that are huge, it causes the namenode to send BlockInvalidate command to the relevant Datanodes. The Datanode process the blockInvalidate command as part of its heartbeat thread. If the number of blocks to be invalidated is huge, the datanode takes a long time to process it. This causes the datanode to not send new heartbeats to the namenode. The namenode declares the datanode as dead!
> 1. One option is to process the blockInvalidate as a separate thread from the heartbeat thread in the Datanode. 
> 2. Another option would be to constrain the namenode to send a max (e.g. 500) blocks per blockInvalidate message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 20:57:44 2006
Return-Path: 
 <hadoop-dev-return-5569-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15058 invoked from network); 4 Dec 2006 20:57:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 20:57:44 -0000
Received: (qmail 72158 invoked by uid 500); 4 Dec 2006 20:57:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71914 invoked by uid 500); 4 Dec 2006 20:57:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71902 invoked by uid 99); 4 Dec 2006 20:57:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 12:57:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 12:57:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 01F6F7142D7
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 12:57:23 -0800 (PST)
Message-ID: <6975937.1165265843005.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 12:57:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-621) When a dfs -cat command is killed by
 the user, the correspondig hadoop process does not get aborted
In-Reply-To: <11382556.1161379656653.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-621?page=all ]

dhruba borthakur updated HADOOP-621:
------------------------------------

    Attachment: pipecheck.patch

When a DFSShell is writing the output of a cat() command to System.out, check if the output stream has encountered an error.

> When a dfs -cat command is killed by the user, the correspondig hadoop process does not get aborted
> ---------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-621
>                 URL: http://issues.apache.org/jira/browse/HADOOP-621
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: pipecheck.patch
>
>
> if I use hadoop dfs -cat  in a pipeline, and kill the consumer of -cat output, the hadoop process stays alive.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 20:59:44 2006
Return-Path: 
 <hadoop-dev-return-5570-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15768 invoked from network); 4 Dec 2006 20:59:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 20:59:44 -0000
Received: (qmail 73554 invoked by uid 500); 4 Dec 2006 20:59:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73320 invoked by uid 500); 4 Dec 2006 20:59:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73311 invoked by uid 99); 4 Dec 2006 20:59:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 12:59:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 12:59:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0A0CF7142EC
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 12:59:23 -0800 (PST)
Message-ID: <13807642.1165265963037.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 12:59:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-621) When a dfs -cat command is killed by
 the user, the correspondig hadoop process does not get aborted
In-Reply-To: <11382556.1161379656653.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-621?page=all ]

dhruba borthakur updated HADOOP-621:
------------------------------------

    Status: Patch Available  (was: Open)

> When a dfs -cat command is killed by the user, the correspondig hadoop process does not get aborted
> ---------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-621
>                 URL: http://issues.apache.org/jira/browse/HADOOP-621
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: pipecheck.patch
>
>
> if I use hadoop dfs -cat  in a pipeline, and kill the consumer of -cat output, the hadoop process stays alive.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 21:24:44 2006
Return-Path: 
 <hadoop-dev-return-5571-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23404 invoked from network); 4 Dec 2006 21:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 21:24:44 -0000
Received: (qmail 16179 invoked by uid 500); 4 Dec 2006 21:24:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15941 invoked by uid 500); 4 Dec 2006 21:24:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15931 invoked by uid 99); 4 Dec 2006 21:24:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 13:24:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 13:24:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E1AD07141E4
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 13:24:22 -0800 (PST)
Message-ID: <26403274.1165267462921.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 13:24:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-621) When a dfs -cat command is killed by
 the user, the correspondig hadoop process does not get aborted
In-Reply-To: <11382556.1161379656653.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-621?page=comments#action_12455424 ] 
            
Hadoop QA commented on HADOOP-621:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346373/pipecheck.patch applied and successfully tested against trunk revision 482358

> When a dfs -cat command is killed by the user, the correspondig hadoop process does not get aborted
> ---------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-621
>                 URL: http://issues.apache.org/jira/browse/HADOOP-621
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: pipecheck.patch
>
>
> if I use hadoop dfs -cat  in a pipeline, and kill the consumer of -cat output, the hadoop process stays alive.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 21:52:22 2006
Return-Path: 
 <hadoop-dev-return-5572-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32212 invoked from network); 4 Dec 2006 21:52:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 21:52:22 -0000
Received: (qmail 72455 invoked by uid 500); 4 Dec 2006 21:52:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72421 invoked by uid 500); 4 Dec 2006 21:52:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72412 invoked by uid 99); 4 Dec 2006 21:52:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 13:52:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.133.162.98] (HELO linuxfly.dragonflymc.com) (63.133.162.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 13:52:19 -0800
Received: from [192.168.1.246] (bigfly.visvo.com [192.168.1.246])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id 9D78CC2006B
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 15:52:02 -0600 (CST)
Message-ID: <45749880.7060008@dragonflymc.com>
Date: Mon, 04 Dec 2006 15:52:00 -0600
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: distributed search
References: <J9AXT0$E4F3E8F02192B33F0BC34105F9B9AFA3@libero.it>
In-Reply-To: <J9AXT0$E4F3E8F02192B33F0BC34105F9B9AFA3@libero.it>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The distributed searching section assumes that you have split the index 
into multiple pieces and there is a piece on each machine.  The tutorial 
doesn't tell you how to split the indexes because there is not tool to 
do that yet.  I was trying to layout a general architecture for how to 
do distributed searching instead of giving a step by step method.  What 
I would do for now is to create multiple indexes of say 2-4 million 
pages and put each index on a separate machine.  You would also need to 
copy all of the supporting database file such as the crawl db and link 
db to each machine.

Having a new index on each machine and having to create separate indexes 
is not the most elegant way to accomplish this architecture.  The best 
way that we have found is to have an splitter job that indexes and 
splits the index and supporting databases into multiple parts on the 
fly.  Then these parts are moved out to the search servers.  We have 
some base code for this but it is not in the nutch codebase as of yet.  
If you want to move down this path send me an email.

Dennis

Giuseppe Cannella wrote:
> in http://wiki.apache.org/nutch/NutchHadoopTutorial page
>
> at 'Distributed Searching' section 
> i read:
>
> "On each of the search servers you would use the startup the distributed search server by using the nutch server command like this:
> bin/nutch server 1234 /d01/local/crawled"
>
> but /d01/local/crawled has been created only for the first server, how could i create it for all server? 
> if i use "bin/hadoop dfs -copyToLocal crawled /d01/local/" on every server, the search finds N identical results (where N is how many servers are into the cluster)
>
>
> ------------------------------------------------------
> Passa a Infostrada. ADSL e Telefono senza limiti e senza canone Telecom
> http://click.libero.it/infostrada25nov06
>
>
>   

From MAILER-DAEMON Mon Dec  4 21:56:42 2006
Return-Path: 
 <hadoop-dev-return-5573-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33135 invoked from network); 4 Dec 2006 21:56:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 21:56:42 -0000
Received: (qmail 78766 invoked by uid 500); 4 Dec 2006 21:56:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78587 invoked by uid 500); 4 Dec 2006 21:56:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78578 invoked by uid 99); 4 Dec 2006 21:56:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 13:56:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 13:56:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0DEA67142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 13:56:21 -0800 (PST)
Message-ID: <33199548.1165269381054.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 13:56:21 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-778) Path.toString() should retain trailing
 '/' if passed in constructor
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Path.toString() should retain trailing '/' if passed in constructor
-------------------------------------------------------------------

                 Key: HADOOP-778
                 URL: http://issues.apache.org/jira/browse/HADOOP-778
             Project: Hadoop
          Issue Type: Bug
          Components: fs
            Reporter: Sanjay Dahiya


Does it break something if Path retains trailing '/' if passed in constructor and returns it back in toString() ? 
Looking at Path.toString() JobClient wont have a way of knowing which Paths were intended to be directories and not files, in the context of globbed regex ( HADOOP-619 ). 


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 22:15:17 2006
Return-Path: 
 <hadoop-dev-return-5574-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38755 invoked from network); 4 Dec 2006 22:15:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 22:15:17 -0000
Received: (qmail 18076 invoked by uid 500); 4 Dec 2006 22:15:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18054 invoked by uid 500); 4 Dec 2006 22:15:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18045 invoked by uid 99); 4 Dec 2006 22:15:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:15:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:15:13 -0800
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id kB4MF5o29848
	for <hadoop-dev@lucene.apache.org>; Mon, 4 Dec 2006 16:15:07 -0600
Message-ID: <45749DDD.9030005@getopt.org>
Date: Mon, 04 Dec 2006 23:14:53 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: distributed search
References: <J9AXT0$E4F3E8F02192B33F0BC34105F9B9AFA3@libero.it>
 <45749880.7060008@dragonflymc.com>
In-Reply-To: <45749880.7060008@dragonflymc.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Dennis Kubes wrote:

[...]
> Having a new index on each machine and having to create separate 
> indexes is not the most elegant way to accomplish this architecture.  
> The best way that we have found is to have an splitter job that 
> indexes and splits the index and 

Have you implemented a Lucene index splitter, i.e. a tool that takes an 
existing Lucene index and splits it into parts by document id? This 
sounds very interesting - could you tell us a bit about this?

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



From MAILER-DAEMON Mon Dec  4 22:17:44 2006
Return-Path: 
 <hadoop-dev-return-5575-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39033 invoked from network); 4 Dec 2006 22:17:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 22:17:44 -0000
Received: (qmail 19154 invoked by uid 500); 4 Dec 2006 22:17:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19129 invoked by uid 500); 4 Dec 2006 22:17:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19118 invoked by uid 99); 4 Dec 2006 22:17:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:17:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:17:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0A9C77142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 14:17:23 -0800 (PST)
Message-ID: <25857778.1165270643040.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 14:17:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12455431 ] 
            
Owen O'Malley commented on HADOOP-619:
--------------------------------------

I think that streaming should stop using the filename globbing for --input and instead list a set of input directories.

I think that the InputFormatBase should support a regex filter on filenames that should default to something like "[^_].*" so that any file that starts with an "_" is not treated as input. This will allow us to put things like _LOGS as a filename to store the log files for a job.

Streaming should then support the regex filename filters using "--input-filter" with a regex that filters the filenames.

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 22:21:44 2006
Return-Path: 
 <hadoop-dev-return-5576-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40047 invoked from network); 4 Dec 2006 22:21:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 22:21:44 -0000
Received: (qmail 23910 invoked by uid 500); 4 Dec 2006 22:21:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23883 invoked by uid 500); 4 Dec 2006 22:21:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23874 invoked by uid 99); 4 Dec 2006 22:21:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:21:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:21:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 55D4B7142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 14:21:22 -0800 (PST)
Message-ID: <23343748.1165270882349.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 14:21:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-778) Path.toString() should retain
 trailing '/' if passed in constructor
In-Reply-To: <33199548.1165269381054.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-778?page=comments#action_12455432 ] 
            
Owen O'Malley commented on HADOOP-778:
--------------------------------------

I think this is a bad direction. Users get very confused about this kind of semantics since it is very non-standard on unix. I've had to explain the rsync rules to a LOT of people. *sigh*

-1

> Path.toString() should retain trailing '/' if passed in constructor
> -------------------------------------------------------------------
>
>                 Key: HADOOP-778
>                 URL: http://issues.apache.org/jira/browse/HADOOP-778
>             Project: Hadoop
>          Issue Type: Bug
>          Components: fs
>            Reporter: Sanjay Dahiya
>
> Does it break something if Path retains trailing '/' if passed in constructor and returns it back in toString() ? 
> Looking at Path.toString() JobClient wont have a way of knowing which Paths were intended to be directories and not files, in the context of globbed regex ( HADOOP-619 ). 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 22:25:23 2006
Return-Path: 
 <hadoop-dev-return-5577-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40801 invoked from network); 4 Dec 2006 22:25:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 22:25:23 -0000
Received: (qmail 32771 invoked by uid 500); 4 Dec 2006 22:25:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32743 invoked by uid 500); 4 Dec 2006 22:25:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32734 invoked by uid 99); 4 Dec 2006 22:25:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:25:31 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:25:20 -0800
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp1.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kB4MOqj6001554
	for <hadoop-dev@lucene.apache.org>; Mon, 4 Dec 2006 14:24:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=VmTydcZifBOs+KsvhsXXd3g92rqJBF1hKeHhlk62BIke3BuI0fUQ7JDFOjnQRNNK
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <25857778.1165270643040.JavaMail.jira@brutus>
References: <25857778.1165270643040.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0ee5ad747fb5e5e1ceef7a21e866ec45@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
Date: Mon, 4 Dec 2006 14:24:51 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org

Is there a reason to split  "-input" and "-input-filter"?

If so, please make sure that there is a way to have
(a) different "-input-filter" for different "-input", and
(b) multiple "-input-filter" for the same "-input" (special case of (a))
(c) wild cards for specifying directories in "-input"



On Dec 4, 2006, at 2:17 PM, Owen O'Malley (JIRA) wrote:

>     [  
> http://issues.apache.org/jira/browse/HADOOP-619? 
> page=comments#action_12455431 ]
>
> Owen O'Malley commented on HADOOP-619:
> --------------------------------------
>
> I think that streaming should stop using the filename globbing for  
> --input and instead list a set of input directories.
>
> I think that the InputFormatBase should support a regex filter on  
> filenames that should default to something like "[^_].*" so that any  
> file that starts with an "_" is not treated as input. This will allow  
> us to put things like _LOGS as a filename to store the log files for a  
> job.
>
> Streaming should then support the regex filename filters using  
> "--input-filter" with a regex that filters the filenames.
>
>> Unify Map-Reduce and Streaming to take the same globbed input  
>> specification
>> ---------------------------------------------------------------------- 
>> -----
>>
>>                 Key: HADOOP-619
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>>             Project: Hadoop
>>          Issue Type: Improvement
>>          Components: mapred
>>            Reporter: eric baldeschwieler
>>         Assigned To: Sanjay Dahiya
>>
>> Right now streaming input is specified very differently from other  
>> map-reduce input.  It would be good if these two apps could take much  
>> more similar input specs.
>> In particular -input in streaming expects a file or glob pattern  
>> while MR takes a directory.  It would be cool if both could take a  
>> glob patern of files and if both took a directory by default (with  
>> some patern excluded to allow logs, metadata and other framework  
>> output to be safely stored).
>> We want to be sure that MR input is backward compatible over this  
>> change.  I propose that a single file should be accepted as an input  
>> or a single directory.  Globs should only match directories if the  
>> paterns is '/' terminated, to avoid massive inputs specified by  
>> mistake.
>> Thoughts?
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Mon Dec  4 22:25:44 2006
Return-Path: 
 <hadoop-dev-return-5578-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40854 invoked from network); 4 Dec 2006 22:25:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 22:25:44 -0000
Received: (qmail 33298 invoked by uid 500); 4 Dec 2006 22:25:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33068 invoked by uid 500); 4 Dec 2006 22:25:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33054 invoked by uid 99); 4 Dec 2006 22:25:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:25:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:25:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F38607141E4
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 14:25:22 -0800 (PST)
Message-ID: <690680.1165271122994.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 14:25:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12455433 ] 
            
Owen O'Malley commented on HADOOP-619:
--------------------------------------

After a bit more consideration, I think it would be fine for JobConf.getInputPaths to contain both files and directories. InputFormatBase should use the HDFS globbing to expand wildcards. For files, it would include just that file and for directories, it would treat it like the current semantics.

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 22:33:44 2006
Return-Path: 
 <hadoop-dev-return-5579-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42926 invoked from network); 4 Dec 2006 22:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 22:33:44 -0000
Received: (qmail 46530 invoked by uid 500); 4 Dec 2006 22:33:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46509 invoked by uid 500); 4 Dec 2006 22:33:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46500 invoked by uid 99); 4 Dec 2006 22:33:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:33:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:33:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F28C97141E4
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 14:33:22 -0800 (PST)
Message-ID: <16646116.1165271602991.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 14:33:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-752) Possible locking issues in HDFS
 Namenode
In-Reply-To: <3588846.1164693201081.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-752?page=all ]

dhruba borthakur updated HADOOP-752:
------------------------------------

    Attachment: namenodelocking.patch

Added locking to setReplication, datanodeReport & DFSNodesStatus

> Possible locking issues in HDFS Namenode
> ----------------------------------------
>
>                 Key: HADOOP-752
>                 URL: http://issues.apache.org/jira/browse/HADOOP-752
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: namenodelocking.patch
>
>
> I have been investigating the cause of random Namenode memory corruptions/memory overflows, etc. Please comment.
>  1. The functions datanodeReport() and DFSNodesStatus() do not acquire the global lock.
>    This can race with another thread invoking registerDatanode(). registerDatanode()
>    can remove a datanode (thru wipeDatanode()) while the datanodeReport thread is
>    traversing the list of datanodes. This can cause exceptions to occur.
>  2. The blocksMap is protected by the global lock. The setReplication() call does not acquire
>    the global lock when it calls proccessOverReplicatedBlock(). This can cause corruption in blockMap.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 22:33:46 2006
Return-Path: 
 <hadoop-dev-return-5580-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42976 invoked from network); 4 Dec 2006 22:33:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 22:33:46 -0000
Received: (qmail 46831 invoked by uid 500); 4 Dec 2006 22:33:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46796 invoked by uid 500); 4 Dec 2006 22:33:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46787 invoked by uid 99); 4 Dec 2006 22:33:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:33:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:33:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EE49D7142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 14:33:24 -0800 (PST)
Message-ID: <27654072.1165271604973.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 14:33:24 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-752) Possible locking issues in HDFS
 Namenode
In-Reply-To: <3588846.1164693201081.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-752?page=all ]

dhruba borthakur updated HADOOP-752:
------------------------------------

    Status: Patch Available  (was: Open)

Added locking to setReplication(), datanodeReport & DFSNodesStatus

> Possible locking issues in HDFS Namenode
> ----------------------------------------
>
>                 Key: HADOOP-752
>                 URL: http://issues.apache.org/jira/browse/HADOOP-752
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: namenodelocking.patch
>
>
> I have been investigating the cause of random Namenode memory corruptions/memory overflows, etc. Please comment.
>  1. The functions datanodeReport() and DFSNodesStatus() do not acquire the global lock.
>    This can race with another thread invoking registerDatanode(). registerDatanode()
>    can remove a datanode (thru wipeDatanode()) while the datanodeReport thread is
>    traversing the list of datanodes. This can cause exceptions to occur.
>  2. The blocksMap is protected by the global lock. The setReplication() call does not acquire
>    the global lock when it calls proccessOverReplicatedBlock(). This can cause corruption in blockMap.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 22:40:54 2006
Return-Path: 
 <hadoop-dev-return-5581-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44342 invoked from network); 4 Dec 2006 22:40:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 22:40:54 -0000
Received: (qmail 56428 invoked by uid 500); 4 Dec 2006 22:40:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56400 invoked by uid 500); 4 Dec 2006 22:40:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56382 invoked by uid 99); 4 Dec 2006 22:40:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:40:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:40:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 589767142E1
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 14:40:24 -0800 (PST)
Message-ID: <24192010.1165272024360.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 14:40:24 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12455438 ] 
            
Owen O'Malley commented on HADOOP-619:
--------------------------------------

> Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs 
> specified by mistake. 

I don't like this. As I commented on HADOOP-778, I think that having different semantics for trailing slash is confusing. I think we'd be better off warning the user if they have a trailing "/*" on an input path. (Since "foo/*" is likely a mistake and they probably meant "foo" or "foo/log*.gz" or something.)

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 22:51:44 2006
Return-Path: 
 <hadoop-dev-return-5582-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46360 invoked from network); 4 Dec 2006 22:51:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 22:51:44 -0000
Received: (qmail 69229 invoked by uid 500); 4 Dec 2006 22:51:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69006 invoked by uid 500); 4 Dec 2006 22:51:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68997 invoked by uid 99); 4 Dec 2006 22:51:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:51:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 14:51:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 588557141E4
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 14:51:23 -0800 (PST)
Message-ID: <26389374.1165272683360.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 14:51:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-752) Possible locking issues in HDFS
 Namenode
In-Reply-To: <3588846.1164693201081.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-752?page=comments#action_12455440 ] 
            
Hadoop QA commented on HADOOP-752:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346375/namenodelocking.patch applied and successfully tested against trunk revision 482393

> Possible locking issues in HDFS Namenode
> ----------------------------------------
>
>                 Key: HADOOP-752
>                 URL: http://issues.apache.org/jira/browse/HADOOP-752
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: namenodelocking.patch
>
>
> I have been investigating the cause of random Namenode memory corruptions/memory overflows, etc. Please comment.
>  1. The functions datanodeReport() and DFSNodesStatus() do not acquire the global lock.
>    This can race with another thread invoking registerDatanode(). registerDatanode()
>    can remove a datanode (thru wipeDatanode()) while the datanodeReport thread is
>    traversing the list of datanodes. This can cause exceptions to occur.
>  2. The blocksMap is protected by the global lock. The setReplication() call does not acquire
>    the global lock when it calls proccessOverReplicatedBlock(). This can cause corruption in blockMap.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 23:04:43 2006
Return-Path: 
 <hadoop-dev-return-5583-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49533 invoked from network); 4 Dec 2006 23:04:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 23:04:43 -0000
Received: (qmail 86377 invoked by uid 500); 4 Dec 2006 23:04:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86355 invoked by uid 500); 4 Dec 2006 23:04:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86346 invoked by uid 99); 4 Dec 2006 23:04:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:04:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:04:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B57D7142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 15:04:22 -0800 (PST)
Message-ID: <28029532.1165273462305.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 15:04:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-774) Datanodes fails to heartbeat when a
 directory with a large number of blocks is deleted
In-Reply-To: <10916275.1165019421088.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-774?page=all ]

dhruba borthakur updated HADOOP-774:
------------------------------------

    Attachment: chunkinvalidateBlocks.java

Limit the maximum number of blocks that can be sent in a single blockInvalidate RPC.

> Datanodes fails to heartbeat when a directory with a large number of blocks is deleted
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-774
>                 URL: http://issues.apache.org/jira/browse/HADOOP-774
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: chunkinvalidateBlocks.java
>
>
> If a user removes a few files that are huge, it causes the namenode to send BlockInvalidate command to the relevant Datanodes. The Datanode process the blockInvalidate command as part of its heartbeat thread. If the number of blocks to be invalidated is huge, the datanode takes a long time to process it. This causes the datanode to not send new heartbeats to the namenode. The namenode declares the datanode as dead!
> 1. One option is to process the blockInvalidate as a separate thread from the heartbeat thread in the Datanode. 
> 2. Another option would be to constrain the namenode to send a max (e.g. 500) blocks per blockInvalidate message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 23:06:43 2006
Return-Path: 
 <hadoop-dev-return-5584-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49867 invoked from network); 4 Dec 2006 23:06:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 23:06:43 -0000
Received: (qmail 87328 invoked by uid 500); 4 Dec 2006 23:06:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87295 invoked by uid 500); 4 Dec 2006 23:06:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87286 invoked by uid 99); 4 Dec 2006 23:06:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:06:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:06:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 44E127142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 15:06:22 -0800 (PST)
Message-ID: <13771917.1165273582279.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 15:06:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-774) Datanodes fails to heartbeat when a
 directory with a large number of blocks is deleted
In-Reply-To: <10916275.1165019421088.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-774?page=all ]

dhruba borthakur updated HADOOP-774:
------------------------------------

    Status: Patch Available  (was: Open)

Limit the maximum number of blocks that can be sent in a single blockInvalidate RPC.

> Datanodes fails to heartbeat when a directory with a large number of blocks is deleted
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-774
>                 URL: http://issues.apache.org/jira/browse/HADOOP-774
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: chunkinvalidateBlocks.java
>
>
> If a user removes a few files that are huge, it causes the namenode to send BlockInvalidate command to the relevant Datanodes. The Datanode process the blockInvalidate command as part of its heartbeat thread. If the number of blocks to be invalidated is huge, the datanode takes a long time to process it. This causes the datanode to not send new heartbeats to the namenode. The namenode declares the datanode as dead!
> 1. One option is to process the blockInvalidate as a separate thread from the heartbeat thread in the Datanode. 
> 2. Another option would be to constrain the namenode to send a max (e.g. 500) blocks per blockInvalidate message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 23:08:45 2006
Return-Path: 
 <hadoop-dev-return-5585-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50356 invoked from network); 4 Dec 2006 23:08:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 23:08:45 -0000
Received: (qmail 89338 invoked by uid 500); 4 Dec 2006 23:08:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89198 invoked by uid 500); 4 Dec 2006 23:08:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89189 invoked by uid 99); 4 Dec 2006 23:08:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:08:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:08:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 21C687142E1
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 15:08:23 -0800 (PST)
Message-ID: <8118265.1165273703135.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 15:08:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-591) Reducer sort should even out the pass
 factors in merging different pass
In-Reply-To: <31534512.1160500579703.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-591?page=all ]

Owen O'Malley resolved HADOOP-591.
----------------------------------

    Resolution: Fixed

I believe this was already fixed as part of HADOOP-611.

> Reducer sort should even out the pass factors in merging different pass
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-591
>                 URL: http://issues.apache.org/jira/browse/HADOOP-591
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Runping Qi
>         Assigned To: Devaraj Das
>
> When multiple pass merging is needed during sort, the current sort implementation in SequenceFile class uses a simple "greedy" way to select pass factors, resulting uneven pass factor in different passes. For example, if the factor pass is 100 (the default), and there are 101 segments to be merged. The current implementation will first merge the first 100 segments into one and then merge the big output file with the last segment with pass factor 2. It will be better off to use pass factors 11 in the first pass and pass factor 10 in the second pass.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 23:12:44 2006
Return-Path: 
 <hadoop-dev-return-5586-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51125 invoked from network); 4 Dec 2006 23:12:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 23:12:44 -0000
Received: (qmail 92478 invoked by uid 500); 4 Dec 2006 23:12:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92455 invoked by uid 500); 4 Dec 2006 23:12:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92445 invoked by uid 99); 4 Dec 2006 23:12:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:12:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:12:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C606B7142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 15:12:22 -0800 (PST)
Message-ID: <10457104.1165273942808.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 15:12:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-764) The memory consumption of
 processReport() in the namenode can be reduced
In-Reply-To: <21824491.1164845001071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-764?page=all ]

dhruba borthakur updated HADOOP-764:
------------------------------------

    Attachment: processBlockReport.patch

Request for code review.

> The memory consumption of processReport() in the namenode can be reduced
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-764
>                 URL: http://issues.apache.org/jira/browse/HADOOP-764
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: processBlockReport.patch
>
>
> The FSNamesystem.processReport() method converts the blocklist for a datanode into an array by calling node.getBlocks(). Although this memory allocation is transient, it could possibly require the garbage-collector to work that much harder. 
> The method Block.getBlocks() should be deprecated. Code that currently uses this method should instead iterate over the Collection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 23:21:44 2006
Return-Path: 
 <hadoop-dev-return-5587-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54300 invoked from network); 4 Dec 2006 23:21:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 23:21:44 -0000
Received: (qmail 9915 invoked by uid 500); 4 Dec 2006 23:21:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9885 invoked by uid 500); 4 Dec 2006 23:21:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9876 invoked by uid 99); 4 Dec 2006 23:21:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:21:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:21:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0EFF47142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 15:21:23 -0800 (PST)
Message-ID: <9782318.1165274483058.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 15:21:23 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12455448 ] 
            
Runping Qi commented on HADOOP-619:
-----------------------------------


A couple of points:

1. specifying input:
I think the user should specify the input files in the following way:

spec_1,spec_2, ...

Each spec above is a "root" directory, with an optional a pttern specification 
(regex, or simple wildcad based patterns). 
The semantics for a spec is that all the files directly or indirectly under the root are input files, 
as long as the paths match the pattern. 
If the pattern is ommitted in the spec, that means all the files under the root dir are the input files.

Here are a couple of examples:

"foo/"  all the files under foo tree

"foo/;*.gz": all the files under foo tree, with extension .gz

"foo/; */bar/*.gz: all the files under foo tree, with extension .gz and with bar as a intermediate directory.

2. Checking and matching:
    The jobclient should check the existence of the root dirs. 
    If none of  the root dirs exists, then the job should fail immediately.
    If some root dirs do not exist, the job client should generate warning.

    The InputFormatbase should perform the file list generation and matching. The list of matched files 
    should be part of the job's status so that the user can examine them through web UI.






> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 23:29:51 2006
Return-Path: 
 <hadoop-dev-return-5588-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57043 invoked from network); 4 Dec 2006 23:29:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 23:29:51 -0000
Received: (qmail 24861 invoked by uid 500); 4 Dec 2006 23:29:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24628 invoked by uid 500); 4 Dec 2006 23:29:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24618 invoked by uid 99); 4 Dec 2006 23:29:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:29:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.133.162.98] (HELO linuxfly.dragonflymc.com) (63.133.162.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:29:47 -0800
Received: from [192.168.1.246] (bigfly.visvo.com [192.168.1.246])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id C252AC2006B
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 17:29:30 -0600 (CST)
Message-ID: <4574AF58.5060508@dragonflymc.com>
Date: Mon, 04 Dec 2006 17:29:28 -0600
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: distributed search
References: <J9AXT0$E4F3E8F02192B33F0BC34105F9B9AFA3@libero.it>
 <45749880.7060008@dragonflymc.com> <45749DDD.9030005@getopt.org>
In-Reply-To: <45749DDD.9030005@getopt.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

All,

We have two version of a type of index splitter.  The first version 
would run an indexing job and then using the completed index as input 
would read the number of documents in the index and take a requested 
split size.  From this it used a custom index input format to create 
splits according to document id.   We would run a job that would map out 
index urls as keys and documents with their ids wrapped in a 
SerializableWritable object as the values.  Then inside of a second job 
using the index as input we would have a MapRunner that would read the 
other supporting databases (linkdb, segments) and map all objects as 
ObjectWritables.  Then on the reduce we had a custom Output and 
OutputFormat that took all of the objects and wrote out the databases 
and indexes into each split.

There was a problem with this first approach though in that writing out 
an index from a previously serialized document would lose any fields 
that are not stored (which is most).  So we went with a second approach.

The second approach takes a number of splits and runs through an 
indexing job on the fly.  It calls the indexing and scoring filters.  It 
uses the linkdb, crawldb, and segments as input.  As it indexes is also 
splits the databases and indexes into the number of reduce tasks so that 
the final output is multiple splits each hold a part of the index and 
its supporting databases.  Each of  the databases holds only the 
information for the urls that are in its part of the index.  These parts 
can then be pushed to separate search servers.  This type of splitting 
works well but you can NOT define a specific number of documents or urls 
per split and sometimes one split will have alot more urls than another 
if you are indexing some sites that have alot of pages (i.e. wikipedia 
or cnn archives).  This is currently how our system works.  We fetch, 
invert links, run through some other processes, and then index and split 
on the fly.  Then we use python scripts to pull each split directly from 
the DFS to each search server and then start the search servers.

We are still working on the splitter because the ideal approach would be 
to be able to specify a number of documents per split as well as to 
group by different keys, not just url.  I would be happy to share the 
current code but it is highly integrated so I would need to pull it out 
of our code base first.  It would be best if I could send it to someone, 
say Andrzej, to take a look at first.

Dennis

Andrzej Bialecki wrote:
> Dennis Kubes wrote:
>
> [...]
>> Having a new index on each machine and having to create separate 
>> indexes is not the most elegant way to accomplish this architecture.  
>> The best way that we have found is to have an splitter job that 
>> indexes and splits the index and 
>
> Have you implemented a Lucene index splitter, i.e. a tool that takes 
> an existing Lucene index and splits it into parts by document id? This 
> sounds very interesting - could you tell us a bit about this?
>

From MAILER-DAEMON Mon Dec  4 23:30:57 2006
Return-Path: 
 <hadoop-dev-return-5589-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58176 invoked from network); 4 Dec 2006 23:30:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 23:30:57 -0000
Received: (qmail 26078 invoked by uid 500); 4 Dec 2006 23:31:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25844 invoked by uid 500); 4 Dec 2006 23:31:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25835 invoked by uid 99); 4 Dec 2006 23:31:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:31:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:30:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DA46A7142F5
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 15:30:25 -0800 (PST)
Message-ID: <11897329.1165275025891.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 15:30:25 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-774) Datanodes fails to heartbeat when a
 directory with a large number of blocks is deleted
In-Reply-To: <10916275.1165019421088.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-774?page=comments#action_12455454 ] 
            
Hadoop QA commented on HADOOP-774:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346376/chunkinvalidateBlocks.java applied and successfully tested against trunk revision 482405

> Datanodes fails to heartbeat when a directory with a large number of blocks is deleted
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-774
>                 URL: http://issues.apache.org/jira/browse/HADOOP-774
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: chunkinvalidateBlocks.java
>
>
> If a user removes a few files that are huge, it causes the namenode to send BlockInvalidate command to the relevant Datanodes. The Datanode process the blockInvalidate command as part of its heartbeat thread. If the number of blocks to be invalidated is huge, the datanode takes a long time to process it. This causes the datanode to not send new heartbeats to the namenode. The namenode declares the datanode as dead!
> 1. One option is to process the blockInvalidate as a separate thread from the heartbeat thread in the Datanode. 
> 2. Another option would be to constrain the namenode to send a max (e.g. 500) blocks per blockInvalidate message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 23:42:54 2006
Return-Path: 
 <hadoop-dev-return-5590-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61234 invoked from network); 4 Dec 2006 23:42:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 23:42:54 -0000
Received: (qmail 45383 invoked by uid 500); 4 Dec 2006 23:42:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45365 invoked by uid 500); 4 Dec 2006 23:42:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45347 invoked by uid 99); 4 Dec 2006 23:42:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:42:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:42:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 579DC7142F7
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 15:42:25 -0800 (PST)
Message-ID: <30086137.1165275745355.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 15:42:25 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-779) Hadoop streaming does work with
 gzipped input
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hadoop streaming does work with gzipped input
---------------------------------------------

                 Key: HADOOP-779
                 URL: http://issues.apache.org/jira/browse/HADOOP-779
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
    Affects Versions: 0.9.0
            Reporter: Hairong Kuang
         Assigned To: Hairong Kuang
             Fix For: 0.10.0


When input files are gzipped, StreamLineRecordReader does not take the corect OutputStream to fetch the next record. Instead of using a GzipOutputStream, it uses a FSOutputStream. So input files are read as uncompressed plain text.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 23:50:43 2006
Return-Path: 
 <hadoop-dev-return-5591-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62468 invoked from network); 4 Dec 2006 23:50:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 23:50:43 -0000
Received: (qmail 52956 invoked by uid 500); 4 Dec 2006 23:50:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52932 invoked by uid 500); 4 Dec 2006 23:50:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52923 invoked by uid 99); 4 Dec 2006 23:50:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:50:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:50:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 57AF97142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 15:50:22 -0800 (PST)
Message-ID: <29812680.1165276222356.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 15:50:22 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-779) Hadoop streaming does work with
 gzipped input
In-Reply-To: <30086137.1165275745355.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-779?page=all ]

Hairong Kuang updated HADOOP-779:
---------------------------------

    Status: Patch Available  (was: Open)

The patch fixes the described bug. In addition, it does the following:
1. clean up "next" function of StreamLineRecordReader
2. add a junit test for gzipped input
3. restructure the junit test TestStreaming
4. turn on the debug option for streaming test cases in build-contrib.xml

> Hadoop streaming does work with gzipped input
> ---------------------------------------------
>
>                 Key: HADOOP-779
>                 URL: http://issues.apache.org/jira/browse/HADOOP-779
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.9.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.10.0
>
>         Attachments: GzipIn.patch
>
>
> When input files are gzipped, StreamLineRecordReader does not take the corect OutputStream to fetch the next record. Instead of using a GzipOutputStream, it uses a FSOutputStream. So input files are read as uncompressed plain text.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 23:50:49 2006
Return-Path: 
 <hadoop-dev-return-5592-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62584 invoked from network); 4 Dec 2006 23:50:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 23:50:49 -0000
Received: (qmail 53706 invoked by uid 500); 4 Dec 2006 23:50:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53686 invoked by uid 500); 4 Dec 2006 23:50:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53413 invoked by uid 99); 4 Dec 2006 23:50:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:50:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:50:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1CAD17142E1
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 15:50:25 -0800 (PST)
Message-ID: <316207.1165276225115.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 15:50:25 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-779) Hadoop streaming does work with
 gzipped input
In-Reply-To: <30086137.1165275745355.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-779?page=all ]

Hairong Kuang updated HADOOP-779:
---------------------------------

    Attachment: GzipIn.patch

Here is the patch

> Hadoop streaming does work with gzipped input
> ---------------------------------------------
>
>                 Key: HADOOP-779
>                 URL: http://issues.apache.org/jira/browse/HADOOP-779
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.9.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.10.0
>
>         Attachments: GzipIn.patch
>
>
> When input files are gzipped, StreamLineRecordReader does not take the corect OutputStream to fetch the next record. Instead of using a GzipOutputStream, it uses a FSOutputStream. So input files are read as uncompressed plain text.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec  4 23:54:47 2006
Return-Path: 
 <hadoop-dev-return-5593-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63397 invoked from network); 4 Dec 2006 23:54:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 23:54:47 -0000
Received: (qmail 57401 invoked by uid 500); 4 Dec 2006 23:54:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57378 invoked by uid 500); 4 Dec 2006 23:54:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57351 invoked by uid 99); 4 Dec 2006 23:54:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:54:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 15:54:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 995357142E1
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 15:54:23 -0800 (PST)
Message-ID: <1768382.1165276463625.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 15:54:23 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-779) Hadoop streaming does not work with
 gzipped input
In-Reply-To: <30086137.1165275745355.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-779?page=all ]

Hairong Kuang updated HADOOP-779:
---------------------------------

    Summary: Hadoop streaming does not work with gzipped input  (was: Hadoop streaming does work with gzipped input)

> Hadoop streaming does not work with gzipped input
> -------------------------------------------------
>
>                 Key: HADOOP-779
>                 URL: http://issues.apache.org/jira/browse/HADOOP-779
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.9.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.10.0
>
>         Attachments: GzipIn.patch
>
>
> When input files are gzipped, StreamLineRecordReader does not take the corect OutputStream to fetch the next record. Instead of using a GzipOutputStream, it uses a FSOutputStream. So input files are read as uncompressed plain text.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 00:06:44 2006
Return-Path: 
 <hadoop-dev-return-5594-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65757 invoked from network); 5 Dec 2006 00:06:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 00:06:44 -0000
Received: (qmail 74931 invoked by uid 500); 5 Dec 2006 00:06:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74699 invoked by uid 500); 5 Dec 2006 00:06:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74690 invoked by uid 99); 5 Dec 2006 00:06:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:06:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:06:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 030367142D7
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 16:06:23 -0800 (PST)
Message-ID: <8537957.1165277183009.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 16:06:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-756?page=all ]

dhruba borthakur updated HADOOP-756:
------------------------------------

    Attachment: safemodewait.patch

Code review requested.

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Sameer Paranjpye
>            Priority: Minor
>         Attachments: safemodewait.patch
>
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 00:11:43 2006
Return-Path: 
 <hadoop-dev-return-5595-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66645 invoked from network); 5 Dec 2006 00:11:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 00:11:43 -0000
Received: (qmail 81551 invoked by uid 500); 5 Dec 2006 00:11:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81517 invoked by uid 500); 5 Dec 2006 00:11:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81508 invoked by uid 99); 5 Dec 2006 00:11:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:11:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:11:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4FC827142D7
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 16:11:22 -0800 (PST)
Message-ID: <23755173.1165277482324.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 16:11:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-779) Hadoop streaming does not work with
 gzipped input
In-Reply-To: <30086137.1165275745355.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-779?page=comments#action_12455467 ] 
            
Hadoop QA commented on HADOOP-779:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346382/GzipIn.patch applied and successfully tested against trunk revision 482415

> Hadoop streaming does not work with gzipped input
> -------------------------------------------------
>
>                 Key: HADOOP-779
>                 URL: http://issues.apache.org/jira/browse/HADOOP-779
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.9.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.10.0
>
>         Attachments: GzipIn.patch
>
>
> When input files are gzipped, StreamLineRecordReader does not take the corect OutputStream to fetch the next record. Instead of using a GzipOutputStream, it uses a FSOutputStream. So input files are read as uncompressed plain text.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 00:13:54 2006
Return-Path: 
 <hadoop-dev-return-5596-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67534 invoked from network); 5 Dec 2006 00:13:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 00:13:54 -0000
Received: (qmail 86589 invoked by uid 500); 5 Dec 2006 00:13:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86569 invoked by uid 500); 5 Dec 2006 00:13:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86548 invoked by uid 99); 5 Dec 2006 00:13:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:13:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:13:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EE1717142EC
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 16:13:24 -0800 (PST)
Message-ID: <5616527.1165277604972.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 16:13:24 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-756?page=all ]

dhruba borthakur updated HADOOP-756:
------------------------------------

    Attachment:     (was: safemodewait.patch)

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Sameer Paranjpye
>            Priority: Minor
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 00:13:51 2006
Return-Path: 
 <hadoop-dev-return-5597-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67469 invoked from network); 5 Dec 2006 00:13:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 00:13:51 -0000
Received: (qmail 86881 invoked by uid 500); 5 Dec 2006 00:13:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86855 invoked by uid 500); 5 Dec 2006 00:13:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86832 invoked by uid 99); 5 Dec 2006 00:13:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:13:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:13:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EBBEE7142F5
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 16:13:26 -0800 (PST)
Message-ID: <1833602.1165277606963.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 16:13:26 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-756?page=comments#action_12455469 ] 
            
Owen O'Malley commented on HADOOP-756:
--------------------------------------

It looks good except that the code is a little strange:

boolean done = false;
while(!done) {
  done = ...;
}

is better than:
while (true) {
  boolean done = ...;
  if (done) { break; }
  ...
}


> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Sameer Paranjpye
>            Priority: Minor
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 00:15:44 2006
Return-Path: 
 <hadoop-dev-return-5598-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68001 invoked from network); 5 Dec 2006 00:15:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 00:15:44 -0000
Received: (qmail 88576 invoked by uid 500); 5 Dec 2006 00:15:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88333 invoked by uid 500); 5 Dec 2006 00:15:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88323 invoked by uid 99); 5 Dec 2006 00:15:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:15:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:15:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 217DE7142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 16:15:23 -0800 (PST)
Message-ID: <15949490.1165277723134.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 16:15:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-756?page=all ]

dhruba borthakur updated HADOOP-756:
------------------------------------

    Attachment: safemodewait.patch

Earlier file was corrupted as part of upload. Please review this one.

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Sameer Paranjpye
>            Priority: Minor
>         Attachments: safemodewait.patch
>
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 00:15:46 2006
Return-Path: 
 <hadoop-dev-return-5599-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68061 invoked from network); 5 Dec 2006 00:15:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 00:15:46 -0000
Received: (qmail 88810 invoked by uid 500); 5 Dec 2006 00:15:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88630 invoked by uid 500); 5 Dec 2006 00:15:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88621 invoked by uid 99); 5 Dec 2006 00:15:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:15:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:15:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3638E7142E1
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 16:15:25 -0800 (PST)
Message-ID: <30249850.1165277725219.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 16:15:25 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-629) none of the rpc servers check the
 protcol name for validity
In-Reply-To: <8479558.1161668116777.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-629?page=all ]

Owen O'Malley updated HADOOP-629:
---------------------------------

    Attachment: protocol-name.patch

This patch fixes the name node, job tracker, and task tracker to reject rpc connections for the wrong protocols.

> none of the rpc servers check the protcol name for validity
> -----------------------------------------------------------
>
>                 Key: HADOOP-629
>                 URL: http://issues.apache.org/jira/browse/HADOOP-629
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Wendy Chien
>         Attachments: protocol-name.patch
>
>
> All of the Hadoop RPC servers either ignore the protocol name or do:
> if (protocol.equals(Prot1.class.getName()) {
>   return Prot1.versionId;
> } else {
>   return Prot2.versionId;
> }
> A much better structure would be:
> if (Prot1.class.getName().equals(protocol)) {
>   return Prot1.versionId;
> } else if (Prot2.class.getName().equals(protocol)) {
>   return Prot2.versionId;
> } else {
>   throw new VersionMismatchException("Expected protocol Prot1 or Prot2 and received: " + protocol);
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 00:15:51 2006
Return-Path: 
 <hadoop-dev-return-5600-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68166 invoked from network); 5 Dec 2006 00:15:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 00:15:51 -0000
Received: (qmail 89695 invoked by uid 500); 5 Dec 2006 00:15:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89668 invoked by uid 500); 5 Dec 2006 00:15:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89659 invoked by uid 99); 5 Dec 2006 00:15:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:15:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:15:50 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2083C7142F6
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 16:15:30 -0800 (PST)
Message-ID: <13255673.1165277730130.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 16:15:30 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-629) none of the rpc servers check the
 protcol name for validity
In-Reply-To: <8479558.1161668116777.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-629?page=all ]

Owen O'Malley reassigned HADOOP-629:
------------------------------------

    Assignee: Owen O'Malley  (was: Wendy Chien)

> none of the rpc servers check the protcol name for validity
> -----------------------------------------------------------
>
>                 Key: HADOOP-629
>                 URL: http://issues.apache.org/jira/browse/HADOOP-629
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>         Attachments: protocol-name.patch
>
>
> All of the Hadoop RPC servers either ignore the protocol name or do:
> if (protocol.equals(Prot1.class.getName()) {
>   return Prot1.versionId;
> } else {
>   return Prot2.versionId;
> }
> A much better structure would be:
> if (Prot1.class.getName().equals(protocol)) {
>   return Prot1.versionId;
> } else if (Prot2.class.getName().equals(protocol)) {
>   return Prot2.versionId;
> } else {
>   throw new VersionMismatchException("Expected protocol Prot1 or Prot2 and received: " + protocol);
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 00:17:44 2006
Return-Path: 
 <hadoop-dev-return-5601-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69034 invoked from network); 5 Dec 2006 00:17:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 00:17:44 -0000
Received: (qmail 94897 invoked by uid 500); 5 Dec 2006 00:17:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94846 invoked by uid 500); 5 Dec 2006 00:17:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94837 invoked by uid 99); 5 Dec 2006 00:17:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:17:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:17:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 699557142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 16:17:22 -0800 (PST)
Message-ID: <9526667.1165277842430.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 16:17:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-629) none of the rpc servers check the
 protcol name for validity
In-Reply-To: <8479558.1161668116777.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-629?page=all ]

Owen O'Malley updated HADOOP-629:
---------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.10.0

> none of the rpc servers check the protcol name for validity
> -----------------------------------------------------------
>
>                 Key: HADOOP-629
>                 URL: http://issues.apache.org/jira/browse/HADOOP-629
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: protocol-name.patch
>
>
> All of the Hadoop RPC servers either ignore the protocol name or do:
> if (protocol.equals(Prot1.class.getName()) {
>   return Prot1.versionId;
> } else {
>   return Prot2.versionId;
> }
> A much better structure would be:
> if (Prot1.class.getName().equals(protocol)) {
>   return Prot1.versionId;
> } else if (Prot2.class.getName().equals(protocol)) {
>   return Prot2.versionId;
> } else {
>   throw new VersionMismatchException("Expected protocol Prot1 or Prot2 and received: " + protocol);
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 00:17:47 2006
Return-Path: 
 <hadoop-dev-return-5602-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69104 invoked from network); 5 Dec 2006 00:17:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 00:17:47 -0000
Received: (qmail 95223 invoked by uid 500); 5 Dec 2006 00:17:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95196 invoked by uid 500); 5 Dec 2006 00:17:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95187 invoked by uid 99); 5 Dec 2006 00:17:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:17:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:17:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 819D67142D7
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 16:17:26 -0800 (PST)
Message-ID: <3267669.1165277846528.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 16:17:26 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-756?page=all ]

dhruba borthakur reassigned HADOOP-756:
---------------------------------------

    Assignee: dhruba borthakur  (was: Sameer Paranjpye)

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: safemodewait.patch
>
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 00:33:43 2006
Return-Path: 
 <hadoop-dev-return-5603-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73237 invoked from network); 5 Dec 2006 00:33:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 00:33:43 -0000
Received: (qmail 24994 invoked by uid 500); 5 Dec 2006 00:33:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24962 invoked by uid 500); 5 Dec 2006 00:33:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24953 invoked by uid 99); 5 Dec 2006 00:33:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:33:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 16:33:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 46EBD7142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 16:33:22 -0800 (PST)
Message-ID: <6282495.1165278802287.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 16:33:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-629) none of the rpc servers check the
 protcol name for validity
In-Reply-To: <8479558.1161668116777.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-629?page=comments#action_12455477 ] 
            
Hadoop QA commented on HADOOP-629:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346387/protocol-name.patch applied and successfully tested against trunk revision r481432

> none of the rpc servers check the protcol name for validity
> -----------------------------------------------------------
>
>                 Key: HADOOP-629
>                 URL: http://issues.apache.org/jira/browse/HADOOP-629
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: protocol-name.patch
>
>
> All of the Hadoop RPC servers either ignore the protocol name or do:
> if (protocol.equals(Prot1.class.getName()) {
>   return Prot1.versionId;
> } else {
>   return Prot2.versionId;
> }
> A much better structure would be:
> if (Prot1.class.getName().equals(protocol)) {
>   return Prot1.versionId;
> } else if (Prot2.class.getName().equals(protocol)) {
>   return Prot2.versionId;
> } else {
>   throw new VersionMismatchException("Expected protocol Prot1 or Prot2 and received: " + protocol);
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 01:47:15 2006
Return-Path: 
 <hadoop-dev-return-5604-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94933 invoked from network); 5 Dec 2006 01:47:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 01:47:15 -0000
Received: (qmail 28761 invoked by uid 500); 5 Dec 2006 01:47:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28736 invoked by uid 500); 5 Dec 2006 01:47:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28726 invoked by uid 99); 5 Dec 2006 01:47:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 17:47:22 -0800
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_NUMERIC_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.229.144.195] (HELO mail2.apgcanada.netvigour.com)
 (208.229.144.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 17:47:10 -0800
Received: from mail6.netvigour.com ([10.201.10.1]) by
 mail2.apgcanada.netvigour.com with Microsoft SMTPSVC(6.0.3790.0);
	 Mon, 4 Dec 2006 20:47:28 -0500
Received: from 75.2.140.205 ([75.2.140.205]) by mail6.netvigour.com
 ([10.201.10.1]) via Exchange Front-End Server mail.netvigour.com
 ([10.201.10.9]) with Microsoft Exchange Server HTTP-DAV ;
 Tue,  5 Dec 2006 01:47:28 +0000
User-Agent: Microsoft-Entourage/11.2.5.060620
Date: Mon, 04 Dec 2006 17:46:43 -0800
Subject: Re: distributed search
From: Chad Walters <chad@powerset.com>
To: <hadoop-dev@lucene.apache.org>
Message-ID: <C19A0F83.DBF%chad@powerset.com>
Thread-Topic: distributed search
Thread-Index: AccYDzcFddTLfIQCEdu1XwAWy42zUw==
In-Reply-To: <4574AF58.5060508@dragonflymc.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-OriginalArrivalTime: 05 Dec 2006 01:47:28.0802 (UTC)
 FILETIME=[5251D820:01C7180F]
X-Virus-Checked: Checked by ClamAV on apache.org

Dennis,

You should consider splitting based on a function that will give you a more
uniform distribution (e.g.: MD5(url)). That way, you should see much less of
a variation in the number of documents per partition.

Chad

On 12/4/06 3:29 PM, "Dennis Kubes" <nutch-dev@dragonflymc.com> wrote:

> All,
> 
> We have two version of a type of index splitter.  The first version
> would run an indexing job and then using the completed index as input
> would read the number of documents in the index and take a requested
> split size.  From this it used a custom index input format to create
> splits according to document id.   We would run a job that would map out
> index urls as keys and documents with their ids wrapped in a
> SerializableWritable object as the values.  Then inside of a second job
> using the index as input we would have a MapRunner that would read the
> other supporting databases (linkdb, segments) and map all objects as
> ObjectWritables.  Then on the reduce we had a custom Output and
> OutputFormat that took all of the objects and wrote out the databases
> and indexes into each split.
> 
> There was a problem with this first approach though in that writing out
> an index from a previously serialized document would lose any fields
> that are not stored (which is most).  So we went with a second approach.
> 
> The second approach takes a number of splits and runs through an
> indexing job on the fly.  It calls the indexing and scoring filters.  It
> uses the linkdb, crawldb, and segments as input.  As it indexes is also
> splits the databases and indexes into the number of reduce tasks so that
> the final output is multiple splits each hold a part of the index and
> its supporting databases.  Each of  the databases holds only the
> information for the urls that are in its part of the index.  These parts
> can then be pushed to separate search servers.  This type of splitting
> works well but you can NOT define a specific number of documents or urls
> per split and sometimes one split will have alot more urls than another
> if you are indexing some sites that have alot of pages (i.e. wikipedia
> or cnn archives).  This is currently how our system works.  We fetch,
> invert links, run through some other processes, and then index and split
> on the fly.  Then we use python scripts to pull each split directly from
> the DFS to each search server and then start the search servers.
> 
> We are still working on the splitter because the ideal approach would be
> to be able to specify a number of documents per split as well as to
> group by different keys, not just url.  I would be happy to share the
> current code but it is highly integrated so I would need to pull it out
> of our code base first.  It would be best if I could send it to someone,
> say Andrzej, to take a look at first.
> 
> Dennis
> 
> Andrzej Bialecki wrote:
>> Dennis Kubes wrote:
>> 
>> [...]
>>> Having a new index on each machine and having to create separate
>>> indexes is not the most elegant way to accomplish this architecture.
>>> The best way that we have found is to have an splitter job that
>>> indexes and splits the index and
>> 
>> Have you implemented a Lucene index splitter, i.e. a tool that takes
>> an existing Lucene index and splits it into parts by document id? This
>> sounds very interesting - could you tell us a bit about this?
>> 


From MAILER-DAEMON Tue Dec  5 02:23:46 2006
Return-Path: 
 <hadoop-dev-return-5605-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8408 invoked from network); 5 Dec 2006 02:23:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 02:23:46 -0000
Received: (qmail 66551 invoked by uid 500); 5 Dec 2006 02:23:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66526 invoked by uid 500); 5 Dec 2006 02:23:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66517 invoked by uid 99); 5 Dec 2006 02:23:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 18:23:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 18:23:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5FE4F7142D7
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 18:23:24 -0800 (PST)
Message-ID: <33063628.1165285404390.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 18:23:24 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12455497 ] 
            
Konstantin Shvachko commented on HADOOP-227:
--------------------------------------------

Merging of fsimage with the edits can be done using O(sqrt( number of files )) memory.

Suppose the number of files in fsimage (sorted by path name) is N.
I divide fsimage into blocks so that each block has B=sqrt(N) namespace entries.
The number of such blocks will be also M=sqrt(N).
For each block we store in memory the path name of the first entry of the block, and the block offset.
I then start reading the edits file. For every operation in edits I read an appropriate block from
fsimage using the table in-memory, look for the appropriate entry, and perform operation on the 
corresponding file. Update operations are performed in place, remove just leaves the free space 
in the block. When a new entry needs to be added current block is split into two new blocks each 
containing half of the records of the original block, and is stored in the end of the fsimage file.
The in-memory table is also updated to reflect new keys and new block offsets.
This algorithm needs to keep in memory the table of size M and one block of size B.
The total size of memory used is M + B = O(sqrt(N)).

If we need to tighten the memory requirement then we can divide N into smaller number 
of blocks (reduce M) and read a part of the block each time (reduce B).
The price is more disk IOs, which seems acceptable, for the name-node disk usage is not critical.


> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Milind Bhandarkar
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 02:58:44 2006
Return-Path: 
 <hadoop-dev-return-5606-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19725 invoked from network); 5 Dec 2006 02:58:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 02:58:44 -0000
Received: (qmail 95850 invoked by uid 500); 5 Dec 2006 02:58:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95821 invoked by uid 500); 5 Dec 2006 02:58:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95812 invoked by uid 99); 5 Dec 2006 02:58:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 18:58:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 18:58:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2EF207141E4
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 18:58:23 -0800 (PST)
Message-ID: <28941072.1165287503189.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 18:58:23 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-756?page=comments#action_12455498 ] 
            
Konstantin Shvachko commented on HADOOP-756:
--------------------------------------------

while(!done) { 
calculates conditional expression once, while 
while (true) { ... if (done)
does it twice.


> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: safemodewait.patch
>
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 03:25:43 2006
Return-Path: 
 <hadoop-dev-return-5607-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25909 invoked from network); 5 Dec 2006 03:25:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 03:25:43 -0000
Received: (qmail 19515 invoked by uid 500); 5 Dec 2006 03:25:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19486 invoked by uid 500); 5 Dec 2006 03:25:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19470 invoked by uid 99); 5 Dec 2006 03:25:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 19:25:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 19:25:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 42C987142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 19:25:22 -0800 (PST)
Message-ID: <30989717.1165289122271.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 19:25:22 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-764) The memory consumption of
 processReport() in the namenode can be reduced
In-Reply-To: <21824491.1164845001071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-764?page=comments#action_12455500 ] 
            
Konstantin Shvachko commented on HADOOP-764:
--------------------------------------------

If we use iterator for old report, then oldPos and oldsize become redundant
iter.hasNext() <=> oldPos < oldsize

> The memory consumption of processReport() in the namenode can be reduced
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-764
>                 URL: http://issues.apache.org/jira/browse/HADOOP-764
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: processBlockReport.patch
>
>
> The FSNamesystem.processReport() method converts the blocklist for a datanode into an array by calling node.getBlocks(). Although this memory allocation is transient, it could possibly require the garbage-collector to work that much harder. 
> The method Block.getBlocks() should be deprecated. Code that currently uses this method should instead iterate over the Collection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 04:53:44 2006
Return-Path: 
 <hadoop-dev-return-5608-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41965 invoked from network); 5 Dec 2006 04:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 04:53:44 -0000
Received: (qmail 89066 invoked by uid 500); 5 Dec 2006 04:53:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88837 invoked by uid 500); 5 Dec 2006 04:53:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88828 invoked by uid 99); 5 Dec 2006 04:53:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 20:53:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 20:53:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1A9647141E4
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 20:53:23 -0800 (PST)
Message-ID: <31409026.1165294403106.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 20:53:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-756?page=comments#action_12455510 ] 
            
Owen O'Malley commented on HADOOP-756:
--------------------------------------

True, but unless this is a tight inner loop the performance isn't worth the increase in mental complexity of having a non-standard loop body. 

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: safemodewait.patch
>
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 05:55:45 2006
Return-Path: 
 <hadoop-dev-return-5609-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53772 invoked from network); 5 Dec 2006 05:55:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 05:55:45 -0000
Received: (qmail 38651 invoked by uid 500); 5 Dec 2006 05:55:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38626 invoked by uid 500); 5 Dec 2006 05:55:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38617 invoked by uid 99); 5 Dec 2006 05:55:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 21:55:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 21:55:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 48EB77142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 21:55:24 -0800 (PST)
Message-ID: <20208055.1165298124295.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 21:55:24 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-673) the task execution environment should
 have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-673?page=all ]

Mahadev konar updated HADOOP-673:
---------------------------------

    Attachment: cwd.patch

this patch fixes the problem. It implements owens second proposal ie.
1) The current working dir for each task is the task directory
2) for streaming all the contents of job.jar are symlinked into this current working directory for the tasks.

This patch depends upon HADOOP-748. I have included the patch for HADOOP-748 in this patch.

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>         Attachments: cwd.patch
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 05:55:48 2006
Return-Path: 
 <hadoop-dev-return-5610-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53816 invoked from network); 5 Dec 2006 05:55:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 05:55:48 -0000
Received: (qmail 39094 invoked by uid 500); 5 Dec 2006 05:55:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38891 invoked by uid 500); 5 Dec 2006 05:55:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38882 invoked by uid 99); 5 Dec 2006 05:55:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 21:55:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 21:55:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 112087142E1
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 21:55:27 -0800 (PST)
Message-ID: <853230.1165298127060.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 21:55:27 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-673) the task execution environment should
 have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-673?page=all ]

Mahadev konar updated HADOOP-673:
---------------------------------

    Status: Patch Available  (was: Open)

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>         Attachments: cwd.patch
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 07:10:50 2006
Return-Path: 
 <hadoop-dev-return-5611-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68073 invoked from network); 5 Dec 2006 07:10:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 07:10:50 -0000
Received: (qmail 32959 invoked by uid 500); 5 Dec 2006 07:10:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32936 invoked by uid 500); 5 Dec 2006 07:10:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32927 invoked by uid 99); 5 Dec 2006 07:10:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 23:10:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 23:10:49 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0E06A7142F5
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 23:10:28 -0800 (PST)
Message-ID: <32331177.1165302628054.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 23:10:28 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12455529 ] 
            
Owen O'Malley commented on HADOOP-619:
--------------------------------------

I really don't like this proposal. It adds custom syntax namly the ';' operator that binds the wrong way in that it is tighter than ','. I'm ok with either:

1. The input paths are all directories and there is a single glob or regex filter on filenames.
2. The input paths are files or directories.

In either case, I think that the input paths should be globbed by the file system.

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 07:24:46 2006
Return-Path: 
 <hadoop-dev-return-5612-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71544 invoked from network); 5 Dec 2006 07:24:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 07:24:46 -0000
Received: (qmail 49987 invoked by uid 500); 5 Dec 2006 07:24:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49759 invoked by uid 500); 5 Dec 2006 07:24:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49750 invoked by uid 99); 5 Dec 2006 07:24:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 23:24:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 23:24:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3C8DB7142BF
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 23:24:25 -0800 (PST)
Message-ID: <8322059.1165303465245.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 23:24:25 -0800 (PST)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12455530 ] 
            
eric baldeschwieler commented on HADOOP-227:
--------------------------------------------

Sounds a lot like a BTree and comes with all of the issues.  Lots of IO and complexity.  Reimplementing that seems like a bad idea.  perhaps you can find a good java BTree, but this seems like a big, heavy piece of code.

Why do we  need to do this?

> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Milind Bhandarkar
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 07:27:21 2006
Return-Path: 
 <hadoop-dev-return-5613-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72200 invoked from network); 5 Dec 2006 07:27:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 07:27:21 -0000
Received: (qmail 52040 invoked by uid 500); 5 Dec 2006 07:27:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51804 invoked by uid 500); 5 Dec 2006 07:27:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51795 invoked by uid 99); 5 Dec 2006 07:27:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 23:27:29 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 23:27:18 -0800
Received: from [192.168.1.66] ([172.21.179.11])
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kB57QprT023146;
	Mon, 4 Dec 2006 23:26:52 -0800 (PST)
In-Reply-To: <32331177.1165302628054.JavaMail.jira@brutus>
References: <32331177.1165302628054.JavaMail.jira@brutus>
Mime-Version: 1.0 (Apple Message framework v624)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <d139fa1c7438765c03504e3172e07ca3@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
Date: Mon, 4 Dec 2006 23:26:51 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org

+1 for option 2.  Option 1 seems (a) incomplete, and (b) too complicated

(I understand option 2 as
-- there may be multiple inputs specified
-- each is a glob pattern matching one or more files or directories
-- if a pattern matches a directory, all files in the directory,  
excluding "hidden" files are include into the input.   That is  
)

On Dec 4, 2006, at 11:10 PM, Owen O'Malley (JIRA) wrote:

>     [  
> http://issues.apache.org/jira/browse/HADOOP-619? 
> page=comments#action_12455529 ]
>
> Owen O'Malley commented on HADOOP-619:
> --------------------------------------
>
> I really don't like this proposal. It adds custom syntax namly the ';'  
> operator that binds the wrong way in that it is tighter than ','. I'm  
> ok with either:
>
> 1. The input paths are all directories and there is a single glob or  
> regex filter on filenames.
> 2. The input paths are files or directories.
>
> In either case, I think that the input paths should be globbed by the  
> file system.
>
>> Unify Map-Reduce and Streaming to take the same globbed input  
>> specification
>> ---------------------------------------------------------------------- 
>> -----
>>
>>                 Key: HADOOP-619
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>>             Project: Hadoop
>>          Issue Type: Improvement
>>          Components: mapred
>>            Reporter: eric baldeschwieler
>>         Assigned To: Sanjay Dahiya
>>
>> Right now streaming input is specified very differently from other  
>> map-reduce input.  It would be good if these two apps could take much  
>> more similar input specs.
>> In particular -input in streaming expects a file or glob pattern  
>> while MR takes a directory.  It would be cool if both could take a  
>> glob patern of files and if both took a directory by default (with  
>> some patern excluded to allow logs, metadata and other framework  
>> output to be safely stored).
>> We want to be sure that MR input is backward compatible over this  
>> change.  I propose that a single file should be accepted as an input  
>> or a single directory.  Globs should only match directories if the  
>> paterns is '/' terminated, to avoid massive inputs specified by  
>> mistake.
>> Thoughts?
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Tue Dec  5 07:41:44 2006
Return-Path: 
 <hadoop-dev-return-5614-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74195 invoked from network); 5 Dec 2006 07:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 07:41:44 -0000
Received: (qmail 69991 invoked by uid 500); 5 Dec 2006 07:41:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69951 invoked by uid 500); 5 Dec 2006 07:41:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69926 invoked by uid 99); 5 Dec 2006 07:41:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 23:41:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 23:41:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E88757141E4
	for <hadoop-dev@lucene.apache.org>; Mon,  4 Dec 2006 23:41:22 -0800 (PST)
Message-ID: <16595805.1165304482949.JavaMail.jira@brutus>
Date: Mon, 4 Dec 2006 23:41:22 -0800 (PST)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12455532 ] 
            
eric baldeschwieler commented on HADOOP-619:
--------------------------------------------

Perhaps we should just limit to either globing or a single directory per argument and simply drop directories from globbing?  This seems fairly simple and not too restrictive in practice.

I agree that if a directory is used we should exclude files starting with "_".  This will allow us to put metadata in output directories.  I think we should also simply exclude subdirectories in input directories.  Again, I doubt this will prove restrictive in practice.

It seems to me we should error out if any glob matches no files or a listed input directory is not present.  Perhaps we could provide another switch for an optional input in case users actual want a job to run if an input spec doesn't match any input.

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 08:01:01 2006
Return-Path: 
 <hadoop-dev-return-5615-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78393 invoked from network); 5 Dec 2006 08:01:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 08:01:01 -0000
Received: (qmail 88971 invoked by uid 500); 5 Dec 2006 08:00:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88939 invoked by uid 500); 5 Dec 2006 08:00:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88890 invoked by uid 99); 5 Dec 2006 08:00:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 00:00:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 00:00:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E4C0F7142F5
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 00:00:26 -0800 (PST)
Message-ID: <13164786.1165305626932.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 00:00:26 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12455537 ] 
            
Owen O'Malley commented on HADOOP-619:
--------------------------------------

just to clarify my proposal, it would look like:

for p in job.getInputPaths():
  for g in p.globPaths():
    if g.isFIle():
       fileList.add(g)
    else:
       for f in g.listFiles():
          fileList.add(f)

I don't understand what you are proposing, Eric. Is it:

for p in job.getInputPaths:
  if p.isDirectory():
     for f in p.listFiles():
        fileList.add(f)
  else:
     for g in p.globPaths():
         if g.isFile():
            fileList.add(g)

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 08:08:24 2006
Return-Path: 
 <hadoop-dev-return-5616-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79683 invoked from network); 5 Dec 2006 08:08:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 08:08:24 -0000
Received: (qmail 99379 invoked by uid 500); 5 Dec 2006 08:08:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99357 invoked by uid 500); 5 Dec 2006 08:08:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99348 invoked by uid 99); 5 Dec 2006 08:08:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 00:08:32 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 00:08:21 -0800
Received: from [192.168.1.66] ([172.21.179.11])
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kB587qMD024674
	for <hadoop-dev@lucene.apache.org>; Tue, 5 Dec 2006 00:07:52 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <16595805.1165304482949.JavaMail.jira@brutus>
References: <16595805.1165304482949.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <b137c3e34dd213de53f073b3dbdd5117@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
Date: Tue, 5 Dec 2006 00:07:51 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org

I have a directory with per-week subdirectories.
Currently, I have specify a separate -input for each subdirectory, with  
a glob pattern (the data start in 2004, and is supposed to be added  
weekly, ongoing).
It is possible to flatten the structure, but is there a big conceptual  
or implementational problem with general globbing?

On Dec 4, 2006, at 11:41 PM, eric baldeschwieler (JIRA) wrote:

>     [  
> http://issues.apache.org/jira/browse/HADOOP-619? 
> page=comments#action_12455532 ]
>
> eric baldeschwieler commented on HADOOP-619:
> --------------------------------------------
>
> Perhaps we should just limit to either globing or a single directory  
> per argument and simply drop directories from globbing?  This seems  
> fairly simple and not too restrictive in practice.
>
> I agree that if a directory is used we should exclude files starting  
> with "_".  This will allow us to put metadata in output directories.   
> I think we should also simply exclude subdirectories in input  
> directories.  Again, I doubt this will prove restrictive in practice.
>
> It seems to me we should error out if any glob matches no files or a  
> listed input directory is not present.  Perhaps we could provide  
> another switch for an optional input in case users actual want a job  
> to run if an input spec doesn't match any input.
>
>> Unify Map-Reduce and Streaming to take the same globbed input  
>> specification
>> ---------------------------------------------------------------------- 
>> -----
>>
>>                 Key: HADOOP-619
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>>             Project: Hadoop
>>          Issue Type: Improvement
>>          Components: mapred
>>            Reporter: eric baldeschwieler
>>         Assigned To: Sanjay Dahiya
>>
>> Right now streaming input is specified very differently from other  
>> map-reduce input.  It would be good if these two apps could take much  
>> more similar input specs.
>> In particular -input in streaming expects a file or glob pattern  
>> while MR takes a directory.  It would be cool if both could take a  
>> glob patern of files and if both took a directory by default (with  
>> some patern excluded to allow logs, metadata and other framework  
>> output to be safely stored).
>> We want to be sure that MR input is backward compatible over this  
>> change.  I propose that a single file should be accepted as an input  
>> or a single directory.  Globs should only match directories if the  
>> paterns is '/' terminated, to avoid massive inputs specified by  
>> mistake.
>> Thoughts?
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Tue Dec  5 08:13:44 2006
Return-Path: 
 <hadoop-dev-return-5617-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80728 invoked from network); 5 Dec 2006 08:13:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 08:13:44 -0000
Received: (qmail 5018 invoked by uid 500); 5 Dec 2006 08:13:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4780 invoked by uid 500); 5 Dec 2006 08:13:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4771 invoked by uid 99); 5 Dec 2006 08:13:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 00:13:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 00:13:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F217E7142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 00:13:22 -0800 (PST)
Message-ID: <28856538.1165306402988.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 00:13:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-639?page=all ]

Arun C Murthy updated HADOOP-639:
---------------------------------

    Attachment: HADOOP-639_4_20061205.patch

Updated patch to reflect changes to trunk...

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-639_1.patch, HADOOP-639_2_20061130.patch, HADOOP-639_3_20061201.patch, HADOOP-639_4_20061205.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 08:18:44 2006
Return-Path: 
 <hadoop-dev-return-5618-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81546 invoked from network); 5 Dec 2006 08:18:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 08:18:44 -0000
Received: (qmail 10340 invoked by uid 500); 5 Dec 2006 08:18:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10100 invoked by uid 500); 5 Dec 2006 08:18:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10090 invoked by uid 99); 5 Dec 2006 08:18:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 00:18:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 00:18:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 279AD7142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 00:18:23 -0800 (PST)
Message-ID: <17990571.1165306703159.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 00:18:23 -0800 (PST)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12455541 ] 
            
eric baldeschwieler commented on HADOOP-619:
--------------------------------------------

owen: yes

arkady: -input ...somepath/*/*.gz or somesuch should work in this proposal, so that should solve your problem, right?

Maybe I should relax on allowing directories in glob patterns and directories.  It is just that this sort of matching can be really messy on typos.  Standard unix tools don't allow it.  But I guess as long as it is not recursive, the limits of input formats and such should keep this from going too nuts.

So I'm ok with owen's proposal.  (No recursion, right?)

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 09:01:47 2006
Return-Path: 
 <hadoop-dev-return-5619-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2299 invoked from network); 5 Dec 2006 09:01:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 09:01:47 -0000
Received: (qmail 69463 invoked by uid 500); 5 Dec 2006 09:01:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69439 invoked by uid 500); 5 Dec 2006 09:01:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69430 invoked by uid 99); 5 Dec 2006 09:01:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 01:01:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 01:01:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5D8BC7142EC
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 01:01:25 -0800 (PST)
Message-ID: <25393232.1165309285380.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 01:01:25 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12455550 ] 
            
Runping Qi commented on HADOOP-619:
-----------------------------------


How flexible is globPaths()?

Is p.glovPaths() legal for the following p:
    p = "root1/*/foo/*/*.gz"
    p = "root2/*/200611??/*/*.gz"

In other words, can I  specify the following inut paths:
    "root1/*/foo/*/*.gz,root2/*/200611??/*/*.gz" in jobconf?
I am OK with Owen's proposal. 

Another point related to specifying different mapper classes for different input files: we should 
use some similar syntax:
    "mapperClass1@root1/*/foo/*/*.gz,mapperClass2@root2/*/200611??/*/*.gz"

thoughts?




    




> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 09:29:55 2006
Return-Path: 
 <hadoop-dev-return-5620-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13705 invoked from network); 5 Dec 2006 09:29:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 09:29:55 -0000
Received: (qmail 21677 invoked by uid 500); 5 Dec 2006 09:29:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21616 invoked by uid 500); 5 Dec 2006 09:29:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21593 invoked by uid 99); 5 Dec 2006 09:29:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 01:29:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 01:29:42 -0800
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id kB59TM007882
	for <hadoop-dev@lucene.apache.org>; Tue, 5 Dec 2006 03:29:22 -0600
Message-ID: <45753BF5.5010400@getopt.org>
Date: Tue, 05 Dec 2006 10:29:25 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: distributed search
References: <J9AXT0$E4F3E8F02192B33F0BC34105F9B9AFA3@libero.it>
 <45749880.7060008@dragonflymc.com> <45749DDD.9030005@getopt.org>
 <4574AF58.5060508@dragonflymc.com>
In-Reply-To: <4574AF58.5060508@dragonflymc.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Dennis Kubes wrote:
> All,
>
> We have two version of a type of index splitter.  The first version 
> would run an indexing job and then using the completed index as input 
> would read the number of documents in the index and take a requested 
> split size.  From this it used a custom index input format to create 
> splits according to document id.   We would run a job that would map 
> out index urls as keys and documents with their ids wrapped in a 
> SerializableWritable object as the values.  Then inside of a second 
> job using the index as input we would have a MapRunner that would read 
> the other supporting databases (linkdb, segments) and map all objects 
> as ObjectWritables.  Then on the reduce we had a custom Output and 
> OutputFormat that took all of the objects and wrote out the databases 
> and indexes into each split.
>
> There was a problem with this first approach though in that writing 
> out an index from a previously serialized document would lose any 
> fields that are not stored (which is most).  So we went with a second 
> approach.

Yes, that's the nature of the beast - I sort of hoped that you 
implemented a true splitter, which directly splits term posting lists 
according to doc id. This is possible, and doesn't require using stored 
fields - the only problem being that someone well acquainted with Lucene 
internals needs to write it .. ;)


>
> The second approach takes a number of splits and runs through an 
> indexing job on the fly.  It calls the indexing and scoring filters.  
> It uses the linkdb, crawldb, and segments as input.  As it indexes is 
> also splits the databases and indexes into the number of reduce tasks 
> so that the final output is multiple splits each hold a part of the 
> index and its supporting databases.  Each of  the databases holds only 
> the information for the urls that are in its part of the index.  These 
> parts can then be pushed to separate search servers.  This type of 
> splitting works well but you can NOT define a specific number of 
> documents or urls per split and sometimes one split will have alot 
> more urls than another if you

Why? it depends on the partitioner, or the output format that you are 
using. E.g. in SegmentMerger I implemented an OutputFormat that produces 
several segments simultaneously, writing to their respective parts 
depending on a value of metadata. This value may be used to switch 
sequentially between output "slices" so that urls are spread evenly 
across the "slices".

> are indexing some sites that have alot of pages (i.e. wikipedia or cnn 
> archives).  This is currently how our system works.  We fetch, invert 
> links, run through some other processes, and then index and split on 
> the fly.  Then we use python scripts to pull each split directly from 
> the DFS to each search server and then start the search servers.
>
> We are still working on the splitter because the ideal approach would 
> be to be able to specify a number of documents per split as well as to 
> group by different keys, not just url.  I would be happy to share the 
> current code but it is highly integrated so I would need to pull it 
> out of our code base first.  It would be best if I could send it to 
> someone, say Andrzej, to take a look at first.

Unless I'm missing something, SegmentMerger.SegmentOutputFormat should 
satisfy these requirements, you would just need to modify the job 
implementation ...

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



From MAILER-DAEMON Tue Dec  5 13:57:45 2006
Return-Path: 
 <hadoop-dev-return-5621-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83455 invoked from network); 5 Dec 2006 13:57:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 13:57:45 -0000
Received: (qmail 42414 invoked by uid 500); 5 Dec 2006 13:57:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42379 invoked by uid 500); 5 Dec 2006 13:57:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42369 invoked by uid 99); 5 Dec 2006 13:57:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 05:57:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 05:57:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1F8527142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 05:57:23 -0800 (PST)
Message-ID: <31207286.1165327043126.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 05:57:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-756?page=all ]

dhruba borthakur updated HADOOP-756:
------------------------------------

    Attachment: safemodewait1.patch

Incorporated code review comments.

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: safemodewait1.patch
>
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 13:57:47 2006
Return-Path: 
 <hadoop-dev-return-5622-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83512 invoked from network); 5 Dec 2006 13:57:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 13:57:47 -0000
Received: (qmail 42683 invoked by uid 500); 5 Dec 2006 13:57:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42652 invoked by uid 500); 5 Dec 2006 13:57:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42643 invoked by uid 99); 5 Dec 2006 13:57:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 05:57:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 05:57:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 469CA7142F6
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 05:57:25 -0800 (PST)
Message-ID: <9151663.1165327045286.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 05:57:25 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-756?page=all ]

dhruba borthakur updated HADOOP-756:
------------------------------------

    Attachment:     (was: safemodewait.patch)

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: safemodewait1.patch
>
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 13:57:58 2006
Return-Path: 
 <hadoop-dev-return-5623-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83849 invoked from network); 5 Dec 2006 13:57:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 13:57:58 -0000
Received: (qmail 44006 invoked by uid 500); 5 Dec 2006 13:58:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43973 invoked by uid 500); 5 Dec 2006 13:58:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43921 invoked by uid 99); 5 Dec 2006 13:58:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 05:58:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 05:57:51 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C6CC1714313
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 05:57:31 -0800 (PST)
Message-ID: <13127195.1165327051812.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 05:57:31 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-756?page=all ]

dhruba borthakur updated HADOOP-756:
------------------------------------

    Status: Patch Available  (was: Open)

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: safemodewait1.patch
>
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 14:07:43 2006
Return-Path: 
 <hadoop-dev-return-5624-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88277 invoked from network); 5 Dec 2006 14:07:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 14:07:43 -0000
Received: (qmail 59568 invoked by uid 500); 5 Dec 2006 14:07:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59539 invoked by uid 500); 5 Dec 2006 14:07:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59530 invoked by uid 99); 5 Dec 2006 14:07:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 06:07:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 06:07:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4C9A47142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 06:07:22 -0800 (PST)
Message-ID: <6343156.1165327642311.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 06:07:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-774) Datanodes fails to heartbeat when a
 directory with a large number of blocks is deleted
In-Reply-To: <10916275.1165019421088.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-774?page=all ]

dhruba borthakur updated HADOOP-774:
------------------------------------

    Attachment: chunkinvalidateBlocks2.java

Incorporated review comments.

> Datanodes fails to heartbeat when a directory with a large number of blocks is deleted
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-774
>                 URL: http://issues.apache.org/jira/browse/HADOOP-774
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: chunkinvalidateBlocks2.java
>
>
> If a user removes a few files that are huge, it causes the namenode to send BlockInvalidate command to the relevant Datanodes. The Datanode process the blockInvalidate command as part of its heartbeat thread. If the number of blocks to be invalidated is huge, the datanode takes a long time to process it. This causes the datanode to not send new heartbeats to the namenode. The namenode declares the datanode as dead!
> 1. One option is to process the blockInvalidate as a separate thread from the heartbeat thread in the Datanode. 
> 2. Another option would be to constrain the namenode to send a max (e.g. 500) blocks per blockInvalidate message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 14:07:47 2006
Return-Path: 
 <hadoop-dev-return-5625-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88357 invoked from network); 5 Dec 2006 14:07:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 14:07:47 -0000
Received: (qmail 60052 invoked by uid 500); 5 Dec 2006 14:07:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60011 invoked by uid 500); 5 Dec 2006 14:07:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59988 invoked by uid 99); 5 Dec 2006 14:07:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 06:07:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 06:07:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A0C3E7142E1
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 06:07:23 -0800 (PST)
Message-ID: <6715054.1165327643656.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 06:07:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-774) Datanodes fails to heartbeat when a
 directory with a large number of blocks is deleted
In-Reply-To: <10916275.1165019421088.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-774?page=all ]

dhruba borthakur updated HADOOP-774:
------------------------------------

    Attachment:     (was: chunkinvalidateBlocks.java)

> Datanodes fails to heartbeat when a directory with a large number of blocks is deleted
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-774
>                 URL: http://issues.apache.org/jira/browse/HADOOP-774
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: chunkinvalidateBlocks2.java
>
>
> If a user removes a few files that are huge, it causes the namenode to send BlockInvalidate command to the relevant Datanodes. The Datanode process the blockInvalidate command as part of its heartbeat thread. If the number of blocks to be invalidated is huge, the datanode takes a long time to process it. This causes the datanode to not send new heartbeats to the namenode. The namenode declares the datanode as dead!
> 1. One option is to process the blockInvalidate as a separate thread from the heartbeat thread in the Datanode. 
> 2. Another option would be to constrain the namenode to send a max (e.g. 500) blocks per blockInvalidate message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 14:12:48 2006
Return-Path: 
 <hadoop-dev-return-5626-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90511 invoked from network); 5 Dec 2006 14:12:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 14:12:48 -0000
Received: (qmail 71285 invoked by uid 500); 5 Dec 2006 14:12:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71266 invoked by uid 500); 5 Dec 2006 14:12:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71257 invoked by uid 99); 5 Dec 2006 14:12:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 06:12:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 06:12:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 440DB7142F6
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 06:12:26 -0800 (PST)
Message-ID: <359414.1165327946275.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 06:12:26 -0800 (PST)
From: "Philippe Gassmann (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-227?page=all ]

Philippe Gassmann updated HADOOP-227:
-------------------------------------

    Attachment: patch-async-checkpoints-0.9.0

Here is a patch on the current Hadoop trunk .

This patch do automatic checkpoints without locking the filesystem.

When it is time to do a checkpoint, edit logs stream are closed and new edit logs are opened, a thread is created that create a fake FSNamesystem that will merge previously written logs into fsimage. At the end, new edit logs are renamed to their old names.

It  will consume as much memory during the chekpointing as the current running instance of the FSNamesystem.

The auto checkpointing feature is disabled by default. So applying the patch "as is" is almost safe. (It does not break current image and logs format and loading philosophy) 

Nonetheless, I can understand that you, the Hadoop dev team,  does not want to integrate this huge hacky patch as a part of the hadoop distribution...


> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Milind Bhandarkar
>         Attachments: patch-async-checkpoints-0.9.0
>
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 14:27:25 2006
Return-Path: 
 <hadoop-dev-return-5627-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6040 invoked from network); 5 Dec 2006 14:27:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 14:27:25 -0000
Received: (qmail 1474 invoked by uid 500); 5 Dec 2006 14:27:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1447 invoked by uid 500); 5 Dec 2006 14:27:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1438 invoked by uid 99); 5 Dec 2006 14:27:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 06:27:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 06:27:23 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 388CC7142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 06:27:02 -0800 (PST)
Message-ID: <25287844.1165328822228.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 06:27:02 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12455648 ] 
            
Sanjay Dahiya commented on HADOOP-619:
--------------------------------------

Runping: 
The patterns you mentioned work, basically it breaks the input path in parts and matches files/directories at each step going forward(without recursing) so it should be ok with these types of patterns. 

>The list of matched files 
>   should be part of the job's status so that the user can examine them through web UI. 
The list of input paths will be a part of jobclient so it will be available through the JobTracker UI anyways. Does this sound ok ? 



> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 14:51:48 2006
Return-Path: 
 <hadoop-dev-return-5628-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19734 invoked from network); 5 Dec 2006 14:51:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 14:51:48 -0000
Received: (qmail 57387 invoked by uid 500); 5 Dec 2006 14:51:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57357 invoked by uid 500); 5 Dec 2006 14:51:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57348 invoked by uid 99); 5 Dec 2006 14:51:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 06:51:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 06:51:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 35B237142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 06:51:26 -0800 (PST)
Message-ID: <16213721.1165330286217.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 06:51:26 -0800 (PST)
From: "Philippe Gassmann (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-227?page=all ]

Philippe Gassmann updated HADOOP-227:
-------------------------------------

    Attachment: patch-async-checkpoints-0.9.0

Right patch with a right name for the unit test case

> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Milind Bhandarkar
>         Attachments: patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0
>
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 14:57:47 2006
Return-Path: 
 <hadoop-dev-return-5629-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22460 invoked from network); 5 Dec 2006 14:57:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 14:57:47 -0000
Received: (qmail 73400 invoked by uid 500); 5 Dec 2006 14:57:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73374 invoked by uid 500); 5 Dec 2006 14:57:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73359 invoked by uid 99); 5 Dec 2006 14:57:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 06:57:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 06:57:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 965DE7142BF
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 06:57:24 -0800 (PST)
Message-ID: <15038966.1165330644613.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 06:57:24 -0800 (PST)
From: "Philippe Gassmann (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-227?page=all ]

Philippe Gassmann updated HADOOP-227:
-------------------------------------

    Attachment: patch-async-checkpoints-0.9.0

Ouch ! I'm tired today sorry, here is the right patch !

> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Milind Bhandarkar
>         Attachments: patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0
>
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 15:22:45 2006
Return-Path: 
 <hadoop-dev-return-5630-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31208 invoked from network); 5 Dec 2006 15:22:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 15:22:45 -0000
Received: (qmail 38154 invoked by uid 500); 5 Dec 2006 15:22:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38090 invoked by uid 500); 5 Dec 2006 15:22:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38080 invoked by uid 99); 5 Dec 2006 15:22:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 07:22:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 07:22:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 35A617142BF
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 07:22:23 -0800 (PST)
Message-ID: <10845049.1165332143217.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 07:22:23 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-639?page=all ]

Arun C Murthy updated HADOOP-639:
---------------------------------

    Status: Open  (was: Patch Available)

Ah, thanks for the clarification Mahadev - let me get back with that change too...

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-639_1.patch, HADOOP-639_2_20061130.patch, HADOOP-639_3_20061201.patch, HADOOP-639_4_20061205.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 16:25:42 2006
Return-Path: 
 <hadoop-dev-return-5631-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59506 invoked from network); 5 Dec 2006 16:25:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 16:25:42 -0000
Received: (qmail 93462 invoked by uid 500); 5 Dec 2006 16:25:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93441 invoked by uid 500); 5 Dec 2006 16:25:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93432 invoked by uid 99); 5 Dec 2006 16:25:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 08:25:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 08:25:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 237217142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 08:25:21 -0800 (PST)
Message-ID: <12863.1165335921141.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 08:25:21 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-780) ReduceTask.ValueIterator should apply
 job configuration to Configurable values
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

ReduceTask.ValueIterator should apply job configuration to Configurable values
------------------------------------------------------------------------------

                 Key: HADOOP-780
                 URL: http://issues.apache.org/jira/browse/HADOOP-780
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.9.0, 0.10.0
         Environment: Nutch trunk/, trying to upgrade to Hadoop 0.9.0.
            Reporter: Andrzej Bialecki 
         Assigned To: Andrzej Bialecki 
             Fix For: 0.10.0, 0.9.0


ReduceTask.ValueIterator should apply job configuration to Configurable values. This is similar to the way it's done in ipc.Client.Connection.run().

Some classes in Nutch (such as FetcherOutput and ParseData) rely on this behavior, and if it's not set an NPE is thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 16:29:53 2006
Return-Path: 
 <hadoop-dev-return-5632-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61246 invoked from network); 5 Dec 2006 16:29:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 16:29:53 -0000
Received: (qmail 5333 invoked by uid 500); 5 Dec 2006 16:29:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5299 invoked by uid 500); 5 Dec 2006 16:29:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5209 invoked by uid 99); 5 Dec 2006 16:29:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 08:29:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 08:29:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 249577142F6
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 08:29:26 -0800 (PST)
Message-ID: <24555154.1165336166147.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 08:29:26 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-780) ReduceTask.ValueIterator should apply
 job configuration to Configurable values
In-Reply-To: <12863.1165335921141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-780?page=all ]

Andrzej Bialecki  updated HADOOP-780:
-------------------------------------

    Attachment: configurable.patch

Apply current job configuration to newly created Configurable values.

> ReduceTask.ValueIterator should apply job configuration to Configurable values
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-780
>                 URL: http://issues.apache.org/jira/browse/HADOOP-780
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.0, 0.10.0
>         Environment: Nutch trunk/, trying to upgrade to Hadoop 0.9.0.
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>             Fix For: 0.9.0, 0.10.0
>
>         Attachments: configurable.patch
>
>
> ReduceTask.ValueIterator should apply job configuration to Configurable values. This is similar to the way it's done in ipc.Client.Connection.run().
> Some classes in Nutch (such as FetcherOutput and ParseData) rely on this behavior, and if it's not set an NPE is thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 16:29:58 2006
Return-Path: 
 <hadoop-dev-return-5633-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61400 invoked from network); 5 Dec 2006 16:29:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 16:29:58 -0000
Received: (qmail 5794 invoked by uid 500); 5 Dec 2006 16:29:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5756 invoked by uid 500); 5 Dec 2006 16:29:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5687 invoked by uid 99); 5 Dec 2006 16:29:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 08:29:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 08:29:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 466237142FB
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 08:29:28 -0800 (PST)
Message-ID: <748546.1165336168285.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 08:29:28 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-780) ReduceTask.ValueIterator should
 apply job configuration to Configurable values
In-Reply-To: <12863.1165335921141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-780?page=all ]

Work on HADOOP-780 started by Andrzej Bialecki .

> ReduceTask.ValueIterator should apply job configuration to Configurable values
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-780
>                 URL: http://issues.apache.org/jira/browse/HADOOP-780
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.0, 0.10.0
>         Environment: Nutch trunk/, trying to upgrade to Hadoop 0.9.0.
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>             Fix For: 0.9.0, 0.10.0
>
>         Attachments: configurable.patch
>
>
> ReduceTask.ValueIterator should apply job configuration to Configurable values. This is similar to the way it's done in ipc.Client.Connection.run().
> Some classes in Nutch (such as FetcherOutput and ParseData) rely on this behavior, and if it's not set an NPE is thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 16:29:59 2006
Return-Path: 
 <hadoop-dev-return-5634-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61445 invoked from network); 5 Dec 2006 16:29:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 16:29:59 -0000
Received: (qmail 6147 invoked by uid 500); 5 Dec 2006 16:30:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6114 invoked by uid 500); 5 Dec 2006 16:29:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6043 invoked by uid 99); 5 Dec 2006 16:29:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 08:29:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 08:29:50 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 090BA7142FD
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 08:29:30 -0800 (PST)
Message-ID: <14555392.1165336170034.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 08:29:30 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-780) ReduceTask.ValueIterator should apply
 job configuration to Configurable values
In-Reply-To: <12863.1165335921141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-780?page=all ]

Andrzej Bialecki  updated HADOOP-780:
-------------------------------------

    Status: Patch Available  (was: In Progress)

> ReduceTask.ValueIterator should apply job configuration to Configurable values
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-780
>                 URL: http://issues.apache.org/jira/browse/HADOOP-780
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.0, 0.10.0
>         Environment: Nutch trunk/, trying to upgrade to Hadoop 0.9.0.
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>             Fix For: 0.10.0, 0.9.0
>
>         Attachments: configurable.patch
>
>
> ReduceTask.ValueIterator should apply job configuration to Configurable values. This is similar to the way it's done in ipc.Client.Connection.run().
> Some classes in Nutch (such as FetcherOutput and ParseData) rely on this behavior, and if it's not set an NPE is thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 16:49:44 2006
Return-Path: 
 <hadoop-dev-return-5635-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70645 invoked from network); 5 Dec 2006 16:49:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 16:49:44 -0000
Received: (qmail 66603 invoked by uid 500); 5 Dec 2006 16:49:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66572 invoked by uid 500); 5 Dec 2006 16:49:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66558 invoked by uid 99); 5 Dec 2006 16:49:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 08:49:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.133.162.98] (HELO linuxfly.dragonflymc.com) (63.133.162.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 08:49:41 -0800
Received: from [192.168.1.246] (bigfly.visvo.com [192.168.1.246])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id 46BA3C2006B
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 10:49:25 -0600 (CST)
Message-ID: <4575A311.3080703@dragonflymc.com>
Date: Tue, 05 Dec 2006 10:49:21 -0600
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: distributed search
References: <J9AXT0$E4F3E8F02192B33F0BC34105F9B9AFA3@libero.it>
 <45749880.7060008@dragonflymc.com> <45749DDD.9030005@getopt.org>
 <4574AF58.5060508@dragonflymc.com> <45753BF5.5010400@getopt.org>
In-Reply-To: <45753BF5.5010400@getopt.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



Andrzej Bialecki wrote:
> Dennis Kubes wrote:
>> All,
>>
>> We have two version of a type of index splitter.  The first version 
>> would run an indexing job and then using the completed index as input 
>> would read the number of documents in the index and take a requested 
>> split size.  From this it used a custom index input format to create 
>> splits according to document id.   We would run a job that would map 
>> out index urls as keys and documents with their ids wrapped in a 
>> SerializableWritable object as the values.  Then inside of a second 
>> job using the index as input we would have a MapRunner that would 
>> read the other supporting databases (linkdb, segments) and map all 
>> objects as ObjectWritables.  Then on the reduce we had a custom 
>> Output and OutputFormat that took all of the objects and wrote out 
>> the databases and indexes into each split.
>>
>> There was a problem with this first approach though in that writing 
>> out an index from a previously serialized document would lose any 
>> fields that are not stored (which is most).  So we went with a second 
>> approach.
>
> Yes, that's the nature of the beast - I sort of hoped that you 
> implemented a true splitter, which directly splits term posting lists 
> according to doc id. This is possible, and doesn't require using 
> stored fields - the only problem being that someone well acquainted 
> with Lucene internals needs to write it .. ;)
If you can explain more about this we can start taking a look in this 
direction.  I would love to get this working by a type of doc id.
>
>>
>> The second approach takes a number of splits and runs through an 
>> indexing job on the fly.  It calls the indexing and scoring filters.  
>> It uses the linkdb, crawldb, and segments as input.  As it indexes is 
>> also splits the databases and indexes into the number of reduce tasks 
>> so that the final output is multiple splits each hold a part of the 
>> index and its supporting databases.  Each of  the databases holds 
>> only the information for the urls that are in its part of the index.  
>> These parts can then be pushed to separate search servers.  This type 
>> of splitting works well but you can NOT define a specific number of 
>> documents or urls per split and sometimes one split will have alot 
>> more urls than another if you
>
> Why? it depends on the partitioner, or the output format that you are 
> using. E.g. in SegmentMerger I implemented an OutputFormat that 
> produces several segments simultaneously, writing to their respective 
> parts depending on a value of metadata. This value may be used to 
> switch sequentially between output "slices" so that urls are spread 
> evenly across the "slices".
We were using the default HashPartitioner using urls as keys but yes we 
are currently looking into custom Partioners to solve the problem of too 
uneven distribution.  Correct me if I am wrong but I though two machines 
couldn't write to the same file at the same time.  For example if 
machine X is writing part-00001 then machine Y can't also write to 
part-00001 in the same job.
>
>> are indexing some sites that have alot of pages (i.e. wikipedia or 
>> cnn archives).  This is currently how our system works.  We fetch, 
>> invert links, run through some other processes, and then index and 
>> split on the fly.  Then we use python scripts to pull each split 
>> directly from the DFS to each search server and then start the search 
>> servers.
>>
>> We are still working on the splitter because the ideal approach would 
>> be to be able to specify a number of documents per split as well as 
>> to group by different keys, not just url.  I would be happy to share 
>> the current code but it is highly integrated so I would need to pull 
>> it out of our code base first.  It would be best if I could send it 
>> to someone, say Andrzej, to take a look at first.
>
> Unless I'm missing something, SegmentMerger.SegmentOutputFormat should 
> satisfy these requirements, you would just need to modify the job 
> implementation ...
 From what I am seeing the SegmentMerger only handles segments.  The 
splitter handle segments, linkdb, and does indexing on the fly.  The 
idea being that I didn't want to have to split and then index segments 
individually and I only wanted the linkdb and segments to hold the 
information they needed for each split.

From MAILER-DAEMON Tue Dec  5 17:10:51 2006
Return-Path: 
 <hadoop-dev-return-5636-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80579 invoked from network); 5 Dec 2006 17:10:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 17:10:51 -0000
Received: (qmail 36568 invoked by uid 500); 5 Dec 2006 17:10:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36504 invoked by uid 500); 5 Dec 2006 17:10:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36450 invoked by uid 99); 5 Dec 2006 17:10:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 09:10:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 09:10:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2FF267142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 09:10:21 -0800 (PST)
Message-ID: <11909660.1165338621193.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 09:10:21 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-781) Remove from trunk things deprecated in
 0.9 branch.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Remove from trunk things deprecated in 0.9 branch.
--------------------------------------------------

                 Key: HADOOP-781
                 URL: http://issues.apache.org/jira/browse/HADOOP-781
             Project: Hadoop
          Issue Type: Bug
            Reporter: Doug Cutting
         Assigned To: Doug Cutting
             Fix For: 0.10.0




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 17:12:47 2006
Return-Path: 
 <hadoop-dev-return-5637-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81461 invoked from network); 5 Dec 2006 17:12:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 17:12:47 -0000
Received: (qmail 47401 invoked by uid 500); 5 Dec 2006 17:12:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47376 invoked by uid 500); 5 Dec 2006 17:12:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47367 invoked by uid 99); 5 Dec 2006 17:12:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 09:12:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 09:12:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D37C87142F5
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 09:12:25 -0800 (PST)
Message-ID: <1765727.1165338745863.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 09:12:25 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-780) ReduceTask.ValueIterator should
 apply job configuration to Configurable values
In-Reply-To: <12863.1165335921141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-780?page=comments#action_12455695 ] 
            
Owen O'Malley commented on HADOOP-780:
--------------------------------------

We really should be using ReflectionUtils.newInstance which will do all of the configuration setting automatically.

> ReduceTask.ValueIterator should apply job configuration to Configurable values
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-780
>                 URL: http://issues.apache.org/jira/browse/HADOOP-780
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.0, 0.10.0
>         Environment: Nutch trunk/, trying to upgrade to Hadoop 0.9.0.
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>             Fix For: 0.9.0, 0.10.0
>
>         Attachments: configurable.patch
>
>
> ReduceTask.ValueIterator should apply job configuration to Configurable values. This is similar to the way it's done in ipc.Client.Connection.run().
> Some classes in Nutch (such as FetcherOutput and ParseData) rely on this behavior, and if it's not set an NPE is thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 17:23:44 2006
Return-Path: 
 <hadoop-dev-return-5638-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85364 invoked from network); 5 Dec 2006 17:23:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 17:23:44 -0000
Received: (qmail 85353 invoked by uid 500); 5 Dec 2006 17:23:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85325 invoked by uid 500); 5 Dec 2006 17:23:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85316 invoked by uid 99); 5 Dec 2006 17:23:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 09:23:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 09:23:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 51D027142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 09:23:22 -0800 (PST)
Message-ID: <19284358.1165339402332.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 09:23:22 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-780) ReduceTask.ValueIterator should
 apply job configuration to Configurable values
In-Reply-To: <12863.1165335921141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-780?page=comments#action_12455697 ] 
            
Andrzej Bialecki  commented on HADOOP-780:
------------------------------------------

Yes, I just noticed the same ..  Then the same code snippet in ipc.Client.Connection.run should also use ReflectionUtils. I'll prepare a new patch.

> ReduceTask.ValueIterator should apply job configuration to Configurable values
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-780
>                 URL: http://issues.apache.org/jira/browse/HADOOP-780
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.0, 0.10.0
>         Environment: Nutch trunk/, trying to upgrade to Hadoop 0.9.0.
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>             Fix For: 0.9.0, 0.10.0
>
>         Attachments: configurable.patch
>
>
> ReduceTask.ValueIterator should apply job configuration to Configurable values. This is similar to the way it's done in ipc.Client.Connection.run().
> Some classes in Nutch (such as FetcherOutput and ParseData) rely on this behavior, and if it's not set an NPE is thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 17:25:45 2006
Return-Path: 
 <hadoop-dev-return-5639-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85936 invoked from network); 5 Dec 2006 17:25:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 17:25:45 -0000
Received: (qmail 92054 invoked by uid 500); 5 Dec 2006 17:25:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92022 invoked by uid 500); 5 Dec 2006 17:25:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91971 invoked by uid 99); 5 Dec 2006 17:25:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 09:25:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 09:25:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5830A7142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 09:25:22 -0800 (PST)
Message-ID: <566701.1165339522358.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 09:25:22 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-780) ReduceTask.ValueIterator should apply
 job configuration to Configurable values
In-Reply-To: <12863.1165335921141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-780?page=all ]

Andrzej Bialecki  updated HADOOP-780:
-------------------------------------

    Attachment: configurable.patch

This patch uses ReflectionUtils.

> ReduceTask.ValueIterator should apply job configuration to Configurable values
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-780
>                 URL: http://issues.apache.org/jira/browse/HADOOP-780
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.0, 0.10.0
>         Environment: Nutch trunk/, trying to upgrade to Hadoop 0.9.0.
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>             Fix For: 0.9.0, 0.10.0
>
>         Attachments: configurable.patch
>
>
> ReduceTask.ValueIterator should apply job configuration to Configurable values. This is similar to the way it's done in ipc.Client.Connection.run().
> Some classes in Nutch (such as FetcherOutput and ParseData) rely on this behavior, and if it's not set an NPE is thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 17:25:47 2006
Return-Path: 
 <hadoop-dev-return-5640-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86004 invoked from network); 5 Dec 2006 17:25:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 17:25:47 -0000
Received: (qmail 92557 invoked by uid 500); 5 Dec 2006 17:25:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92523 invoked by uid 500); 5 Dec 2006 17:25:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92500 invoked by uid 99); 5 Dec 2006 17:25:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 09:25:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 09:25:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5EF7B7142F6
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 09:25:25 -0800 (PST)
Message-ID: <23212208.1165339525386.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 09:25:25 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-780) ReduceTask.ValueIterator should apply
 job configuration to Configurable values
In-Reply-To: <12863.1165335921141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-780?page=all ]

Andrzej Bialecki  updated HADOOP-780:
-------------------------------------

    Attachment:     (was: configurable.patch)

> ReduceTask.ValueIterator should apply job configuration to Configurable values
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-780
>                 URL: http://issues.apache.org/jira/browse/HADOOP-780
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.0, 0.10.0
>         Environment: Nutch trunk/, trying to upgrade to Hadoop 0.9.0.
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>             Fix For: 0.9.0, 0.10.0
>
>         Attachments: configurable.patch
>
>
> ReduceTask.ValueIterator should apply job configuration to Configurable values. This is similar to the way it's done in ipc.Client.Connection.run().
> Some classes in Nutch (such as FetcherOutput and ParseData) rely on this behavior, and if it's not set an NPE is thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 17:54:44 2006
Return-Path: 
 <hadoop-dev-return-5641-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99421 invoked from network); 5 Dec 2006 17:54:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 17:54:44 -0000
Received: (qmail 82593 invoked by uid 500); 5 Dec 2006 17:54:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82565 invoked by uid 500); 5 Dec 2006 17:54:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82556 invoked by uid 99); 5 Dec 2006 17:54:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 09:54:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 09:54:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 49CDF7142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 09:54:22 -0800 (PST)
Message-ID: <20680077.1165341262299.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 09:54:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-780) ReduceTask.ValueIterator should
 apply job configuration to Configurable values
In-Reply-To: <12863.1165335921141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-780?page=comments#action_12455709 ] 
            
Owen O'Malley commented on HADOOP-780:
--------------------------------------

Thanks! 

Can you fix the key creation on line 186 of ReduceTask.java so that it is created with ReflectionUtils too?

> ReduceTask.ValueIterator should apply job configuration to Configurable values
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-780
>                 URL: http://issues.apache.org/jira/browse/HADOOP-780
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.0, 0.10.0
>         Environment: Nutch trunk/, trying to upgrade to Hadoop 0.9.0.
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>             Fix For: 0.10.0, 0.9.0
>
>         Attachments: configurable.patch
>
>
> ReduceTask.ValueIterator should apply job configuration to Configurable values. This is similar to the way it's done in ipc.Client.Connection.run().
> Some classes in Nutch (such as FetcherOutput and ParseData) rely on this behavior, and if it's not set an NPE is thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 18:18:57 2006
Return-Path: 
 <hadoop-dev-return-5642-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6243 invoked from network); 5 Dec 2006 18:18:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 18:18:57 -0000
Received: (qmail 31930 invoked by uid 500); 5 Dec 2006 18:18:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31905 invoked by uid 500); 5 Dec 2006 18:18:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31886 invoked by uid 99); 5 Dec 2006 18:18:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 10:18:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 10:18:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 96DE17142BF
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 10:18:26 -0800 (PST)
Message-ID: <1898749.1165342706615.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 10:18:26 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-756?page=comments#action_12455715 ] 
            
Raghu Angadi commented on HADOOP-756:
-------------------------------------

5 second sleep is very long. Also no do we need to throw an exception when interrupted? 

I would write  :-)
while (  !( done = isDone() )  )  {
     sleep(100);
} 
  

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: safemodewait1.patch
>
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 18:36:43 2006
Return-Path: 
 <hadoop-dev-return-5643-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12752 invoked from network); 5 Dec 2006 18:36:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 18:36:43 -0000
Received: (qmail 95510 invoked by uid 500); 5 Dec 2006 18:36:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95487 invoked by uid 500); 5 Dec 2006 18:36:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95469 invoked by uid 99); 5 Dec 2006 18:36:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 10:36:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 10:36:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 08FBF7142E1
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 10:36:21 -0800 (PST)
Message-ID: <5740798.1165343781034.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 10:36:21 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-782) TaskTracker.java:killOverflowingTasks
 & TaskTracker.java:markUnresponsiveTasks only put the tip in tasksToCleanup
 queue, they don't update the runningJobs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

TaskTracker.java:killOverflowingTasks & TaskTracker.java:markUnresponsiveTasks only put the tip in tasksToCleanup queue, they don't update the runningJobs
----------------------------------------------------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-782
                 URL: http://issues.apache.org/jira/browse/HADOOP-782
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Arun C Murthy
         Assigned To: Arun C Murthy
             Fix For: 0.9.0


Both killOverflowingTasks and markUnresponsiveTasks only put the tip in 'tasksToCleanup' queue, they should also call 'removeTaskFromJob' to update the 'runningJobs' map to reflect the fact that the task is no longer running. Thoughts?


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 18:49:48 2006
Return-Path: 
 <hadoop-dev-return-5644-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17299 invoked from network); 5 Dec 2006 18:49:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 18:49:48 -0000
Received: (qmail 30738 invoked by uid 500); 5 Dec 2006 18:49:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30711 invoked by uid 500); 5 Dec 2006 18:49:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30694 invoked by uid 99); 5 Dec 2006 18:49:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 10:49:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 10:49:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DEA947142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 10:49:24 -0800 (PST)
Message-ID: <6784067.1165344564909.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 10:49:24 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-774) Datanodes fails to heartbeat when a
 directory with a large number of blocks is deleted
In-Reply-To: <10916275.1165019421088.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-774?page=comments#action_12455726 ] 
            
Doug Cutting commented on HADOOP-774:
-------------------------------------

>  Incorporated review comments

I don't see any review comments here or on the dev list.  Was there an offline review?

> Datanodes fails to heartbeat when a directory with a large number of blocks is deleted
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-774
>                 URL: http://issues.apache.org/jira/browse/HADOOP-774
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: chunkinvalidateBlocks2.java
>
>
> If a user removes a few files that are huge, it causes the namenode to send BlockInvalidate command to the relevant Datanodes. The Datanode process the blockInvalidate command as part of its heartbeat thread. If the number of blocks to be invalidated is huge, the datanode takes a long time to process it. This causes the datanode to not send new heartbeats to the namenode. The namenode declares the datanode as dead!
> 1. One option is to process the blockInvalidate as a separate thread from the heartbeat thread in the Datanode. 
> 2. Another option would be to constrain the namenode to send a max (e.g. 500) blocks per blockInvalidate message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 18:58:47 2006
Return-Path: 
 <hadoop-dev-return-5645-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19624 invoked from network); 5 Dec 2006 18:58:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 18:58:47 -0000
Received: (qmail 47312 invoked by uid 500); 5 Dec 2006 18:58:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47292 invoked by uid 500); 5 Dec 2006 18:58:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47283 invoked by uid 99); 5 Dec 2006 18:58:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 10:58:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 10:58:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 71A0A7142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 10:58:22 -0800 (PST)
Message-ID: <15384225.1165345102462.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 10:58:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-782)
 TaskTracker.java:killOverflowingTasks &
 TaskTracker.java:markUnresponsiveTasks only put the tip in tasksToCleanup
 queue, they don't update the runningJobs
In-Reply-To: <5740798.1165343781034.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-782?page=comments#action_12455727 ] 
            
Mahadev konar commented on HADOOP-782:
--------------------------------------

Arun
yes, that should be done. Infact I had that in my patch for HADOOP-775. If a tasks is killed/failed  the tasktracker does not need to maintain state (files/mapoutputs) for these tasks and should remove these tasks from RunningJobs and clean them up.

> TaskTracker.java:killOverflowingTasks & TaskTracker.java:markUnresponsiveTasks only put the tip in tasksToCleanup queue, they don't update the runningJobs
> ----------------------------------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-782
>                 URL: http://issues.apache.org/jira/browse/HADOOP-782
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.0
>
>
> Both killOverflowingTasks and markUnresponsiveTasks only put the tip in 'tasksToCleanup' queue, they should also call 'removeTaskFromJob' to update the 'runningJobs' map to reflect the fact that the task is no longer running. Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 18:58:51 2006
Return-Path: 
 <hadoop-dev-return-5646-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19692 invoked from network); 5 Dec 2006 18:58:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 18:58:51 -0000
Received: (qmail 47548 invoked by uid 500); 5 Dec 2006 18:58:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47505 invoked by uid 500); 5 Dec 2006 18:58:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47480 invoked by uid 99); 5 Dec 2006 18:58:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 10:58:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 10:58:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D57C47142E1
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 10:58:23 -0800 (PST)
Message-ID: <13766317.1165345103872.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 10:58:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-778) Path.toString() should retain
 trailing '/' if passed in constructor
In-Reply-To: <33199548.1165269381054.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-778?page=comments#action_12455728 ] 
            
Doug Cutting commented on HADOOP-778:
-------------------------------------

> Does it break something if Path retains trailing '/'  [ ... ]  ?

Did you try it?  My guess is that lots of unit tests would fail.  It significantly simplifies path manipulation if there is a single normal form for paths.  It is not generally possible to tell from a name alone whether something is a file or a directory, one must query the FileSystem to determine this.


> Path.toString() should retain trailing '/' if passed in constructor
> -------------------------------------------------------------------
>
>                 Key: HADOOP-778
>                 URL: http://issues.apache.org/jira/browse/HADOOP-778
>             Project: Hadoop
>          Issue Type: Bug
>          Components: fs
>            Reporter: Sanjay Dahiya
>
> Does it break something if Path retains trailing '/' if passed in constructor and returns it back in toString() ? 
> Looking at Path.toString() JobClient wont have a way of knowing which Paths were intended to be directories and not files, in the context of globbed regex ( HADOOP-619 ). 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 19:00:52 2006
Return-Path: 
 <hadoop-dev-return-5647-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20500 invoked from network); 5 Dec 2006 19:00:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 19:00:52 -0000
Received: (qmail 50627 invoked by uid 500); 5 Dec 2006 19:00:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50601 invoked by uid 500); 5 Dec 2006 19:00:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50574 invoked by uid 99); 5 Dec 2006 19:00:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 11:00:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 11:00:50 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 913297142E1
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 11:00:22 -0800 (PST)
Message-ID: <4299287.1165345222592.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 11:00:22 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-780) ReduceTask.ValueIterator should apply
 job configuration to Configurable values
In-Reply-To: <12863.1165335921141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-780?page=all ]

Andrzej Bialecki  updated HADOOP-780:
-------------------------------------

    Attachment: configurable.patch

Ok :)  I ran a search and found a few other places where it's reasonable to replace Class.newInstance() with ReflectionUtils.newInstance(). Here's an updated patch.

> ReduceTask.ValueIterator should apply job configuration to Configurable values
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-780
>                 URL: http://issues.apache.org/jira/browse/HADOOP-780
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.0, 0.10.0
>         Environment: Nutch trunk/, trying to upgrade to Hadoop 0.9.0.
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>             Fix For: 0.10.0, 0.9.0
>
>         Attachments: configurable.patch
>
>
> ReduceTask.ValueIterator should apply job configuration to Configurable values. This is similar to the way it's done in ipc.Client.Connection.run().
> Some classes in Nutch (such as FetcherOutput and ParseData) rely on this behavior, and if it's not set an NPE is thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 19:00:53 2006
Return-Path: 
 <hadoop-dev-return-5648-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20550 invoked from network); 5 Dec 2006 19:00:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 19:00:53 -0000
Received: (qmail 51054 invoked by uid 500); 5 Dec 2006 19:01:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51020 invoked by uid 500); 5 Dec 2006 19:01:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51011 invoked by uid 99); 5 Dec 2006 19:01:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 11:01:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 11:00:51 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0897A7142EC
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 11:00:24 -0800 (PST)
Message-ID: <8114013.1165345224032.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 11:00:24 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-780) ReduceTask.ValueIterator should apply
 job configuration to Configurable values
In-Reply-To: <12863.1165335921141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-780?page=all ]

Andrzej Bialecki  updated HADOOP-780:
-------------------------------------

    Attachment:     (was: configurable.patch)

> ReduceTask.ValueIterator should apply job configuration to Configurable values
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-780
>                 URL: http://issues.apache.org/jira/browse/HADOOP-780
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.0, 0.10.0
>         Environment: Nutch trunk/, trying to upgrade to Hadoop 0.9.0.
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>             Fix For: 0.10.0, 0.9.0
>
>         Attachments: configurable.patch
>
>
> ReduceTask.ValueIterator should apply job configuration to Configurable values. This is similar to the way it's done in ipc.Client.Connection.run().
> Some classes in Nutch (such as FetcherOutput and ParseData) rely on this behavior, and if it's not set an NPE is thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 19:19:18 2006
Return-Path: 
 <hadoop-dev-return-5649-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27015 invoked from network); 5 Dec 2006 19:19:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 19:19:18 -0000
Received: (qmail 94282 invoked by uid 500); 5 Dec 2006 19:19:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94186 invoked by uid 500); 5 Dec 2006 19:19:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94168 invoked by uid 99); 5 Dec 2006 19:19:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 11:19:22 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 22D917142E1
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 11:18:24 -0800 (PST)
Message-ID: <31649229.1165346304140.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 11:18:24 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-673?page=comments#action_12455734 ] 
            
Hadoop QA commented on HADOOP-673:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346398/cwd.patch applied and successfully tested against trunk revision r481432

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>         Attachments: cwd.patch
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 19:37:14 2006
Return-Path: 
 <hadoop-dev-return-5650-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31360 invoked from network); 5 Dec 2006 19:37:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 19:37:14 -0000
Received: (qmail 35546 invoked by uid 500); 5 Dec 2006 19:37:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35516 invoked by uid 500); 5 Dec 2006 19:37:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35507 invoked by uid 99); 5 Dec 2006 19:37:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 11:37:21 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 58B0D7142E1
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 11:36:22 -0800 (PST)
Message-ID: <21727379.1165347382360.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 11:36:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-746) CRC computation and reading should
 move into a nested FileSystem
In-Reply-To: <3687865.1164239642025.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-746?page=comments#action_12455736 ] 
            
Doug Cutting commented on HADOOP-746:
-------------------------------------

We need multiple-CRCs per HDFS block, so that one can seek within a block without having to checksum the entire block.  Thus a checksum every 8k or less is desired.

But this issue is not about re-architecting CRCs for HDFS, it's rather about cleaning up the FileSystem API so that the generic CRC implementation, usable by all FileSystems, is less visible in that API (i.e., the 'raw' methods are ugly).  Owen had an idea of how to do that, but, unfortunately, it would make filenames ugly, which defeats the purpose.

But perhaps we can still salvage Owen's general approach.  We could implement a ChecksummedFileSystem that wraps an existing fileystem but does not alter filenames.  HDFS & opthers can privately the "raw" FileSystem, without checksums.  Then FileSystem.getNamed() can wrap newly created FileSystem instances in ChecksummedFileSystem to generically add checksumming.  Thus the 'raw' methods can be removed from the FileSystem API.  Does that work?

> CRC computation and reading should move into a nested FileSystem
> ----------------------------------------------------------------
>
>                 Key: HADOOP-746
>                 URL: http://issues.apache.org/jira/browse/HADOOP-746
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>
> Currently FileSystem provides both an interface and a mechanism for computing and checking crc files. I propose splitting the crc code into a nestable FileSystem that like the PhasedFileSystem has a backing FileSystem. Once the Paths are converted to URI, this is fairly natural to express. To use crc files, your uris will look like:
> crc://hdfs:%2f%2fhost1:8020/ which is a crc FileSystem with an underlying file system of hdfs://host1:8020
> This will allow users to use crc files where they make sense for their application/cluster and get rid of the "raw" methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 19:41:15 2006
Return-Path: 
 <hadoop-dev-return-5651-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32338 invoked from network); 5 Dec 2006 19:41:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 19:41:15 -0000
Received: (qmail 41338 invoked by uid 500); 5 Dec 2006 19:41:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41303 invoked by uid 500); 5 Dec 2006 19:41:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41280 invoked by uid 99); 5 Dec 2006 19:41:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 11:41:21 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 056C97142E1
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 11:40:23 -0800 (PST)
Message-ID: <3738635.1165347623019.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 11:40:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-780) ReduceTask.ValueIterator should
 apply job configuration to Configurable values
In-Reply-To: <12863.1165335921141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-780?page=comments#action_12455738 ] 
            
Hadoop QA commented on HADOOP-780:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346473/configurable.patch applied and successfully tested against trunk revision r481432

> ReduceTask.ValueIterator should apply job configuration to Configurable values
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-780
>                 URL: http://issues.apache.org/jira/browse/HADOOP-780
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.0, 0.10.0
>         Environment: Nutch trunk/, trying to upgrade to Hadoop 0.9.0.
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>             Fix For: 0.10.0, 0.9.0
>
>         Attachments: configurable.patch
>
>
> ReduceTask.ValueIterator should apply job configuration to Configurable values. This is similar to the way it's done in ipc.Client.Connection.run().
> Some classes in Nutch (such as FetcherOutput and ParseData) rely on this behavior, and if it's not set an NPE is thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 19:43:20 2006
Return-Path: 
 <hadoop-dev-return-5652-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33048 invoked from network); 5 Dec 2006 19:43:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 19:43:20 -0000
Received: (qmail 45729 invoked by uid 500); 5 Dec 2006 19:43:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45706 invoked by uid 500); 5 Dec 2006 19:43:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45695 invoked by uid 99); 5 Dec 2006 19:43:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 11:43:22 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A5E657142BF
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 11:42:23 -0800 (PST)
Message-ID: <26462655.1165347743677.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 11:42:23 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12455739 ] 
            
Sanjay Dahiya commented on HADOOP-619:
--------------------------------------

These changes cause TestEmptyJobWithDFS test to fail as in that no of input files is 0. with new changes Job fails if there are no input files in the inputs paths after glob expansion. 

Do we need the ability to run empty jobs or do we want to specify some extra flag stating input not needed for the job? The test case will need to be changed then as well. 

Comments? 

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 19:45:14 2006
Return-Path: 
 <hadoop-dev-return-5653-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33612 invoked from network); 5 Dec 2006 19:45:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 19:45:14 -0000
Received: (qmail 48798 invoked by uid 500); 5 Dec 2006 19:45:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48772 invoked by uid 500); 5 Dec 2006 19:45:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48763 invoked by uid 99); 5 Dec 2006 19:45:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 11:45:21 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 44DA27142E4
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 11:44:22 -0800 (PST)
Message-ID: <13985206.1165347862279.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 11:44:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-774) Datanodes fails to heartbeat when a
 directory with a large number of blocks is deleted
In-Reply-To: <10916275.1165019421088.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-774?page=comments#action_12455740 ] 
            
dhruba borthakur commented on HADOOP-774:
-----------------------------------------

My apologies. My comment should have said "Better comments in the code".

> Datanodes fails to heartbeat when a directory with a large number of blocks is deleted
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-774
>                 URL: http://issues.apache.org/jira/browse/HADOOP-774
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: chunkinvalidateBlocks2.java
>
>
> If a user removes a few files that are huge, it causes the namenode to send BlockInvalidate command to the relevant Datanodes. The Datanode process the blockInvalidate command as part of its heartbeat thread. If the number of blocks to be invalidated is huge, the datanode takes a long time to process it. This causes the datanode to not send new heartbeats to the namenode. The namenode declares the datanode as dead!
> 1. One option is to process the blockInvalidate as a separate thread from the heartbeat thread in the Datanode. 
> 2. Another option would be to constrain the namenode to send a max (e.g. 500) blocks per blockInvalidate message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 19:47:14 2006
Return-Path: 
 <hadoop-dev-return-5654-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34185 invoked from network); 5 Dec 2006 19:47:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 19:47:14 -0000
Received: (qmail 53455 invoked by uid 500); 5 Dec 2006 19:47:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53429 invoked by uid 500); 5 Dec 2006 19:47:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53415 invoked by uid 99); 5 Dec 2006 19:47:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 11:47:21 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5CBFA7142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 11:46:22 -0800 (PST)
Message-ID: <29852033.1165347982377.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 11:46:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-720?page=comments#action_12455741 ] 
            
Doug Cutting commented on HADOOP-720:
-------------------------------------

Those ODG documents simply contain the JPGs.  My guess is that you didn't author these in a paint program, but in a drawing program.  If so, can you export ODG from that, so that we have editable vector graphics, not just pixels?  Thanks!

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm, hdfsarchitecture.odg, hdfsdatanodes.odg, HDFSForrest.patch
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 19:47:18 2006
Return-Path: 
 <hadoop-dev-return-5655-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34236 invoked from network); 5 Dec 2006 19:47:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 19:47:18 -0000
Received: (qmail 53754 invoked by uid 500); 5 Dec 2006 19:47:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53730 invoked by uid 500); 5 Dec 2006 19:47:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53721 invoked by uid 99); 5 Dec 2006 19:47:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 11:47:25 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1C6087142E4
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 11:46:25 -0800 (PST)
Message-ID: <17645099.1165347985113.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 11:46:25 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment: Hadoop-619.patch

Here is a patch which adds gobbing support to JobClient. its not commit ready yet as it breaks unit tests as I mentioned in prev comment. Unit tests need to be changed if we agree on that. 


> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 20:03:24 2006
Return-Path: 
 <hadoop-dev-return-5656-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38281 invoked from network); 5 Dec 2006 20:03:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 20:03:24 -0000
Received: (qmail 85208 invoked by uid 500); 5 Dec 2006 20:03:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85185 invoked by uid 500); 5 Dec 2006 20:03:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85176 invoked by uid 99); 5 Dec 2006 20:03:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 12:03:31 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1F3957142EC
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 12:02:23 -0800 (PST)
Message-ID: <13585388.1165348943125.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 12:02:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-756?page=comments#action_12455745 ] 
            
Hadoop QA commented on HADOOP-756:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346438/safemodewait1.patch applied and successfully tested against trunk revision r481432

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: safemodewait1.patch
>
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 20:05:14 2006
Return-Path: 
 <hadoop-dev-return-5657-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38777 invoked from network); 5 Dec 2006 20:05:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 20:05:14 -0000
Received: (qmail 89590 invoked by uid 500); 5 Dec 2006 20:05:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89569 invoked by uid 500); 5 Dec 2006 20:05:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89560 invoked by uid 99); 5 Dec 2006 20:05:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 12:05:21 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DCD9C7142BF
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 12:04:22 -0800 (PST)
Message-ID: <16466703.1165349062902.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 12:04:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-639?page=comments#action_12455746 ] 
            
Mahadev konar commented on HADOOP-639:
--------------------------------------

also, it would be cleaner if we had a RUNNINGJOB->cleanup method, which calls cleanup on all the tasks and then removes the job directory. This way we do not have to delete the job direcotry in each tasks cleanup.

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-639_1.patch, HADOOP-639_2_20061130.patch, HADOOP-639_3_20061201.patch, HADOOP-639_4_20061205.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 20:54:29 2006
Return-Path: 
 <hadoop-dev-return-5658-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58993 invoked from network); 5 Dec 2006 20:54:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 20:54:29 -0000
Received: (qmail 4719 invoked by uid 500); 5 Dec 2006 20:54:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4653 invoked by uid 500); 5 Dec 2006 20:54:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4644 invoked by uid 99); 5 Dec 2006 20:54:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 12:54:21 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 428EC7142F5
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 12:53:22 -0800 (PST)
Message-ID: <3098360.1165352002270.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 12:53:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-779) Hadoop streaming does not work with
 gzipped input
In-Reply-To: <30086137.1165275745355.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-779?page=all ]

Doug Cutting updated HADOOP-779:
--------------------------------

    Fix Version/s: 0.9.1
                       (was: 0.10.0)

> Hadoop streaming does not work with gzipped input
> -------------------------------------------------
>
>                 Key: HADOOP-779
>                 URL: http://issues.apache.org/jira/browse/HADOOP-779
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.9.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.1
>
>         Attachments: GzipIn.patch
>
>
> When input files are gzipped, StreamLineRecordReader does not take the corect OutputStream to fetch the next record. Instead of using a GzipOutputStream, it uses a FSOutputStream. So input files are read as uncompressed plain text.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 21:19:05 2006
Return-Path: 
 <hadoop-dev-return-5659-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65288 invoked from network); 5 Dec 2006 21:19:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 21:19:05 -0000
Received: (qmail 48624 invoked by uid 500); 5 Dec 2006 21:19:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48597 invoked by uid 500); 5 Dec 2006 21:19:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48588 invoked by uid 99); 5 Dec 2006 21:19:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:19:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:19:03 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0FD2F7142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 13:18:39 -0800 (PST)
Message-ID: <23512559.1165353519062.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 13:18:39 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-756?page=comments#action_12455758 ] 
            
dhruba borthakur commented on HADOOP-756:
-----------------------------------------

I think the 5 second sleep is appropriate. A smaller timeperiod will need the namenode to do more wasted work (because of an RPC call).

Regarding the "exception during interrupt", the higher level functions catches the interrupt and prints out an error message. This lets the user know that the call terminated because of an interrupt (and not because the namenode exited safemode). 

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: safemodewait1.patch
>
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 21:26:44 2006
Return-Path: 
 <hadoop-dev-return-5660-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67180 invoked from network); 5 Dec 2006 21:26:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 21:26:44 -0000
Received: (qmail 60939 invoked by uid 500); 5 Dec 2006 21:26:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60704 invoked by uid 500); 5 Dec 2006 21:26:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60695 invoked by uid 99); 5 Dec 2006 21:26:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:26:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:26:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 102357142BF
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 13:26:23 -0800 (PST)
Message-ID: <11117387.1165353983063.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 13:26:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-756?page=comments#action_12455759 ] 
            
Owen O'Malley commented on HADOOP-756:
--------------------------------------

I think the 5 seconds is great.



> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: safemodewait1.patch
>
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 21:26:46 2006
Return-Path: 
 <hadoop-dev-return-5661-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67230 invoked from network); 5 Dec 2006 21:26:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 21:26:46 -0000
Received: (qmail 61010 invoked by uid 500); 5 Dec 2006 21:26:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60978 invoked by uid 500); 5 Dec 2006 21:26:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60969 invoked by uid 99); 5 Dec 2006 21:26:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:26:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:26:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 140E27142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 13:26:25 -0800 (PST)
Message-ID: <20336360.1165353985079.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 13:26:25 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-756?page=comments#action_12455760 ] 
            
Raghu Angadi commented on HADOOP-756:
-------------------------------------

Correct,  I was not thinking of an RPC call.

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: safemodewait1.patch
>
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 21:26:47 2006
Return-Path: 
 <hadoop-dev-return-5662-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67274 invoked from network); 5 Dec 2006 21:26:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 21:26:47 -0000
Received: (qmail 61262 invoked by uid 500); 5 Dec 2006 21:26:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61235 invoked by uid 500); 5 Dec 2006 21:26:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61226 invoked by uid 99); 5 Dec 2006 21:26:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:26:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:26:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6A1747142EC
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 13:26:26 -0800 (PST)
Message-ID: <12148070.1165353986432.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 13:26:26 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-720?page=comments#action_12455761 ] 
            
dhruba borthakur commented on HADOOP-720:
-----------------------------------------

I took the documents from a powerpoint slide, exported them to Word and then used an online converting tool http://media-convert.com to convert them to ODG. Can you please suggest the tool i should use?

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm, hdfsarchitecture.odg, hdfsdatanodes.odg, HDFSForrest.patch
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 21:38:45 2006
Return-Path: 
 <hadoop-dev-return-5663-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70602 invoked from network); 5 Dec 2006 21:38:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 21:38:45 -0000
Received: (qmail 86547 invoked by uid 500); 5 Dec 2006 21:38:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86511 invoked by uid 500); 5 Dec 2006 21:38:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86486 invoked by uid 99); 5 Dec 2006 21:38:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:38:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:38:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C16167142F5
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 13:38:23 -0800 (PST)
Message-ID: <27557386.1165354703789.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 13:38:23 -0800 (PST)
From: "Tom White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-571) Path should use URI syntax
In-Reply-To: <6678550.1159825879600.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-571?page=comments#action_12455763 ] 
            
Tom White commented on HADOOP-571:
----------------------------------

While working on HADOOP-574 I came across what looks like a small bug in uri3.patch.

Here's a failing testcase (add to TestPath#testDots):

    assertEquals(new Path("/foo/bar", ".").toString(), "/foo/bar");

The actual value is "/foo/bar/" (note trailing slash, and the irony of HADOOP-778!).

I think it is easy to fix. Change the Path(Path parent, Path child)  constructor to use the private initialize method as follows:
        
      URI resolvedUri = parentUri.resolve(child.uri);
      initialize(resolvedUri.getScheme(), resolvedUri.getAuthority(), normalizePath(resolvedUri.getPath()));

Cheers,
Tom

> Path should use URI syntax
> --------------------------
>
>                 Key: HADOOP-571
>                 URL: http://issues.apache.org/jira/browse/HADOOP-571
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: uri.patch, uri2.patch, uri3.patch
>
>
> The following changes are proposed:
> 1. Add a factory/registry of FileSystem implementations.  Given a protocol, hostname and port, it should be possible to get a FileSystem implementation.
> 2. Path's constructor should accept URI-formatted strings & a configuration.
> 3. A new Path method should be added: FileSystem.getFileSystem().  This returns the filesystem named in the path or the default configured filesystem.
> 4. Most methods which currently take FileSystem and Path parameters can be changed to take only Path.
> 5. Many FileSystem operations (create, open, delete, list, etc.) can become convenience methods on Path.
> 6. A URLStreamHandler can be defined in terms of the FileSystem API, so that URLs for any protocol with a registered FileSystem implementation can be accessed with a java.net.URL, permitting FileSystem implementations to be used on the classpath, etc.
> It is tempting to try to replace Path with java.net.URL, but URL's methods are insufficient for mapreduce.  We require directory listings, random access, location hints, etc., which are not supported by existing URLStreamHandler implementations.  But we can expose all FileSystem implementations for access with java.net.URL.
> (From a brainstorm with Owen.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 21:48:48 2006
Return-Path: 
 <hadoop-dev-return-5664-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73778 invoked from network); 5 Dec 2006 21:48:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 21:48:48 -0000
Received: (qmail 1575 invoked by uid 500); 5 Dec 2006 21:48:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1547 invoked by uid 500); 5 Dec 2006 21:48:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1538 invoked by uid 99); 5 Dec 2006 21:48:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:48:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:48:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 67A2171431A
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 13:48:26 -0800 (PST)
Message-ID: <4033108.1165355306421.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 13:48:26 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-720?page=comments#action_12455767 ] 
            
Doug Cutting commented on HADOOP-720:
-------------------------------------

> I took the documents from a powerpoint slide, exported them to Word [ ... ]

You should be able to open the powerpoint or word document with OpenOffice, then save it.  ODG is the native format for OpenOffice drawings.

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm, hdfsarchitecture.odg, hdfsdatanodes.odg, HDFSForrest.patch
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 21:53:45 2006
Return-Path: 
 <hadoop-dev-return-5665-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76120 invoked from network); 5 Dec 2006 21:53:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 21:53:45 -0000
Received: (qmail 15336 invoked by uid 500); 5 Dec 2006 21:53:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15102 invoked by uid 500); 5 Dec 2006 21:53:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15086 invoked by uid 99); 5 Dec 2006 21:53:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:53:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:53:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 922E87142BF
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 13:53:23 -0800 (PST)
Message-ID: <31360340.1165355603596.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 13:53:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12455768 ] 
            
Owen O'Malley commented on HADOOP-619:
--------------------------------------

This patch doesn't change anything anything in streaming yet.

A lot of the code in StreamInputFormat should be removable after this patch.

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 21:59:45 2006
Return-Path: 
 <hadoop-dev-return-5666-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77942 invoked from network); 5 Dec 2006 21:59:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 21:59:45 -0000
Received: (qmail 27876 invoked by uid 500); 5 Dec 2006 21:59:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27849 invoked by uid 500); 5 Dec 2006 21:59:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27840 invoked by uid 99); 5 Dec 2006 21:59:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:59:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:59:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B0A5B7142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 13:59:23 -0800 (PST)
Message-ID: <33544292.1165355963721.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 13:59:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-673) the task execution environment should
 have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-673?page=all ]

Doug Cutting updated HADOOP-673:
--------------------------------

    Status: Open  (was: Patch Available)

This patch changes fullyDelete() to run 'rm -rf'.  We should only rely on unix command-line tools when we absolutely must, and I don't think we have to here.  Instead, before listing a directory, we should compare getAbsoluteFile() to getCanonicalFile() to determine whether it's a symbolic link.  If it is a symbolic link, then we should ignore it.

Also, perhaps most of the code added to TaskRunner could be instead added to DistributedCache, since it's cache-specific stuff?

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>         Attachments: cwd.patch
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 23:18:43 2006
Return-Path: 
 <hadoop-dev-return-5667-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97966 invoked from network); 5 Dec 2006 23:18:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 23:18:43 -0000
Received: (qmail 60494 invoked by uid 500); 5 Dec 2006 23:18:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60263 invoked by uid 500); 5 Dec 2006 23:18:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60254 invoked by uid 99); 5 Dec 2006 23:18:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:18:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:18:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 426EE7142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 15:18:22 -0800 (PST)
Message-ID: <13460155.1165360702269.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 15:18:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-780) ReduceTask.ValueIterator should
 apply job configuration to Configurable values
In-Reply-To: <12863.1165335921141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-780?page=comments#action_12455793 ] 
            
Owen O'Malley commented on HADOOP-780:
--------------------------------------

+1

> ReduceTask.ValueIterator should apply job configuration to Configurable values
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-780
>                 URL: http://issues.apache.org/jira/browse/HADOOP-780
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.0, 0.10.0
>         Environment: Nutch trunk/, trying to upgrade to Hadoop 0.9.0.
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>             Fix For: 0.9.1
>
>         Attachments: configurable.patch
>
>
> ReduceTask.ValueIterator should apply job configuration to Configurable values. This is similar to the way it's done in ipc.Client.Connection.run().
> Some classes in Nutch (such as FetcherOutput and ParseData) rely on this behavior, and if it's not set an NPE is thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 23:32:44 2006
Return-Path: 
 <hadoop-dev-return-5668-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2316 invoked from network); 5 Dec 2006 23:32:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 23:32:44 -0000
Received: (qmail 77004 invoked by uid 500); 5 Dec 2006 23:32:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76775 invoked by uid 500); 5 Dec 2006 23:32:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76766 invoked by uid 99); 5 Dec 2006 23:32:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:32:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:32:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 44A017142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 15:32:22 -0800 (PST)
Message-ID: <22612297.1165361542278.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 15:32:22 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-692) Rack-aware Replica Placement
In-Reply-To: <5324842.1163011853487.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-692?page=comments#action_12455794 ] 
            
Runping Qi commented on HADOOP-692:
-----------------------------------


When re-replicating, we should try to place replicas to different racks whenever it is feasible.

To minimize write latency, when we write a block that needs more than 2 replicas, does it make sense to let the client return after writing the first 2 copies onto dofferent racks, and let the background re-plication process take care the other replicas?

 

> Rack-aware Replica Placement
> ----------------------------
>
>                 Key: HADOOP-692
>                 URL: http://issues.apache.org/jira/browse/HADOOP-692
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>         Attachments: Rack_aware_HDFS_proposal.pdf
>
>
> This issue assumes that HDFS runs on a cluster of computers that spread across many racks. Communication between two nodes on different racks needs to go through switches. Bandwidth in/out of a rack may be less than the total bandwidth of machines in the rack. The purpose of rack-aware replica placement is to improve data reliability, availability, and network bandwidth utilization. The basic idea is that each data node determines to which rack it belongs at the startup time and notifies the name node of the rack id upon registration. The name node maintains a rackid-to-datanode map and tries to place replicas across racks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 23:39:44 2006
Return-Path: 
 <hadoop-dev-return-5669-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3767 invoked from network); 5 Dec 2006 23:39:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 23:39:44 -0000
Received: (qmail 82526 invoked by uid 500); 5 Dec 2006 23:39:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82496 invoked by uid 500); 5 Dec 2006 23:39:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82487 invoked by uid 99); 5 Dec 2006 23:39:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:39:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:39:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1B7D77142BF
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 15:39:23 -0800 (PST)
Message-ID: <31133103.1165361963109.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 15:39:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-676) JobClient should print user friendly
 messages for standard errors
In-Reply-To: <5423204.1162510576774.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-676?page=comments#action_12455797 ] 
            
Owen O'Malley commented on HADOOP-676:
--------------------------------------

+1

> JobClient should print user friendly messages for standard errors
> -----------------------------------------------------------------
>
>                 Key: HADOOP-676
>                 URL: http://issues.apache.org/jira/browse/HADOOP-676
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-676.patch
>
>
> The exceptions for non-existent input dirs or already existing output dirs should generate user-friendly error messages. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 23:41:46 2006
Return-Path: 
 <hadoop-dev-return-5670-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4061 invoked from network); 5 Dec 2006 23:41:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 23:41:46 -0000
Received: (qmail 83647 invoked by uid 500); 5 Dec 2006 23:41:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83617 invoked by uid 500); 5 Dec 2006 23:41:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83608 invoked by uid 99); 5 Dec 2006 23:41:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:41:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:41:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 460637142E1
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 15:41:25 -0800 (PST)
Message-ID: <5902485.1165362085284.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 15:41:25 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-738) dfs get or copyToLocal should not copy
 crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-738?page=all ]

Milind Bhandarkar updated HADOOP-738:
-------------------------------------

    Status: Open  (was: Patch Available)

> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 23:41:49 2006
Return-Path: 
 <hadoop-dev-return-5671-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4104 invoked from network); 5 Dec 2006 23:41:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 23:41:49 -0000
Received: (qmail 83903 invoked by uid 500); 5 Dec 2006 23:41:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83882 invoked by uid 500); 5 Dec 2006 23:41:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83873 invoked by uid 99); 5 Dec 2006 23:41:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:41:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:41:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 090ED7142EC
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 15:41:28 -0800 (PST)
Message-ID: <7490169.1165362088034.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 15:41:28 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-738) dfs get or copyToLocal should not copy
 crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-738?page=all ]

Milind Bhandarkar updated HADOOP-738:
-------------------------------------

    Attachment:     (was: hadoop-crc.patch)

> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 23:43:49 2006
Return-Path: 
 <hadoop-dev-return-5672-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4664 invoked from network); 5 Dec 2006 23:43:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 23:43:49 -0000
Received: (qmail 85972 invoked by uid 500); 5 Dec 2006 23:43:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85950 invoked by uid 500); 5 Dec 2006 23:43:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85941 invoked by uid 99); 5 Dec 2006 23:43:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:43:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:43:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0DAA57142E1
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 15:43:28 -0800 (PST)
Message-ID: <27241528.1165362208053.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 15:43:28 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-738) dfs get or copyToLocal should not copy
 crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-738?page=all ]

Milind Bhandarkar updated HADOOP-738:
-------------------------------------

    Attachment: hadoop-crc.patch

Added an optional -crc argument to -get and -copyToLocal commands in DFSShell. Without this argument, crc files are not created on local file system. If one wants to explicitly request fetching crc files as well, one has to use:

-get -crc <src> <localDst>



> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 23:43:52 2006
Return-Path: 
 <hadoop-dev-return-5673-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4742 invoked from network); 5 Dec 2006 23:43:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 23:43:52 -0000
Received: (qmail 86245 invoked by uid 500); 5 Dec 2006 23:43:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86221 invoked by uid 500); 5 Dec 2006 23:43:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86212 invoked by uid 99); 5 Dec 2006 23:43:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:43:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:43:50 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C20F97142EC
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 15:43:30 -0800 (PST)
Message-ID: <1448129.1165362210792.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 15:43:30 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-738) dfs get or copyToLocal should not copy
 crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-738?page=all ]

Milind Bhandarkar updated HADOOP-738:
-------------------------------------

    Status: Patch Available  (was: Open)

> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 23:53:43 2006
Return-Path: 
 <hadoop-dev-return-5674-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7155 invoked from network); 5 Dec 2006 23:53:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 23:53:43 -0000
Received: (qmail 98648 invoked by uid 500); 5 Dec 2006 23:53:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98613 invoked by uid 500); 5 Dec 2006 23:53:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98604 invoked by uid 99); 5 Dec 2006 23:53:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:53:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:53:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5EF827142BF
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 15:53:22 -0800 (PST)
Message-ID: <12751371.1165362802385.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 15:53:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-720?page=all ]

dhruba borthakur updated HADOOP-720:
------------------------------------

    Attachment:     (was: hdfsarchitecture.odg)

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm, HDFSForrest.patch
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 23:53:45 2006
Return-Path: 
 <hadoop-dev-return-5675-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7200 invoked from network); 5 Dec 2006 23:53:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 23:53:45 -0000
Received: (qmail 99108 invoked by uid 500); 5 Dec 2006 23:53:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98879 invoked by uid 500); 5 Dec 2006 23:53:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98870 invoked by uid 99); 5 Dec 2006 23:53:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:53:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:53:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B7BCD7142E1
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 15:53:23 -0800 (PST)
Message-ID: <14583701.1165362803750.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 15:53:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-720?page=all ]

dhruba borthakur updated HADOOP-720:
------------------------------------

    Attachment:     (was: hdfsdatanodes.odg)

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm, HDFSForrest.patch
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec  5 23:55:44 2006
Return-Path: 
 <hadoop-dev-return-5676-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7555 invoked from network); 5 Dec 2006 23:55:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 23:55:44 -0000
Received: (qmail 510 invoked by uid 500); 5 Dec 2006 23:55:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 322 invoked by uid 500); 5 Dec 2006 23:55:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 313 invoked by uid 99); 5 Dec 2006 23:55:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:55:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 15:55:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5C9E27142BF
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 15:55:22 -0800 (PST)
Message-ID: <8311481.1165362922376.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 15:55:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-720?page=all ]

dhruba borthakur updated HADOOP-720:
------------------------------------

    Attachment: hdfsarchitecture.odg
                hdfsdatanodes.odg

Image files in Open Office Format.

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm, hdfsarchitecture.odg, hdfsdatanodes.odg, HDFSForrest.patch
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 00:05:45 2006
Return-Path: 
 <hadoop-dev-return-5677-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11033 invoked from network); 6 Dec 2006 00:05:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 00:05:45 -0000
Received: (qmail 14770 invoked by uid 500); 6 Dec 2006 00:05:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14734 invoked by uid 500); 6 Dec 2006 00:05:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14725 invoked by uid 99); 6 Dec 2006 00:05:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 16:05:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 16:05:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C59137142E4
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 16:05:23 -0800 (PST)
Message-ID: <20258573.1165363523806.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 16:05:23 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-673?page=comments#action_12455814 ] 
            
Sameer Paranjpye commented on HADOOP-673:
-----------------------------------------

Can the difference between getAbsoluteFile() and getCanonicalFile() be used reliably? What happens under cygwin?

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>         Attachments: cwd.patch
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 00:05:49 2006
Return-Path: 
 <hadoop-dev-return-5678-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11145 invoked from network); 6 Dec 2006 00:05:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 00:05:49 -0000
Received: (qmail 15260 invoked by uid 500); 6 Dec 2006 00:05:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15235 invoked by uid 500); 6 Dec 2006 00:05:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15226 invoked by uid 99); 6 Dec 2006 00:05:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 16:05:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 16:05:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D43257142BF
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 16:05:27 -0800 (PST)
Message-ID: <11660691.1165363527866.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 16:05:27 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-738) dfs get or copyToLocal should not
 copy crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-738?page=comments#action_12455815 ] 
            
Hadoop QA commented on HADOOP-738:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346489/hadoop-crc.patch applied and successfully tested against trunk revision r481432

> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 00:12:47 2006
Return-Path: 
 <hadoop-dev-return-5679-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13427 invoked from network); 6 Dec 2006 00:12:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 00:12:47 -0000
Received: (qmail 25775 invoked by uid 500); 6 Dec 2006 00:12:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25539 invoked by uid 500); 6 Dec 2006 00:12:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25530 invoked by uid 99); 6 Dec 2006 00:12:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 16:12:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 16:12:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BBCA37142E1
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 16:12:25 -0800 (PST)
Message-ID: <32311799.1165363945766.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 16:12:25 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-673?page=comments#action_12455819 ] 
            
Owen O'Malley commented on HADOOP-673:
--------------------------------------

I'm worried about the performance of using getCanonicalFile on every directory during the recursion, since it must traverse the entire path up to '/' looking for symlinks.

Another solution would be to just delete the directory first using File.delete() and if it is a symlink, it will work. (With the slight assumption, which could be checked, that the parent directory was writable.)

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>         Attachments: cwd.patch
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 00:48:53 2006
Return-Path: 
 <hadoop-dev-return-5680-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22030 invoked from network); 6 Dec 2006 00:48:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 00:48:53 -0000
Received: (qmail 76093 invoked by uid 500); 6 Dec 2006 00:49:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75861 invoked by uid 500); 6 Dec 2006 00:49:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75849 invoked by uid 99); 6 Dec 2006 00:49:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 16:49:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 16:48:51 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B388E7142F6
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 16:48:31 -0800 (PST)
Message-ID: <9023291.1165366111732.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 16:48:31 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-673?page=comments#action_12455829 ] 
            
Doug Cutting commented on HADOOP-673:
-------------------------------------

> Can the difference between getAbsoluteFile() and getCanonicalFile() be used reliably?

I think so.  The docs for getCanonicalFile() explicitly mention symbolic links, while getAbsoluteFile() is merely supposed to resolve relative paths against CWD.

> What happens under cygwin?

Cygwin shouldn't impact this, since these are implemented by the JVM.


> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>         Attachments: cwd.patch
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 01:04:50 2006
Return-Path: 
 <hadoop-dev-return-5681-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25154 invoked from network); 6 Dec 2006 01:04:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 01:04:50 -0000
Received: (qmail 88255 invoked by uid 500); 6 Dec 2006 01:04:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88216 invoked by uid 500); 6 Dec 2006 01:04:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88190 invoked by uid 99); 6 Dec 2006 01:04:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 17:04:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 17:04:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 533077142F5
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 17:04:27 -0800 (PST)
Message-ID: <28107525.1165367067338.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 17:04:27 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-673?page=comments#action_12455833 ] 
            
Andrzej Bialecki  commented on HADOOP-673:
------------------------------------------

One note re: Cygwin - I discovered that you can't access special filesystems provided by Cygwin, such as /proc, /tmp, mountpoints (/cygdrive/c) etc. exactly because the filesystem layer is implemented in JVM and is unaware of Cygwin, its path translations and its synthetic filesystems ...

So, when I tried to resolve "/proc/self", which is a symbolic link to the current PID under Cygwin, I got nothing because this path is inside Cygwin's "procfs", which invisible to JVM.

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>         Attachments: cwd.patch
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 01:11:45 2006
Return-Path: 
 <hadoop-dev-return-5682-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26551 invoked from network); 6 Dec 2006 01:11:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 01:11:45 -0000
Received: (qmail 94445 invoked by uid 500); 6 Dec 2006 01:11:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94421 invoked by uid 500); 6 Dec 2006 01:11:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94411 invoked by uid 99); 6 Dec 2006 01:11:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 17:11:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 17:11:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 10B317142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 17:11:24 -0800 (PST)
Message-ID: <271394.1165367484065.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 17:11:24 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-673?page=comments#action_12455834 ] 
            
Raghu Angadi commented on HADOOP-673:
-------------------------------------

If we depend on Cygwin functionality, then shouldn't JVM also be Cygwin's JVM package (if one exists)? 

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>         Attachments: cwd.patch
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 02:06:42 2006
Return-Path: 
 <hadoop-dev-return-5683-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36982 invoked from network); 6 Dec 2006 02:06:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 02:06:42 -0000
Received: (qmail 51803 invoked by uid 500); 6 Dec 2006 02:06:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51782 invoked by uid 500); 6 Dec 2006 02:06:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51771 invoked by uid 99); 6 Dec 2006 02:06:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 18:06:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 18:06:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 102BF7142D7
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 18:06:21 -0800 (PST)
Message-ID: <10710218.1165370781063.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 18:06:21 -0800 (PST)
From: "Marco Nicosia (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-783) Hadoop dfs -put and -get accept '-' to
 indicate stdin/stdout
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hadoop dfs -put and -get accept '-' to indicate stdin/stdout
------------------------------------------------------------

                 Key: HADOOP-783
                 URL: http://issues.apache.org/jira/browse/HADOOP-783
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
            Reporter: Marco Nicosia
            Priority: Minor




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 03:17:46 2006
Return-Path: 
 <hadoop-dev-return-5684-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58558 invoked from network); 6 Dec 2006 03:17:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 03:17:46 -0000
Received: (qmail 20226 invoked by uid 500); 6 Dec 2006 03:17:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20207 invoked by uid 500); 6 Dec 2006 03:17:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20198 invoked by uid 99); 6 Dec 2006 03:17:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 19:17:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 19:17:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AAFF17142F5
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 19:17:24 -0800 (PST)
Message-ID: <22716329.1165375044697.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 19:17:24 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12455851 ] 
            
Konstantin Shvachko commented on HADOOP-227:
--------------------------------------------

Thanks Philippe, this is a refined effort that uses just the existing code to upload the image and merge it with the edits.
Unfortunately, it doubles the memory consumption during checkpointing, which is what this issue all about imo.

> Sounds a lot like a BTree and comes with all of the issues.
It's not a tree, there is no balancing, and I didn't mentioned trees even once.
The only issue I can associate with BTrees is splitting the block into 2.

> Why do we need to do this?
I am advocating to revive Milind's proposal #5 of the initial design.
Our goal is to minimize memory overhead used for checkpointing and to provide uninterrupted access to the name-node during checkpointing.
We are not considering blocking approaches here so far, which makes minimizing memory our main requirement.

The copy-on-write approach potentially leads to a linear memory increase and requires additional name-node data structures.
Proposal #5 is an attempt to separate checkpointing from the name-node regular operation process.
It takes the image file and the edits file and merges them whether the name-node is present or not.
It does it with lots of IOs BUT in constant space.

I was trying to come up with a simpler algorithm for the stand-alone checkpointing.
It uses more space but does not require external sorting or unintuitive file entry renaming (as #5).
And it can be adapted to use constant space for the price of more ios.
Giving up IOs imo is the right tradeoff here, since disk is not used by the name-node and as mostly idle during its regular operation.

> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Milind Bhandarkar
>         Attachments: patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0
>
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 03:22:45 2006
Return-Path: 
 <hadoop-dev-return-5685-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59053 invoked from network); 6 Dec 2006 03:22:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 03:22:45 -0000
Received: (qmail 22534 invoked by uid 500); 6 Dec 2006 03:22:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22502 invoked by uid 500); 6 Dec 2006 03:22:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22493 invoked by uid 99); 6 Dec 2006 03:22:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 19:22:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 19:22:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 987E07142F5
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 19:22:23 -0800 (PST)
Message-ID: <8771182.1165375343622.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 19:22:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-673?page=comments#action_12455852 ] 
            
Doug Cutting commented on HADOOP-673:
-------------------------------------

We depend on cygwin only to access OS features that are not otherwise available to Java.  This way we can access such features uniformly on unix and windows systems, with identical code in most places, letting cygwin figure out how to implement things on windows, rather than maintaining two implementations of each.

> when I tried to resolve "/proc/self" [...] under Cygwin, I got nothing

Right, that path is not a Windows path, and hence only makes sense to cygwin binaries, so it couldn't be accessed directly from Java, which only sees the Windows filesystem.  It could be accessed, e.g., by running 'cat /proc/self' in a sub-process, but that would probably get the sub-process, not the parent.


> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>         Attachments: cwd.patch
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 05:17:45 2006
Return-Path: 
 <hadoop-dev-return-5686-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81337 invoked from network); 6 Dec 2006 05:17:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 05:17:45 -0000
Received: (qmail 38683 invoked by uid 500); 6 Dec 2006 05:17:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38449 invoked by uid 500); 6 Dec 2006 05:17:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38435 invoked by uid 99); 6 Dec 2006 05:17:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 21:17:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 21:17:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D9C407142EC
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 21:17:22 -0800 (PST)
Message-ID: <29832893.1165382242889.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 21:17:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-639?page=comments#action_12455867 ] 
            
Arun C Murthy commented on HADOOP-639:
--------------------------------------

Mahadev, there is a corner-case which will fail if we take the RunningJobs.cleanup route: if after the job 'cleanup' the JT allocates a new task to the same TT, that task will fail since the job-dir is gone, which is why this patch will rely on the KillJobAction (sent by JT after the job completes/killed/fails) to cleanup the job-dir... your take?

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-639_1.patch, HADOOP-639_2_20061130.patch, HADOOP-639_3_20061201.patch, HADOOP-639_4_20061205.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 05:40:44 2006
Return-Path: 
 <hadoop-dev-return-5687-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85411 invoked from network); 6 Dec 2006 05:40:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 05:40:44 -0000
Received: (qmail 53644 invoked by uid 500); 6 Dec 2006 05:40:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53621 invoked by uid 500); 6 Dec 2006 05:40:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53611 invoked by uid 99); 6 Dec 2006 05:40:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 21:40:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 21:40:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0264F7142E1
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 21:40:23 -0800 (PST)
Message-ID: <6560993.1165383623007.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 21:40:23 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-639?page=comments#action_12455871 ] 
            
Mahadev konar commented on HADOOP-639:
--------------------------------------

sorry to have miscommunicated again! :). .. what I meant was the patch should still rely on KILLJOBACTION but rather than cleaning up the job directory in each task cleanup we could just have a cleanup method on running job that cleans up the tasks which the RunningJob has and then cleans up the job directory --- (implying that the job directory cleanup code would move from task cleanup to job cleanup).

so the code would look something like:
if (JOBKILLACTION){
  for all runningJob.tasks {
    tasks.cleanup()
  }
 deleteJobDir()
}
 Also I have just been commenting since I took a look at the patch :). I can file different bugs so that you do not have to incorporate these changes into your patch which would avoid making your patch huge.

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-639_1.patch, HADOOP-639_2_20061130.patch, HADOOP-639_3_20061201.patch, HADOOP-639_4_20061205.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 05:54:42 2006
Return-Path: 
 <hadoop-dev-return-5688-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88424 invoked from network); 6 Dec 2006 05:54:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 05:54:42 -0000
Received: (qmail 64520 invoked by uid 500); 6 Dec 2006 05:54:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64491 invoked by uid 500); 6 Dec 2006 05:54:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64482 invoked by uid 99); 6 Dec 2006 05:54:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 21:54:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 21:54:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3481F7142F5
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 21:54:21 -0800 (PST)
Message-ID: <609505.1165384461212.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 21:54:21 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-784) In caching if localizing the cache
 throws out an error sometimes the task failure is not updated
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

In caching if localizing the cache throws out an error sometimes the task failure is not updated
------------------------------------------------------------------------------------------------

                 Key: HADOOP-784
                 URL: http://issues.apache.org/jira/browse/HADOOP-784
             Project: Hadoop
          Issue Type: Bug
            Reporter: Mahadev konar
         Assigned To: Mahadev konar


if localize cache throws out an exception the release cache throws out a null pointer exception which leads to a situation where the task has failed but it is not reported back to the tasktracker. The tasktrakcer still thinks the tasks are running and this failure is never communicated to the tasktracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 05:54:44 2006
Return-Path: 
 <hadoop-dev-return-5689-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88466 invoked from network); 6 Dec 2006 05:54:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 05:54:44 -0000
Received: (qmail 64976 invoked by uid 500); 6 Dec 2006 05:54:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64748 invoked by uid 500); 6 Dec 2006 05:54:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64739 invoked by uid 99); 6 Dec 2006 05:54:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 21:54:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 21:54:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8A5957142EC
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 21:54:22 -0800 (PST)
Message-ID: <7814119.1165384462564.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 21:54:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-784) In caching if localizing the cache
 throws out an error sometimes the task failure is not updated
In-Reply-To: <609505.1165384461212.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-784?page=all ]

Mahadev konar updated HADOOP-784:
---------------------------------

          Component/s: mapred
    Affects Version/s: 0.7.0

> In caching if localizing the cache throws out an error sometimes the task failure is not updated
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-784
>                 URL: http://issues.apache.org/jira/browse/HADOOP-784
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>
> if localize cache throws out an exception the release cache throws out a null pointer exception which leads to a situation where the task has failed but it is not reported back to the tasktracker. The tasktrakcer still thinks the tasks are running and this failure is never communicated to the tasktracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 05:54:45 2006
Return-Path: 
 <hadoop-dev-return-5690-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88521 invoked from network); 6 Dec 2006 05:54:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 05:54:45 -0000
Received: (qmail 65047 invoked by uid 500); 6 Dec 2006 05:54:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65005 invoked by uid 500); 6 Dec 2006 05:54:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64996 invoked by uid 99); 6 Dec 2006 05:54:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 21:54:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 21:54:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E373E7142F6
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 21:54:23 -0800 (PST)
Message-ID: <6563451.1165384463929.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 21:54:23 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-784) In caching if localizing the cache
 throws out an error sometimes the task failure is not updated
In-Reply-To: <609505.1165384461212.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-784?page=all ]

Mahadev konar updated HADOOP-784:
---------------------------------

    Priority: Minor  (was: Major)

> In caching if localizing the cache throws out an error sometimes the task failure is not updated
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-784
>                 URL: http://issues.apache.org/jira/browse/HADOOP-784
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>
> if localize cache throws out an exception the release cache throws out a null pointer exception which leads to a situation where the task has failed but it is not reported back to the tasktracker. The tasktrakcer still thinks the tasks are running and this failure is never communicated to the tasktracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 06:21:44 2006
Return-Path: 
 <hadoop-dev-return-5691-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95351 invoked from network); 6 Dec 2006 06:21:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 06:21:44 -0000
Received: (qmail 86232 invoked by uid 500); 6 Dec 2006 06:21:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86210 invoked by uid 500); 6 Dec 2006 06:21:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86201 invoked by uid 99); 6 Dec 2006 06:21:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 22:21:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 22:21:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5355D7142F5
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 22:21:22 -0800 (PST)
Message-ID: <19059694.1165386082338.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 22:21:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-764) The memory consumption of
 processReport() in the namenode can be reduced
In-Reply-To: <21824491.1164845001071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-764?page=all ]

dhruba borthakur updated HADOOP-764:
------------------------------------

    Attachment: processBlockReport3.patch

Incorporated code review comments.

> The memory consumption of processReport() in the namenode can be reduced
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-764
>                 URL: http://issues.apache.org/jira/browse/HADOOP-764
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: processBlockReport3.patch
>
>
> The FSNamesystem.processReport() method converts the blocklist for a datanode into an array by calling node.getBlocks(). Although this memory allocation is transient, it could possibly require the garbage-collector to work that much harder. 
> The method Block.getBlocks() should be deprecated. Code that currently uses this method should instead iterate over the Collection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 06:21:45 2006
Return-Path: 
 <hadoop-dev-return-5692-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95393 invoked from network); 6 Dec 2006 06:21:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 06:21:45 -0000
Received: (qmail 86531 invoked by uid 500); 6 Dec 2006 06:21:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86467 invoked by uid 500); 6 Dec 2006 06:21:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86458 invoked by uid 99); 6 Dec 2006 06:21:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 22:21:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 22:21:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A93AE7142F6
	for <hadoop-dev@lucene.apache.org>; Tue,  5 Dec 2006 22:21:23 -0800 (PST)
Message-ID: <22600440.1165386083690.JavaMail.jira@brutus>
Date: Tue, 5 Dec 2006 22:21:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-764) The memory consumption of
 processReport() in the namenode can be reduced
In-Reply-To: <21824491.1164845001071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-764?page=all ]

dhruba borthakur updated HADOOP-764:
------------------------------------

    Attachment:     (was: processBlockReport.patch)

> The memory consumption of processReport() in the namenode can be reduced
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-764
>                 URL: http://issues.apache.org/jira/browse/HADOOP-764
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: processBlockReport3.patch
>
>
> The FSNamesystem.processReport() method converts the blocklist for a datanode into an array by calling node.getBlocks(). Although this memory allocation is transient, it could possibly require the garbage-collector to work that much harder. 
> The method Block.getBlocks() should be deprecated. Code that currently uses this method should instead iterate over the Collection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 08:21:43 2006
Return-Path: 
 <hadoop-dev-return-5693-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34648 invoked from network); 6 Dec 2006 08:21:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 08:21:43 -0000
Received: (qmail 11658 invoked by uid 500); 6 Dec 2006 08:21:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11623 invoked by uid 500); 6 Dec 2006 08:21:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11610 invoked by uid 99); 6 Dec 2006 08:21:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 00:21:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 00:21:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 217607142F5
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 00:21:21 -0800 (PST)
Message-ID: <4048066.1165393281134.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 00:21:21 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-785) Divide the server and client
 configurations
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Divide the server and client configurations
-------------------------------------------

                 Key: HADOOP-785
                 URL: http://issues.apache.org/jira/browse/HADOOP-785
             Project: Hadoop
          Issue Type: Improvement
          Components: conf
    Affects Versions: 0.9.0
            Reporter: Owen O'Malley
         Assigned To: Arun C Murthy
             Fix For: 0.10.0


The configuration system is easy to misconfigure and I think we need to strongly divide the server from client configs. 

An example of the problem was a configuration where the task tracker has a hadoop-site.xml that set mapred.reduce.tasks to 1. Therefore, the job tracker had the right number of reduces, but the map task thought there was a single reduce. This lead to a hard to find diagnose failure.

Therefore, I propose separating out the configuration types as:

class Configuration;
// reads site-default.xml, hadoop-default.xml

class ServerConf extends Configuration;
// reads hadoop-server.xml, $super

class DfsServerConf extends ServerConf;
// reads dfs-server.xml, $super

class MapRedServerConf extends ServerConf;
// reads mapred-server.xml, $super

class ClientConf extends Configuration;
// reads hadoop-client.xml, $super

class JobConf extends ClientConf;
// reads job.xml, $super

Note in particular, that nothing corresponds to hadoop-site.xml, which overrides both client and server configs. Furthermore, the properties from the *-default.xml files should never be saved into the job.xml.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 09:59:52 2006
Return-Path: 
 <hadoop-dev-return-5694-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67688 invoked from network); 6 Dec 2006 09:59:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 09:59:52 -0000
Received: (qmail 66230 invoked by uid 500); 6 Dec 2006 09:59:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66185 invoked by uid 500); 6 Dec 2006 09:59:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66171 invoked by uid 99); 6 Dec 2006 09:59:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 01:59:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 01:59:50 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 074717142FD
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 01:59:30 -0800 (PST)
Message-ID: <27172027.1165399170027.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 01:59:30 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-780) ReduceTask.ValueIterator should apply
 job configuration to Configurable values
In-Reply-To: <12863.1165335921141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-780?page=all ]

Andrzej Bialecki  updated HADOOP-780:
-------------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

Committed to trunk/ in rev. 482999 .

> ReduceTask.ValueIterator should apply job configuration to Configurable values
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-780
>                 URL: http://issues.apache.org/jira/browse/HADOOP-780
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.0, 0.10.0
>         Environment: Nutch trunk/, trying to upgrade to Hadoop 0.9.0.
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>             Fix For: 0.9.1
>
>         Attachments: configurable.patch
>
>
> ReduceTask.ValueIterator should apply job configuration to Configurable values. This is similar to the way it's done in ipc.Client.Connection.run().
> Some classes in Nutch (such as FetcherOutput and ParseData) rely on this behavior, and if it's not set an NPE is thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 11:21:50 2006
Return-Path: 
 <hadoop-dev-return-5695-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90125 invoked from network); 6 Dec 2006 11:21:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 11:21:50 -0000
Received: (qmail 76805 invoked by uid 500); 6 Dec 2006 11:21:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76770 invoked by uid 500); 6 Dec 2006 11:21:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76761 invoked by uid 99); 6 Dec 2006 11:21:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 03:21:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 03:21:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A7D497142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 03:21:27 -0800 (PST)
Message-ID: <20555770.1165404087684.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 03:21:27 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment:     (was: Hadoop-619.patch)

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 11:25:53 2006
Return-Path: 
 <hadoop-dev-return-5696-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91382 invoked from network); 6 Dec 2006 11:25:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 11:25:53 -0000
Received: (qmail 88416 invoked by uid 500); 6 Dec 2006 11:25:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88387 invoked by uid 500); 6 Dec 2006 11:25:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88345 invoked by uid 99); 6 Dec 2006 11:25:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 03:25:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 03:25:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B5B207142FA
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 03:25:26 -0800 (PST)
Message-ID: <7212835.1165404326741.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 03:25:26 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment: Hadoop-619.patch

This patch makes following changes : 
1. Accept empty input directories only if not specified as glob. 
2. Remove validation code from StreamngInputFormat, there are a few other related changes to streaming as part of HADOOP-476 ( not included in this patch) 


> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 11:27:47 2006
Return-Path: 
 <hadoop-dev-return-5697-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91780 invoked from network); 6 Dec 2006 11:27:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 11:27:47 -0000
Received: (qmail 91215 invoked by uid 500); 6 Dec 2006 11:27:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91187 invoked by uid 500); 6 Dec 2006 11:27:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91177 invoked by uid 99); 6 Dec 2006 11:27:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 03:27:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 03:27:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 029B27142FA
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 03:27:26 -0800 (PST)
Message-ID: <21752084.1165404446008.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 03:27:26 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Status: Patch Available  (was: Open)

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 11:39:49 2006
Return-Path: 
 <hadoop-dev-return-5698-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96213 invoked from network); 6 Dec 2006 11:39:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 11:39:49 -0000
Received: (qmail 6970 invoked by uid 500); 6 Dec 2006 11:39:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6950 invoked by uid 500); 6 Dec 2006 11:39:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6941 invoked by uid 99); 6 Dec 2006 11:39:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 03:39:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 03:39:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 572667142F7
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 03:39:28 -0800 (PST)
Message-ID: <11020716.1165405168353.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 03:39:28 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment:     (was: Hadoop-619.patch)

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 11:41:45 2006
Return-Path: 
 <hadoop-dev-return-5699-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97697 invoked from network); 6 Dec 2006 11:41:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 11:41:45 -0000
Received: (qmail 11458 invoked by uid 500); 6 Dec 2006 11:41:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11427 invoked by uid 500); 6 Dec 2006 11:41:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11418 invoked by uid 99); 6 Dec 2006 11:41:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 03:41:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 03:41:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B6FD37142D7
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 03:41:23 -0800 (PST)
Message-ID: <10367736.1165405283747.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 03:41:23 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment: Hadoop-619.patch

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 11:41:47 2006
Return-Path: 
 <hadoop-dev-return-5700-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97740 invoked from network); 6 Dec 2006 11:41:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 11:41:47 -0000
Received: (qmail 11750 invoked by uid 500); 6 Dec 2006 11:41:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11723 invoked by uid 500); 6 Dec 2006 11:41:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11702 invoked by uid 99); 6 Dec 2006 11:41:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 03:41:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 03:41:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BE79C7142E4
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 03:41:25 -0800 (PST)
Message-ID: <3505817.1165405285777.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 03:41:25 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-676) JobClient should print user friendly
 messages for standard errors
In-Reply-To: <5423204.1162510576774.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-676?page=all ]

Sanjay Dahiya updated HADOOP-676:
---------------------------------

    Status: Patch Available  (was: In Progress)

> JobClient should print user friendly messages for standard errors
> -----------------------------------------------------------------
>
>                 Key: HADOOP-676
>                 URL: http://issues.apache.org/jira/browse/HADOOP-676
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-676.patch
>
>
> The exceptions for non-existent input dirs or already existing output dirs should generate user-friendly error messages. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 12:11:43 2006
Return-Path: 
 <hadoop-dev-return-5701-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8230 invoked from network); 6 Dec 2006 12:11:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 12:11:43 -0000
Received: (qmail 56029 invoked by uid 500); 6 Dec 2006 12:11:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55997 invoked by uid 500); 6 Dec 2006 12:11:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55983 invoked by uid 99); 6 Dec 2006 12:11:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 04:11:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 04:11:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 126B97142D7
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 04:11:21 -0800 (PST)
Message-ID: <4522547.1165407081072.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 04:11:21 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-786) PhasedFileSystem should use debug
 level log for ignored exception.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

PhasedFileSystem should use debug level log for ignored exception.
------------------------------------------------------------------

                 Key: HADOOP-786
                 URL: http://issues.apache.org/jira/browse/HADOOP-786
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Sanjay Dahiya
            Priority: Trivial


For ignored exception while file close, if the file was already closed by user, phased file system should log at debug log level. Its to reduce unnecessary lines from log. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 12:13:43 2006
Return-Path: 
 <hadoop-dev-return-5702-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8661 invoked from network); 6 Dec 2006 12:13:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 12:13:43 -0000
Received: (qmail 58416 invoked by uid 500); 6 Dec 2006 12:13:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58386 invoked by uid 500); 6 Dec 2006 12:13:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58377 invoked by uid 99); 6 Dec 2006 12:13:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 04:13:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 04:13:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 635467142D7
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 04:13:22 -0800 (PST)
Message-ID: <31931722.1165407202404.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 04:13:22 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-786) PhasedFileSystem should use debug
 level log for ignored exception.
In-Reply-To: <4522547.1165407081072.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-786?page=all ]

Sanjay Dahiya reassigned HADOOP-786:
------------------------------------

    Assignee: Sanjay Dahiya

> PhasedFileSystem should use debug level log for ignored exception.
> ------------------------------------------------------------------
>
>                 Key: HADOOP-786
>                 URL: http://issues.apache.org/jira/browse/HADOOP-786
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Trivial
>         Attachments: Hadoop-786.patch
>
>
> For ignored exception while file close, if the file was already closed by user, phased file system should log at debug log level. Its to reduce unnecessary lines from log. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 12:13:45 2006
Return-Path: 
 <hadoop-dev-return-5703-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8702 invoked from network); 6 Dec 2006 12:13:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 12:13:45 -0000
Received: (qmail 58681 invoked by uid 500); 6 Dec 2006 12:13:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58645 invoked by uid 500); 6 Dec 2006 12:13:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58635 invoked by uid 99); 6 Dec 2006 12:13:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 04:13:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 04:13:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C29907142BF
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 04:13:23 -0800 (PST)
Message-ID: <28678033.1165407203794.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 04:13:23 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-786) PhasedFileSystem should use debug
 level log for ignored exception.
In-Reply-To: <4522547.1165407081072.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-786?page=all ]

Sanjay Dahiya updated HADOOP-786:
---------------------------------

    Attachment: Hadoop-786.patch

Patch attached. 

> PhasedFileSystem should use debug level log for ignored exception.
> ------------------------------------------------------------------
>
>                 Key: HADOOP-786
>                 URL: http://issues.apache.org/jira/browse/HADOOP-786
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Trivial
>         Attachments: Hadoop-786.patch
>
>
> For ignored exception while file close, if the file was already closed by user, phased file system should log at debug log level. Its to reduce unnecessary lines from log. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 12:15:43 2006
Return-Path: 
 <hadoop-dev-return-5704-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9161 invoked from network); 6 Dec 2006 12:15:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 12:15:43 -0000
Received: (qmail 60843 invoked by uid 500); 6 Dec 2006 12:15:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60608 invoked by uid 500); 6 Dec 2006 12:15:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60599 invoked by uid 99); 6 Dec 2006 12:15:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 04:15:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 04:15:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4FCB77142D7
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 04:15:22 -0800 (PST)
Message-ID: <28022036.1165407322324.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 04:15:22 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-786) PhasedFileSystem should use debug
 level log for ignored exception.
In-Reply-To: <4522547.1165407081072.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-786?page=all ]

Sanjay Dahiya updated HADOOP-786:
---------------------------------

    Status: Patch Available  (was: Open)

> PhasedFileSystem should use debug level log for ignored exception.
> ------------------------------------------------------------------
>
>                 Key: HADOOP-786
>                 URL: http://issues.apache.org/jira/browse/HADOOP-786
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Trivial
>         Attachments: Hadoop-786.patch
>
>
> For ignored exception while file close, if the file was already closed by user, phased file system should log at debug log level. Its to reduce unnecessary lines from log. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 12:32:50 2006
Return-Path: 
 <hadoop-dev-return-5705-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16219 invoked from network); 6 Dec 2006 12:32:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 12:32:50 -0000
Received: (qmail 94193 invoked by uid 500); 6 Dec 2006 12:32:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94171 invoked by uid 500); 6 Dec 2006 12:32:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94162 invoked by uid 99); 6 Dec 2006 12:32:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 04:32:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 04:32:49 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1857A7142E1
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 04:32:28 -0800 (PST)
Message-ID: <16310908.1165408348003.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 04:32:28 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment: Hadoop-619.patch

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 18:03:44 2006
Return-Path: 
 <hadoop-dev-return-5706-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38179 invoked from network); 6 Dec 2006 18:03:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 18:03:44 -0000
Received: (qmail 89591 invoked by uid 500); 6 Dec 2006 18:03:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89556 invoked by uid 500); 6 Dec 2006 18:03:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89547 invoked by uid 99); 6 Dec 2006 18:03:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 10:03:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 10:03:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2757B7142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 10:03:23 -0800 (PST)
Message-ID: <16118439.1165428203158.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 10:03:23 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-639?page=comments#action_12456146 ] 
            
Arun C Murthy commented on HADOOP-639:
--------------------------------------

Mahadev, appreciate for your review/comments...

 I have something very similar to the above code except for a difference:

Since the KillJobAction is processed as a part of the 'heartbeat', I don't do the cleanup 'inline' (keep the heartbeat processin tight) ... and as exists I delegate the 'cleanup' part to the 'tasksToCleanup' thread which periodically wakes up and cleans-out tasks - I set a 'purgeJobFiles' flag for the last task in runningJobs['jobid'], and that lets TaskTracker.TaskInProgress.jobHasFinished to cleanup the job-dir.

Thoughts?

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-639_1.patch, HADOOP-639_2_20061130.patch, HADOOP-639_3_20061201.patch, HADOOP-639_4_20061205.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 18:15:50 2006
Return-Path: 
 <hadoop-dev-return-5707-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42729 invoked from network); 6 Dec 2006 18:15:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 18:15:50 -0000
Received: (qmail 16180 invoked by uid 500); 6 Dec 2006 18:15:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16151 invoked by uid 500); 6 Dec 2006 18:15:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16115 invoked by uid 99); 6 Dec 2006 18:15:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 10:15:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 10:15:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 29D8C7142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 10:15:26 -0800 (PST)
Message-ID: <4715964.1165428926168.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 10:15:26 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12456153 ] 
            
Owen O'Malley commented on HADOOP-331:
--------------------------------------

Change the name of the class SorterBase to BufferSorter

Instead of "initialize(JobConf)"  in the file BasicTypeSorterBase.java, it should implement JobConfigurable.

The BasicTypeSorterBase should be an abstract class since it itself 
doesn't implement the sort algorithm

The sorter should not be concerned about partitions (makes the code 
hard to read). So have one sorter per partition instead of having one sorter 
for all partitions. In the case, where there is one sorter per partition, we 
don't require the callback mechanism (the OutputWriter interface in 
MapTask.java). Also, the ListOfArrays class is not required if this is done.

sort method in the SorterBase interface should return a RawKeyValueIterator
object rather than deriving from it import DataInputBuffer is not used in
BasicTypeSorterBase.java 

SequenceFile.java has some whitespace-only changes

Use readLong/writeLong instead of LongWritables for reading/writing longs

Remove the empty finally block from MapTask.run

Synchronize the collect methods in MapTask.java (move the 'synchronized'
from the method declaration to inside the method as 'synchronized(this)' )

Close the combiner after iterating a sorted partition while spilling to disk.
This is to ensure that in case of streaming, where the combiner is a separate
process, it processes the input key/vals and writes the output key/vals before
the spill file is updated with the partition information.

The occurrences of "sort" strings in ReduceTask.java may remain; they need not
be replaced with "merge" strings (although merge is the more accurate word, but
effectively we are sorting. Also, there may be code somewhere that relies on
status strings being "sort").

In TestMapRed.java, the check whether map output a compressed file or not is
commented out. We need to do the compression check.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>         Attachments: 331-design.txt, 331-initial3.patch, 331.txt
>
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 18:32:44 2006
Return-Path: 
 <hadoop-dev-return-5708-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48200 invoked from network); 6 Dec 2006 18:32:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 18:32:44 -0000
Received: (qmail 43680 invoked by uid 500); 6 Dec 2006 18:32:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43651 invoked by uid 500); 6 Dec 2006 18:32:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43642 invoked by uid 99); 6 Dec 2006 18:32:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 10:32:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 10:32:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E4AAC7142D7
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 10:32:22 -0800 (PST)
Message-ID: <27067606.1165429942933.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 10:32:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-676) JobClient should print user friendly
 messages for standard errors
In-Reply-To: <5423204.1162510576774.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-676?page=comments#action_12456157 ] 
            
Hadoop QA commented on HADOOP-676:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12344465/Hadoop-676.patch applied and successfully tested against trunk revision r482999

> JobClient should print user friendly messages for standard errors
> -----------------------------------------------------------------
>
>                 Key: HADOOP-676
>                 URL: http://issues.apache.org/jira/browse/HADOOP-676
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-676.patch
>
>
> The exceptions for non-existent input dirs or already existing output dirs should generate user-friendly error messages. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 18:52:44 2006
Return-Path: 
 <hadoop-dev-return-5709-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54443 invoked from network); 6 Dec 2006 18:52:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 18:52:44 -0000
Received: (qmail 96948 invoked by uid 500); 6 Dec 2006 18:52:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96716 invoked by uid 500); 6 Dec 2006 18:52:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96707 invoked by uid 99); 6 Dec 2006 18:52:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 10:52:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 10:52:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 784737142E4
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 10:52:22 -0800 (PST)
Message-ID: <8397522.1165431142490.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 10:52:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-786) PhasedFileSystem should use debug
 level log for ignored exception.
In-Reply-To: <4522547.1165407081072.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-786?page=comments#action_12456160 ] 
            
Hadoop QA commented on HADOOP-786:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346547/Hadoop-786.patch applied and successfully tested against trunk revision r482999

> PhasedFileSystem should use debug level log for ignored exception.
> ------------------------------------------------------------------
>
>                 Key: HADOOP-786
>                 URL: http://issues.apache.org/jira/browse/HADOOP-786
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Trivial
>         Attachments: Hadoop-786.patch
>
>
> For ignored exception while file close, if the file was already closed by user, phased file system should log at debug log level. Its to reduce unnecessary lines from log. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 19:34:45 2006
Return-Path: 
 <hadoop-dev-return-5710-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67924 invoked from network); 6 Dec 2006 19:34:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 19:34:45 -0000
Received: (qmail 78979 invoked by uid 500); 6 Dec 2006 19:34:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78949 invoked by uid 500); 6 Dec 2006 19:34:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78940 invoked by uid 99); 6 Dec 2006 19:34:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 11:34:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 11:34:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AECB47142D7
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 11:34:23 -0800 (PST)
Message-ID: <3142057.1165433663713.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 11:34:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12456177 ] 
            
Hadoop QA commented on HADOOP-619:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346548/Hadoop-619.patch applied and successfully tested against trunk revision r482999

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 19:44:42 2006
Return-Path: 
 <hadoop-dev-return-5711-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71777 invoked from network); 6 Dec 2006 19:44:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 19:44:42 -0000
Received: (qmail 98460 invoked by uid 500); 6 Dec 2006 19:44:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98212 invoked by uid 500); 6 Dec 2006 19:44:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98203 invoked by uid 99); 6 Dec 2006 19:44:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 11:44:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 11:44:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 307FD7142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 11:44:21 -0800 (PST)
Message-ID: <30534219.1165434261195.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 11:44:21 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-787) job tracker should limit the number of
 completed/failed jobs in RAM
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

job tracker should limit the number of completed/failed jobs in RAM
-------------------------------------------------------------------

                 Key: HADOOP-787
                 URL: http://issues.apache.org/jira/browse/HADOOP-787
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.9.0
            Reporter: Owen O'Malley
         Assigned To: Arun C Murthy
             Fix For: 0.10.0


The job tracker currently runs out of memory when a user runs a lot of small jobs back to back. To bound the amount of RAM that the job tracker consumes recording completed/failed jobs, I think that the JobTracker should limit the number of "remembered" jobs per a user to jobtracker.max.remembered.task.per.user (default 100).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 19:46:44 2006
Return-Path: 
 <hadoop-dev-return-5712-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72688 invoked from network); 6 Dec 2006 19:46:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 19:46:44 -0000
Received: (qmail 1954 invoked by uid 500); 6 Dec 2006 19:46:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1922 invoked by uid 500); 6 Dec 2006 19:46:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1912 invoked by uid 99); 6 Dec 2006 19:46:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 11:46:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 11:46:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F26777142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 11:46:22 -0800 (PST)
Message-ID: <16578967.1165434382990.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 11:46:22 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-756?page=comments#action_12456181 ] 
            
Konstantin Shvachko commented on HADOOP-756:
--------------------------------------------

I think it is better if DFSAdmin prints something when the wait is over.

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: safemodewait1.patch
>
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 19:53:45 2006
Return-Path: 
 <hadoop-dev-return-5713-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74187 invoked from network); 6 Dec 2006 19:53:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 19:53:45 -0000
Received: (qmail 11956 invoked by uid 500); 6 Dec 2006 19:53:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11927 invoked by uid 500); 6 Dec 2006 19:53:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11918 invoked by uid 99); 6 Dec 2006 19:53:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 11:53:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 11:53:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 33FEC7142BF
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 11:53:23 -0800 (PST)
Message-ID: <28505471.1165434803210.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 11:53:23 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-639?page=all ]

Arun C Murthy updated HADOOP-639:
---------------------------------

    Attachment: HADOOP-639_5_20061207.patch

Ok, here is another patch with Mahadev's suggestions.

Appreciate any feedback, I've tested this pretty good...

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-639_1.patch, HADOOP-639_2_20061130.patch, HADOOP-639_3_20061201.patch, HADOOP-639_4_20061205.patch, HADOOP-639_5_20061207.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 19:53:49 2006
Return-Path: 
 <hadoop-dev-return-5714-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74296 invoked from network); 6 Dec 2006 19:53:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 19:53:49 -0000
Received: (qmail 12836 invoked by uid 500); 6 Dec 2006 19:53:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12813 invoked by uid 500); 6 Dec 2006 19:53:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12798 invoked by uid 99); 6 Dec 2006 19:53:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 11:53:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 11:53:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 956447142F5
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 11:53:26 -0800 (PST)
Message-ID: <12044156.1165434806609.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 11:53:26 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-639?page=all ]

Arun C Murthy updated HADOOP-639:
---------------------------------

    Status: Patch Available  (was: Open)

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-639_1.patch, HADOOP-639_2_20061130.patch, HADOOP-639_3_20061201.patch, HADOOP-639_4_20061205.patch, HADOOP-639_5_20061207.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 20:13:44 2006
Return-Path: 
 <hadoop-dev-return-5715-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83505 invoked from network); 6 Dec 2006 20:13:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 20:13:44 -0000
Received: (qmail 47778 invoked by uid 500); 6 Dec 2006 20:13:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47724 invoked by uid 500); 6 Dec 2006 20:13:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47715 invoked by uid 99); 6 Dec 2006 20:13:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 12:13:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 12:13:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 03EA37142BF
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 12:13:23 -0800 (PST)
Message-ID: <18712445.1165436003013.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 12:13:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-639?page=comments#action_12456191 ] 
            
Hadoop QA commented on HADOOP-639:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346582/HADOOP-639_5_20061207.patch applied and successfully tested against trunk revision r482999

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-639_1.patch, HADOOP-639_2_20061130.patch, HADOOP-639_3_20061201.patch, HADOOP-639_4_20061205.patch, HADOOP-639_5_20061207.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 20:15:45 2006
Return-Path: 
 <hadoop-dev-return-5716-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84056 invoked from network); 6 Dec 2006 20:15:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 20:15:45 -0000
Received: (qmail 51558 invoked by uid 500); 6 Dec 2006 20:15:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51353 invoked by uid 500); 6 Dec 2006 20:15:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51344 invoked by uid 99); 6 Dec 2006 20:15:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 12:15:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 12:15:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 39A187142BF
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 12:15:23 -0800 (PST)
Message-ID: <30648542.1165436123233.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 12:15:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-785) Divide the server and client
 configurations
In-Reply-To: <4048066.1165393281134.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-785?page=comments#action_12456192 ] 
            
Doug Cutting commented on HADOOP-785:
-------------------------------------

I think this is the right direction.  We logically have a tree.  Each node corresponds to a config file that inherits and overrides its parent's files.

The need is that users be able to easily (1) remember the tree, (2) know where to specify a property within the tree.

I propose that the tree is organized around *where* in the cluster things are used, not *what* part of the code they configure (that's determined by the parameter name).  This addresses the primary source of confusion, and thus is what we must clarify.  In particular we should distinguish between things used only by servers, and things that clients may specify.

I propose the following tree:

default --read-only defaults for things that clients can override
  site -- site-specific defaults
    server-default -- read-only defaults for server-only configuration
      server -- server overrides for this site
    client -- user overrides

The read-only default files serve as documentation of what parameters can be added to files lower in the tree.  It is a configuration error to specify something that does not have a default value above it.

Some examples of what might be in the three non read-only files:
 
site - - site-specific defaults
  dfs.namenode.host&port
  dfs.block.size
  dfs.replication
  mapred.jobtracker.host&port
  mapred.map.tasks
  mapred.reduce.tasks

server -- server-specifics
   dfs.name.dir
   dfs.data.dir
   mapred.local.dir

client -- user can override defaults and site here, but not server
  dfs.replication -- user overrides site
  mapred.map.tasks -- user overrides site

Following from this, we'd have the following instantiable classes:

ServerConfiguration
  reads default, site, server-default, server, in that order.
  used by daemons

ClientConfiguration
   reads default, site, client, in that order.
   used by client applications

Rather than provide subclasses for different parts of the system, we should instead use static methods.  For example, we might have:

JobConf.setNumMapTasks(ClientConfiguration conf, int count);
HdfsConf.setReplication(ClientConfiguration conf, int replicas);

The point of these is compile-time checking of names and values while keeping the code well partitioned.  When we add a new HDFS parameter we should not have to change code outside of HDFS, yet, without multiple-inheritance, we cannot have a single object that permits configuration of HDFS, MapReduce, etc.

Thoughts?


  

> Divide the server and client configurations
> -------------------------------------------
>
>                 Key: HADOOP-785
>                 URL: http://issues.apache.org/jira/browse/HADOOP-785
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>    Affects Versions: 0.9.0
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>
> The configuration system is easy to misconfigure and I think we need to strongly divide the server from client configs. 
> An example of the problem was a configuration where the task tracker has a hadoop-site.xml that set mapred.reduce.tasks to 1. Therefore, the job tracker had the right number of reduces, but the map task thought there was a single reduce. This lead to a hard to find diagnose failure.
> Therefore, I propose separating out the configuration types as:
> class Configuration;
> // reads site-default.xml, hadoop-default.xml
> class ServerConf extends Configuration;
> // reads hadoop-server.xml, $super
> class DfsServerConf extends ServerConf;
> // reads dfs-server.xml, $super
> class MapRedServerConf extends ServerConf;
> // reads mapred-server.xml, $super
> class ClientConf extends Configuration;
> // reads hadoop-client.xml, $super
> class JobConf extends ClientConf;
> // reads job.xml, $super
> Note in particular, that nothing corresponds to hadoop-site.xml, which overrides both client and server configs. Furthermore, the properties from the *-default.xml files should never be saved into the job.xml.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 20:43:44 2006
Return-Path: 
 <hadoop-dev-return-5717-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98064 invoked from network); 6 Dec 2006 20:43:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 20:43:44 -0000
Received: (qmail 96880 invoked by uid 500); 6 Dec 2006 20:43:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96857 invoked by uid 500); 6 Dec 2006 20:43:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96847 invoked by uid 99); 6 Dec 2006 20:43:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 12:43:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 12:43:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0A2607142F5
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 12:43:23 -0800 (PST)
Message-ID: <21772505.1165437803038.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 12:43:23 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-787) job tracker should limit the number
 of completed/failed jobs in RAM
In-Reply-To: <30534219.1165434261195.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-787?page=comments#action_12456199 ] 
            
Runping Qi commented on HADOOP-787:
-----------------------------------


I think the jobtracker should save the old jobs to DFS and read them back when they are needed.


> job tracker should limit the number of completed/failed jobs in RAM
> -------------------------------------------------------------------
>
>                 Key: HADOOP-787
>                 URL: http://issues.apache.org/jira/browse/HADOOP-787
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.0
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>
> The job tracker currently runs out of memory when a user runs a lot of small jobs back to back. To bound the amount of RAM that the job tracker consumes recording completed/failed jobs, I think that the JobTracker should limit the number of "remembered" jobs per a user to jobtracker.max.remembered.task.per.user (default 100).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 20:49:43 2006
Return-Path: 
 <hadoop-dev-return-5718-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99701 invoked from network); 6 Dec 2006 20:49:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 20:49:43 -0000
Received: (qmail 5401 invoked by uid 500); 6 Dec 2006 20:49:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5370 invoked by uid 500); 6 Dec 2006 20:49:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5360 invoked by uid 99); 6 Dec 2006 20:49:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 12:49:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 12:49:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4922A7142BF
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 12:49:22 -0800 (PST)
Message-ID: <27683764.1165438162296.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 12:49:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-603) Extend SequenceFile to provide
 MapFile function by storing index at the end of the file
In-Reply-To: <667134.1160838695014.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-603?page=comments#action_12456202 ] 
            
Doug Cutting commented on HADOOP-603:
-------------------------------------

This sounds reasonable to me.  Are you working on a patch?

> Extend SequenceFile to provide MapFile function by storing index at the end of the file
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-603
>                 URL: http://issues.apache.org/jira/browse/HADOOP-603
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Jim Kellerman
>
> MapFile increases the load on the name node as two files are created to provide a index file format. If SequenceFile were extended by storing the index at the end of the file, 1/2 of the files currently created for a map/reduce operation would be needed, reducing the load on the name node.
> Perhaps this is why Google implemented SSTable files in this manner. (SSTable files are functionally identical to Hadoop MapFiles) (see the paper on BigTable - section 4 "Building Blocks" http://labs.google.com/papers/bigtable.html)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 20:55:54 2006
Return-Path: 
 <hadoop-dev-return-5719-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1951 invoked from network); 6 Dec 2006 20:55:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 20:55:54 -0000
Received: (qmail 26779 invoked by uid 500); 6 Dec 2006 20:55:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26742 invoked by uid 500); 6 Dec 2006 20:55:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26695 invoked by uid 99); 6 Dec 2006 20:55:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 12:55:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 12:55:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 00E647142F5
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 12:55:23 -0800 (PST)
Message-ID: <16957041.1165438523001.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 12:55:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-787) job tracker should limit the number
 of completed/failed jobs in RAM
In-Reply-To: <30534219.1165434261195.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-787?page=comments#action_12456206 ] 
            
Owen O'Malley commented on HADOOP-787:
--------------------------------------

They are already saved persistently in the job history logs, which are restored on demand.

> job tracker should limit the number of completed/failed jobs in RAM
> -------------------------------------------------------------------
>
>                 Key: HADOOP-787
>                 URL: http://issues.apache.org/jira/browse/HADOOP-787
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.0
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>
> The job tracker currently runs out of memory when a user runs a lot of small jobs back to back. To bound the amount of RAM that the job tracker consumes recording completed/failed jobs, I think that the JobTracker should limit the number of "remembered" jobs per a user to jobtracker.max.remembered.task.per.user (default 100).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 21:14:45 2006
Return-Path: 
 <hadoop-dev-return-5720-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7535 invoked from network); 6 Dec 2006 21:14:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 21:14:45 -0000
Received: (qmail 66238 invoked by uid 500); 6 Dec 2006 21:14:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66198 invoked by uid 500); 6 Dec 2006 21:14:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66188 invoked by uid 99); 6 Dec 2006 21:14:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 13:14:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 13:14:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5CE7D7142F6
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 13:14:22 -0800 (PST)
Message-ID: <20131720.1165439662377.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 13:14:22 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-778) Path.toString() should retain
 trailing '/' if passed in constructor
In-Reply-To: <33199548.1165269381054.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-778?page=comments#action_12456209 ] 
            
Sanjay Dahiya commented on HADOOP-778:
--------------------------------------

Doug: 
I didn't run tests with this, also we don't need it anymore with the new glob format spec. I agree that one must query the filesystem to determine the file type. The original issue in this case was to determine user's intention with a path from jobConf.getInputPaths().

> Path.toString() should retain trailing '/' if passed in constructor
> -------------------------------------------------------------------
>
>                 Key: HADOOP-778
>                 URL: http://issues.apache.org/jira/browse/HADOOP-778
>             Project: Hadoop
>          Issue Type: Bug
>          Components: fs
>            Reporter: Sanjay Dahiya
>
> Does it break something if Path retains trailing '/' if passed in constructor and returns it back in toString() ? 
> Looking at Path.toString() JobClient wont have a way of knowing which Paths were intended to be directories and not files, in the context of globbed regex ( HADOOP-619 ). 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 21:14:45 2006
Return-Path: 
 <hadoop-dev-return-5721-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7551 invoked from network); 6 Dec 2006 21:14:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 21:14:45 -0000
Received: (qmail 66289 invoked by uid 500); 6 Dec 2006 21:14:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66214 invoked by uid 500); 6 Dec 2006 21:14:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66199 invoked by uid 99); 6 Dec 2006 21:14:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 13:14:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 13:14:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 910377142FA
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 13:14:22 -0800 (PST)
Message-ID: <12935687.1165439662591.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 13:14:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-788) Streaming should use a subclass of
 TextInputFormat for reading text inputs.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Streaming should use a subclass of TextInputFormat for reading text inputs.
---------------------------------------------------------------------------

                 Key: HADOOP-788
                 URL: http://issues.apache.org/jira/browse/HADOOP-788
             Project: Hadoop
          Issue Type: Improvement
          Components: contrib/streaming
            Reporter: Owen O'Malley
         Assigned To: Sanjay Dahiya


Currently streaming uses a lot of custom code for processing text inputs. 

I propose:

 1. Move class LineRecordReader  out of TextInputFormat.
 2. Make class StreamLineRecordReader extend LineRecordReader.
 3. StreamLineRecordReader uses LineRecordReader.next to read the lines and splits them on tab to generate a Text/Text key/value pair.

This will remove a lot of code from streaming and give it automatic support for the compression codecs that the "base" part of Hadoop enjoys. In particular, if the native zlib code is used, it will remove the 2gb limit on compressed files.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 21:14:46 2006
Return-Path: 
 <hadoop-dev-return-5722-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7568 invoked from network); 6 Dec 2006 21:14:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 21:14:46 -0000
Received: (qmail 66604 invoked by uid 500); 6 Dec 2006 21:14:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66579 invoked by uid 500); 6 Dec 2006 21:14:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66537 invoked by uid 99); 6 Dec 2006 21:14:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 13:14:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 13:14:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EA2EB7142F7
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 13:14:23 -0800 (PST)
Message-ID: <22287804.1165439663956.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 13:14:23 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-778) Path.toString() should retain
 trailing '/' if passed in constructor
In-Reply-To: <33199548.1165269381054.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-778?page=all ]

Sanjay Dahiya resolved HADOOP-778.
----------------------------------

    Resolution: Won't Fix

Not needed anymore, marking Resolved. 

> Path.toString() should retain trailing '/' if passed in constructor
> -------------------------------------------------------------------
>
>                 Key: HADOOP-778
>                 URL: http://issues.apache.org/jira/browse/HADOOP-778
>             Project: Hadoop
>          Issue Type: Bug
>          Components: fs
>            Reporter: Sanjay Dahiya
>
> Does it break something if Path retains trailing '/' if passed in constructor and returns it back in toString() ? 
> Looking at Path.toString() JobClient wont have a way of knowing which Paths were intended to be directories and not files, in the context of globbed regex ( HADOOP-619 ). 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 22:37:45 2006
Return-Path: 
 <hadoop-dev-return-5723-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41872 invoked from network); 6 Dec 2006 22:37:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 22:37:45 -0000
Received: (qmail 51996 invoked by uid 500); 6 Dec 2006 22:37:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51750 invoked by uid 500); 6 Dec 2006 22:37:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51740 invoked by uid 99); 6 Dec 2006 22:37:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 14:37:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 14:37:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B5EAC7142D7
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 14:37:23 -0800 (PST)
Message-ID: <22502773.1165444643740.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 14:37:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-782) TaskTracker.java:killOverflowingTasks
 & TaskTracker.java:markUnresponsiveTasks only put the tip in tasksToCleanup
 queue, they don't update the runningJobs
In-Reply-To: <5740798.1165343781034.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-782?page=all ]

Owen O'Malley updated HADOOP-782:
---------------------------------

    Fix Version/s: 0.10.0
                       (was: 0.9.1)

> TaskTracker.java:killOverflowingTasks & TaskTracker.java:markUnresponsiveTasks only put the tip in tasksToCleanup queue, they don't update the runningJobs
> ----------------------------------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-782
>                 URL: http://issues.apache.org/jira/browse/HADOOP-782
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>
> Both killOverflowingTasks and markUnresponsiveTasks only put the tip in 'tasksToCleanup' queue, they should also call 'removeTaskFromJob' to update the 'runningJobs' map to reflect the fact that the task is no longer running. Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 22:46:44 2006
Return-Path: 
 <hadoop-dev-return-5724-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45261 invoked from network); 6 Dec 2006 22:46:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 22:46:44 -0000
Received: (qmail 77628 invoked by uid 500); 6 Dec 2006 22:46:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77594 invoked by uid 500); 6 Dec 2006 22:46:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77585 invoked by uid 99); 6 Dec 2006 22:46:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 14:46:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 14:46:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 28FDB7142E4
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 14:46:23 -0800 (PST)
Message-ID: <27506494.1165445183165.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 14:46:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-756?page=all ]

dhruba borthakur updated HADOOP-756:
------------------------------------

    Attachment:     (was: safemodewait1.patch)

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: dhruba borthakur
>            Priority: Minor
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 22:48:44 2006
Return-Path: 
 <hadoop-dev-return-5725-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45931 invoked from network); 6 Dec 2006 22:48:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 22:48:44 -0000
Received: (qmail 84536 invoked by uid 500); 6 Dec 2006 22:48:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84509 invoked by uid 500); 6 Dec 2006 22:48:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84496 invoked by uid 99); 6 Dec 2006 22:48:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 14:48:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 14:48:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 055037142E4
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 14:48:23 -0800 (PST)
Message-ID: <13714683.1165445303019.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 14:48:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-756?page=all ]

dhruba borthakur updated HADOOP-756:
------------------------------------

    Attachment: safemodewait2.patch

Incorporated review comments from Konstantin.

> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: safemodewait2.patch
>
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 23:05:42 2006
Return-Path: 
 <hadoop-dev-return-5726-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50044 invoked from network); 6 Dec 2006 23:05:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 23:05:42 -0000
Received: (qmail 16114 invoked by uid 500); 6 Dec 2006 23:05:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16093 invoked by uid 500); 6 Dec 2006 23:05:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16084 invoked by uid 99); 6 Dec 2006 23:05:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 15:05:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 15:05:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 295C27142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 15:05:21 -0800 (PST)
Message-ID: <4910412.1165446321166.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 15:05:21 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-789) DFS shell should return a list of
 nodes for a file saying that where the blocks for these files are located.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

DFS shell should return a list of nodes for a file saying that where the blocks for these files are located.
------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-789
                 URL: http://issues.apache.org/jira/browse/HADOOP-789
             Project: Hadoop
          Issue Type: New Feature
            Reporter: Mahadev konar
         Assigned To: Sameer Paranjpye
            Priority: Minor


dfs shell should support a command to get the list of nodes where a particular file is located.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 23:07:44 2006
Return-Path: 
 <hadoop-dev-return-5727-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50484 invoked from network); 6 Dec 2006 23:07:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 23:07:44 -0000
Received: (qmail 18336 invoked by uid 500); 6 Dec 2006 23:07:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18304 invoked by uid 500); 6 Dec 2006 23:07:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18295 invoked by uid 99); 6 Dec 2006 23:07:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 15:07:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 15:07:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F13D87142E4
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 15:07:22 -0800 (PST)
Message-ID: <22198382.1165446442985.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 15:07:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-789) DFS shell should return a list of
 nodes for a file saying that where the blocks for these files are located.
In-Reply-To: <4910412.1165446321166.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-789?page=all ]

Mahadev konar updated HADOOP-789:
---------------------------------

    Component/s: dfs

> DFS shell should return a list of nodes for a file saying that where the blocks for these files are located.
> ------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-789
>                 URL: http://issues.apache.org/jira/browse/HADOOP-789
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: Sameer Paranjpye
>            Priority: Minor
>
> dfs shell should support a command to get the list of nodes where a particular file is located.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 23:07:49 2006
Return-Path: 
 <hadoop-dev-return-5728-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50584 invoked from network); 6 Dec 2006 23:07:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 23:07:49 -0000
Received: (qmail 18680 invoked by uid 500); 6 Dec 2006 23:07:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18648 invoked by uid 500); 6 Dec 2006 23:07:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18631 invoked by uid 99); 6 Dec 2006 23:07:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 15:07:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 15:07:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 708877142F7
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 15:07:24 -0800 (PST)
Message-ID: <32639704.1165446444458.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 15:07:24 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-790) Jobtracker should be able to return
 the list of tasktrackers/onfor ports via http get in a xml format
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Jobtracker should be able to return the list of tasktrackers/onfor ports via http get in a xml format
-----------------------------------------------------------------------------------------------------

                 Key: HADOOP-790
                 URL: http://issues.apache.org/jira/browse/HADOOP-790
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: Mahadev konar
         Assigned To: Mahadev konar
            Priority: Minor




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 23:09:43 2006
Return-Path: 
 <hadoop-dev-return-5729-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51205 invoked from network); 6 Dec 2006 23:09:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 23:09:43 -0000
Received: (qmail 22505 invoked by uid 500); 6 Dec 2006 23:09:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22294 invoked by uid 500); 6 Dec 2006 23:09:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22285 invoked by uid 99); 6 Dec 2006 23:09:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 15:09:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 15:09:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3E2DB7142E4
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 15:09:22 -0800 (PST)
Message-ID: <519454.1165446562252.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 15:09:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-790) Jobtracker should be able to return
 the list of tasktrackers/info ports via http get in a xml format
In-Reply-To: <32639704.1165446444458.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-790?page=all ]

Mahadev konar updated HADOOP-790:
---------------------------------

    Summary: Jobtracker should be able to return the list of tasktrackers/info ports via http get in a xml format  (was: Jobtracker should be able to return the list of tasktrackers/onfor ports via http get in a xml format)

> Jobtracker should be able to return the list of tasktrackers/info ports via http get in a xml format
> ----------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-790
>                 URL: http://issues.apache.org/jira/browse/HADOOP-790
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec  6 23:58:43 2006
Return-Path: 
 <hadoop-dev-return-5730-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61960 invoked from network); 6 Dec 2006 23:58:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 23:58:43 -0000
Received: (qmail 73239 invoked by uid 500); 6 Dec 2006 23:58:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73220 invoked by uid 500); 6 Dec 2006 23:58:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73211 invoked by uid 99); 6 Dec 2006 23:58:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 15:58:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 15:58:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6C8897142D7
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 15:58:22 -0800 (PST)
Message-ID: <15136380.1165449502441.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 15:58:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-779) Hadoop streaming does not work with
 gzipped input
In-Reply-To: <30086137.1165275745355.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-779?page=all ]

Doug Cutting updated HADOOP-779:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Hairong!

> Hadoop streaming does not work with gzipped input
> -------------------------------------------------
>
>                 Key: HADOOP-779
>                 URL: http://issues.apache.org/jira/browse/HADOOP-779
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.9.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.9.1
>
>         Attachments: GzipIn.patch
>
>
> When input files are gzipped, StreamLineRecordReader does not take the corect OutputStream to fetch the next record. Instead of using a GzipOutputStream, it uses a FSOutputStream. So input files are read as uncompressed plain text.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 01:18:44 2006
Return-Path: 
 <hadoop-dev-return-5731-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78294 invoked from network); 7 Dec 2006 01:18:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 01:18:44 -0000
Received: (qmail 46899 invoked by uid 500); 7 Dec 2006 01:18:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46872 invoked by uid 500); 7 Dec 2006 01:18:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46863 invoked by uid 99); 7 Dec 2006 01:18:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 17:18:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 17:18:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 77B0B7142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 17:18:22 -0800 (PST)
Message-ID: <6224944.1165454302487.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 17:18:22 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-764) The memory consumption of
 processReport() in the namenode can be reduced
In-Reply-To: <21824491.1164845001071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-764?page=comments#action_12456276 ] 
            
Raghu Angadi commented on HADOOP-764:
-------------------------------------


As a related note, since we do a blocks.clear() in DatanodeDescriptor when we update blocks from , this results in one separate  copy of a block exists for each node (i.e. one for each replica) and one coy in NameNode's blockMap(). Ideally blocks in DatanodeDescriptor should be references to blocks in global blockMap.

This patch decreases number of times blocks.clear() is invoked but over time there will be separate copies of blocks. Fix is not to call blocks.clear() but update blocks map inline when new blocks are removed or added inside processReport().
 


> The memory consumption of processReport() in the namenode can be reduced
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-764
>                 URL: http://issues.apache.org/jira/browse/HADOOP-764
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: processBlockReport3.patch
>
>
> The FSNamesystem.processReport() method converts the blocklist for a datanode into an array by calling node.getBlocks(). Although this memory allocation is transient, it could possibly require the garbage-collector to work that much harder. 
> The method Block.getBlocks() should be deprecated. Code that currently uses this method should instead iterate over the Collection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 01:20:44 2006
Return-Path: 
 <hadoop-dev-return-5732-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78661 invoked from network); 7 Dec 2006 01:20:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 01:20:44 -0000
Received: (qmail 48719 invoked by uid 500); 7 Dec 2006 01:20:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48484 invoked by uid 500); 7 Dec 2006 01:20:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48475 invoked by uid 99); 7 Dec 2006 01:20:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 17:20:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 17:20:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E22947142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 17:20:22 -0800 (PST)
Message-ID: <20204671.1165454422923.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 17:20:22 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-789) DFS shell should return a list of
 nodes for a file saying that where the blocks for these files are located.
In-Reply-To: <4910412.1165446321166.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-789?page=comments#action_12456277 ] 
            
Yoram Arnon commented on HADOOP-789:
------------------------------------

hadoop fsck -files -blocks -locations provides this functionality

> DFS shell should return a list of nodes for a file saying that where the blocks for these files are located.
> ------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-789
>                 URL: http://issues.apache.org/jira/browse/HADOOP-789
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: Sameer Paranjpye
>            Priority: Minor
>
> dfs shell should support a command to get the list of nodes where a particular file is located.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 02:12:44 2006
Return-Path: 
 <hadoop-dev-return-5733-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87602 invoked from network); 7 Dec 2006 02:12:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 02:12:44 -0000
Received: (qmail 4195 invoked by uid 500); 7 Dec 2006 02:12:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3961 invoked by uid 500); 7 Dec 2006 02:12:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3940 invoked by uid 99); 7 Dec 2006 02:12:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 18:12:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 18:12:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EA2EB7142EC
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 18:12:22 -0800 (PST)
Message-ID: <20372602.1165457542956.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 18:12:22 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-789) DFS shell should return a list of
 nodes for a file saying that where the blocks for these files are located.
In-Reply-To: <4910412.1165446321166.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-789?page=comments#action_12456284 ] 
            
Yoram Arnon commented on HADOOP-789:
------------------------------------

I'd also like to see this information in the WI

> DFS shell should return a list of nodes for a file saying that where the blocks for these files are located.
> ------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-789
>                 URL: http://issues.apache.org/jira/browse/HADOOP-789
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: Sameer Paranjpye
>            Priority: Minor
>
> dfs shell should support a command to get the list of nodes where a particular file is located.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 04:38:43 2006
Return-Path: 
 <hadoop-dev-return-5734-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16329 invoked from network); 7 Dec 2006 04:38:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 04:38:43 -0000
Received: (qmail 45025 invoked by uid 500); 7 Dec 2006 04:38:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45004 invoked by uid 500); 7 Dec 2006 04:38:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44995 invoked by uid 99); 7 Dec 2006 04:38:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 20:38:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 20:38:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7C2467142E4
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 20:38:21 -0800 (PST)
Message-ID: <2727015.1165466301505.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 20:38:21 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-791) deadlock issue in taskstracker.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

deadlock issue in taskstracker.
-------------------------------

                 Key: HADOOP-791
                 URL: http://issues.apache.org/jira/browse/HADOOP-791
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Mahadev konar
         Assigned To: Mahadev konar


the stack trace--
"main":
        at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.createStatus(TaskTracker.java:880)
        - waiting to lock <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
        at org.apache.hadoop.mapred.TaskTracker.transmitHeartBeat(TaskTracker.java:489)
        - locked <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
        at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:442)
        at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
        at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)
"taskCleanup":
        at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.cleanup(TaskTracker.java:1072)
        - waiting to lock <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
        at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.jobHasFinished(TaskTracker.java:1013)
        - locked <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
        at org.apache.hadoop.mapred.TaskTracker$1.run(TaskTracker.java:144)
        at java.lang.Thread.run(Thread.java:595)
Found 1 deadlock.

The jobhasfinished method and transmitHeart beat lock the tasktracker and tip in a different order. Also , before emitting HeartBeat we should be updating the status and removing entries from runningtasks. Currently this is done after the heartbeat.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 05:28:42 2006
Return-Path: 
 <hadoop-dev-return-5735-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24259 invoked from network); 7 Dec 2006 05:28:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 05:28:42 -0000
Received: (qmail 83422 invoked by uid 500); 7 Dec 2006 05:28:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83375 invoked by uid 500); 7 Dec 2006 05:28:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83366 invoked by uid 99); 7 Dec 2006 05:28:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 21:28:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 21:28:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 137817142E4
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 21:28:21 -0800 (PST)
Message-ID: <7912715.1165469301076.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 21:28:21 -0800 (PST)
From: "Chris Schneider (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-792) Invalid dfs -mv can trash your entire
 dfs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Invalid dfs -mv can trash your entire dfs
-----------------------------------------

                 Key: HADOOP-792
                 URL: http://issues.apache.org/jira/browse/HADOOP-792
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.5.0
            Reporter: Chris Schneider


If the target path of the dfs -mv command exists within the source path, the dfs becomes corrupt. For example:

% hadoop dfs -mkdir target
% hadoop dfs -mv / target

I'm not certain whether this is reproducible in the current trunk, but I'd bet that it is.

This problem successfully circumvented my own patch to make dfs -rm a little safer (see my email c.2006-08-30 to nutch-dev for details). I had been deleting old crawl directories from the DFS by copying their names and pasting them into my command buffer. At one point, I paused to do something else, copied some other text (which unfortunately began with a Java comment and included carriage returns), then went back to removing the crawl directories. I must not have pressed hard enough on the "c" key when I did my next copy, since when I pasted into the command buffer, hadoop immediately began executing a dfs -rm / command. No problem - I'm protected, because my patched dfs command is just going to try to move / to /trash (and fail), right?

Wrong! Even though hadoop isn't really capable of such a move, it apparently tries hard enough to corrupt the namenode's DB.

Thankfully, I ran into this problem at a relatively opportune time, when the contents of my dfs had little value.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 06:51:44 2006
Return-Path: 
 <hadoop-dev-return-5736-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41295 invoked from network); 7 Dec 2006 06:51:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 06:51:44 -0000
Received: (qmail 56879 invoked by uid 500); 7 Dec 2006 06:51:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56853 invoked by uid 500); 7 Dec 2006 06:51:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56836 invoked by uid 99); 7 Dec 2006 06:51:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 22:51:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 22:51:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F2D7E7142D7
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 22:51:22 -0800 (PST)
Message-ID: <8007432.1165474282992.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 22:51:22 -0800 (PST)
From: "Jiang Lei (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-662) dfs -ls sometime prints "Found xxx
 items"; sometimes it does not print that string
In-Reply-To: <15693634.1162340057836.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-662?page=all ]

Jiang Lei reassigned HADOOP-662:
--------------------------------

    Assignee: Jiang Lei

> dfs -ls sometime prints "Found xxx items"; sometimes it does not print that string
> ----------------------------------------------------------------------------------
>
>                 Key: HADOOP-662
>                 URL: http://issues.apache.org/jira/browse/HADOOP-662
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: Jiang Lei
>            Priority: Minor
>
> I get a different response from dfs -ls depending on whether or not the 
> ls contained a directory or a wildcard. The wild card misses the 
> response that tells me how many files.
> It did indeed cause a problem with my scripts. It was easy to filter 
> out. If it's a desired action to do it sometimes and others then that's 
> it's ok. It doesn't seem like this is really the intention so I pointed 
> it out. My script is now happy with both forms. I do really on the fact 
> that the 3 column of the output is the file size. Perhaps I shouldn't be 
> doing this but I am writing some automated scripts in python to drive 
> hadoop so it is useful to check file sizes. If you were to provide a 
> format string that would allow me to place the items in a specific 
> format then you would be free to change it, whenever, however, you wanted.
> -Richard

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 07:03:45 2006
Return-Path: 
 <hadoop-dev-return-5737-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43082 invoked from network); 7 Dec 2006 07:03:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 07:03:45 -0000
Received: (qmail 64294 invoked by uid 500); 7 Dec 2006 07:03:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64263 invoked by uid 500); 7 Dec 2006 07:03:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64254 invoked by uid 99); 7 Dec 2006 07:03:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 23:03:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 23:03:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 592FB7142D7
	for <hadoop-dev@lucene.apache.org>; Wed,  6 Dec 2006 23:03:24 -0800 (PST)
Message-ID: <23474330.1165475004362.JavaMail.jira@brutus>
Date: Wed, 6 Dec 2006 23:03:24 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-331?page=all ]

Devaraj Das updated HADOOP-331:
-------------------------------

    Attachment: 331.patch

Thanks Owen for the detailed review. Attached is the new patch.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>         Attachments: 331-design.txt, 331-initial3.patch, 331.patch, 331.txt
>
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 09:45:48 2006
Return-Path: 
 <hadoop-dev-return-5738-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84192 invoked from network); 7 Dec 2006 09:45:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 09:45:48 -0000
Received: (qmail 89946 invoked by uid 500); 7 Dec 2006 09:45:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89914 invoked by uid 500); 7 Dec 2006 09:45:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89905 invoked by uid 99); 7 Dec 2006 09:45:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 01:45:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 01:45:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C674C7142EC
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 01:45:26 -0800 (PST)
Message-ID: <9173896.1165484726809.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 01:45:26 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment: Hadoop-619.patch

Updating patch with javadoc for JobConf setInputPath and addInputPath, which now include glob patterns. 

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 10:13:44 2006
Return-Path: 
 <hadoop-dev-return-5739-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91473 invoked from network); 7 Dec 2006 10:13:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 10:13:44 -0000
Received: (qmail 45603 invoked by uid 500); 7 Dec 2006 10:13:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45574 invoked by uid 500); 7 Dec 2006 10:13:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45565 invoked by uid 99); 7 Dec 2006 10:13:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 02:13:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 02:13:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5610D7142F5
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 02:13:22 -0800 (PST)
Message-ID: <16740969.1165486402349.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 02:13:22 -0800 (PST)
From: "Thomas Friol (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-649) Jobs without any map and reduce
 operations seems to be lost after their execution
In-Reply-To: <20242862.1161948738186.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-649?page=comments#action_12456335 ] 
            
Thomas Friol commented on HADOOP-649:
-------------------------------------

Has somenone looked to this patch ?
I think it is quiet important to fix this issue since some NPEs are regularly thrown by the JobInProgress class.
This patch has been tested on the 0.9.0 version and works perfectly.
Thanks for attention.

> Jobs without any map and reduce operations seems to be lost after their execution
> ---------------------------------------------------------------------------------
>
>                 Key: HADOOP-649
>                 URL: http://issues.apache.org/jira/browse/HADOOP-649
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.1
>            Reporter: Thomas Friol
>         Attachments: HADOOP-649.patch, HADOOP-649.patch
>
>
> When a job does not provide any file splits (because there is no data present), the job successes but then it is lost by the job tracker. Is this normal ?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 10:15:45 2006
Return-Path: 
 <hadoop-dev-return-5740-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92091 invoked from network); 7 Dec 2006 10:15:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 10:15:45 -0000
Received: (qmail 47746 invoked by uid 500); 7 Dec 2006 10:15:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47720 invoked by uid 500); 7 Dec 2006 10:15:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47700 invoked by uid 99); 7 Dec 2006 10:15:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 02:15:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 02:15:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8AA857142F7
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 02:15:23 -0800 (PST)
Message-ID: <29012040.1165486523565.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 02:15:23 -0800 (PST)
From: "Espen Amble Kolstad (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-793) SequenceFile.Reader does not set
 Configuration on DefaultCodec in init()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

SequenceFile.Reader does not set Configuration on DefaultCodec in init()
------------------------------------------------------------------------

                 Key: HADOOP-793
                 URL: http://issues.apache.org/jira/browse/HADOOP-793
             Project: Hadoop
          Issue Type: Bug
          Components: io
    Affects Versions: 0.9.1, 0.9.0
            Reporter: Espen Amble Kolstad


init() in SequenceFile.Reader should call setConf(conf) on the newly created DefaultCodec

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 10:19:44 2006
Return-Path: 
 <hadoop-dev-return-5741-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92807 invoked from network); 7 Dec 2006 10:19:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 10:19:44 -0000
Received: (qmail 53720 invoked by uid 500); 7 Dec 2006 10:19:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53693 invoked by uid 500); 7 Dec 2006 10:19:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53684 invoked by uid 99); 7 Dec 2006 10:19:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 02:19:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 02:19:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 55F147142F5
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 02:19:22 -0800 (PST)
Message-ID: <30649896.1165486762349.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 02:19:22 -0800 (PST)
From: "Espen Amble Kolstad (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-793) SequenceFile.Reader does not set
 Configuration on DefaultCodec in init()
In-Reply-To: <29012040.1165486523565.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-793?page=all ]

Espen Amble Kolstad updated HADOOP-793:
---------------------------------------

    Attachment: patch.txt

Here's a patch

I hope it's on the right format :-)

> SequenceFile.Reader does not set Configuration on DefaultCodec in init()
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-793
>                 URL: http://issues.apache.org/jira/browse/HADOOP-793
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.9.1, 0.9.0
>            Reporter: Espen Amble Kolstad
>         Attachments: patch.txt
>
>
> init() in SequenceFile.Reader should call setConf(conf) on the newly created DefaultCodec

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 12:19:46 2006
Return-Path: 
 <hadoop-dev-return-5742-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35146 invoked from network); 7 Dec 2006 12:19:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 12:19:46 -0000
Received: (qmail 75094 invoked by uid 500); 7 Dec 2006 12:19:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75071 invoked by uid 500); 7 Dec 2006 12:19:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75062 invoked by uid 99); 7 Dec 2006 12:19:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 04:19:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 04:19:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AC8F87142EC
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 04:19:24 -0800 (PST)
Message-ID: <4245091.1165493964704.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 04:19:24 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-331?page=all ]

Devaraj Das updated HADOOP-331:
-------------------------------

    Attachment:     (was: 331.patch)

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>         Attachments: 331-design.txt, 331-initial3.patch, 331.patch, 331.txt
>
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 12:19:53 2006
Return-Path: 
 <hadoop-dev-return-5743-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35244 invoked from network); 7 Dec 2006 12:19:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 12:19:53 -0000
Received: (qmail 75627 invoked by uid 500); 7 Dec 2006 12:20:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75605 invoked by uid 500); 7 Dec 2006 12:20:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75595 invoked by uid 99); 7 Dec 2006 12:20:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 04:20:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 04:19:52 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1AFFE7142FA
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 04:19:32 -0800 (PST)
Message-ID: <26982078.1165493972108.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 04:19:32 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-331?page=all ]

Devaraj Das updated HADOOP-331:
-------------------------------

    Attachment: 331.patch

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>         Attachments: 331-design.txt, 331-initial3.patch, 331.patch, 331.txt
>
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 12:19:57 2006
Return-Path: 
 <hadoop-dev-return-5744-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35379 invoked from network); 7 Dec 2006 12:19:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 12:19:57 -0000
Received: (qmail 76192 invoked by uid 500); 7 Dec 2006 12:20:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76159 invoked by uid 500); 7 Dec 2006 12:20:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76150 invoked by uid 99); 7 Dec 2006 12:20:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 04:20:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 04:19:55 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C09747142FB
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 04:19:35 -0800 (PST)
Message-ID: <7316951.1165493975785.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 04:19:35 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-331?page=all ]

Devaraj Das updated HADOOP-331:
-------------------------------

    Status: Patch Available  (was: In Progress)

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>         Attachments: 331-design.txt, 331-initial3.patch, 331.patch, 331.txt
>
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 13:55:48 2006
Return-Path: 
 <hadoop-dev-return-5745-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69056 invoked from network); 7 Dec 2006 13:55:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 13:55:48 -0000
Received: (qmail 81009 invoked by uid 500); 7 Dec 2006 13:55:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80987 invoked by uid 500); 7 Dec 2006 13:55:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80978 invoked by uid 99); 7 Dec 2006 13:55:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 05:55:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 05:55:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CFF9A7142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 05:55:26 -0800 (PST)
Message-ID: <27482068.1165499726849.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 05:55:26 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-764) The memory consumption of
 processReport() in the namenode can be reduced
In-Reply-To: <21824491.1164845001071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-764?page=comments#action_12456417 ] 
            
dhruba borthakur commented on HADOOP-764:
-----------------------------------------

All those other places you mention actually contain references to the same block object. The block object is created when the blockReport RPC arrives at the namenode, and then references to it are stored in Namenode.blockMap as well as DatanodeDescriptor.blocks.

> The memory consumption of processReport() in the namenode can be reduced
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-764
>                 URL: http://issues.apache.org/jira/browse/HADOOP-764
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: processBlockReport3.patch
>
>
> The FSNamesystem.processReport() method converts the blocklist for a datanode into an array by calling node.getBlocks(). Although this memory allocation is transient, it could possibly require the garbage-collector to work that much harder. 
> The method Block.getBlocks() should be deprecated. Code that currently uses this method should instead iterate over the Collection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 13:55:50 2006
Return-Path: 
 <hadoop-dev-return-5746-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69101 invoked from network); 7 Dec 2006 13:55:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 13:55:50 -0000
Received: (qmail 81300 invoked by uid 500); 7 Dec 2006 13:55:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81261 invoked by uid 500); 7 Dec 2006 13:55:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81252 invoked by uid 99); 7 Dec 2006 13:55:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 05:55:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 05:55:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3B9CB7142F5
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 05:55:28 -0800 (PST)
Message-ID: <4560981.1165499728241.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 05:55:28 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-764) The memory consumption of
 processReport() in the namenode can be reduced
In-Reply-To: <21824491.1164845001071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-764?page=all ]

dhruba borthakur updated HADOOP-764:
------------------------------------

    Status: Patch Available  (was: Open)

This patch reduces namenode's memory consumption while processing block reports.  

> The memory consumption of processReport() in the namenode can be reduced
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-764
>                 URL: http://issues.apache.org/jira/browse/HADOOP-764
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: processBlockReport3.patch
>
>
> The FSNamesystem.processReport() method converts the blocklist for a datanode into an array by calling node.getBlocks(). Although this memory allocation is transient, it could possibly require the garbage-collector to work that much harder. 
> The method Block.getBlocks() should be deprecated. Code that currently uses this method should instead iterate over the Collection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 15:43:38 2006
Return-Path: 
 <hadoop-dev-return-5747-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14849 invoked from network); 7 Dec 2006 15:43:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 15:43:38 -0000
Received: (qmail 50785 invoked by uid 500); 7 Dec 2006 15:43:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50756 invoked by uid 500); 7 Dec 2006 15:43:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50732 invoked by uid 99); 7 Dec 2006 15:43:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 07:43:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6D8617142D7
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 07:42:23 -0800 (PST)
Message-ID: <13657050.1165506143445.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 07:42:23 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-476) Streaming should check for correctness
 of the task
In-Reply-To: <20801208.1156462750189.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-476?page=all ]

Sanjay Dahiya updated HADOOP-476:
---------------------------------

    Attachment: Hadoop-476.patch

This patch replaces commandline processing with apache CLI2. 
Input validation is not done as part of this patch as thats moved to JobClient now. It validates -mapper, -reducer, -combiner, -file attributes to be files present and accessible on disk. 
It doesn't validate a file to be an executable, that is not available through java File API until Java 6. For now it runs "chmod +x" on the file if its present and accessible. 
comments?


> Streaming should check for correctness of the task
> --------------------------------------------------
>
>                 Key: HADOOP-476
>                 URL: http://issues.apache.org/jira/browse/HADOOP-476
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-476.patch
>
>
> Currently, if anythin is wrong with streaming job, it dies without any explanation.
> Before creating and running actual MapReduce job, Streaming should check if:
> -- the executables (or scripts) for -mapper and -reducer are available and have right permissions
> -- the input fragments exist

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 17:01:19 2006
Return-Path: 
 <hadoop-dev-return-5748-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46351 invoked from network); 7 Dec 2006 17:01:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 17:01:19 -0000
Received: (qmail 42037 invoked by uid 500); 7 Dec 2006 17:01:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41801 invoked by uid 500); 7 Dec 2006 17:01:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41752 invoked by uid 99); 7 Dec 2006 17:01:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 09:01:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 09:00:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BFAE67142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 09:00:25 -0800 (PST)
Message-ID: <20081316.1165510825780.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 09:00:25 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12456485 ] 
            
Hadoop QA commented on HADOOP-331:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346642/331.patch applied and successfully tested against trunk revision r483294

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>         Attachments: 331-design.txt, 331-initial3.patch, 331.patch, 331.txt
>
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 17:05:07 2006
Return-Path: 
 <hadoop-dev-return-5749-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49316 invoked from network); 7 Dec 2006 17:05:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 17:05:07 -0000
Received: (qmail 60105 invoked by uid 500); 7 Dec 2006 17:04:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60059 invoked by uid 500); 7 Dec 2006 17:04:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60012 invoked by uid 99); 7 Dec 2006 17:04:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 09:04:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 09:04:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C9B6E714311
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 09:04:26 -0800 (PST)
Message-ID: <24085458.1165511066823.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 09:04:26 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment:     (was: Hadoop-619.patch)

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 17:48:44 2006
Return-Path: 
 <hadoop-dev-return-5750-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62176 invoked from network); 7 Dec 2006 17:48:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 17:48:44 -0000
Received: (qmail 70389 invoked by uid 500); 7 Dec 2006 17:48:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70219 invoked by uid 500); 7 Dec 2006 17:48:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70182 invoked by uid 99); 7 Dec 2006 17:48:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 09:48:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 09:48:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 512F37142EC
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 09:48:22 -0800 (PST)
Message-ID: <8067369.1165513702329.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 09:48:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-764) The memory consumption of
 processReport() in the namenode can be reduced
In-Reply-To: <21824491.1164845001071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-764?page=comments#action_12456494 ] 
            
Hadoop QA commented on HADOOP-764:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346511/processBlockReport3.patch applied and successfully tested against trunk revision r483294

> The memory consumption of processReport() in the namenode can be reduced
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-764
>                 URL: http://issues.apache.org/jira/browse/HADOOP-764
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: processBlockReport3.patch
>
>
> The FSNamesystem.processReport() method converts the blocklist for a datanode into an array by calling node.getBlocks(). Although this memory allocation is transient, it could possibly require the garbage-collector to work that much harder. 
> The method Block.getBlocks() should be deprecated. Code that currently uses this method should instead iterate over the Collection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 17:52:46 2006
Return-Path: 
 <hadoop-dev-return-5751-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64048 invoked from network); 7 Dec 2006 17:52:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 17:52:46 -0000
Received: (qmail 75686 invoked by uid 500); 7 Dec 2006 17:52:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75660 invoked by uid 500); 7 Dec 2006 17:52:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75651 invoked by uid 99); 7 Dec 2006 17:52:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 09:52:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 09:52:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1C5CF7142D7
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 09:52:25 -0800 (PST)
Message-ID: <31341957.1165513945113.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 09:52:25 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-770) When JobTracker gets restarted, Job
 Tracker History doesn't show the jobs that were running. (incomplete jobs)
In-Reply-To: <16531717.1164921201066.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-770?page=all ]

Sanjay Dahiya updated HADOOP-770:
---------------------------------

    Attachment: Hadoop-770.patch

This patch fixes issue of incomplete tasks not appearing in history WI. 

> When JobTracker gets restarted, Job Tracker History doesn't show the jobs that were running. (incomplete jobs)
> --------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-770
>                 URL: http://issues.apache.org/jira/browse/HADOOP-770
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Koji Noguchi
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-770.patch
>
>
> When JobTracker fail or get killed manually,  last running jobs won't show up in the Job Track History.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 17:52:48 2006
Return-Path: 
 <hadoop-dev-return-5752-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64096 invoked from network); 7 Dec 2006 17:52:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 17:52:48 -0000
Received: (qmail 75959 invoked by uid 500); 7 Dec 2006 17:52:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75927 invoked by uid 500); 7 Dec 2006 17:52:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75918 invoked by uid 99); 7 Dec 2006 17:52:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 09:52:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 09:52:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 229567142F5
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 09:52:27 -0800 (PST)
Message-ID: <15424266.1165513947139.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 09:52:27 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-770) When JobTracker gets restarted, Job
 Tracker History doesn't show the jobs that were running. (incomplete jobs)
In-Reply-To: <16531717.1164921201066.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-770?page=all ]

Sanjay Dahiya updated HADOOP-770:
---------------------------------

    Status: Patch Available  (was: Open)

> When JobTracker gets restarted, Job Tracker History doesn't show the jobs that were running. (incomplete jobs)
> --------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-770
>                 URL: http://issues.apache.org/jira/browse/HADOOP-770
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Koji Noguchi
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-770.patch
>
>
> When JobTracker fail or get killed manually,  last running jobs won't show up in the Job Track History.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 18:02:48 2006
Return-Path: 
 <hadoop-dev-return-5753-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67721 invoked from network); 7 Dec 2006 18:02:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 18:02:48 -0000
Received: (qmail 98640 invoked by uid 500); 7 Dec 2006 18:02:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98613 invoked by uid 500); 7 Dec 2006 18:02:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98589 invoked by uid 99); 7 Dec 2006 18:02:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:02:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:02:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 88B497142F7
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 10:02:24 -0800 (PST)
Message-ID: <21989056.1165514544556.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 10:02:24 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-792) Invalid dfs -mv can trash your entire
 dfs
In-Reply-To: <7912715.1165469301076.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-792?page=all ]

dhruba borthakur updated HADOOP-792:
------------------------------------

    Attachment: renameerrorcode.patch

The 0.9.0 release does not have this problem. I think there was a bugfix from Konstantin in the last few weeks that addressed this issue.

When I tried your steps, the rename command failed (as expected) but the error code returned was 0. I am attaching a one-line patch that returns an error code of -1 when the rename command fails.


> Invalid dfs -mv can trash your entire dfs
> -----------------------------------------
>
>                 Key: HADOOP-792
>                 URL: http://issues.apache.org/jira/browse/HADOOP-792
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Chris Schneider
>         Attachments: renameerrorcode.patch
>
>
> If the target path of the dfs -mv command exists within the source path, the dfs becomes corrupt. For example:
> % hadoop dfs -mkdir target
> % hadoop dfs -mv / target
> I'm not certain whether this is reproducible in the current trunk, but I'd bet that it is.
> This problem successfully circumvented my own patch to make dfs -rm a little safer (see my email c.2006-08-30 to nutch-dev for details). I had been deleting old crawl directories from the DFS by copying their names and pasting them into my command buffer. At one point, I paused to do something else, copied some other text (which unfortunately began with a Java comment and included carriage returns), then went back to removing the crawl directories. I must not have pressed hard enough on the "c" key when I did my next copy, since when I pasted into the command buffer, hadoop immediately began executing a dfs -rm / command. No problem - I'm protected, because my patched dfs command is just going to try to move / to /trash (and fail), right?
> Wrong! Even though hadoop isn't really capable of such a move, it apparently tries hard enough to corrupt the namenode's DB.
> Thankfully, I ran into this problem at a relatively opportune time, when the contents of my dfs had little value.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 18:13:48 2006
Return-Path: 
 <hadoop-dev-return-5754-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72852 invoked from network); 7 Dec 2006 18:13:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 18:13:48 -0000
Received: (qmail 25200 invoked by uid 500); 7 Dec 2006 18:13:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25174 invoked by uid 500); 7 Dec 2006 18:13:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25165 invoked by uid 99); 7 Dec 2006 18:13:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:13:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:13:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C13D97142F7
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 10:13:25 -0800 (PST)
Message-ID: <29898056.1165515205788.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 10:13:25 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-770) When JobTracker gets restarted, Job
 Tracker History doesn't show the jobs that were running. (incomplete jobs)
In-Reply-To: <16531717.1164921201066.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-770?page=comments#action_12456503 ] 
            
Hadoop QA commented on HADOOP-770:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346692/Hadoop-770.patch applied and successfully tested against trunk revision r483294

> When JobTracker gets restarted, Job Tracker History doesn't show the jobs that were running. (incomplete jobs)
> --------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-770
>                 URL: http://issues.apache.org/jira/browse/HADOOP-770
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Koji Noguchi
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-770.patch
>
>
> When JobTracker fail or get killed manually,  last running jobs won't show up in the Job Track History.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 18:13:55 2006
Return-Path: 
 <hadoop-dev-return-5755-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73046 invoked from network); 7 Dec 2006 18:13:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 18:13:55 -0000
Received: (qmail 25499 invoked by uid 500); 7 Dec 2006 18:13:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25473 invoked by uid 500); 7 Dec 2006 18:13:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25464 invoked by uid 99); 7 Dec 2006 18:13:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:13:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:13:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 583137142F5
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 10:13:27 -0800 (PST)
Message-ID: <31721462.1165515207358.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 10:13:27 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-763) NameNode benchmark using mapred is
 insufficient
In-Reply-To: <25129528.1164844521052.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-763?page=all ]

Doug Cutting updated HADOOP-763:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Nigel!

> NameNode benchmark using mapred is insufficient
> -----------------------------------------------
>
>                 Key: HADOOP-763
>                 URL: http://issues.apache.org/jira/browse/HADOOP-763
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: test
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-763.patch
>
>
> The current namenode benchmark (org.apache.hadoop.examples.NNBench) uses map/reduce to distribute a load on the namenode.  For the purposes of loading the namenode, this model gives insufficient control over job start and failure recovery.  I propose the namenode benchmark be re-written to use slaves.sh directly to execute the namenode benchmark.  The benchmark should also give finer control over the operations executed and the timings reported.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 18:30:42 2006
Return-Path: 
 <hadoop-dev-return-5756-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79337 invoked from network); 7 Dec 2006 18:30:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 18:30:42 -0000
Received: (qmail 69813 invoked by uid 500); 7 Dec 2006 18:30:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69786 invoked by uid 500); 7 Dec 2006 18:30:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69777 invoked by uid 99); 7 Dec 2006 18:30:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:30:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:30:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1F54F7142EC
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 10:30:21 -0800 (PST)
Message-ID: <20588755.1165516221125.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 10:30:21 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-794) JobTracker crashes with
 ArithmeticException
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

JobTracker crashes with ArithmeticException
-------------------------------------------

                 Key: HADOOP-794
                 URL: http://issues.apache.org/jira/browse/HADOOP-794
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.9.1
            Reporter: Nigel Daley


The sort benchmark on 20 nodes failed for me with an ArithmeticException.  Sort.java calculates the number of maps and reduces dynamically based on the cluster size.  I'm guessing at the time it did the calculation, the jobtracker had heard from 0 task trackers (which seems odd since I wait 1 minute after starting the jobtracker before starting Sort).

>>From the job output:
Running on 0 nodes to sort from /sortBenchmark20/input into /sortBenchmark20/output with 0 reduces.

>>From the JobTracker log:
2006-12-07 07:10:06,709 ERROR org.apache.hadoop.mapred.JobTracker: Job initialization failed:
java.lang.ArithmeticException: / by zero
        at org.apache.hadoop.mapred.InputFormatBase.getSplits(InputFormatBase.java:130)
        at org.apache.hadoop.mapred.JobInProgress.initTasks(JobInProgress.java:125)
        at org.apache.hadoop.mapred.JobTracker$JobInitThread.run(JobTracker.java:326)
        at java.lang.Thread.run(Thread.java:595)

The jobtacker should check for illegal inputs like this and not fall over.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 18:30:44 2006
Return-Path: 
 <hadoop-dev-return-5757-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79385 invoked from network); 7 Dec 2006 18:30:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 18:30:44 -0000
Received: (qmail 70086 invoked by uid 500); 7 Dec 2006 18:30:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70052 invoked by uid 500); 7 Dec 2006 18:30:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70043 invoked by uid 99); 7 Dec 2006 18:30:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:30:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:30:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 79A0E7142F6
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 10:30:22 -0800 (PST)
Message-ID: <10488262.1165516222495.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 10:30:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-777) the tasktracker hostname is not fully
 qualified
In-Reply-To: <10727461.1165170921181.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-777?page=all ]

Doug Cutting updated HADOOP-777:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Mahadev!

> the tasktracker hostname is not fully qualified
> -----------------------------------------------
>
>                 Key: HADOOP-777
>                 URL: http://issues.apache.org/jira/browse/HADOOP-777
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: fullyqualified.patch
>
>
> The hostname of the tasktracker that is passed around in map reduce in all the UI's is not fully qualified. IT would be nice to have all the url's as fully qualified url's.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 18:34:44 2006
Return-Path: 
 <hadoop-dev-return-5758-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81774 invoked from network); 7 Dec 2006 18:34:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 18:34:44 -0000
Received: (qmail 85173 invoked by uid 500); 7 Dec 2006 18:34:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85148 invoked by uid 500); 7 Dec 2006 18:34:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85139 invoked by uid 99); 7 Dec 2006 18:34:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:34:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:34:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 59BAB7142EC
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 10:34:22 -0800 (PST)
Message-ID: <16921442.1165516462365.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 10:34:22 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-764) The memory consumption of
 processReport() in the namenode can be reduced
In-Reply-To: <21824491.1164845001071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-764?page=comments#action_12456515 ] 
            
Raghu Angadi commented on HADOOP-764:
-------------------------------------

Regd  references:

Say Bx is a block in Namenode.blockMap and Bx_ref is in Dx.blocks as desired. Now when we update Dx.block in processReport(), we do Dx.blocks.clear() : i.e. Bx_ref is removed. Bx_new_ref in newReport array is added to Dx.block. So there are two separate objects referenced by namenode.blockMap and Dx.block. 

newReport[] does not hold reference to blocks in namenode.blockMap (as far as I can see). What I am missing?




> The memory consumption of processReport() in the namenode can be reduced
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-764
>                 URL: http://issues.apache.org/jira/browse/HADOOP-764
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: processBlockReport3.patch
>
>
> The FSNamesystem.processReport() method converts the blocklist for a datanode into an array by calling node.getBlocks(). Although this memory allocation is transient, it could possibly require the garbage-collector to work that much harder. 
> The method Block.getBlocks() should be deprecated. Code that currently uses this method should instead iterate over the Collection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 18:38:45 2006
Return-Path: 
 <hadoop-dev-return-5759-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83038 invoked from network); 7 Dec 2006 18:38:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 18:38:45 -0000
Received: (qmail 1524 invoked by uid 500); 7 Dec 2006 18:38:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1497 invoked by uid 500); 7 Dec 2006 18:38:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1488 invoked by uid 99); 7 Dec 2006 18:38:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:38:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:38:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1838D7142D7
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 10:38:23 -0800 (PST)
Message-ID: <9525038.1165516703096.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 10:38:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-621) When a dfs -cat command is killed by
 the user, the correspondig hadoop process does not get aborted
In-Reply-To: <11382556.1161379656653.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-621?page=all ]

Doug Cutting updated HADOOP-621:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba!

> When a dfs -cat command is killed by the user, the correspondig hadoop process does not get aborted
> ---------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-621
>                 URL: http://issues.apache.org/jira/browse/HADOOP-621
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: pipecheck.patch
>
>
> if I use hadoop dfs -cat  in a pipeline, and kill the consumer of -cat output, the hadoop process stays alive.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 18:47:47 2006
Return-Path: 
 <hadoop-dev-return-5760-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86370 invoked from network); 7 Dec 2006 18:47:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 18:47:47 -0000
Received: (qmail 30190 invoked by uid 500); 7 Dec 2006 18:47:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30155 invoked by uid 500); 7 Dec 2006 18:47:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30146 invoked by uid 99); 7 Dec 2006 18:47:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:47:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:47:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4EF437142F8
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 10:47:25 -0800 (PST)
Message-ID: <17832791.1165517245320.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 10:47:25 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-752) Possible locking issues in HDFS
 Namenode
In-Reply-To: <3588846.1164693201081.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-752?page=all ]

Doug Cutting updated HADOOP-752:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba!

> Possible locking issues in HDFS Namenode
> ----------------------------------------
>
>                 Key: HADOOP-752
>                 URL: http://issues.apache.org/jira/browse/HADOOP-752
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>             Fix For: 0.10.0
>
>         Attachments: namenodelocking.patch
>
>
> I have been investigating the cause of random Namenode memory corruptions/memory overflows, etc. Please comment.
>  1. The functions datanodeReport() and DFSNodesStatus() do not acquire the global lock.
>    This can race with another thread invoking registerDatanode(). registerDatanode()
>    can remove a datanode (thru wipeDatanode()) while the datanodeReport thread is
>    traversing the list of datanodes. This can cause exceptions to occur.
>  2. The blocksMap is protected by the global lock. The setReplication() call does not acquire
>    the global lock when it calls proccessOverReplicatedBlock(). This can cause corruption in blockMap.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 19:05:46 2006
Return-Path: 
 <hadoop-dev-return-5761-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92698 invoked from network); 7 Dec 2006 19:05:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 19:05:46 -0000
Received: (qmail 82016 invoked by uid 500); 7 Dec 2006 19:05:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81985 invoked by uid 500); 7 Dec 2006 19:05:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81976 invoked by uid 99); 7 Dec 2006 19:05:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:05:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:05:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7A29F7142FB
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 11:05:24 -0800 (PST)
Message-ID: <14839006.1165518324497.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 11:05:24 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-785) Divide the server and client
 configurations
In-Reply-To: <4048066.1165393281134.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-785?page=all ]

Owen O'Malley updated HADOOP-785:
---------------------------------

    Assignee: Milind Bhandarkar  (was: Arun C Murthy)

> Divide the server and client configurations
> -------------------------------------------
>
>                 Key: HADOOP-785
>                 URL: http://issues.apache.org/jira/browse/HADOOP-785
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>    Affects Versions: 0.9.0
>            Reporter: Owen O'Malley
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.10.0
>
>
> The configuration system is easy to misconfigure and I think we need to strongly divide the server from client configs. 
> An example of the problem was a configuration where the task tracker has a hadoop-site.xml that set mapred.reduce.tasks to 1. Therefore, the job tracker had the right number of reduces, but the map task thought there was a single reduce. This lead to a hard to find diagnose failure.
> Therefore, I propose separating out the configuration types as:
> class Configuration;
> // reads site-default.xml, hadoop-default.xml
> class ServerConf extends Configuration;
> // reads hadoop-server.xml, $super
> class DfsServerConf extends ServerConf;
> // reads dfs-server.xml, $super
> class MapRedServerConf extends ServerConf;
> // reads mapred-server.xml, $super
> class ClientConf extends Configuration;
> // reads hadoop-client.xml, $super
> class JobConf extends ClientConf;
> // reads job.xml, $super
> Note in particular, that nothing corresponds to hadoop-site.xml, which overrides both client and server configs. Furthermore, the properties from the *-default.xml files should never be saved into the job.xml.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 19:09:47 2006
Return-Path: 
 <hadoop-dev-return-5762-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94255 invoked from network); 7 Dec 2006 19:09:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 19:09:47 -0000
Received: (qmail 94168 invoked by uid 500); 7 Dec 2006 19:09:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94143 invoked by uid 500); 7 Dec 2006 19:09:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94112 invoked by uid 99); 7 Dec 2006 19:09:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:09:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:09:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 402017142F5
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 11:09:24 -0800 (PST)
Message-ID: <14439847.1165518564260.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 11:09:24 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-629) none of the rpc servers check the
 protcol name for validity
In-Reply-To: <8479558.1161668116777.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-629?page=all ]

Doug Cutting updated HADOOP-629:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> none of the rpc servers check the protcol name for validity
> -----------------------------------------------------------
>
>                 Key: HADOOP-629
>                 URL: http://issues.apache.org/jira/browse/HADOOP-629
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: protocol-name.patch
>
>
> All of the Hadoop RPC servers either ignore the protocol name or do:
> if (protocol.equals(Prot1.class.getName()) {
>   return Prot1.versionId;
> } else {
>   return Prot2.versionId;
> }
> A much better structure would be:
> if (Prot1.class.getName().equals(protocol)) {
>   return Prot1.versionId;
> } else if (Prot2.class.getName().equals(protocol)) {
>   return Prot2.versionId;
> } else {
>   throw new VersionMismatchException("Expected protocol Prot1 or Prot2 and received: " + protocol);
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 19:09:55 2006
Return-Path: 
 <hadoop-dev-return-5763-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94446 invoked from network); 7 Dec 2006 19:09:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 19:09:55 -0000
Received: (qmail 94589 invoked by uid 500); 7 Dec 2006 19:09:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94552 invoked by uid 500); 7 Dec 2006 19:09:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94531 invoked by uid 99); 7 Dec 2006 19:09:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:09:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:09:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C3F377142FD
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 11:09:25 -0800 (PST)
Message-ID: <17214261.1165518565799.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 11:09:25 -0800 (PST)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-795) hdfs -cp /a/b/c  /x/y    acts like
   hdfs -cp /a/b/c/*   /x/y
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

hdfs -cp /a/b/c  /x/y    acts like   hdfs -cp /a/b/c/*   /x/y 
--------------------------------------------------------------

                 Key: HADOOP-795
                 URL: http://issues.apache.org/jira/browse/HADOOP-795
             Project: Hadoop
          Issue Type: Bug
            Reporter: arkady borkovsky
            Priority: Minor


I'd expect it to behave like
   hdfs -mkdir /x/y/c 
   hdfs -cp /a/b/c/*   /x/y/c
like the Unix couterpart does.

(Of course this a pretty small issue :)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 19:11:44 2006
Return-Path: 
 <hadoop-dev-return-5764-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94821 invoked from network); 7 Dec 2006 19:11:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 19:11:44 -0000
Received: (qmail 97355 invoked by uid 500); 7 Dec 2006 19:11:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97332 invoked by uid 500); 7 Dec 2006 19:11:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97319 invoked by uid 99); 7 Dec 2006 19:11:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:11:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:11:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 04A7E7142EC
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 11:11:23 -0800 (PST)
Message-ID: <9187034.1165518683016.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 11:11:23 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-785) Divide the server and client
 configurations
In-Reply-To: <4048066.1165393281134.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-785?page=comments#action_12456546 ] 
            
Arun C Murthy commented on HADOOP-785:
--------------------------------------

+1

Another view-point: One of the things I frequently wish I had goes something like this - for a particular job/task I'd like to tweak the log-level to 'debug' while developing/testing...

Generalising: while we are at it, should we think about about separating the 'ClientConfiguration' into static and dynamic parts? The 'dynamic' aspect would cover cases like: switch log-level, turn speculative execution on/off etc. 

I concede it might be more useful for developers rather than users in the short/medium term...

Thoughts? Does it sound like a good direction?

> Divide the server and client configurations
> -------------------------------------------
>
>                 Key: HADOOP-785
>                 URL: http://issues.apache.org/jira/browse/HADOOP-785
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>    Affects Versions: 0.9.0
>            Reporter: Owen O'Malley
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.10.0
>
>
> The configuration system is easy to misconfigure and I think we need to strongly divide the server from client configs. 
> An example of the problem was a configuration where the task tracker has a hadoop-site.xml that set mapred.reduce.tasks to 1. Therefore, the job tracker had the right number of reduces, but the map task thought there was a single reduce. This lead to a hard to find diagnose failure.
> Therefore, I propose separating out the configuration types as:
> class Configuration;
> // reads site-default.xml, hadoop-default.xml
> class ServerConf extends Configuration;
> // reads hadoop-server.xml, $super
> class DfsServerConf extends ServerConf;
> // reads dfs-server.xml, $super
> class MapRedServerConf extends ServerConf;
> // reads mapred-server.xml, $super
> class ClientConf extends Configuration;
> // reads hadoop-client.xml, $super
> class JobConf extends ClientConf;
> // reads job.xml, $super
> Note in particular, that nothing corresponds to hadoop-site.xml, which overrides both client and server configs. Furthermore, the properties from the *-default.xml files should never be saved into the job.xml.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 19:19:53 2006
Return-Path: 
 <hadoop-dev-return-5765-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97404 invoked from network); 7 Dec 2006 19:19:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 19:19:53 -0000
Received: (qmail 13917 invoked by uid 500); 7 Dec 2006 19:19:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13899 invoked by uid 500); 7 Dec 2006 19:19:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13888 invoked by uid 99); 7 Dec 2006 19:19:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:19:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:19:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E353C7142F5
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 11:19:26 -0800 (PST)
Message-ID: <6476484.1165519166928.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 11:19:26 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12456549 ] 
            
Owen O'Malley commented on HADOOP-331:
--------------------------------------

+1

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>         Attachments: 331-design.txt, 331-initial3.patch, 331.patch, 331.txt
>
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 19:21:53 2006
Return-Path: 
 <hadoop-dev-return-5766-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98443 invoked from network); 7 Dec 2006 19:21:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 19:21:53 -0000
Received: (qmail 20196 invoked by uid 500); 7 Dec 2006 19:21:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20130 invoked by uid 500); 7 Dec 2006 19:21:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20088 invoked by uid 99); 7 Dec 2006 19:21:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:21:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:21:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4C32C7142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 11:21:24 -0800 (PST)
Message-ID: <18751026.1165519284309.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 11:21:24 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-786) PhasedFileSystem should use debug
 level log for ignored exception.
In-Reply-To: <4522547.1165407081072.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-786?page=comments#action_12456550 ] 
            
Owen O'Malley commented on HADOOP-786:
--------------------------------------

+1

> PhasedFileSystem should use debug level log for ignored exception.
> ------------------------------------------------------------------
>
>                 Key: HADOOP-786
>                 URL: http://issues.apache.org/jira/browse/HADOOP-786
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Trivial
>         Attachments: Hadoop-786.patch
>
>
> For ignored exception while file close, if the file was already closed by user, phased file system should log at debug log level. Its to reduce unnecessary lines from log. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 19:23:44 2006
Return-Path: 
 <hadoop-dev-return-5767-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99172 invoked from network); 7 Dec 2006 19:23:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 19:23:44 -0000
Received: (qmail 23522 invoked by uid 500); 7 Dec 2006 19:23:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23286 invoked by uid 500); 7 Dec 2006 19:23:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23277 invoked by uid 99); 7 Dec 2006 19:23:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:23:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:23:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 834A27142F5
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 11:23:22 -0800 (PST)
Message-ID: <2463191.1165519402535.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 11:23:22 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-792) Invalid dfs -mv can trash your
 entire dfs
In-Reply-To: <7912715.1165469301076.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-792?page=comments#action_12456552 ] 
            
Runping Qi commented on HADOOP-792:
-----------------------------------


We must try our best to weed out the bug like that.
It was actually a well know that when moving files/dirs, we must check the validity of the operation.
Care must be paid there and thorough tests must be done.



> Invalid dfs -mv can trash your entire dfs
> -----------------------------------------
>
>                 Key: HADOOP-792
>                 URL: http://issues.apache.org/jira/browse/HADOOP-792
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Chris Schneider
>         Attachments: renameerrorcode.patch
>
>
> If the target path of the dfs -mv command exists within the source path, the dfs becomes corrupt. For example:
> % hadoop dfs -mkdir target
> % hadoop dfs -mv / target
> I'm not certain whether this is reproducible in the current trunk, but I'd bet that it is.
> This problem successfully circumvented my own patch to make dfs -rm a little safer (see my email c.2006-08-30 to nutch-dev for details). I had been deleting old crawl directories from the DFS by copying their names and pasting them into my command buffer. At one point, I paused to do something else, copied some other text (which unfortunately began with a Java comment and included carriage returns), then went back to removing the crawl directories. I must not have pressed hard enough on the "c" key when I did my next copy, since when I pasted into the command buffer, hadoop immediately began executing a dfs -rm / command. No problem - I'm protected, because my patched dfs command is just going to try to move / to /trash (and fail), right?
> Wrong! Even though hadoop isn't really capable of such a move, it apparently tries hard enough to corrupt the namenode's DB.
> Thankfully, I ran into this problem at a relatively opportune time, when the contents of my dfs had little value.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 19:37:44 2006
Return-Path: 
 <hadoop-dev-return-5768-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4699 invoked from network); 7 Dec 2006 19:37:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 19:37:44 -0000
Received: (qmail 56181 invoked by uid 500); 7 Dec 2006 19:37:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55934 invoked by uid 500); 7 Dec 2006 19:37:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55923 invoked by uid 99); 7 Dec 2006 19:37:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:37:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:37:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 479607142EC
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 11:37:22 -0800 (PST)
Message-ID: <5613430.1165520242290.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 11:37:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-774) Datanodes fails to heartbeat when a
 directory with a large number of blocks is deleted
In-Reply-To: <10916275.1165019421088.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-774?page=all ]

Doug Cutting updated HADOOP-774:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba!

> Datanodes fails to heartbeat when a directory with a large number of blocks is deleted
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-774
>                 URL: http://issues.apache.org/jira/browse/HADOOP-774
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>             Fix For: 0.10.0
>
>         Attachments: chunkinvalidateBlocks2.java
>
>
> If a user removes a few files that are huge, it causes the namenode to send BlockInvalidate command to the relevant Datanodes. The Datanode process the blockInvalidate command as part of its heartbeat thread. If the number of blocks to be invalidated is huge, the datanode takes a long time to process it. This causes the datanode to not send new heartbeats to the namenode. The namenode declares the datanode as dead!
> 1. One option is to process the blockInvalidate as a separate thread from the heartbeat thread in the Datanode. 
> 2. Another option would be to constrain the namenode to send a max (e.g. 500) blocks per blockInvalidate message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 19:50:45 2006
Return-Path: 
 <hadoop-dev-return-5769-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8768 invoked from network); 7 Dec 2006 19:50:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 19:50:45 -0000
Received: (qmail 88482 invoked by uid 500); 7 Dec 2006 19:50:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88447 invoked by uid 500); 7 Dec 2006 19:50:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88438 invoked by uid 99); 7 Dec 2006 19:50:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:50:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:50:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 40FFA7142EC
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 11:50:23 -0800 (PST)
Message-ID: <31654388.1165521023263.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 11:50:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-785) Divide the server and client
 configurations
In-Reply-To: <4048066.1165393281134.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-785?page=comments#action_12456562 ] 
            
Doug Cutting commented on HADOOP-785:
-------------------------------------

> should we think about about separating the 'ClientConfiguration' into static and dynamic parts?

To some degree we already have that: the static part is in the config file and the dynamic part is the object.  We support specifying properties on the command line, so that one can run things like:

  bin/hadoop jar -Dlog.level=DEBUG ...

I think this works with most commands since HADOOP-59 was committed.


> Divide the server and client configurations
> -------------------------------------------
>
>                 Key: HADOOP-785
>                 URL: http://issues.apache.org/jira/browse/HADOOP-785
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>    Affects Versions: 0.9.0
>            Reporter: Owen O'Malley
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.10.0
>
>
> The configuration system is easy to misconfigure and I think we need to strongly divide the server from client configs. 
> An example of the problem was a configuration where the task tracker has a hadoop-site.xml that set mapred.reduce.tasks to 1. Therefore, the job tracker had the right number of reduces, but the map task thought there was a single reduce. This lead to a hard to find diagnose failure.
> Therefore, I propose separating out the configuration types as:
> class Configuration;
> // reads site-default.xml, hadoop-default.xml
> class ServerConf extends Configuration;
> // reads hadoop-server.xml, $super
> class DfsServerConf extends ServerConf;
> // reads dfs-server.xml, $super
> class MapRedServerConf extends ServerConf;
> // reads mapred-server.xml, $super
> class ClientConf extends Configuration;
> // reads hadoop-client.xml, $super
> class JobConf extends ClientConf;
> // reads job.xml, $super
> Note in particular, that nothing corresponds to hadoop-site.xml, which overrides both client and server configs. Furthermore, the properties from the *-default.xml files should never be saved into the job.xml.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 19:53:32 2006
Return-Path: 
 <hadoop-dev-return-5770-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9539 invoked from network); 7 Dec 2006 19:53:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 19:53:32 -0000
Received: (qmail 93455 invoked by uid 500); 7 Dec 2006 19:53:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93220 invoked by uid 500); 7 Dec 2006 19:53:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93208 invoked by uid 99); 7 Dec 2006 19:53:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:53:39 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 11:53:28 -0800
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp1.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kB7Jr3wC002912
	for <hadoop-dev@lucene.apache.org>; Thu, 7 Dec 2006 11:53:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=X+uYPHtDTX7U6n3Zn5Qwdz9/9cHXIMVHP4LNYP9/T5PVJejX1rMqXCgfHeIMQ1dZ
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <13657050.1165506143445.JavaMail.jira@brutus>
References: <13657050.1165506143445.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <f70576f16e0e032d473d059d506a03a9@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Updated: (HADOOP-476) Streaming should check for
 correctness of the task
Date: Thu, 7 Dec 2006 11:53:02 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org

chmod is fine.

In some cases streaming job is a script that uses executables that are 
shipped using -file option.
The executables loose the x permissions and the script fails.  (I ran 
into this and it took me a while to undersatnd the reason of failure).

This may be fixed or alleviated by
(a) adding an -executable option that is similar to -file but does   
"chmod a+x"
(b) at least describing this in user documentation, so that the user 
knows to do this on her own.

Of course, (a) is preferable...

-- ab

On Dec 7, 2006, at 7:42 AM, Sanjay Dahiya (JIRA) wrote:

>      [ http://issues.apache.org/jira/browse/HADOOP-476?page=all ]
>
> Sanjay Dahiya updated HADOOP-476:
> ---------------------------------
>
>     Attachment: Hadoop-476.patch
>
> This patch replaces commandline processing with apache CLI2.
> Input validation is not done as part of this patch as thats moved to 
> JobClient now. It validates -mapper, -reducer, -combiner, -file 
> attributes to be files present and accessible on disk.
> It doesn't validate a file to be an executable, that is not available 
> through java File API until Java 6. For now it runs "chmod +x" on the 
> file if its present and accessible.
> comments?
>
>
>> Streaming should check for correctness of the task
>> --------------------------------------------------
>>
>>                 Key: HADOOP-476
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-476
>>             Project: Hadoop
>>          Issue Type: Bug
>>          Components: contrib/streaming
>>            Reporter: arkady borkovsky
>>         Assigned To: Sanjay Dahiya
>>         Attachments: Hadoop-476.patch
>>
>>
>> Currently, if anythin is wrong with streaming job, it dies without 
>> any explanation.
>> Before creating and running actual MapReduce job, Streaming should 
>> check if:
>> -- the executables (or scripts) for -mapper and -reducer are 
>> available and have right permissions
>> -- the input fragments exist
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the 
> administrators: 
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see: 
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Thu Dec  7 20:03:38 2006
Return-Path: 
 <hadoop-dev-return-5771-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12685 invoked from network); 7 Dec 2006 20:03:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 20:03:38 -0000
Received: (qmail 9761 invoked by uid 500); 7 Dec 2006 20:03:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9728 invoked by uid 500); 7 Dec 2006 20:03:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9718 invoked by uid 99); 7 Dec 2006 20:03:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 12:03:43 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 12:03:02 -0800
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kB7K272J001293
	for <hadoop-dev@lucene.apache.org>; Thu, 7 Dec 2006 12:02:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=IbAiQUyhaiQesQwe53Qkp+sO4M0ijoQvUtUUQe60/aN2QfsE04cQ5S74KFH7eHQM
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <12935687.1165439662591.JavaMail.jira@brutus>
References: <12935687.1165439662591.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7bff0c03ea95de2a9ff80773685c9c1e@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Created: (HADOOP-788) Streaming should use a subclass of
 TextInputFormat for reading text inputs.
Date: Thu, 7 Dec 2006 12:02:06 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org

Please make sure that this fix does not bring back the UTF-8 problems:
streaming expects to see the same bytes that are in the input files.    
No encoding conversion should happen unless explicitly requested (by a  
not-yet-existent command line option?)


On Dec 6, 2006, at 1:14 PM, Owen O'Malley (JIRA) wrote:

> Streaming should use a subclass of TextInputFormat for reading text  
> inputs.
> ----------------------------------------------------------------------- 
> ----
>
>                  Key: HADOOP-788
>                  URL: http://issues.apache.org/jira/browse/HADOOP-788
>              Project: Hadoop
>           Issue Type: Improvement
>           Components: contrib/streaming
>             Reporter: Owen O'Malley
>          Assigned To: Sanjay Dahiya
>
>
> Currently streaming uses a lot of custom code for processing text  
> inputs.
>
> I propose:
>
>  1. Move class LineRecordReader  out of TextInputFormat.
>  2. Make class StreamLineRecordReader extend LineRecordReader.
>  3. StreamLineRecordReader uses LineRecordReader.next to read the  
> lines and splits them on tab to generate a Text/Text key/value pair.
>
> This will remove a lot of code from streaming and give it automatic  
> support for the compression codecs that the "base" part of Hadoop  
> enjoys. In particular, if the native zlib code is used, it will remove  
> the 2gb limit on compressed files.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Thu Dec  7 20:07:33 2006
Return-Path: 
 <hadoop-dev-return-5772-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14398 invoked from network); 7 Dec 2006 20:07:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 20:07:33 -0000
Received: (qmail 19160 invoked by uid 500); 7 Dec 2006 20:06:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19123 invoked by uid 500); 7 Dec 2006 20:06:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19096 invoked by uid 99); 7 Dec 2006 20:06:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 12:06:59 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.145.54.173] (HELO mrout3.yahoo.com) (216.145.54.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 12:06:34 -0800
Received: from [IPv6:::1] (socks1.corp.yahoo.com [216.145.54.158])
	by mrout3.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id kB7K5Ohn004687
	for <hadoop-dev@lucene.apache.org>; Thu, 7 Dec 2006 12:05:25 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=T5ZIYV7+wNnSgxsTdC5d1rv5+TqizevXHuzkdhlqoPfXV7yclQf4c48PH7oGexos
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <f70576f16e0e032d473d059d506a03a9@yahoo-inc.com>
References: <13657050.1165506143445.JavaMail.jira@brutus>
 <f70576f16e0e032d473d059d506a03a9@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B5E3490B-11F0-4A25-81C9-F8BD65B5F91A@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Sanjay Dahiya <sanjayd@yahoo-inc.com>
Subject: Re: [jira] Updated: (HADOOP-476) Streaming should check for
 correctness of the task
Date: Fri, 8 Dec 2006 01:35:33 +0530
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I have done chmod only for mapper/reducer/combiner for -file it just  
checks for availability of file. Is it a good idea to make all files  
in -file option executable?

Sanjay

On 08-Dec-06, at 1:23 AM, Arkady Borkovsky wrote:

> chmod is fine.
>
> In some cases streaming job is a script that uses executables that  
> are shipped using -file option.
> The executables loose the x permissions and the script fails.  (I  
> ran into this and it took me a while to undersatnd the reason of  
> failure).
>
> This may be fixed or alleviated by
> (a) adding an -executable option that is similar to -file but  
> does   "chmod a+x"
> (b) at least describing this in user documentation, so that the  
> user knows to do this on her own.
>
> Of course, (a) is preferable...
>
> -- ab
>
> On Dec 7, 2006, at 7:42 AM, Sanjay Dahiya (JIRA) wrote:
>
>>      [ http://issues.apache.org/jira/browse/HADOOP-476?page=all ]
>>
>> Sanjay Dahiya updated HADOOP-476:
>> ---------------------------------
>>
>>     Attachment: Hadoop-476.patch
>>
>> This patch replaces commandline processing with apache CLI2.
>> Input validation is not done as part of this patch as thats moved  
>> to JobClient now. It validates -mapper, -reducer, -combiner, -file  
>> attributes to be files present and accessible on disk.
>> It doesn't validate a file to be an executable, that is not  
>> available through java File API until Java 6. For now it runs  
>> "chmod +x" on the file if its present and accessible.
>> comments?
>>
>>
>>> Streaming should check for correctness of the task
>>> --------------------------------------------------
>>>
>>>                 Key: HADOOP-476
>>>                 URL: http://issues.apache.org/jira/browse/HADOOP-476
>>>             Project: Hadoop
>>>          Issue Type: Bug
>>>          Components: contrib/streaming
>>>            Reporter: arkady borkovsky
>>>         Assigned To: Sanjay Dahiya
>>>         Attachments: Hadoop-476.patch
>>>
>>>
>>> Currently, if anythin is wrong with streaming job, it dies  
>>> without any explanation.
>>> Before creating and running actual MapReduce job, Streaming  
>>> should check if:
>>> -- the executables (or scripts) for -mapper and -reducer are  
>>> available and have right permissions
>>> -- the input fragments exist
>>
>> -- 
>> This message is automatically generated by JIRA.
>> -
>> If you think it was sent incorrectly contact one of the  
>> administrators: http://issues.apache.org/jira/secure/ 
>> Administrators.jspa
>> -
>> For more information on JIRA, see: http://www.atlassian.com/ 
>> software/jira
>>
>>
>


From MAILER-DAEMON Thu Dec  7 20:07:49 2006
Return-Path: 
 <hadoop-dev-return-5773-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14694 invoked from network); 7 Dec 2006 20:07:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 20:07:49 -0000
Received: (qmail 19923 invoked by uid 500); 7 Dec 2006 20:07:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19849 invoked by uid 500); 7 Dec 2006 20:07:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19811 invoked by uid 99); 7 Dec 2006 20:07:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 12:07:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 12:06:49 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E6B407142FD
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 12:06:28 -0800 (PST)
Message-ID: <5294972.1165521988942.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 12:06:28 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-738) dfs get or copyToLocal should not copy
 crc file
In-Reply-To: <18953484.1164060182168.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-738?page=all ]

Doug Cutting updated HADOOP-738:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Milind!

> dfs get or copyToLocal should not copy crc file
> -----------------------------------------------
>
>                 Key: HADOOP-738
>                 URL: http://issues.apache.org/jira/browse/HADOOP-738
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.10.0
>
>         Attachments: hadoop-crc.patch
>
>
> Currently, when we -get or -copyToLocal a directory from DFS, all the files including crc files are also copied. When we -put or -copyFromLocal again, since the crc files already exist on DFS, this put fails. The solution is not to copy checksum files when copying to local. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 20:18:48 2006
Return-Path: 
 <hadoop-dev-return-5774-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17924 invoked from network); 7 Dec 2006 20:18:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 20:18:48 -0000
Received: (qmail 46841 invoked by uid 500); 7 Dec 2006 20:18:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46814 invoked by uid 500); 7 Dec 2006 20:18:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46787 invoked by uid 99); 7 Dec 2006 20:18:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 12:18:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 12:18:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A6F807142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 12:18:25 -0800 (PST)
Message-ID: <30419381.1165522705681.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 12:18:25 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-676) JobClient should print user friendly
 messages for standard errors
In-Reply-To: <5423204.1162510576774.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-676?page=all ]

Doug Cutting updated HADOOP-676:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Sanjay!

> JobClient should print user friendly messages for standard errors
> -----------------------------------------------------------------
>
>                 Key: HADOOP-676
>                 URL: http://issues.apache.org/jira/browse/HADOOP-676
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.10.0
>
>         Attachments: Hadoop-676.patch
>
>
> The exceptions for non-existent input dirs or already existing output dirs should generate user-friendly error messages. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 20:39:45 2006
Return-Path: 
 <hadoop-dev-return-5775-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31670 invoked from network); 7 Dec 2006 20:39:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 20:39:45 -0000
Received: (qmail 91100 invoked by uid 500); 7 Dec 2006 20:39:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91079 invoked by uid 500); 7 Dec 2006 20:39:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91070 invoked by uid 99); 7 Dec 2006 20:39:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 12:39:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 12:39:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 164EC7142EC
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 12:39:23 -0800 (PST)
Message-ID: <11034118.1165523963088.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 12:39:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-639?page=all ]

Doug Cutting updated HADOOP-639:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Arun!

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-639_1.patch, HADOOP-639_2_20061130.patch, HADOOP-639_3_20061201.patch, HADOOP-639_4_20061205.patch, HADOOP-639_5_20061207.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 21:42:05 2006
Return-Path: 
 <hadoop-dev-return-5776-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46720 invoked from network); 7 Dec 2006 21:42:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 21:42:05 -0000
Received: (qmail 97239 invoked by uid 500); 7 Dec 2006 21:42:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97210 invoked by uid 500); 7 Dec 2006 21:42:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97201 invoked by uid 99); 7 Dec 2006 21:42:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 13:42:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 13:42:03 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 284F17142FC
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 13:41:42 -0800 (PST)
Message-ID: <33373655.1165527702161.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 13:41:42 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-796) Node failing tasks and failed tasks
 should be more easily accessible through jobtracker history.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Node failing tasks and failed tasks should be more easily accessible through jobtracker history. 
-------------------------------------------------------------------------------------------------

                 Key: HADOOP-796
                 URL: http://issues.apache.org/jira/browse/HADOOP-796
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: Sanjay Dahiya
            Priority: Minor


JobTracker history should provide quick access to nodes that failed tasks and the tasks that failed. Currently its not very easy to dig through details. 


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 21:42:14 2006
Return-Path: 
 <hadoop-dev-return-5777-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46880 invoked from network); 7 Dec 2006 21:42:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 21:42:14 -0000
Received: (qmail 98414 invoked by uid 500); 7 Dec 2006 21:42:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98392 invoked by uid 500); 7 Dec 2006 21:42:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98383 invoked by uid 99); 7 Dec 2006 21:42:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 13:42:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 13:42:13 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 87B097142FB
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 13:41:49 -0800 (PST)
Message-ID: <31112879.1165527709553.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 13:41:49 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-756) new dfsadmin command to wait until
 safe mode is exited
In-Reply-To: <26310722.1164743961235.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-756?page=all ]

Doug Cutting updated HADOOP-756:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba.


> new dfsadmin command to wait until safe mode is exited
> ------------------------------------------------------
>
>                 Key: HADOOP-756
>                 URL: http://issues.apache.org/jira/browse/HADOOP-756
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: dhruba borthakur
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: safemodewait2.patch
>
>
> I would like to have a dfsadmin command that waits until dfs leaves safemode. I want to be able to have my start up scripts wait until dfs is up before starting my jobtracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 21:42:18 2006
Return-Path: 
 <hadoop-dev-return-5778-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47013 invoked from network); 7 Dec 2006 21:42:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 21:42:18 -0000
Received: (qmail 98934 invoked by uid 500); 7 Dec 2006 21:42:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98895 invoked by uid 500); 7 Dec 2006 21:42:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98886 invoked by uid 99); 7 Dec 2006 21:42:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 13:42:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 13:42:17 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E101571430D
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 13:41:56 -0800 (PST)
Message-ID: <28869814.1165527716919.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 13:41:56 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-796) Node failing tasks and failed tasks
 should be more easily accessible through jobtracker history.
In-Reply-To: <33373655.1165527702161.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-796?page=all ]

Sanjay Dahiya reassigned HADOOP-796:
------------------------------------

    Assignee: Sanjay Dahiya

> Node failing tasks and failed tasks should be more easily accessible through jobtracker history.
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-796
>                 URL: http://issues.apache.org/jira/browse/HADOOP-796
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> JobTracker history should provide quick access to nodes that failed tasks and the tasks that failed. Currently its not very easy to dig through details. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 21:43:44 2006
Return-Path: 
 <hadoop-dev-return-5779-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47512 invoked from network); 7 Dec 2006 21:43:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 21:43:44 -0000
Received: (qmail 617 invoked by uid 500); 7 Dec 2006 21:43:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 395 invoked by uid 500); 7 Dec 2006 21:43:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 384 invoked by uid 99); 7 Dec 2006 21:43:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 13:43:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 13:43:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4F03F7142F5
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 13:43:22 -0800 (PST)
Message-ID: <29389560.1165527802321.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 13:43:22 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-796) Node failing tasks and failed tasks
 should be more easily accessible through jobtracker history.
In-Reply-To: <33373655.1165527702161.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-796?page=all ]

Sanjay Dahiya updated HADOOP-796:
---------------------------------

    Attachment: failedtasks.patch

This patch adds a snapshot of nodes that failed tasks and failed tasks on jobdetails page. 

> Node failing tasks and failed tasks should be more easily accessible through jobtracker history.
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-796
>                 URL: http://issues.apache.org/jira/browse/HADOOP-796
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: failedtasks.patch
>
>
> JobTracker history should provide quick access to nodes that failed tasks and the tasks that failed. Currently its not very easy to dig through details. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 21:43:45 2006
Return-Path: 
 <hadoop-dev-return-5780-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47547 invoked from network); 7 Dec 2006 21:43:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 21:43:45 -0000
Received: (qmail 660 invoked by uid 500); 7 Dec 2006 21:43:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 634 invoked by uid 500); 7 Dec 2006 21:43:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 550 invoked by uid 99); 7 Dec 2006 21:43:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 13:43:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 13:43:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 845D97142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 13:43:22 -0800 (PST)
Message-ID: <21258372.1165527802539.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 13:43:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-797) Streaming throws out a nullpointer
 exception if the mapper/reducer is not specified correctly.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Streaming throws out a nullpointer exception if the mapper/reducer is not specified correctly.
----------------------------------------------------------------------------------------------

                 Key: HADOOP-797
                 URL: http://issues.apache.org/jira/browse/HADOOP-797
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
            Reporter: Mahadev konar
         Assigned To: Mahadev konar
            Priority: Minor




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 21:47:48 2006
Return-Path: 
 <hadoop-dev-return-5781-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49658 invoked from network); 7 Dec 2006 21:47:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 21:47:48 -0000
Received: (qmail 12177 invoked by uid 500); 7 Dec 2006 21:47:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12140 invoked by uid 500); 7 Dec 2006 21:47:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12125 invoked by uid 99); 7 Dec 2006 21:47:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 13:47:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 13:47:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9D5137142F7
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 13:47:24 -0800 (PST)
Message-ID: <32295986.1165528044641.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 13:47:24 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-797) Streaming throws out a nullpointer
 exception if the mapper/reducer is not specified correctly.
In-Reply-To: <21258372.1165527802539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-797?page=comments#action_12456610 ] 
            
Sanjay Dahiya commented on HADOOP-797:
--------------------------------------

HADOOP-476 should prevent incorrect mapper/reducer values for being accepted. That said it would be a good idea to recheck for process before/after attempting to execute.  

> Streaming throws out a nullpointer exception if the mapper/reducer is not specified correctly.
> ----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-797
>                 URL: http://issues.apache.org/jira/browse/HADOOP-797
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 21:49:45 2006
Return-Path: 
 <hadoop-dev-return-5782-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50380 invoked from network); 7 Dec 2006 21:49:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 21:49:45 -0000
Received: (qmail 15077 invoked by uid 500); 7 Dec 2006 21:49:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15058 invoked by uid 500); 7 Dec 2006 21:49:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15049 invoked by uid 99); 7 Dec 2006 21:49:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 13:49:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 13:49:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 39B5C7142F5
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 13:49:22 -0800 (PST)
Message-ID: <10146397.1165528162233.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 13:49:22 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-796) Node failing tasks and failed tasks
 should be more easily accessible through jobtracker history.
In-Reply-To: <33373655.1165527702161.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-796?page=all ]

Sanjay Dahiya updated HADOOP-796:
---------------------------------

    Status: Patch Available  (was: Open)

> Node failing tasks and failed tasks should be more easily accessible through jobtracker history.
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-796
>                 URL: http://issues.apache.org/jira/browse/HADOOP-796
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: failedtasks.patch
>
>
> JobTracker history should provide quick access to nodes that failed tasks and the tasks that failed. Currently its not very easy to dig through details. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 22:50:11 2006
Return-Path: 
 <hadoop-dev-return-5783-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69187 invoked from network); 7 Dec 2006 22:50:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 22:50:11 -0000
Received: (qmail 21935 invoked by uid 500); 7 Dec 2006 22:50:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21909 invoked by uid 500); 7 Dec 2006 22:50:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21900 invoked by uid 99); 7 Dec 2006 22:50:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 14:50:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 14:49:54 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1111A714315
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 14:49:25 -0800 (PST)
Message-ID: <27859219.1165531765067.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 14:49:25 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-476) Streaming should check for
 correctness of the task
In-Reply-To: <20801208.1156462750189.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-476?page=comments#action_12456622 ] 
            
Yoram Arnon commented on HADOOP-476:
------------------------------------

does the patch address the case where the mapper or reducer are not shipped as part of the command?
arguments to -file should be verified locally, but arguments to -reducer and -mapper should be verified against the cluster nodes, unless listed under -file.


> Streaming should check for correctness of the task
> --------------------------------------------------
>
>                 Key: HADOOP-476
>                 URL: http://issues.apache.org/jira/browse/HADOOP-476
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-476.patch
>
>
> Currently, if anythin is wrong with streaming job, it dies without any explanation.
> Before creating and running actual MapReduce job, Streaming should check if:
> -- the executables (or scripts) for -mapper and -reducer are available and have right permissions
> -- the input fragments exist

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 22:57:44 2006
Return-Path: 
 <hadoop-dev-return-5784-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72076 invoked from network); 7 Dec 2006 22:57:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 22:57:44 -0000
Received: (qmail 37867 invoked by uid 500); 7 Dec 2006 22:57:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37843 invoked by uid 500); 7 Dec 2006 22:57:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37833 invoked by uid 99); 7 Dec 2006 22:57:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 14:57:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 14:57:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 68494714313
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 14:57:22 -0800 (PST)
Message-ID: <24012695.1165532242424.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 14:57:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-796) Node failing tasks and failed tasks
 should be more easily accessible through jobtracker history.
In-Reply-To: <33373655.1165527702161.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-796?page=comments#action_12456625 ] 
            
Hadoop QA commented on HADOOP-796:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346714/failedtasks.patch applied and successfully tested against trunk revision r483654

> Node failing tasks and failed tasks should be more easily accessible through jobtracker history.
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-796
>                 URL: http://issues.apache.org/jira/browse/HADOOP-796
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: failedtasks.patch
>
>
> JobTracker history should provide quick access to nodes that failed tasks and the tasks that failed. Currently its not very easy to dig through details. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 22:59:44 2006
Return-Path: 
 <hadoop-dev-return-5785-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72743 invoked from network); 7 Dec 2006 22:59:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 22:59:44 -0000
Received: (qmail 45501 invoked by uid 500); 7 Dec 2006 22:59:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45478 invoked by uid 500); 7 Dec 2006 22:59:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45468 invoked by uid 99); 7 Dec 2006 22:59:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 14:59:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 14:59:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 46210714313
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 14:59:22 -0800 (PST)
Message-ID: <15991368.1165532362284.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 14:59:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-764) The memory consumption of
 processReport() in the namenode can be reduced
In-Reply-To: <21824491.1164845001071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-764?page=comments#action_12456626 ] 
            
dhruba borthakur commented on HADOOP-764:
-----------------------------------------

I agree with your observation. This is another level of refinement that we could do as a follow-on to this patch. Does it sound ok?

> The memory consumption of processReport() in the namenode can be reduced
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-764
>                 URL: http://issues.apache.org/jira/browse/HADOOP-764
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: processBlockReport3.patch
>
>
> The FSNamesystem.processReport() method converts the blocklist for a datanode into an array by calling node.getBlocks(). Although this memory allocation is transient, it could possibly require the garbage-collector to work that much harder. 
> The method Block.getBlocks() should be deprecated. Code that currently uses this method should instead iterate over the Collection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 23:32:53 2006
Return-Path: 
 <hadoop-dev-return-5786-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84328 invoked from network); 7 Dec 2006 23:32:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 23:32:53 -0000
Received: (qmail 17101 invoked by uid 500); 7 Dec 2006 23:32:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17069 invoked by uid 500); 7 Dec 2006 23:32:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17035 invoked by uid 99); 7 Dec 2006 23:32:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 15:32:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 15:32:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 065367142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 15:32:21 -0800 (PST)
Message-ID: <10433885.1165534341023.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 15:32:21 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-798) Streaming use static methods to
 get/set jobconf parameters.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Streaming use static methods to get/set jobconf parameters.
-----------------------------------------------------------

                 Key: HADOOP-798
                 URL: http://issues.apache.org/jira/browse/HADOOP-798
             Project: Hadoop
          Issue Type: Improvement
          Components: contrib/streaming
            Reporter: Mahadev konar
         Assigned To: Mahadev konar
            Priority: Minor


Streaming uses a lot of jobconf.get/set() methods. It would nice to put all these methods into static methods in a class so that the raw jobconf.get()/set() methods are not spread around in the codebase.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 23:42:42 2006
Return-Path: 
 <hadoop-dev-return-5787-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86398 invoked from network); 7 Dec 2006 23:42:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 23:42:42 -0000
Received: (qmail 32076 invoked by uid 500); 7 Dec 2006 23:42:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32049 invoked by uid 500); 7 Dec 2006 23:42:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32040 invoked by uid 99); 7 Dec 2006 23:42:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 15:42:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 15:42:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 38FCF7142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 15:42:21 -0800 (PST)
Message-ID: <3615822.1165534941229.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 15:42:21 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-799) NullPointerException in FSDataset
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

NullPointerException in FSDataset
---------------------------------

                 Key: HADOOP-799
                 URL: http://issues.apache.org/jira/browse/HADOOP-799
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.9.1
            Reporter: Nigel Daley


Running the smallJobsBenchmark this morning, I got this NPE in one of the datanode logs:

2006-12-07 10:58:09,541 INFO org.apache.hadoop.dfs.DataNode: Deleting block blk_-4859335730964457601
2006-12-07 10:58:21,548 ERROR org.apache.hadoop.dfs.DataNode: Exception: java.lang.NullPointerException
        at org.apache.hadoop.dfs.FSDataset.invalidate(FSDataset.java:519)
        at org.apache.hadoop.dfs.DataNode.offerService(DataNode.java:386)
        at org.apache.hadoop.dfs.DataNode.run(DataNode.java:1007)
        at java.lang.Thread.run(Thread.java:595)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec  7 23:46:32 2006
Return-Path: 
 <hadoop-dev-return-5788-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86921 invoked from network); 7 Dec 2006 23:46:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 23:46:32 -0000
Received: (qmail 35897 invoked by uid 500); 7 Dec 2006 23:45:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35789 invoked by uid 500); 7 Dec 2006 23:45:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35709 invoked by uid 99); 7 Dec 2006 23:45:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 15:45:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C8CAD71430D
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 15:44:29 -0800 (PST)
Message-ID: <6365383.1165535069819.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 15:44:29 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-673) the task execution environment should
 have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-673?page=all ]

Mahadev konar updated HADOOP-673:
---------------------------------

    Attachment: cwd_1.patch

This patch uses java for deleteting the symlinks and have moved the creating of symliks to DistributedCache. The java code tries deleting a directory first which succeeds if its empty or a symlink and if it does not succeed it tries deleting the directory recursively. This works both on cygwin and linux.

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>         Attachments: cwd.patch, cwd_1.patch
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 00:03:06 2006
Return-Path: 
 <hadoop-dev-return-5789-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91268 invoked from network); 8 Dec 2006 00:03:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 00:03:06 -0000
Received: (qmail 54063 invoked by uid 500); 8 Dec 2006 00:03:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54036 invoked by uid 500); 8 Dec 2006 00:03:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54027 invoked by uid 99); 8 Dec 2006 00:03:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:03:13 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:03:02 -0800
Received: from [192.168.1.66] (snvvpn2-10-72-76-c88.corp.yahoo.com
 [10.72.76.88])
	by rsmtp1.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kB802boW019041
	for <hadoop-dev@lucene.apache.org>; Thu, 7 Dec 2006 16:02:37 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=OfBn+byzHTILXF5sXFNoscyhVOt8Ywd7O8aEOw4+4IBsvbWlaz3IVnlq9eZkOav/
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <B5E3490B-11F0-4A25-81C9-F8BD65B5F91A@yahoo-inc.com>
References: <13657050.1165506143445.JavaMail.jira@brutus>
 <f70576f16e0e032d473d059d506a03a9@yahoo-inc.com>
 <B5E3490B-11F0-4A25-81C9-F8BD65B5F91A@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <e07b65be1750e97492243e42965dcadd@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Updated: (HADOOP-476) Streaming should check for
 correctness of the task
Date: Thu, 7 Dec 2006 16:02:35 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org

I do not see how "chmod 0777 *" may be harmful, although I like the  
"never give more permissions than necessary"  rule.

-- ab

On Dec 7, 2006, at 12:05 PM, Sanjay Dahiya wrote:

> I have done chmod only for mapper/reducer/combiner for -file it just 
> checks for availability of file. Is it a good idea to make all files 
> in -file option executable?
>
> Sanjay
>
> On 08-Dec-06, at 1:23 AM, Arkady Borkovsky wrote:
>
>> chmod is fine.
>>
>> In some cases streaming job is a script that uses executables that 
>> are shipped using -file option.
>> The executables loose the x permissions and the script fails.  (I ran 
>> into this and it took me a while to undersatnd the reason of 
>> failure).
>>
>> This may be fixed or alleviated by
>> (a) adding an -executable option that is similar to -file but does   
>> "chmod a+x"
>> (b) at least describing this in user documentation, so that the user 
>> knows to do this on her own.
>>
>> Of course, (a) is preferable...
>>
>> -- ab
>>
>> On Dec 7, 2006, at 7:42 AM, Sanjay Dahiya (JIRA) wrote:
>>
>>>      [ http://issues.apache.org/jira/browse/HADOOP-476?page=all ]
>>>
>>> Sanjay Dahiya updated HADOOP-476:
>>> ---------------------------------
>>>
>>>     Attachment: Hadoop-476.patch
>>>
>>> This patch replaces commandline processing with apache CLI2.
>>> Input validation is not done as part of this patch as thats moved to 
>>> JobClient now. It validates -mapper, -reducer, -combiner, -file 
>>> attributes to be files present and accessible on disk.
>>> It doesn't validate a file to be an executable, that is not 
>>> available through java File API until Java 6. For now it runs "chmod 
>>> +x" on the file if its present and accessible.
>>> comments?
>>>
>>>
>>>> Streaming should check for correctness of the task
>>>> --------------------------------------------------
>>>>
>>>>                 Key: HADOOP-476
>>>>                 URL: http://issues.apache.org/jira/browse/HADOOP-476
>>>>             Project: Hadoop
>>>>          Issue Type: Bug
>>>>          Components: contrib/streaming
>>>>            Reporter: arkady borkovsky
>>>>         Assigned To: Sanjay Dahiya
>>>>         Attachments: Hadoop-476.patch
>>>>
>>>>
>>>> Currently, if anythin is wrong with streaming job, it dies without 
>>>> any explanation.
>>>> Before creating and running actual MapReduce job, Streaming should 
>>>> check if:
>>>> -- the executables (or scripts) for -mapper and -reducer are 
>>>> available and have right permissions
>>>> -- the input fragments exist
>>>
>>> -- 
>>> This message is automatically generated by JIRA.
>>> -
>>> If you think it was sent incorrectly contact one of the 
>>> administrators: 
>>> http://issues.apache.org/jira/secure/Administrators.jspa
>>> -
>>> For more information on JIRA, see: 
>>> http://www.atlassian.com/software/jira
>>>
>>>
>>
>


From MAILER-DAEMON Fri Dec  8 00:17:43 2006
Return-Path: 
 <hadoop-dev-return-5790-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 872 invoked from network); 8 Dec 2006 00:17:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 00:17:43 -0000
Received: (qmail 90623 invoked by uid 500); 8 Dec 2006 00:17:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90597 invoked by uid 500); 8 Dec 2006 00:17:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90586 invoked by uid 99); 8 Dec 2006 00:17:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:17:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:17:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0D4167142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 16:17:21 -0800 (PST)
Message-ID: <11587976.1165537041051.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 16:17:21 -0800 (PST)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-800) More improvements to DFS browsing WI
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

More improvements to DFS browsing WI
------------------------------------

                 Key: HADOOP-800
                 URL: http://issues.apache.org/jira/browse/HADOOP-800
             Project: Hadoop
          Issue Type: Improvement
            Reporter: arkady borkovsky



(a) the TITLE of web pages is
     HDFS: <directory name>
or
     HDFS: <file_name>
for directories and files, correspondingly.
trimmed from the right, if too long.
(This helps finding browser windows, tabs, navigating history, and creating bookmarks)

(b) instead of or in addition to "go to parent directory" link, each element of the path displayed at the top of the page should  link to the corresponding directory.  
This also saves a line in display.

(c) the file browsing page should not automatically refresh.

(d) it would be nice to use the whole window rather than the text box for viewing.
Wrapping is often harmful.  
(These may be a radio-button options option saved in a cookie)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 00:38:43 2006
Return-Path: 
 <hadoop-dev-return-5792-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4737 invoked from network); 8 Dec 2006 00:38:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 00:38:43 -0000
Received: (qmail 15946 invoked by uid 500); 8 Dec 2006 00:38:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15896 invoked by uid 500); 8 Dec 2006 00:38:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15882 invoked by uid 99); 8 Dec 2006 00:38:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:38:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:38:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4F8DF7142FC
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 16:38:21 -0800 (PST)
Message-ID: <15704505.1165538301323.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 16:38:21 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-802) mapred.speculative.execution
 description in hadoop-defauls.xml is not complete
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

mapred.speculative.execution description in hadoop-defauls.xml is not complete
------------------------------------------------------------------------------

                 Key: HADOOP-802
                 URL: http://issues.apache.org/jira/browse/HADOOP-802
             Project: Hadoop
          Issue Type: Bug
          Components: conf
    Affects Versions: 0.9.1
            Reporter: Nigel Daley
         Assigned To: Nigel Daley
            Priority: Trivial


<property>
  <name>mapred.speculative.execution</name>
  <value>true</value>
  <description>If true, then multiple instances of some map tasks may
  be executed in parallel.</description>
</property>

This property also controls speculative execution of reduces, however the description field doesn't indicate that.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 00:38:43 2006
Return-Path: 
 <hadoop-dev-return-5791-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4731 invoked from network); 8 Dec 2006 00:38:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 00:38:43 -0000
Received: (qmail 15940 invoked by uid 500); 8 Dec 2006 00:38:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15890 invoked by uid 500); 8 Dec 2006 00:38:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15875 invoked by uid 99); 8 Dec 2006 00:38:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:38:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:38:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2B8EE7142FA
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 16:38:21 -0800 (PST)
Message-ID: <7558808.1165538301175.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 16:38:21 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-801) job tracker should keep a log of task
 completion and failure
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

job tracker should keep a log of task completion and failure
------------------------------------------------------------

                 Key: HADOOP-801
                 URL: http://issues.apache.org/jira/browse/HADOOP-801
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.9.1
            Reporter: Owen O'Malley
         Assigned To: Sanjay Dahiya
             Fix For: 0.10.0


The JobTracker should track a list of task completion events in JobInProgress.

So JobClientProtocol & InterTrackerProtocol should get a new method:

  TaskCompletionEvent[] getTaskCompletionEvents(String jobid, int fromEventId) throws IOException;

TaskCompletionEvent should have:
  int getEventId();
  String getTaskTrackerHttp();
  String getTaskId();
  static public enum Status {FAILED, SUCCEEDED};
  Status getTaskStatus();
}

The events will be stored in a List<TaskCompletionEvent> and the eventId is the position in the list.

These event logs will allow JobClient to display task output to the user as well as provide the start of the fix for HADOOP-248.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 00:38:45 2006
Return-Path: 
 <hadoop-dev-return-5793-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4784 invoked from network); 8 Dec 2006 00:38:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 00:38:45 -0000
Received: (qmail 16549 invoked by uid 500); 8 Dec 2006 00:38:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16400 invoked by uid 500); 8 Dec 2006 00:38:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16391 invoked by uid 99); 8 Dec 2006 00:38:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:38:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:38:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B69D97142FB
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 16:38:22 -0800 (PST)
Message-ID: <11180679.1165538302745.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 16:38:22 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-764) The memory consumption of
 processReport() in the namenode can be reduced
In-Reply-To: <21824491.1164845001071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-764?page=comments#action_12456652 ] 
            
Raghu Angadi commented on HADOOP-764:
-------------------------------------


Yes, I was going to comment saying the patch should be applied.


> The memory consumption of processReport() in the namenode can be reduced
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-764
>                 URL: http://issues.apache.org/jira/browse/HADOOP-764
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: processBlockReport3.patch
>
>
> The FSNamesystem.processReport() method converts the blocklist for a datanode into an array by calling node.getBlocks(). Although this memory allocation is transient, it could possibly require the garbage-collector to work that much harder. 
> The method Block.getBlocks() should be deprecated. Code that currently uses this method should instead iterate over the Collection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 00:41:49 2006
Return-Path: 
 <hadoop-dev-return-5794-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5080 invoked from network); 8 Dec 2006 00:41:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 00:41:49 -0000
Received: (qmail 18793 invoked by uid 500); 8 Dec 2006 00:41:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18561 invoked by uid 500); 8 Dec 2006 00:41:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18536 invoked by uid 99); 8 Dec 2006 00:41:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:41:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:41:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6CEAC7142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 16:41:22 -0800 (PST)
Message-ID: <18942793.1165538482443.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 16:41:22 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-802) mapred.speculative.execution
 description in hadoop-defauls.xml is not complete
In-Reply-To: <15704505.1165538301323.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-802?page=all ]

Nigel Daley updated HADOOP-802:
-------------------------------

    Attachment: HADOOP-802.patch

> mapred.speculative.execution description in hadoop-defauls.xml is not complete
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-802
>                 URL: http://issues.apache.org/jira/browse/HADOOP-802
>             Project: Hadoop
>          Issue Type: Bug
>          Components: conf
>    Affects Versions: 0.9.1
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Trivial
>         Attachments: HADOOP-802.patch
>
>
> <property>
>   <name>mapred.speculative.execution</name>
>   <value>true</value>
>   <description>If true, then multiple instances of some map tasks may
>   be executed in parallel.</description>
> </property>
> This property also controls speculative execution of reduces, however the description field doesn't indicate that.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 00:41:50 2006
Return-Path: 
 <hadoop-dev-return-5795-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5094 invoked from network); 8 Dec 2006 00:41:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 00:41:50 -0000
Received: (qmail 18809 invoked by uid 500); 8 Dec 2006 00:41:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18650 invoked by uid 500); 8 Dec 2006 00:41:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18542 invoked by uid 99); 8 Dec 2006 00:41:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:41:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:41:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C86617142F7
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 16:41:23 -0800 (PST)
Message-ID: <8747912.1165538483817.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 16:41:23 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-802) mapred.speculative.execution
 description in hadoop-defauls.xml is not complete
In-Reply-To: <15704505.1165538301323.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-802?page=all ]

Nigel Daley updated HADOOP-802:
-------------------------------

    Status: Patch Available  (was: Open)

fixed description

> mapred.speculative.execution description in hadoop-defauls.xml is not complete
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-802
>                 URL: http://issues.apache.org/jira/browse/HADOOP-802
>             Project: Hadoop
>          Issue Type: Bug
>          Components: conf
>    Affects Versions: 0.9.1
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Trivial
>         Attachments: HADOOP-802.patch
>
>
> <property>
>   <name>mapred.speculative.execution</name>
>   <value>true</value>
>   <description>If true, then multiple instances of some map tasks may
>   be executed in parallel.</description>
> </property>
> This property also controls speculative execution of reduces, however the description field doesn't indicate that.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 00:45:42 2006
Return-Path: 
 <hadoop-dev-return-5796-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5627 invoked from network); 8 Dec 2006 00:45:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 00:45:42 -0000
Received: (qmail 24063 invoked by uid 500); 8 Dec 2006 00:45:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24035 invoked by uid 500); 8 Dec 2006 00:45:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24026 invoked by uid 99); 8 Dec 2006 00:45:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:45:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:45:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0C4987142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 16:45:21 -0800 (PST)
Message-ID: <20960270.1165538721047.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 16:45:21 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Reducing memory consumption on Namenode : Part 1
------------------------------------------------

                 Key: HADOOP-803
                 URL: http://issues.apache.org/jira/browse/HADOOP-803
             Project: Hadoop
          Issue Type: Bug
            Reporter: Raghu Angadi
         Assigned To: Raghu Angadi



There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 

One change I am planning to make : 

Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 00:56:43 2006
Return-Path: 
 <hadoop-dev-return-5797-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8738 invoked from network); 8 Dec 2006 00:56:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 00:56:43 -0000
Received: (qmail 42370 invoked by uid 500); 8 Dec 2006 00:56:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42344 invoked by uid 500); 8 Dec 2006 00:56:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42335 invoked by uid 99); 8 Dec 2006 00:56:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:56:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:56:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 49A337142FA
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 16:56:21 -0800 (PST)
Message-ID: <5020745.1165539381298.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 16:56:21 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-804) Cut down on the "mumbling" in the Task
 process' stdout/stderr
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Cut down on the "mumbling" in the Task process' stdout/stderr
-------------------------------------------------------------

                 Key: HADOOP-804
                 URL: http://issues.apache.org/jira/browse/HADOOP-804
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: Owen O'Malley
         Assigned To: Sanjay Dahiya
             Fix For: 0.10.0


Currently there is a lot of useless mumbling that Tasks do when running that needs to be removed. For example, here is a list of the output from a map:

06/12/07 16:45:48 INFO mapred.TaskTracker: Child starting
06/12/07 16:45:48 INFO conf.Configuration: parsing jar:file:/local/owen/hadoop-0.8.1-dev/hadoop-0.8.1-dev.jar!/hadoop-default.xml
06/12/07 16:45:48 INFO conf.Configuration: parsing file:/local/owen/conf/mapred-default.xml
06/12/07 16:45:48 INFO ipc.Client: org.apache.hadoop.io.ObjectWritableConnection culler maxidletime= 1000ms
06/12/07 16:45:48 INFO ipc.Client: org.apache.hadoop.io.ObjectWritable Connection Culler: starting
06/12/07 16:45:48 INFO conf.Configuration: parsing jar:file:/local/owen/hadoop-0.8.1-dev/hadoop-0.8.1-dev.jar!/hadoop-default.xml
06/12/07 16:45:48 INFO conf.Configuration: parsing file:/local/owen/conf/mapred-default.xml
06/12/07 16:45:48 INFO conf.Configuration: parsing /local/owen/run/tasktracker/taskTracker/jobcache/job_0002/task_0002_m_000000_0/job.xml
06/12/07 16:45:49 INFO conf.Configuration: parsing jar:file:/local/owen/hadoop-0.8.1-dev/hadoop-0.8.1-dev.jar!/hadoop-default.xml
06/12/07 16:45:49 INFO conf.Configuration: parsing file:/local/owen/conf/mapred-default.xml
06/12/07 16:45:49 INFO mapred.MapTask: opened part-0.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-1.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-2.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-3.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-4.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-5.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-6.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-7.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-8.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-9.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-10.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-11.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-12.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-13.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-14.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-15.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-16.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-17.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-18.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-19.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-20.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-21.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-22.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-23.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-24.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-25.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-26.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-27.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-28.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-29.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-30.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-31.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-32.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-33.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-34.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-35.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-36.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-37.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-38.out
06/12/07 16:45:49 INFO mapred.MapTask: opened part-39.out

Furthermore, it seems like the default logging level for Task subprocesses should be set to WARN.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 00:58:45 2006
Return-Path: 
 <hadoop-dev-return-5798-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9008 invoked from network); 8 Dec 2006 00:58:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 00:58:45 -0000
Received: (qmail 46348 invoked by uid 500); 8 Dec 2006 00:58:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46109 invoked by uid 500); 8 Dec 2006 00:58:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46100 invoked by uid 99); 8 Dec 2006 00:58:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:58:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 16:58:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 93DA37142F7
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 16:58:22 -0800 (PST)
Message-ID: <30491972.1165539502603.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 16:58:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-802) mapred.speculative.execution
 description in hadoop-defauls.xml is not complete
In-Reply-To: <15704505.1165538301323.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-802?page=comments#action_12456658 ] 
            
Hadoop QA commented on HADOOP-802:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346720/HADOOP-802.patch applied and successfully tested against trunk revision r483654

> mapred.speculative.execution description in hadoop-defauls.xml is not complete
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-802
>                 URL: http://issues.apache.org/jira/browse/HADOOP-802
>             Project: Hadoop
>          Issue Type: Bug
>          Components: conf
>    Affects Versions: 0.9.1
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Trivial
>         Attachments: HADOOP-802.patch
>
>
> <property>
>   <name>mapred.speculative.execution</name>
>   <value>true</value>
>   <description>If true, then multiple instances of some map tasks may
>   be executed in parallel.</description>
> </property>
> This property also controls speculative execution of reduces, however the description field doesn't indicate that.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 01:10:56 2006
Return-Path: 
 <hadoop-dev-return-5799-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10828 invoked from network); 8 Dec 2006 01:10:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 01:10:56 -0000
Received: (qmail 58791 invoked by uid 500); 8 Dec 2006 01:10:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58748 invoked by uid 500); 8 Dec 2006 01:10:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58732 invoked by uid 99); 8 Dec 2006 01:10:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 17:10:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2B62E7142FA
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 17:09:21 -0800 (PST)
Message-ID: <26101950.1165540161174.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 17:09:21 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-805) JobClient should print the Task's
 stdout and stderr to the clients console
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

JobClient should print the Task's stdout and stderr to the clients console
--------------------------------------------------------------------------

                 Key: HADOOP-805
                 URL: http://issues.apache.org/jira/browse/HADOOP-805
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.9.1
            Reporter: Owen O'Malley
         Assigned To: Sanjay Dahiya
             Fix For: 0.10.0


The job client should be configurable to print stdout/stderr for Tasks to the user's console.

JobClient:

public static enum TaskStatusFilter { NONE, FAILED, SUCCEEDED};

public void setTaskOutputFilter(TaskStatusFilter newValue);
public TaskStatusFilter getTaskOutputFilter();



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 01:26:45 2006
Return-Path: 
 <hadoop-dev-return-5800-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15275 invoked from network); 8 Dec 2006 01:26:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 01:26:45 -0000
Received: (qmail 88120 invoked by uid 500); 8 Dec 2006 01:26:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87893 invoked by uid 500); 8 Dec 2006 01:26:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87884 invoked by uid 99); 8 Dec 2006 01:26:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 17:26:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 17:26:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 980447142F7
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 17:26:23 -0800 (PST)
Message-ID: <11828787.1165541183620.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 17:26:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Doug Cutting updated HADOOP-619:
--------------------------------

    Status: Open  (was: Patch Available)

I can't get this patch to apply to trunk anymore.  It seems to conflict with other patches that were recently comitted.  Sorry!  Can you please re-generate it against the current trunk?  Thanks!

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 01:31:04 2006
Return-Path: 
 <hadoop-dev-return-5801-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16063 invoked from network); 8 Dec 2006 01:31:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 01:31:04 -0000
Received: (qmail 94430 invoked by uid 500); 8 Dec 2006 01:30:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94191 invoked by uid 500); 8 Dec 2006 01:30:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94131 invoked by uid 99); 8 Dec 2006 01:30:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 17:30:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 17:30:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EF3B17142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 17:30:22 -0800 (PST)
Message-ID: <24492529.1165541422976.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 17:30:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-770) When JobTracker gets restarted, Job
 Tracker History doesn't show the jobs that were running. (incomplete jobs)
In-Reply-To: <16531717.1164921201066.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-770?page=all ]

Doug Cutting updated HADOOP-770:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Sanjay!

> When JobTracker gets restarted, Job Tracker History doesn't show the jobs that were running. (incomplete jobs)
> --------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-770
>                 URL: http://issues.apache.org/jira/browse/HADOOP-770
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Koji Noguchi
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: Hadoop-770.patch
>
>
> When JobTracker fail or get killed manually,  last running jobs won't show up in the Job Track History.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 01:59:47 2006
Return-Path: 
 <hadoop-dev-return-5802-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22011 invoked from network); 8 Dec 2006 01:59:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 01:59:47 -0000
Received: (qmail 40591 invoked by uid 500); 8 Dec 2006 01:59:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40574 invoked by uid 500); 8 Dec 2006 01:59:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40562 invoked by uid 99); 8 Dec 2006 01:59:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 17:59:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 17:59:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0EB2E7142F7
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 17:59:26 -0800 (PST)
Message-ID: <25453884.1165543166057.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 17:59:26 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-331?page=all ]

Doug Cutting updated HADOOP-331:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this, although I had to increase the heap size used for unit tests or else TestDFSIO would get an out-of-memory error.  It's now 128MB.

Thanks, Devaraj!

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>             Fix For: 0.10.0
>
>         Attachments: 331-design.txt, 331-initial3.patch, 331.patch, 331.txt
>
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 02:13:42 2006
Return-Path: 
 <hadoop-dev-return-5803-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23983 invoked from network); 8 Dec 2006 02:13:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 02:13:42 -0000
Received: (qmail 54378 invoked by uid 500); 8 Dec 2006 02:13:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54357 invoked by uid 500); 8 Dec 2006 02:13:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54348 invoked by uid 99); 8 Dec 2006 02:13:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 18:13:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 18:13:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 03B007142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 18:13:21 -0800 (PST)
Message-ID: <21979064.1165544001012.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 18:13:21 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-806) NameNode WebUI : Include link to each
 of datanodes
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

NameNode WebUI : Include link to each of datanodes
--------------------------------------------------

                 Key: HADOOP-806
                 URL: http://issues.apache.org/jira/browse/HADOOP-806
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Raghu Angadi
         Assigned To: Raghu Angadi
            Priority: Minor
             Fix For: 0.10.0


Minor improvement to Namenode webui.

Datanode in node table on webui should be a link to datanode's frontpage. Note that "Browse the filesystem" link pics a datanode randomly.



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 02:15:43 2006
Return-Path: 
 <hadoop-dev-return-5804-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24304 invoked from network); 8 Dec 2006 02:15:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 02:15:43 -0000
Received: (qmail 57311 invoked by uid 500); 8 Dec 2006 02:15:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57292 invoked by uid 500); 8 Dec 2006 02:15:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57283 invoked by uid 99); 8 Dec 2006 02:15:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 18:15:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 18:15:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3E9777142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 18:15:22 -0800 (PST)
Message-ID: <26486138.1165544122253.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 18:15:22 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-806) NameNode WebUI : Include link to each
 of datanodes
In-Reply-To: <21979064.1165544001012.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-806?page=all ]

Raghu Angadi updated HADOOP-806:
--------------------------------

    Attachment: dfshealth-806.patch


This patch includes link to each datanode and a few related changes to hadoop.css.


> NameNode WebUI : Include link to each of datanodes
> --------------------------------------------------
>
>                 Key: HADOOP-806
>                 URL: http://issues.apache.org/jira/browse/HADOOP-806
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: dfshealth-806.patch
>
>
> Minor improvement to Namenode webui.
> Datanode in node table on webui should be a link to datanode's frontpage. Note that "Browse the filesystem" link pics a datanode randomly.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 02:15:45 2006
Return-Path: 
 <hadoop-dev-return-5805-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24340 invoked from network); 8 Dec 2006 02:15:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 02:15:45 -0000
Received: (qmail 57585 invoked by uid 500); 8 Dec 2006 02:15:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57553 invoked by uid 500); 8 Dec 2006 02:15:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57543 invoked by uid 99); 8 Dec 2006 02:15:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 18:15:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 18:15:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 943837142F7
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 18:15:23 -0800 (PST)
Message-ID: <31505596.1165544123604.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 18:15:23 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-806) NameNode WebUI : Include link to each
 of datanodes
In-Reply-To: <21979064.1165544001012.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-806?page=all ]

Raghu Angadi updated HADOOP-806:
--------------------------------

    Status: Patch Available  (was: Open)

> NameNode WebUI : Include link to each of datanodes
> --------------------------------------------------
>
>                 Key: HADOOP-806
>                 URL: http://issues.apache.org/jira/browse/HADOOP-806
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: dfshealth-806.patch
>
>
> Minor improvement to Namenode webui.
> Datanode in node table on webui should be a link to datanode's frontpage. Note that "Browse the filesystem" link pics a datanode randomly.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 02:28:33 2006
Return-Path: 
 <hadoop-dev-return-5806-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32654 invoked from network); 8 Dec 2006 02:28:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 02:28:33 -0000
Received: (qmail 79503 invoked by uid 500); 8 Dec 2006 02:28:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79461 invoked by uid 500); 8 Dec 2006 02:28:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79442 invoked by uid 99); 8 Dec 2006 02:28:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 18:28:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 18:27:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6D06F7142FB
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 18:27:26 -0800 (PST)
Message-ID: <15161737.1165544846443.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 18:27:26 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-432) support undelete, snapshots, or other
 mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-432?page=all ]

Wendy Chien updated HADOOP-432:
-------------------------------

    Attachment: undelete16.patch

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 02:28:33 2006
Return-Path: 
 <hadoop-dev-return-5807-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32663 invoked from network); 8 Dec 2006 02:28:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 02:28:33 -0000
Received: (qmail 79525 invoked by uid 500); 8 Dec 2006 02:28:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79474 invoked by uid 500); 8 Dec 2006 02:28:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79450 invoked by uid 99); 8 Dec 2006 02:28:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 18:28:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 18:28:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7B0407142FD
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 18:27:28 -0800 (PST)
Message-ID: <27573644.1165544848501.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 18:27:28 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-432) support undelete, snapshots, or other
 mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-432?page=all ]

Wendy Chien updated HADOOP-432:
-------------------------------

    Attachment:     (was: undelete.patch)

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 02:28:35 2006
Return-Path: 
 <hadoop-dev-return-5808-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32710 invoked from network); 8 Dec 2006 02:28:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 02:28:35 -0000
Received: (qmail 80031 invoked by uid 500); 8 Dec 2006 02:28:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80006 invoked by uid 500); 8 Dec 2006 02:28:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79997 invoked by uid 99); 8 Dec 2006 02:28:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 18:28:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 18:28:04 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C2AEF7142FC
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 18:27:30 -0800 (PST)
Message-ID: <17546724.1165544850795.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 18:27:30 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-432) support undelete, snapshots, or other
 mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-432?page=all ]

Wendy Chien updated HADOOP-432:
-------------------------------

    Attachment:     (was: undelete11.patch)

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 02:51:46 2006
Return-Path: 
 <hadoop-dev-return-5809-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38362 invoked from network); 8 Dec 2006 02:51:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 02:51:46 -0000
Received: (qmail 5060 invoked by uid 500); 8 Dec 2006 02:51:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4827 invoked by uid 500); 8 Dec 2006 02:51:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4808 invoked by uid 99); 8 Dec 2006 02:51:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 18:51:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 18:51:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4A7AD7142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 18:51:22 -0800 (PST)
Message-ID: <24247085.1165546282302.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 18:51:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-806) NameNode WebUI : Include link to
 each of datanodes
In-Reply-To: <21979064.1165544001012.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-806?page=comments#action_12456674 ] 
            
Hadoop QA commented on HADOOP-806:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346724/dfshealth-806.patch applied and successfully tested against trunk revision r483772

> NameNode WebUI : Include link to each of datanodes
> --------------------------------------------------
>
>                 Key: HADOOP-806
>                 URL: http://issues.apache.org/jira/browse/HADOOP-806
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: dfshealth-806.patch
>
>
> Minor improvement to Namenode webui.
> Datanode in node table on webui should be a link to datanode's frontpage. Note that "Browse the filesystem" link pics a datanode randomly.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 04:49:08 2006
Return-Path: 
 <hadoop-dev-return-5810-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55740 invoked from network); 8 Dec 2006 04:49:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 04:49:08 -0000
Received: (qmail 3400 invoked by uid 500); 8 Dec 2006 04:49:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3344 invoked by uid 500); 8 Dec 2006 04:49:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3326 invoked by uid 99); 8 Dec 2006 04:49:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 20:49:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 20:48:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 734677142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 20:48:22 -0800 (PST)
Message-ID: <4367154.1165553302469.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 20:48:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-367) Static blocks do not automatically
 run when a class is loaded in Java 5.0
In-Reply-To: <22771983.1153174453937.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-367?page=all ]

Owen O'Malley resolved HADOOP-367.
----------------------------------

    Resolution: Duplicate

This has been fixed across several patches by using the new ReflectionUtils.newInstance in all contexts. We currently require java 5.0, so clearly this bug isn't present anymore.

> Static blocks do not automatically run when a class is loaded in Java 5.0
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-367
>                 URL: http://issues.apache.org/jira/browse/HADOOP-367
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>         Environment: Java 5.0
>            Reporter: Benjamin Reed
>         Attachments: f.patch, reflection.patch
>
>
> There seems to be a change that happened between 1.4 and 1.5 with respect to static initializers. I can't find this documented, but I can reproduce with a very simple program. Basically, a static initializer is not called unless a static member/method of the class is accessed or an instance is created. This is actually what the JLS says, but until 1.5 the static initializers ran when the class was loaded. Note that this behavior only occurs when running with the 1.5 JRE AND compiling for 1.5.
> For many Writables this isn't an issue, so the fallback behavior of the WritableFactory works, but Block is package private, so loadEdits fails when called from org.apache.hadoop.io.ArrayWritable.readFields() yielding the following trace:
> Caused by: java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSEdits(FSDirectory.java:532)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:470)
>         at org.apache.hadoop.dfs.FSDirectory.<init>(FSDirectory.java:307)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:177)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:91)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:84)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:491)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 05:10:44 2006
Return-Path: 
 <hadoop-dev-return-5811-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58775 invoked from network); 8 Dec 2006 05:10:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 05:10:44 -0000
Received: (qmail 20761 invoked by uid 500); 8 Dec 2006 05:10:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20742 invoked by uid 500); 8 Dec 2006 05:10:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20728 invoked by uid 99); 8 Dec 2006 05:10:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 21:10:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 21:10:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0F8D87142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 21:10:23 -0800 (PST)
Message-ID: <5611322.1165554623061.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 21:10:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-751) Namenode constantly using up 100%
 CPU
In-Reply-To: <6752273.1164673941058.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-751?page=comments#action_12456697 ] 
            
dhruba borthakur commented on HADOOP-751:
-----------------------------------------

For the records, the namenode been stable after applying Raghu's directio-memory leak fix.  

> Namenode constantly using up 100% CPU
> -------------------------------------
>
>                 Key: HADOOP-751
>                 URL: http://issues.apache.org/jira/browse/HADOOP-751
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Koji Noguchi
>
> Trying to figure out the exact cause, but CPU load of the namenode is constantly 100% without any file exchanges.
> .log file of the namenode showing the following exception about every 20 seconds.
> 2006-11-27 16:02:07,199 INFO org.apache.hadoop.ipc.Server: IPC Server handler 5 on 8020 call error: java.io.IOException: java.util.NoSuchElementException
> java.io.IOException: java.util.NoSuchElementException
>   at java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1029)
>   at java.util.TreeMap$KeyIterator.next(TreeMap.java:1058)
>   at java.util.AbstractCollection.toArray(AbstractCollection.java:176)
>   at org.apache.hadoop.dfs.DatanodeDescriptor.getBlocks(DatanodeDescriptor.java:96)
>   at org.apache.hadoop.dfs.FSNamesystem.processReport(FSNamesystem.java:1446)
>   at org.apache.hadoop.dfs.NameNode.blockReport(NameNode.java:506)
>   at sun.reflect.GeneratedMethodAccessor11.invoke(Unknown Source)
>   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>   at java.lang.reflect.Method.invoke(Method.java:585)
>   at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:387)
>   at org.apache.hadoop.ipc.Server$Handler.run(Server.java:518)
> On some of the datanodes, .log file is showing
> 2006-11-27 16:03:57,542 WARN org.apache.hadoop.dfs.DataNode: org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.util.NoSuchElementException
>   at java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1029)
>   at java.util.TreeMap$KeyIterator.next(TreeMap.java:1058)
>   at java.util.AbstractCollection.toArray(AbstractCollection.java:176)
>   at org.apache.hadoop.dfs.DatanodeDescriptor.getBlocks(DatanodeDescriptor.java:96)
>   at org.apache.hadoop.dfs.FSNamesystem.processReport(FSNamesystem.java:1446)
>   at org.apache.hadoop.dfs.NameNode.blockReport(NameNode.java:506)
>   at sun.reflect.GeneratedMethodAccessor11.invoke(Unknown Source)
>   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>   at java.lang.reflect.Method.invoke(Method.java:585)
>   at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:387)
>   at org.apache.hadoop.ipc.Server$Handler.run(Server.java:518)
>   at org.apache.hadoop.ipc.Client$Connection.run(Client.java:248)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 05:25:00 2006
Return-Path: 
 <hadoop-dev-return-5812-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61504 invoked from network); 8 Dec 2006 05:25:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 05:25:00 -0000
Received: (qmail 41314 invoked by uid 500); 8 Dec 2006 05:25:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41247 invoked by uid 500); 8 Dec 2006 05:25:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41208 invoked by uid 99); 8 Dec 2006 05:25:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 21:25:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 21:24:22 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 266697142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 21:23:21 -0800 (PST)
Message-ID: <7963167.1165555401153.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 21:23:21 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-807) splitting DFS version number
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

splitting DFS version number
----------------------------

                 Key: HADOOP-807
                 URL: http://issues.apache.org/jira/browse/HADOOP-807
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: dhruba borthakur
         Assigned To: dhruba borthakur


In the current code, there is a enum named DFS_CURRENT_VERSION. It is being used for three different purposes:

1. It is stored in the fsimage and represents the format of the fsimage.
2. It is stored in the "storage" file by the Datanodes. Thus, it represents the format of data on Datanodes.
3. It is used as a version of the Datanode Protocol.

The current implementation makes it difficult to change the fsimage format without affecting the Datanode Protocol. My proposal is to introduce three new constants, one for each of the functionality described above.

In the current code, we have:
    public static final int DFS_CURRENT_VERSION = -3;

Instead, we can have:
    public static final int DFS_FSIMAGE_CURRENT_VERSION = -3;
    public static final int DFS_DATANODEPROTOCOL_CURRENT_VERSION = -3;
    public static final int DFS_DATASTORAGE_CURRENT_VERSION = -3;

The first one is associated with the format of the fsimage/edits; the second one is associated with the communication procotol between the namenode and the datanode; the third one is associated with the format of the datastore on the datanodes (e.g. directory fanout).

Please comment.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 05:29:43 2006
Return-Path: 
 <hadoop-dev-return-5813-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62287 invoked from network); 8 Dec 2006 05:29:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 05:29:43 -0000
Received: (qmail 49492 invoked by uid 500); 8 Dec 2006 05:29:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49267 invoked by uid 500); 8 Dec 2006 05:29:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49258 invoked by uid 99); 8 Dec 2006 05:29:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 21:29:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 21:29:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 55DFA7142F9
	for <hadoop-dev@lucene.apache.org>; Thu,  7 Dec 2006 21:29:22 -0800 (PST)
Message-ID: <5164953.1165555762349.JavaMail.jira@brutus>
Date: Thu, 7 Dec 2006 21:29:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-807) splitting DFS version number
In-Reply-To: <7963167.1165555401153.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-807?page=comments#action_12456699 ] 
            
dhruba borthakur commented on HADOOP-807:
-----------------------------------------

Actually, a clarification about the comment above. The DFS_CURRENT_VERSION is used by the datanode to register itself with the namenode (this is seperate from the Datanode Protocol version).  This means that if we change the format of the fsimage and install a new namenode on the cluster, it cannot talk with older datanodes.  Maybe this is acceptable for now.


> splitting DFS version number
> ----------------------------
>
>                 Key: HADOOP-807
>                 URL: http://issues.apache.org/jira/browse/HADOOP-807
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> In the current code, there is a enum named DFS_CURRENT_VERSION. It is being used for three different purposes:
> 1. It is stored in the fsimage and represents the format of the fsimage.
> 2. It is stored in the "storage" file by the Datanodes. Thus, it represents the format of data on Datanodes.
> 3. It is used as a version of the Datanode Protocol.
> The current implementation makes it difficult to change the fsimage format without affecting the Datanode Protocol. My proposal is to introduce three new constants, one for each of the functionality described above.
> In the current code, we have:
>     public static final int DFS_CURRENT_VERSION = -3;
> Instead, we can have:
>     public static final int DFS_FSIMAGE_CURRENT_VERSION = -3;
>     public static final int DFS_DATANODEPROTOCOL_CURRENT_VERSION = -3;
>     public static final int DFS_DATASTORAGE_CURRENT_VERSION = -3;
> The first one is associated with the format of the fsimage/edits; the second one is associated with the communication procotol between the namenode and the datanode; the third one is associated with the format of the datastore on the datanodes (e.g. directory fanout).
> Please comment.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 09:38:45 2006
Return-Path: 
 <hadoop-dev-return-5814-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20804 invoked from network); 8 Dec 2006 09:38:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 09:38:45 -0000
Received: (qmail 87186 invoked by uid 500); 8 Dec 2006 09:38:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87151 invoked by uid 500); 8 Dec 2006 09:38:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87142 invoked by uid 99); 8 Dec 2006 09:38:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 01:38:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 01:38:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C83E67142FA
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 01:38:23 -0800 (PST)
Message-ID: <30198045.1165570703817.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 01:38:23 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment: Hadoop-619.patch

Updated patch with current trunk. 

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 09:46:44 2006
Return-Path: 
 <hadoop-dev-return-5815-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23882 invoked from network); 8 Dec 2006 09:46:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 09:46:44 -0000
Received: (qmail 2020 invoked by uid 500); 8 Dec 2006 09:46:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1784 invoked by uid 500); 8 Dec 2006 09:46:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1770 invoked by uid 99); 8 Dec 2006 09:46:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 01:46:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 01:46:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 376357142FC
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 01:46:23 -0800 (PST)
Message-ID: <10098761.1165571183142.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 01:46:23 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-740) JobTracker does not clean up task
 entries at job completion
In-Reply-To: <19044587.1164144664565.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-740?page=all ]

Arun C Murthy reassigned HADOOP-740:
------------------------------------

    Assignee: Arun C Murthy  (was: Owen O'Malley)

> JobTracker does not clean up task entries at job completion
> -----------------------------------------------------------
>
>                 Key: HADOOP-740
>                 URL: http://issues.apache.org/jira/browse/HADOOP-740
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.8.0
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>
> The JobTracker never calls removeTaskEntry on tasks that don't fail. This causes the JobTracker to use more and more heap space as jobs run. The fix is to:
> removeTaskEntry on reduces in completeTask
> removeTaskEntry on everything when a job is killed or completes

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 09:46:49 2006
Return-Path: 
 <hadoop-dev-return-5816-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23949 invoked from network); 8 Dec 2006 09:46:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 09:46:49 -0000
Received: (qmail 2088 invoked by uid 500); 8 Dec 2006 09:46:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2067 invoked by uid 500); 8 Dec 2006 09:46:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2048 invoked by uid 99); 8 Dec 2006 09:46:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 01:46:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 01:46:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 18D2A71430D
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 01:46:26 -0800 (PST)
Message-ID: <3394712.1165571186099.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 01:46:26 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-618) JobProfile and JobSubmissionProtocol
 should be public
In-Reply-To: <24570786.1161364115035.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-618?page=all ]

Arun C Murthy reassigned HADOOP-618:
------------------------------------

    Assignee: Arun C Murthy  (was: Owen O'Malley)

> JobProfile and JobSubmissionProtocol should be public
> -----------------------------------------------------
>
>                 Key: HADOOP-618
>                 URL: http://issues.apache.org/jira/browse/HADOOP-618
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Runping Qi
>         Assigned To: Arun C Murthy
>
> Are there any reasons why they are not public?
> Making them public adds a lot of flexibility for the client to interact with the Hadoop.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 09:48:44 2006
Return-Path: 
 <hadoop-dev-return-5817-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25291 invoked from network); 8 Dec 2006 09:48:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 09:48:44 -0000
Received: (qmail 5460 invoked by uid 500); 8 Dec 2006 09:48:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5442 invoked by uid 500); 8 Dec 2006 09:48:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5433 invoked by uid 99); 8 Dec 2006 09:48:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 01:48:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 01:48:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3A44A7142FA
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 01:48:23 -0800 (PST)
Message-ID: <3470052.1165571303236.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 01:48:23 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-476) Streaming should check for
 correctness of the task
In-Reply-To: <20801208.1156462750189.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-476?page=comments#action_12456750 ] 
            
Sanjay Dahiya commented on HADOOP-476:
--------------------------------------

Yoram: This patch doesnt take care of the fact that mapper and reducer are not shipped along. There are couple of other open issues which should take care of that - HADOOP-805 and HADOOP-797

> Streaming should check for correctness of the task
> --------------------------------------------------
>
>                 Key: HADOOP-476
>                 URL: http://issues.apache.org/jira/browse/HADOOP-476
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-476.patch
>
>
> Currently, if anythin is wrong with streaming job, it dies without any explanation.
> Before creating and running actual MapReduce job, Streaming should check if:
> -- the executables (or scripts) for -mapper and -reducer are available and have right permissions
> -- the input fragments exist

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 11:21:46 2006
Return-Path: 
 <hadoop-dev-return-5818-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53608 invoked from network); 8 Dec 2006 11:21:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 11:21:46 -0000
Received: (qmail 38692 invoked by uid 500); 8 Dec 2006 11:21:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38567 invoked by uid 500); 8 Dec 2006 11:21:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38513 invoked by uid 99); 8 Dec 2006 11:21:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 03:21:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 03:21:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0CC9671430D
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 03:21:21 -0800 (PST)
Message-ID: <8517460.1165576881049.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 03:21:21 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-808) Enhance 'bin/hadoop job -submit <>'
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Enhance 'bin/hadoop job -submit <>' 
------------------------------------

                 Key: HADOOP-808
                 URL: http://issues.apache.org/jira/browse/HADOOP-808
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: Arun C Murthy
         Assigned To: Arun C Murthy
            Priority: Minor


Today 'bin/hadoop job -submit' takes a config file and just does a JobClient.submitJob(jobConf), this isn't flexible enough for cases where the user wants to submit a job which calls his main(), does some work and then calls 'JobClient.runJob', I propose we enhance this subcommand to handle that scenario. This could be really useful for the time we decide to setup a simple webpage with 'form' where the user uploads a job.xml & job.jar and we can fire the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 11:32:57 2006
Return-Path: 
 <hadoop-dev-return-5819-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58039 invoked from network); 8 Dec 2006 11:32:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 11:32:57 -0000
Received: (qmail 64080 invoked by uid 500); 8 Dec 2006 11:32:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63964 invoked by uid 500); 8 Dec 2006 11:32:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63933 invoked by uid 99); 8 Dec 2006 11:32:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 03:32:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 65B317142FD
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 03:31:22 -0800 (PST)
Message-ID: <11972550.1165577482414.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 03:31:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-808) Enhance 'bin/hadoop job -submit <>'
In-Reply-To: <8517460.1165576881049.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-808?page=all ]

Arun C Murthy updated HADOOP-808:
---------------------------------

    Attachment: HADOOP-808_1_20061208.patch
                myjob.tgz

Here is a simple fix to JobClient.java

It handles the above deficiency by 'mapred.jar' in the jobconf, loads the 'mapred.job.class' (this class is assumed to extend org.apache.hadoop.util.ToolBase') and calls it's 'doMain'; there-by providing a hook for user code before the job is fired.

Hence with this one can completey 'configure' the map-reduce job (job-name, key/value classes, output-directory, speculative-execution, no. of maps/reduces etc.), specify the 'jar' with the mapper/reducer classes and fire the job. Thus any change needed for 'configuration' is now done completely via the job.xml, and shouldn't need be done via JobConf.set* methods.

With the attached myjob.jar/myjob.xml one can:
$ hadoop job -submit myjob.xml
to run a modified version of 'random-writer'... there-by illustrating it's usefulness.

> Enhance 'bin/hadoop job -submit <>'
> -----------------------------------
>
>                 Key: HADOOP-808
>                 URL: http://issues.apache.org/jira/browse/HADOOP-808
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-808_1_20061208.patch, myjob.tgz
>
>
> Today 'bin/hadoop job -submit' takes a config file and just does a JobClient.submitJob(jobConf), this isn't flexible enough for cases where the user wants to submit a job which calls his main(), does some work and then calls 'JobClient.runJob', I propose we enhance this subcommand to handle that scenario. This could be really useful for the time we decide to setup a simple webpage with 'form' where the user uploads a job.xml & job.jar and we can fire the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 11:34:26 2006
Return-Path: 
 <hadoop-dev-return-5820-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58885 invoked from network); 8 Dec 2006 11:34:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 11:34:26 -0000
Received: (qmail 69290 invoked by uid 500); 8 Dec 2006 11:34:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69244 invoked by uid 500); 8 Dec 2006 11:34:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69224 invoked by uid 99); 8 Dec 2006 11:34:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 03:34:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 03:34:04 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 433EE7142FD
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 03:33:22 -0800 (PST)
Message-ID: <29482352.1165577602273.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 03:33:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-808) Enhance 'bin/hadoop job -submit <>'
In-Reply-To: <8517460.1165576881049.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit

     [ http://issues.apache.org/jira/browse/HADOOP-808?page=all ]

Arun C Murthy updated HADOOP-808:
---------------------------------

               Status: Patch Available  (was: Open)
        Fix Version/s: 0.10.0
    Affects Version/s: 0.9.1

> Enhance 'bin/hadoop job -submit <>'
> -----------------------------------
>
>                 Key: HADOOP-808
>                 URL: http://issues.apache.org/jira/browse/HADOOP-808
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-808_1_20061208.patch, myjob.tgz
>
>
> Today 'bin/hadoop job -submit' takes a config file and just does a JobClient.submitJob(jobConf), this isn't flexible enough for cases where the user wants to submit a job which calls his main(), does some work and then calls 'JobClient.runJob', I propose we enhance this subcommand to handle that scenario. This could be really useful for the time we decide to setup a simple webpage with 'form' where the user uploads a job.xml & job.jar and we can fire the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 11:45:44 2006
Return-Path: 
 <hadoop-dev-return-5821-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64342 invoked from network); 8 Dec 2006 11:45:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 11:45:44 -0000
Received: (qmail 96948 invoked by uid 500); 8 Dec 2006 11:45:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96923 invoked by uid 500); 8 Dec 2006 11:45:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96914 invoked by uid 99); 8 Dec 2006 11:45:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 03:45:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 03:45:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6BF7771430D
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 03:45:22 -0800 (PST)
Message-ID: <27907734.1165578322439.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 03:45:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-808) Enhance 'bin/hadoop job -submit <>'
In-Reply-To: <8517460.1165576881049.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-808?page=comments#action_12456787 ] 
            
Hadoop QA commented on HADOOP-808:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346754/myjob.tgz applied and successfully tested against trunk revision r483772

> Enhance 'bin/hadoop job -submit <>'
> -----------------------------------
>
>                 Key: HADOOP-808
>                 URL: http://issues.apache.org/jira/browse/HADOOP-808
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-808_1_20061208.patch, myjob.tgz
>
>
> Today 'bin/hadoop job -submit' takes a config file and just does a JobClient.submitJob(jobConf), this isn't flexible enough for cases where the user wants to submit a job which calls his main(), does some work and then calls 'JobClient.runJob', I propose we enhance this subcommand to handle that scenario. This could be really useful for the time we decide to setup a simple webpage with 'form' where the user uploads a job.xml & job.jar and we can fire the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 11:55:48 2006
Return-Path: 
 <hadoop-dev-return-5822-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66696 invoked from network); 8 Dec 2006 11:55:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 11:55:48 -0000
Received: (qmail 12399 invoked by uid 500); 8 Dec 2006 11:55:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12370 invoked by uid 500); 8 Dec 2006 11:55:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12338 invoked by uid 99); 8 Dec 2006 11:55:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 03:55:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 03:55:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8D37571430D
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 03:55:24 -0800 (PST)
Message-ID: <6485262.1165578924575.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 03:55:24 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-618) JobProfile and JobSubmissionProtocol
 should be public
In-Reply-To: <24570786.1161364115035.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-618?page=all ]

Arun C Murthy updated HADOOP-618:
---------------------------------

    Attachment: HADOOP-618_1_20061208.patch

Simple patch which makes both JobProfile & JobSubmissionProtocol 'public'; with improved javadocs for JobProfile...

> JobProfile and JobSubmissionProtocol should be public
> -----------------------------------------------------
>
>                 Key: HADOOP-618
>                 URL: http://issues.apache.org/jira/browse/HADOOP-618
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Runping Qi
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-618_1_20061208.patch
>
>
> Are there any reasons why they are not public?
> Making them public adds a lot of flexibility for the client to interact with the Hadoop.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 11:55:49 2006
Return-Path: 
 <hadoop-dev-return-5823-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66739 invoked from network); 8 Dec 2006 11:55:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 11:55:49 -0000
Received: (qmail 12711 invoked by uid 500); 8 Dec 2006 11:55:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12661 invoked by uid 500); 8 Dec 2006 11:55:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12628 invoked by uid 99); 8 Dec 2006 11:55:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 03:55:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 03:55:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9B866714311
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 03:55:26 -0800 (PST)
Message-ID: <29263405.1165578926634.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 03:55:26 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-618) JobProfile and JobSubmissionProtocol
 should be public
In-Reply-To: <24570786.1161364115035.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-618?page=all ]

Arun C Murthy updated HADOOP-618:
---------------------------------

               Status: Patch Available  (was: Open)
        Fix Version/s: 0.10.0
    Affects Version/s: 0.9.1

> JobProfile and JobSubmissionProtocol should be public
> -----------------------------------------------------
>
>                 Key: HADOOP-618
>                 URL: http://issues.apache.org/jira/browse/HADOOP-618
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Runping Qi
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-618_1_20061208.patch
>
>
> Are there any reasons why they are not public?
> Making them public adds a lot of flexibility for the client to interact with the Hadoop.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 12:07:45 2006
Return-Path: 
 <hadoop-dev-return-5824-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69692 invoked from network); 8 Dec 2006 12:07:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 12:07:45 -0000
Received: (qmail 27780 invoked by uid 500); 8 Dec 2006 12:07:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27753 invoked by uid 500); 8 Dec 2006 12:07:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27744 invoked by uid 99); 8 Dec 2006 12:07:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 04:07:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 04:07:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 026FE7142FA
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 04:07:23 -0800 (PST)
Message-ID: <25179520.1165579643007.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 04:07:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-618) JobProfile and JobSubmissionProtocol
 should be public
In-Reply-To: <24570786.1161364115035.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-618?page=comments#action_12456798 ] 
            
Hadoop QA commented on HADOOP-618:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346759/HADOOP-618_1_20061208.patch applied and successfully tested against trunk revision r483772

> JobProfile and JobSubmissionProtocol should be public
> -----------------------------------------------------
>
>                 Key: HADOOP-618
>                 URL: http://issues.apache.org/jira/browse/HADOOP-618
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Runping Qi
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-618_1_20061208.patch
>
>
> Are there any reasons why they are not public?
> Making them public adds a lot of flexibility for the client to interact with the Hadoop.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 12:23:41 2006
Return-Path: 
 <hadoop-dev-return-5825-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74008 invoked from network); 8 Dec 2006 12:23:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 12:23:41 -0000
Received: (qmail 57446 invoked by uid 500); 8 Dec 2006 12:23:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57418 invoked by uid 500); 8 Dec 2006 12:23:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57191 invoked by uid 99); 8 Dec 2006 12:23:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 04:23:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F1A397142FA
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 04:22:22 -0800 (PST)
Message-ID: <1659729.1165580542987.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 04:22:22 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-476) Streaming should check for correctness
 of the task
In-Reply-To: <20801208.1156462750189.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-476?page=all ]

Sanjay Dahiya updated HADOOP-476:
---------------------------------

    Attachment: Hadoop-476.patch

Updated patch, now it doesnt check for -mapper/reducer/combiner on localdisk of submit node. it runs chmod 0777 on -files and if after that files is not readable/writable/exists it throws error. 


> Streaming should check for correctness of the task
> --------------------------------------------------
>
>                 Key: HADOOP-476
>                 URL: http://issues.apache.org/jira/browse/HADOOP-476
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-476.patch, Hadoop-476.patch
>
>
> Currently, if anythin is wrong with streaming job, it dies without any explanation.
> Before creating and running actual MapReduce job, Streaming should check if:
> -- the executables (or scripts) for -mapper and -reducer are available and have right permissions
> -- the input fragments exist

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 16:32:43 2006
Return-Path: 
 <hadoop-dev-return-5826-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68746 invoked from network); 8 Dec 2006 16:32:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 16:32:43 -0000
Received: (qmail 66002 invoked by uid 500); 8 Dec 2006 16:32:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65975 invoked by uid 500); 8 Dec 2006 16:32:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65966 invoked by uid 99); 8 Dec 2006 16:32:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 08:32:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 08:32:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0D2837142FC
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 08:32:21 -0800 (PST)
Message-ID: <7414335.1165595541051.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 08:32:21 -0800 (PST)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-809) Streaming should have a built in
 identity mapper
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Streaming should have a built in identity mapper
------------------------------------------------

                 Key: HADOOP-809
                 URL: http://issues.apache.org/jira/browse/HADOOP-809
             Project: Hadoop
          Issue Type: Improvement
          Components: contrib/streaming
            Reporter: arkady borkovsky


Currently, in order to merge 2 inputs , or to feed the output of type-changing reduce to another reduce, one needs to use 
-mapper /bin/cat

Streaming already has identity reducer implemented.
Adding identity mapper will make it more conceptually clean, more efficient, and hopefully more reliable.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 16:40:05 2006
Return-Path: 
 <hadoop-dev-return-5827-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72167 invoked from network); 8 Dec 2006 16:40:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 16:40:05 -0000
Received: (qmail 84396 invoked by uid 500); 8 Dec 2006 16:40:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84315 invoked by uid 500); 8 Dec 2006 16:40:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84299 invoked by uid 99); 8 Dec 2006 16:40:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 08:40:10 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 08:39:47 -0800
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kB8GdIwu057318;
	Fri, 8 Dec 2006 08:39:18 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=in-reply-to:references:mime-version:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=N7mLPp92qfSjmMPPJLihXiBRj8C8VSex7Bkfx+SftBqyiMx9u/eLKBtPpqhRe8gh
In-Reply-To: <1659729.1165580542987.JavaMail.jira@brutus>
References: <1659729.1165580542987.JavaMail.jira@brutus>
Mime-Version: 1.0 (Apple Message framework v624)
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <ccc36aea0bc2fdfe7f29841775161085@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Updated: (HADOOP-476) Streaming should check for
 correctness of the task
Date: Fri, 8 Dec 2006 08:39:16 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org

Is the error thrown as described bellow caught by the job client and 
translated into a user-friendly message?

On Dec 8, 2006, at 4:22 AM, Sanjay Dahiya (JIRA) wrote:

>      [ http://issues.apache.org/jira/browse/HADOOP-476?page=all ]
>
> Sanjay Dahiya updated HADOOP-476:
> ---------------------------------
>
>     Attachment: Hadoop-476.patch
>
> Updated patch, now it doesnt check for -mapper/reducer/combiner on 
> localdisk of submit node. it runs chmod 0777 on -files and if after 
> that files is not readable/writable/exists it throws error.
>
>
>> Streaming should check for correctness of the task
>> --------------------------------------------------
>>
>>                 Key: HADOOP-476
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-476
>>             Project: Hadoop
>>          Issue Type: Bug
>>          Components: contrib/streaming
>>            Reporter: arkady borkovsky
>>         Assigned To: Sanjay Dahiya
>>         Attachments: Hadoop-476.patch, Hadoop-476.patch
>>
>>
>> Currently, if anythin is wrong with streaming job, it dies without 
>> any explanation.
>> Before creating and running actual MapReduce job, Streaming should 
>> check if:
>> -- the executables (or scripts) for -mapper and -reducer are 
>> available and have right permissions
>> -- the input fragments exist
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the 
> administrators: 
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see: 
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Fri Dec  8 17:06:22 2006
Return-Path: 
 <hadoop-dev-return-5828-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80949 invoked from network); 8 Dec 2006 17:06:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 17:06:22 -0000
Received: (qmail 49701 invoked by uid 500); 8 Dec 2006 17:06:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49463 invoked by uid 500); 8 Dec 2006 17:06:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49453 invoked by uid 99); 8 Dec 2006 17:06:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 09:06:29 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 09:06:18 -0800
Received: from [10.0.1.5] (snvvpn2-10-72-77-c20.corp.yahoo.com [10.72.77.20])
	by rsmtp1.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kB8H5iuY063728
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Fri, 8 Dec 2006 09:05:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=1bt/dzuVS9Jewmu0d/tQBROqIL7oTlDpGUV1b1DKhPCR99ntVc+gNIHcLxNmpKM2
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <27907734.1165578322439.JavaMail.jira@brutus>
References: <27907734.1165578322439.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6BA7D636-8A3B-4D14-A7A5-C61035492E95@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Nigel Daley <ndaley@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-808) Enhance 'bin/hadoop job -submit
 <>'
Date: Fri, 8 Dec 2006 09:05:21 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Disregard this +1.  The last file attached to this issue is not a  
patch.  I've now modified my automated process to fail if the last  
attachment doesn't apply cleanly.

> Hadoop QA commented on HADOOP-808:
> ----------------------------------
>
> +1, http://issues.apache.org/jira/secure/attachment/12346754/ 
> myjob.tgz applied and successfully tested against trunk revision  
> r483772


From MAILER-DAEMON Fri Dec  8 17:20:44 2006
Return-Path: 
 <hadoop-dev-return-5829-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84886 invoked from network); 8 Dec 2006 17:20:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 17:20:44 -0000
Received: (qmail 80978 invoked by uid 500); 8 Dec 2006 17:20:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80962 invoked by uid 500); 8 Dec 2006 17:20:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80873 invoked by uid 99); 8 Dec 2006 17:20:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 09:20:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 09:20:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4D20E7142FB
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 09:20:22 -0800 (PST)
Message-ID: <27987198.1165598422313.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 09:20:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-807) splitting DFS version number
In-Reply-To: <7963167.1165555401153.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-807?page=comments#action_12456918 ] 
            
Doug Cutting commented on HADOOP-807:
-------------------------------------

This sounds reasonable to me.  Those names are rather long for my taste.  I'd probably use something like:
   DFS_IMAGE_VERSION
   DFS_PROTOCOL_VERSION
   DFS_DATA_VERSION
The DFS_ is probably even redundant in every context where these are used, since they're already enclosed in a DFS-specific class.


> splitting DFS version number
> ----------------------------
>
>                 Key: HADOOP-807
>                 URL: http://issues.apache.org/jira/browse/HADOOP-807
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> In the current code, there is a enum named DFS_CURRENT_VERSION. It is being used for three different purposes:
> 1. It is stored in the fsimage and represents the format of the fsimage.
> 2. It is stored in the "storage" file by the Datanodes. Thus, it represents the format of data on Datanodes.
> 3. It is used as a version of the Datanode Protocol.
> The current implementation makes it difficult to change the fsimage format without affecting the Datanode Protocol. My proposal is to introduce three new constants, one for each of the functionality described above.
> In the current code, we have:
>     public static final int DFS_CURRENT_VERSION = -3;
> Instead, we can have:
>     public static final int DFS_FSIMAGE_CURRENT_VERSION = -3;
>     public static final int DFS_DATANODEPROTOCOL_CURRENT_VERSION = -3;
>     public static final int DFS_DATASTORAGE_CURRENT_VERSION = -3;
> The first one is associated with the format of the fsimage/edits; the second one is associated with the communication procotol between the namenode and the datanode; the third one is associated with the format of the datastore on the datanodes (e.g. directory fanout).
> Please comment.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 17:24:14 2006
Return-Path: 
 <hadoop-dev-return-5830-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85670 invoked from network); 8 Dec 2006 17:24:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 17:24:14 -0000
Received: (qmail 86559 invoked by uid 500); 8 Dec 2006 17:24:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86538 invoked by uid 500); 8 Dec 2006 17:24:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86529 invoked by uid 99); 8 Dec 2006 17:24:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 09:24:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.148.227.151] (HELO rwcrmhc11.comcast.net)
 (216.148.227.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 09:24:10 -0800
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc11) with ESMTP
          id <20061208172350m11007f9m4e>; Fri, 8 Dec 2006 17:23:50 +0000
Message-ID: <45799FA5.4070706@apache.org>
Date: Fri, 08 Dec 2006 09:23:49 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.8 (X11/20061117)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Commented: (HADOOP-808) Enhance 'bin/hadoop job -submit
 <>'
References: <27907734.1165578322439.JavaMail.jira@brutus>
 <6BA7D636-8A3B-4D14-A7A5-C61035492E95@yahoo-inc.com>
In-Reply-To: <6BA7D636-8A3B-4D14-A7A5-C61035492E95@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Nigel Daley wrote:
> Disregard this +1.

Thanks!  I was wondering about what happened there.

BTW, the auto-testing of patches is very useful.  Thanks!  I still 
wonder if we ought to do more when tests fail.  Thoughts?

Doug

From MAILER-DAEMON Fri Dec  8 18:29:47 2006
Return-Path: 
 <hadoop-dev-return-5831-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8999 invoked from network); 8 Dec 2006 18:29:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 18:29:47 -0000
Received: (qmail 58315 invoked by uid 500); 8 Dec 2006 18:29:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58258 invoked by uid 500); 8 Dec 2006 18:29:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58243 invoked by uid 99); 8 Dec 2006 18:29:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 10:29:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 10:29:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4F13D7142FB
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 10:29:25 -0800 (PST)
Message-ID: <9446361.1165602565321.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 10:29:25 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12456932 ] 
            
Doug Cutting commented on HADOOP-619:
-------------------------------------

I should have followed this patch more closely earlier.  Sorry!

This logic should not be in JobClient, but rather in InputFormatBase.  The kernel should know very little about how inputs are specified, it should delegate all of that to the InputFormat.  Inputs will usually be files in a Hadoop FileSystem, but they could be something else entirely, that is, e.g., not easily modelled by Hadoop's FileSystem API.  So in mapred kernel code, like JobClient, we shouldn't assume that inputs are from a FileSystem.

I have not been as good at enforcing this distinction in the past.  For example, JobConf.addInputPath(Path) should be a static InputFormatBase.addInputPath(JobConf,Path).  The method is provided on JobConf as a convenience, for jobs that specify their inputs with FileSystem paths, so this isn't a gross violation: applications are not forced to use this method.

More seriously, the InputFormat method areValidInputDirectories(Path[]) should be more abstract: we must not assume that inputs are always named with FileSystem Paths.  Rather, this method should probably be something like hasValidInput(JobConf).  Then InputFormatBase can implement it to glob, etc.  To make this even more clear, we should rename InputFormatBase to be FileSystemInputFormat.

But those changes are beyond the scope of this issue and should be made under separate issues.  For this issue we need to move as much of the logic as possible out of JobClient and into InputFormatBase.

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 19:11:45 2006
Return-Path: 
 <hadoop-dev-return-5832-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19831 invoked from network); 8 Dec 2006 19:11:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 19:11:45 -0000
Received: (qmail 41612 invoked by uid 500); 8 Dec 2006 19:11:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41578 invoked by uid 500); 8 Dec 2006 19:11:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41569 invoked by uid 99); 8 Dec 2006 19:11:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 11:11:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 11:11:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DBA2E7142FC
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 11:11:23 -0800 (PST)
Message-ID: <30947965.1165605083896.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 11:11:23 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-807) splitting DFS version number
In-Reply-To: <7963167.1165555401153.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-807?page=comments#action_12456950 ] 
            
Raghu Angadi commented on HADOOP-807:
-------------------------------------


Should we have another VERSION for namenode? It has files other than fsimage ( new VERSION file, edits file etc).

Also DFS_DATA_VERSION is only used by Datanode, then it should declared in a Datanode class or name should imply it.


> splitting DFS version number
> ----------------------------
>
>                 Key: HADOOP-807
>                 URL: http://issues.apache.org/jira/browse/HADOOP-807
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> In the current code, there is a enum named DFS_CURRENT_VERSION. It is being used for three different purposes:
> 1. It is stored in the fsimage and represents the format of the fsimage.
> 2. It is stored in the "storage" file by the Datanodes. Thus, it represents the format of data on Datanodes.
> 3. It is used as a version of the Datanode Protocol.
> The current implementation makes it difficult to change the fsimage format without affecting the Datanode Protocol. My proposal is to introduce three new constants, one for each of the functionality described above.
> In the current code, we have:
>     public static final int DFS_CURRENT_VERSION = -3;
> Instead, we can have:
>     public static final int DFS_FSIMAGE_CURRENT_VERSION = -3;
>     public static final int DFS_DATANODEPROTOCOL_CURRENT_VERSION = -3;
>     public static final int DFS_DATASTORAGE_CURRENT_VERSION = -3;
> The first one is associated with the format of the fsimage/edits; the second one is associated with the communication procotol between the namenode and the datanode; the third one is associated with the format of the datastore on the datanodes (e.g. directory fanout).
> Please comment.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 20:28:12 2006
Return-Path: 
 <hadoop-dev-return-5833-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52153 invoked from network); 8 Dec 2006 20:28:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 20:28:12 -0000
Received: (qmail 34490 invoked by uid 500); 8 Dec 2006 20:28:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34468 invoked by uid 500); 8 Dec 2006 20:28:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34450 invoked by uid 99); 8 Dec 2006 20:28:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 12:28:18 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 12:28:07 -0800
Received: from [10.0.1.5] (snvvpn2-10-72-77-c20.corp.yahoo.com [10.72.77.20])
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kB8KRbfU072173
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Fri, 8 Dec 2006 12:27:38 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=2E246d+2JYSavgsYr3ivVvHprNwHDFHWaiqC3fwWtINqI08MtWMf/YkzXd6Cfd+E
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <7963167.1165555401153.JavaMail.jira@brutus>
References: <7963167.1165555401153.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AD881369-FB57-46E9-94DD-FA3906ECD706@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Nigel Daley <ndaley@yahoo-inc.com>
Subject: Re: [jira] Created: (HADOOP-807) splitting DFS version number
Date: Fri, 8 Dec 2006 12:27:17 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

My only concern with this is the potential burden of documenting and  
testing the interoperability of these independently changing versions  
-- especially given that we don't currently have any tests in this  
area.  In my experience, generating compatibility matrices can be  
tricky business.


On Dec 7, 2006, at 9:23 PM, dhruba borthakur (JIRA) wrote:

> splitting DFS version number
> ----------------------------
>
>                  Key: HADOOP-807
>                  URL: http://issues.apache.org/jira/browse/HADOOP-807
>              Project: Hadoop
>           Issue Type: Bug
>           Components: dfs
>             Reporter: dhruba borthakur
>          Assigned To: dhruba borthakur
>
>
> In the current code, there is a enum named DFS_CURRENT_VERSION. It  
> is being used for three different purposes:
>
> 1. It is stored in the fsimage and represents the format of the  
> fsimage.
> 2. It is stored in the "storage" file by the Datanodes. Thus, it  
> represents the format of data on Datanodes.
> 3. It is used as a version of the Datanode Protocol.
>
> The current implementation makes it difficult to change the fsimage  
> format without affecting the Datanode Protocol. My proposal is to  
> introduce three new constants, one for each of the functionality  
> described above.
>
> In the current code, we have:
>     public static final int DFS_CURRENT_VERSION = -3;
>
> Instead, we can have:
>     public static final int DFS_FSIMAGE_CURRENT_VERSION = -3;
>     public static final int DFS_DATANODEPROTOCOL_CURRENT_VERSION = -3;
>     public static final int DFS_DATASTORAGE_CURRENT_VERSION = -3;
>
> The first one is associated with the format of the fsimage/edits;  
> the second one is associated with the communication procotol  
> between the namenode and the datanode; the third one is associated  
> with the format of the datastore on the datanodes (e.g. directory  
> fanout).
>
> Please comment.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Fri Dec  8 21:20:29 2006
Return-Path: 
 <hadoop-dev-return-5834-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70741 invoked from network); 8 Dec 2006 21:20:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 21:20:29 -0000
Received: (qmail 41864 invoked by uid 500); 8 Dec 2006 21:20:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41844 invoked by uid 500); 8 Dec 2006 21:20:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41835 invoked by uid 99); 8 Dec 2006 21:20:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 13:20:36 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 13:20:25 -0800
Received: from [10.0.1.5] (snvvpn2-10-72-77-c20.corp.yahoo.com [10.72.77.20])
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kB8LJweL075237
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Fri, 8 Dec 2006 13:19:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=qdORjAiSHPls+tgEihRxhGc+sNwjrna7SAxV4N/AFGZDXpTVq3fXiTfDZkSjAshg
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <45799FA5.4070706@apache.org>
References: <27907734.1165578322439.JavaMail.jira@brutus>
 <6BA7D636-8A3B-4D14-A7A5-C61035492E95@yahoo-inc.com>
 <45799FA5.4070706@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6E72F738-5937-4244-B767-E4DB49EE2D8B@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Nigel Daley <ndaley@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-808) Enhance 'bin/hadoop job -submit
 <>'
Date: Fri, 8 Dec 2006 13:19:38 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 8, 2006, at 9:23 AM, Doug Cutting wrote:

> Nigel Daley wrote:
>> Disregard this +1.
>
> Thanks!  I was wondering about what happened there.
>
> BTW, the auto-testing of patches is very useful.  Thanks!  I still  
> wonder if we ought to do more when tests fail.  Thoughts?

So far I haven't had any failures.  Perhaps we should wait for more  
experience?  Currently, the system will email me after 2 failed build/ 
test attempts on the same patch.  I could send these failure emails  
to hadoop-dev if you'd prefer.  But realize that these emails may  
occasionally be false negatives.

Perhaps there's a way of making this automation more public by  
running it (and the associated continuous integration server) on  
apache hosted servers?

Cheers,
Nige


From MAILER-DAEMON Fri Dec  8 21:40:49 2006
Return-Path: 
 <hadoop-dev-return-5835-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79354 invoked from network); 8 Dec 2006 21:40:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 21:40:49 -0000
Received: (qmail 86556 invoked by uid 500); 8 Dec 2006 21:40:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86521 invoked by uid 500); 8 Dec 2006 21:40:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86512 invoked by uid 99); 8 Dec 2006 21:40:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 13:40:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [204.127.192.84] (HELO rwcrmhc14.comcast.net) (204.127.192.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 13:40:45 -0800
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc14) with ESMTP
          id <20061208214023m1400dnm8de>; Fri, 8 Dec 2006 21:40:23 +0000
Message-ID: <4579DBC6.1040106@apache.org>
Date: Fri, 08 Dec 2006 13:40:22 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.8 (X11/20061117)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Commented: (HADOOP-808) Enhance 'bin/hadoop job -submit
 <>'
References: <27907734.1165578322439.JavaMail.jira@brutus>
 <6BA7D636-8A3B-4D14-A7A5-C61035492E95@yahoo-inc.com>
 <45799FA5.4070706@apache.org>
 <6E72F738-5937-4244-B767-E4DB49EE2D8B@yahoo-inc.com>
In-Reply-To: <6E72F738-5937-4244-B767-E4DB49EE2D8B@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Nigel Daley wrote:
> So far I haven't had any failures.  Perhaps we should wait for more 
> experience?  Currently, the system will email me after 2 failed 
> build/test attempts on the same patch.  I could send these failure 
> emails to hadoop-dev if you'd prefer.  But realize that these emails may 
> occasionally be false negatives.

Ideally we'd get a '-1' comment if the patch doesn't apply to trunk, no? 
  This would be annoying if there were lots of false negatives.  But it 
could save folks time, when, e.g., a patch gets stale, if it's noted in 
the patch.

Should we re-run tests on patches daily, and if something that 
previously passed now fails or vice versa, note the change in state?

> Perhaps there's a way of making this automation more public by running 
> it (and the associated continuous integration server) on apache hosted 
> servers?

The appropriate server for this would be lucene.zones.apache.org, a 
Solaris zone (virtual solaris box).  If you'd like to set these up 
publicly that'd be great.  Alternately, we could do something like add 
attachments to issues with the log file from the first failing unit 
test, or somesuch.

Doug

From MAILER-DAEMON Fri Dec  8 21:42:44 2006
Return-Path: 
 <hadoop-dev-return-5836-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80402 invoked from network); 8 Dec 2006 21:42:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 21:42:44 -0000
Received: (qmail 93675 invoked by uid 500); 8 Dec 2006 21:42:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93453 invoked by uid 500); 8 Dec 2006 21:42:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93443 invoked by uid 99); 8 Dec 2006 21:42:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 13:42:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 13:42:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 46FBE7142FB
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 13:42:22 -0800 (PST)
Message-ID: <28835196.1165614142288.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 13:42:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-807) splitting DFS version number
In-Reply-To: <7963167.1165555401153.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-807?page=comments#action_12456986 ] 
            
dhruba borthakur commented on HADOOP-807:
-----------------------------------------

Nigel's comment (for the record):

"My only concern with this is the potential burden of documenting and testing the interoperability of these independently changing versions
-- especially given that we don't currently have any tests in this area.  In my experience, generating compatibility matrices can be tricky business."

I agree with the above comment. Testing an old datanode with a newer datanode can be burdensome. But the only other alternative is to require that all nodes in the cluster are upgraded at the same time.

> splitting DFS version number
> ----------------------------
>
>                 Key: HADOOP-807
>                 URL: http://issues.apache.org/jira/browse/HADOOP-807
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> In the current code, there is a enum named DFS_CURRENT_VERSION. It is being used for three different purposes:
> 1. It is stored in the fsimage and represents the format of the fsimage.
> 2. It is stored in the "storage" file by the Datanodes. Thus, it represents the format of data on Datanodes.
> 3. It is used as a version of the Datanode Protocol.
> The current implementation makes it difficult to change the fsimage format without affecting the Datanode Protocol. My proposal is to introduce three new constants, one for each of the functionality described above.
> In the current code, we have:
>     public static final int DFS_CURRENT_VERSION = -3;
> Instead, we can have:
>     public static final int DFS_FSIMAGE_CURRENT_VERSION = -3;
>     public static final int DFS_DATANODEPROTOCOL_CURRENT_VERSION = -3;
>     public static final int DFS_DATASTORAGE_CURRENT_VERSION = -3;
> The first one is associated with the format of the fsimage/edits; the second one is associated with the communication procotol between the namenode and the datanode; the third one is associated with the format of the datastore on the datanodes (e.g. directory fanout).
> Please comment.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 22:21:47 2006
Return-Path: 
 <hadoop-dev-return-5837-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92522 invoked from network); 8 Dec 2006 22:21:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 22:21:47 -0000
Received: (qmail 49911 invoked by uid 500); 8 Dec 2006 22:21:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49892 invoked by uid 500); 8 Dec 2006 22:21:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49883 invoked by uid 99); 8 Dec 2006 22:21:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 14:21:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 14:21:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D9638714312
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 14:21:24 -0800 (PST)
Message-ID: <20330180.1165616484820.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 14:21:24 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-571) Path should use URI syntax
In-Reply-To: <6678550.1159825879600.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-571?page=all ]

Doug Cutting updated HADOOP-571:
--------------------------------

    Attachment: uri4.patch

Here's a version that applies to the current trunk, fixing the problem that Tom mentioned, but that still fails the streaming unit tests.

> Path should use URI syntax
> --------------------------
>
>                 Key: HADOOP-571
>                 URL: http://issues.apache.org/jira/browse/HADOOP-571
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: uri.patch, uri2.patch, uri3.patch, uri4.patch
>
>
> The following changes are proposed:
> 1. Add a factory/registry of FileSystem implementations.  Given a protocol, hostname and port, it should be possible to get a FileSystem implementation.
> 2. Path's constructor should accept URI-formatted strings & a configuration.
> 3. A new Path method should be added: FileSystem.getFileSystem().  This returns the filesystem named in the path or the default configured filesystem.
> 4. Most methods which currently take FileSystem and Path parameters can be changed to take only Path.
> 5. Many FileSystem operations (create, open, delete, list, etc.) can become convenience methods on Path.
> 6. A URLStreamHandler can be defined in terms of the FileSystem API, so that URLs for any protocol with a registered FileSystem implementation can be accessed with a java.net.URL, permitting FileSystem implementations to be used on the classpath, etc.
> It is tempting to try to replace Path with java.net.URL, but URL's methods are insufficient for mapreduce.  We require directory listings, random access, location hints, etc., which are not supported by existing URLStreamHandler implementations.  But we can expose all FileSystem implementations for access with java.net.URL.
> (From a brainstorm with Owen.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 22:31:43 2006
Return-Path: 
 <hadoop-dev-return-5838-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95304 invoked from network); 8 Dec 2006 22:31:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 22:31:43 -0000
Received: (qmail 62237 invoked by uid 500); 8 Dec 2006 22:31:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62004 invoked by uid 500); 8 Dec 2006 22:31:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61995 invoked by uid 99); 8 Dec 2006 22:31:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 14:31:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 14:31:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4FA777142FD
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 14:31:22 -0800 (PST)
Message-ID: <32775851.1165617082323.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 14:31:22 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-702) DFS Upgrade Proposal
In-Reply-To: <13641771.1163042497986.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-702?page=all ]

Nigel Daley updated HADOOP-702:
-------------------------------

    Attachment: TestPlan-HdfsUpgrade.html

A test plan for DFS upgrades.  Review comments welcome.

> DFS Upgrade Proposal
> --------------------
>
>                 Key: HADOOP-702
>                 URL: http://issues.apache.org/jira/browse/HADOOP-702
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: Konstantin Shvachko
>         Attachments: DFSUpgradeProposal.html, DFSUpgradeProposal2.html, TestPlan-HdfsUpgrade.html
>
>
> Currently the DFS cluster upgrade procedure is manual.
> http://wiki.apache.org/lucene-hadoop/Hadoop_Upgrade
> It is rather complicated and does not guarantee data recoverability in case of software errors or administrator mistakes.
> This is a description of utilities that make the upgrade process almost automatic and minimize chance of loosing or corrupting data.
> Please see the attached html file for details.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 23:37:43 2006
Return-Path: 
 <hadoop-dev-return-5839-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8638 invoked from network); 8 Dec 2006 23:37:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 23:37:43 -0000
Received: (qmail 43702 invoked by uid 500); 8 Dec 2006 23:37:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43459 invoked by uid 500); 8 Dec 2006 23:37:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43450 invoked by uid 99); 8 Dec 2006 23:37:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 15:37:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 15:37:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4AB197142FB
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 15:37:22 -0800 (PST)
Message-ID: <30434350.1165621042303.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 15:37:22 -0800 (PST)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-809) Streaming should have a built in
 identity mapper
In-Reply-To: <7414335.1165595541051.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-809?page=comments#action_12457009 ] 
            
arkady borkovsky commented on HADOOP-809:
-----------------------------------------

It looks like this functionality is available as option
-mapper org.apache.hadoop.mapred.lib.IdentityMapper

Needs to be tested, added to regression pack, closed.

> Streaming should have a built in identity mapper
> ------------------------------------------------
>
>                 Key: HADOOP-809
>                 URL: http://issues.apache.org/jira/browse/HADOOP-809
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>
> Currently, in order to merge 2 inputs , or to feed the output of type-changing reduce to another reduce, one needs to use 
> -mapper /bin/cat
> Streaming already has identity reducer implemented.
> Adding identity mapper will make it more conceptually clean, more efficient, and hopefully more reliable.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 23:39:43 2006
Return-Path: 
 <hadoop-dev-return-5840-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8806 invoked from network); 8 Dec 2006 23:39:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 23:39:43 -0000
Received: (qmail 44555 invoked by uid 500); 8 Dec 2006 23:39:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44317 invoked by uid 500); 8 Dec 2006 23:39:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44308 invoked by uid 99); 8 Dec 2006 23:39:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 15:39:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 15:39:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 51D8C7142FB
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 15:39:22 -0800 (PST)
Message-ID: <11182741.1165621162332.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 15:39:22 -0800 (PST)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-809) Streaming should have a built in
 identity mapper
In-Reply-To: <7414335.1165595541051.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-809?page=comments#action_12457010 ] 
            
arkady borkovsky commented on HADOOP-809:
-----------------------------------------

Also,

it should require less characters to specify.
E.g it may be a deafault mapper -- in this case the streaming job client should say "Using the default identity mapper"

> Streaming should have a built in identity mapper
> ------------------------------------------------
>
>                 Key: HADOOP-809
>                 URL: http://issues.apache.org/jira/browse/HADOOP-809
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>
> Currently, in order to merge 2 inputs , or to feed the output of type-changing reduce to another reduce, one needs to use 
> -mapper /bin/cat
> Streaming already has identity reducer implemented.
> Adding identity mapper will make it more conceptually clean, more efficient, and hopefully more reliable.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 23:45:44 2006
Return-Path: 
 <hadoop-dev-return-5841-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9753 invoked from network); 8 Dec 2006 23:45:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 23:45:44 -0000
Received: (qmail 50841 invoked by uid 500); 8 Dec 2006 23:45:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50813 invoked by uid 500); 8 Dec 2006 23:45:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50804 invoked by uid 99); 8 Dec 2006 23:45:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 15:45:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 15:45:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 02FF77142FB
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 15:45:23 -0800 (PST)
Message-ID: <6101115.1165621523009.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 15:45:23 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-807) splitting DFS version number
In-Reply-To: <7963167.1165555401153.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-807?page=comments#action_12457011 ] 
            
Konstantin Shvachko commented on HADOOP-807:
--------------------------------------------

1. & 2. I think these two are closely related and we should keep the same version for the data layout
for fsimage and data-nodes. If we split them then we will have to support a table of compatible versions
or something similar.
Currently we have simple criteria: different versions are incompatible.
I understand that some changes on the namenode do not necessarily make incompatible data-nodes
running old versions and vice versa. But sometimes they do, and that is what DFS_CURRENT_VERSION
is used for.

3. Yes there is a different version for Datanode protocol, which is DatanodeProtocol.versionID.

I don't think we should split versions at this point, until we define our versioning approach in general.
I agree, we should change the name of the constant.

> splitting DFS version number
> ----------------------------
>
>                 Key: HADOOP-807
>                 URL: http://issues.apache.org/jira/browse/HADOOP-807
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> In the current code, there is a enum named DFS_CURRENT_VERSION. It is being used for three different purposes:
> 1. It is stored in the fsimage and represents the format of the fsimage.
> 2. It is stored in the "storage" file by the Datanodes. Thus, it represents the format of data on Datanodes.
> 3. It is used as a version of the Datanode Protocol.
> The current implementation makes it difficult to change the fsimage format without affecting the Datanode Protocol. My proposal is to introduce three new constants, one for each of the functionality described above.
> In the current code, we have:
>     public static final int DFS_CURRENT_VERSION = -3;
> Instead, we can have:
>     public static final int DFS_FSIMAGE_CURRENT_VERSION = -3;
>     public static final int DFS_DATANODEPROTOCOL_CURRENT_VERSION = -3;
>     public static final int DFS_DATASTORAGE_CURRENT_VERSION = -3;
> The first one is associated with the format of the fsimage/edits; the second one is associated with the communication procotol between the namenode and the datanode; the third one is associated with the format of the datastore on the datanodes (e.g. directory fanout).
> Please comment.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec  8 23:55:45 2006
Return-Path: 
 <hadoop-dev-return-5842-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11271 invoked from network); 8 Dec 2006 23:55:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 23:55:45 -0000
Received: (qmail 61872 invoked by uid 500); 8 Dec 2006 23:55:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61636 invoked by uid 500); 8 Dec 2006 23:55:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61627 invoked by uid 99); 8 Dec 2006 23:55:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 15:55:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 15:55:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 90FE57142FD
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 15:55:24 -0800 (PST)
Message-ID: <27126363.1165622124591.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 15:55:24 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-807) splitting DFS version number
In-Reply-To: <7963167.1165555401153.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-807?page=comments#action_12457015 ] 
            
dhruba borthakur commented on HADOOP-807:
-----------------------------------------

I think the fsimage version and the datanode-storage-version are unrelated to one another. Thus a compatibility matrix does not arise.

The namenode need not care what format the datanode is storing its data. The namenode cares about the fsimage version and the Datanode protocol version. Similarly, the datanode cares about the datanode-storage-version and the Datanode protocol version. The compatibility question arises *only* if the DatanodeProtocol changes. 

But I agree with you that if we say that all cluster nodes have to be upgraded at the same time, then we can live with a single data format version for both namenodes and datanodes.

> splitting DFS version number
> ----------------------------
>
>                 Key: HADOOP-807
>                 URL: http://issues.apache.org/jira/browse/HADOOP-807
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> In the current code, there is a enum named DFS_CURRENT_VERSION. It is being used for three different purposes:
> 1. It is stored in the fsimage and represents the format of the fsimage.
> 2. It is stored in the "storage" file by the Datanodes. Thus, it represents the format of data on Datanodes.
> 3. It is used as a version of the Datanode Protocol.
> The current implementation makes it difficult to change the fsimage format without affecting the Datanode Protocol. My proposal is to introduce three new constants, one for each of the functionality described above.
> In the current code, we have:
>     public static final int DFS_CURRENT_VERSION = -3;
> Instead, we can have:
>     public static final int DFS_FSIMAGE_CURRENT_VERSION = -3;
>     public static final int DFS_DATANODEPROTOCOL_CURRENT_VERSION = -3;
>     public static final int DFS_DATASTORAGE_CURRENT_VERSION = -3;
> The first one is associated with the format of the fsimage/edits; the second one is associated with the communication procotol between the namenode and the datanode; the third one is associated with the format of the datastore on the datanodes (e.g. directory fanout).
> Please comment.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec  9 01:14:45 2006
Return-Path: 
 <hadoop-dev-return-5843-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35132 invoked from network); 9 Dec 2006 01:14:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2006 01:14:45 -0000
Received: (qmail 84014 invoked by uid 500); 9 Dec 2006 01:14:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83780 invoked by uid 500); 9 Dec 2006 01:14:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83766 invoked by uid 99); 9 Dec 2006 01:14:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 17:14:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 17:14:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 800F87142FB
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 17:14:23 -0800 (PST)
Message-ID: <12703053.1165626863522.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 17:14:23 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-810) The non-existence of the job.xml file
 causes a LOT of tasks of the job fail
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The non-existence of the job.xml file causes a LOT of tasks of the job fail
---------------------------------------------------------------------------

                 Key: HADOOP-810
                 URL: http://issues.apache.org/jira/browse/HADOOP-810
             Project: Hadoop
          Issue Type: Bug
            Reporter: Runping Qi



For some reason, the job.xml file disappears from one of the nodes. That causes the following exception:

java.lang.RuntimeException: java.lang.RuntimeException:  taskTracker/jobcache/job_0039/job.xml not found
	at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:551)
	at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:472)
	at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:453)
	at org.apache.hadoop.conf.Configuration.get(Configuration.java:201)
	at org.apache.hadoop.conf.Configuration.getBoolean(Configuration.java:286)
	at org.apache.hadoop.mapred.JobConf.getKeepFailedTaskFiles(JobConf.java:212)
	at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.setJobConf(TaskTracker.java:874)
	at org.apache.hadoop.mapred.TaskTracker.launchTaskForJob(TaskTracker.java:313)
	at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:307)
	at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:691)
	at org.apache.hadoop.mapred.TaskTracker.checkForNewTasks(TaskTracker.java:533)
	at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:448)
	at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
	at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)


That is fine by itself.
The problem is the task tracker keeps accepting tasks of the same job, and keeps failing them!
The correct behavior is that it either tries to get the job.xml from the job tracker, or refuses accepting any new tasks 
of the same job.



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec  9 02:26:44 2006
Return-Path: 
 <hadoop-dev-return-5844-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54707 invoked from network); 9 Dec 2006 02:26:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2006 02:26:44 -0000
Received: (qmail 55849 invoked by uid 500); 9 Dec 2006 02:26:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55819 invoked by uid 500); 9 Dec 2006 02:26:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55810 invoked by uid 99); 9 Dec 2006 02:26:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 18:26:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 18:26:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 581667142FB
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 18:26:22 -0800 (PST)
Message-ID: <29865734.1165631182357.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 18:26:22 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-807) splitting DFS version number
In-Reply-To: <7963167.1165555401153.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-807?page=comments#action_12457042 ] 
            
Konstantin Shvachko commented on HADOOP-807:
--------------------------------------------

Unified storage version ensures that all system components are in sync.

We wanted all system components to run the same software version.
The reason is that we have seen cases (before versions where introduced)
when some data-nodes where not shutdown properly and caused different kinds of problems.
Using a unified storage version somewhat relaxes the same software requirement.
If we want to further relax this requirement we need a clearly defined versioning story.
Which might not be trivial. There are different approaches, here are just some

http://www.cs.cmu.edu/~srini/Papers/publications/dead/usenix05-distapp/usenix05.pdf
http://publications.csail.mit.edu/tmp/MIT-CSAIL-TR-2005-078.pdf



> splitting DFS version number
> ----------------------------
>
>                 Key: HADOOP-807
>                 URL: http://issues.apache.org/jira/browse/HADOOP-807
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> In the current code, there is a enum named DFS_CURRENT_VERSION. It is being used for three different purposes:
> 1. It is stored in the fsimage and represents the format of the fsimage.
> 2. It is stored in the "storage" file by the Datanodes. Thus, it represents the format of data on Datanodes.
> 3. It is used as a version of the Datanode Protocol.
> The current implementation makes it difficult to change the fsimage format without affecting the Datanode Protocol. My proposal is to introduce three new constants, one for each of the functionality described above.
> In the current code, we have:
>     public static final int DFS_CURRENT_VERSION = -3;
> Instead, we can have:
>     public static final int DFS_FSIMAGE_CURRENT_VERSION = -3;
>     public static final int DFS_DATANODEPROTOCOL_CURRENT_VERSION = -3;
>     public static final int DFS_DATASTORAGE_CURRENT_VERSION = -3;
> The first one is associated with the format of the fsimage/edits; the second one is associated with the communication procotol between the namenode and the datanode; the third one is associated with the format of the datastore on the datanodes (e.g. directory fanout).
> Please comment.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec  9 03:01:44 2006
Return-Path: 
 <hadoop-dev-return-5845-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59490 invoked from network); 9 Dec 2006 03:01:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2006 03:01:44 -0000
Received: (qmail 79952 invoked by uid 500); 9 Dec 2006 03:01:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79808 invoked by uid 500); 9 Dec 2006 03:01:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79799 invoked by uid 99); 9 Dec 2006 03:01:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 19:01:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 19:01:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 11DF87142FC
	for <hadoop-dev@lucene.apache.org>; Fri,  8 Dec 2006 19:01:23 -0800 (PST)
Message-ID: <29502889.1165633283070.JavaMail.jira@brutus>
Date: Fri, 8 Dec 2006 19:01:23 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12457043 ] 
            
Konstantin Shvachko commented on HADOOP-432:
--------------------------------------------

- getDescendents(String src) {
        ArrayList strs = new ArrayList();
 type ArrayList<E> should be parameterized

- hadoop-default.xml
    = description for dfs.trash.trigger.size.pct should say something like
       "Triggers garbage collection of the expired items."
    = Typo emtries: should be entries

- I think we should have a junit test for the feature.
I'm sure you ran some programs to test the functionality.
It would be nice to combine them as a test module that would ensure that
future changes don't break the trash logic.

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec  9 18:20:44 2006
Return-Path: 
 <hadoop-dev-return-5846-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48872 invoked from network); 9 Dec 2006 18:20:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2006 18:20:44 -0000
Received: (qmail 83746 invoked by uid 500); 9 Dec 2006 18:20:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83709 invoked by uid 500); 9 Dec 2006 18:20:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83698 invoked by uid 99); 9 Dec 2006 18:20:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 10:20:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 10:20:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4DD9F7142FC
	for <hadoop-dev@lucene.apache.org>; Sat,  9 Dec 2006 10:20:22 -0800 (PST)
Message-ID: <24526565.1165688422316.JavaMail.jira@brutus>
Date: Sat, 9 Dec 2006 10:20:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-782) TaskTracker.java:killOverflowingTasks
 & TaskTracker.java:markUnresponsiveTasks only put the tip in tasksToCleanup
 queue, they don't update the runningJobs
In-Reply-To: <5740798.1165343781034.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-782?page=all ]

Arun C Murthy updated HADOOP-782:
---------------------------------

    Attachment: HADOOP-782_1_20061209.patch

Attached is a straight-forward fix...

> TaskTracker.java:killOverflowingTasks & TaskTracker.java:markUnresponsiveTasks only put the tip in tasksToCleanup queue, they don't update the runningJobs
> ----------------------------------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-782
>                 URL: http://issues.apache.org/jira/browse/HADOOP-782
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-782_1_20061209.patch
>
>
> Both killOverflowingTasks and markUnresponsiveTasks only put the tip in 'tasksToCleanup' queue, they should also call 'removeTaskFromJob' to update the 'runningJobs' map to reflect the fact that the task is no longer running. Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec  9 18:20:45 2006
Return-Path: 
 <hadoop-dev-return-5847-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48915 invoked from network); 9 Dec 2006 18:20:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2006 18:20:45 -0000
Received: (qmail 84021 invoked by uid 500); 9 Dec 2006 18:20:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83967 invoked by uid 500); 9 Dec 2006 18:20:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83958 invoked by uid 99); 9 Dec 2006 18:20:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 10:20:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 10:20:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A792D71430D
	for <hadoop-dev@lucene.apache.org>; Sat,  9 Dec 2006 10:20:23 -0800 (PST)
Message-ID: <22341769.1165688423684.JavaMail.jira@brutus>
Date: Sat, 9 Dec 2006 10:20:23 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-782) TaskTracker.java:killOverflowingTasks
 & TaskTracker.java:markUnresponsiveTasks only put the tip in tasksToCleanup
 queue, they don't update the runningJobs
In-Reply-To: <5740798.1165343781034.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-782?page=all ]

Arun C Murthy updated HADOOP-782:
---------------------------------

               Status: Patch Available  (was: Open)
    Affects Version/s: 0.9.1

> TaskTracker.java:killOverflowingTasks & TaskTracker.java:markUnresponsiveTasks only put the tip in tasksToCleanup queue, they don't update the runningJobs
> ----------------------------------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-782
>                 URL: http://issues.apache.org/jira/browse/HADOOP-782
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-782_1_20061209.patch
>
>
> Both killOverflowingTasks and markUnresponsiveTasks only put the tip in 'tasksToCleanup' queue, they should also call 'removeTaskFromJob' to update the 'runningJobs' map to reflect the fact that the task is no longer running. Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec  9 19:16:44 2006
Return-Path: 
 <hadoop-dev-return-5848-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57185 invoked from network); 9 Dec 2006 19:16:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2006 19:16:44 -0000
Received: (qmail 41075 invoked by uid 500); 9 Dec 2006 19:16:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41048 invoked by uid 500); 9 Dec 2006 19:16:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41039 invoked by uid 99); 9 Dec 2006 19:16:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 11:16:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 11:16:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 573207142FB
	for <hadoop-dev@lucene.apache.org>; Sat,  9 Dec 2006 11:16:22 -0800 (PST)
Message-ID: <14302626.1165691782354.JavaMail.jira@brutus>
Date: Sat, 9 Dec 2006 11:16:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-782)
 TaskTracker.java:killOverflowingTasks &
 TaskTracker.java:markUnresponsiveTasks only put the tip in tasksToCleanup
 queue, they don't update the runningJobs
In-Reply-To: <5740798.1165343781034.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-782?page=comments#action_12457096 ] 
            
Hadoop QA commented on HADOOP-782:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346834/HADOOP-782_1_20061209.patch applied and successfully tested against trunk revision r483772

> TaskTracker.java:killOverflowingTasks & TaskTracker.java:markUnresponsiveTasks only put the tip in tasksToCleanup queue, they don't update the runningJobs
> ----------------------------------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-782
>                 URL: http://issues.apache.org/jira/browse/HADOOP-782
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-782_1_20061209.patch
>
>
> Both killOverflowingTasks and markUnresponsiveTasks only put the tip in 'tasksToCleanup' queue, they should also call 'removeTaskFromJob' to update the 'runningJobs' map to reflect the fact that the task is no longer running. Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Dec 10 00:16:11 2006
Return-Path: 
 <hadoop-dev-return-5849-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16790 invoked from network); 10 Dec 2006 00:16:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2006 00:16:11 -0000
Received: (qmail 58825 invoked by uid 500); 10 Dec 2006 00:16:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58588 invoked by uid 500); 10 Dec 2006 00:16:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58574 invoked by uid 99); 10 Dec 2006 00:16:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 16:16:17 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_ID,NO_REAL_NAME,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received: from [140.211.11.75] (HELO lucene.zones.apache.org) (140.211.11.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 16:16:08 -0800
Received: from lucene.zones.apache.org (localhost [127.0.0.1])
	by lucene.zones.apache.org (8.13.7+Sun/8.13.7) with SMTP id kBA0FlXh015015
	for <hadoop-dev@lucene.apache.org>; Sun, 10 Dec 2006 00:15:48 GMT
Message-Id: <200612100015.kBA0FlXh015015@lucene.zones.apache.org>
Date: Sun, 10 Dec 2006 00:15:47 +0000
Subject: Hadoop nightly build failure
From: hadoop-dev@lucene.apache.org
To: hadoop-dev@lucene.apache.org
X-Mailer: org.apache.tools.mail.MailMessage (ant.apache.org)
X-Virus-Checked: Checked by ClamAV on apache.org


init:
    [mkdir] Created dir: /tmp/hadoop-nightly/build
    [mkdir] Created dir: /tmp/hadoop-nightly/build/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/src
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/task/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/job/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/dfs/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/datanode/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/examples
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/testjar
     [copy] Copying 6 files to /tmp/hadoop-nightly/build/webapps
     [copy] Copying 4 files to /tmp/hadoop-nightly/conf
     [copy] Copying /tmp/hadoop-nightly/conf/slaves.template to /tmp/hadoop-nightly/conf/slaves
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-site.xml.template to /tmp/hadoop-nightly/conf/hadoop-site.xml
     [copy] Copying /tmp/hadoop-nightly/conf/mapred-default.xml.template to /tmp/hadoop-nightly/conf/mapred-default.xml
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-env.sh.template to /tmp/hadoop-nightly/conf/hadoop-env.sh
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: whoami: not found

record-parser:

compile-core-classes:
    [javac] Compiling 259 source files to /tmp/hadoop-nightly/build/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-native:

compile-core:

compile-examples:
    [javac] Compiling 7 source files to /tmp/hadoop-nightly/build/examples
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-test:
    [javac] Compiling 66 source files to /tmp/hadoop-nightly/build/test/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] Compiling 1 source file to /tmp/hadoop-nightly/build/test/testjar
      [jar] Building jar: /tmp/hadoop-nightly/build/test/testjar/testjob.jar
      [jar] Building jar: /tmp/hadoop-nightly/build/hadoop-nightly-test.jar
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache

test-core:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/data
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/logs
    [junit] Running org.apache.hadoop.conf.TestConfiguration
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.888 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSMkdirs
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 9.468 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSShell
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 11.317 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSShellGenericOptions
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 12.237 sec
    [junit] Running org.apache.hadoop.dfs.TestFileCorruption
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 7.541 sec
    [junit] Running org.apache.hadoop.dfs.TestFsck
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 8.65 sec
    [junit] Running org.apache.hadoop.dfs.TestLocalDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 8.001 sec
    [junit] Running org.apache.hadoop.dfs.TestPread
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 8.664 sec
    [junit] Running org.apache.hadoop.dfs.TestReplication
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 24.326 sec
    [junit] Running org.apache.hadoop.dfs.TestRestartDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 14.365 sec
    [junit] Running org.apache.hadoop.dfs.TestSeekBug
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 8.461 sec
    [junit] Running org.apache.hadoop.dfs.TestSmallBlock
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 7.992 sec
    [junit] Running org.apache.hadoop.fs.TestCopyFiles
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 29.184 sec
    [junit] Running org.apache.hadoop.fs.TestDFSIO
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 7.044 sec
    [junit] Running org.apache.hadoop.fs.TestFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 7.204 sec
    [junit] Running org.apache.hadoop.fs.TestGlobPaths
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 6.122 sec
    [junit] Running org.apache.hadoop.fs.TestLocalFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.292 sec
    [junit] Running org.apache.hadoop.fs.TestPath
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.023 sec
    [junit] Running org.apache.hadoop.io.TestArrayFile
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 3.565 sec
    [junit] Running org.apache.hadoop.io.TestBytesWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.017 sec
    [junit] Running org.apache.hadoop.io.TestMD5Hash
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.354 sec
    [junit] Running org.apache.hadoop.io.TestSequenceFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 19.114 sec
    [junit] Running org.apache.hadoop.io.TestSetFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.51 sec
    [junit] Running org.apache.hadoop.io.TestText
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 1.002 sec
    [junit] Running org.apache.hadoop.io.TestTextNonUTF8
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.019 sec
    [junit] Running org.apache.hadoop.io.TestUTF8
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.171 sec
    [junit] Running org.apache.hadoop.io.TestVersionedWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.028 sec
    [junit] Running org.apache.hadoop.io.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.012 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodec
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 2.173 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodecFactory
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.366 sec
    [junit] Running org.apache.hadoop.ipc.TestIPC
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.583 sec
    [junit] Running org.apache.hadoop.ipc.TestRPC
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.167 sec
    [junit] Running org.apache.hadoop.mapred.TestEmptyJobWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 12.267 sec
    [junit] Running org.apache.hadoop.mapred.TestMapRed
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 12.941 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRBringup
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.875 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRClasspath
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 345,546.849 sec

BUILD FAILED
/tmp/hadoop-nightly/build.xml:370: Could not delete temporary properties file.

Total time: 5,764 minutes 1 second



From MAILER-DAEMON Mon Dec 11 13:32:03 2006
Return-Path: 
 <hadoop-dev-return-5850-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19592 invoked from network); 11 Dec 2006 13:32:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 13:32:03 -0000
Received: (qmail 72087 invoked by uid 500); 11 Dec 2006 13:32:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72048 invoked by uid 500); 11 Dec 2006 13:32:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72032 invoked by uid 99); 11 Dec 2006 13:32:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 05:32:06 -0800
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 05:31:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 59190714313
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 05:31:29 -0800 (PST)
Message-ID: <19936938.1165843889292.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 05:31:29 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12457340 ] 
            
Sanjay Dahiya commented on HADOOP-619:
--------------------------------------

thanks Doug for the review. 

For using InputFormatBase for validating and expanding globs, i think it would be a good idea to change the signature of InputFormatBase.areValidInputDirectories() to return a list of valid Paths as part of this patch itself. If some Path is found to be invalid, that will cause the job to fail it should throw InvalidArgumentException. 
This will prevent the glob expansion to happen twice, once on job client end ( InputFormatBase.areValidInputDirectories() ) and then on the jobtracker end while assigning splits ( InputFormatBase.listPaths() ) 

areValidInputDirectories a public method in InputFormat and in hadoop it's used only in JobClient. Otherwise we will need to expand the globs twice/

Does this sound reasonable?

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 15:47:43 2006
Return-Path: 
 <hadoop-dev-return-5851-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83779 invoked from network); 11 Dec 2006 15:47:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 15:47:43 -0000
Received: (qmail 73874 invoked by uid 500); 11 Dec 2006 15:47:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73853 invoked by uid 500); 11 Dec 2006 15:47:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73844 invoked by uid 99); 11 Dec 2006 15:47:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 07:47:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 07:47:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1919D7142FD
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 07:47:21 -0800 (PST)
Message-ID: <15932768.1165852041100.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 07:47:21 -0800 (PST)
From: "Alejandro Abdelnur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-811) Patch to support multi-threaded
 MapRunnable
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Patch to support multi-threaded MapRunnable
-------------------------------------------

                 Key: HADOOP-811
                 URL: http://issues.apache.org/jira/browse/HADOOP-811
             Project: Hadoop
          Issue Type: New Feature
          Components: mapred
    Affects Versions: 0.9.1
         Environment: all
            Reporter: Alejandro Abdelnur


The MapRunner calls Mapper.map in a serialized fashion.

This is suitable for CPU/memory bound operations.

However, when doing IO bound operations this serialization affects the throughput significantly.

In order to support IO bound operations more efficiently I've implemented a multithreaded MapRunnable.

Following is the implementation of this MapRunnable, MultithreadedMapRunner.

I've only had to modify on method in the existing code (in the Task class) to avoid data corruption in the reporter.

Index: Task.java
===================================================================
--- Task.java   (revision 485492)
+++ Task.java   (working copy)
@@ -153,9 +153,11 @@
   public Reporter getReporter(final TaskUmbilicalProtocol umbilical,
                               final Progress progress) throws IOException {
     return new Reporter() {
-        public void setStatus(String status) throws IOException {
-          progress.setStatus(status);
-          progress();
+        public void setStatus(String status) throws IOException {
+          synchronized (this) {
+            progress.setStatus(status);
+            progress();
+          }
         }
         public void progress() throws IOException {
             reportProgress(umbilical);

-----------------------------------------------------------
MultithreadedMapRunner.java

package org.apache.hadoop.mapred;

import org.apache.hadoop.util.ReflectionUtils;
import org.apache.hadoop.io.WritableComparable;
import org.apache.hadoop.io.Writable;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

import java.io.IOException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

/**
 * Multithreaded implementation for @link org.apache.hadoop.mapred.MapRunnable.
 * <p>
 * It can be used instead of the default implementation,
 * @link org.apache.hadoop.mapred.MapRunner, when the Map operation is not CPU
 * bound in order to improve throughput.
 * <p>
 * Map implementations using this MapRunnable must be thread-safe.
 * <p>
 * The Map-Reduce job has to be configured to use this MapRunnable class (using
 * the <b>mapred.map.runner.class</b> property) and
 * the number of thread the thread-pool can use (using the
 * <b>mapred.map.multithreadedrunner.threads</b> property).
 * <p>
 *
 * @author Alejandro Abdelnur
 */
public class MultithreadedMapRunner implements MapRunnable {
  private static final Log LOG =
      LogFactory.getLog(MultithreadedMapRunner.class.getName());

  private JobConf job;
  private Mapper mapper;
  private ExecutorService executorService;
  private IOException ioException;

  public void configure(JobConf job) {
    int numberOfThreads =
        job.getInt("mapred.map.multithreadedrunner.threads", 10);
    if (LOG.isDebugEnabled()) {
      LOG.debug("Configuring job " + job.getJobName() +
          " to use " + numberOfThreads + " threads" );
    }

    this.job = job;
    this.mapper = (Mapper)ReflectionUtils.newInstance(job.getMapperClass(),
                                                      job);

    // Creating a threadpool of the configured size to execute the Mapper
    // map method in parallel.
    executorService = Executors.newFixedThreadPool(numberOfThreads);
  }

  public void run(RecordReader input, OutputCollector output,
                  Reporter reporter)
    throws IOException {
    try {
      // allocate key & value instances these objects will not be reused
      // because execution of Mapper.map is not serialized.
      WritableComparable key = input.createKey();
      Writable value = input.createValue();

      while (input.next(key, value)) {

        // Run Mapper.map execution asynchronously in a separate thread.
        // If threads are not available from the thread-pool this method
        // will block until there is a thread available.
        executorService.execute(
            new MTMapperRunable(key, value, output, reporter));

        // Checking if a Mapper.map within a Runnable has generated an
        // IOException. If so we rethrow it to force an abort of the Map
        // operation thus keeping the semantics of the default
        // implementation.
        if (ioException != null) {
          throw ioException;
        }

        // Allocate new key & value instances as mapper is running in parallel
        key = input.createKey();
        value = input.createValue();
      }

      if (LOG.isDebugEnabled()) {
        LOG.debug("Finished dispatching all Mappper.map calls, job "
            + job.getJobName());
      }

      // Graceful shutdown of the Threadpool, it will let all scheduled
      // Runnables to end.
      executorService.shutdown();

      try {

        // Now waiting for all Runnables to end.
        while (!executorService.awaitTermination(100, TimeUnit.MILLISECONDS)) {
          if (LOG.isDebugEnabled()) {
            LOG.debug("Awaiting all running Mappper.map calls to finish, job "
                + job.getJobName());
          }

          // Checking if a Mapper.map within a Runnable has generated an
          // IOException. If so we rethrow it to force an abort of the Map
          // operation thus keeping the semantics of the default
          // implementation.
          // NOTE: while Mapper.map dispatching has concluded there are still
          // map calls in progress.
          if (ioException != null) {
            throw ioException;
          }
        }

        // Checking if a Mapper.map within a Runnable has generated an
        // IOException. If so we rethrow it to force an abort of the Map
        // operation thus keeping the semantics of the default
        // implementation.
        // NOTE: it could be that a map call has had an exception after the
        // call for awaitTermination() returing true. And edge case but it
        // could happen.
        if (ioException != null) {
          throw ioException;
        }
      }
      catch (IOException ioEx) {
        // Forcing a shutdown of all thread of the threadpool and rethrowing
        // the IOException
        executorService.shutdownNow();
        throw ioEx;
      }
      catch (InterruptedException iEx) {
        throw new IOException(iEx.getMessage());
      }

    } finally {
        mapper.close();
    }
  }


  /**
   * Runnable to execute a single Mapper.map call from a forked thread.
   */
  private class MTMapperRunable implements Runnable {
    private WritableComparable key;
    private Writable value;
    private OutputCollector output;
    private Reporter reporter;

    /**
     * Collecting all required parameters to execute a Mapper.map call.
     * <p>
     *
     * @param key
     * @param value
     * @param output
     * @param reporter
     */
    public MTMapperRunable(WritableComparable key, Writable value,
        OutputCollector output, Reporter reporter) {
      this.key = key;
      this.value = value;
      this.output = output;
      this.reporter = reporter;
    }

    /**
     * Executes a Mapper.map call with the given Mapper and parameters.
     * <p>
     * This method is called from the thread-pool thread.
     *
     */
    public void run() {
      try {
        // map pair to output
        MultithreadedMapRunner.this.mapper.map(key, value, output, reporter);
      }
      catch (IOException ex) {
        // If there is an IOException during the call it is set in an instance
        // variable of the MultithreadedMapRunner from where it will be
        // rethrown.
        synchronized (MultithreadedMapRunner.this) {
          if (MultithreadedMapRunner.this.ioException == null) {
            MultithreadedMapRunner.this.ioException = ex;
          }
        }
      }
    }
  }

}




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 16:13:50 2006
Return-Path: 
 <hadoop-dev-return-5852-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96960 invoked from network); 11 Dec 2006 16:13:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 16:13:50 -0000
Received: (qmail 30209 invoked by uid 500); 11 Dec 2006 16:13:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30179 invoked by uid 500); 11 Dec 2006 16:13:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30159 invoked by uid 99); 11 Dec 2006 16:13:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 08:13:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 08:13:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 466237142FD
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 08:13:22 -0800 (PST)
Message-ID: <21645554.1165853602285.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 08:13:22 -0800 (PST)
From: "Alejandro Abdelnur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-811) Patch to support multi-threaded
 MapRunnable
In-Reply-To: <15932768.1165852041100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-811?page=all ]

Alejandro Abdelnur updated HADOOP-811:
--------------------------------------

    Attachment: MultithreadedMapRunner.java

Attachement for the MultithreadedMapRunner class

> Patch to support multi-threaded MapRunnable
> -------------------------------------------
>
>                 Key: HADOOP-811
>                 URL: http://issues.apache.org/jira/browse/HADOOP-811
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.9.1
>         Environment: all
>            Reporter: Alejandro Abdelnur
>         Attachments: MultithreadedMapRunner.java
>
>
> The MapRunner calls Mapper.map in a serialized fashion.
> This is suitable for CPU/memory bound operations.
> However, when doing IO bound operations this serialization affects the throughput significantly.
> In order to support IO bound operations more efficiently I've implemented a multithreaded MapRunnable.
> Following is the implementation of this MapRunnable, MultithreadedMapRunner.
> I've only had to modify on method in the existing code (in the Task class) to avoid data corruption in the reporter.
> Index: Task.java
> ===================================================================
> --- Task.java   (revision 485492)
> +++ Task.java   (working copy)
> @@ -153,9 +153,11 @@
>    public Reporter getReporter(final TaskUmbilicalProtocol umbilical,
>                                final Progress progress) throws IOException {
>      return new Reporter() {
> -        public void setStatus(String status) throws IOException {
> -          progress.setStatus(status);
> -          progress();
> +        public void setStatus(String status) throws IOException {
> +          synchronized (this) {
> +            progress.setStatus(status);
> +            progress();
> +          }
>          }
>          public void progress() throws IOException {
>              reportProgress(umbilical);
> -----------------------------------------------------------
> MultithreadedMapRunner.java
> package org.apache.hadoop.mapred;
> import org.apache.hadoop.util.ReflectionUtils;
> import org.apache.hadoop.io.WritableComparable;
> import org.apache.hadoop.io.Writable;
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
> import java.io.IOException;
> import java.util.concurrent.ExecutorService;
> import java.util.concurrent.Executors;
> import java.util.concurrent.TimeUnit;
> /**
>  * Multithreaded implementation for @link org.apache.hadoop.mapred.MapRunnable.
>  * <p>
>  * It can be used instead of the default implementation,
>  * @link org.apache.hadoop.mapred.MapRunner, when the Map operation is not CPU
>  * bound in order to improve throughput.
>  * <p>
>  * Map implementations using this MapRunnable must be thread-safe.
>  * <p>
>  * The Map-Reduce job has to be configured to use this MapRunnable class (using
>  * the <b>mapred.map.runner.class</b> property) and
>  * the number of thread the thread-pool can use (using the
>  * <b>mapred.map.multithreadedrunner.threads</b> property).
>  * <p>
>  *
>  * @author Alejandro Abdelnur
>  */
> public class MultithreadedMapRunner implements MapRunnable {
>   private static final Log LOG =
>       LogFactory.getLog(MultithreadedMapRunner.class.getName());
>   private JobConf job;
>   private Mapper mapper;
>   private ExecutorService executorService;
>   private IOException ioException;
>   public void configure(JobConf job) {
>     int numberOfThreads =
>         job.getInt("mapred.map.multithreadedrunner.threads", 10);
>     if (LOG.isDebugEnabled()) {
>       LOG.debug("Configuring job " + job.getJobName() +
>           " to use " + numberOfThreads + " threads" );
>     }
>     this.job = job;
>     this.mapper = (Mapper)ReflectionUtils.newInstance(job.getMapperClass(),
>                                                       job);
>     // Creating a threadpool of the configured size to execute the Mapper
>     // map method in parallel.
>     executorService = Executors.newFixedThreadPool(numberOfThreads);
>   }
>   public void run(RecordReader input, OutputCollector output,
>                   Reporter reporter)
>     throws IOException {
>     try {
>       // allocate key & value instances these objects will not be reused
>       // because execution of Mapper.map is not serialized.
>       WritableComparable key = input.createKey();
>       Writable value = input.createValue();
>       while (input.next(key, value)) {
>         // Run Mapper.map execution asynchronously in a separate thread.
>         // If threads are not available from the thread-pool this method
>         // will block until there is a thread available.
>         executorService.execute(
>             new MTMapperRunable(key, value, output, reporter));
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         if (ioException != null) {
>           throw ioException;
>         }
>         // Allocate new key & value instances as mapper is running in parallel
>         key = input.createKey();
>         value = input.createValue();
>       }
>       if (LOG.isDebugEnabled()) {
>         LOG.debug("Finished dispatching all Mappper.map calls, job "
>             + job.getJobName());
>       }
>       // Graceful shutdown of the Threadpool, it will let all scheduled
>       // Runnables to end.
>       executorService.shutdown();
>       try {
>         // Now waiting for all Runnables to end.
>         while (!executorService.awaitTermination(100, TimeUnit.MILLISECONDS)) {
>           if (LOG.isDebugEnabled()) {
>             LOG.debug("Awaiting all running Mappper.map calls to finish, job "
>                 + job.getJobName());
>           }
>           // Checking if a Mapper.map within a Runnable has generated an
>           // IOException. If so we rethrow it to force an abort of the Map
>           // operation thus keeping the semantics of the default
>           // implementation.
>           // NOTE: while Mapper.map dispatching has concluded there are still
>           // map calls in progress.
>           if (ioException != null) {
>             throw ioException;
>           }
>         }
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         // NOTE: it could be that a map call has had an exception after the
>         // call for awaitTermination() returing true. And edge case but it
>         // could happen.
>         if (ioException != null) {
>           throw ioException;
>         }
>       }
>       catch (IOException ioEx) {
>         // Forcing a shutdown of all thread of the threadpool and rethrowing
>         // the IOException
>         executorService.shutdownNow();
>         throw ioEx;
>       }
>       catch (InterruptedException iEx) {
>         throw new IOException(iEx.getMessage());
>       }
>     } finally {
>         mapper.close();
>     }
>   }
>   /**
>    * Runnable to execute a single Mapper.map call from a forked thread.
>    */
>   private class MTMapperRunable implements Runnable {
>     private WritableComparable key;
>     private Writable value;
>     private OutputCollector output;
>     private Reporter reporter;
>     /**
>      * Collecting all required parameters to execute a Mapper.map call.
>      * <p>
>      *
>      * @param key
>      * @param value
>      * @param output
>      * @param reporter
>      */
>     public MTMapperRunable(WritableComparable key, Writable value,
>         OutputCollector output, Reporter reporter) {
>       this.key = key;
>       this.value = value;
>       this.output = output;
>       this.reporter = reporter;
>     }
>     /**
>      * Executes a Mapper.map call with the given Mapper and parameters.
>      * <p>
>      * This method is called from the thread-pool thread.
>      *
>      */
>     public void run() {
>       try {
>         // map pair to output
>         MultithreadedMapRunner.this.mapper.map(key, value, output, reporter);
>       }
>       catch (IOException ex) {
>         // If there is an IOException during the call it is set in an instance
>         // variable of the MultithreadedMapRunner from where it will be
>         // rethrown.
>         synchronized (MultithreadedMapRunner.this) {
>           if (MultithreadedMapRunner.this.ioException == null) {
>             MultithreadedMapRunner.this.ioException = ex;
>           }
>         }
>       }
>     }
>   }
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 16:59:49 2006
Return-Path: 
 <hadoop-dev-return-5853-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22091 invoked from network); 11 Dec 2006 16:59:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 16:59:49 -0000
Received: (qmail 12078 invoked by uid 500); 11 Dec 2006 16:59:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12020 invoked by uid 500); 11 Dec 2006 16:59:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12005 invoked by uid 99); 11 Dec 2006 16:59:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 08:59:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 08:59:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 46B12714057
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 08:59:22 -0800 (PST)
Message-ID: <4925691.1165856362287.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 08:59:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-792) Invalid dfs -mv can trash your entire
 dfs
In-Reply-To: <7912715.1165469301076.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-792?page=all ]

dhruba borthakur updated HADOOP-792:
------------------------------------

    Status: Patch Available  (was: Open)

i am pretty sure that this bug cannot be reproduced in 0.9.0 release.

> Invalid dfs -mv can trash your entire dfs
> -----------------------------------------
>
>                 Key: HADOOP-792
>                 URL: http://issues.apache.org/jira/browse/HADOOP-792
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Chris Schneider
>         Attachments: renameerrorcode.patch
>
>
> If the target path of the dfs -mv command exists within the source path, the dfs becomes corrupt. For example:
> % hadoop dfs -mkdir target
> % hadoop dfs -mv / target
> I'm not certain whether this is reproducible in the current trunk, but I'd bet that it is.
> This problem successfully circumvented my own patch to make dfs -rm a little safer (see my email c.2006-08-30 to nutch-dev for details). I had been deleting old crawl directories from the DFS by copying their names and pasting them into my command buffer. At one point, I paused to do something else, copied some other text (which unfortunately began with a Java comment and included carriage returns), then went back to removing the crawl directories. I must not have pressed hard enough on the "c" key when I did my next copy, since when I pasted into the command buffer, hadoop immediately began executing a dfs -rm / command. No problem - I'm protected, because my patched dfs command is just going to try to move / to /trash (and fail), right?
> Wrong! Even though hadoop isn't really capable of such a move, it apparently tries hard enough to corrupt the namenode's DB.
> Thankfully, I ran into this problem at a relatively opportune time, when the contents of my dfs had little value.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 17:02:16 2006
Return-Path: 
 <hadoop-dev-return-5854-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26511 invoked from network); 11 Dec 2006 17:02:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 17:02:16 -0000
Received: (qmail 40829 invoked by uid 500); 11 Dec 2006 17:02:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40797 invoked by uid 500); 11 Dec 2006 17:02:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40780 invoked by uid 99); 11 Dec 2006 17:02:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 09:02:21 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A79B7714058
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 09:01:23 -0800 (PST)
Message-ID: <31322215.1165856483683.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 09:01:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-745) NameNode throws
 FileNotFoundException: Parent path does not exist on startup
In-Reply-To: <9757325.1164238741994.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-745?page=comments#action_12457412 ] 
            
dhruba borthakur commented on HADOOP-745:
-----------------------------------------

Another option (over and above fixing this bug) may be to create a /lost+found directory so that files that do not have parent directories can go into /lost+found.

> NameNode throws FileNotFoundException: Parent path does not exist on startup
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-745
>                 URL: http://issues.apache.org/jira/browse/HADOOP-745
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>
> (with credit to Christian)
> The following exception is reported by the namenode upon startup:
> 2006-11-22 12:18:17,713 ERROR org.apache.hadoop.dfs.NameNode:
> java.io.FileNotFoundException: Parent path does not exist: /foo/bar
>         at org.apache.hadoop.dfs.FSDirectory$INode.addNode(FSDirectory.java:186)
>         at org.apache.hadoop.dfs.FSDirectory.unprotectedMkdir(FSDirectory.java:731)
>         at org.apache.hadoop.dfs.FSEditLog.loadFSEdits(FSEditLog.java:254)
>         at org.apache.hadoop.dfs.FSImage.loadFSImage(FSImage.java:191)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:321)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:230)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:145)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:137)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:585)
> Perhaps the 'mkdirs' section
>                INode inserted = unprotectedMkdir(cur);
>                if (inserted != null) {
>                    NameNode.stateChangeLog.debug("DIR* FSDirectory.mkdirs: "
>                         +"created directory "+cur );
>                    fsImage.getEditLog().logMkDir( inserted );
> needs to be synchronized or the unprotectedMkdir method needs to be changed
> to allow creating missing parent directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 17:13:04 2006
Return-Path: 
 <hadoop-dev-return-5855-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41665 invoked from network); 11 Dec 2006 17:13:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 17:13:04 -0000
Received: (qmail 36505 invoked by uid 500); 11 Dec 2006 17:12:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36447 invoked by uid 500); 11 Dec 2006 17:12:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36401 invoked by uid 99); 11 Dec 2006 17:12:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 09:12:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 09:12:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3DD2C714057
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 09:12:22 -0800 (PST)
Message-ID: <29245031.1165857142249.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 09:12:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-792) Invalid dfs -mv can trash your
 entire dfs
In-Reply-To: <7912715.1165469301076.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-792?page=comments#action_12457416 ] 
            
Hadoop QA commented on HADOOP-792:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346694/renameerrorcode.patch applied and successfully tested against trunk revision r483772

> Invalid dfs -mv can trash your entire dfs
> -----------------------------------------
>
>                 Key: HADOOP-792
>                 URL: http://issues.apache.org/jira/browse/HADOOP-792
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Chris Schneider
>         Attachments: renameerrorcode.patch
>
>
> If the target path of the dfs -mv command exists within the source path, the dfs becomes corrupt. For example:
> % hadoop dfs -mkdir target
> % hadoop dfs -mv / target
> I'm not certain whether this is reproducible in the current trunk, but I'd bet that it is.
> This problem successfully circumvented my own patch to make dfs -rm a little safer (see my email c.2006-08-30 to nutch-dev for details). I had been deleting old crawl directories from the DFS by copying their names and pasting them into my command buffer. At one point, I paused to do something else, copied some other text (which unfortunately began with a Java comment and included carriage returns), then went back to removing the crawl directories. I must not have pressed hard enough on the "c" key when I did my next copy, since when I pasted into the command buffer, hadoop immediately began executing a dfs -rm / command. No problem - I'm protected, because my patched dfs command is just going to try to move / to /trash (and fail), right?
> Wrong! Even though hadoop isn't really capable of such a move, it apparently tries hard enough to corrupt the namenode's DB.
> Thankfully, I ran into this problem at a relatively opportune time, when the contents of my dfs had little value.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 17:44:44 2006
Return-Path: 
 <hadoop-dev-return-5856-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9445 invoked from network); 11 Dec 2006 17:44:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 17:44:44 -0000
Received: (qmail 56524 invoked by uid 500); 11 Dec 2006 17:44:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56492 invoked by uid 500); 11 Dec 2006 17:44:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56483 invoked by uid 99); 11 Dec 2006 17:44:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 09:44:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 09:44:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6F6FD7140D2
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 09:44:22 -0800 (PST)
Message-ID: <30720156.1165859062453.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 09:44:22 -0800 (PST)
From: "Chris Schneider (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-792) Invalid dfs -mv can trash your
 entire dfs
In-Reply-To: <7912715.1165469301076.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-792?page=comments#action_12457423 ] 
            
Chris Schneider commented on HADOOP-792:
----------------------------------------

I'm satisfied (and look forward to my next opportunity to integrate the latest Hadoop source).

> Invalid dfs -mv can trash your entire dfs
> -----------------------------------------
>
>                 Key: HADOOP-792
>                 URL: http://issues.apache.org/jira/browse/HADOOP-792
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Chris Schneider
>         Attachments: renameerrorcode.patch
>
>
> If the target path of the dfs -mv command exists within the source path, the dfs becomes corrupt. For example:
> % hadoop dfs -mkdir target
> % hadoop dfs -mv / target
> I'm not certain whether this is reproducible in the current trunk, but I'd bet that it is.
> This problem successfully circumvented my own patch to make dfs -rm a little safer (see my email c.2006-08-30 to nutch-dev for details). I had been deleting old crawl directories from the DFS by copying their names and pasting them into my command buffer. At one point, I paused to do something else, copied some other text (which unfortunately began with a Java comment and included carriage returns), then went back to removing the crawl directories. I must not have pressed hard enough on the "c" key when I did my next copy, since when I pasted into the command buffer, hadoop immediately began executing a dfs -rm / command. No problem - I'm protected, because my patched dfs command is just going to try to move / to /trash (and fail), right?
> Wrong! Even though hadoop isn't really capable of such a move, it apparently tries hard enough to corrupt the namenode's DB.
> Thankfully, I ran into this problem at a relatively opportune time, when the contents of my dfs had little value.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 18:32:50 2006
Return-Path: 
 <hadoop-dev-return-5857-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95616 invoked from network); 11 Dec 2006 18:32:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 18:32:50 -0000
Received: (qmail 44508 invoked by uid 500); 11 Dec 2006 18:32:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44479 invoked by uid 500); 11 Dec 2006 18:32:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44470 invoked by uid 99); 11 Dec 2006 18:32:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 10:32:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 10:32:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 50D7D7141A2
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 10:32:28 -0800 (PST)
Message-ID: <1861216.1165861948328.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 10:32:28 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12457431 ] 
            
Doug Cutting commented on HADOOP-619:
-------------------------------------

> change the signature of InputFormatBase.areValidInputDirectories() to return a list of valid Paths

I don't think we should do this, since it assumes that inputs are always representable by Paths.  The long-term goal is that inputs and outputs are only assumed to be (1) specifiable in a Configuration and (2) representable as a serializeable Split implementation.  In particular, we should not assume that they are FileSystem files, and hence should not pass Path in a primitive MapReduce API.  Thus areValidInputDirectories(Path[]) should evolve into hasValidInput(JobConf), but not as a part of this patch.

> Otherwise we will need to expand the globs twice

For now, I think the glob can happen twice: once when checking the input in the JobClient, and once on the JobTracker when constructing splits.  Longer term we may wish to try to optmize this, but I'm not convinced that's required.  If it is required, then perhaps, instead of hasValidInput(JobConf) we could have a prepareInput(JobConf) method that validates inputs and is permitted to alter the job.  But we shouldn't modify the InputFormat API for this issue.  Owen's already working on that separately.

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 18:41:45 2006
Return-Path: 
 <hadoop-dev-return-5858-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28914 invoked from network); 11 Dec 2006 18:41:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 18:41:45 -0000
Received: (qmail 62757 invoked by uid 500); 11 Dec 2006 18:41:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62731 invoked by uid 500); 11 Dec 2006 18:41:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62722 invoked by uid 99); 11 Dec 2006 18:41:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 10:41:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 10:41:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C8D27714058
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 10:41:23 -0800 (PST)
Message-ID: <23041993.1165862483820.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 10:41:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12457433 ] 
            
Owen O'Malley commented on HADOOP-619:
--------------------------------------

Actually, I'd prefer to have the globbing happen and stay internal to the InputFormat, since it may not make sense for all InputFormat's. How about this interface for validating input directories:

InputFormat:
  void hasValidInput(JobConf) throws IOException, InvalidInputException;

public class InvalidInputException extends IOException {
  List<IOException> getProblems();
}

Although this will cause the system to glob twice (once on job client and once on job tracker), I think in the medium term that the job client should generate the splits and write them to the system directory parallel to the job.xml. After that, the glob will only happen once.

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 18:54:59 2006
Return-Path: 
 <hadoop-dev-return-5859-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45030 invoked from network); 11 Dec 2006 18:54:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 18:54:59 -0000
Received: (qmail 85761 invoked by uid 500); 11 Dec 2006 18:54:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85736 invoked by uid 500); 11 Dec 2006 18:54:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85724 invoked by uid 99); 11 Dec 2006 18:54:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 10:54:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 10:54:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 766127140D2
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 10:54:22 -0800 (PST)
Message-ID: <15419606.1165863262482.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 10:54:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-812) Make DfsPath a public class
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Make DfsPath a public class
---------------------------

                 Key: HADOOP-812
                 URL: http://issues.apache.org/jira/browse/HADOOP-812
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: dhruba borthakur


I would like to get the filesize of a particular HDFS file from an external program. This functionality is exported through the DfsPath class. I would like to make this class a public class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 18:56:43 2006
Return-Path: 
 <hadoop-dev-return-5860-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46332 invoked from network); 11 Dec 2006 18:56:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 18:56:43 -0000
Received: (qmail 92000 invoked by uid 500); 11 Dec 2006 18:56:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91980 invoked by uid 500); 11 Dec 2006 18:56:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91971 invoked by uid 99); 11 Dec 2006 18:56:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 10:56:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 10:56:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4D1097140D1
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 10:56:22 -0800 (PST)
Message-ID: <3217032.1165863382313.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 10:56:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-812) Make DfsPath a public class
In-Reply-To: <15419606.1165863262482.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-812?page=all ]

dhruba borthakur updated HADOOP-812:
------------------------------------

    Attachment: dfspathpublic.patch

> Make DfsPath a public class
> ---------------------------
>
>                 Key: HADOOP-812
>                 URL: http://issues.apache.org/jira/browse/HADOOP-812
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Attachments: dfspathpublic.patch
>
>
> I would like to get the filesize of a particular HDFS file from an external program. This functionality is exported through the DfsPath class. I would like to make this class a public class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 18:58:45 2006
Return-Path: 
 <hadoop-dev-return-5861-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64065 invoked from network); 11 Dec 2006 18:58:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 18:58:45 -0000
Received: (qmail 95318 invoked by uid 500); 11 Dec 2006 18:58:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95282 invoked by uid 500); 11 Dec 2006 18:58:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95252 invoked by uid 99); 11 Dec 2006 18:58:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 10:58:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 10:58:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 51ECD714058
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 10:58:22 -0800 (PST)
Message-ID: <15199416.1165863502333.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 10:58:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-812) Make DfsPath a public class
In-Reply-To: <15419606.1165863262482.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-812?page=all ]

dhruba borthakur updated HADOOP-812:
------------------------------------

      Status: Patch Available  (was: Open)
    Assignee: dhruba borthakur

Made DfsPath a public class.

> Make DfsPath a public class
> ---------------------------
>
>                 Key: HADOOP-812
>                 URL: http://issues.apache.org/jira/browse/HADOOP-812
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: dfspathpublic.patch
>
>
> I would like to get the filesize of a particular HDFS file from an external program. This functionality is exported through the DfsPath class. I would like to make this class a public class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 18:58:46 2006
Return-Path: 
 <hadoop-dev-return-5862-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64409 invoked from network); 11 Dec 2006 18:58:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 18:58:46 -0000
Received: (qmail 95707 invoked by uid 500); 11 Dec 2006 18:58:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95687 invoked by uid 500); 11 Dec 2006 18:58:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95678 invoked by uid 99); 11 Dec 2006 18:58:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 10:58:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 10:58:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1C4E87140D2
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 10:58:25 -0800 (PST)
Message-ID: <17065651.1165863505113.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 10:58:25 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12457439 ] 
            
Doug Cutting commented on HADOOP-619:
-------------------------------------

> I'd prefer to have the globbing happen and stay internal to the InputFormat

+1

>   void hasValidInput(JobConf) throws IOException, InvalidInputException;

If it returns void, then it ought to be named 'validateInput'.  But otherwise, this looks fine.

I still don't think we should try to address this change in this issue.  Adding globbing does not need to change the InputFormat API.  This discussion should be a part of HADOOP-372 and HADOOP-451, the grand job input interface restructuring.

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 19:02:44 2006
Return-Path: 
 <hadoop-dev-return-5863-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83969 invoked from network); 11 Dec 2006 19:02:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 19:02:44 -0000
Received: (qmail 7101 invoked by uid 500); 11 Dec 2006 19:02:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6927 invoked by uid 500); 11 Dec 2006 19:02:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6918 invoked by uid 99); 11 Dec 2006 19:02:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:02:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:02:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 55BB67140D1
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 11:02:22 -0800 (PST)
Message-ID: <2362035.1165863742348.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 11:02:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-812) Make DfsPath a public class
In-Reply-To: <15419606.1165863262482.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-812?page=comments#action_12457440 ] 
            
Doug Cutting commented on HADOOP-812:
-------------------------------------

Why can't you simply use fs.getLength(Path)?  The DistributedFileSystem implementation, when passed a DFSPath, returns the cached length.

> Make DfsPath a public class
> ---------------------------
>
>                 Key: HADOOP-812
>                 URL: http://issues.apache.org/jira/browse/HADOOP-812
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: dfspathpublic.patch
>
>
> I would like to get the filesize of a particular HDFS file from an external program. This functionality is exported through the DfsPath class. I would like to make this class a public class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 19:12:44 2006
Return-Path: 
 <hadoop-dev-return-5864-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33503 invoked from network); 11 Dec 2006 19:12:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 19:12:44 -0000
Received: (qmail 31564 invoked by uid 500); 11 Dec 2006 19:12:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31538 invoked by uid 500); 11 Dec 2006 19:12:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31524 invoked by uid 99); 11 Dec 2006 19:12:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:12:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:12:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6FA577140D1
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 11:12:22 -0800 (PST)
Message-ID: <15294017.1165864342454.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 11:12:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-812) Make DfsPath a public class
In-Reply-To: <15419606.1165863262482.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-812?page=comments#action_12457442 ] 
            
Hadoop QA commented on HADOOP-812:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346931/dfspathpublic.patch applied and successfully tested against trunk revision r483772

> Make DfsPath a public class
> ---------------------------
>
>                 Key: HADOOP-812
>                 URL: http://issues.apache.org/jira/browse/HADOOP-812
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: dfspathpublic.patch
>
>
> I would like to get the filesize of a particular HDFS file from an external program. This functionality is exported through the DfsPath class. I would like to make this class a public class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 19:13:45 2006
Return-Path: 
 <hadoop-dev-return-5865-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42528 invoked from network); 11 Dec 2006 19:13:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 19:13:45 -0000
Received: (qmail 33178 invoked by uid 500); 11 Dec 2006 19:13:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33149 invoked by uid 500); 11 Dec 2006 19:13:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33140 invoked by uid 99); 11 Dec 2006 19:13:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:13:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [204.127.192.81] (HELO rwcrmhc11.comcast.net) (204.127.192.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:13:41 -0800
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc11) with ESMTP
          id <20061211191320m1100nrgeme>; Mon, 11 Dec 2006 19:13:20 +0000
Message-ID: <457DADD0.5050003@apache.org>
Date: Mon, 11 Dec 2006 11:13:20 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.8 (X11/20061117)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Java 6?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Has anyone tried Hadoop with Java 6 yet?

What new features might be useful to Hadoop?

Here are two that caught my eye:

http://java.sun.com/javase/6/docs/api/java/io/File.html#getFreeSpace()

http://java.sun.com/developer/technicalArticles/J2SE/security/#3

Doug

From MAILER-DAEMON Mon Dec 11 19:22:44 2006
Return-Path: 
 <hadoop-dev-return-5866-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78816 invoked from network); 11 Dec 2006 19:22:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 19:22:44 -0000
Received: (qmail 54669 invoked by uid 500); 11 Dec 2006 19:22:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54646 invoked by uid 500); 11 Dec 2006 19:22:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54637 invoked by uid 99); 11 Dec 2006 19:22:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:22:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:22:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 77E667140D1
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 11:22:22 -0800 (PST)
Message-ID: <403102.1165864942488.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 11:22:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-812) Make DfsPath a public class
In-Reply-To: <15419606.1165863262482.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-812?page=all ]

dhruba borthakur updated HADOOP-812:
------------------------------------

    Status: Open  (was: Patch Available)

Hi Doug, 

You are right. I will adopt your suggestion. Shall I mark this defect as 'resolved"? 

thanks,
dhruba

> Make DfsPath a public class
> ---------------------------
>
>                 Key: HADOOP-812
>                 URL: http://issues.apache.org/jira/browse/HADOOP-812
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: dfspathpublic.patch
>
>
> I would like to get the filesize of a particular HDFS file from an external program. This functionality is exported through the DfsPath class. I would like to make this class a public class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 19:24:45 2006
Return-Path: 
 <hadoop-dev-return-5867-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79469 invoked from network); 11 Dec 2006 19:24:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 19:24:45 -0000
Received: (qmail 57886 invoked by uid 500); 11 Dec 2006 19:24:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57864 invoked by uid 500); 11 Dec 2006 19:24:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57855 invoked by uid 99); 11 Dec 2006 19:24:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:24:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:24:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C07157140D2
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 11:24:23 -0800 (PST)
Message-ID: <716234.1165865063785.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 11:24:23 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment: Hadoop-619_1.patch

Updated patch, it moves all changes to InputFormatBase and doesnt change the API. Glob expansion is done twice as discussed before. 

thanks Doug, Owen for comments. 

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 19:26:58 2006
Return-Path: 
 <hadoop-dev-return-5868-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80242 invoked from network); 11 Dec 2006 19:26:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 19:26:58 -0000
Received: (qmail 65072 invoked by uid 500); 11 Dec 2006 19:26:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65038 invoked by uid 500); 11 Dec 2006 19:26:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65009 invoked by uid 99); 11 Dec 2006 19:26:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:26:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:26:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 56E997140D1
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 11:26:23 -0800 (PST)
Message-ID: <3031391.1165865183353.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 11:26:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-812) Make DfsPath a public class
In-Reply-To: <15419606.1165863262482.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-812?page=all ]

Doug Cutting resolved HADOOP-812.
---------------------------------

    Resolution: Won't Fix

> Make DfsPath a public class
> ---------------------------
>
>                 Key: HADOOP-812
>                 URL: http://issues.apache.org/jira/browse/HADOOP-812
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: dfspathpublic.patch
>
>
> I would like to get the filesize of a particular HDFS file from an external program. This functionality is exported through the DfsPath class. I would like to make this class a public class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 19:41:25 2006
Return-Path: 
 <hadoop-dev-return-5869-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31337 invoked from network); 11 Dec 2006 19:41:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 19:41:25 -0000
Received: (qmail 7876 invoked by uid 500); 11 Dec 2006 19:41:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7839 invoked by uid 500); 11 Dec 2006 19:41:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7830 invoked by uid 99); 11 Dec 2006 19:41:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:41:31 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.151.94.5] (HELO megs8.100mwh.com) (209.151.94.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:41:20 -0800
Received: from snv-global1.corp.yahoo.com ([216.145.49.15]
 helo=[172.21.147.26])
	by megs8.100mwh.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.52)
	id 1Gtr1H-0002aI-Cu
	for hadoop-dev@lucene.apache.org; Mon, 11 Dec 2006 12:40:59 -0700
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <457DADD0.5050003@apache.org>
References: <457DADD0.5050003@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D42E023E-BCCD-4E28-B68A-83FB15CBB9E8@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Owen O'Malley <owen@yahoo-inc.com>
Subject: Re: Java 6?
Date: Mon, 11 Dec 2006 11:40:56 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-AntiAbuse: This header was added to track abuse,
 please include it with any abuse report
X-AntiAbuse: Primary Hostname - megs8.100mwh.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - yahoo-inc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 11, 2006, at 11:13 AM, Doug Cutting wrote:

> Has anyone tried Hadoop with Java 6 yet?

A couple of months ago, I used java 6 with Hadoop to get better  
OutOfMemoryException information. It seemed to work fine.

-- Owen

From MAILER-DAEMON Mon Dec 11 19:47:10 2006
Return-Path: 
 <hadoop-dev-return-5870-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72981 invoked from network); 11 Dec 2006 19:47:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 19:47:10 -0000
Received: (qmail 21338 invoked by uid 500); 11 Dec 2006 19:47:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21305 invoked by uid 500); 11 Dec 2006 19:47:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21295 invoked by uid 99); 11 Dec 2006 19:47:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:47:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [204.127.192.85] (HELO rwcrmhc15.comcast.net) (204.127.192.85)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:47:05 -0800
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc15) with ESMTP
          id <20061211194644m1500spp8le>; Mon, 11 Dec 2006 19:46:44 +0000
Message-ID: <457DB5A4.7050508@apache.org>
Date: Mon, 11 Dec 2006 11:46:44 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.8 (X11/20061117)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: compression  benchmarks
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sami Siren gives kudos for Hadoop's native compression:

http://blog.foofactory.fi/2006/12/my-fellow-nutch-developer-andrzej.html

Now we just need to add support for LZO...

http://compression.ca/act/act-summary.html

LZO is a standard library on linux, so it's implementation can mostly 
mirror the zlib implementation.

Doug

From MAILER-DAEMON Mon Dec 11 21:05:46 2006
Return-Path: 
 <hadoop-dev-return-5871-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6031 invoked from network); 11 Dec 2006 21:05:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 21:05:46 -0000
Received: (qmail 31368 invoked by uid 500); 11 Dec 2006 21:05:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31339 invoked by uid 500); 11 Dec 2006 21:05:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31330 invoked by uid 99); 11 Dec 2006 21:05:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 13:05:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 13:05:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D407E71413D
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 13:05:23 -0800 (PST)
Message-ID: <25878504.1165871123865.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 13:05:23 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-673) the task execution environment should
 have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-673?page=all ]

Mahadev konar updated HADOOP-673:
---------------------------------

    Status: Patch Available  (was: Open)

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>         Attachments: cwd.patch, cwd_1.patch
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 21:11:44 2006
Return-Path: 
 <hadoop-dev-return-5872-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7941 invoked from network); 11 Dec 2006 21:11:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 21:11:44 -0000
Received: (qmail 41187 invoked by uid 500); 11 Dec 2006 21:11:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41163 invoked by uid 500); 11 Dec 2006 21:11:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41154 invoked by uid 99); 11 Dec 2006 21:11:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 13:11:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 13:11:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6139C7140F6
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 13:11:22 -0800 (PST)
Message-ID: <2789361.1165871482395.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 13:11:22 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-803?page=comments#action_12457475 ] 
            
Raghu Angadi commented on HADOOP-803:
-------------------------------------


TreeSet() there does not seem to be any method to get reference of an object that exists in the set.


> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 21:40:45 2006
Return-Path: 
 <hadoop-dev-return-5873-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18773 invoked from network); 11 Dec 2006 21:40:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 21:40:45 -0000
Received: (qmail 3941 invoked by uid 500); 11 Dec 2006 21:40:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3916 invoked by uid 500); 11 Dec 2006 21:40:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3907 invoked by uid 99); 11 Dec 2006 21:40:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 13:40:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 13:40:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CE0967140F6
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 13:40:23 -0800 (PST)
Message-ID: <4047669.1165873223840.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 13:40:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-673) the task execution environment
 should have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-673?page=comments#action_12457484 ] 
            
Hadoop QA commented on HADOOP-673:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346718/cwd_1.patch applied and successfully tested against trunk revision r483772

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>         Attachments: cwd.patch, cwd_1.patch
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 21:55:43 2006
Return-Path: 
 <hadoop-dev-return-5874-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23602 invoked from network); 11 Dec 2006 21:55:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 21:55:43 -0000
Received: (qmail 36571 invoked by uid 500); 11 Dec 2006 21:55:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36545 invoked by uid 500); 11 Dec 2006 21:55:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36536 invoked by uid 99); 11 Dec 2006 21:55:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 13:55:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 13:55:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 689007140F6
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 13:55:22 -0800 (PST)
Message-ID: <12258300.1165874122425.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 13:55:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-803?page=comments#action_12457486 ] 
            
Doug Cutting commented on HADOOP-803:
-------------------------------------

TreeSet wraps a TreeMap, so you might as well just use a TreeMap whose keys and values are identical, or somesuch.

> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 23:17:54 2006
Return-Path: 
 <hadoop-dev-return-5876-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55497 invoked from network); 11 Dec 2006 23:17:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 23:17:54 -0000
Received: (qmail 97685 invoked by uid 500); 11 Dec 2006 23:18:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97648 invoked by uid 500); 11 Dec 2006 23:18:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97632 invoked by uid 99); 11 Dec 2006 23:18:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 15:17:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 15:17:26 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6764C714147
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 15:16:25 -0800 (PST)
Message-ID: <25132066.1165878985420.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 15:16:25 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12457507 ] 
            
dhruba borthakur commented on HADOOP-227:
-----------------------------------------

The Backup Namenode Proposal
--------------------------------------------
The idea is to create a backup namenode, download the fsimage and the edits file
to the backup namenode, merge them into a single image and then upload the newly
created image into the primary namenode.

This approach has the following advantages:
    1. No additional memory or CPU requirement for the primary namenode.
    2. Good scalability, backup namenodes can be plugged into the network
       on demand.
    3. Address space separation of primary namenode and backup namenode, thus
       better fault tolerance.

The namenode when invoked with the "-backupmode" command line option functions as the backup namenode. No additional scripts needed. One can run the backup namenode and the primary namenode on the same physical machine.

The backup namenode downloads the fsimage and the edits from the primary namenode through a http-get message. The primary namenode rolls the edit file on disk, send starts logging new transactions into the new editlog file. The backup namenode merges the downloaded fsimage and edit into a new image file. It then uploads the new image file to the primary namenode. The primary namenode replaces the old fsimage and the old editlog with the new uploaded fsimage.


> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Milind Bhandarkar
>         Attachments: patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0
>
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 11 23:17:37 2006
Return-Path: 
 <hadoop-dev-return-5875-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55449 invoked from network); 11 Dec 2006 23:17:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 23:17:37 -0000
Received: (qmail 97233 invoked by uid 500); 11 Dec 2006 23:17:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97208 invoked by uid 500); 11 Dec 2006 23:17:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97194 invoked by uid 99); 11 Dec 2006 23:17:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 15:17:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 15:17:07 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9F576714168
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 15:16:29 -0800 (PST)
Message-ID: <17129777.1165878989650.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 15:16:29 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-227?page=all ]

dhruba borthakur reassigned HADOOP-227:
---------------------------------------

    Assignee: dhruba borthakur  (was: Milind Bhandarkar)

> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: dhruba borthakur
>         Attachments: patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0
>
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 01:38:46 2006
Return-Path: 
 <hadoop-dev-return-5877-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84079 invoked from network); 12 Dec 2006 01:38:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 01:38:46 -0000
Received: (qmail 92362 invoked by uid 500); 12 Dec 2006 01:38:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92326 invoked by uid 500); 12 Dec 2006 01:38:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92316 invoked by uid 99); 12 Dec 2006 01:38:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 17:38:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 17:38:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A2A1271413F
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 17:38:24 -0800 (PST)
Message-ID: <17576784.1165887504663.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 17:38:24 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12457540 ] 
            
Runping Qi commented on HADOOP-227:
-----------------------------------

I like this proposal. It is simple, clean, reliable.
We need a backup namenode anyway for a production deployment.


> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: dhruba borthakur
>         Attachments: patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0
>
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 04:10:43 2006
Return-Path: 
 <hadoop-dev-return-5878-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23861 invoked from network); 12 Dec 2006 04:10:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 04:10:43 -0000
Received: (qmail 59051 invoked by uid 500); 12 Dec 2006 04:10:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59028 invoked by uid 500); 12 Dec 2006 04:10:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59019 invoked by uid 99); 12 Dec 2006 04:10:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 20:10:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 20:10:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 35771714167
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 20:10:21 -0800 (PST)
Message-ID: <30843820.1165896621216.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 20:10:21 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-813) map tasks lost during sort
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

map tasks lost during sort
--------------------------

                 Key: HADOOP-813
                 URL: http://issues.apache.org/jira/browse/HADOOP-813
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.10.0
            Reporter: Owen O'Malley
         Assigned To: Devaraj Das
             Fix For: 0.10.0


On a 500 node cluster, I had a bunch of map tasks get "lost" because they failed to report progress for 10 minutes. They appear to be in the sort stage at the end of the map. I hypothesize that the patch for HADOOP-331 does not update the map's progress during the sort/merge. If the sort/merge takes more than 10 minutes, the task is lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 05:08:43 2006
Return-Path: 
 <hadoop-dev-return-5879-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35126 invoked from network); 12 Dec 2006 05:08:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 05:08:43 -0000
Received: (qmail 7392 invoked by uid 500); 12 Dec 2006 05:08:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7196 invoked by uid 500); 12 Dec 2006 05:08:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7185 invoked by uid 99); 12 Dec 2006 05:08:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 21:08:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 21:08:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0C41D71413F
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 21:08:21 -0800 (PST)
Message-ID: <7461200.1165900101047.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 21:08:21 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-814) Increase dfs scalability by optimizing
 locking on namenode.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Increase dfs scalability by optimizing locking on namenode.
-----------------------------------------------------------

                 Key: HADOOP-814
                 URL: http://issues.apache.org/jira/browse/HADOOP-814
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: dhruba borthakur
         Assigned To: dhruba borthakur


The current dfs namenode encounters locking bottlenecks when the number of datanodes is large. The namenode uses a single global lock to protect access to data structures. One key area is heartbeat processing. The lower the cost of processing a heartbeat, more the number of nodes HDFS can support.  A simple change to this current locking model can increase the scalability. Here are the details:

Case 1: Currently we have three locks, the global lock (on FSNamesystem), the heartbeat lock and the datanodeMap lock. The following function is called when a heartbeat is received by the Namenode

public synchronized FSNamesystem. gotHeartbeat() { ........ (A)
    synchronized (heartbeat) {                                        ........ (B)
      synchronized (datanodeMap) {                               ......... (C)
   ...
     }
}

In the above piece of code, statement (A) acquires the global-FSNamesystem-lock. This synchronization can be safely removed (remove updateStats too). This means that a heartbeat from the datanode can be processed without holding the FSnamesystem-global-lock.

Case 2: A following thread called the heartbeatCheck thread periodically traverses all known Datanodes to determine if any of them has timed out. It is of the following form:

void FSNamesystem.heartbeatCheck() {
            synchronized (this) {                                        ........... (D)
                        synchronized (heartbeats) {                .............(E) 
}

This thread acquires the global-FSNamesystem lock in Statement (D). This statement (D) can be removed. Instead the loop can check to see if any nodes are dead. If a dead node is found, only then it acquires the FSNamesystem-global-lock.

It is possible that fixing the above two cases will cause HDFS to scale to higher number of nodes.

 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 06:03:20 2006
Return-Path: 
 <hadoop-dev-return-5880-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47002 invoked from network); 12 Dec 2006 06:03:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 06:03:20 -0000
Received: (qmail 65329 invoked by uid 500); 12 Dec 2006 06:03:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65300 invoked by uid 500); 12 Dec 2006 06:03:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65291 invoked by uid 99); 12 Dec 2006 06:03:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 22:03:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 22:03:06 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1D5647141A2
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 22:02:25 -0800 (PST)
Message-ID: <17235799.1165903345117.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 22:02:25 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-775) If the tasktracker kills a task it
 cleans up the job directory as well
In-Reply-To: <16555140.1165027341051.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-775?page=all ]

Arun C Murthy reassigned HADOOP-775:
------------------------------------

    Assignee: Arun C Murthy  (was: Mahadev konar)

> If the tasktracker kills a task it cleans up the job directory as well
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-775
>                 URL: http://issues.apache.org/jira/browse/HADOOP-775
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>         Attachments: jobdirfix.patch
>
>
> If the tasktracker kills a task it will clean up the job directory as well. So if other tasks of the same job will later fail saying there is no job.xml or job.jar

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 06:05:01 2006
Return-Path: 
 <hadoop-dev-return-5881-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47179 invoked from network); 12 Dec 2006 06:05:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 06:05:01 -0000
Received: (qmail 68509 invoked by uid 500); 12 Dec 2006 06:05:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68478 invoked by uid 500); 12 Dec 2006 06:05:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68469 invoked by uid 99); 12 Dec 2006 06:05:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 22:05:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 22:04:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 256A97141A2
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 22:04:23 -0800 (PST)
Message-ID: <31914237.1165903463150.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 22:04:23 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-775) If the tasktracker kills a task it
 cleans up the job directory as well
In-Reply-To: <16555140.1165027341051.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-775?page=all ]

Arun C Murthy resolved HADOOP-775.
----------------------------------

    Resolution: Duplicate

Duplicate of HADOOP-737, fixed as a part of HADOOP-639

> If the tasktracker kills a task it cleans up the job directory as well
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-775
>                 URL: http://issues.apache.org/jira/browse/HADOOP-775
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>         Attachments: jobdirfix.patch
>
>
> If the tasktracker kills a task it will clean up the job directory as well. So if other tasks of the same job will later fail saying there is no job.xml or job.jar

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 06:05:05 2006
Return-Path: 
 <hadoop-dev-return-5882-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47224 invoked from network); 12 Dec 2006 06:05:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 06:05:05 -0000
Received: (qmail 68936 invoked by uid 500); 12 Dec 2006 06:05:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68908 invoked by uid 500); 12 Dec 2006 06:05:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68898 invoked by uid 99); 12 Dec 2006 06:05:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 22:05:12 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=SUBJ_FOR_ONLY
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 22:05:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 975277141A3
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 22:04:26 -0800 (PST)
Message-ID: <29717053.1165903466617.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 22:04:26 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-546) Task tracker doesnt generate job.xml
 in jobcache for some tasks ( possibly for only rescheduled tasks)
In-Reply-To: <19199550.1158662242615.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-546?page=all ]

Arun C Murthy reassigned HADOOP-546:
------------------------------------

    Assignee: Arun C Murthy

> Task tracker doesnt generate job.xml in jobcache for some tasks ( possibly for only rescheduled tasks)
> ------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-546
>                 URL: http://issues.apache.org/jira/browse/HADOOP-546
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Sanjay Dahiya
>         Assigned To: Arun C Murthy
>            Priority: Critical
>
> For many of the rescheduled tasks task tracker doesn't generate job.xml causing the task to fail. The exception appears in Job tracker logs and not in task tracker's logs. 
> possibly related to Hadoop-543
> 2006-09-19 01:10:37,064 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0001_m_022869_3: java.io.FileNotFoundException: .../hadoop/mapred/local/taskTracker/jobcache/job_0001/task_0001_m_022869_3/job.xml (No such file or directory)
>         at java.io.FileOutputStream.open(Native Method)
>         at java.io.FileOutputStream.<init>(FileOutputStream.java:179)
>         at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
>         at org.apache.hadoop.fs.LocalFileSystem$LocalFSFileOutputStream.<init>(LocalFileSystem.java:133)
>         at org.apache.hadoop.fs.LocalFileSystem.createRaw(LocalFileSystem.java:172)
>         at org.apache.hadoop.fs.LocalFileSystem.createRaw(LocalFileSystem.java:180)
>         at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:56)
>         at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:45)
>         at org.apache.hadoop.fs.FSDataOutputStream.<init>(FSDataOutputStream.java:146)
>         at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:270)
>         at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:177)
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.localizeTask(TaskTracker.java:810)
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.launchTask(TaskTracker.java:858)
>         at org.apache.hadoop.mapred.TaskTracker.launchTaskForJob(TaskTracker.java:282)
>         at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:275)
>         at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:669)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:486)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:689)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1290)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 06:06:47 2006
Return-Path: 
 <hadoop-dev-return-5883-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47633 invoked from network); 12 Dec 2006 06:06:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 06:06:47 -0000
Received: (qmail 70512 invoked by uid 500); 12 Dec 2006 06:06:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70477 invoked by uid 500); 12 Dec 2006 06:06:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70468 invoked by uid 99); 12 Dec 2006 06:06:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 22:06:54 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=SUBJ_FOR_ONLY
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 22:06:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AD6987141C0
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 22:06:24 -0800 (PST)
Message-ID: <19495384.1165903584707.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 22:06:24 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-546) Task tracker doesnt generate job.xml
 in jobcache for some tasks ( possibly for only rescheduled tasks)
In-Reply-To: <19199550.1158662242615.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-546?page=all ]

Arun C Murthy resolved HADOOP-546.
----------------------------------

    Fix Version/s: 0.10.0
       Resolution: Fixed

Fixed as a part of HADOOP-639

> Task tracker doesnt generate job.xml in jobcache for some tasks ( possibly for only rescheduled tasks)
> ------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-546
>                 URL: http://issues.apache.org/jira/browse/HADOOP-546
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Sanjay Dahiya
>         Assigned To: Arun C Murthy
>            Priority: Critical
>             Fix For: 0.10.0
>
>
> For many of the rescheduled tasks task tracker doesn't generate job.xml causing the task to fail. The exception appears in Job tracker logs and not in task tracker's logs. 
> possibly related to Hadoop-543
> 2006-09-19 01:10:37,064 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0001_m_022869_3: java.io.FileNotFoundException: .../hadoop/mapred/local/taskTracker/jobcache/job_0001/task_0001_m_022869_3/job.xml (No such file or directory)
>         at java.io.FileOutputStream.open(Native Method)
>         at java.io.FileOutputStream.<init>(FileOutputStream.java:179)
>         at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
>         at org.apache.hadoop.fs.LocalFileSystem$LocalFSFileOutputStream.<init>(LocalFileSystem.java:133)
>         at org.apache.hadoop.fs.LocalFileSystem.createRaw(LocalFileSystem.java:172)
>         at org.apache.hadoop.fs.LocalFileSystem.createRaw(LocalFileSystem.java:180)
>         at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:56)
>         at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:45)
>         at org.apache.hadoop.fs.FSDataOutputStream.<init>(FSDataOutputStream.java:146)
>         at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:270)
>         at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:177)
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.localizeTask(TaskTracker.java:810)
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.launchTask(TaskTracker.java:858)
>         at org.apache.hadoop.mapred.TaskTracker.launchTaskForJob(TaskTracker.java:282)
>         at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:275)
>         at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:669)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:486)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:689)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1290)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 06:06:51 2006
Return-Path: 
 <hadoop-dev-return-5884-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47681 invoked from network); 12 Dec 2006 06:06:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 06:06:51 -0000
Received: (qmail 70816 invoked by uid 500); 12 Dec 2006 06:06:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70752 invoked by uid 500); 12 Dec 2006 06:06:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70743 invoked by uid 99); 12 Dec 2006 06:06:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 22:06:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 22:06:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5CA097141A3
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 22:06:28 -0800 (PST)
Message-ID: <4935081.1165903588377.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 22:06:28 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-737) TaskTracker's job cleanup loop should
 check for finished job before deleting local directories
In-Reply-To: <21785112.1164026822016.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-737?page=all ]

Arun C Murthy reassigned HADOOP-737:
------------------------------------

    Assignee: Arun C Murthy  (was: Sanjay Dahiya)

> TaskTracker's job cleanup loop should check for finished job before deleting local directories
> ----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-737
>                 URL: http://issues.apache.org/jira/browse/HADOOP-737
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Arun C Murthy
>            Priority: Critical
>             Fix For: 0.10.0
>
>
> TaskTracker  uses jobClient.pollForTaskWithClosedJob() to find tasks which should be closed. This mechanism doesnt pass the information on whether the job is really finished or the task is being killed for some other reason( speculative instance succeeded). Since Tasktracker doesnt know this state it assumes job is finished and deletes local job dir, causing any subsequent tasks on the same task tracker for same job to fail with job.xml not found exception as reported in HADOOP-546 and possibly in HADOOP-543. This causes my patch for HADOOP-76 to fail for a large number of reduce tasks in some cases.
>  
> Same causes extra exceptions in logs while a job is being killed, the first task that gets closed will delete local directories and any other tasks (if any) which are about to get launched will throw this exception. In this case it is less significant is as the job is killed anyways and only logs get extra exceptions. 
> Possible solutions : 
> 1. Add an extra method in InetTrackerProtocol for checking for job status before deleting local directory. 
> 2. Set TaskTracker.RunningJob.localized to false once the local directory is deleted so that new tasks don't look for it there. 
> There is clearly a race condition in this and logs may still get the exception while shutdown but in normal cases it would work. 
> Comments ? 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 06:06:55 2006
Return-Path: 
 <hadoop-dev-return-5885-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47770 invoked from network); 12 Dec 2006 06:06:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 06:06:55 -0000
Received: (qmail 71282 invoked by uid 500); 12 Dec 2006 06:07:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71249 invoked by uid 500); 12 Dec 2006 06:07:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71240 invoked by uid 99); 12 Dec 2006 06:07:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 22:07:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 22:06:53 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 40AC47141FC
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 22:06:33 -0800 (PST)
Message-ID: <12480309.1165903593262.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 22:06:33 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-737) TaskTracker's job cleanup loop should
 check for finished job before deleting local directories
In-Reply-To: <21785112.1164026822016.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-737?page=all ]

Arun C Murthy resolved HADOOP-737.
----------------------------------

    Fix Version/s: 0.10.0
       Resolution: Fixed

Fixed as a part of HADOOP-639.

> TaskTracker's job cleanup loop should check for finished job before deleting local directories
> ----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-737
>                 URL: http://issues.apache.org/jira/browse/HADOOP-737
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Arun C Murthy
>            Priority: Critical
>             Fix For: 0.10.0
>
>
> TaskTracker  uses jobClient.pollForTaskWithClosedJob() to find tasks which should be closed. This mechanism doesnt pass the information on whether the job is really finished or the task is being killed for some other reason( speculative instance succeeded). Since Tasktracker doesnt know this state it assumes job is finished and deletes local job dir, causing any subsequent tasks on the same task tracker for same job to fail with job.xml not found exception as reported in HADOOP-546 and possibly in HADOOP-543. This causes my patch for HADOOP-76 to fail for a large number of reduce tasks in some cases.
>  
> Same causes extra exceptions in logs while a job is being killed, the first task that gets closed will delete local directories and any other tasks (if any) which are about to get launched will throw this exception. In this case it is less significant is as the job is killed anyways and only logs get extra exceptions. 
> Possible solutions : 
> 1. Add an extra method in InetTrackerProtocol for checking for job status before deleting local directory. 
> 2. Set TaskTracker.RunningJob.localized to false once the local directory is deleted so that new tasks don't look for it there. 
> There is clearly a race condition in this and logs may still get the exception while shutdown but in normal cases it would work. 
> Comments ? 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 06:14:44 2006
Return-Path: 
 <hadoop-dev-return-5886-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49382 invoked from network); 12 Dec 2006 06:14:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 06:14:44 -0000
Received: (qmail 77877 invoked by uid 500); 12 Dec 2006 06:14:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77639 invoked by uid 500); 12 Dec 2006 06:14:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77630 invoked by uid 99); 12 Dec 2006 06:14:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 22:14:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 22:14:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 53F397141A5
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 22:14:22 -0800 (PST)
Message-ID: <12789389.1165904062341.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 22:14:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-814) Increase dfs scalability by optimizing
 locking on namenode.
In-Reply-To: <7461200.1165900101047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-814?page=all ]

dhruba borthakur updated HADOOP-814:
------------------------------------

    Attachment: heartbeatlock.patch

1. Removes the global lock from the code path that processes a heartbeat.
2. Removes the global lock from the most common code path of the thread that periodically marks datanodes as "timedout".

Review comments welcome.

> Increase dfs scalability by optimizing locking on namenode.
> -----------------------------------------------------------
>
>                 Key: HADOOP-814
>                 URL: http://issues.apache.org/jira/browse/HADOOP-814
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: heartbeatlock.patch
>
>
> The current dfs namenode encounters locking bottlenecks when the number of datanodes is large. The namenode uses a single global lock to protect access to data structures. One key area is heartbeat processing. The lower the cost of processing a heartbeat, more the number of nodes HDFS can support.  A simple change to this current locking model can increase the scalability. Here are the details:
> Case 1: Currently we have three locks, the global lock (on FSNamesystem), the heartbeat lock and the datanodeMap lock. The following function is called when a heartbeat is received by the Namenode
> public synchronized FSNamesystem. gotHeartbeat() { ........ (A)
>     synchronized (heartbeat) {                                        ........ (B)
>       synchronized (datanodeMap) {                               ......... (C)
>    ...
>      }
> }
> In the above piece of code, statement (A) acquires the global-FSNamesystem-lock. This synchronization can be safely removed (remove updateStats too). This means that a heartbeat from the datanode can be processed without holding the FSnamesystem-global-lock.
> Case 2: A following thread called the heartbeatCheck thread periodically traverses all known Datanodes to determine if any of them has timed out. It is of the following form:
> void FSNamesystem.heartbeatCheck() {
>             synchronized (this) {                                        ........... (D)
>                         synchronized (heartbeats) {                .............(E) 
> }
> This thread acquires the global-FSNamesystem lock in Statement (D). This statement (D) can be removed. Instead the loop can check to see if any nodes are dead. If a dead node is found, only then it acquires the FSNamesystem-global-lock.
> It is possible that fixing the above two cases will cause HDFS to scale to higher number of nodes.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 06:21:42 2006
Return-Path: 
 <hadoop-dev-return-5887-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50615 invoked from network); 12 Dec 2006 06:21:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 06:21:42 -0000
Received: (qmail 83586 invoked by uid 500); 12 Dec 2006 06:21:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83510 invoked by uid 500); 12 Dec 2006 06:21:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83501 invoked by uid 99); 12 Dec 2006 06:21:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 22:21:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 22:21:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0E3C6714167
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 22:21:21 -0800 (PST)
Message-ID: <28416645.1165904481055.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 22:21:21 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-815) Investigate and fix the extremely
 large memory-footprint of JobTracker
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Investigate and fix the extremely large memory-footprint of JobTracker
----------------------------------------------------------------------

                 Key: HADOOP-815
                 URL: http://issues.apache.org/jira/browse/HADOOP-815
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.9.1
            Reporter: Arun C Murthy
         Assigned To: Arun C Murthy
             Fix For: 0.10.0


The JobTracker's memory footprint seems excessively large, especially when many jobs are submitted.

Here is the 'top' output of a JobTracker which has scheduled ~1k jobs thus far:

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                     
31877 arunc     19   0 2362m 261m  13m S 14.0 12.9  24:48.08 java  

Clearly VIRTual memory of 2364Mb v/s 261Mb of RESident memory is symptomatic of this issue...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 07:29:44 2006
Return-Path: 
 <hadoop-dev-return-5888-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65820 invoked from network); 12 Dec 2006 07:29:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 07:29:44 -0000
Received: (qmail 74530 invoked by uid 500); 12 Dec 2006 07:29:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74490 invoked by uid 500); 12 Dec 2006 07:29:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74481 invoked by uid 99); 12 Dec 2006 07:29:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 23:29:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 23:29:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5546A71413F
	for <hadoop-dev@lucene.apache.org>; Mon, 11 Dec 2006 23:29:22 -0800 (PST)
Message-ID: <20786243.1165908562346.JavaMail.jira@brutus>
Date: Mon, 11 Dec 2006 23:29:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-811) Patch to support multi-threaded
 MapRunnable
In-Reply-To: <15932768.1165852041100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-811?page=comments#action_12457607 ] 
            
Owen O'Malley commented on HADOOP-811:
--------------------------------------

It looks good. (Actually, this is exactly the use that MapRunnable was intended. Look at the Fetcher code in Nutch and it is basically doing very similar things.)

1. ioException should be volatile since it is set/read in different threads without locks.
2. I think that if ioException is already non-null, its value should not be changed. (Would a List<IOException> make more sense?)
3. I think the class should be in the mapred.lib package instead of mapred.
4. Please attach patches generated by "svn diff" rather than individual files.

> Patch to support multi-threaded MapRunnable
> -------------------------------------------
>
>                 Key: HADOOP-811
>                 URL: http://issues.apache.org/jira/browse/HADOOP-811
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.9.1
>         Environment: all
>            Reporter: Alejandro Abdelnur
>         Attachments: MultithreadedMapRunner.java
>
>
> The MapRunner calls Mapper.map in a serialized fashion.
> This is suitable for CPU/memory bound operations.
> However, when doing IO bound operations this serialization affects the throughput significantly.
> In order to support IO bound operations more efficiently I've implemented a multithreaded MapRunnable.
> Following is the implementation of this MapRunnable, MultithreadedMapRunner.
> I've only had to modify on method in the existing code (in the Task class) to avoid data corruption in the reporter.
> Index: Task.java
> ===================================================================
> --- Task.java   (revision 485492)
> +++ Task.java   (working copy)
> @@ -153,9 +153,11 @@
>    public Reporter getReporter(final TaskUmbilicalProtocol umbilical,
>                                final Progress progress) throws IOException {
>      return new Reporter() {
> -        public void setStatus(String status) throws IOException {
> -          progress.setStatus(status);
> -          progress();
> +        public void setStatus(String status) throws IOException {
> +          synchronized (this) {
> +            progress.setStatus(status);
> +            progress();
> +          }
>          }
>          public void progress() throws IOException {
>              reportProgress(umbilical);
> -----------------------------------------------------------
> MultithreadedMapRunner.java
> package org.apache.hadoop.mapred;
> import org.apache.hadoop.util.ReflectionUtils;
> import org.apache.hadoop.io.WritableComparable;
> import org.apache.hadoop.io.Writable;
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
> import java.io.IOException;
> import java.util.concurrent.ExecutorService;
> import java.util.concurrent.Executors;
> import java.util.concurrent.TimeUnit;
> /**
>  * Multithreaded implementation for @link org.apache.hadoop.mapred.MapRunnable.
>  * <p>
>  * It can be used instead of the default implementation,
>  * @link org.apache.hadoop.mapred.MapRunner, when the Map operation is not CPU
>  * bound in order to improve throughput.
>  * <p>
>  * Map implementations using this MapRunnable must be thread-safe.
>  * <p>
>  * The Map-Reduce job has to be configured to use this MapRunnable class (using
>  * the <b>mapred.map.runner.class</b> property) and
>  * the number of thread the thread-pool can use (using the
>  * <b>mapred.map.multithreadedrunner.threads</b> property).
>  * <p>
>  *
>  * @author Alejandro Abdelnur
>  */
> public class MultithreadedMapRunner implements MapRunnable {
>   private static final Log LOG =
>       LogFactory.getLog(MultithreadedMapRunner.class.getName());
>   private JobConf job;
>   private Mapper mapper;
>   private ExecutorService executorService;
>   private IOException ioException;
>   public void configure(JobConf job) {
>     int numberOfThreads =
>         job.getInt("mapred.map.multithreadedrunner.threads", 10);
>     if (LOG.isDebugEnabled()) {
>       LOG.debug("Configuring job " + job.getJobName() +
>           " to use " + numberOfThreads + " threads" );
>     }
>     this.job = job;
>     this.mapper = (Mapper)ReflectionUtils.newInstance(job.getMapperClass(),
>                                                       job);
>     // Creating a threadpool of the configured size to execute the Mapper
>     // map method in parallel.
>     executorService = Executors.newFixedThreadPool(numberOfThreads);
>   }
>   public void run(RecordReader input, OutputCollector output,
>                   Reporter reporter)
>     throws IOException {
>     try {
>       // allocate key & value instances these objects will not be reused
>       // because execution of Mapper.map is not serialized.
>       WritableComparable key = input.createKey();
>       Writable value = input.createValue();
>       while (input.next(key, value)) {
>         // Run Mapper.map execution asynchronously in a separate thread.
>         // If threads are not available from the thread-pool this method
>         // will block until there is a thread available.
>         executorService.execute(
>             new MTMapperRunable(key, value, output, reporter));
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         if (ioException != null) {
>           throw ioException;
>         }
>         // Allocate new key & value instances as mapper is running in parallel
>         key = input.createKey();
>         value = input.createValue();
>       }
>       if (LOG.isDebugEnabled()) {
>         LOG.debug("Finished dispatching all Mappper.map calls, job "
>             + job.getJobName());
>       }
>       // Graceful shutdown of the Threadpool, it will let all scheduled
>       // Runnables to end.
>       executorService.shutdown();
>       try {
>         // Now waiting for all Runnables to end.
>         while (!executorService.awaitTermination(100, TimeUnit.MILLISECONDS)) {
>           if (LOG.isDebugEnabled()) {
>             LOG.debug("Awaiting all running Mappper.map calls to finish, job "
>                 + job.getJobName());
>           }
>           // Checking if a Mapper.map within a Runnable has generated an
>           // IOException. If so we rethrow it to force an abort of the Map
>           // operation thus keeping the semantics of the default
>           // implementation.
>           // NOTE: while Mapper.map dispatching has concluded there are still
>           // map calls in progress.
>           if (ioException != null) {
>             throw ioException;
>           }
>         }
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         // NOTE: it could be that a map call has had an exception after the
>         // call for awaitTermination() returing true. And edge case but it
>         // could happen.
>         if (ioException != null) {
>           throw ioException;
>         }
>       }
>       catch (IOException ioEx) {
>         // Forcing a shutdown of all thread of the threadpool and rethrowing
>         // the IOException
>         executorService.shutdownNow();
>         throw ioEx;
>       }
>       catch (InterruptedException iEx) {
>         throw new IOException(iEx.getMessage());
>       }
>     } finally {
>         mapper.close();
>     }
>   }
>   /**
>    * Runnable to execute a single Mapper.map call from a forked thread.
>    */
>   private class MTMapperRunable implements Runnable {
>     private WritableComparable key;
>     private Writable value;
>     private OutputCollector output;
>     private Reporter reporter;
>     /**
>      * Collecting all required parameters to execute a Mapper.map call.
>      * <p>
>      *
>      * @param key
>      * @param value
>      * @param output
>      * @param reporter
>      */
>     public MTMapperRunable(WritableComparable key, Writable value,
>         OutputCollector output, Reporter reporter) {
>       this.key = key;
>       this.value = value;
>       this.output = output;
>       this.reporter = reporter;
>     }
>     /**
>      * Executes a Mapper.map call with the given Mapper and parameters.
>      * <p>
>      * This method is called from the thread-pool thread.
>      *
>      */
>     public void run() {
>       try {
>         // map pair to output
>         MultithreadedMapRunner.this.mapper.map(key, value, output, reporter);
>       }
>       catch (IOException ex) {
>         // If there is an IOException during the call it is set in an instance
>         // variable of the MultithreadedMapRunner from where it will be
>         // rethrown.
>         synchronized (MultithreadedMapRunner.this) {
>           if (MultithreadedMapRunner.this.ioException == null) {
>             MultithreadedMapRunner.this.ioException = ex;
>           }
>         }
>       }
>     }
>   }
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 08:30:48 2006
Return-Path: 
 <hadoop-dev-return-5889-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85391 invoked from network); 12 Dec 2006 08:30:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 08:30:48 -0000
Received: (qmail 48637 invoked by uid 500); 12 Dec 2006 08:30:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48598 invoked by uid 500); 12 Dec 2006 08:30:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48589 invoked by uid 99); 12 Dec 2006 08:30:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 00:30:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 00:30:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3B9517141A2
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 00:30:26 -0800 (PST)
Message-ID: <22692158.1165912226171.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 00:30:26 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-813) map tasks lost during sort
In-Reply-To: <30843820.1165896621216.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-813?page=all ]

Devaraj Das updated HADOOP-813:
-------------------------------

    Attachment: 813.patch

This patch starts a thread to report progress during the merge process. Also, added a couple of reportProgress statements.

> map tasks lost during sort
> --------------------------
>
>                 Key: HADOOP-813
>                 URL: http://issues.apache.org/jira/browse/HADOOP-813
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.10.0
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.10.0
>
>         Attachments: 813.patch
>
>
> On a 500 node cluster, I had a bunch of map tasks get "lost" because they failed to report progress for 10 minutes. They appear to be in the sort stage at the end of the map. I hypothesize that the patch for HADOOP-331 does not update the map's progress during the sort/merge. If the sort/merge takes more than 10 minutes, the task is lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 08:30:54 2006
Return-Path: 
 <hadoop-dev-return-5890-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85497 invoked from network); 12 Dec 2006 08:30:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 08:30:54 -0000
Received: (qmail 49269 invoked by uid 500); 12 Dec 2006 08:31:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49241 invoked by uid 500); 12 Dec 2006 08:31:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49232 invoked by uid 99); 12 Dec 2006 08:31:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 00:31:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 00:30:51 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C36CA7141BE
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 00:30:31 -0800 (PST)
Message-ID: <8589427.1165912231798.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 00:30:31 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-813) map tasks lost during sort
In-Reply-To: <30843820.1165896621216.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-813?page=all ]

Devaraj Das updated HADOOP-813:
-------------------------------

    Status: Patch Available  (was: Open)

> map tasks lost during sort
> --------------------------
>
>                 Key: HADOOP-813
>                 URL: http://issues.apache.org/jira/browse/HADOOP-813
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.10.0
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.10.0
>
>         Attachments: 813.patch
>
>
> On a 500 node cluster, I had a bunch of map tasks get "lost" because they failed to report progress for 10 minutes. They appear to be in the sort stage at the end of the map. I hypothesize that the patch for HADOOP-331 does not update the map's progress during the sort/merge. If the sort/merge takes more than 10 minutes, the task is lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 08:34:47 2006
Return-Path: 
 <hadoop-dev-return-5891-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86377 invoked from network); 12 Dec 2006 08:34:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 08:34:47 -0000
Received: (qmail 52650 invoked by uid 500); 12 Dec 2006 08:34:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52613 invoked by uid 500); 12 Dec 2006 08:34:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52604 invoked by uid 99); 12 Dec 2006 08:34:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 00:34:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 00:34:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 14FA271413D
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 00:34:26 -0800 (PST)
Message-ID: <21841451.1165912466083.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 00:34:26 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-810) The non-existence of the job.xml file
 causes a LOT of tasks of the job fail
In-Reply-To: <12703053.1165626863522.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-810?page=all ]

Arun C Murthy reassigned HADOOP-810:
------------------------------------

    Assignee: Arun C Murthy

> The non-existence of the job.xml file causes a LOT of tasks of the job fail
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-810
>                 URL: http://issues.apache.org/jira/browse/HADOOP-810
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Runping Qi
>         Assigned To: Arun C Murthy
>
> For some reason, the job.xml file disappears from one of the nodes. That causes the following exception:
> java.lang.RuntimeException: java.lang.RuntimeException:  taskTracker/jobcache/job_0039/job.xml not found
> 	at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:551)
> 	at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:472)
> 	at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:453)
> 	at org.apache.hadoop.conf.Configuration.get(Configuration.java:201)
> 	at org.apache.hadoop.conf.Configuration.getBoolean(Configuration.java:286)
> 	at org.apache.hadoop.mapred.JobConf.getKeepFailedTaskFiles(JobConf.java:212)
> 	at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.setJobConf(TaskTracker.java:874)
> 	at org.apache.hadoop.mapred.TaskTracker.launchTaskForJob(TaskTracker.java:313)
> 	at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:307)
> 	at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:691)
> 	at org.apache.hadoop.mapred.TaskTracker.checkForNewTasks(TaskTracker.java:533)
> 	at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:448)
> 	at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
> 	at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)
> That is fine by itself.
> The problem is the task tracker keeps accepting tasks of the same job, and keeps failing them!
> The correct behavior is that it either tries to get the job.xml from the job tracker, or refuses accepting any new tasks 
> of the same job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 08:36:44 2006
Return-Path: 
 <hadoop-dev-return-5892-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87036 invoked from network); 12 Dec 2006 08:36:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 08:36:44 -0000
Received: (qmail 55769 invoked by uid 500); 12 Dec 2006 08:36:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55741 invoked by uid 500); 12 Dec 2006 08:36:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55732 invoked by uid 99); 12 Dec 2006 08:36:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 00:36:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 00:36:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2690A71413D
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 00:36:23 -0800 (PST)
Message-ID: <10453828.1165912583155.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 00:36:23 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-810) The non-existence of the job.xml
 file causes a LOT of tasks of the job fail
In-Reply-To: <12703053.1165626863522.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-810?page=comments#action_12457626 ] 
            
Arun C Murthy commented on HADOOP-810:
--------------------------------------

Runping, could you look at HADOOP-737 & check if HADOOP-639 fixes it for you? Thanks!

> The non-existence of the job.xml file causes a LOT of tasks of the job fail
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-810
>                 URL: http://issues.apache.org/jira/browse/HADOOP-810
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Runping Qi
>         Assigned To: Arun C Murthy
>
> For some reason, the job.xml file disappears from one of the nodes. That causes the following exception:
> java.lang.RuntimeException: java.lang.RuntimeException:  taskTracker/jobcache/job_0039/job.xml not found
> 	at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:551)
> 	at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:472)
> 	at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:453)
> 	at org.apache.hadoop.conf.Configuration.get(Configuration.java:201)
> 	at org.apache.hadoop.conf.Configuration.getBoolean(Configuration.java:286)
> 	at org.apache.hadoop.mapred.JobConf.getKeepFailedTaskFiles(JobConf.java:212)
> 	at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.setJobConf(TaskTracker.java:874)
> 	at org.apache.hadoop.mapred.TaskTracker.launchTaskForJob(TaskTracker.java:313)
> 	at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:307)
> 	at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:691)
> 	at org.apache.hadoop.mapred.TaskTracker.checkForNewTasks(TaskTracker.java:533)
> 	at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:448)
> 	at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
> 	at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)
> That is fine by itself.
> The problem is the task tracker keeps accepting tasks of the same job, and keeps failing them!
> The correct behavior is that it either tries to get the job.xml from the job tracker, or refuses accepting any new tasks 
> of the same job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 08:42:44 2006
Return-Path: 
 <hadoop-dev-return-5893-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88753 invoked from network); 12 Dec 2006 08:42:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 08:42:44 -0000
Received: (qmail 62146 invoked by uid 500); 12 Dec 2006 08:42:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62117 invoked by uid 500); 12 Dec 2006 08:42:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62108 invoked by uid 99); 12 Dec 2006 08:42:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 00:42:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 00:42:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2F05B71413D
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 00:42:23 -0800 (PST)
Message-ID: <31572044.1165912943189.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 00:42:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-813) map tasks lost during sort
In-Reply-To: <30843820.1165896621216.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-813?page=comments#action_12457628 ] 
            
Hadoop QA commented on HADOOP-813:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346976/813.patch applied and successfully tested against trunk revision r483772

> map tasks lost during sort
> --------------------------
>
>                 Key: HADOOP-813
>                 URL: http://issues.apache.org/jira/browse/HADOOP-813
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.10.0
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.10.0
>
>         Attachments: 813.patch
>
>
> On a 500 node cluster, I had a bunch of map tasks get "lost" because they failed to report progress for 10 minutes. They appear to be in the sort stage at the end of the map. I hypothesize that the patch for HADOOP-331 does not update the map's progress during the sort/merge. If the sort/merge takes more than 10 minutes, the task is lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 08:51:46 2006
Return-Path: 
 <hadoop-dev-return-5894-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93815 invoked from network); 12 Dec 2006 08:51:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 08:51:46 -0000
Received: (qmail 74782 invoked by uid 500); 12 Dec 2006 08:51:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74760 invoked by uid 500); 12 Dec 2006 08:51:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74751 invoked by uid 99); 12 Dec 2006 08:51:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 00:51:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 00:51:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B0946714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 00:51:24 -0800 (PST)
Message-ID: <31802439.1165913484720.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 00:51:24 -0800 (PST)
From: "Philippe Gassmann (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12457630 ] 
            
Philippe Gassmann commented on HADOOP-227:
------------------------------------------

I like this proposal too :)

Much cleaner that my hacky patch !

> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: dhruba borthakur
>         Attachments: patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0
>
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 09:36:46 2006
Return-Path: 
 <hadoop-dev-return-5895-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10147 invoked from network); 12 Dec 2006 09:36:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 09:36:46 -0000
Received: (qmail 45655 invoked by uid 500); 12 Dec 2006 09:36:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45564 invoked by uid 500); 12 Dec 2006 09:36:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45516 invoked by uid 99); 12 Dec 2006 09:36:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 01:36:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 01:36:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 621D2714168
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 01:36:23 -0800 (PST)
Message-ID: <702305.1165916183398.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 01:36:23 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-816) Allow the sort benchmark to set a
 buffersize for the map buffer
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Allow the sort benchmark to set a buffersize for the map buffer
---------------------------------------------------------------

                 Key: HADOOP-816
                 URL: http://issues.apache.org/jira/browse/HADOOP-816
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: Devaraj Das
         Assigned To: Devaraj Das


Discovered that framework merges are the hotspots where most time is spent in the sort benchmark. With HADOOP-331, the Map phase could potentially do a merge of the spills (this merge was not done pre-HADOOP-331), and then there is one compulsory merge on each reduce. It may be good to avoid the merge in the Map phase, if possible.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 10:36:45 2006
Return-Path: 
 <hadoop-dev-return-5896-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24519 invoked from network); 12 Dec 2006 10:36:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 10:36:45 -0000
Received: (qmail 46078 invoked by uid 500); 12 Dec 2006 10:36:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45886 invoked by uid 500); 12 Dec 2006 10:36:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45877 invoked by uid 99); 12 Dec 2006 10:36:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 02:36:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 02:36:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0F60C714167
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 02:36:24 -0800 (PST)
Message-ID: <21003416.1165919784060.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 02:36:24 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment:     (was: Hadoop-619_1.patch)

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 10:36:48 2006
Return-Path: 
 <hadoop-dev-return-5897-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24575 invoked from network); 12 Dec 2006 10:36:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 10:36:48 -0000
Received: (qmail 46198 invoked by uid 500); 12 Dec 2006 10:36:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46171 invoked by uid 500); 12 Dec 2006 10:36:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46162 invoked by uid 99); 12 Dec 2006 10:36:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 02:36:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 02:36:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DC7FB7141A4
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 02:36:26 -0800 (PST)
Message-ID: <9732377.1165919786900.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 02:36:26 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment: Hadoop-619_1.patch

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 11:06:44 2006
Return-Path: 
 <hadoop-dev-return-5898-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31883 invoked from network); 12 Dec 2006 11:06:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 11:06:44 -0000
Received: (qmail 85276 invoked by uid 500); 12 Dec 2006 11:06:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85256 invoked by uid 500); 12 Dec 2006 11:06:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85246 invoked by uid 99); 12 Dec 2006 11:06:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 03:06:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 03:06:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5298D714058
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 03:06:22 -0800 (PST)
Message-ID: <11785724.1165921582335.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 03:06:22 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-816) Allow the sort benchmark to set a
 buffersize for the map buffer
In-Reply-To: <702305.1165916183398.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-816?page=all ]

Devaraj Das updated HADOOP-816:
-------------------------------

    Attachment: 816.patch

Added code in Sort.java that will look at the dfs blocksize of a file in the input path, and depending on the blocksize, will infer the map buffer size and set a config in jobconf (this is because the sort benchmark spawns maps that each work on dfs blocksize amount of data)
Added a new config variable - map.buffer.size.mb in MapTask.java that will control the buffer size (currently the buffer size is controlled by io.sort.mb). Decided to make this independent since io.sort.mb has some bearing on the buffer sizes for the buffers created during reading/writing files; wanted to keep those buffer sizes separate from the map buffer size.

> Allow the sort benchmark to set a buffersize for the map buffer
> ---------------------------------------------------------------
>
>                 Key: HADOOP-816
>                 URL: http://issues.apache.org/jira/browse/HADOOP-816
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: 816.patch
>
>
> Discovered that framework merges are the hotspots where most time is spent in the sort benchmark. With HADOOP-331, the Map phase could potentially do a merge of the spills (this merge was not done pre-HADOOP-331), and then there is one compulsory merge on each reduce. It may be good to avoid the merge in the Map phase, if possible.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 11:08:44 2006
Return-Path: 
 <hadoop-dev-return-5899-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32180 invoked from network); 12 Dec 2006 11:08:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 11:08:44 -0000
Received: (qmail 86302 invoked by uid 500); 12 Dec 2006 11:08:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86263 invoked by uid 500); 12 Dec 2006 11:08:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86254 invoked by uid 99); 12 Dec 2006 11:08:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 03:08:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 03:08:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 684C3714058
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 03:08:22 -0800 (PST)
Message-ID: <9977012.1165921702424.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 03:08:22 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-816) Allow the sort benchmark to set a
 buffersize for the map buffer
In-Reply-To: <702305.1165916183398.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-816?page=all ]

Devaraj Das updated HADOOP-816:
-------------------------------

    Status: Patch Available  (was: Open)

> Allow the sort benchmark to set a buffersize for the map buffer
> ---------------------------------------------------------------
>
>                 Key: HADOOP-816
>                 URL: http://issues.apache.org/jira/browse/HADOOP-816
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: 816.patch
>
>
> Discovered that framework merges are the hotspots where most time is spent in the sort benchmark. With HADOOP-331, the Map phase could potentially do a merge of the spills (this merge was not done pre-HADOOP-331), and then there is one compulsory merge on each reduce. It may be good to avoid the merge in the Map phase, if possible.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 11:20:48 2006
Return-Path: 
 <hadoop-dev-return-5900-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35660 invoked from network); 12 Dec 2006 11:20:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 11:20:48 -0000
Received: (qmail 10613 invoked by uid 500); 12 Dec 2006 11:20:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10575 invoked by uid 500); 12 Dec 2006 11:20:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10524 invoked by uid 99); 12 Dec 2006 11:20:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 03:20:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 03:20:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 081D8714058
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 03:20:24 -0800 (PST)
Message-ID: <700348.1165922424945.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 03:20:24 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-816) Allow the sort benchmark to set a
 buffersize for the map buffer
In-Reply-To: <702305.1165916183398.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-816?page=comments#action_12457667 ] 
            
Hadoop QA commented on HADOOP-816:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12346986/816.patch applied and successfully tested against trunk revision r483772

> Allow the sort benchmark to set a buffersize for the map buffer
> ---------------------------------------------------------------
>
>                 Key: HADOOP-816
>                 URL: http://issues.apache.org/jira/browse/HADOOP-816
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: 816.patch
>
>
> Discovered that framework merges are the hotspots where most time is spent in the sort benchmark. With HADOOP-331, the Map phase could potentially do a merge of the spills (this merge was not done pre-HADOOP-331), and then there is one compulsory merge on each reduce. It may be good to avoid the merge in the Map phase, if possible.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 11:26:44 2006
Return-Path: 
 <hadoop-dev-return-5901-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38331 invoked from network); 12 Dec 2006 11:26:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 11:26:44 -0000
Received: (qmail 20621 invoked by uid 500); 12 Dec 2006 11:26:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20598 invoked by uid 500); 12 Dec 2006 11:26:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20589 invoked by uid 99); 12 Dec 2006 11:26:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 03:26:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 03:26:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 56EAC714058
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 03:26:22 -0800 (PST)
Message-ID: <26913390.1165922782352.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 03:26:22 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-816) Allow the sort benchmark to set a
 buffersize for the map buffer
In-Reply-To: <702305.1165916183398.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-816?page=all ]

Devaraj Das updated HADOOP-816:
-------------------------------

    Attachment:     (was: 816.patch)

> Allow the sort benchmark to set a buffersize for the map buffer
> ---------------------------------------------------------------
>
>                 Key: HADOOP-816
>                 URL: http://issues.apache.org/jira/browse/HADOOP-816
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>
> Discovered that framework merges are the hotspots where most time is spent in the sort benchmark. With HADOOP-331, the Map phase could potentially do a merge of the spills (this merge was not done pre-HADOOP-331), and then there is one compulsory merge on each reduce. It may be good to avoid the merge in the Map phase, if possible.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 12:03:44 2006
Return-Path: 
 <hadoop-dev-return-5902-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48647 invoked from network); 12 Dec 2006 12:03:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 12:03:44 -0000
Received: (qmail 64098 invoked by uid 500); 12 Dec 2006 12:03:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63857 invoked by uid 500); 12 Dec 2006 12:03:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63848 invoked by uid 99); 12 Dec 2006 12:03:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 04:03:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 04:03:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AFAFE71413F
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 04:03:22 -0800 (PST)
Message-ID: <30377084.1165925002717.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 04:03:22 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-816) Allow the sort benchmark to set a
 buffersize for the map buffer
In-Reply-To: <702305.1165916183398.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-816?page=all ]

Devaraj Das updated HADOOP-816:
-------------------------------

    Attachment: 816.patch

Added the default setting for map.buffer.size.mb in hadoop-default.xml

> Allow the sort benchmark to set a buffersize for the map buffer
> ---------------------------------------------------------------
>
>                 Key: HADOOP-816
>                 URL: http://issues.apache.org/jira/browse/HADOOP-816
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: 816.patch
>
>
> Discovered that framework merges are the hotspots where most time is spent in the sort benchmark. With HADOOP-331, the Map phase could potentially do a merge of the spills (this merge was not done pre-HADOOP-331), and then there is one compulsory merge on each reduce. It may be good to avoid the merge in the Map phase, if possible.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 14:22:45 2006
Return-Path: 
 <hadoop-dev-return-5903-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94369 invoked from network); 12 Dec 2006 14:22:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 14:22:45 -0000
Received: (qmail 58134 invoked by uid 500); 12 Dec 2006 14:22:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58107 invoked by uid 500); 12 Dec 2006 14:22:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58098 invoked by uid 99); 12 Dec 2006 14:22:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 06:22:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 06:22:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 87A687140D2
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 06:22:22 -0800 (PST)
Message-ID: <28326255.1165933342553.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 06:22:22 -0800 (PST)
From: "Alejandro Abdelnur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-811) Patch to support multi-threaded
 MapRunnable
In-Reply-To: <15932768.1165852041100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-811?page=comments#action_12457729 ] 
            
Alejandro Abdelnur commented on HADOOP-811:
-------------------------------------------

Thxs.

#1 Accept

#2.a It is already being done, see the run() method of the MTMapperRunnable class.

#2.b I would not use a list, 2 reasons: 1st not way to propagate more than one exception and 2nd that would mean a different semantics than the MapRunner.

#3 Accept. Move/rename as you please

#4 Accept. Will do in a few mins, IntelliJ optimized many imports here and there and I have many false diffs.



> Patch to support multi-threaded MapRunnable
> -------------------------------------------
>
>                 Key: HADOOP-811
>                 URL: http://issues.apache.org/jira/browse/HADOOP-811
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.9.1
>         Environment: all
>            Reporter: Alejandro Abdelnur
>         Attachments: MultithreadedMapRunner.java
>
>
> The MapRunner calls Mapper.map in a serialized fashion.
> This is suitable for CPU/memory bound operations.
> However, when doing IO bound operations this serialization affects the throughput significantly.
> In order to support IO bound operations more efficiently I've implemented a multithreaded MapRunnable.
> Following is the implementation of this MapRunnable, MultithreadedMapRunner.
> I've only had to modify on method in the existing code (in the Task class) to avoid data corruption in the reporter.
> Index: Task.java
> ===================================================================
> --- Task.java   (revision 485492)
> +++ Task.java   (working copy)
> @@ -153,9 +153,11 @@
>    public Reporter getReporter(final TaskUmbilicalProtocol umbilical,
>                                final Progress progress) throws IOException {
>      return new Reporter() {
> -        public void setStatus(String status) throws IOException {
> -          progress.setStatus(status);
> -          progress();
> +        public void setStatus(String status) throws IOException {
> +          synchronized (this) {
> +            progress.setStatus(status);
> +            progress();
> +          }
>          }
>          public void progress() throws IOException {
>              reportProgress(umbilical);
> -----------------------------------------------------------
> MultithreadedMapRunner.java
> package org.apache.hadoop.mapred;
> import org.apache.hadoop.util.ReflectionUtils;
> import org.apache.hadoop.io.WritableComparable;
> import org.apache.hadoop.io.Writable;
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
> import java.io.IOException;
> import java.util.concurrent.ExecutorService;
> import java.util.concurrent.Executors;
> import java.util.concurrent.TimeUnit;
> /**
>  * Multithreaded implementation for @link org.apache.hadoop.mapred.MapRunnable.
>  * <p>
>  * It can be used instead of the default implementation,
>  * @link org.apache.hadoop.mapred.MapRunner, when the Map operation is not CPU
>  * bound in order to improve throughput.
>  * <p>
>  * Map implementations using this MapRunnable must be thread-safe.
>  * <p>
>  * The Map-Reduce job has to be configured to use this MapRunnable class (using
>  * the <b>mapred.map.runner.class</b> property) and
>  * the number of thread the thread-pool can use (using the
>  * <b>mapred.map.multithreadedrunner.threads</b> property).
>  * <p>
>  *
>  * @author Alejandro Abdelnur
>  */
> public class MultithreadedMapRunner implements MapRunnable {
>   private static final Log LOG =
>       LogFactory.getLog(MultithreadedMapRunner.class.getName());
>   private JobConf job;
>   private Mapper mapper;
>   private ExecutorService executorService;
>   private IOException ioException;
>   public void configure(JobConf job) {
>     int numberOfThreads =
>         job.getInt("mapred.map.multithreadedrunner.threads", 10);
>     if (LOG.isDebugEnabled()) {
>       LOG.debug("Configuring job " + job.getJobName() +
>           " to use " + numberOfThreads + " threads" );
>     }
>     this.job = job;
>     this.mapper = (Mapper)ReflectionUtils.newInstance(job.getMapperClass(),
>                                                       job);
>     // Creating a threadpool of the configured size to execute the Mapper
>     // map method in parallel.
>     executorService = Executors.newFixedThreadPool(numberOfThreads);
>   }
>   public void run(RecordReader input, OutputCollector output,
>                   Reporter reporter)
>     throws IOException {
>     try {
>       // allocate key & value instances these objects will not be reused
>       // because execution of Mapper.map is not serialized.
>       WritableComparable key = input.createKey();
>       Writable value = input.createValue();
>       while (input.next(key, value)) {
>         // Run Mapper.map execution asynchronously in a separate thread.
>         // If threads are not available from the thread-pool this method
>         // will block until there is a thread available.
>         executorService.execute(
>             new MTMapperRunable(key, value, output, reporter));
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         if (ioException != null) {
>           throw ioException;
>         }
>         // Allocate new key & value instances as mapper is running in parallel
>         key = input.createKey();
>         value = input.createValue();
>       }
>       if (LOG.isDebugEnabled()) {
>         LOG.debug("Finished dispatching all Mappper.map calls, job "
>             + job.getJobName());
>       }
>       // Graceful shutdown of the Threadpool, it will let all scheduled
>       // Runnables to end.
>       executorService.shutdown();
>       try {
>         // Now waiting for all Runnables to end.
>         while (!executorService.awaitTermination(100, TimeUnit.MILLISECONDS)) {
>           if (LOG.isDebugEnabled()) {
>             LOG.debug("Awaiting all running Mappper.map calls to finish, job "
>                 + job.getJobName());
>           }
>           // Checking if a Mapper.map within a Runnable has generated an
>           // IOException. If so we rethrow it to force an abort of the Map
>           // operation thus keeping the semantics of the default
>           // implementation.
>           // NOTE: while Mapper.map dispatching has concluded there are still
>           // map calls in progress.
>           if (ioException != null) {
>             throw ioException;
>           }
>         }
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         // NOTE: it could be that a map call has had an exception after the
>         // call for awaitTermination() returing true. And edge case but it
>         // could happen.
>         if (ioException != null) {
>           throw ioException;
>         }
>       }
>       catch (IOException ioEx) {
>         // Forcing a shutdown of all thread of the threadpool and rethrowing
>         // the IOException
>         executorService.shutdownNow();
>         throw ioEx;
>       }
>       catch (InterruptedException iEx) {
>         throw new IOException(iEx.getMessage());
>       }
>     } finally {
>         mapper.close();
>     }
>   }
>   /**
>    * Runnable to execute a single Mapper.map call from a forked thread.
>    */
>   private class MTMapperRunable implements Runnable {
>     private WritableComparable key;
>     private Writable value;
>     private OutputCollector output;
>     private Reporter reporter;
>     /**
>      * Collecting all required parameters to execute a Mapper.map call.
>      * <p>
>      *
>      * @param key
>      * @param value
>      * @param output
>      * @param reporter
>      */
>     public MTMapperRunable(WritableComparable key, Writable value,
>         OutputCollector output, Reporter reporter) {
>       this.key = key;
>       this.value = value;
>       this.output = output;
>       this.reporter = reporter;
>     }
>     /**
>      * Executes a Mapper.map call with the given Mapper and parameters.
>      * <p>
>      * This method is called from the thread-pool thread.
>      *
>      */
>     public void run() {
>       try {
>         // map pair to output
>         MultithreadedMapRunner.this.mapper.map(key, value, output, reporter);
>       }
>       catch (IOException ex) {
>         // If there is an IOException during the call it is set in an instance
>         // variable of the MultithreadedMapRunner from where it will be
>         // rethrown.
>         synchronized (MultithreadedMapRunner.this) {
>           if (MultithreadedMapRunner.this.ioException == null) {
>             MultithreadedMapRunner.this.ioException = ex;
>           }
>         }
>       }
>     }
>   }
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 14:26:58 2006
Return-Path: 
 <hadoop-dev-return-5904-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96991 invoked from network); 12 Dec 2006 14:26:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 14:26:58 -0000
Received: (qmail 68548 invoked by uid 500); 12 Dec 2006 14:26:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68517 invoked by uid 500); 12 Dec 2006 14:26:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68501 invoked by uid 99); 12 Dec 2006 14:26:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 06:26:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 06:26:49 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2CBC5714058
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 06:26:27 -0800 (PST)
Message-ID: <30192547.1165933587180.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 06:26:27 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-817) Streaming reducers throw OutOfMemory
 for not so large inputs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Streaming reducers throw OutOfMemory for not so large inputs
------------------------------------------------------------

                 Key: HADOOP-817
                 URL: http://issues.apache.org/jira/browse/HADOOP-817
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
            Reporter: Sanjay Dahiya


I am seeing OutOfMemoryError for moderate size inputs (~70 text files, 20k each ) causing job to fail in streaming. For very small inputs it still succeeds. Looking into details. 


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 19:28:46 2006
Return-Path: 
 <hadoop-dev-return-5905-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26487 invoked from network); 12 Dec 2006 19:28:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 19:28:46 -0000
Received: (qmail 37857 invoked by uid 500); 12 Dec 2006 19:28:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37745 invoked by uid 500); 12 Dec 2006 19:28:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37702 invoked by uid 99); 12 Dec 2006 19:28:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 11:28:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 11:28:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0CB21714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 11:28:21 -0800 (PST)
Message-ID: <19089536.1165951701049.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 11:28:21 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-818) ant clean test-contrib doesn't work
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

ant clean test-contrib doesn't work
-----------------------------------

                 Key: HADOOP-818
                 URL: http://issues.apache.org/jira/browse/HADOOP-818
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.9.1
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.10.0


When you run "ant clean test-contrib" it fails because the test-contrib counts on build/test directories having been created already.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 19:30:44 2006
Return-Path: 
 <hadoop-dev-return-5906-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27298 invoked from network); 12 Dec 2006 19:30:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 19:30:44 -0000
Received: (qmail 41440 invoked by uid 500); 12 Dec 2006 19:30:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41357 invoked by uid 500); 12 Dec 2006 19:30:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41347 invoked by uid 99); 12 Dec 2006 19:30:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 11:30:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 11:30:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 706E7714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 11:30:22 -0800 (PST)
Message-ID: <703955.1165951822457.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 11:30:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-818) ant clean test-contrib doesn't work
In-Reply-To: <19089536.1165951701049.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-818?page=all ]

Owen O'Malley updated HADOOP-818:
---------------------------------

    Attachment: contrib-clean-test.patch

This patch:
  1. makes the test-contrib target stay out of build/test and only use build/contrib/$name/test
  2. allows "ant -Dtest.output=yes test-contrib" to work

> ant clean test-contrib doesn't work
> -----------------------------------
>
>                 Key: HADOOP-818
>                 URL: http://issues.apache.org/jira/browse/HADOOP-818
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.9.1
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: contrib-clean-test.patch
>
>
> When you run "ant clean test-contrib" it fails because the test-contrib counts on build/test directories having been created already.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 19:40:45 2006
Return-Path: 
 <hadoop-dev-return-5907-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30495 invoked from network); 12 Dec 2006 19:40:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 19:40:45 -0000
Received: (qmail 59650 invoked by uid 500); 12 Dec 2006 19:40:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59620 invoked by uid 500); 12 Dec 2006 19:40:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59591 invoked by uid 99); 12 Dec 2006 19:40:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 11:40:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 11:40:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 74C8271404B
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 11:40:22 -0800 (PST)
Message-ID: <6551815.1165952422475.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 11:40:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-818) ant clean test-contrib doesn't work
In-Reply-To: <19089536.1165951701049.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-818?page=all ]

Doug Cutting resolved HADOOP-818.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> ant clean test-contrib doesn't work
> -----------------------------------
>
>                 Key: HADOOP-818
>                 URL: http://issues.apache.org/jira/browse/HADOOP-818
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.9.1
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: contrib-clean-test.patch
>
>
> When you run "ant clean test-contrib" it fails because the test-contrib counts on build/test directories having been created already.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 19:48:46 2006
Return-Path: 
 <hadoop-dev-return-5908-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33992 invoked from network); 12 Dec 2006 19:48:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 19:48:46 -0000
Received: (qmail 71640 invoked by uid 500); 12 Dec 2006 19:48:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71614 invoked by uid 500); 12 Dec 2006 19:48:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71604 invoked by uid 99); 12 Dec 2006 19:48:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 11:48:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 11:48:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 520E0714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 11:48:22 -0800 (PST)
Message-ID: <17640371.1165952902333.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 11:48:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-816) Allow the sort benchmark to set a
 buffersize for the map buffer
In-Reply-To: <702305.1165916183398.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit

    [ http://issues.apache.org/jira/browse/HADOOP-816?page=comments#action_12457852 ] 
            
Owen O'Malley commented on HADOOP-816:
--------------------------------------

Why did you introduce map.buffer.size.mb to replace io.sort.mb? Better naming or are you intending to use io.sort.mb as the size to buffer in the reduce?

I'm not sure that making sort adaptive to the block size is right. There are many reasonable configurations when your jvm heap size for the tasks is smaller than your block sizes.

Since the defaults are currently:
  dfs block size: 64mb
  map buffer: 100 mb

I think we are ok, although I guess it would be reasonable to print a LOG.warn if the blocksize was bigger than the buffer size, since that will lead to lower performance.

> Allow the sort benchmark to set a buffersize for the map buffer
> ---------------------------------------------------------------
>
>                 Key: HADOOP-816
>                 URL: http://issues.apache.org/jira/browse/HADOOP-816
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: 816.patch
>
>
> Discovered that framework merges are the hotspots where most time is spent in the sort benchmark. With HADOOP-331, the Map phase could potentially do a merge of the spills (this merge was not done pre-HADOOP-331), and then there is one compulsory merge on each reduce. It may be good to avoid the merge in the Map phase, if possible.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 20:14:48 2006
Return-Path: 
 <hadoop-dev-return-5911-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39848 invoked from network); 12 Dec 2006 20:14:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 20:14:48 -0000
Received: (qmail 28049 invoked by uid 500); 12 Dec 2006 20:14:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28021 invoked by uid 500); 12 Dec 2006 20:14:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27961 invoked by uid 99); 12 Dec 2006 20:14:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 12:14:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 12:14:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 82A88714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 11:52:22 -0800 (PST)
Message-ID: <1125162.1165953142531.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 11:52:22 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-620) replication factor should be
 calucalated based on actual dfs block sizes at the NameNode.
In-Reply-To: <10053514.1161379415091.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-620?page=comments#action_12457853 ] 
            
Raghu Angadi commented on HADOOP-620:
-------------------------------------


Dhruba submitted a patch that calculates total capacity, totalDiskRemaining etc when required by iterating over all the nodes instead of maintaining global counter (HADOOP-814). Replication factor can be approximated in the same way : 

replication = (sum all blocks in each node) / (size of global blockMap).

will add this once 814 is committed.
 

> replication factor should be calucalated based on actual dfs block sizes at the NameNode.
> -----------------------------------------------------------------------------------------
>
>                 Key: HADOOP-620
>                 URL: http://issues.apache.org/jira/browse/HADOOP-620
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>            Priority: Minor
>
> Currently 'dfs -report' calculates replication facto like the following :
>      (totalCapacity - totalDiskRemaining) / (totalSize of dfs files in Name space).
> Problem with this is that this includes disk space used by non-dfs files (e.g. map reduce jobs) on data node. On my single node test, I get replication factor of 100 since I have a 1 GB dfs file with out replication and there is 99GB of unrelated data on the same volume.
> ideally name should calculate it with : (total size of all the blocks known to it) / (total size of files in Name space).
> Initial proposal to keep 'total size of all the blocks' update is to track it in datanode descriptor and update it when namenode receives block reports from the datanode ( and subtract when the datanode is removed).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 19:59:48 2006
Return-Path: 
 <hadoop-dev-return-5909-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36283 invoked from network); 12 Dec 2006 19:59:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 19:59:48 -0000
Received: (qmail 89192 invoked by uid 500); 12 Dec 2006 19:59:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89162 invoked by uid 500); 12 Dec 2006 19:59:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89153 invoked by uid 99); 12 Dec 2006 19:59:54 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 11:59:54 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3FC40714167
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 11:58:26 -0800 (PST)
Message-ID: <13468116.1165953506258.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 11:58:26 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-813) map tasks lost during sort
In-Reply-To: <30843820.1165896621216.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-813?page=comments#action_12457857 ] 
            
Owen O'Malley commented on HADOOP-813:
--------------------------------------

1. sortComplete should be declared volatile.
2. The sortProgress thread should use LOG.info for reporting exceptions rather than System.out.println.
3. I'd probably add a sortProgress.interrupt() when you are closing down so that it can shut down faster.
4. The sortProgress thread should be a daemon thread.
5. There seem to be a lot of other changes in this patch that aren't related to the issue and aren't mentioned in your comment. Are they intentional?


> map tasks lost during sort
> --------------------------
>
>                 Key: HADOOP-813
>                 URL: http://issues.apache.org/jira/browse/HADOOP-813
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.10.0
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.10.0
>
>         Attachments: 813.patch
>
>
> On a 500 node cluster, I had a bunch of map tasks get "lost" because they failed to report progress for 10 minutes. They appear to be in the sort stage at the end of the map. I hypothesize that the patch for HADOOP-331 does not update the map's progress during the sort/merge. If the sort/merge takes more than 10 minutes, the task is lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 20:07:09 2006
Return-Path: 
 <hadoop-dev-return-5910-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37591 invoked from network); 12 Dec 2006 20:07:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 20:07:09 -0000
Received: (qmail 6809 invoked by uid 500); 12 Dec 2006 20:07:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6773 invoked by uid 500); 12 Dec 2006 20:07:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6764 invoked by uid 99); 12 Dec 2006 20:07:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 12:07:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 12:06:53 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B35107141E4
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 12:06:23 -0800 (PST)
Message-ID: <2756933.1165953983731.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 12:06:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-817) Streaming reducers throw OutOfMemory
 for not so large inputs
In-Reply-To: <30192547.1165933587180.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-817?page=comments#action_12457861 ] 
            
Owen O'Malley commented on HADOOP-817:
--------------------------------------

Where are you seeing the out of memory exceptions? You might want to run under java 1.6 to get stack traces.

> Streaming reducers throw OutOfMemory for not so large inputs
> ------------------------------------------------------------
>
>                 Key: HADOOP-817
>                 URL: http://issues.apache.org/jira/browse/HADOOP-817
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: Sanjay Dahiya
>
> I am seeing OutOfMemoryError for moderate size inputs (~70 text files, 20k each ) causing job to fail in streaming. For very small inputs it still succeeds. Looking into details. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 20:32:52 2006
Return-Path: 
 <hadoop-dev-return-5912-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51015 invoked from network); 12 Dec 2006 20:32:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 20:32:52 -0000
Received: (qmail 66181 invoked by uid 500); 12 Dec 2006 20:32:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66163 invoked by uid 500); 12 Dec 2006 20:32:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66147 invoked by uid 99); 12 Dec 2006 20:32:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 12:32:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 12:32:49 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CB231714168
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 12:32:28 -0800 (PST)
Message-ID: <28005417.1165955548829.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 12:32:28 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-571) Path should use URI syntax
In-Reply-To: <6678550.1159825879600.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-571?page=all ]

Doug Cutting updated HADOOP-571:
--------------------------------

    Attachment: uri5.patch

Here (finally) is a version that passes all unit tests.

> Path should use URI syntax
> --------------------------
>
>                 Key: HADOOP-571
>                 URL: http://issues.apache.org/jira/browse/HADOOP-571
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: uri.patch, uri2.patch, uri3.patch, uri4.patch, uri5.patch
>
>
> The following changes are proposed:
> 1. Add a factory/registry of FileSystem implementations.  Given a protocol, hostname and port, it should be possible to get a FileSystem implementation.
> 2. Path's constructor should accept URI-formatted strings & a configuration.
> 3. A new Path method should be added: FileSystem.getFileSystem().  This returns the filesystem named in the path or the default configured filesystem.
> 4. Most methods which currently take FileSystem and Path parameters can be changed to take only Path.
> 5. Many FileSystem operations (create, open, delete, list, etc.) can become convenience methods on Path.
> 6. A URLStreamHandler can be defined in terms of the FileSystem API, so that URLs for any protocol with a registered FileSystem implementation can be accessed with a java.net.URL, permitting FileSystem implementations to be used on the classpath, etc.
> It is tempting to try to replace Path with java.net.URL, but URL's methods are insufficient for mapreduce.  We require directory listings, random access, location hints, etc., which are not supported by existing URLStreamHandler implementations.  But we can expose all FileSystem implementations for access with java.net.URL.
> (From a brainstorm with Owen.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 20:32:53 2006
Return-Path: 
 <hadoop-dev-return-5913-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51071 invoked from network); 12 Dec 2006 20:32:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 20:32:53 -0000
Received: (qmail 66507 invoked by uid 500); 12 Dec 2006 20:33:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66485 invoked by uid 500); 12 Dec 2006 20:33:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66470 invoked by uid 99); 12 Dec 2006 20:33:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 12:33:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 12:32:51 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 27B6A7141A3
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 12:32:31 -0800 (PST)
Message-ID: <2589220.1165955551160.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 12:32:31 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-571) Path should use URI syntax
In-Reply-To: <6678550.1159825879600.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-571?page=all ]

Doug Cutting updated HADOOP-571:
--------------------------------

    Status: Patch Available  (was: In Progress)

Unless there are objections, I'll commit this soon.

> Path should use URI syntax
> --------------------------
>
>                 Key: HADOOP-571
>                 URL: http://issues.apache.org/jira/browse/HADOOP-571
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: uri.patch, uri2.patch, uri3.patch, uri4.patch, uri5.patch
>
>
> The following changes are proposed:
> 1. Add a factory/registry of FileSystem implementations.  Given a protocol, hostname and port, it should be possible to get a FileSystem implementation.
> 2. Path's constructor should accept URI-formatted strings & a configuration.
> 3. A new Path method should be added: FileSystem.getFileSystem().  This returns the filesystem named in the path or the default configured filesystem.
> 4. Most methods which currently take FileSystem and Path parameters can be changed to take only Path.
> 5. Many FileSystem operations (create, open, delete, list, etc.) can become convenience methods on Path.
> 6. A URLStreamHandler can be defined in terms of the FileSystem API, so that URLs for any protocol with a registered FileSystem implementation can be accessed with a java.net.URL, permitting FileSystem implementations to be used on the classpath, etc.
> It is tempting to try to replace Path with java.net.URL, but URL's methods are insufficient for mapreduce.  We require directory listings, random access, location hints, etc., which are not supported by existing URLStreamHandler implementations.  But we can expose all FileSystem implementations for access with java.net.URL.
> (From a brainstorm with Owen.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 20:38:44 2006
Return-Path: 
 <hadoop-dev-return-5914-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52766 invoked from network); 12 Dec 2006 20:38:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 20:38:44 -0000
Received: (qmail 85656 invoked by uid 500); 12 Dec 2006 20:38:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85629 invoked by uid 500); 12 Dec 2006 20:38:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85620 invoked by uid 99); 12 Dec 2006 20:38:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 12:38:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 12:38:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 712637140D2
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 12:38:22 -0800 (PST)
Message-ID: <10781744.1165955902460.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 12:38:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-786) PhasedFileSystem should use debug
 level log for ignored exception.
In-Reply-To: <4522547.1165407081072.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-786?page=all ]

Doug Cutting updated HADOOP-786:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Sanjay!

> PhasedFileSystem should use debug level log for ignored exception.
> ------------------------------------------------------------------
>
>                 Key: HADOOP-786
>                 URL: http://issues.apache.org/jira/browse/HADOOP-786
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Trivial
>             Fix For: 0.10.0
>
>         Attachments: Hadoop-786.patch
>
>
> For ignored exception while file close, if the file was already closed by user, phased file system should log at debug log level. Its to reduce unnecessary lines from log. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 20:41:47 2006
Return-Path: 
 <hadoop-dev-return-5915-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54697 invoked from network); 12 Dec 2006 20:41:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 20:41:47 -0000
Received: (qmail 99649 invoked by uid 500); 12 Dec 2006 20:41:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99622 invoked by uid 500); 12 Dec 2006 20:41:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99606 invoked by uid 99); 12 Dec 2006 20:41:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 12:41:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 12:41:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 44DE37140F6
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 12:41:22 -0800 (PST)
Message-ID: <21266723.1165956082279.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 12:41:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-796) Node failing tasks and failed tasks
 should be more easily accessible through jobtracker history.
In-Reply-To: <33373655.1165527702161.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-796?page=all ]

Doug Cutting updated HADOOP-796:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Sanjay!

> Node failing tasks and failed tasks should be more easily accessible through jobtracker history.
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-796
>                 URL: http://issues.apache.org/jira/browse/HADOOP-796
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: failedtasks.patch
>
>
> JobTracker history should provide quick access to nodes that failed tasks and the tasks that failed. Currently its not very easy to dig through details. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 20:46:44 2006
Return-Path: 
 <hadoop-dev-return-5916-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56801 invoked from network); 12 Dec 2006 20:46:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 20:46:44 -0000
Received: (qmail 9526 invoked by uid 500); 12 Dec 2006 20:46:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9508 invoked by uid 500); 12 Dec 2006 20:46:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9499 invoked by uid 99); 12 Dec 2006 20:46:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 12:46:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 12:46:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EE9C371413F
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 12:46:22 -0800 (PST)
Message-ID: <27791033.1165956382974.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 12:46:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-571) Path should use URI syntax
In-Reply-To: <6678550.1159825879600.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-571?page=comments#action_12457873 ] 
            
Hadoop QA commented on HADOOP-571:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12347043/uri5.patch applied and successfully tested against trunk revision r486289

> Path should use URI syntax
> --------------------------
>
>                 Key: HADOOP-571
>                 URL: http://issues.apache.org/jira/browse/HADOOP-571
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: uri.patch, uri2.patch, uri3.patch, uri4.patch, uri5.patch
>
>
> The following changes are proposed:
> 1. Add a factory/registry of FileSystem implementations.  Given a protocol, hostname and port, it should be possible to get a FileSystem implementation.
> 2. Path's constructor should accept URI-formatted strings & a configuration.
> 3. A new Path method should be added: FileSystem.getFileSystem().  This returns the filesystem named in the path or the default configured filesystem.
> 4. Most methods which currently take FileSystem and Path parameters can be changed to take only Path.
> 5. Many FileSystem operations (create, open, delete, list, etc.) can become convenience methods on Path.
> 6. A URLStreamHandler can be defined in terms of the FileSystem API, so that URLs for any protocol with a registered FileSystem implementation can be accessed with a java.net.URL, permitting FileSystem implementations to be used on the classpath, etc.
> It is tempting to try to replace Path with java.net.URL, but URL's methods are insufficient for mapreduce.  We require directory listings, random access, location hints, etc., which are not supported by existing URLStreamHandler implementations.  But we can expose all FileSystem implementations for access with java.net.URL.
> (From a brainstorm with Owen.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 21:16:44 2006
Return-Path: 
 <hadoop-dev-return-5917-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67179 invoked from network); 12 Dec 2006 21:16:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 21:16:44 -0000
Received: (qmail 47675 invoked by uid 500); 12 Dec 2006 21:16:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47418 invoked by uid 500); 12 Dec 2006 21:16:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47392 invoked by uid 99); 12 Dec 2006 21:16:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:16:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:16:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5F46271413F
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 13:16:22 -0800 (PST)
Message-ID: <24965762.1165958182387.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 13:16:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-764) The memory consumption of
 processReport() in the namenode can be reduced
In-Reply-To: <21824491.1164845001071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-764?page=all ]

Doug Cutting updated HADOOP-764:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba.

> The memory consumption of processReport() in the namenode can be reduced
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-764
>                 URL: http://issues.apache.org/jira/browse/HADOOP-764
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>             Fix For: 0.10.0
>
>         Attachments: processBlockReport3.patch
>
>
> The FSNamesystem.processReport() method converts the blocklist for a datanode into an array by calling node.getBlocks(). Although this memory allocation is transient, it could possibly require the garbage-collector to work that much harder. 
> The method Block.getBlocks() should be deprecated. Code that currently uses this method should instead iterate over the Collection.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 21:18:44 2006
Return-Path: 
 <hadoop-dev-return-5918-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68133 invoked from network); 12 Dec 2006 21:18:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 21:18:44 -0000
Received: (qmail 50663 invoked by uid 500); 12 Dec 2006 21:18:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50423 invoked by uid 500); 12 Dec 2006 21:18:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50414 invoked by uid 99); 12 Dec 2006 21:18:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:18:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:18:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7DA6F71413F
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 13:18:22 -0800 (PST)
Message-ID: <17729128.1165958302511.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 13:18:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-802) mapred.speculative.execution
 description in hadoop-defauls.xml is not complete
In-Reply-To: <15704505.1165538301323.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-802?page=all ]

Doug Cutting updated HADOOP-802:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Nigel!

> mapred.speculative.execution description in hadoop-defauls.xml is not complete
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-802
>                 URL: http://issues.apache.org/jira/browse/HADOOP-802
>             Project: Hadoop
>          Issue Type: Bug
>          Components: conf
>    Affects Versions: 0.9.1
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Trivial
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-802.patch
>
>
> <property>
>   <name>mapred.speculative.execution</name>
>   <value>true</value>
>   <description>If true, then multiple instances of some map tasks may
>   be executed in parallel.</description>
> </property>
> This property also controls speculative execution of reduces, however the description field doesn't indicate that.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 21:24:44 2006
Return-Path: 
 <hadoop-dev-return-5919-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72064 invoked from network); 12 Dec 2006 21:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 21:24:44 -0000
Received: (qmail 62651 invoked by uid 500); 12 Dec 2006 21:24:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62626 invoked by uid 500); 12 Dec 2006 21:24:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62617 invoked by uid 99); 12 Dec 2006 21:24:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:24:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:24:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4C3C67140F6
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 13:24:22 -0800 (PST)
Message-ID: <17247914.1165958662309.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 13:24:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-806) NameNode WebUI : Include link to each
 of datanodes
In-Reply-To: <21979064.1165544001012.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-806?page=all ]

Doug Cutting updated HADOOP-806:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Raghu!

> NameNode WebUI : Include link to each of datanodes
> --------------------------------------------------
>
>                 Key: HADOOP-806
>                 URL: http://issues.apache.org/jira/browse/HADOOP-806
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: dfshealth-806.patch
>
>
> Minor improvement to Namenode webui.
> Datanode in node table on webui should be a link to datanode's frontpage. Note that "Browse the filesystem" link pics a datanode randomly.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 21:36:45 2006
Return-Path: 
 <hadoop-dev-return-5920-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78967 invoked from network); 12 Dec 2006 21:36:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 21:36:45 -0000
Received: (qmail 83545 invoked by uid 500); 12 Dec 2006 21:36:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83524 invoked by uid 500); 12 Dec 2006 21:36:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83515 invoked by uid 99); 12 Dec 2006 21:36:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:36:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:36:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3961E71413F
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 13:36:23 -0800 (PST)
Message-ID: <29910018.1165959383232.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 13:36:23 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-810) The non-existence of the job.xml
 file causes a LOT of tasks of the job fail
In-Reply-To: <12703053.1165626863522.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-810?page=comments#action_12457887 ] 
            
Runping Qi commented on HADOOP-810:
-----------------------------------


If the patch for HADOOP-639 fixed the problem of incorrectly removing job.xml file, then it fixes the root problem of the current problem (HADOOP-810), and I am fine with that. 



> The non-existence of the job.xml file causes a LOT of tasks of the job fail
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-810
>                 URL: http://issues.apache.org/jira/browse/HADOOP-810
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Runping Qi
>         Assigned To: Arun C Murthy
>
> For some reason, the job.xml file disappears from one of the nodes. That causes the following exception:
> java.lang.RuntimeException: java.lang.RuntimeException:  taskTracker/jobcache/job_0039/job.xml not found
> 	at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:551)
> 	at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:472)
> 	at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:453)
> 	at org.apache.hadoop.conf.Configuration.get(Configuration.java:201)
> 	at org.apache.hadoop.conf.Configuration.getBoolean(Configuration.java:286)
> 	at org.apache.hadoop.mapred.JobConf.getKeepFailedTaskFiles(JobConf.java:212)
> 	at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.setJobConf(TaskTracker.java:874)
> 	at org.apache.hadoop.mapred.TaskTracker.launchTaskForJob(TaskTracker.java:313)
> 	at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:307)
> 	at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:691)
> 	at org.apache.hadoop.mapred.TaskTracker.checkForNewTasks(TaskTracker.java:533)
> 	at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:448)
> 	at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
> 	at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)
> That is fine by itself.
> The problem is the task tracker keeps accepting tasks of the same job, and keeps failing them!
> The correct behavior is that it either tries to get the job.xml from the job tracker, or refuses accepting any new tasks 
> of the same job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 21:38:46 2006
Return-Path: 
 <hadoop-dev-return-5921-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79890 invoked from network); 12 Dec 2006 21:38:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 21:38:46 -0000
Received: (qmail 87494 invoked by uid 500); 12 Dec 2006 21:38:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87466 invoked by uid 500); 12 Dec 2006 21:38:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87457 invoked by uid 99); 12 Dec 2006 21:38:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:38:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:38:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2073C71413F
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 13:38:25 -0800 (PST)
Message-ID: <7588369.1165959505130.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 13:38:25 -0800 (PST)
From: "Tom White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-574?page=comments#action_12457889 ] 
            
Tom White commented on HADOOP-574:
----------------------------------

I've now got a version of this that works with HADOOP-571 patch 5. You can specify access key id and secret access key in the URI (Doug's suggestion), or you can specify them in hadoop-site.xml. I haven't implemented support for multiple keys or encrypted keys (James' suggestion), but don't see why this couldn't be added in the future.

I'll create a patch after HADOOP-571 is committed.

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: dependencies.zip, HADOOP-574-v2.patch, HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 21:42:44 2006
Return-Path: 
 <hadoop-dev-return-5922-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81912 invoked from network); 12 Dec 2006 21:42:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 21:42:44 -0000
Received: (qmail 97395 invoked by uid 500); 12 Dec 2006 21:42:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97371 invoked by uid 500); 12 Dec 2006 21:42:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97362 invoked by uid 99); 12 Dec 2006 21:42:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:42:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:42:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 55AF971413F
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 13:42:22 -0800 (PST)
Message-ID: <24275229.1165959742348.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 13:42:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-808) Enhance 'bin/hadoop job -submit <>'
In-Reply-To: <8517460.1165576881049.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-808?page=all ]

Doug Cutting updated HADOOP-808:
--------------------------------

    Status: Open  (was: Patch Available)

If someone's going to write a main() like method, why couldn't they simply write a main() that submits the job?  I don't see what this simplifies.

> Enhance 'bin/hadoop job -submit <>'
> -----------------------------------
>
>                 Key: HADOOP-808
>                 URL: http://issues.apache.org/jira/browse/HADOOP-808
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-808_1_20061208.patch, myjob.tgz
>
>
> Today 'bin/hadoop job -submit' takes a config file and just does a JobClient.submitJob(jobConf), this isn't flexible enough for cases where the user wants to submit a job which calls his main(), does some work and then calls 'JobClient.runJob', I propose we enhance this subcommand to handle that scenario. This could be really useful for the time we decide to setup a simple webpage with 'form' where the user uploads a job.xml & job.jar and we can fire the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 21:48:45 2006
Return-Path: 
 <hadoop-dev-return-5923-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86557 invoked from network); 12 Dec 2006 21:48:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 21:48:45 -0000
Received: (qmail 11082 invoked by uid 500); 12 Dec 2006 21:48:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11054 invoked by uid 500); 12 Dec 2006 21:48:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11045 invoked by uid 99); 12 Dec 2006 21:48:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:48:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:48:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2189E7140F6
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 13:48:23 -0800 (PST)
Message-ID: <15311114.1165960103134.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 13:48:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-618) JobProfile and JobSubmissionProtocol
 should be public
In-Reply-To: <24570786.1161364115035.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-618?page=all ]

Doug Cutting updated HADOOP-618:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Arun!

> JobProfile and JobSubmissionProtocol should be public
> -----------------------------------------------------
>
>                 Key: HADOOP-618
>                 URL: http://issues.apache.org/jira/browse/HADOOP-618
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Runping Qi
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-618_1_20061208.patch
>
>
> Are there any reasons why they are not public?
> Making them public adds a lot of flexibility for the client to interact with the Hadoop.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 21:52:44 2006
Return-Path: 
 <hadoop-dev-return-5924-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87461 invoked from network); 12 Dec 2006 21:52:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 21:52:44 -0000
Received: (qmail 16104 invoked by uid 500); 12 Dec 2006 21:52:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16087 invoked by uid 500); 12 Dec 2006 21:52:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16078 invoked by uid 99); 12 Dec 2006 21:52:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:52:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:52:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D7BD97140F6
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 13:52:22 -0800 (PST)
Message-ID: <946295.1165960342880.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 13:52:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-782) TaskTracker.java:killOverflowingTasks
 & TaskTracker.java:markUnresponsiveTasks only put the tip in tasksToCleanup
 queue, they don't update the runningJobs
In-Reply-To: <5740798.1165343781034.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-782?page=all ]

Doug Cutting updated HADOOP-782:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Arun!

> TaskTracker.java:killOverflowingTasks & TaskTracker.java:markUnresponsiveTasks only put the tip in tasksToCleanup queue, they don't update the runningJobs
> ----------------------------------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-782
>                 URL: http://issues.apache.org/jira/browse/HADOOP-782
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-782_1_20061209.patch
>
>
> Both killOverflowingTasks and markUnresponsiveTasks only put the tip in 'tasksToCleanup' queue, they should also call 'removeTaskFromJob' to update the 'runningJobs' map to reflect the fact that the task is no longer running. Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 22:04:44 2006
Return-Path: 
 <hadoop-dev-return-5925-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95489 invoked from network); 12 Dec 2006 22:04:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 22:04:44 -0000
Received: (qmail 36805 invoked by uid 500); 12 Dec 2006 22:04:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36638 invoked by uid 500); 12 Dec 2006 22:04:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36622 invoked by uid 99); 12 Dec 2006 22:04:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:04:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:04:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 759D4714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 14:04:22 -0800 (PST)
Message-ID: <11213875.1165961062478.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 14:04:22 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-808) Enhance 'bin/hadoop job -submit <>'
In-Reply-To: <8517460.1165576881049.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-808?page=comments#action_12457900 ] 
            
Runping Qi commented on HADOOP-808:
-----------------------------------


The user may write a generic main() to submit jobs represented by job.xml files. Those files may be copyied from a repository, and/or be modified by the user using his/her favorite editor.


> Enhance 'bin/hadoop job -submit <>'
> -----------------------------------
>
>                 Key: HADOOP-808
>                 URL: http://issues.apache.org/jira/browse/HADOOP-808
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-808_1_20061208.patch, myjob.tgz
>
>
> Today 'bin/hadoop job -submit' takes a config file and just does a JobClient.submitJob(jobConf), this isn't flexible enough for cases where the user wants to submit a job which calls his main(), does some work and then calls 'JobClient.runJob', I propose we enhance this subcommand to handle that scenario. This could be really useful for the time we decide to setup a simple webpage with 'form' where the user uploads a job.xml & job.jar and we can fire the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 22:14:44 2006
Return-Path: 
 <hadoop-dev-return-5926-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 442 invoked from network); 12 Dec 2006 22:14:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 22:14:44 -0000
Received: (qmail 54831 invoked by uid 500); 12 Dec 2006 22:14:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54813 invoked by uid 500); 12 Dec 2006 22:14:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54803 invoked by uid 99); 12 Dec 2006 22:14:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:14:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:14:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4AF387140F6
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 14:14:22 -0800 (PST)
Message-ID: <31114165.1165961662304.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 14:14:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-792) Invalid dfs -mv can trash your entire
 dfs
In-Reply-To: <7912715.1165469301076.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-792?page=all ]

Doug Cutting updated HADOOP-792:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba!

> Invalid dfs -mv can trash your entire dfs
> -----------------------------------------
>
>                 Key: HADOOP-792
>                 URL: http://issues.apache.org/jira/browse/HADOOP-792
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Chris Schneider
>             Fix For: 0.10.0
>
>         Attachments: renameerrorcode.patch
>
>
> If the target path of the dfs -mv command exists within the source path, the dfs becomes corrupt. For example:
> % hadoop dfs -mkdir target
> % hadoop dfs -mv / target
> I'm not certain whether this is reproducible in the current trunk, but I'd bet that it is.
> This problem successfully circumvented my own patch to make dfs -rm a little safer (see my email c.2006-08-30 to nutch-dev for details). I had been deleting old crawl directories from the DFS by copying their names and pasting them into my command buffer. At one point, I paused to do something else, copied some other text (which unfortunately began with a Java comment and included carriage returns), then went back to removing the crawl directories. I must not have pressed hard enough on the "c" key when I did my next copy, since when I pasted into the command buffer, hadoop immediately began executing a dfs -rm / command. No problem - I'm protected, because my patched dfs command is just going to try to move / to /trash (and fail), right?
> Wrong! Even though hadoop isn't really capable of such a move, it apparently tries hard enough to corrupt the namenode's DB.
> Thankfully, I ran into this problem at a relatively opportune time, when the contents of my dfs had little value.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 22:17:43 2006
Return-Path: 
 <hadoop-dev-return-5927-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1727 invoked from network); 12 Dec 2006 22:17:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 22:17:43 -0000
Received: (qmail 62534 invoked by uid 500); 12 Dec 2006 22:17:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62286 invoked by uid 500); 12 Dec 2006 22:17:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62271 invoked by uid 99); 12 Dec 2006 22:17:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:17:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:17:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 55E12714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 14:17:22 -0800 (PST)
Message-ID: <19843094.1165961842349.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 14:17:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-808) Enhance 'bin/hadoop job -submit <>'
In-Reply-To: <8517460.1165576881049.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-808?page=comments#action_12457907 ] 
            
Owen O'Malley commented on HADOOP-808:
--------------------------------------

But they can already do that.

% bin/hadoop job -submit foo.xml

will submit a pre-built JobConf as a job. This patch just enables the config to have a mapred.job.class that must extend ToolBase that can manipulate the config before it is submitted.

I think it would be better to just have a richer cli processing in the generic main. In particular, it would be nice to have:

% bin/hadoop job -submit -Dxxx=yyy -Daaa=bbb foo.xml in-dir out-dir 

To load foo.xml as a JobConf, change the values of xxx and bbb, set the input directory to in-dir and the output director to out-dir and submit it. That way, you can run without a main and yet make the most common changes.

> Enhance 'bin/hadoop job -submit <>'
> -----------------------------------
>
>                 Key: HADOOP-808
>                 URL: http://issues.apache.org/jira/browse/HADOOP-808
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-808_1_20061208.patch, myjob.tgz
>
>
> Today 'bin/hadoop job -submit' takes a config file and just does a JobClient.submitJob(jobConf), this isn't flexible enough for cases where the user wants to submit a job which calls his main(), does some work and then calls 'JobClient.runJob', I propose we enhance this subcommand to handle that scenario. This could be really useful for the time we decide to setup a simple webpage with 'form' where the user uploads a job.xml & job.jar and we can fire the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 22:17:46 2006
Return-Path: 
 <hadoop-dev-return-5928-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1772 invoked from network); 12 Dec 2006 22:17:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 22:17:46 -0000
Received: (qmail 62593 invoked by uid 500); 12 Dec 2006 22:17:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62570 invoked by uid 500); 12 Dec 2006 22:17:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62561 invoked by uid 99); 12 Dec 2006 22:17:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:17:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:17:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 795E571404B
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 14:17:24 -0800 (PST)
Message-ID: <27847805.1165961844494.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 14:17:24 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-813) map tasks lost during sort
In-Reply-To: <30843820.1165896621216.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-813?page=all ]

Owen O'Malley updated HADOOP-813:
---------------------------------

    Status: Open  (was: Patch Available)

> map tasks lost during sort
> --------------------------
>
>                 Key: HADOOP-813
>                 URL: http://issues.apache.org/jira/browse/HADOOP-813
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.10.0
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.10.0
>
>         Attachments: 813.patch
>
>
> On a 500 node cluster, I had a bunch of map tasks get "lost" because they failed to report progress for 10 minutes. They appear to be in the sort stage at the end of the map. I hypothesize that the patch for HADOOP-331 does not update the map's progress during the sort/merge. If the sort/merge takes more than 10 minutes, the task is lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 22:25:51 2006
Return-Path: 
 <hadoop-dev-return-5929-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6586 invoked from network); 12 Dec 2006 22:25:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 22:25:51 -0000
Received: (qmail 82985 invoked by uid 500); 12 Dec 2006 22:25:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82953 invoked by uid 500); 12 Dec 2006 22:25:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82936 invoked by uid 99); 12 Dec 2006 22:25:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:25:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:25:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E39F07141A2
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 14:25:27 -0800 (PST)
Message-ID: <25039564.1165962327929.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 14:25:27 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-673) the task execution environment should
 have a current working directory that is task specific
In-Reply-To: <4956716.1162509256690.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-673?page=all ]

Doug Cutting updated HADOOP-673:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Mahadev!

> the task execution environment should have a current working directory that is task specific
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-673
>                 URL: http://issues.apache.org/jira/browse/HADOOP-673
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.10.0
>
>         Attachments: cwd.patch, cwd_1.patch
>
>
> The tasks should be run in a work directory that is specific to a single task. In particular, I'd suggest using the <local>/jobcache/<jobid>/<taskid> as the current working directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 22:29:45 2006
Return-Path: 
 <hadoop-dev-return-5930-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7903 invoked from network); 12 Dec 2006 22:29:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 22:29:45 -0000
Received: (qmail 90661 invoked by uid 500); 12 Dec 2006 22:29:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90635 invoked by uid 500); 12 Dec 2006 22:29:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90626 invoked by uid 99); 12 Dec 2006 22:29:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:29:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:29:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A449271413D
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 14:29:23 -0800 (PST)
Message-ID: <22779290.1165962563670.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 14:29:23 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-454) hadoop du optionally behave like
 unix's du -s
In-Reply-To: <11062171.1155582313998.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-454?page=all ]

Hairong Kuang reassigned HADOOP-454:
------------------------------------

    Assignee: Hairong Kuang

> hadoop du optionally behave like unix's du -s
> ---------------------------------------------
>
>                 Key: HADOOP-454
>                 URL: http://issues.apache.org/jira/browse/HADOOP-454
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Marco Nicosia
>         Assigned To: Hairong Kuang
>            Priority: Trivial
>
> In Unix, the user has the option to specify a -s flag:
>      -s      Display an entry for each specified file.  (Equivalent to -d 0)
> Instead of providing data for the subdirectories of the arguments, du prints the total usage of each argument, without printing subdirectories.
> This is very convenient for those looking to find how much space is used by a particular branch, without requring them to add up all the sub-usages.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 22:33:45 2006
Return-Path: 
 <hadoop-dev-return-5931-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9682 invoked from network); 12 Dec 2006 22:33:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 22:33:45 -0000
Received: (qmail 5325 invoked by uid 500); 12 Dec 2006 22:33:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5301 invoked by uid 500); 12 Dec 2006 22:33:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5292 invoked by uid 99); 12 Dec 2006 22:33:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:33:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:33:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 21D9E7141A2
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 14:33:24 -0800 (PST)
Message-ID: <22201001.1165962804136.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 14:33:24 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-816) Allow the sort benchmark to set a
 buffersize for the map buffer
In-Reply-To: <702305.1165916183398.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-816?page=all ]

Owen O'Malley updated HADOOP-816:
---------------------------------

    Status: Open  (was: Patch Available)

> Allow the sort benchmark to set a buffersize for the map buffer
> ---------------------------------------------------------------
>
>                 Key: HADOOP-816
>                 URL: http://issues.apache.org/jira/browse/HADOOP-816
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: 816.patch
>
>
> Discovered that framework merges are the hotspots where most time is spent in the sort benchmark. With HADOOP-331, the Map phase could potentially do a merge of the spills (this merge was not done pre-HADOOP-331), and then there is one compulsory merge on each reduce. It may be good to avoid the merge in the Map phase, if possible.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 22:33:47 2006
Return-Path: 
 <hadoop-dev-return-5932-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9735 invoked from network); 12 Dec 2006 22:33:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 22:33:47 -0000
Received: (qmail 5605 invoked by uid 500); 12 Dec 2006 22:33:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5568 invoked by uid 500); 12 Dec 2006 22:33:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5556 invoked by uid 99); 12 Dec 2006 22:33:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:33:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:33:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8934771404B
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 14:33:25 -0800 (PST)
Message-ID: <19840204.1165962805559.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 14:33:25 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-808) Enhance 'bin/hadoop job -submit <>'
In-Reply-To: <8517460.1165576881049.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-808?page=comments#action_12457923 ] 
            
Doug Cutting commented on HADOOP-808:
-------------------------------------

And 'in-dir out-dir' is shorthand for -Dmapred.input.dir=xxx -Dmapred.output.dir=yyy, so isn't strictly required, but would be convenient.

Also, the foo.xml becomes essentially a config file.  So another way to do this might be to permit the specification of multiple config files that are read in order.

bin/hadoop job -submit -conf my-site.xml -conf my-job.xml -Dmapred.input.dir=xxx ...


> Enhance 'bin/hadoop job -submit <>'
> -----------------------------------
>
>                 Key: HADOOP-808
>                 URL: http://issues.apache.org/jira/browse/HADOOP-808
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-808_1_20061208.patch, myjob.tgz
>
>
> Today 'bin/hadoop job -submit' takes a config file and just does a JobClient.submitJob(jobConf), this isn't flexible enough for cases where the user wants to submit a job which calls his main(), does some work and then calls 'JobClient.runJob', I propose we enhance this subcommand to handle that scenario. This could be really useful for the time we decide to setup a simple webpage with 'form' where the user uploads a job.xml & job.jar and we can fire the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 22:33:48 2006
Return-Path: 
 <hadoop-dev-return-5933-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9759 invoked from network); 12 Dec 2006 22:33:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 22:33:48 -0000
Received: (qmail 5659 invoked by uid 500); 12 Dec 2006 22:33:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5632 invoked by uid 500); 12 Dec 2006 22:33:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5569 invoked by uid 99); 12 Dec 2006 22:33:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:33:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:33:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AD0A97141A4
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 14:33:25 -0800 (PST)
Message-ID: <9893078.1165962805706.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 14:33:25 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-819) LineRecordWriter should not always
 insert tab char between key and value
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

LineRecordWriter should not always insert tab char between key and value
------------------------------------------------------------------------

                 Key: HADOOP-819
                 URL: http://issues.apache.org/jira/browse/HADOOP-819
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Runping Qi



With the current implementation of LineRecordWriter in TextOutputFormat, the client cannot pass null key/or value to the write function, and a tab char is always inserted between  the key and value. This works fine most time. However, in some 
cases, one just does not want to have the extra tab char. A common example is that, if I need to implement a utility similar 
to the unix sort with some fields in the lines as the sort key, I can have my map to extract the sort key from each line and pass the whole line as the value. The reducer just outputs the values and ignore the keys. However, if I use TextOutputFormat, my output will have an extra tab key in each of the lines, which is annoying. 

A simple solution is that let the write function of LineRecordWriter accept null key argument, and write out the value only if the key is null. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 23:02:44 2006
Return-Path: 
 <hadoop-dev-return-5934-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19892 invoked from network); 12 Dec 2006 23:02:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 23:02:44 -0000
Received: (qmail 62446 invoked by uid 500); 12 Dec 2006 23:02:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62416 invoked by uid 500); 12 Dec 2006 23:02:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62406 invoked by uid 99); 12 Dec 2006 23:02:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 15:02:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 15:02:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1EE3B7140D2
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 15:02:23 -0800 (PST)
Message-ID: <28250163.1165964543070.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 15:02:23 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-454) hadoop du optionally behave like
 unix's du -s
In-Reply-To: <11062171.1155582313998.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-454?page=comments#action_12457933 ] 
            
Hairong Kuang commented on HADOOP-454:
--------------------------------------

I plan to solve the problem by introducing a new command "dus", which prints the total disk usage for each argument. This solution is aligned to what we have in the dfs shell: "lsr" for "ls -r" and "rmr" for "rm -r".

A better and a long term solution is to allow options for dfs commands, i.e., supporting "du -s" instead of "dus". But we need to enhance dfs command arguments parsing to handle options. Something like common-cli is a good choice.

> hadoop du optionally behave like unix's du -s
> ---------------------------------------------
>
>                 Key: HADOOP-454
>                 URL: http://issues.apache.org/jira/browse/HADOOP-454
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Marco Nicosia
>         Assigned To: Hairong Kuang
>            Priority: Trivial
>
> In Unix, the user has the option to specify a -s flag:
>      -s      Display an entry for each specified file.  (Equivalent to -d 0)
> Instead of providing data for the subdirectories of the arguments, du prints the total usage of each argument, without printing subdirectories.
> This is very convenient for those looking to find how much space is used by a particular branch, without requring them to add up all the sub-usages.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 23:02:46 2006
Return-Path: 
 <hadoop-dev-return-5935-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19926 invoked from network); 12 Dec 2006 23:02:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 23:02:46 -0000
Received: (qmail 62728 invoked by uid 500); 12 Dec 2006 23:02:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62699 invoked by uid 500); 12 Dec 2006 23:02:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62690 invoked by uid 99); 12 Dec 2006 23:02:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 15:02:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 15:02:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 39580714167
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 15:02:25 -0800 (PST)
Message-ID: <19189512.1165964545232.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 15:02:25 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-571) Path should use URI syntax
In-Reply-To: <6678550.1159825879600.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-571?page=all ]

Doug Cutting updated HADOOP-571:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.

> Path should use URI syntax
> --------------------------
>
>                 Key: HADOOP-571
>                 URL: http://issues.apache.org/jira/browse/HADOOP-571
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: uri.patch, uri2.patch, uri3.patch, uri4.patch, uri5.patch
>
>
> The following changes are proposed:
> 1. Add a factory/registry of FileSystem implementations.  Given a protocol, hostname and port, it should be possible to get a FileSystem implementation.
> 2. Path's constructor should accept URI-formatted strings & a configuration.
> 3. A new Path method should be added: FileSystem.getFileSystem().  This returns the filesystem named in the path or the default configured filesystem.
> 4. Most methods which currently take FileSystem and Path parameters can be changed to take only Path.
> 5. Many FileSystem operations (create, open, delete, list, etc.) can become convenience methods on Path.
> 6. A URLStreamHandler can be defined in terms of the FileSystem API, so that URLs for any protocol with a registered FileSystem implementation can be accessed with a java.net.URL, permitting FileSystem implementations to be used on the classpath, etc.
> It is tempting to try to replace Path with java.net.URL, but URL's methods are insufficient for mapreduce.  We require directory listings, random access, location hints, etc., which are not supported by existing URLStreamHandler implementations.  But we can expose all FileSystem implementations for access with java.net.URL.
> (From a brainstorm with Owen.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 23:29:44 2006
Return-Path: 
 <hadoop-dev-return-5936-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26456 invoked from network); 12 Dec 2006 23:29:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 23:29:44 -0000
Received: (qmail 91904 invoked by uid 500); 12 Dec 2006 23:29:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91662 invoked by uid 500); 12 Dec 2006 23:29:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91653 invoked by uid 99); 12 Dec 2006 23:29:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 15:29:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 15:29:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 745DF714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 15:29:22 -0800 (PST)
Message-ID: <33492382.1165966162474.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 15:29:22 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-814) Increase dfs scalability by
 optimizing locking on namenode.
In-Reply-To: <7461200.1165900101047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-814?page=comments#action_12457939 ] 
            
Konstantin Shvachko commented on HADOOP-814:
--------------------------------------------

= I like the idea of checking whether the data-node is alive before locking the whole namespace.

= I do not understand whether the removal of updateStats() is driven by the locking changes?
= As a result you calculate totalCapacity and totalRemaining every time a client requests it.
   I'm not worried that it'll take longer to sum fields for all nodes,
   I'm worried this it will lock the namespace for a longer period of time.
= NameNode.getStats() calculates totalCapacity twice, which gets expensive in your implementation.
        results[0] = namesystem.totalCapacity();
        results[1] = namesystem.totalCapacity() - namesystem.totalRemaining();
= Another bad result that you are not updating the totalLoad field,
   which disables load balancing on the cluster.


> Increase dfs scalability by optimizing locking on namenode.
> -----------------------------------------------------------
>
>                 Key: HADOOP-814
>                 URL: http://issues.apache.org/jira/browse/HADOOP-814
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: heartbeatlock.patch
>
>
> The current dfs namenode encounters locking bottlenecks when the number of datanodes is large. The namenode uses a single global lock to protect access to data structures. One key area is heartbeat processing. The lower the cost of processing a heartbeat, more the number of nodes HDFS can support.  A simple change to this current locking model can increase the scalability. Here are the details:
> Case 1: Currently we have three locks, the global lock (on FSNamesystem), the heartbeat lock and the datanodeMap lock. The following function is called when a heartbeat is received by the Namenode
> public synchronized FSNamesystem. gotHeartbeat() { ........ (A)
>     synchronized (heartbeat) {                                        ........ (B)
>       synchronized (datanodeMap) {                               ......... (C)
>    ...
>      }
> }
> In the above piece of code, statement (A) acquires the global-FSNamesystem-lock. This synchronization can be safely removed (remove updateStats too). This means that a heartbeat from the datanode can be processed without holding the FSnamesystem-global-lock.
> Case 2: A following thread called the heartbeatCheck thread periodically traverses all known Datanodes to determine if any of them has timed out. It is of the following form:
> void FSNamesystem.heartbeatCheck() {
>             synchronized (this) {                                        ........... (D)
>                         synchronized (heartbeats) {                .............(E) 
> }
> This thread acquires the global-FSNamesystem lock in Statement (D). This statement (D) can be removed. Instead the loop can check to see if any nodes are dead. If a dead node is found, only then it acquires the FSNamesystem-global-lock.
> It is possible that fixing the above two cases will cause HDFS to scale to higher number of nodes.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 23:29:45 2006
Return-Path: 
 <hadoop-dev-return-5937-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26500 invoked from network); 12 Dec 2006 23:29:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 23:29:45 -0000
Received: (qmail 92174 invoked by uid 500); 12 Dec 2006 23:29:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91926 invoked by uid 500); 12 Dec 2006 23:29:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91917 invoked by uid 99); 12 Dec 2006 23:29:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 15:29:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 15:29:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DF0B07140D2
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 15:29:23 -0800 (PST)
Message-ID: <3457782.1165966163911.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 15:29:23 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-784) In caching if localizing the cache
 throws out an error sometimes the task failure is not updated
In-Reply-To: <609505.1165384461212.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-784?page=all ]

Mahadev konar resolved HADOOP-784.
----------------------------------

    Resolution: Fixed

resolved byt the patch in Hadoop-673. I should have mentioned that the patch fixes this issue as well.

> In caching if localizing the cache throws out an error sometimes the task failure is not updated
> ------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-784
>                 URL: http://issues.apache.org/jira/browse/HADOOP-784
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>
> if localize cache throws out an exception the release cache throws out a null pointer exception which leads to a situation where the task has failed but it is not reported back to the tasktracker. The tasktrakcer still thinks the tasks are running and this failure is never communicated to the tasktracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 23:29:52 2006
Return-Path: 
 <hadoop-dev-return-5938-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26689 invoked from network); 12 Dec 2006 23:29:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 23:29:52 -0000
Received: (qmail 92641 invoked by uid 500); 12 Dec 2006 23:29:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92613 invoked by uid 500); 12 Dec 2006 23:29:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92601 invoked by uid 99); 12 Dec 2006 23:29:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 15:29:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 15:29:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 51A54714167
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 15:29:28 -0800 (PST)
Message-ID: <24743858.1165966168332.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 15:29:28 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-748) the delete in localfilesystem
 traverses symlinks to delete files which is not expected
In-Reply-To: <21932766.1164661223326.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-748?page=all ]

Mahadev konar resolved HADOOP-748.
----------------------------------

    Resolution: Fixed

resolved by the patch for HADOOP-673.

> the delete in localfilesystem traverses symlinks to delete files which is not expected
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-748
>                 URL: http://issues.apache.org/jira/browse/HADOOP-748
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>         Attachments: fullydelete.patch
>
>
> the fullyDelete in FileUtil follows symlinks and deletes all the files in the symlinks. This is unexpected behaviour. Creates issues with caching as well.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 12 23:48:42 2006
Return-Path: 
 <hadoop-dev-return-5939-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32768 invoked from network); 12 Dec 2006 23:48:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 23:48:42 -0000
Received: (qmail 14263 invoked by uid 500); 12 Dec 2006 23:48:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14229 invoked by uid 500); 12 Dec 2006 23:48:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14220 invoked by uid 99); 12 Dec 2006 23:48:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 15:48:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 15:48:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1B4BE714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 15:48:21 -0800 (PST)
Message-ID: <15745259.1165967301109.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 15:48:21 -0800 (PST)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-820) NameNode startup fails if edit log
 terminates prematurely
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

NameNode startup fails if edit log terminates prematurely
---------------------------------------------------------

                 Key: HADOOP-820
                 URL: http://issues.apache.org/jira/browse/HADOOP-820
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
         Environment: ~50 node cluster
            Reporter: Bryan Pendleton


I ran out of space on the device that stores the edit log, resulting in an edit log that is truncated mid transaction.

Ideally, the NameNode should start up, in SafeMode or the like, whenever this happens. Right now, you get this stack trace:

2006-12-12 15:33:57,212 ERROR org.apache.hadoop.dfs.NameNode: java.io.EOFExcepti
on
        at java.io.DataInputStream.readUnsignedShort(DataInputStream.java:310)
        at org.apache.hadoop.io.UTF8.readFields(UTF8.java:104)
        at org.apache.hadoop.dfs.FSEditLog.loadFSEdits(FSEditLog.java:227)
        at org.apache.hadoop.dfs.FSImage.loadFSImage(FSImage.java:191)
        at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:320)
        at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:226)
        at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:146)
        at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:138)
        at org.apache.hadoop.dfs.NameNode.main(NameNode.java:589)



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 00:35:45 2006
Return-Path: 
 <hadoop-dev-return-5940-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48278 invoked from network); 13 Dec 2006 00:35:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 00:35:45 -0000
Received: (qmail 97588 invoked by uid 500); 13 Dec 2006 00:35:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97549 invoked by uid 500); 13 Dec 2006 00:35:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97526 invoked by uid 99); 13 Dec 2006 00:35:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 16:35:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 16:35:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0F0A971404B
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 16:35:23 -0800 (PST)
Message-ID: <29376306.1165970123059.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 16:35:23 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-432) support undelete, snapshots, or other
 mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-432?page=all ]

Wendy Chien updated HADOOP-432:
-------------------------------

    Attachment: undelete17.patch

added unit test for undelete

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch, undelete17.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 00:35:47 2006
Return-Path: 
 <hadoop-dev-return-5941-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48338 invoked from network); 13 Dec 2006 00:35:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 00:35:47 -0000
Received: (qmail 97984 invoked by uid 500); 13 Dec 2006 00:35:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97945 invoked by uid 500); 13 Dec 2006 00:35:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97927 invoked by uid 99); 13 Dec 2006 00:35:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 16:35:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 16:35:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1AD49714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 16:35:25 -0800 (PST)
Message-ID: <32309990.1165970125107.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 16:35:25 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-432) support undelete, snapshots, or other
 mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-432?page=all ]

Wendy Chien updated HADOOP-432:
-------------------------------

    Status: Patch Available  (was: Open)

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch, undelete17.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 00:41:44 2006
Return-Path: 
 <hadoop-dev-return-5942-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50029 invoked from network); 13 Dec 2006 00:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 00:41:44 -0000
Received: (qmail 11748 invoked by uid 500); 13 Dec 2006 00:41:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11721 invoked by uid 500); 13 Dec 2006 00:41:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11712 invoked by uid 99); 13 Dec 2006 00:41:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 16:41:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 16:41:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 42BC471404B
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 16:41:23 -0800 (PST)
Message-ID: <16527953.1165970483270.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 16:41:23 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12457970 ] 
            
Wendy Chien commented on HADOOP-432:
------------------------------------

Responding to Yoram...  (in the final design)
-trashSize is kept up to date
-when we run the trash collector, it removes all the files that have expired (older than mintime).  otherwise trash would always be at the maxsize.
-the purge command allows the user to clear things from the trash bin. 


> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch, undelete17.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 01:05:44 2006
Return-Path: 
 <hadoop-dev-return-5943-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55754 invoked from network); 13 Dec 2006 01:05:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 01:05:44 -0000
Received: (qmail 51990 invoked by uid 500); 13 Dec 2006 01:05:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51954 invoked by uid 500); 13 Dec 2006 01:05:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51945 invoked by uid 99); 13 Dec 2006 01:05:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:05:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:05:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1BAF77140D2
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 17:05:23 -0800 (PST)
Message-ID: <6496054.1165971923110.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 17:05:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-794) JobTracker crashes with
 ArithmeticException
In-Reply-To: <20588755.1165516221125.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-794?page=all ]

Owen O'Malley reassigned HADOOP-794:
------------------------------------

    Assignee: Owen O'Malley

> JobTracker crashes with ArithmeticException
> -------------------------------------------
>
>                 Key: HADOOP-794
>                 URL: http://issues.apache.org/jira/browse/HADOOP-794
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Nigel Daley
>         Assigned To: Owen O'Malley
>
> The sort benchmark on 20 nodes failed for me with an ArithmeticException.  Sort.java calculates the number of maps and reduces dynamically based on the cluster size.  I'm guessing at the time it did the calculation, the jobtracker had heard from 0 task trackers (which seems odd since I wait 1 minute after starting the jobtracker before starting Sort).
> From the job output:
> Running on 0 nodes to sort from /sortBenchmark20/input into /sortBenchmark20/output with 0 reduces.
> From the JobTracker log:
> 2006-12-07 07:10:06,709 ERROR org.apache.hadoop.mapred.JobTracker: Job initialization failed:
> java.lang.ArithmeticException: / by zero
>         at org.apache.hadoop.mapred.InputFormatBase.getSplits(InputFormatBase.java:130)
>         at org.apache.hadoop.mapred.JobInProgress.initTasks(JobInProgress.java:125)
>         at org.apache.hadoop.mapred.JobTracker$JobInitThread.run(JobTracker.java:326)
>         at java.lang.Thread.run(Thread.java:595)
> The jobtacker should check for illegal inputs like this and not fall over.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 01:07:44 2006
Return-Path: 
 <hadoop-dev-return-5944-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56065 invoked from network); 13 Dec 2006 01:07:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 01:07:44 -0000
Received: (qmail 53377 invoked by uid 500); 13 Dec 2006 01:07:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53344 invoked by uid 500); 13 Dec 2006 01:07:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53332 invoked by uid 99); 13 Dec 2006 01:07:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:07:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:07:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 279737140D2
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 17:07:23 -0800 (PST)
Message-ID: <5257908.1165972043159.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 17:07:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-794) JobTracker crashes with
 ArithmeticException
In-Reply-To: <20588755.1165516221125.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-794?page=all ]

Owen O'Malley updated HADOOP-794:
---------------------------------

    Attachment: div-zero.patch

This patch protects against requesting 0 maps. The sort benchmark still will have problems if it is run with 0 task trackers because it will request 0 reduces. The proper fix for tat is to wait until there are a reasonable number of task trackers before submitting the job. This patch also adds a test case that requests 0 maps.

> JobTracker crashes with ArithmeticException
> -------------------------------------------
>
>                 Key: HADOOP-794
>                 URL: http://issues.apache.org/jira/browse/HADOOP-794
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Nigel Daley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: div-zero.patch
>
>
> The sort benchmark on 20 nodes failed for me with an ArithmeticException.  Sort.java calculates the number of maps and reduces dynamically based on the cluster size.  I'm guessing at the time it did the calculation, the jobtracker had heard from 0 task trackers (which seems odd since I wait 1 minute after starting the jobtracker before starting Sort).
> From the job output:
> Running on 0 nodes to sort from /sortBenchmark20/input into /sortBenchmark20/output with 0 reduces.
> From the JobTracker log:
> 2006-12-07 07:10:06,709 ERROR org.apache.hadoop.mapred.JobTracker: Job initialization failed:
> java.lang.ArithmeticException: / by zero
>         at org.apache.hadoop.mapred.InputFormatBase.getSplits(InputFormatBase.java:130)
>         at org.apache.hadoop.mapred.JobInProgress.initTasks(JobInProgress.java:125)
>         at org.apache.hadoop.mapred.JobTracker$JobInitThread.run(JobTracker.java:326)
>         at java.lang.Thread.run(Thread.java:595)
> The jobtacker should check for illegal inputs like this and not fall over.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 01:07:46 2006
Return-Path: 
 <hadoop-dev-return-5945-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56106 invoked from network); 13 Dec 2006 01:07:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 01:07:46 -0000
Received: (qmail 53642 invoked by uid 500); 13 Dec 2006 01:07:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53607 invoked by uid 500); 13 Dec 2006 01:07:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53598 invoked by uid 99); 13 Dec 2006 01:07:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:07:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:07:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AE2F7714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 17:07:24 -0800 (PST)
Message-ID: <7371210.1165972044711.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 17:07:24 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-814) Increase dfs scalability by optimizing
 locking on namenode.
In-Reply-To: <7461200.1165900101047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-814?page=all ]

dhruba borthakur updated HADOOP-814:
------------------------------------

    Attachment: heartbeatlock2.patch

A new patch that incorporates Konstantin's review comments.

The updateStats() method is removed because we do not want to acquire the global lock (just for computing statistics) while processing heartbeats.

The tradeoff is to compute the global stats from per-node stats when a user request to retrieve startistics is processed by the namenode. In the current code, every heartbeat request is acquiring the global lock to update the global statistics counters.


> Increase dfs scalability by optimizing locking on namenode.
> -----------------------------------------------------------
>
>                 Key: HADOOP-814
>                 URL: http://issues.apache.org/jira/browse/HADOOP-814
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: heartbeatlock2.patch
>
>
> The current dfs namenode encounters locking bottlenecks when the number of datanodes is large. The namenode uses a single global lock to protect access to data structures. One key area is heartbeat processing. The lower the cost of processing a heartbeat, more the number of nodes HDFS can support.  A simple change to this current locking model can increase the scalability. Here are the details:
> Case 1: Currently we have three locks, the global lock (on FSNamesystem), the heartbeat lock and the datanodeMap lock. The following function is called when a heartbeat is received by the Namenode
> public synchronized FSNamesystem. gotHeartbeat() { ........ (A)
>     synchronized (heartbeat) {                                        ........ (B)
>       synchronized (datanodeMap) {                               ......... (C)
>    ...
>      }
> }
> In the above piece of code, statement (A) acquires the global-FSNamesystem-lock. This synchronization can be safely removed (remove updateStats too). This means that a heartbeat from the datanode can be processed without holding the FSnamesystem-global-lock.
> Case 2: A following thread called the heartbeatCheck thread periodically traverses all known Datanodes to determine if any of them has timed out. It is of the following form:
> void FSNamesystem.heartbeatCheck() {
>             synchronized (this) {                                        ........... (D)
>                         synchronized (heartbeats) {                .............(E) 
> }
> This thread acquires the global-FSNamesystem lock in Statement (D). This statement (D) can be removed. Instead the loop can check to see if any nodes are dead. If a dead node is found, only then it acquires the FSNamesystem-global-lock.
> It is possible that fixing the above two cases will cause HDFS to scale to higher number of nodes.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 01:07:48 2006
Return-Path: 
 <hadoop-dev-return-5946-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56162 invoked from network); 13 Dec 2006 01:07:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 01:07:48 -0000
Received: (qmail 53925 invoked by uid 500); 13 Dec 2006 01:07:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53899 invoked by uid 500); 13 Dec 2006 01:07:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53890 invoked by uid 99); 13 Dec 2006 01:07:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:07:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:07:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D279171413F
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 17:07:26 -0800 (PST)
Message-ID: <3287583.1165972046859.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 17:07:26 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-794) JobTracker crashes with
 ArithmeticException
In-Reply-To: <20588755.1165516221125.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-794?page=all ]

Owen O'Malley updated HADOOP-794:
---------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.10.0

> JobTracker crashes with ArithmeticException
> -------------------------------------------
>
>                 Key: HADOOP-794
>                 URL: http://issues.apache.org/jira/browse/HADOOP-794
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Nigel Daley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: div-zero.patch
>
>
> The sort benchmark on 20 nodes failed for me with an ArithmeticException.  Sort.java calculates the number of maps and reduces dynamically based on the cluster size.  I'm guessing at the time it did the calculation, the jobtracker had heard from 0 task trackers (which seems odd since I wait 1 minute after starting the jobtracker before starting Sort).
> From the job output:
> Running on 0 nodes to sort from /sortBenchmark20/input into /sortBenchmark20/output with 0 reduces.
> From the JobTracker log:
> 2006-12-07 07:10:06,709 ERROR org.apache.hadoop.mapred.JobTracker: Job initialization failed:
> java.lang.ArithmeticException: / by zero
>         at org.apache.hadoop.mapred.InputFormatBase.getSplits(InputFormatBase.java:130)
>         at org.apache.hadoop.mapred.JobInProgress.initTasks(JobInProgress.java:125)
>         at org.apache.hadoop.mapred.JobTracker$JobInitThread.run(JobTracker.java:326)
>         at java.lang.Thread.run(Thread.java:595)
> The jobtacker should check for illegal inputs like this and not fall over.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 01:07:49 2006
Return-Path: 
 <hadoop-dev-return-5947-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56207 invoked from network); 13 Dec 2006 01:07:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 01:07:49 -0000
Received: (qmail 54191 invoked by uid 500); 13 Dec 2006 01:07:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54166 invoked by uid 500); 13 Dec 2006 01:07:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54157 invoked by uid 99); 13 Dec 2006 01:07:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:07:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:07:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 42645714168
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 17:07:28 -0800 (PST)
Message-ID: <4707053.1165972048269.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 17:07:28 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-814) Increase dfs scalability by optimizing
 locking on namenode.
In-Reply-To: <7461200.1165900101047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-814?page=all ]

dhruba borthakur updated HADOOP-814:
------------------------------------

    Attachment:     (was: heartbeatlock.patch)

> Increase dfs scalability by optimizing locking on namenode.
> -----------------------------------------------------------
>
>                 Key: HADOOP-814
>                 URL: http://issues.apache.org/jira/browse/HADOOP-814
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: heartbeatlock2.patch
>
>
> The current dfs namenode encounters locking bottlenecks when the number of datanodes is large. The namenode uses a single global lock to protect access to data structures. One key area is heartbeat processing. The lower the cost of processing a heartbeat, more the number of nodes HDFS can support.  A simple change to this current locking model can increase the scalability. Here are the details:
> Case 1: Currently we have three locks, the global lock (on FSNamesystem), the heartbeat lock and the datanodeMap lock. The following function is called when a heartbeat is received by the Namenode
> public synchronized FSNamesystem. gotHeartbeat() { ........ (A)
>     synchronized (heartbeat) {                                        ........ (B)
>       synchronized (datanodeMap) {                               ......... (C)
>    ...
>      }
> }
> In the above piece of code, statement (A) acquires the global-FSNamesystem-lock. This synchronization can be safely removed (remove updateStats too). This means that a heartbeat from the datanode can be processed without holding the FSnamesystem-global-lock.
> Case 2: A following thread called the heartbeatCheck thread periodically traverses all known Datanodes to determine if any of them has timed out. It is of the following form:
> void FSNamesystem.heartbeatCheck() {
>             synchronized (this) {                                        ........... (D)
>                         synchronized (heartbeats) {                .............(E) 
> }
> This thread acquires the global-FSNamesystem lock in Statement (D). This statement (D) can be removed. Instead the loop can check to see if any nodes are dead. If a dead node is found, only then it acquires the FSNamesystem-global-lock.
> It is possible that fixing the above two cases will cause HDFS to scale to higher number of nodes.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 01:09:43 2006
Return-Path: 
 <hadoop-dev-return-5948-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56483 invoked from network); 13 Dec 2006 01:09:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 01:09:43 -0000
Received: (qmail 55468 invoked by uid 500); 13 Dec 2006 01:09:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55432 invoked by uid 500); 13 Dec 2006 01:09:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55423 invoked by uid 99); 13 Dec 2006 01:09:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:09:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:09:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 51BC27140D2
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 17:09:22 -0800 (PST)
Message-ID: <12569908.1165972162332.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 17:09:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-667) Path configuration properties should
 not be comma separated
In-Reply-To: <23824706.1162403896582.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-667?page=comments#action_12457978 ] 
            
Owen O'Malley commented on HADOOP-667:
--------------------------------------

I vote that we close this as wont-fix.

> Path configuration properties should not be comma separated
> -----------------------------------------------------------
>
>                 Key: HADOOP-667
>                 URL: http://issues.apache.org/jira/browse/HADOOP-667
>             Project: Hadoop
>          Issue Type: Bug
>          Components: fs
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>            Priority: Minor
>
> A few configuration properties allow multiple directory paths separated by comma's (,).  Since comma is a valid character for a directory name, it should not be used as a path separator.
> At a minimum, this applies to these properties:
>      mapred.local.dir
>      dfs.name.dir
> [ I also wonder how robust the implementation is against paths that contain spaces. ]

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 01:11:43 2006
Return-Path: 
 <hadoop-dev-return-5949-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56846 invoked from network); 13 Dec 2006 01:11:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 01:11:43 -0000
Received: (qmail 57038 invoked by uid 500); 13 Dec 2006 01:11:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57011 invoked by uid 500); 13 Dec 2006 01:11:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57002 invoked by uid 99); 13 Dec 2006 01:11:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:11:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:11:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 51D5E714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 17:11:22 -0800 (PST)
Message-ID: <4801811.1165972282332.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 17:11:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-720?page=all ]

dhruba borthakur updated HADOOP-720:
------------------------------------

    Status: Patch Available  (was: Open)

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm, hdfsarchitecture.odg, hdfsdatanodes.odg, HDFSForrest.patch
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 01:13:43 2006
Return-Path: 
 <hadoop-dev-return-5950-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57465 invoked from network); 13 Dec 2006 01:13:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 01:13:43 -0000
Received: (qmail 59197 invoked by uid 500); 13 Dec 2006 01:13:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58948 invoked by uid 500); 13 Dec 2006 01:13:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58939 invoked by uid 99); 13 Dec 2006 01:13:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:13:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:13:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4DA9A71404B
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 17:13:22 -0800 (PST)
Message-ID: <10128978.1165972402315.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 17:13:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-667) Path configuration properties should
 not be comma separated
In-Reply-To: <23824706.1162403896582.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-667?page=comments#action_12457980 ] 
            
Doug Cutting commented on HADOOP-667:
-------------------------------------

> I vote that we close this as wont-fix.

+1


> Path configuration properties should not be comma separated
> -----------------------------------------------------------
>
>                 Key: HADOOP-667
>                 URL: http://issues.apache.org/jira/browse/HADOOP-667
>             Project: Hadoop
>          Issue Type: Bug
>          Components: fs
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>            Priority: Minor
>
> A few configuration properties allow multiple directory paths separated by comma's (,).  Since comma is a valid character for a directory name, it should not be used as a path separator.
> At a minimum, this applies to these properties:
>      mapred.local.dir
>      dfs.name.dir
> [ I also wonder how robust the implementation is against paths that contain spaces. ]

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 01:42:44 2006
Return-Path: 
 <hadoop-dev-return-5951-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65797 invoked from network); 13 Dec 2006 01:42:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 01:42:44 -0000
Received: (qmail 91887 invoked by uid 500); 13 Dec 2006 01:42:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91864 invoked by uid 500); 13 Dec 2006 01:42:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91855 invoked by uid 99); 13 Dec 2006 01:42:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:42:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:42:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6FF94714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 17:42:22 -0800 (PST)
Message-ID: <28337293.1165974142456.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 17:42:22 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-814) Increase dfs scalability by
 optimizing locking on namenode.
In-Reply-To: <7461200.1165900101047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-814?page=comments#action_12457989 ] 
            
Raghu Angadi commented on HADOOP-814:
-------------------------------------


If we do want to maintain variables totalCapacity, totalLoad etc we could make them Atomic longs or have a small lock around these variables. tatalCapacity() is called only when user requests but tatalLoad() is called in chooseTarget().



> Increase dfs scalability by optimizing locking on namenode.
> -----------------------------------------------------------
>
>                 Key: HADOOP-814
>                 URL: http://issues.apache.org/jira/browse/HADOOP-814
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: heartbeatlock2.patch
>
>
> The current dfs namenode encounters locking bottlenecks when the number of datanodes is large. The namenode uses a single global lock to protect access to data structures. One key area is heartbeat processing. The lower the cost of processing a heartbeat, more the number of nodes HDFS can support.  A simple change to this current locking model can increase the scalability. Here are the details:
> Case 1: Currently we have three locks, the global lock (on FSNamesystem), the heartbeat lock and the datanodeMap lock. The following function is called when a heartbeat is received by the Namenode
> public synchronized FSNamesystem. gotHeartbeat() { ........ (A)
>     synchronized (heartbeat) {                                        ........ (B)
>       synchronized (datanodeMap) {                               ......... (C)
>    ...
>      }
> }
> In the above piece of code, statement (A) acquires the global-FSNamesystem-lock. This synchronization can be safely removed (remove updateStats too). This means that a heartbeat from the datanode can be processed without holding the FSnamesystem-global-lock.
> Case 2: A following thread called the heartbeatCheck thread periodically traverses all known Datanodes to determine if any of them has timed out. It is of the following form:
> void FSNamesystem.heartbeatCheck() {
>             synchronized (this) {                                        ........... (D)
>                         synchronized (heartbeats) {                .............(E) 
> }
> This thread acquires the global-FSNamesystem lock in Statement (D). This statement (D) can be removed. Instead the loop can check to see if any nodes are dead. If a dead node is found, only then it acquires the FSNamesystem-global-lock.
> It is possible that fixing the above two cases will cause HDFS to scale to higher number of nodes.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 01:46:44 2006
Return-Path: 
 <hadoop-dev-return-5952-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66966 invoked from network); 13 Dec 2006 01:46:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 01:46:44 -0000
Received: (qmail 94815 invoked by uid 500); 13 Dec 2006 01:46:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94792 invoked by uid 500); 13 Dec 2006 01:46:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94780 invoked by uid 99); 13 Dec 2006 01:46:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:46:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:46:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2FE6B714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 17:46:23 -0800 (PST)
Message-ID: <10935971.1165974383193.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 17:46:23 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-454) hadoop du optionally behave like
 unix's du -s
In-Reply-To: <11062171.1155582313998.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-454?page=all ]

Hairong Kuang updated HADOOP-454:
---------------------------------

    Attachment: dus.patch

This patch adds a command "dus" to dfs shell, which behaves like Unix "du -s".

> hadoop du optionally behave like unix's du -s
> ---------------------------------------------
>
>                 Key: HADOOP-454
>                 URL: http://issues.apache.org/jira/browse/HADOOP-454
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.9.1
>            Reporter: Marco Nicosia
>         Assigned To: Hairong Kuang
>            Priority: Trivial
>             Fix For: 0.10.0
>
>         Attachments: dus.patch
>
>
> In Unix, the user has the option to specify a -s flag:
>      -s      Display an entry for each specified file.  (Equivalent to -d 0)
> Instead of providing data for the subdirectories of the arguments, du prints the total usage of each argument, without printing subdirectories.
> This is very convenient for those looking to find how much space is used by a particular branch, without requring them to add up all the sub-usages.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 01:46:47 2006
Return-Path: 
 <hadoop-dev-return-5953-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67009 invoked from network); 13 Dec 2006 01:46:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 01:46:47 -0000
Received: (qmail 95096 invoked by uid 500); 13 Dec 2006 01:46:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95077 invoked by uid 500); 13 Dec 2006 01:46:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95068 invoked by uid 99); 13 Dec 2006 01:46:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:46:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:46:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5CBB97140D2
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 17:46:25 -0800 (PST)
Message-ID: <22217689.1165974385377.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 17:46:25 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12457991 ] 
            
Yoram Arnon commented on HADOOP-432:
------------------------------------

it's okay, even desirable, that trash is always at maxsize.
it's actually the only meaning of maxsize I can think of - it's the amount of space set aside for the trash.

I believe that's the way it's usually done. the trash can contain really old files if the configured size allows it.

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch, undelete17.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 01:46:49 2006
Return-Path: 
 <hadoop-dev-return-5954-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67063 invoked from network); 13 Dec 2006 01:46:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 01:46:49 -0000
Received: (qmail 95366 invoked by uid 500); 13 Dec 2006 01:46:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95343 invoked by uid 500); 13 Dec 2006 01:46:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95334 invoked by uid 99); 13 Dec 2006 01:46:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:46:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:46:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6ED3E71413F
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 17:46:27 -0800 (PST)
Message-ID: <31269200.1165974387451.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 17:46:27 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-454) hadoop du optionally behave like
 unix's du -s
In-Reply-To: <11062171.1155582313998.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-454?page=all ]

Hairong Kuang updated HADOOP-454:
---------------------------------

               Status: Patch Available  (was: Open)
        Fix Version/s: 0.10.0
    Affects Version/s: 0.9.1
                           (was: 0.5.0)

> hadoop du optionally behave like unix's du -s
> ---------------------------------------------
>
>                 Key: HADOOP-454
>                 URL: http://issues.apache.org/jira/browse/HADOOP-454
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.9.1
>            Reporter: Marco Nicosia
>         Assigned To: Hairong Kuang
>            Priority: Trivial
>             Fix For: 0.10.0
>
>         Attachments: dus.patch
>
>
> In Unix, the user has the option to specify a -s flag:
>      -s      Display an entry for each specified file.  (Equivalent to -d 0)
> Instead of providing data for the subdirectories of the arguments, du prints the total usage of each argument, without printing subdirectories.
> This is very convenient for those looking to find how much space is used by a particular branch, without requring them to add up all the sub-usages.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 01:51:44 2006
Return-Path: 
 <hadoop-dev-return-5955-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68622 invoked from network); 13 Dec 2006 01:51:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 01:51:44 -0000
Received: (qmail 99979 invoked by uid 500); 13 Dec 2006 01:51:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99944 invoked by uid 500); 13 Dec 2006 01:51:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99935 invoked by uid 99); 13 Dec 2006 01:51:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:51:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 17:51:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 171E87140F6
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 17:51:23 -0800 (PST)
Message-ID: <1783840.1165974683092.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 17:51:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-794) JobTracker crashes with
 ArithmeticException
In-Reply-To: <20588755.1165516221125.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-794?page=comments#action_12457992 ] 
            
Hadoop QA commented on HADOOP-794:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12347050/div-zero.patch applied and successfully tested against trunk revision r486399

> JobTracker crashes with ArithmeticException
> -------------------------------------------
>
>                 Key: HADOOP-794
>                 URL: http://issues.apache.org/jira/browse/HADOOP-794
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Nigel Daley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: div-zero.patch
>
>
> The sort benchmark on 20 nodes failed for me with an ArithmeticException.  Sort.java calculates the number of maps and reduces dynamically based on the cluster size.  I'm guessing at the time it did the calculation, the jobtracker had heard from 0 task trackers (which seems odd since I wait 1 minute after starting the jobtracker before starting Sort).
> From the job output:
> Running on 0 nodes to sort from /sortBenchmark20/input into /sortBenchmark20/output with 0 reduces.
> From the JobTracker log:
> 2006-12-07 07:10:06,709 ERROR org.apache.hadoop.mapred.JobTracker: Job initialization failed:
> java.lang.ArithmeticException: / by zero
>         at org.apache.hadoop.mapred.InputFormatBase.getSplits(InputFormatBase.java:130)
>         at org.apache.hadoop.mapred.JobInProgress.initTasks(JobInProgress.java:125)
>         at org.apache.hadoop.mapred.JobTracker$JobInitThread.run(JobTracker.java:326)
>         at java.lang.Thread.run(Thread.java:595)
> The jobtacker should check for illegal inputs like this and not fall over.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 02:13:45 2006
Return-Path: 
 <hadoop-dev-return-5956-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79310 invoked from network); 13 Dec 2006 02:13:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 02:13:45 -0000
Received: (qmail 31160 invoked by uid 500); 13 Dec 2006 02:13:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31128 invoked by uid 500); 13 Dec 2006 02:13:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31119 invoked by uid 99); 13 Dec 2006 02:13:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 18:13:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 18:13:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9617371404B
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 18:13:23 -0800 (PST)
Message-ID: <23457120.1165976003611.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 18:13:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-454) hadoop du optionally behave like
 unix's du -s
In-Reply-To: <11062171.1155582313998.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-454?page=comments#action_12457996 ] 
            
Hadoop QA commented on HADOOP-454:
----------------------------------

+1, http://issues.apache.org/jira/secure/attachment/12347055/dus.patch applied and successfully tested against trunk revision r486399

> hadoop du optionally behave like unix's du -s
> ---------------------------------------------
>
>                 Key: HADOOP-454
>                 URL: http://issues.apache.org/jira/browse/HADOOP-454
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.9.1
>            Reporter: Marco Nicosia
>         Assigned To: Hairong Kuang
>            Priority: Trivial
>             Fix For: 0.10.0
>
>         Attachments: dus.patch
>
>
> In Unix, the user has the option to specify a -s flag:
>      -s      Display an entry for each specified file.  (Equivalent to -d 0)
> Instead of providing data for the subdirectories of the arguments, du prints the total usage of each argument, without printing subdirectories.
> This is very convenient for those looking to find how much space is used by a particular branch, without requring them to add up all the sub-usages.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 02:18:44 2006
Return-Path: 
 <hadoop-dev-return-5957-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81837 invoked from network); 13 Dec 2006 02:18:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 02:18:44 -0000
Received: (qmail 34957 invoked by uid 500); 13 Dec 2006 02:18:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34929 invoked by uid 500); 13 Dec 2006 02:18:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34920 invoked by uid 99); 13 Dec 2006 02:18:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 18:18:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 18:18:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 500B4714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 18:18:22 -0800 (PST)
Message-ID: <6966294.1165976302325.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 18:18:22 -0800 (PST)
From: "Alejandro Abdelnur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-811) Patch to support multi-threaded
 MapRunnable
In-Reply-To: <15932768.1165852041100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-811?page=all ]

Alejandro Abdelnur updated HADOOP-811:
--------------------------------------

               Status: Patch Available  (was: Open)
    Affects Version/s: 0.10.0
                           (was: 0.9.1)

Following is the full 'svn diff' as requested.

I'm also re-attaching the changed (per comments) MultithreadedMapRunner.

Index: src/java/org/apache/hadoop/mapred/Task.java
===================================================================
--- src/java/org/apache/hadoop/mapred/Task.java (revision 486454)
+++ src/java/org/apache/hadoop/mapred/Task.java (working copy)
@@ -154,8 +154,10 @@
                               final Progress progress) throws IOException {
     return new Reporter() {
         public void setStatus(String status) throws IOException {
-          progress.setStatus(status);
-          progress();
+          synchronized (this) {
+            progress.setStatus(status);
+            progress();
+          }
         }
         public void progress() throws IOException {
             reportProgress(umbilical);
Index: src/java/org/apache/hadoop/mapred/lib/MultithreadedMapRunner.java
===================================================================
--- src/java/org/apache/hadoop/mapred/lib/MultithreadedMapRunner.java   (revision 0)
+++ src/java/org/apache/hadoop/mapred/lib/MultithreadedMapRunner.java   (revision 0)
@@ -0,0 +1,199 @@
+package org.apache.hadoop.mapred.lib;
+
+import org.apache.hadoop.util.ReflectionUtils;
+import org.apache.hadoop.io.WritableComparable;
+import org.apache.hadoop.io.Writable;
+import org.apache.hadoop.mapred.MapRunnable;
+import org.apache.hadoop.mapred.JobConf;
+import org.apache.hadoop.mapred.Mapper;
+import org.apache.hadoop.mapred.RecordReader;
+import org.apache.hadoop.mapred.OutputCollector;
+import org.apache.hadoop.mapred.Reporter;
+import org.apache.commons.logging.Log;
+import org.apache.commons.logging.LogFactory;
+
+import java.io.IOException;
+import java.util.concurrent.ExecutorService;
+import java.util.concurrent.Executors;
+import java.util.concurrent.TimeUnit;
+
+/**
+ * Multithreaded implementation for @link org.apache.hadoop.mapred.MapRunnable.
+ * <p>
+ * It can be used instead of the default implementation,
+ * @link org.apache.hadoop.mapred.MapRunner, when the Map operation is not CPU
+ * bound in order to improve throughput.
+ * <p>
+ * Map implementations using this MapRunnable must be thread-safe.
+ * <p>
+ * The Map-Reduce job has to be configured to use this MapRunnable class (using
+ * the <b>mapred.map.runner.class</b> property) and
+ * the number of thread the thread-pool can use (using the
+ * <b>mapred.map.multithreadedrunner.threads</b> property).
+ * <p>
+ *
+ * @author Alejandro Abdelnur
+ */
+public class MultithreadedMapRunner implements MapRunnable {
+  private static final Log LOG =
+      LogFactory.getLog(MultithreadedMapRunner.class.getName());
+
+  private JobConf job;
+  private Mapper mapper;
+  private ExecutorService executorService;
+  private volatile IOException ioException;
+
+  public void configure(JobConf job) {
+    int numberOfThreads =
+        job.getInt("mapred.map.multithreadedrunner.threads", 10);
+    if (LOG.isDebugEnabled()) {
+      LOG.debug("Configuring job " + job.getJobName() +
+          " to use " + numberOfThreads + " threads" );
+    }
+
+    this.job = job;
+    this.mapper = (Mapper)ReflectionUtils.newInstance(job.getMapperClass(),
+                                                      job);
+
+    // Creating a threadpool of the configured size to execute the Mapper
+    // map method in parallel.
+    executorService = Executors.newFixedThreadPool(numberOfThreads);
+  }
+
+  public void run(RecordReader input, OutputCollector output,
+                  Reporter reporter)
+    throws IOException {
+    try {
+      // allocate key & value instances these objects will not be reused
+      // because execution of Mapper.map is not serialized.
+      WritableComparable key = input.createKey();
+      Writable value = input.createValue();
+
+      while (input.next(key, value)) {
+
+        // Run Mapper.map execution asynchronously in a separate thread.
+        // If threads are not available from the thread-pool this method
+        // will block until there is a thread available.
+        executorService.execute(
+            new MapperInvokeRunable(key, value, output, reporter));
+
+        // Checking if a Mapper.map within a Runnable has generated an
+        // IOException. If so we rethrow it to force an abort of the Map
+        // operation thus keeping the semantics of the default
+        // implementation.
+        if (ioException != null) {
+          throw ioException;
+        }
+
+        // Allocate new key & value instances as mapper is running in parallel
+        key = input.createKey();
+        value = input.createValue();
+      }
+
+      if (LOG.isDebugEnabled()) {
+        LOG.debug("Finished dispatching all Mappper.map calls, job "
+            + job.getJobName());
+      }
+
+      // Graceful shutdown of the Threadpool, it will let all scheduled
+      // Runnables to end.
+      executorService.shutdown();
+
+      try {
+
+        // Now waiting for all Runnables to end.
+        while (!executorService.awaitTermination(100, TimeUnit.MILLISECONDS)) {
+          if (LOG.isDebugEnabled()) {
+            LOG.debug("Awaiting all running Mappper.map calls to finish, job "
+                + job.getJobName());
+          }
+
+          // Checking if a Mapper.map within a Runnable has generated an
+          // IOException. If so we rethrow it to force an abort of the Map
+          // operation thus keeping the semantics of the default
+          // implementation.
+          // NOTE: while Mapper.map dispatching has concluded there are still
+          // map calls in progress.
+          if (ioException != null) {
+            throw ioException;
+          }
+        }
+
+        // Checking if a Mapper.map within a Runnable has generated an
+        // IOException. If so we rethrow it to force an abort of the Map
+        // operation thus keeping the semantics of the default
+        // implementation.
+        // NOTE: it could be that a map call has had an exception after the
+        // call for awaitTermination() returing true. And edge case but it
+        // could happen.
+        if (ioException != null) {
+          throw ioException;
+        }
+      }
+      catch (IOException ioEx) {
+        // Forcing a shutdown of all thread of the threadpool and rethrowing
+        // the IOException
+        executorService.shutdownNow();
+        throw ioEx;
+      }
+      catch (InterruptedException iEx) {
+        throw new IOException(iEx.getMessage());
+      }
+
+    } finally {
+        mapper.close();
+    }
+  }
+
+
+  /**
+   * Runnable to execute a single Mapper.map call from a forked thread.
+   */
+  private class MapperInvokeRunable implements Runnable {
+    private WritableComparable key;
+    private Writable value;
+    private OutputCollector output;
+    private Reporter reporter;
+
+    /**
+     * Collecting all required parameters to execute a Mapper.map call.
+     * <p>
+     *
+     * @param key
+     * @param value
+     * @param output
+     * @param reporter
+     */
+    public MapperInvokeRunable(WritableComparable key, Writable value,
+        OutputCollector output, Reporter reporter) {
+      this.key = key;
+      this.value = value;
+      this.output = output;
+      this.reporter = reporter;
+    }
+
+    /**
+     * Executes a Mapper.map call with the given Mapper and parameters.
+     * <p>
+     * This method is called from the thread-pool thread.
+     *
+     */
+    public void run() {
+      try {
+        // map pair to output
+        MultithreadedMapRunner.this.mapper.map(key, value, output, reporter);
+      }
+      catch (IOException ex) {
+        // If there is an IOException during the call it is set in an instance
+        // variable of the MultithreadedMapRunner from where it will be
+        // rethrown.
+        synchronized (MultithreadedMapRunner.this) {
+          if (MultithreadedMapRunner.this.ioException == null) {
+            MultithreadedMapRunner.this.ioException = ex;
+          }
+        }
+      }
+    }
+  }
+
+}

> Patch to support multi-threaded MapRunnable
> -------------------------------------------
>
>                 Key: HADOOP-811
>                 URL: http://issues.apache.org/jira/browse/HADOOP-811
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.10.0
>         Environment: all
>            Reporter: Alejandro Abdelnur
>         Attachments: MultithreadedMapRunner.java
>
>
> The MapRunner calls Mapper.map in a serialized fashion.
> This is suitable for CPU/memory bound operations.
> However, when doing IO bound operations this serialization affects the throughput significantly.
> In order to support IO bound operations more efficiently I've implemented a multithreaded MapRunnable.
> Following is the implementation of this MapRunnable, MultithreadedMapRunner.
> I've only had to modify on method in the existing code (in the Task class) to avoid data corruption in the reporter.
> Index: Task.java
> ===================================================================
> --- Task.java   (revision 485492)
> +++ Task.java   (working copy)
> @@ -153,9 +153,11 @@
>    public Reporter getReporter(final TaskUmbilicalProtocol umbilical,
>                                final Progress progress) throws IOException {
>      return new Reporter() {
> -        public void setStatus(String status) throws IOException {
> -          progress.setStatus(status);
> -          progress();
> +        public void setStatus(String status) throws IOException {
> +          synchronized (this) {
> +            progress.setStatus(status);
> +            progress();
> +          }
>          }
>          public void progress() throws IOException {
>              reportProgress(umbilical);
> -----------------------------------------------------------
> MultithreadedMapRunner.java
> package org.apache.hadoop.mapred;
> import org.apache.hadoop.util.ReflectionUtils;
> import org.apache.hadoop.io.WritableComparable;
> import org.apache.hadoop.io.Writable;
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
> import java.io.IOException;
> import java.util.concurrent.ExecutorService;
> import java.util.concurrent.Executors;
> import java.util.concurrent.TimeUnit;
> /**
>  * Multithreaded implementation for @link org.apache.hadoop.mapred.MapRunnable.
>  * <p>
>  * It can be used instead of the default implementation,
>  * @link org.apache.hadoop.mapred.MapRunner, when the Map operation is not CPU
>  * bound in order to improve throughput.
>  * <p>
>  * Map implementations using this MapRunnable must be thread-safe.
>  * <p>
>  * The Map-Reduce job has to be configured to use this MapRunnable class (using
>  * the <b>mapred.map.runner.class</b> property) and
>  * the number of thread the thread-pool can use (using the
>  * <b>mapred.map.multithreadedrunner.threads</b> property).
>  * <p>
>  *
>  * @author Alejandro Abdelnur
>  */
> public class MultithreadedMapRunner implements MapRunnable {
>   private static final Log LOG =
>       LogFactory.getLog(MultithreadedMapRunner.class.getName());
>   private JobConf job;
>   private Mapper mapper;
>   private ExecutorService executorService;
>   private IOException ioException;
>   public void configure(JobConf job) {
>     int numberOfThreads =
>         job.getInt("mapred.map.multithreadedrunner.threads", 10);
>     if (LOG.isDebugEnabled()) {
>       LOG.debug("Configuring job " + job.getJobName() +
>           " to use " + numberOfThreads + " threads" );
>     }
>     this.job = job;
>     this.mapper = (Mapper)ReflectionUtils.newInstance(job.getMapperClass(),
>                                                       job);
>     // Creating a threadpool of the configured size to execute the Mapper
>     // map method in parallel.
>     executorService = Executors.newFixedThreadPool(numberOfThreads);
>   }
>   public void run(RecordReader input, OutputCollector output,
>                   Reporter reporter)
>     throws IOException {
>     try {
>       // allocate key & value instances these objects will not be reused
>       // because execution of Mapper.map is not serialized.
>       WritableComparable key = input.createKey();
>       Writable value = input.createValue();
>       while (input.next(key, value)) {
>         // Run Mapper.map execution asynchronously in a separate thread.
>         // If threads are not available from the thread-pool this method
>         // will block until there is a thread available.
>         executorService.execute(
>             new MTMapperRunable(key, value, output, reporter));
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         if (ioException != null) {
>           throw ioException;
>         }
>         // Allocate new key & value instances as mapper is running in parallel
>         key = input.createKey();
>         value = input.createValue();
>       }
>       if (LOG.isDebugEnabled()) {
>         LOG.debug("Finished dispatching all Mappper.map calls, job "
>             + job.getJobName());
>       }
>       // Graceful shutdown of the Threadpool, it will let all scheduled
>       // Runnables to end.
>       executorService.shutdown();
>       try {
>         // Now waiting for all Runnables to end.
>         while (!executorService.awaitTermination(100, TimeUnit.MILLISECONDS)) {
>           if (LOG.isDebugEnabled()) {
>             LOG.debug("Awaiting all running Mappper.map calls to finish, job "
>                 + job.getJobName());
>           }
>           // Checking if a Mapper.map within a Runnable has generated an
>           // IOException. If so we rethrow it to force an abort of the Map
>           // operation thus keeping the semantics of the default
>           // implementation.
>           // NOTE: while Mapper.map dispatching has concluded there are still
>           // map calls in progress.
>           if (ioException != null) {
>             throw ioException;
>           }
>         }
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         // NOTE: it could be that a map call has had an exception after the
>         // call for awaitTermination() returing true. And edge case but it
>         // could happen.
>         if (ioException != null) {
>           throw ioException;
>         }
>       }
>       catch (IOException ioEx) {
>         // Forcing a shutdown of all thread of the threadpool and rethrowing
>         // the IOException
>         executorService.shutdownNow();
>         throw ioEx;
>       }
>       catch (InterruptedException iEx) {
>         throw new IOException(iEx.getMessage());
>       }
>     } finally {
>         mapper.close();
>     }
>   }
>   /**
>    * Runnable to execute a single Mapper.map call from a forked thread.
>    */
>   private class MTMapperRunable implements Runnable {
>     private WritableComparable key;
>     private Writable value;
>     private OutputCollector output;
>     private Reporter reporter;
>     /**
>      * Collecting all required parameters to execute a Mapper.map call.
>      * <p>
>      *
>      * @param key
>      * @param value
>      * @param output
>      * @param reporter
>      */
>     public MTMapperRunable(WritableComparable key, Writable value,
>         OutputCollector output, Reporter reporter) {
>       this.key = key;
>       this.value = value;
>       this.output = output;
>       this.reporter = reporter;
>     }
>     /**
>      * Executes a Mapper.map call with the given Mapper and parameters.
>      * <p>
>      * This method is called from the thread-pool thread.
>      *
>      */
>     public void run() {
>       try {
>         // map pair to output
>         MultithreadedMapRunner.this.mapper.map(key, value, output, reporter);
>       }
>       catch (IOException ex) {
>         // If there is an IOException during the call it is set in an instance
>         // variable of the MultithreadedMapRunner from where it will be
>         // rethrown.
>         synchronized (MultithreadedMapRunner.this) {
>           if (MultithreadedMapRunner.this.ioException == null) {
>             MultithreadedMapRunner.this.ioException = ex;
>           }
>         }
>       }
>     }
>   }
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 02:20:46 2006
Return-Path: 
 <hadoop-dev-return-5958-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88070 invoked from network); 13 Dec 2006 02:20:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 02:20:46 -0000
Received: (qmail 36242 invoked by uid 500); 13 Dec 2006 02:20:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36000 invoked by uid 500); 13 Dec 2006 02:20:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35991 invoked by uid 99); 13 Dec 2006 02:20:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 18:20:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 18:20:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8131F714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 18:20:24 -0800 (PST)
Message-ID: <21632409.1165976424526.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 18:20:24 -0800 (PST)
From: "Alejandro Abdelnur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-811) Patch to support multi-threaded
 MapRunnable
In-Reply-To: <15932768.1165852041100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-811?page=all ]

Alejandro Abdelnur updated HADOOP-811:
--------------------------------------

    Attachment: MultithreadedMapRunner.java

Modified following comment recommendations.

> Patch to support multi-threaded MapRunnable
> -------------------------------------------
>
>                 Key: HADOOP-811
>                 URL: http://issues.apache.org/jira/browse/HADOOP-811
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.10.0
>         Environment: all
>            Reporter: Alejandro Abdelnur
>         Attachments: MultithreadedMapRunner.java, MultithreadedMapRunner.java
>
>
> The MapRunner calls Mapper.map in a serialized fashion.
> This is suitable for CPU/memory bound operations.
> However, when doing IO bound operations this serialization affects the throughput significantly.
> In order to support IO bound operations more efficiently I've implemented a multithreaded MapRunnable.
> Following is the implementation of this MapRunnable, MultithreadedMapRunner.
> I've only had to modify on method in the existing code (in the Task class) to avoid data corruption in the reporter.
> Index: Task.java
> ===================================================================
> --- Task.java   (revision 485492)
> +++ Task.java   (working copy)
> @@ -153,9 +153,11 @@
>    public Reporter getReporter(final TaskUmbilicalProtocol umbilical,
>                                final Progress progress) throws IOException {
>      return new Reporter() {
> -        public void setStatus(String status) throws IOException {
> -          progress.setStatus(status);
> -          progress();
> +        public void setStatus(String status) throws IOException {
> +          synchronized (this) {
> +            progress.setStatus(status);
> +            progress();
> +          }
>          }
>          public void progress() throws IOException {
>              reportProgress(umbilical);
> -----------------------------------------------------------
> MultithreadedMapRunner.java
> package org.apache.hadoop.mapred;
> import org.apache.hadoop.util.ReflectionUtils;
> import org.apache.hadoop.io.WritableComparable;
> import org.apache.hadoop.io.Writable;
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
> import java.io.IOException;
> import java.util.concurrent.ExecutorService;
> import java.util.concurrent.Executors;
> import java.util.concurrent.TimeUnit;
> /**
>  * Multithreaded implementation for @link org.apache.hadoop.mapred.MapRunnable.
>  * <p>
>  * It can be used instead of the default implementation,
>  * @link org.apache.hadoop.mapred.MapRunner, when the Map operation is not CPU
>  * bound in order to improve throughput.
>  * <p>
>  * Map implementations using this MapRunnable must be thread-safe.
>  * <p>
>  * The Map-Reduce job has to be configured to use this MapRunnable class (using
>  * the <b>mapred.map.runner.class</b> property) and
>  * the number of thread the thread-pool can use (using the
>  * <b>mapred.map.multithreadedrunner.threads</b> property).
>  * <p>
>  *
>  * @author Alejandro Abdelnur
>  */
> public class MultithreadedMapRunner implements MapRunnable {
>   private static final Log LOG =
>       LogFactory.getLog(MultithreadedMapRunner.class.getName());
>   private JobConf job;
>   private Mapper mapper;
>   private ExecutorService executorService;
>   private IOException ioException;
>   public void configure(JobConf job) {
>     int numberOfThreads =
>         job.getInt("mapred.map.multithreadedrunner.threads", 10);
>     if (LOG.isDebugEnabled()) {
>       LOG.debug("Configuring job " + job.getJobName() +
>           " to use " + numberOfThreads + " threads" );
>     }
>     this.job = job;
>     this.mapper = (Mapper)ReflectionUtils.newInstance(job.getMapperClass(),
>                                                       job);
>     // Creating a threadpool of the configured size to execute the Mapper
>     // map method in parallel.
>     executorService = Executors.newFixedThreadPool(numberOfThreads);
>   }
>   public void run(RecordReader input, OutputCollector output,
>                   Reporter reporter)
>     throws IOException {
>     try {
>       // allocate key & value instances these objects will not be reused
>       // because execution of Mapper.map is not serialized.
>       WritableComparable key = input.createKey();
>       Writable value = input.createValue();
>       while (input.next(key, value)) {
>         // Run Mapper.map execution asynchronously in a separate thread.
>         // If threads are not available from the thread-pool this method
>         // will block until there is a thread available.
>         executorService.execute(
>             new MTMapperRunable(key, value, output, reporter));
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         if (ioException != null) {
>           throw ioException;
>         }
>         // Allocate new key & value instances as mapper is running in parallel
>         key = input.createKey();
>         value = input.createValue();
>       }
>       if (LOG.isDebugEnabled()) {
>         LOG.debug("Finished dispatching all Mappper.map calls, job "
>             + job.getJobName());
>       }
>       // Graceful shutdown of the Threadpool, it will let all scheduled
>       // Runnables to end.
>       executorService.shutdown();
>       try {
>         // Now waiting for all Runnables to end.
>         while (!executorService.awaitTermination(100, TimeUnit.MILLISECONDS)) {
>           if (LOG.isDebugEnabled()) {
>             LOG.debug("Awaiting all running Mappper.map calls to finish, job "
>                 + job.getJobName());
>           }
>           // Checking if a Mapper.map within a Runnable has generated an
>           // IOException. If so we rethrow it to force an abort of the Map
>           // operation thus keeping the semantics of the default
>           // implementation.
>           // NOTE: while Mapper.map dispatching has concluded there are still
>           // map calls in progress.
>           if (ioException != null) {
>             throw ioException;
>           }
>         }
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         // NOTE: it could be that a map call has had an exception after the
>         // call for awaitTermination() returing true. And edge case but it
>         // could happen.
>         if (ioException != null) {
>           throw ioException;
>         }
>       }
>       catch (IOException ioEx) {
>         // Forcing a shutdown of all thread of the threadpool and rethrowing
>         // the IOException
>         executorService.shutdownNow();
>         throw ioEx;
>       }
>       catch (InterruptedException iEx) {
>         throw new IOException(iEx.getMessage());
>       }
>     } finally {
>         mapper.close();
>     }
>   }
>   /**
>    * Runnable to execute a single Mapper.map call from a forked thread.
>    */
>   private class MTMapperRunable implements Runnable {
>     private WritableComparable key;
>     private Writable value;
>     private OutputCollector output;
>     private Reporter reporter;
>     /**
>      * Collecting all required parameters to execute a Mapper.map call.
>      * <p>
>      *
>      * @param key
>      * @param value
>      * @param output
>      * @param reporter
>      */
>     public MTMapperRunable(WritableComparable key, Writable value,
>         OutputCollector output, Reporter reporter) {
>       this.key = key;
>       this.value = value;
>       this.output = output;
>       this.reporter = reporter;
>     }
>     /**
>      * Executes a Mapper.map call with the given Mapper and parameters.
>      * <p>
>      * This method is called from the thread-pool thread.
>      *
>      */
>     public void run() {
>       try {
>         // map pair to output
>         MultithreadedMapRunner.this.mapper.map(key, value, output, reporter);
>       }
>       catch (IOException ex) {
>         // If there is an IOException during the call it is set in an instance
>         // variable of the MultithreadedMapRunner from where it will be
>         // rethrown.
>         synchronized (MultithreadedMapRunner.this) {
>           if (MultithreadedMapRunner.this.ioException == null) {
>             MultithreadedMapRunner.this.ioException = ex;
>           }
>         }
>       }
>     }
>   }
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 02:30:44 2006
Return-Path: 
 <hadoop-dev-return-5959-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12707 invoked from network); 13 Dec 2006 02:30:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 02:30:44 -0000
Received: (qmail 45192 invoked by uid 500); 13 Dec 2006 02:30:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45161 invoked by uid 500); 13 Dec 2006 02:30:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45148 invoked by uid 99); 13 Dec 2006 02:30:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 18:30:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 18:30:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0D01671404B
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 18:30:23 -0800 (PST)
Message-ID: <20183029.1165977023050.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 18:30:23 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-810) The non-existence of the job.xml file
 causes a LOT of tasks of the job fail
In-Reply-To: <12703053.1165626863522.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-810?page=all ]

Arun C Murthy resolved HADOOP-810.
----------------------------------

    Resolution: Duplicate

Duplicate of HADOOP-737, fixed as a part of HADOOP-639.

> The non-existence of the job.xml file causes a LOT of tasks of the job fail
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-810
>                 URL: http://issues.apache.org/jira/browse/HADOOP-810
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Runping Qi
>         Assigned To: Arun C Murthy
>
> For some reason, the job.xml file disappears from one of the nodes. That causes the following exception:
> java.lang.RuntimeException: java.lang.RuntimeException:  taskTracker/jobcache/job_0039/job.xml not found
> 	at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:551)
> 	at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:472)
> 	at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:453)
> 	at org.apache.hadoop.conf.Configuration.get(Configuration.java:201)
> 	at org.apache.hadoop.conf.Configuration.getBoolean(Configuration.java:286)
> 	at org.apache.hadoop.mapred.JobConf.getKeepFailedTaskFiles(JobConf.java:212)
> 	at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.setJobConf(TaskTracker.java:874)
> 	at org.apache.hadoop.mapred.TaskTracker.launchTaskForJob(TaskTracker.java:313)
> 	at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:307)
> 	at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:691)
> 	at org.apache.hadoop.mapred.TaskTracker.checkForNewTasks(TaskTracker.java:533)
> 	at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:448)
> 	at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
> 	at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)
> That is fine by itself.
> The problem is the task tracker keeps accepting tasks of the same job, and keeps failing them!
> The correct behavior is that it either tries to get the job.xml from the job tracker, or refuses accepting any new tasks 
> of the same job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 02:39:50 2006
Return-Path: 
 <hadoop-dev-return-5960-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15698 invoked from network); 13 Dec 2006 02:39:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 02:39:50 -0000
Received: (qmail 54625 invoked by uid 500); 13 Dec 2006 02:39:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54442 invoked by uid 500); 13 Dec 2006 02:39:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54294 invoked by uid 99); 13 Dec 2006 02:39:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 18:39:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 18:39:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 42D27714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 18:39:22 -0800 (PST)
Message-ID: <32505896.1165977562270.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 18:39:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-808) Enhance 'bin/hadoop job -submit <>'
In-Reply-To: <8517460.1165576881049.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-808?page=comments#action_12458004 ] 
            
Arun C Murthy commented on HADOOP-808:
--------------------------------------

Owen
> This patch just enables the config to have a mapred.job.class that must extend ToolBase that can manipulate the config before it is submitted.

Absolutely. 

For e.g. a common use-case is to 'deduce' the no. of maps/reduces depending on the 'cluster size' which can't be done with 
% bin/hadoop job -submit <jobconf.xml>
today.

Doug 
> If someone's going to write a main() like method, why couldn't they simply write a main() that submits the job? I don't see what this simplifies.

I can see your point Doug, however this just slightly 'simplifies' the user-code which now doesn't have to bother with 'job submission'; thus, 'hopefully' easing the user's workload. More of a convenience...

In essence it just enhances 'hadoop job -submit' by providing a 'hook' to manipulate job.xml before submission so that certain 'dynamic' behaviour (depending on things like 'cluster size') can be retained.

I'm 'ok' debunking this if people don't think this adds an real value...

> Enhance 'bin/hadoop job -submit <>'
> -----------------------------------
>
>                 Key: HADOOP-808
>                 URL: http://issues.apache.org/jira/browse/HADOOP-808
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-808_1_20061208.patch, myjob.tgz
>
>
> Today 'bin/hadoop job -submit' takes a config file and just does a JobClient.submitJob(jobConf), this isn't flexible enough for cases where the user wants to submit a job which calls his main(), does some work and then calls 'JobClient.runJob', I propose we enhance this subcommand to handle that scenario. This could be really useful for the time we decide to setup a simple webpage with 'form' where the user uploads a job.xml & job.jar and we can fire the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 04:22:44 2006
Return-Path: 
 <hadoop-dev-return-5961-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50827 invoked from network); 13 Dec 2006 04:22:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 04:22:44 -0000
Received: (qmail 64096 invoked by uid 500); 13 Dec 2006 04:22:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64075 invoked by uid 500); 13 Dec 2006 04:22:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64066 invoked by uid 99); 13 Dec 2006 04:22:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 20:22:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 20:22:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 52414714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 20:22:22 -0800 (PST)
Message-ID: <2848505.1165983742334.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 20:22:22 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-803?page=all ]

Raghu Angadi updated HADOOP-803:
--------------------------------

    Attachment: block-refs.patch

Now datanode's blocks is defined as TreeMap. 

I am attaching the proposed patch for review. I have done brief testing and will test with manually deleting some blocks from the datanode to trigger new code.


> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>         Attachments: block-refs.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 04:39:44 2006
Return-Path: 
 <hadoop-dev-return-5962-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53700 invoked from network); 13 Dec 2006 04:39:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 04:39:44 -0000
Received: (qmail 84989 invoked by uid 500); 13 Dec 2006 04:39:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84749 invoked by uid 500); 13 Dec 2006 04:39:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84740 invoked by uid 99); 13 Dec 2006 04:39:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 20:39:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 20:39:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0DC0471404B
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 20:39:23 -0800 (PST)
Message-ID: <10051693.1165984763053.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 20:39:23 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12458016 ] 
            
Runping Qi commented on HADOOP-432:
-----------------------------------


While it is good to keep deleted files in trash when the space is available, we still need to pay attention to the way we handle them.

First, if the space becomes tight, old files should be deleted.
Second, we may not need to always keep max copies of the blocks of the files in trash. 
Definitely, we do not need to re-replicate them when they are slightly below the max replications.
Third, when the user deletes files, he/she should be able to choose delete them for good (thus not move to trash), although the default should be the opposite.
Lastly, the user should be able to delete  files in trash and make them disappear. 




> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch, undelete17.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 04:57:43 2006
Return-Path: 
 <hadoop-dev-return-5963-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57591 invoked from network); 13 Dec 2006 04:57:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 04:57:43 -0000
Received: (qmail 2920 invoked by uid 500); 13 Dec 2006 04:57:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2892 invoked by uid 500); 13 Dec 2006 04:57:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2883 invoked by uid 99); 13 Dec 2006 04:57:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 20:57:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 20:57:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 466AC714057
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 20:57:22 -0800 (PST)
Message-ID: <2419628.1165985842285.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 20:57:22 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-816) Allow the sort benchmark to set a
 buffersize for the map buffer
In-Reply-To: <702305.1165916183398.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-816?page=comments#action_12458018 ] 
            
Devaraj Das commented on HADOOP-816:
------------------------------------

Well, for some reason, I had the impression that the default dfs block size is 128 MB, and that is why I was bothered about the sort benchmark performance.. As Owen suggested, I will just put a log message if a spill happens on the Map side.

> Allow the sort benchmark to set a buffersize for the map buffer
> ---------------------------------------------------------------
>
>                 Key: HADOOP-816
>                 URL: http://issues.apache.org/jira/browse/HADOOP-816
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: 816.patch
>
>
> Discovered that framework merges are the hotspots where most time is spent in the sort benchmark. With HADOOP-331, the Map phase could potentially do a merge of the spills (this merge was not done pre-HADOOP-331), and then there is one compulsory merge on each reduce. It may be good to avoid the merge in the Map phase, if possible.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 06:38:45 2006
Return-Path: 
 <hadoop-dev-return-5964-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74440 invoked from network); 13 Dec 2006 06:38:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 06:38:45 -0000
Received: (qmail 14011 invoked by uid 500); 13 Dec 2006 06:38:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13986 invoked by uid 500); 13 Dec 2006 06:38:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13977 invoked by uid 99); 13 Dec 2006 06:38:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 22:38:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 22:38:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9674D71404B
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 22:38:22 -0800 (PST)
Message-ID: <6943295.1165991902613.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 22:38:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-745) NameNode throws
 FileNotFoundException: Parent path does not exist on startup
In-Reply-To: <9757325.1164238741994.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-745?page=comments#action_12458028 ] 
            
dhruba borthakur commented on HADOOP-745:
-----------------------------------------

Adding comments from an email thread:


> On 12/8/06, Espen Amble Kolstad <espen@trank.no> wrote:
> > Hi,
> >
> > I run hadoop-0.9-dev and my edits-file has become corrupt. When I 
> > try to start the namenode I get the following error:
> > 2006-12-08 20:38:57,431 ERROR dfs.NameNode -
> > java.io.FileNotFoundException: Parent path does not exist:
> > /user/trank/dotno/segments/20061208154235/parse_data/part-00000
> >         at
> > org.apache.hadoop.dfs.FSDirectory$INode.addNode(FSDirectory.java:186)
> >         at
> > org.apache.hadoop.dfs.FSDirectory.unprotectedMkdir(FSDirectory.java:714)
> >         at org.apache.hadoop.dfs.FSEditLog.loadFSEdits(FSEditLog.java:254)
> >         at org.apache.hadoop.dfs.FSImage.loadFSImage(FSImage.java:191)
> >         at
> > org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:320)
> >         at
> org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:226)
> >         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:142)
> >         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:134)
> >         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:585)
> >
> > I've grep'ed through my edits-file, to see what's wrong. It seems 
> > the edits-file is missing an OP_MKDIR for 
> > /user/trank/dotno/segments/20061208154235/parse_data.
> >
> > Is there a tool for fixing an edits-file, or to put in an OP_MKDIR ?

Email conversation with Albert Chen
-----------------------------------------------
Hi Dhruba,

This happened some time ago so my memory's sketchy, but I'll do my best to answer the questions:

> 1. Did you have more than one directory in dfs.name.dir?
> 2. Was this a new cluster or was it an existing cluster and was 
> upgraded to 0.9.0 recently?

It happened after we restarted the DFS when upgrading from 0.7 to 0.8.
 In the process, we also added multiple directories to dfs.name.dir.

> 3. Did any unnatural  Namenode restarts occur immediately before the 
> problem started occurring?

Not sure about this one.

> 1. Will it help to make the fsimage/edit file ascii, so that it can be 
> easily edited by hand?

That's a good idea, but I don't know if the effect on backwards compatibility is worth it.  Editing these files is probably not something that most people will do.  Maybe some sort of conversion tool that goes from the binary to text and vice versa would be more useful.

> 2. Does it make sense for HDFS to automatically create a directory 
> equivalent to /lost+found? While EditLog processing, if the parent 
> directory of a file does not exist, the file can go into /lost+found?

Yes.  At least this way people can start up their DFSs after corruption.


> NameNode throws FileNotFoundException: Parent path does not exist on startup
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-745
>                 URL: http://issues.apache.org/jira/browse/HADOOP-745
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>
> (with credit to Christian)
> The following exception is reported by the namenode upon startup:
> 2006-11-22 12:18:17,713 ERROR org.apache.hadoop.dfs.NameNode:
> java.io.FileNotFoundException: Parent path does not exist: /foo/bar
>         at org.apache.hadoop.dfs.FSDirectory$INode.addNode(FSDirectory.java:186)
>         at org.apache.hadoop.dfs.FSDirectory.unprotectedMkdir(FSDirectory.java:731)
>         at org.apache.hadoop.dfs.FSEditLog.loadFSEdits(FSEditLog.java:254)
>         at org.apache.hadoop.dfs.FSImage.loadFSImage(FSImage.java:191)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:321)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:230)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:145)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:137)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:585)
> Perhaps the 'mkdirs' section
>                INode inserted = unprotectedMkdir(cur);
>                if (inserted != null) {
>                    NameNode.stateChangeLog.debug("DIR* FSDirectory.mkdirs: "
>                         +"created directory "+cur );
>                    fsImage.getEditLog().logMkDir( inserted );
> needs to be synchronized or the unprotectedMkdir method needs to be changed
> to allow creating missing parent directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 06:43:44 2006
Return-Path: 
 <hadoop-dev-return-5965-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75210 invoked from network); 13 Dec 2006 06:43:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 06:43:44 -0000
Received: (qmail 19231 invoked by uid 500); 13 Dec 2006 06:43:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18984 invoked by uid 500); 13 Dec 2006 06:43:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18975 invoked by uid 99); 13 Dec 2006 06:43:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 22:43:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 22:43:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1946E7140D2
	for <hadoop-dev@lucene.apache.org>; Tue, 12 Dec 2006 22:43:23 -0800 (PST)
Message-ID: <11985727.1165992203101.JavaMail.jira@brutus>
Date: Tue, 12 Dec 2006 22:43:23 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-813) map tasks lost during sort
In-Reply-To: <30843820.1165896621216.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-813?page=all ]

Devaraj Das updated HADOOP-813:
-------------------------------

    Attachment: 813.patch

Thanks Owen for the review. I have removed the sortComplete variable and made the thread exit only on interrupt instead. 
The comment on "lots of changes" is actually due to the fact that I introduced a try{ } finally{ } block and wrapped/indented existing code within the 'try' block. This led to lots of diffs.

> map tasks lost during sort
> --------------------------
>
>                 Key: HADOOP-813
>                 URL: http://issues.apache.org/jira/browse/HADOOP-813
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.10.0
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.10.0
>
>         Attachments: 813.patch, 813.patch
>
>
> On a 500 node cluster, I had a bunch of map tasks get "lost" because they failed to report progress for 10 minutes. They appear to be in the sort stage at the end of the map. I hypothesize that the patch for HADOOP-331 does not update the map's progress during the sort/merge. If the sort/merge takes more than 10 minutes, the task is lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 08:26:44 2006
Return-Path: 
 <hadoop-dev-return-5966-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13701 invoked from network); 13 Dec 2006 08:26:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 08:26:44 -0000
Received: (qmail 72841 invoked by uid 500); 13 Dec 2006 08:26:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72602 invoked by uid 500); 13 Dec 2006 08:26:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72593 invoked by uid 99); 13 Dec 2006 08:26:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 00:26:50 -0800
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 00:26:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 46BE47140F6
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 00:26:22 -0800 (PST)
Message-ID: <19771991.1165998382287.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 00:26:22 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-816) Allow the sort benchmark to set a
 buffersize for the map buffer
In-Reply-To: <702305.1165916183398.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-816?page=all ]

Devaraj Das resolved HADOOP-816.
--------------------------------

    Resolution: Won't Fix

I am closing this for now. There are two reasons - the LOG.info when a spill happens is already there. The other reason is taking the info message to the user's console should probably be done after 801/805. I think we can postpone all that for the future.

> Allow the sort benchmark to set a buffersize for the map buffer
> ---------------------------------------------------------------
>
>                 Key: HADOOP-816
>                 URL: http://issues.apache.org/jira/browse/HADOOP-816
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: 816.patch
>
>
> Discovered that framework merges are the hotspots where most time is spent in the sort benchmark. With HADOOP-331, the Map phase could potentially do a merge of the spills (this merge was not done pre-HADOOP-331), and then there is one compulsory merge on each reduce. It may be good to avoid the merge in the Map phase, if possible.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 08:45:44 2006
Return-Path: 
 <hadoop-dev-return-5967-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23211 invoked from network); 13 Dec 2006 08:45:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 08:45:44 -0000
Received: (qmail 94374 invoked by uid 500); 13 Dec 2006 08:45:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94122 invoked by uid 500); 13 Dec 2006 08:45:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94104 invoked by uid 99); 13 Dec 2006 08:45:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 00:45:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 00:45:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4E0F07140F6
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 00:45:22 -0800 (PST)
Message-ID: <9323688.1165999522316.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 00:45:22 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-811) Patch to support multi-threaded
 MapRunnable
In-Reply-To: <15932768.1165852041100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-811?page=comments#action_12458049 ] 
            
Devaraj Das commented on HADOOP-811:
------------------------------------

You copy-pasted the patch as a comment on this issue. Could you please create a file out of this copy-paste stuff and upload that?

> Patch to support multi-threaded MapRunnable
> -------------------------------------------
>
>                 Key: HADOOP-811
>                 URL: http://issues.apache.org/jira/browse/HADOOP-811
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.10.0
>         Environment: all
>            Reporter: Alejandro Abdelnur
>         Attachments: MultithreadedMapRunner.java, MultithreadedMapRunner.java
>
>
> The MapRunner calls Mapper.map in a serialized fashion.
> This is suitable for CPU/memory bound operations.
> However, when doing IO bound operations this serialization affects the throughput significantly.
> In order to support IO bound operations more efficiently I've implemented a multithreaded MapRunnable.
> Following is the implementation of this MapRunnable, MultithreadedMapRunner.
> I've only had to modify on method in the existing code (in the Task class) to avoid data corruption in the reporter.
> Index: Task.java
> ===================================================================
> --- Task.java   (revision 485492)
> +++ Task.java   (working copy)
> @@ -153,9 +153,11 @@
>    public Reporter getReporter(final TaskUmbilicalProtocol umbilical,
>                                final Progress progress) throws IOException {
>      return new Reporter() {
> -        public void setStatus(String status) throws IOException {
> -          progress.setStatus(status);
> -          progress();
> +        public void setStatus(String status) throws IOException {
> +          synchronized (this) {
> +            progress.setStatus(status);
> +            progress();
> +          }
>          }
>          public void progress() throws IOException {
>              reportProgress(umbilical);
> -----------------------------------------------------------
> MultithreadedMapRunner.java
> package org.apache.hadoop.mapred;
> import org.apache.hadoop.util.ReflectionUtils;
> import org.apache.hadoop.io.WritableComparable;
> import org.apache.hadoop.io.Writable;
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
> import java.io.IOException;
> import java.util.concurrent.ExecutorService;
> import java.util.concurrent.Executors;
> import java.util.concurrent.TimeUnit;
> /**
>  * Multithreaded implementation for @link org.apache.hadoop.mapred.MapRunnable.
>  * <p>
>  * It can be used instead of the default implementation,
>  * @link org.apache.hadoop.mapred.MapRunner, when the Map operation is not CPU
>  * bound in order to improve throughput.
>  * <p>
>  * Map implementations using this MapRunnable must be thread-safe.
>  * <p>
>  * The Map-Reduce job has to be configured to use this MapRunnable class (using
>  * the <b>mapred.map.runner.class</b> property) and
>  * the number of thread the thread-pool can use (using the
>  * <b>mapred.map.multithreadedrunner.threads</b> property).
>  * <p>
>  *
>  * @author Alejandro Abdelnur
>  */
> public class MultithreadedMapRunner implements MapRunnable {
>   private static final Log LOG =
>       LogFactory.getLog(MultithreadedMapRunner.class.getName());
>   private JobConf job;
>   private Mapper mapper;
>   private ExecutorService executorService;
>   private IOException ioException;
>   public void configure(JobConf job) {
>     int numberOfThreads =
>         job.getInt("mapred.map.multithreadedrunner.threads", 10);
>     if (LOG.isDebugEnabled()) {
>       LOG.debug("Configuring job " + job.getJobName() +
>           " to use " + numberOfThreads + " threads" );
>     }
>     this.job = job;
>     this.mapper = (Mapper)ReflectionUtils.newInstance(job.getMapperClass(),
>                                                       job);
>     // Creating a threadpool of the configured size to execute the Mapper
>     // map method in parallel.
>     executorService = Executors.newFixedThreadPool(numberOfThreads);
>   }
>   public void run(RecordReader input, OutputCollector output,
>                   Reporter reporter)
>     throws IOException {
>     try {
>       // allocate key & value instances these objects will not be reused
>       // because execution of Mapper.map is not serialized.
>       WritableComparable key = input.createKey();
>       Writable value = input.createValue();
>       while (input.next(key, value)) {
>         // Run Mapper.map execution asynchronously in a separate thread.
>         // If threads are not available from the thread-pool this method
>         // will block until there is a thread available.
>         executorService.execute(
>             new MTMapperRunable(key, value, output, reporter));
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         if (ioException != null) {
>           throw ioException;
>         }
>         // Allocate new key & value instances as mapper is running in parallel
>         key = input.createKey();
>         value = input.createValue();
>       }
>       if (LOG.isDebugEnabled()) {
>         LOG.debug("Finished dispatching all Mappper.map calls, job "
>             + job.getJobName());
>       }
>       // Graceful shutdown of the Threadpool, it will let all scheduled
>       // Runnables to end.
>       executorService.shutdown();
>       try {
>         // Now waiting for all Runnables to end.
>         while (!executorService.awaitTermination(100, TimeUnit.MILLISECONDS)) {
>           if (LOG.isDebugEnabled()) {
>             LOG.debug("Awaiting all running Mappper.map calls to finish, job "
>                 + job.getJobName());
>           }
>           // Checking if a Mapper.map within a Runnable has generated an
>           // IOException. If so we rethrow it to force an abort of the Map
>           // operation thus keeping the semantics of the default
>           // implementation.
>           // NOTE: while Mapper.map dispatching has concluded there are still
>           // map calls in progress.
>           if (ioException != null) {
>             throw ioException;
>           }
>         }
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         // NOTE: it could be that a map call has had an exception after the
>         // call for awaitTermination() returing true. And edge case but it
>         // could happen.
>         if (ioException != null) {
>           throw ioException;
>         }
>       }
>       catch (IOException ioEx) {
>         // Forcing a shutdown of all thread of the threadpool and rethrowing
>         // the IOException
>         executorService.shutdownNow();
>         throw ioEx;
>       }
>       catch (InterruptedException iEx) {
>         throw new IOException(iEx.getMessage());
>       }
>     } finally {
>         mapper.close();
>     }
>   }
>   /**
>    * Runnable to execute a single Mapper.map call from a forked thread.
>    */
>   private class MTMapperRunable implements Runnable {
>     private WritableComparable key;
>     private Writable value;
>     private OutputCollector output;
>     private Reporter reporter;
>     /**
>      * Collecting all required parameters to execute a Mapper.map call.
>      * <p>
>      *
>      * @param key
>      * @param value
>      * @param output
>      * @param reporter
>      */
>     public MTMapperRunable(WritableComparable key, Writable value,
>         OutputCollector output, Reporter reporter) {
>       this.key = key;
>       this.value = value;
>       this.output = output;
>       this.reporter = reporter;
>     }
>     /**
>      * Executes a Mapper.map call with the given Mapper and parameters.
>      * <p>
>      * This method is called from the thread-pool thread.
>      *
>      */
>     public void run() {
>       try {
>         // map pair to output
>         MultithreadedMapRunner.this.mapper.map(key, value, output, reporter);
>       }
>       catch (IOException ex) {
>         // If there is an IOException during the call it is set in an instance
>         // variable of the MultithreadedMapRunner from where it will be
>         // rethrown.
>         synchronized (MultithreadedMapRunner.this) {
>           if (MultithreadedMapRunner.this.ioException == null) {
>             MultithreadedMapRunner.this.ioException = ex;
>           }
>         }
>       }
>     }
>   }
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 08:49:44 2006
Return-Path: 
 <hadoop-dev-return-5968-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24879 invoked from network); 13 Dec 2006 08:49:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 08:49:44 -0000
Received: (qmail 1954 invoked by uid 500); 13 Dec 2006 08:49:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1707 invoked by uid 500); 13 Dec 2006 08:49:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1698 invoked by uid 99); 13 Dec 2006 08:49:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 00:49:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 00:49:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4FFDC7140F6
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 00:49:22 -0800 (PST)
Message-ID: <32683999.1165999762325.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 00:49:22 -0800 (PST)
From: "Alejandro Abdelnur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-811) Patch to support multi-threaded
 MapRunnable
In-Reply-To: <15932768.1165852041100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-811?page=all ]

Alejandro Abdelnur updated HADOOP-811:
--------------------------------------

    Attachment: diff.txt

Attached is the 'svn diff'

> Patch to support multi-threaded MapRunnable
> -------------------------------------------
>
>                 Key: HADOOP-811
>                 URL: http://issues.apache.org/jira/browse/HADOOP-811
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.10.0
>         Environment: all
>            Reporter: Alejandro Abdelnur
>         Attachments: diff.txt, MultithreadedMapRunner.java, MultithreadedMapRunner.java
>
>
> The MapRunner calls Mapper.map in a serialized fashion.
> This is suitable for CPU/memory bound operations.
> However, when doing IO bound operations this serialization affects the throughput significantly.
> In order to support IO bound operations more efficiently I've implemented a multithreaded MapRunnable.
> Following is the implementation of this MapRunnable, MultithreadedMapRunner.
> I've only had to modify on method in the existing code (in the Task class) to avoid data corruption in the reporter.
> Index: Task.java
> ===================================================================
> --- Task.java   (revision 485492)
> +++ Task.java   (working copy)
> @@ -153,9 +153,11 @@
>    public Reporter getReporter(final TaskUmbilicalProtocol umbilical,
>                                final Progress progress) throws IOException {
>      return new Reporter() {
> -        public void setStatus(String status) throws IOException {
> -          progress.setStatus(status);
> -          progress();
> +        public void setStatus(String status) throws IOException {
> +          synchronized (this) {
> +            progress.setStatus(status);
> +            progress();
> +          }
>          }
>          public void progress() throws IOException {
>              reportProgress(umbilical);
> -----------------------------------------------------------
> MultithreadedMapRunner.java
> package org.apache.hadoop.mapred;
> import org.apache.hadoop.util.ReflectionUtils;
> import org.apache.hadoop.io.WritableComparable;
> import org.apache.hadoop.io.Writable;
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
> import java.io.IOException;
> import java.util.concurrent.ExecutorService;
> import java.util.concurrent.Executors;
> import java.util.concurrent.TimeUnit;
> /**
>  * Multithreaded implementation for @link org.apache.hadoop.mapred.MapRunnable.
>  * <p>
>  * It can be used instead of the default implementation,
>  * @link org.apache.hadoop.mapred.MapRunner, when the Map operation is not CPU
>  * bound in order to improve throughput.
>  * <p>
>  * Map implementations using this MapRunnable must be thread-safe.
>  * <p>
>  * The Map-Reduce job has to be configured to use this MapRunnable class (using
>  * the <b>mapred.map.runner.class</b> property) and
>  * the number of thread the thread-pool can use (using the
>  * <b>mapred.map.multithreadedrunner.threads</b> property).
>  * <p>
>  *
>  * @author Alejandro Abdelnur
>  */
> public class MultithreadedMapRunner implements MapRunnable {
>   private static final Log LOG =
>       LogFactory.getLog(MultithreadedMapRunner.class.getName());
>   private JobConf job;
>   private Mapper mapper;
>   private ExecutorService executorService;
>   private IOException ioException;
>   public void configure(JobConf job) {
>     int numberOfThreads =
>         job.getInt("mapred.map.multithreadedrunner.threads", 10);
>     if (LOG.isDebugEnabled()) {
>       LOG.debug("Configuring job " + job.getJobName() +
>           " to use " + numberOfThreads + " threads" );
>     }
>     this.job = job;
>     this.mapper = (Mapper)ReflectionUtils.newInstance(job.getMapperClass(),
>                                                       job);
>     // Creating a threadpool of the configured size to execute the Mapper
>     // map method in parallel.
>     executorService = Executors.newFixedThreadPool(numberOfThreads);
>   }
>   public void run(RecordReader input, OutputCollector output,
>                   Reporter reporter)
>     throws IOException {
>     try {
>       // allocate key & value instances these objects will not be reused
>       // because execution of Mapper.map is not serialized.
>       WritableComparable key = input.createKey();
>       Writable value = input.createValue();
>       while (input.next(key, value)) {
>         // Run Mapper.map execution asynchronously in a separate thread.
>         // If threads are not available from the thread-pool this method
>         // will block until there is a thread available.
>         executorService.execute(
>             new MTMapperRunable(key, value, output, reporter));
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         if (ioException != null) {
>           throw ioException;
>         }
>         // Allocate new key & value instances as mapper is running in parallel
>         key = input.createKey();
>         value = input.createValue();
>       }
>       if (LOG.isDebugEnabled()) {
>         LOG.debug("Finished dispatching all Mappper.map calls, job "
>             + job.getJobName());
>       }
>       // Graceful shutdown of the Threadpool, it will let all scheduled
>       // Runnables to end.
>       executorService.shutdown();
>       try {
>         // Now waiting for all Runnables to end.
>         while (!executorService.awaitTermination(100, TimeUnit.MILLISECONDS)) {
>           if (LOG.isDebugEnabled()) {
>             LOG.debug("Awaiting all running Mappper.map calls to finish, job "
>                 + job.getJobName());
>           }
>           // Checking if a Mapper.map within a Runnable has generated an
>           // IOException. If so we rethrow it to force an abort of the Map
>           // operation thus keeping the semantics of the default
>           // implementation.
>           // NOTE: while Mapper.map dispatching has concluded there are still
>           // map calls in progress.
>           if (ioException != null) {
>             throw ioException;
>           }
>         }
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         // NOTE: it could be that a map call has had an exception after the
>         // call for awaitTermination() returing true. And edge case but it
>         // could happen.
>         if (ioException != null) {
>           throw ioException;
>         }
>       }
>       catch (IOException ioEx) {
>         // Forcing a shutdown of all thread of the threadpool and rethrowing
>         // the IOException
>         executorService.shutdownNow();
>         throw ioEx;
>       }
>       catch (InterruptedException iEx) {
>         throw new IOException(iEx.getMessage());
>       }
>     } finally {
>         mapper.close();
>     }
>   }
>   /**
>    * Runnable to execute a single Mapper.map call from a forked thread.
>    */
>   private class MTMapperRunable implements Runnable {
>     private WritableComparable key;
>     private Writable value;
>     private OutputCollector output;
>     private Reporter reporter;
>     /**
>      * Collecting all required parameters to execute a Mapper.map call.
>      * <p>
>      *
>      * @param key
>      * @param value
>      * @param output
>      * @param reporter
>      */
>     public MTMapperRunable(WritableComparable key, Writable value,
>         OutputCollector output, Reporter reporter) {
>       this.key = key;
>       this.value = value;
>       this.output = output;
>       this.reporter = reporter;
>     }
>     /**
>      * Executes a Mapper.map call with the given Mapper and parameters.
>      * <p>
>      * This method is called from the thread-pool thread.
>      *
>      */
>     public void run() {
>       try {
>         // map pair to output
>         MultithreadedMapRunner.this.mapper.map(key, value, output, reporter);
>       }
>       catch (IOException ex) {
>         // If there is an IOException during the call it is set in an instance
>         // variable of the MultithreadedMapRunner from where it will be
>         // rethrown.
>         synchronized (MultithreadedMapRunner.this) {
>           if (MultithreadedMapRunner.this.ioException == null) {
>             MultithreadedMapRunner.this.ioException = ex;
>           }
>         }
>       }
>     }
>   }
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 08:49:45 2006
Return-Path: 
 <hadoop-dev-return-5969-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24925 invoked from network); 13 Dec 2006 08:49:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 08:49:45 -0000
Received: (qmail 2003 invoked by uid 500); 13 Dec 2006 08:49:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1969 invoked by uid 500); 13 Dec 2006 08:49:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1960 invoked by uid 99); 13 Dec 2006 08:49:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 00:49:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 00:49:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B34BA71413D
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 00:49:23 -0800 (PST)
Message-ID: <18614315.1165999763732.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 00:49:23 -0800 (PST)
From: "Alejandro Abdelnur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-811) Patch to support multi-threaded
 MapRunnable
In-Reply-To: <15932768.1165852041100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-811?page=all ]

Alejandro Abdelnur updated HADOOP-811:
--------------------------------------

    Status: In Progress  (was: Patch Available)

> Patch to support multi-threaded MapRunnable
> -------------------------------------------
>
>                 Key: HADOOP-811
>                 URL: http://issues.apache.org/jira/browse/HADOOP-811
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.10.0
>         Environment: all
>            Reporter: Alejandro Abdelnur
>         Attachments: diff.txt, MultithreadedMapRunner.java, MultithreadedMapRunner.java
>
>
> The MapRunner calls Mapper.map in a serialized fashion.
> This is suitable for CPU/memory bound operations.
> However, when doing IO bound operations this serialization affects the throughput significantly.
> In order to support IO bound operations more efficiently I've implemented a multithreaded MapRunnable.
> Following is the implementation of this MapRunnable, MultithreadedMapRunner.
> I've only had to modify on method in the existing code (in the Task class) to avoid data corruption in the reporter.
> Index: Task.java
> ===================================================================
> --- Task.java   (revision 485492)
> +++ Task.java   (working copy)
> @@ -153,9 +153,11 @@
>    public Reporter getReporter(final TaskUmbilicalProtocol umbilical,
>                                final Progress progress) throws IOException {
>      return new Reporter() {
> -        public void setStatus(String status) throws IOException {
> -          progress.setStatus(status);
> -          progress();
> +        public void setStatus(String status) throws IOException {
> +          synchronized (this) {
> +            progress.setStatus(status);
> +            progress();
> +          }
>          }
>          public void progress() throws IOException {
>              reportProgress(umbilical);
> -----------------------------------------------------------
> MultithreadedMapRunner.java
> package org.apache.hadoop.mapred;
> import org.apache.hadoop.util.ReflectionUtils;
> import org.apache.hadoop.io.WritableComparable;
> import org.apache.hadoop.io.Writable;
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
> import java.io.IOException;
> import java.util.concurrent.ExecutorService;
> import java.util.concurrent.Executors;
> import java.util.concurrent.TimeUnit;
> /**
>  * Multithreaded implementation for @link org.apache.hadoop.mapred.MapRunnable.
>  * <p>
>  * It can be used instead of the default implementation,
>  * @link org.apache.hadoop.mapred.MapRunner, when the Map operation is not CPU
>  * bound in order to improve throughput.
>  * <p>
>  * Map implementations using this MapRunnable must be thread-safe.
>  * <p>
>  * The Map-Reduce job has to be configured to use this MapRunnable class (using
>  * the <b>mapred.map.runner.class</b> property) and
>  * the number of thread the thread-pool can use (using the
>  * <b>mapred.map.multithreadedrunner.threads</b> property).
>  * <p>
>  *
>  * @author Alejandro Abdelnur
>  */
> public class MultithreadedMapRunner implements MapRunnable {
>   private static final Log LOG =
>       LogFactory.getLog(MultithreadedMapRunner.class.getName());
>   private JobConf job;
>   private Mapper mapper;
>   private ExecutorService executorService;
>   private IOException ioException;
>   public void configure(JobConf job) {
>     int numberOfThreads =
>         job.getInt("mapred.map.multithreadedrunner.threads", 10);
>     if (LOG.isDebugEnabled()) {
>       LOG.debug("Configuring job " + job.getJobName() +
>           " to use " + numberOfThreads + " threads" );
>     }
>     this.job = job;
>     this.mapper = (Mapper)ReflectionUtils.newInstance(job.getMapperClass(),
>                                                       job);
>     // Creating a threadpool of the configured size to execute the Mapper
>     // map method in parallel.
>     executorService = Executors.newFixedThreadPool(numberOfThreads);
>   }
>   public void run(RecordReader input, OutputCollector output,
>                   Reporter reporter)
>     throws IOException {
>     try {
>       // allocate key & value instances these objects will not be reused
>       // because execution of Mapper.map is not serialized.
>       WritableComparable key = input.createKey();
>       Writable value = input.createValue();
>       while (input.next(key, value)) {
>         // Run Mapper.map execution asynchronously in a separate thread.
>         // If threads are not available from the thread-pool this method
>         // will block until there is a thread available.
>         executorService.execute(
>             new MTMapperRunable(key, value, output, reporter));
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         if (ioException != null) {
>           throw ioException;
>         }
>         // Allocate new key & value instances as mapper is running in parallel
>         key = input.createKey();
>         value = input.createValue();
>       }
>       if (LOG.isDebugEnabled()) {
>         LOG.debug("Finished dispatching all Mappper.map calls, job "
>             + job.getJobName());
>       }
>       // Graceful shutdown of the Threadpool, it will let all scheduled
>       // Runnables to end.
>       executorService.shutdown();
>       try {
>         // Now waiting for all Runnables to end.
>         while (!executorService.awaitTermination(100, TimeUnit.MILLISECONDS)) {
>           if (LOG.isDebugEnabled()) {
>             LOG.debug("Awaiting all running Mappper.map calls to finish, job "
>                 + job.getJobName());
>           }
>           // Checking if a Mapper.map within a Runnable has generated an
>           // IOException. If so we rethrow it to force an abort of the Map
>           // operation thus keeping the semantics of the default
>           // implementation.
>           // NOTE: while Mapper.map dispatching has concluded there are still
>           // map calls in progress.
>           if (ioException != null) {
>             throw ioException;
>           }
>         }
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         // NOTE: it could be that a map call has had an exception after the
>         // call for awaitTermination() returing true. And edge case but it
>         // could happen.
>         if (ioException != null) {
>           throw ioException;
>         }
>       }
>       catch (IOException ioEx) {
>         // Forcing a shutdown of all thread of the threadpool and rethrowing
>         // the IOException
>         executorService.shutdownNow();
>         throw ioEx;
>       }
>       catch (InterruptedException iEx) {
>         throw new IOException(iEx.getMessage());
>       }
>     } finally {
>         mapper.close();
>     }
>   }
>   /**
>    * Runnable to execute a single Mapper.map call from a forked thread.
>    */
>   private class MTMapperRunable implements Runnable {
>     private WritableComparable key;
>     private Writable value;
>     private OutputCollector output;
>     private Reporter reporter;
>     /**
>      * Collecting all required parameters to execute a Mapper.map call.
>      * <p>
>      *
>      * @param key
>      * @param value
>      * @param output
>      * @param reporter
>      */
>     public MTMapperRunable(WritableComparable key, Writable value,
>         OutputCollector output, Reporter reporter) {
>       this.key = key;
>       this.value = value;
>       this.output = output;
>       this.reporter = reporter;
>     }
>     /**
>      * Executes a Mapper.map call with the given Mapper and parameters.
>      * <p>
>      * This method is called from the thread-pool thread.
>      *
>      */
>     public void run() {
>       try {
>         // map pair to output
>         MultithreadedMapRunner.this.mapper.map(key, value, output, reporter);
>       }
>       catch (IOException ex) {
>         // If there is an IOException during the call it is set in an instance
>         // variable of the MultithreadedMapRunner from where it will be
>         // rethrown.
>         synchronized (MultithreadedMapRunner.this) {
>           if (MultithreadedMapRunner.this.ioException == null) {
>             MultithreadedMapRunner.this.ioException = ex;
>           }
>         }
>       }
>     }
>   }
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 09:07:47 2006
Return-Path: 
 <hadoop-dev-return-5970-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34615 invoked from network); 13 Dec 2006 09:07:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 09:07:47 -0000
Received: (qmail 28820 invoked by uid 500); 13 Dec 2006 09:07:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28791 invoked by uid 500); 13 Dec 2006 09:07:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28730 invoked by uid 99); 13 Dec 2006 09:07:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 01:07:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 01:07:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 84FDC71413F
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 01:07:24 -0800 (PST)
Message-ID: <17730446.1166000844542.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 01:07:24 -0800 (PST)
From: "Alejandro Abdelnur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-811) Patch to support multi-threaded
 MapRunnable
In-Reply-To: <15932768.1165852041100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-811?page=all ]

Alejandro Abdelnur updated HADOOP-811:
--------------------------------------

    Attachment: diff.txt

and now, indented.

> Patch to support multi-threaded MapRunnable
> -------------------------------------------
>
>                 Key: HADOOP-811
>                 URL: http://issues.apache.org/jira/browse/HADOOP-811
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.10.0
>         Environment: all
>            Reporter: Alejandro Abdelnur
>         Attachments: diff.txt, diff.txt, MultithreadedMapRunner.java, MultithreadedMapRunner.java
>
>
> The MapRunner calls Mapper.map in a serialized fashion.
> This is suitable for CPU/memory bound operations.
> However, when doing IO bound operations this serialization affects the throughput significantly.
> In order to support IO bound operations more efficiently I've implemented a multithreaded MapRunnable.
> Following is the implementation of this MapRunnable, MultithreadedMapRunner.
> I've only had to modify on method in the existing code (in the Task class) to avoid data corruption in the reporter.
> Index: Task.java
> ===================================================================
> --- Task.java   (revision 485492)
> +++ Task.java   (working copy)
> @@ -153,9 +153,11 @@
>    public Reporter getReporter(final TaskUmbilicalProtocol umbilical,
>                                final Progress progress) throws IOException {
>      return new Reporter() {
> -        public void setStatus(String status) throws IOException {
> -          progress.setStatus(status);
> -          progress();
> +        public void setStatus(String status) throws IOException {
> +          synchronized (this) {
> +            progress.setStatus(status);
> +            progress();
> +          }
>          }
>          public void progress() throws IOException {
>              reportProgress(umbilical);
> -----------------------------------------------------------
> MultithreadedMapRunner.java
> package org.apache.hadoop.mapred;
> import org.apache.hadoop.util.ReflectionUtils;
> import org.apache.hadoop.io.WritableComparable;
> import org.apache.hadoop.io.Writable;
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
> import java.io.IOException;
> import java.util.concurrent.ExecutorService;
> import java.util.concurrent.Executors;
> import java.util.concurrent.TimeUnit;
> /**
>  * Multithreaded implementation for @link org.apache.hadoop.mapred.MapRunnable.
>  * <p>
>  * It can be used instead of the default implementation,
>  * @link org.apache.hadoop.mapred.MapRunner, when the Map operation is not CPU
>  * bound in order to improve throughput.
>  * <p>
>  * Map implementations using this MapRunnable must be thread-safe.
>  * <p>
>  * The Map-Reduce job has to be configured to use this MapRunnable class (using
>  * the <b>mapred.map.runner.class</b> property) and
>  * the number of thread the thread-pool can use (using the
>  * <b>mapred.map.multithreadedrunner.threads</b> property).
>  * <p>
>  *
>  * @author Alejandro Abdelnur
>  */
> public class MultithreadedMapRunner implements MapRunnable {
>   private static final Log LOG =
>       LogFactory.getLog(MultithreadedMapRunner.class.getName());
>   private JobConf job;
>   private Mapper mapper;
>   private ExecutorService executorService;
>   private IOException ioException;
>   public void configure(JobConf job) {
>     int numberOfThreads =
>         job.getInt("mapred.map.multithreadedrunner.threads", 10);
>     if (LOG.isDebugEnabled()) {
>       LOG.debug("Configuring job " + job.getJobName() +
>           " to use " + numberOfThreads + " threads" );
>     }
>     this.job = job;
>     this.mapper = (Mapper)ReflectionUtils.newInstance(job.getMapperClass(),
>                                                       job);
>     // Creating a threadpool of the configured size to execute the Mapper
>     // map method in parallel.
>     executorService = Executors.newFixedThreadPool(numberOfThreads);
>   }
>   public void run(RecordReader input, OutputCollector output,
>                   Reporter reporter)
>     throws IOException {
>     try {
>       // allocate key & value instances these objects will not be reused
>       // because execution of Mapper.map is not serialized.
>       WritableComparable key = input.createKey();
>       Writable value = input.createValue();
>       while (input.next(key, value)) {
>         // Run Mapper.map execution asynchronously in a separate thread.
>         // If threads are not available from the thread-pool this method
>         // will block until there is a thread available.
>         executorService.execute(
>             new MTMapperRunable(key, value, output, reporter));
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         if (ioException != null) {
>           throw ioException;
>         }
>         // Allocate new key & value instances as mapper is running in parallel
>         key = input.createKey();
>         value = input.createValue();
>       }
>       if (LOG.isDebugEnabled()) {
>         LOG.debug("Finished dispatching all Mappper.map calls, job "
>             + job.getJobName());
>       }
>       // Graceful shutdown of the Threadpool, it will let all scheduled
>       // Runnables to end.
>       executorService.shutdown();
>       try {
>         // Now waiting for all Runnables to end.
>         while (!executorService.awaitTermination(100, TimeUnit.MILLISECONDS)) {
>           if (LOG.isDebugEnabled()) {
>             LOG.debug("Awaiting all running Mappper.map calls to finish, job "
>                 + job.getJobName());
>           }
>           // Checking if a Mapper.map within a Runnable has generated an
>           // IOException. If so we rethrow it to force an abort of the Map
>           // operation thus keeping the semantics of the default
>           // implementation.
>           // NOTE: while Mapper.map dispatching has concluded there are still
>           // map calls in progress.
>           if (ioException != null) {
>             throw ioException;
>           }
>         }
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         // NOTE: it could be that a map call has had an exception after the
>         // call for awaitTermination() returing true. And edge case but it
>         // could happen.
>         if (ioException != null) {
>           throw ioException;
>         }
>       }
>       catch (IOException ioEx) {
>         // Forcing a shutdown of all thread of the threadpool and rethrowing
>         // the IOException
>         executorService.shutdownNow();
>         throw ioEx;
>       }
>       catch (InterruptedException iEx) {
>         throw new IOException(iEx.getMessage());
>       }
>     } finally {
>         mapper.close();
>     }
>   }
>   /**
>    * Runnable to execute a single Mapper.map call from a forked thread.
>    */
>   private class MTMapperRunable implements Runnable {
>     private WritableComparable key;
>     private Writable value;
>     private OutputCollector output;
>     private Reporter reporter;
>     /**
>      * Collecting all required parameters to execute a Mapper.map call.
>      * <p>
>      *
>      * @param key
>      * @param value
>      * @param output
>      * @param reporter
>      */
>     public MTMapperRunable(WritableComparable key, Writable value,
>         OutputCollector output, Reporter reporter) {
>       this.key = key;
>       this.value = value;
>       this.output = output;
>       this.reporter = reporter;
>     }
>     /**
>      * Executes a Mapper.map call with the given Mapper and parameters.
>      * <p>
>      * This method is called from the thread-pool thread.
>      *
>      */
>     public void run() {
>       try {
>         // map pair to output
>         MultithreadedMapRunner.this.mapper.map(key, value, output, reporter);
>       }
>       catch (IOException ex) {
>         // If there is an IOException during the call it is set in an instance
>         // variable of the MultithreadedMapRunner from where it will be
>         // rethrown.
>         synchronized (MultithreadedMapRunner.this) {
>           if (MultithreadedMapRunner.this.ioException == null) {
>             MultithreadedMapRunner.this.ioException = ex;
>           }
>         }
>       }
>     }
>   }
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 10:23:47 2006
Return-Path: 
 <hadoop-dev-return-5971-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75404 invoked from network); 13 Dec 2006 10:23:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 10:23:47 -0000
Received: (qmail 64898 invoked by uid 500); 13 Dec 2006 10:23:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64604 invoked by uid 500); 13 Dec 2006 10:23:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64595 invoked by uid 99); 13 Dec 2006 10:23:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 02:23:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 02:23:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 56EED7140F6
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 02:23:22 -0800 (PST)
Message-ID: <1286343.1166005402353.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 02:23:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-815) Investigate and fix the extremely
 large memory-footprint of JobTracker
In-Reply-To: <28416645.1165904481055.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-815?page=comments#action_12458069 ] 
            
Arun C Murthy commented on HADOOP-815:
--------------------------------------

Change 1:

I plan to remove:
org.apache.hadoop.mapred.TaskInProgress.totalTaskIds (String[])& 
org.apache.hadoop.mapred.TaskInProgress.usableTaskIds (TreeSet)

and replace them with:
ArrayList<String> usableTaskIds

totalTaskIds isn't used anywhere except in org.apache.hadoop.mapred.TaskInProgress.init() and we don't need usableTaskIds to be a TreeSet, and ArrayList should suffice...

(I'll keep updating this issue with proposed changes as I glean more info from memory profiles of the JobTracker.)

> Investigate and fix the extremely large memory-footprint of JobTracker
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-815
>                 URL: http://issues.apache.org/jira/browse/HADOOP-815
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>
> The JobTracker's memory footprint seems excessively large, especially when many jobs are submitted.
> Here is the 'top' output of a JobTracker which has scheduled ~1k jobs thus far:
>   PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                     
> 31877 arunc     19   0 2362m 261m  13m S 14.0 12.9  24:48.08 java  
> Clearly VIRTual memory of 2364Mb v/s 261Mb of RESident memory is symptomatic of this issue...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 15:42:52 2006
Return-Path: 
 <hadoop-dev-return-5972-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15080 invoked from network); 13 Dec 2006 15:42:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 15:42:52 -0000
Received: (qmail 74704 invoked by uid 500); 13 Dec 2006 15:42:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74609 invoked by uid 500); 13 Dec 2006 15:42:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74566 invoked by uid 99); 13 Dec 2006 15:42:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 07:42:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 07:42:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 435C371413F
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 07:42:21 -0800 (PST)
Message-ID: <3190561.1166024541271.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 07:42:21 -0800 (PST)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-821) Web UI should display the split info
 (filename, start/end position) of each map task
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Web UI should display the split info (filename, start/end position) of each map task
------------------------------------------------------------------------------------

                 Key: HADOOP-821
                 URL: http://issues.apache.org/jira/browse/HADOOP-821
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Runping Qi




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 15:48:59 2006
Return-Path: 
 <hadoop-dev-return-5973-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17206 invoked from network); 13 Dec 2006 15:48:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 15:48:59 -0000
Received: (qmail 93859 invoked by uid 500); 13 Dec 2006 15:48:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93839 invoked by uid 500); 13 Dec 2006 15:48:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93795 invoked by uid 99); 13 Dec 2006 15:48:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 07:48:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 07:48:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 21425714167
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 07:48:24 -0800 (PST)
Message-ID: <26619679.1166024904133.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 07:48:24 -0800 (PST)
From: "Garrett Rooney (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Moved: (HADOOP-822) Web UI should display the split info
 (filename, start/end position) of each map task
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-822?page=all ]

Garrett Rooney moved ABDERA-28 to HADOOP-822:
---------------------------------------------

     Project: Hadoop  (was: Abdera)
         Key: HADOOP-822  (was: ABDERA-28)
    Workflow: no-reopen-closed, patch-avail  (was: jira)

> Web UI should display the split info (filename, start/end position) of each map task
> ------------------------------------------------------------------------------------
>
>                 Key: HADOOP-822
>                 URL: http://issues.apache.org/jira/browse/HADOOP-822
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Runping Qi
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 16:46:26 2006
Return-Path: 
 <hadoop-dev-return-5974-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43130 invoked from network); 13 Dec 2006 16:46:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 16:46:26 -0000
Received: (qmail 82875 invoked by uid 500); 13 Dec 2006 16:46:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82795 invoked by uid 500); 13 Dec 2006 16:46:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82731 invoked by uid 99); 13 Dec 2006 16:46:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 08:46:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 08:45:50 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 532BA7141A2
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 08:45:22 -0800 (PST)
Message-ID: <29225501.1166028322338.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 08:45:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-667) Path configuration properties should
 not be comma separated
In-Reply-To: <23824706.1162403896582.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-667?page=all ]

Owen O'Malley resolved HADOOP-667.
----------------------------------

    Resolution: Won't Fix

> Path configuration properties should not be comma separated
> -----------------------------------------------------------
>
>                 Key: HADOOP-667
>                 URL: http://issues.apache.org/jira/browse/HADOOP-667
>             Project: Hadoop
>          Issue Type: Bug
>          Components: fs
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>            Priority: Minor
>
> A few configuration properties allow multiple directory paths separated by comma's (,).  Since comma is a valid character for a directory name, it should not be used as a path separator.
> At a minimum, this applies to these properties:
>      mapred.local.dir
>      dfs.name.dir
> [ I also wonder how robust the implementation is against paths that contain spaces. ]

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 16:54:48 2006
Return-Path: 
 <hadoop-dev-return-5975-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46767 invoked from network); 13 Dec 2006 16:54:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 16:54:48 -0000
Received: (qmail 10783 invoked by uid 500); 13 Dec 2006 16:54:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10757 invoked by uid 500); 13 Dec 2006 16:54:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10719 invoked by uid 99); 13 Dec 2006 16:54:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 08:54:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 08:54:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 87FED7141A3
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 08:54:25 -0800 (PST)
Message-ID: <591918.1166028865554.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 08:54:25 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-821) Web UI should display the split info
 (filename, start/end position) of each map task
In-Reply-To: <3190561.1166024541271.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-821?page=comments#action_12458190 ] 
            
Doug Cutting commented on HADOOP-821:
-------------------------------------

Note that when Split becomes an interface (HADOOP-451) this will not always be possible.  We could use toString() on the split, however, and hope that split implementations are informative.

> Web UI should display the split info (filename, start/end position) of each map task
> ------------------------------------------------------------------------------------
>
>                 Key: HADOOP-821
>                 URL: http://issues.apache.org/jira/browse/HADOOP-821
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Runping Qi
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 19:17:06 2006
Return-Path: 
 <hadoop-dev-return-5976-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94851 invoked from network); 13 Dec 2006 19:17:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 19:17:06 -0000
Received: (qmail 99223 invoked by uid 500); 13 Dec 2006 19:16:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99143 invoked by uid 500); 13 Dec 2006 19:16:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99089 invoked by uid 99); 13 Dec 2006 19:16:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:16:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:16:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6765B7141A3
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 11:16:21 -0800 (PST)
Message-ID: <13577180.1166037381421.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 11:16:21 -0800 (PST)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-823) DataNode will not start up if any
 directories from dfs.data.dir are missing
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

DataNode will not start up if any directories from dfs.data.dir are missing
---------------------------------------------------------------------------

                 Key: HADOOP-823
                 URL: http://issues.apache.org/jira/browse/HADOOP-823
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Bryan Pendleton


Minor bug - the list of good directories is generated, but the original list of directories is still used.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 19:18:46 2006
Return-Path: 
 <hadoop-dev-return-5977-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96106 invoked from network); 13 Dec 2006 19:18:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 19:18:46 -0000
Received: (qmail 6256 invoked by uid 500); 13 Dec 2006 19:18:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6227 invoked by uid 500); 13 Dec 2006 19:18:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6218 invoked by uid 99); 13 Dec 2006 19:18:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:18:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:18:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3FF7971413F
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 11:18:24 -0800 (PST)
Message-ID: <28527648.1166037504259.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 11:18:24 -0800 (PST)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-823) DataNode will not start up if any
 directories from dfs.data.dir are missing
In-Reply-To: <13577180.1166037381421.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-823?page=all ]

Bryan Pendleton updated HADOOP-823:
-----------------------------------

    Attachment: fixDataNodeStartup.patch

The patch.

> DataNode will not start up if any directories from dfs.data.dir are missing
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-823
>                 URL: http://issues.apache.org/jira/browse/HADOOP-823
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Bryan Pendleton
>         Attachments: fixDataNodeStartup.patch
>
>
> Minor bug - the list of good directories is generated, but the original list of directories is still used.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 19:18:47 2006
Return-Path: 
 <hadoop-dev-return-5978-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96152 invoked from network); 13 Dec 2006 19:18:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 19:18:47 -0000
Received: (qmail 6543 invoked by uid 500); 13 Dec 2006 19:18:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6512 invoked by uid 500); 13 Dec 2006 19:18:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6500 invoked by uid 99); 13 Dec 2006 19:18:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:18:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:18:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A134A714168
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 11:18:25 -0800 (PST)
Message-ID: <4786350.1166037505658.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 11:18:25 -0800 (PST)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-823) DataNode will not start up if any
 directories from dfs.data.dir are missing
In-Reply-To: <13577180.1166037381421.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-823?page=all ]

Bryan Pendleton updated HADOOP-823:
-----------------------------------

    Status: Patch Available  (was: Open)

> DataNode will not start up if any directories from dfs.data.dir are missing
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-823
>                 URL: http://issues.apache.org/jira/browse/HADOOP-823
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Bryan Pendleton
>         Attachments: fixDataNodeStartup.patch
>
>
> Minor bug - the list of good directories is generated, but the original list of directories is still used.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 19:20:45 2006
Return-Path: 
 <hadoop-dev-return-5979-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96869 invoked from network); 13 Dec 2006 19:20:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 19:20:45 -0000
Received: (qmail 14514 invoked by uid 500); 13 Dec 2006 19:20:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14488 invoked by uid 500); 13 Dec 2006 19:20:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14472 invoked by uid 99); 13 Dec 2006 19:20:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:20:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:20:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6475A7140D2
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 11:20:23 -0800 (PST)
Message-ID: <10102203.1166037623407.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 11:20:23 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-454) hadoop du optionally behave like
 unix's du -s
In-Reply-To: <11062171.1155582313998.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-454?page=all ]

Hairong Kuang updated HADOOP-454:
---------------------------------

    Attachment: dus_new.patch

The updated patch also includes the changes to the dfs shell usage messages.

> hadoop du optionally behave like unix's du -s
> ---------------------------------------------
>
>                 Key: HADOOP-454
>                 URL: http://issues.apache.org/jira/browse/HADOOP-454
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.9.1
>            Reporter: Marco Nicosia
>         Assigned To: Hairong Kuang
>            Priority: Trivial
>             Fix For: 0.10.0
>
>         Attachments: dus.patch, dus_new.patch
>
>
> In Unix, the user has the option to specify a -s flag:
>      -s      Display an entry for each specified file.  (Equivalent to -d 0)
> Instead of providing data for the subdirectories of the arguments, du prints the total usage of each argument, without printing subdirectories.
> This is very convenient for those looking to find how much space is used by a particular branch, without requring them to add up all the sub-usages.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 19:22:48 2006
Return-Path: 
 <hadoop-dev-return-5980-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97584 invoked from network); 13 Dec 2006 19:22:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 19:22:48 -0000
Received: (qmail 17287 invoked by uid 500); 13 Dec 2006 19:22:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17264 invoked by uid 500); 13 Dec 2006 19:22:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17249 invoked by uid 99); 13 Dec 2006 19:22:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:22:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:22:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E9759714167
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 11:22:23 -0800 (PST)
Message-ID: <15925713.1166037743953.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 11:22:23 -0800 (PST)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-820) NameNode startup fails if edit log
 terminates prematurely
In-Reply-To: <15745259.1165967301109.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-820?page=all ]

Bryan Pendleton updated HADOOP-820:
-----------------------------------

    Attachment: fixNameNodeStartup.patch

This is a trivial workaround, which can be used by anyone else stuck by a truncated log. It's not what a good solution - needs better logging, probably a preference that defaults to "don't go on", etc. However, as my log filled up doing replication changes, this even results in no data loss in my case.

> NameNode startup fails if edit log terminates prematurely
> ---------------------------------------------------------
>
>                 Key: HADOOP-820
>                 URL: http://issues.apache.org/jira/browse/HADOOP-820
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>         Environment: ~50 node cluster
>            Reporter: Bryan Pendleton
>         Attachments: fixNameNodeStartup.patch
>
>
> I ran out of space on the device that stores the edit log, resulting in an edit log that is truncated mid transaction.
> Ideally, the NameNode should start up, in SafeMode or the like, whenever this happens. Right now, you get this stack trace:
> 2006-12-12 15:33:57,212 ERROR org.apache.hadoop.dfs.NameNode: java.io.EOFExcepti
> on
>         at java.io.DataInputStream.readUnsignedShort(DataInputStream.java:310)
>         at org.apache.hadoop.io.UTF8.readFields(UTF8.java:104)
>         at org.apache.hadoop.dfs.FSEditLog.loadFSEdits(FSEditLog.java:227)
>         at org.apache.hadoop.dfs.FSImage.loadFSImage(FSImage.java:191)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:320)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:226)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:146)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:138)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:589)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 19:24:48 2006
Return-Path: 
 <hadoop-dev-return-5981-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98443 invoked from network); 13 Dec 2006 19:24:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 19:24:48 -0000
Received: (qmail 24973 invoked by uid 500); 13 Dec 2006 19:24:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24937 invoked by uid 500); 13 Dec 2006 19:24:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24928 invoked by uid 99); 13 Dec 2006 19:24:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:24:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:24:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D98227141A3
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 11:24:24 -0800 (PST)
Message-ID: <12289247.1166037864888.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 11:24:24 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-720) Write a white paper on Hadoop File
 System Architecture, Design and Features
In-Reply-To: <18904498.1163544757102.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-720?page=all ]

Doug Cutting updated HADOOP-720:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba!

For the record, I generated the PNG images (which are smaller and better looking than JPG for these diagrams) by opening the ODG files in OpenOffice, using "Edit>Select All", then using "File>Export..." to export the selection as a PNG file.  (Exporting the entire document results in a larger image with a page number.)

Both the ODG source and generated PNG files are committed to subversion.

> Write a white paper on Hadoop File System Architecture, Design and Features
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-720
>                 URL: http://issues.apache.org/jira/browse/HADOOP-720
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>             Fix For: 0.10.0
>
>         Attachments: HadoopArchitecture_v2.doc, HadoopArchitecture_v2.htm, hdfsarchitecture.odg, hdfsdatanodes.odg, HDFSForrest.patch
>
>
> Write a white paper on Hadoop File System Architecture, Design and Features.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 19:34:45 2006
Return-Path: 
 <hadoop-dev-return-5982-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1265 invoked from network); 13 Dec 2006 19:34:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 19:34:45 -0000
Received: (qmail 42577 invoked by uid 500); 13 Dec 2006 19:34:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42541 invoked by uid 500); 13 Dec 2006 19:34:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42532 invoked by uid 99); 13 Dec 2006 19:34:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:34:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:34:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 225A771413F
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 11:34:23 -0800 (PST)
Message-ID: <3023292.1166038463137.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 11:34:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-794) JobTracker crashes with
 ArithmeticException
In-Reply-To: <20588755.1165516221125.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-794?page=all ]

Doug Cutting updated HADOOP-794:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> JobTracker crashes with ArithmeticException
> -------------------------------------------
>
>                 Key: HADOOP-794
>                 URL: http://issues.apache.org/jira/browse/HADOOP-794
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Nigel Daley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: div-zero.patch
>
>
> The sort benchmark on 20 nodes failed for me with an ArithmeticException.  Sort.java calculates the number of maps and reduces dynamically based on the cluster size.  I'm guessing at the time it did the calculation, the jobtracker had heard from 0 task trackers (which seems odd since I wait 1 minute after starting the jobtracker before starting Sort).
> From the job output:
> Running on 0 nodes to sort from /sortBenchmark20/input into /sortBenchmark20/output with 0 reduces.
> From the JobTracker log:
> 2006-12-07 07:10:06,709 ERROR org.apache.hadoop.mapred.JobTracker: Job initialization failed:
> java.lang.ArithmeticException: / by zero
>         at org.apache.hadoop.mapred.InputFormatBase.getSplits(InputFormatBase.java:130)
>         at org.apache.hadoop.mapred.JobInProgress.initTasks(JobInProgress.java:125)
>         at org.apache.hadoop.mapred.JobTracker$JobInitThread.run(JobTracker.java:326)
>         at java.lang.Thread.run(Thread.java:595)
> The jobtacker should check for illegal inputs like this and not fall over.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 21:22:22 2006
Return-Path: 
 <hadoop-dev-return-5983-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39621 invoked from network); 13 Dec 2006 21:22:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 21:22:22 -0000
Received: (qmail 1193 invoked by uid 500); 13 Dec 2006 21:22:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1162 invoked by uid 500); 13 Dec 2006 21:22:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1153 invoked by uid 99); 13 Dec 2006 21:22:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 13:22:28 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 13:22:18 -0800
Received: from [10.72.109.129] (thickbeside-lm.corp.yahoo.com [10.72.109.129])
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kBDLLoT3093481
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 13:21:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=aqDLQ4Bt53gEbCITINbZ2fm+v7L4gR9px8wHChYRfGxs1OzkpOB2DWTGXccpPRQB
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <4579DBC6.1040106@apache.org>
References: <27907734.1165578322439.JavaMail.jira@brutus>
 <6BA7D636-8A3B-4D14-A7A5-C61035492E95@yahoo-inc.com>
 <45799FA5.4070706@apache.org>
 <6E72F738-5937-4244-B767-E4DB49EE2D8B@yahoo-inc.com>
 <4579DBC6.1040106@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <072EAFA4-0DEF-44B0-AB24-0EDC898AE975@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Nigel Daley <ndaley@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-808) Enhance 'bin/hadoop job -submit
 <>'
Date: Wed, 13 Dec 2006 13:21:45 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 8, 2006, at 1:40 PM, Doug Cutting wrote:

> Nigel Daley wrote:
>> So far I haven't had any failures.  Perhaps we should wait for  
>> more experience?  Currently, the system will email me after 2  
>> failed build/test attempts on the same patch.  I could send these  
>> failure emails to hadoop-dev if you'd prefer.  But realize that  
>> these emails may occasionally be false negatives.
>
> Ideally we'd get a '-1' comment if the patch doesn't apply to  
> trunk, no?  This would be annoying if there were lots of false  
> negatives.  But it could save folks time, when, e.g., a patch gets  
> stale, if it's noted in the patch.

Ok, I haven't seen a lot of false negatives so this should work.   
I'll post a -1 comment if the build/test fails three times or if I  
can't apply the patch.

> Should we re-run tests on patches daily, and if something that  
> previously passed now fails or vice versa, note the change in state?

Ya this would be nice, but I'm not signing up for implementing this  
right now.

Cheers,
Nige

From MAILER-DAEMON Wed Dec 13 21:35:44 2006
Return-Path: 
 <hadoop-dev-return-5984-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42045 invoked from network); 13 Dec 2006 21:35:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 21:35:44 -0000
Received: (qmail 23907 invoked by uid 500); 13 Dec 2006 21:35:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23668 invoked by uid 500); 13 Dec 2006 21:35:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23620 invoked by uid 99); 13 Dec 2006 21:35:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 13:35:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 13:35:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5F8187141A4
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 13:35:22 -0800 (PST)
Message-ID: <9239648.1166045722388.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 13:35:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-820) NameNode startup fails if edit log
 terminates prematurely
In-Reply-To: <15745259.1165967301109.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-820?page=comments#action_12458267 ] 
            
Hadoop QA commented on HADOOP-820:
----------------------------------

-1, since the patch command could not apply the latest attachment as a patch: http://issues.apache.org/jira/secure/attachment/12347120/fixNameNodeStartup.patch. Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.

> NameNode startup fails if edit log terminates prematurely
> ---------------------------------------------------------
>
>                 Key: HADOOP-820
>                 URL: http://issues.apache.org/jira/browse/HADOOP-820
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>         Environment: ~50 node cluster
>            Reporter: Bryan Pendleton
>         Attachments: fixNameNodeStartup.patch
>
>
> I ran out of space on the device that stores the edit log, resulting in an edit log that is truncated mid transaction.
> Ideally, the NameNode should start up, in SafeMode or the like, whenever this happens. Right now, you get this stack trace:
> 2006-12-12 15:33:57,212 ERROR org.apache.hadoop.dfs.NameNode: java.io.EOFExcepti
> on
>         at java.io.DataInputStream.readUnsignedShort(DataInputStream.java:310)
>         at org.apache.hadoop.io.UTF8.readFields(UTF8.java:104)
>         at org.apache.hadoop.dfs.FSEditLog.loadFSEdits(FSEditLog.java:227)
>         at org.apache.hadoop.dfs.FSImage.loadFSImage(FSImage.java:191)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:320)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:226)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:146)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:138)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:589)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 21:37:48 2006
Return-Path: 
 <hadoop-dev-return-5985-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43097 invoked from network); 13 Dec 2006 21:37:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 21:37:48 -0000
Received: (qmail 30772 invoked by uid 500); 13 Dec 2006 21:37:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30750 invoked by uid 500); 13 Dec 2006 21:37:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30741 invoked by uid 99); 13 Dec 2006 21:37:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 13:37:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 13:37:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD3637141A5
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 13:37:25 -0800 (PST)
Message-ID: <17142595.1166045845838.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 13:37:25 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-823) DataNode will not start up if any
 directories from dfs.data.dir are missing
In-Reply-To: <13577180.1166037381421.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-823?page=comments#action_12458269 ] 
            
Hadoop QA commented on HADOOP-823:
----------------------------------

-1, since the patch command could not apply the latest attachment as a patch: http://issues.apache.org/jira/secure/attachment/12347117/fixDataNodeStartup.patch. Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.

> DataNode will not start up if any directories from dfs.data.dir are missing
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-823
>                 URL: http://issues.apache.org/jira/browse/HADOOP-823
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Bryan Pendleton
>         Attachments: fixDataNodeStartup.patch
>
>
> Minor bug - the list of good directories is generated, but the original list of directories is still used.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 21:41:44 2006
Return-Path: 
 <hadoop-dev-return-5986-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44969 invoked from network); 13 Dec 2006 21:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 21:41:44 -0000
Received: (qmail 39283 invoked by uid 500); 13 Dec 2006 21:41:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39053 invoked by uid 500); 13 Dec 2006 21:41:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39044 invoked by uid 99); 13 Dec 2006 21:41:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 13:41:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 13:41:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 129F5714168
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 13:41:23 -0800 (PST)
Message-ID: <630129.1166046083073.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 13:41:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12458270 ] 
            
Doug Cutting commented on HADOOP-432:
-------------------------------------

I'd rather have most of the logic in the client, so that it's shared by all filesystem implementations.  The daemon logic should be runnable anywhere, not hardwired into the namenode: we could add an option to the namenode that causes it to run a generic FS trash-emptying daemon.  For other filesystems (e.g., S3) one should be able to, e.g., run a cron entry that runs a shell command to sweep out old files from the trash, or start a separate trash-emptying daemon with bin/hadoop-daemon.sh.

Also, will a global trash make sense if we add file protections?  Or should we instead have a trash directory per user?  If a user trashes something outside his or her home directory, then it would move to his-or-her home directory's trash.  That's the way it works on my linux desktop.



> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch, undelete17.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 21:47:59 2006
Return-Path: 
 <hadoop-dev-return-5987-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46027 invoked from network); 13 Dec 2006 21:47:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 21:47:59 -0000
Received: (qmail 51536 invoked by uid 500); 13 Dec 2006 21:47:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51513 invoked by uid 500); 13 Dec 2006 21:47:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51503 invoked by uid 99); 13 Dec 2006 21:47:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 13:47:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 13:47:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B820A7141A4
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 13:47:24 -0800 (PST)
Message-ID: <20405381.1166046444751.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 13:47:24 -0800 (PST)
From: "Tom White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-574?page=all ]

Tom White updated HADOOP-574:
-----------------------------

    Attachment: HADOOP-574-v3.patch

Here is a version that works with the changes made in HADOOP-571 that are now in trunk.

The unit test TestJets3tS3FileSystem runs against S3 and requires an S3 account - it should be excluded from the mainline tests and run nightly perhaps (I have not made the changes to the build file to do this). TestInMemoryS3FileSystem should stay in the mainline tests.

There is some further work to make the implementation more robust (by implementing retries), but I believe the code is ready to be committed.

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: dependencies.zip, HADOOP-574-v2.patch, HADOOP-574-v3.patch, HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 21:51:44 2006
Return-Path: 
 <hadoop-dev-return-5988-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47047 invoked from network); 13 Dec 2006 21:51:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 21:51:44 -0000
Received: (qmail 61897 invoked by uid 500); 13 Dec 2006 21:51:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61872 invoked by uid 500); 13 Dec 2006 21:51:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61863 invoked by uid 99); 13 Dec 2006 21:51:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 13:51:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 13:51:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 54F2171413D
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 13:51:22 -0800 (PST)
Message-ID: <10028229.1166046682345.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 13:51:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-811) Patch to support multi-threaded
 MapRunnable
In-Reply-To: <15932768.1165852041100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-811?page=comments#action_12458274 ] 
            
Hadoop QA commented on HADOOP-811:
----------------------------------

+1, since http://issues.apache.org/jira/secure/attachment/12347069/diff.txt applied and successfully tested against trunk revision r486810.

> Patch to support multi-threaded MapRunnable
> -------------------------------------------
>
>                 Key: HADOOP-811
>                 URL: http://issues.apache.org/jira/browse/HADOOP-811
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.10.0
>         Environment: all
>            Reporter: Alejandro Abdelnur
>         Attachments: diff.txt, diff.txt, MultithreadedMapRunner.java, MultithreadedMapRunner.java
>
>
> The MapRunner calls Mapper.map in a serialized fashion.
> This is suitable for CPU/memory bound operations.
> However, when doing IO bound operations this serialization affects the throughput significantly.
> In order to support IO bound operations more efficiently I've implemented a multithreaded MapRunnable.
> Following is the implementation of this MapRunnable, MultithreadedMapRunner.
> I've only had to modify on method in the existing code (in the Task class) to avoid data corruption in the reporter.
> Index: Task.java
> ===================================================================
> --- Task.java   (revision 485492)
> +++ Task.java   (working copy)
> @@ -153,9 +153,11 @@
>    public Reporter getReporter(final TaskUmbilicalProtocol umbilical,
>                                final Progress progress) throws IOException {
>      return new Reporter() {
> -        public void setStatus(String status) throws IOException {
> -          progress.setStatus(status);
> -          progress();
> +        public void setStatus(String status) throws IOException {
> +          synchronized (this) {
> +            progress.setStatus(status);
> +            progress();
> +          }
>          }
>          public void progress() throws IOException {
>              reportProgress(umbilical);
> -----------------------------------------------------------
> MultithreadedMapRunner.java
> package org.apache.hadoop.mapred;
> import org.apache.hadoop.util.ReflectionUtils;
> import org.apache.hadoop.io.WritableComparable;
> import org.apache.hadoop.io.Writable;
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
> import java.io.IOException;
> import java.util.concurrent.ExecutorService;
> import java.util.concurrent.Executors;
> import java.util.concurrent.TimeUnit;
> /**
>  * Multithreaded implementation for @link org.apache.hadoop.mapred.MapRunnable.
>  * <p>
>  * It can be used instead of the default implementation,
>  * @link org.apache.hadoop.mapred.MapRunner, when the Map operation is not CPU
>  * bound in order to improve throughput.
>  * <p>
>  * Map implementations using this MapRunnable must be thread-safe.
>  * <p>
>  * The Map-Reduce job has to be configured to use this MapRunnable class (using
>  * the <b>mapred.map.runner.class</b> property) and
>  * the number of thread the thread-pool can use (using the
>  * <b>mapred.map.multithreadedrunner.threads</b> property).
>  * <p>
>  *
>  * @author Alejandro Abdelnur
>  */
> public class MultithreadedMapRunner implements MapRunnable {
>   private static final Log LOG =
>       LogFactory.getLog(MultithreadedMapRunner.class.getName());
>   private JobConf job;
>   private Mapper mapper;
>   private ExecutorService executorService;
>   private IOException ioException;
>   public void configure(JobConf job) {
>     int numberOfThreads =
>         job.getInt("mapred.map.multithreadedrunner.threads", 10);
>     if (LOG.isDebugEnabled()) {
>       LOG.debug("Configuring job " + job.getJobName() +
>           " to use " + numberOfThreads + " threads" );
>     }
>     this.job = job;
>     this.mapper = (Mapper)ReflectionUtils.newInstance(job.getMapperClass(),
>                                                       job);
>     // Creating a threadpool of the configured size to execute the Mapper
>     // map method in parallel.
>     executorService = Executors.newFixedThreadPool(numberOfThreads);
>   }
>   public void run(RecordReader input, OutputCollector output,
>                   Reporter reporter)
>     throws IOException {
>     try {
>       // allocate key & value instances these objects will not be reused
>       // because execution of Mapper.map is not serialized.
>       WritableComparable key = input.createKey();
>       Writable value = input.createValue();
>       while (input.next(key, value)) {
>         // Run Mapper.map execution asynchronously in a separate thread.
>         // If threads are not available from the thread-pool this method
>         // will block until there is a thread available.
>         executorService.execute(
>             new MTMapperRunable(key, value, output, reporter));
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         if (ioException != null) {
>           throw ioException;
>         }
>         // Allocate new key & value instances as mapper is running in parallel
>         key = input.createKey();
>         value = input.createValue();
>       }
>       if (LOG.isDebugEnabled()) {
>         LOG.debug("Finished dispatching all Mappper.map calls, job "
>             + job.getJobName());
>       }
>       // Graceful shutdown of the Threadpool, it will let all scheduled
>       // Runnables to end.
>       executorService.shutdown();
>       try {
>         // Now waiting for all Runnables to end.
>         while (!executorService.awaitTermination(100, TimeUnit.MILLISECONDS)) {
>           if (LOG.isDebugEnabled()) {
>             LOG.debug("Awaiting all running Mappper.map calls to finish, job "
>                 + job.getJobName());
>           }
>           // Checking if a Mapper.map within a Runnable has generated an
>           // IOException. If so we rethrow it to force an abort of the Map
>           // operation thus keeping the semantics of the default
>           // implementation.
>           // NOTE: while Mapper.map dispatching has concluded there are still
>           // map calls in progress.
>           if (ioException != null) {
>             throw ioException;
>           }
>         }
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         // NOTE: it could be that a map call has had an exception after the
>         // call for awaitTermination() returing true. And edge case but it
>         // could happen.
>         if (ioException != null) {
>           throw ioException;
>         }
>       }
>       catch (IOException ioEx) {
>         // Forcing a shutdown of all thread of the threadpool and rethrowing
>         // the IOException
>         executorService.shutdownNow();
>         throw ioEx;
>       }
>       catch (InterruptedException iEx) {
>         throw new IOException(iEx.getMessage());
>       }
>     } finally {
>         mapper.close();
>     }
>   }
>   /**
>    * Runnable to execute a single Mapper.map call from a forked thread.
>    */
>   private class MTMapperRunable implements Runnable {
>     private WritableComparable key;
>     private Writable value;
>     private OutputCollector output;
>     private Reporter reporter;
>     /**
>      * Collecting all required parameters to execute a Mapper.map call.
>      * <p>
>      *
>      * @param key
>      * @param value
>      * @param output
>      * @param reporter
>      */
>     public MTMapperRunable(WritableComparable key, Writable value,
>         OutputCollector output, Reporter reporter) {
>       this.key = key;
>       this.value = value;
>       this.output = output;
>       this.reporter = reporter;
>     }
>     /**
>      * Executes a Mapper.map call with the given Mapper and parameters.
>      * <p>
>      * This method is called from the thread-pool thread.
>      *
>      */
>     public void run() {
>       try {
>         // map pair to output
>         MultithreadedMapRunner.this.mapper.map(key, value, output, reporter);
>       }
>       catch (IOException ex) {
>         // If there is an IOException during the call it is set in an instance
>         // variable of the MultithreadedMapRunner from where it will be
>         // rethrown.
>         synchronized (MultithreadedMapRunner.this) {
>           if (MultithreadedMapRunner.this.ioException == null) {
>             MultithreadedMapRunner.this.ioException = ex;
>           }
>         }
>       }
>     }
>   }
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 22:13:45 2006
Return-Path: 
 <hadoop-dev-return-5989-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52188 invoked from network); 13 Dec 2006 22:13:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 22:13:45 -0000
Received: (qmail 3116 invoked by uid 500); 13 Dec 2006 22:13:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3088 invoked by uid 500); 13 Dec 2006 22:13:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3049 invoked by uid 99); 13 Dec 2006 22:13:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 14:13:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 14:13:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2AC4371413F
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 14:13:23 -0800 (PST)
Message-ID: <7354332.1166048003172.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 14:13:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-454) hadoop du optionally behave like
 unix's du -s
In-Reply-To: <11062171.1155582313998.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-454?page=all ]

Doug Cutting updated HADOOP-454:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Hairong!

> hadoop du optionally behave like unix's du -s
> ---------------------------------------------
>
>                 Key: HADOOP-454
>                 URL: http://issues.apache.org/jira/browse/HADOOP-454
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.9.1
>            Reporter: Marco Nicosia
>         Assigned To: Hairong Kuang
>            Priority: Trivial
>             Fix For: 0.10.0
>
>         Attachments: dus.patch, dus_new.patch
>
>
> In Unix, the user has the option to specify a -s flag:
>      -s      Display an entry for each specified file.  (Equivalent to -d 0)
> Instead of providing data for the subdirectories of the arguments, du prints the total usage of each argument, without printing subdirectories.
> This is very convenient for those looking to find how much space is used by a particular branch, without requring them to add up all the sub-usages.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 22:13:47 2006
Return-Path: 
 <hadoop-dev-return-5990-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52248 invoked from network); 13 Dec 2006 22:13:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 22:13:47 -0000
Received: (qmail 3547 invoked by uid 500); 13 Dec 2006 22:13:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3529 invoked by uid 500); 13 Dec 2006 22:13:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3520 invoked by uid 99); 13 Dec 2006 22:13:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 14:13:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 14:13:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5BAEA71413D
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 14:13:25 -0800 (PST)
Message-ID: <23732253.1166048005373.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 14:13:25 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12458283 ] 
            
Hadoop QA commented on HADOOP-432:
----------------------------------

+1, since http://issues.apache.org/jira/secure/attachment/12347049/undelete17.patch applied and successfully tested against trunk revision r486810.

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch, undelete17.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 22:19:48 2006
Return-Path: 
 <hadoop-dev-return-5991-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53951 invoked from network); 13 Dec 2006 22:19:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 22:19:48 -0000
Received: (qmail 18046 invoked by uid 500); 13 Dec 2006 22:19:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18022 invoked by uid 500); 13 Dec 2006 22:19:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17991 invoked by uid 99); 13 Dec 2006 22:19:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 14:19:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 14:19:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1FF2871413F
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 14:19:26 -0800 (PST)
Message-ID: <6659644.1166048366128.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 14:19:26 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-454) hadoop du optionally behave like
 unix's du -s
In-Reply-To: <11062171.1155582313998.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-454?page=comments#action_12458287 ] 
            
Hadoop QA commented on HADOOP-454:
----------------------------------

-1, since the patch command could not apply the latest attachment as a patch: http://issues.apache.org/jira/secure/attachment/12347118/dus_new.patch. Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.

> hadoop du optionally behave like unix's du -s
> ---------------------------------------------
>
>                 Key: HADOOP-454
>                 URL: http://issues.apache.org/jira/browse/HADOOP-454
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.9.1
>            Reporter: Marco Nicosia
>         Assigned To: Hairong Kuang
>            Priority: Trivial
>             Fix For: 0.10.0
>
>         Attachments: dus.patch, dus_new.patch
>
>
> In Unix, the user has the option to specify a -s flag:
>      -s      Display an entry for each specified file.  (Equivalent to -d 0)
> Instead of providing data for the subdirectories of the arguments, du prints the total usage of each argument, without printing subdirectories.
> This is very convenient for those looking to find how much space is used by a particular branch, without requring them to add up all the sub-usages.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 22:25:42 2006
Return-Path: 
 <hadoop-dev-return-5992-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55535 invoked from network); 13 Dec 2006 22:25:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 22:25:42 -0000
Received: (qmail 29825 invoked by uid 500); 13 Dec 2006 22:25:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29789 invoked by uid 500); 13 Dec 2006 22:25:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29780 invoked by uid 99); 13 Dec 2006 22:25:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 14:25:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 14:25:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0A4BE71413D
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 14:25:21 -0800 (PST)
Message-ID: <3514025.1166048721039.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 14:25:21 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-824) DFSShell should become FSShell
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

DFSShell should become FSShell
------------------------------

                 Key: HADOOP-824
                 URL: http://issues.apache.org/jira/browse/HADOOP-824
             Project: Hadoop
          Issue Type: Bug
            Reporter: Doug Cutting


DFSShell is entirely based on the public FileSystem API.  It would be useful to have a generic shell for the FileSystem API.  Thus I propose that DFSShell be renamed org.apache.hadoop.fs.FsShell.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 22:27:46 2006
Return-Path: 
 <hadoop-dev-return-5993-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56820 invoked from network); 13 Dec 2006 22:27:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 22:27:46 -0000
Received: (qmail 32665 invoked by uid 500); 13 Dec 2006 22:27:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32405 invoked by uid 500); 13 Dec 2006 22:27:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32394 invoked by uid 99); 13 Dec 2006 22:27:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 14:27:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 14:27:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1349A71413D
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 14:27:23 -0800 (PST)
Message-ID: <23447323.1166048843076.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 14:27:23 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-454) hadoop du optionally behave like
 unix's du -s
In-Reply-To: <11062171.1155582313998.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-454?page=comments#action_12458290 ] 
            
Nigel Daley commented on HADOOP-454:
------------------------------------

Disregard the -1 comment.  The new patch was committed before my automated process tested it, thus the patch command failed.

> hadoop du optionally behave like unix's du -s
> ---------------------------------------------
>
>                 Key: HADOOP-454
>                 URL: http://issues.apache.org/jira/browse/HADOOP-454
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.9.1
>            Reporter: Marco Nicosia
>         Assigned To: Hairong Kuang
>            Priority: Trivial
>             Fix For: 0.10.0
>
>         Attachments: dus.patch, dus_new.patch
>
>
> In Unix, the user has the option to specify a -s flag:
>      -s      Display an entry for each specified file.  (Equivalent to -d 0)
> Instead of providing data for the subdirectories of the arguments, du prints the total usage of each argument, without printing subdirectories.
> This is very convenient for those looking to find how much space is used by a particular branch, without requring them to add up all the sub-usages.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 23:15:46 2006
Return-Path: 
 <hadoop-dev-return-5994-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72647 invoked from network); 13 Dec 2006 23:15:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 23:15:46 -0000
Received: (qmail 22927 invoked by uid 500); 13 Dec 2006 23:15:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22817 invoked by uid 500); 13 Dec 2006 23:15:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22808 invoked by uid 99); 13 Dec 2006 23:15:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:15:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:15:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2A6A4714167
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 15:15:25 -0800 (PST)
Message-ID: <17203024.1166051725171.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 15:15:25 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-574?page=all ]

Doug Cutting resolved HADOOP-574.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Tom, it looks great!

> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>    Affects Versions: 0.9.0
>            Reporter: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: dependencies.zip, HADOOP-574-v2.patch, HADOOP-574-v3.patch, HADOOP-574.patch
>
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 23:34:47 2006
Return-Path: 
 <hadoop-dev-return-5995-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77608 invoked from network); 13 Dec 2006 23:34:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 23:34:47 -0000
Received: (qmail 48814 invoked by uid 500); 13 Dec 2006 23:34:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48787 invoked by uid 500); 13 Dec 2006 23:34:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48778 invoked by uid 99); 13 Dec 2006 23:34:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:34:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:34:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 059AC714167
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 15:34:25 -0800 (PST)
Message-ID: <17532584.1166052865020.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 15:34:25 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12458305 ] 
            
Owen O'Malley commented on HADOOP-619:
--------------------------------------

The globbing should be done via FileSystem.globPaths() instead of manipulating regular expressions. Otherwise, we'll have to continue to maintain two code bases. Other than that, it looks good.


> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 23:36:44 2006
Return-Path: 
 <hadoop-dev-return-5996-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78145 invoked from network); 13 Dec 2006 23:36:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 23:36:44 -0000
Received: (qmail 55336 invoked by uid 500); 13 Dec 2006 23:36:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55311 invoked by uid 500); 13 Dec 2006 23:36:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55302 invoked by uid 99); 13 Dec 2006 23:36:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:36:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:36:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 85E5F71413F
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 15:36:22 -0800 (PST)
Message-ID: <22301263.1166052982546.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 15:36:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-824) DFSShell should become FSShell
In-Reply-To: <3514025.1166048721039.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-824?page=all ]

Doug Cutting updated HADOOP-824:
--------------------------------

    Attachment: HADOOP-824.patch

Here's a patch that implements this.

> DFSShell should become FSShell
> ------------------------------
>
>                 Key: HADOOP-824
>                 URL: http://issues.apache.org/jira/browse/HADOOP-824
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-824.patch
>
>
> DFSShell is entirely based on the public FileSystem API.  It would be useful to have a generic shell for the FileSystem API.  Thus I propose that DFSShell be renamed org.apache.hadoop.fs.FsShell.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 23:36:45 2006
Return-Path: 
 <hadoop-dev-return-5997-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78184 invoked from network); 13 Dec 2006 23:36:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 23:36:45 -0000
Received: (qmail 55612 invoked by uid 500); 13 Dec 2006 23:36:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55580 invoked by uid 500); 13 Dec 2006 23:36:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55562 invoked by uid 99); 13 Dec 2006 23:36:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:36:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:36:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ABC4F7141A2
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 15:36:22 -0800 (PST)
Message-ID: <29816819.1166052982701.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 15:36:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-825) If the default file system is set
 using the new uri syntax, the namenode will not start
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If the default file system is set using the new uri syntax, the namenode will not start
---------------------------------------------------------------------------------------

                 Key: HADOOP-825
                 URL: http://issues.apache.org/jira/browse/HADOOP-825
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.10.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.10.0


The namenode tries to parse the string manually by looking for the first ":" and translating the rest of the string into an integer. This is great, if it is "<host>:<port>", but not if it is "hdfs://<host>:<port>/"

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 23:36:46 2006
Return-Path: 
 <hadoop-dev-return-5998-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78221 invoked from network); 13 Dec 2006 23:36:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 23:36:46 -0000
Received: (qmail 55865 invoked by uid 500); 13 Dec 2006 23:36:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55827 invoked by uid 500); 13 Dec 2006 23:36:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55752 invoked by uid 99); 13 Dec 2006 23:36:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:36:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:36:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2DB217141A4
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 15:36:24 -0800 (PST)
Message-ID: <6137571.1166052984184.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 15:36:24 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-824) DFSShell should become FSShell
In-Reply-To: <3514025.1166048721039.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-824?page=all ]

Doug Cutting updated HADOOP-824:
--------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.10.0

> DFSShell should become FSShell
> ------------------------------
>
>                 Key: HADOOP-824
>                 URL: http://issues.apache.org/jira/browse/HADOOP-824
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-824.patch
>
>
> DFSShell is entirely based on the public FileSystem API.  It would be useful to have a generic shell for the FileSystem API.  Thus I propose that DFSShell be renamed org.apache.hadoop.fs.FsShell.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 23:38:44 2006
Return-Path: 
 <hadoop-dev-return-5999-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78669 invoked from network); 13 Dec 2006 23:38:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 23:38:44 -0000
Received: (qmail 63195 invoked by uid 500); 13 Dec 2006 23:38:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63171 invoked by uid 500); 13 Dec 2006 23:38:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63158 invoked by uid 99); 13 Dec 2006 23:38:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:38:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:38:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4107471413F
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 15:38:22 -0800 (PST)
Message-ID: <24854312.1166053102264.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 15:38:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-824) DFSShell should become FSShell
In-Reply-To: <3514025.1166048721039.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-824?page=comments#action_12458307 ] 
            
Hadoop QA commented on HADOOP-824:
----------------------------------

-1, since the patch command could not apply the latest attachment (http://issues.apache.org/jira/secure/attachment/12347129/HADOOP-824.patch) as a patch to trunk revision r486886. Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.

> DFSShell should become FSShell
> ------------------------------
>
>                 Key: HADOOP-824
>                 URL: http://issues.apache.org/jira/browse/HADOOP-824
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-824.patch
>
>
> DFSShell is entirely based on the public FileSystem API.  It would be useful to have a generic shell for the FileSystem API.  Thus I propose that DFSShell be renamed org.apache.hadoop.fs.FsShell.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 23:40:44 2006
Return-Path: 
 <hadoop-dev-return-6000-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79209 invoked from network); 13 Dec 2006 23:40:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 23:40:44 -0000
Received: (qmail 68065 invoked by uid 500); 13 Dec 2006 23:40:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68035 invoked by uid 500); 13 Dec 2006 23:40:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68026 invoked by uid 99); 13 Dec 2006 23:40:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:40:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:40:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 550D671413F
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 15:40:22 -0800 (PST)
Message-ID: <12571812.1166053222345.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 15:40:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-824) DFSShell should become FSShell
In-Reply-To: <3514025.1166048721039.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-824?page=all ]

Doug Cutting updated HADOOP-824:
--------------------------------

    Attachment:     (was: HADOOP-824.patch)

> DFSShell should become FSShell
> ------------------------------
>
>                 Key: HADOOP-824
>                 URL: http://issues.apache.org/jira/browse/HADOOP-824
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-824.patch
>
>
> DFSShell is entirely based on the public FileSystem API.  It would be useful to have a generic shell for the FileSystem API.  Thus I propose that DFSShell be renamed org.apache.hadoop.fs.FsShell.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 23:40:45 2006
Return-Path: 
 <hadoop-dev-return-6001-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79260 invoked from network); 13 Dec 2006 23:40:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 23:40:45 -0000
Received: (qmail 68348 invoked by uid 500); 13 Dec 2006 23:40:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68313 invoked by uid 500); 13 Dec 2006 23:40:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68304 invoked by uid 99); 13 Dec 2006 23:40:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:40:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:40:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B0A817141A2
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 15:40:23 -0800 (PST)
Message-ID: <13558259.1166053223721.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 15:40:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-824) DFSShell should become FSShell
In-Reply-To: <3514025.1166048721039.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-824?page=all ]

Doug Cutting updated HADOOP-824:
--------------------------------

    Attachment: HADOOP-824.patch

This one fixes bin/hadoop too.

> DFSShell should become FSShell
> ------------------------------
>
>                 Key: HADOOP-824
>                 URL: http://issues.apache.org/jira/browse/HADOOP-824
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-824.patch
>
>
> DFSShell is entirely based on the public FileSystem API.  It would be useful to have a generic shell for the FileSystem API.  Thus I propose that DFSShell be renamed org.apache.hadoop.fs.FsShell.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 13 23:44:44 2006
Return-Path: 
 <hadoop-dev-return-6002-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79965 invoked from network); 13 Dec 2006 23:44:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 23:44:44 -0000
Received: (qmail 73639 invoked by uid 500); 13 Dec 2006 23:44:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73397 invoked by uid 500); 13 Dec 2006 23:44:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73388 invoked by uid 99); 13 Dec 2006 23:44:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:44:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:44:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A6C5871413F
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 15:44:22 -0800 (PST)
Message-ID: <19685053.1166053462680.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 15:44:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-824) DFSShell should become FSShell
In-Reply-To: <3514025.1166048721039.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-824?page=all ]

Doug Cutting updated HADOOP-824:
--------------------------------

    Attachment: HADOOP-824-2.patch

> DFSShell should become FSShell
> ------------------------------
>
>                 Key: HADOOP-824
>                 URL: http://issues.apache.org/jira/browse/HADOOP-824
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-824-2.patch, HADOOP-824.patch
>
>
> DFSShell is entirely based on the public FileSystem API.  It would be useful to have a generic shell for the FileSystem API.  Thus I propose that DFSShell be renamed org.apache.hadoop.fs.FsShell.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 00:00:41 2006
Return-Path: 
 <hadoop-dev-return-6003-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83674 invoked from network); 14 Dec 2006 00:00:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 00:00:41 -0000
Received: (qmail 19735 invoked by uid 500); 14 Dec 2006 00:00:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19699 invoked by uid 500); 14 Dec 2006 00:00:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19564 invoked by uid 99); 14 Dec 2006 00:00:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 16:00:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:59:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B7237140D2
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 15:59:22 -0800 (PST)
Message-ID: <6664068.1166054362306.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 15:59:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-824) DFSShell should become FSShell
In-Reply-To: <3514025.1166048721039.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-824?page=all ]

Doug Cutting updated HADOOP-824:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.

> DFSShell should become FSShell
> ------------------------------
>
>                 Key: HADOOP-824
>                 URL: http://issues.apache.org/jira/browse/HADOOP-824
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-824-2.patch, HADOOP-824.patch
>
>
> DFSShell is entirely based on the public FileSystem API.  It would be useful to have a generic shell for the FileSystem API.  Thus I propose that DFSShell be renamed org.apache.hadoop.fs.FsShell.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 01:17:48 2006
Return-Path: 
 <hadoop-dev-return-6004-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4105 invoked from network); 14 Dec 2006 01:17:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 01:17:48 -0000
Received: (qmail 76816 invoked by uid 500); 14 Dec 2006 01:17:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76791 invoked by uid 500); 14 Dec 2006 01:17:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76758 invoked by uid 99); 14 Dec 2006 01:17:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 17:17:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 17:17:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A0444714057
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 17:17:24 -0800 (PST)
Message-ID: <18031435.1166059044653.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 17:17:24 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12458332 ] 
            
dhruba borthakur commented on HADOOP-227:
-----------------------------------------

Here is a much detailed writeup on the Backup NameNode proposal. "Secondary NameNode" and "Backup NameNode" refer to the same node in this writeup. Please review and comment.

Configuration
-------------
There will be an additional file named "masters" in the configuration directory (similar to the "slaves" file) that will list the node names where Secondary NameNode should be run. The start-dfs.sh script will start the Secondary-NameNode appropriately.

The configuration file will have a the following new definitions:
    * fs.checkpoint.dir      : Location where the Secondary NameNode can download the
                                        fsImage and edits file.
    * fs.checkpoint.period   : Time (in seconds) between two checkpoints.
    * fs.checkpoint.size     : Size (in MB) of edit log that triggers a checkpoint.

The Secondary NameNode will use "org.apache.hadoop.dfs.NameNode.Alternate" property to log its debug and informational messages.

Primary NameNode
--------------------------
The Primary NameNode will add the following new RPCs to the ClientProtocol:

    * getEditLogSize()
        This call returns the size of the current edit log file. This call fails
        if the NameNode is in SafeMode or there are more than one edit log file.

    * rollEditLog()
        This call closes the current edit log and opens a new edit log file.
        The names of the edit files are either "edits" or "edits.new". To keep
        complexity to a minimum, there will be a max of two edit log
        files "edits" and "edits.1".
        This call returns an error if any of the following conditions occur:
        - NameNode is in SafeMode
        - Both "edits" and 'edits.new" are already pre-existing

    * rollFsImage()
        This call does the following steps (atomically):
        - removes fsImage
        - copies fsImage.tmp to fsImage
        - removes edits
        - moves edit.new to edits
        This call fails if any of the files fsImage, fsImage.new or edits
        does not exist. It also fails if the dfs is in SafeMode.

The NameNode will have two additional servlets:
    * putFsImage.class
        This servlet causes all the incoming data to be stored in a file
        named fsImage.tmp in the dfs.name.dir directory. If this file already
        exists, then this call returns error.

    * getFile.class?param=pathname
        This servlet retrieves the contents of the specified file.

The Primary NameNode at startup time deletes fsImage.tmp (if it exists). The NameNode loads the fsImage, then loads the edits and then loads edits.1.  Then it writes the merged fsImage, deletes edits and edits.1.


Secondary NameNode
-------------------------------
The Secondary NameNode periodically pings the NameNode with the getCurrentEditLogSize() RPC. This call returns the size of the current edit log. The Secondary NameNode initiates a checkpoint if either the size of the edit log exceeds the size specified in the fs.checkpoint.size or if the time since last checkpoint completion has exceeded fs.checkpoint.period.

The Secondary NameNode issues the rollEditLog() RPC to instruct the Primary NameNode to start logging edits into edits.1.  The Secondary NameNode then uses the getFile servlet to fetch the contents of fsImage and edits. It puts them in the fs.checkpoint.dir and, reads them into memory, merges them and writes it back to fsImage.tmp. The Secondary NameNode than uploads the fsImage.tmp file to the Primary NameNode using the putFsImage servlet.

Once the above steps are successful, the Secondary NameNode issues the rollFsImage() RPC. A checkpoint is complete when this RPC completes successfully.

If any of the RPC calls returns an error, the Secondary NameNode discards all processing that it might have done, logs an error message, and waits for the normal trigger to start the next checkpoint.

Issues
------
1. The emphasis is on simplicity. For this reason, the NameNode restricts that there can be only two outstanding edits file at any time: edits and edits.1. This ensures that there cannot be more than one Secondary NameNode for a Primary NameNode.

2. The fact that rollFsImage() fails if either edits or edits.1 are non-existent means that the system is protected against spurious checkpoint if the NameNode restarts when the Secondary NameNode was doing a merge. This check can be made more explicit by returning a cookie with the rollEditLog() command and enforcing that rollFsImage() supplies the same cookie. (The Primary NameNode resets the cookie if it restarts).




> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: dhruba borthakur
>         Attachments: patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0
>
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 02:07:27 2006
Return-Path: 
 <hadoop-dev-return-6005-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18348 invoked from network); 14 Dec 2006 02:07:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 02:07:27 -0000
Received: (qmail 80631 invoked by uid 500); 14 Dec 2006 02:07:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80594 invoked by uid 500); 14 Dec 2006 02:07:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80585 invoked by uid 99); 14 Dec 2006 02:07:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 18:07:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 18:07:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 681467140F6
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 18:06:24 -0800 (PST)
Message-ID: <296529.1166061984423.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 18:06:24 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12458345 ] 
            
Yoram Arnon commented on HADOOP-432:
------------------------------------

that idea came up in the original discussions.

since removing files from the trash is done based on age, an external process would need access to that information.
the namenode would thus need to export an API similar to 'find /trash -mmin +n', and expose that externally (get only files deleted more than n minutes ago, to avoid repeatedly getting long lists of files that don't need to get deleted yet).
You'd also need an efficient way to get the size of the trash externally.

So there's no avoiding doing some work in the namenode. Implementing everything internally in the namenode seemed like the simpler way to go, minimizing code, API changes and complexity.
 

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch, undelete17.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 04:11:44 2006
Return-Path: 
 <hadoop-dev-return-6006-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49221 invoked from network); 14 Dec 2006 04:11:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 04:11:44 -0000
Received: (qmail 25041 invoked by uid 500); 14 Dec 2006 04:11:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24804 invoked by uid 500); 14 Dec 2006 04:11:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24795 invoked by uid 99); 14 Dec 2006 04:11:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 20:11:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 20:11:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6B31D714057
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 20:11:22 -0800 (PST)
Message-ID: <2521170.1166069482436.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 20:11:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-811) Patch to support multi-threaded
 MapRunnable
In-Reply-To: <15932768.1165852041100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-811?page=comments#action_12458359 ] 
            
Owen O'Malley commented on HADOOP-811:
--------------------------------------

+1
This looks good. Thanks.

> Patch to support multi-threaded MapRunnable
> -------------------------------------------
>
>                 Key: HADOOP-811
>                 URL: http://issues.apache.org/jira/browse/HADOOP-811
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.10.0
>         Environment: all
>            Reporter: Alejandro Abdelnur
>         Attachments: diff.txt, diff.txt, MultithreadedMapRunner.java, MultithreadedMapRunner.java
>
>
> The MapRunner calls Mapper.map in a serialized fashion.
> This is suitable for CPU/memory bound operations.
> However, when doing IO bound operations this serialization affects the throughput significantly.
> In order to support IO bound operations more efficiently I've implemented a multithreaded MapRunnable.
> Following is the implementation of this MapRunnable, MultithreadedMapRunner.
> I've only had to modify on method in the existing code (in the Task class) to avoid data corruption in the reporter.
> Index: Task.java
> ===================================================================
> --- Task.java   (revision 485492)
> +++ Task.java   (working copy)
> @@ -153,9 +153,11 @@
>    public Reporter getReporter(final TaskUmbilicalProtocol umbilical,
>                                final Progress progress) throws IOException {
>      return new Reporter() {
> -        public void setStatus(String status) throws IOException {
> -          progress.setStatus(status);
> -          progress();
> +        public void setStatus(String status) throws IOException {
> +          synchronized (this) {
> +            progress.setStatus(status);
> +            progress();
> +          }
>          }
>          public void progress() throws IOException {
>              reportProgress(umbilical);
> -----------------------------------------------------------
> MultithreadedMapRunner.java
> package org.apache.hadoop.mapred;
> import org.apache.hadoop.util.ReflectionUtils;
> import org.apache.hadoop.io.WritableComparable;
> import org.apache.hadoop.io.Writable;
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
> import java.io.IOException;
> import java.util.concurrent.ExecutorService;
> import java.util.concurrent.Executors;
> import java.util.concurrent.TimeUnit;
> /**
>  * Multithreaded implementation for @link org.apache.hadoop.mapred.MapRunnable.
>  * <p>
>  * It can be used instead of the default implementation,
>  * @link org.apache.hadoop.mapred.MapRunner, when the Map operation is not CPU
>  * bound in order to improve throughput.
>  * <p>
>  * Map implementations using this MapRunnable must be thread-safe.
>  * <p>
>  * The Map-Reduce job has to be configured to use this MapRunnable class (using
>  * the <b>mapred.map.runner.class</b> property) and
>  * the number of thread the thread-pool can use (using the
>  * <b>mapred.map.multithreadedrunner.threads</b> property).
>  * <p>
>  *
>  * @author Alejandro Abdelnur
>  */
> public class MultithreadedMapRunner implements MapRunnable {
>   private static final Log LOG =
>       LogFactory.getLog(MultithreadedMapRunner.class.getName());
>   private JobConf job;
>   private Mapper mapper;
>   private ExecutorService executorService;
>   private IOException ioException;
>   public void configure(JobConf job) {
>     int numberOfThreads =
>         job.getInt("mapred.map.multithreadedrunner.threads", 10);
>     if (LOG.isDebugEnabled()) {
>       LOG.debug("Configuring job " + job.getJobName() +
>           " to use " + numberOfThreads + " threads" );
>     }
>     this.job = job;
>     this.mapper = (Mapper)ReflectionUtils.newInstance(job.getMapperClass(),
>                                                       job);
>     // Creating a threadpool of the configured size to execute the Mapper
>     // map method in parallel.
>     executorService = Executors.newFixedThreadPool(numberOfThreads);
>   }
>   public void run(RecordReader input, OutputCollector output,
>                   Reporter reporter)
>     throws IOException {
>     try {
>       // allocate key & value instances these objects will not be reused
>       // because execution of Mapper.map is not serialized.
>       WritableComparable key = input.createKey();
>       Writable value = input.createValue();
>       while (input.next(key, value)) {
>         // Run Mapper.map execution asynchronously in a separate thread.
>         // If threads are not available from the thread-pool this method
>         // will block until there is a thread available.
>         executorService.execute(
>             new MTMapperRunable(key, value, output, reporter));
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         if (ioException != null) {
>           throw ioException;
>         }
>         // Allocate new key & value instances as mapper is running in parallel
>         key = input.createKey();
>         value = input.createValue();
>       }
>       if (LOG.isDebugEnabled()) {
>         LOG.debug("Finished dispatching all Mappper.map calls, job "
>             + job.getJobName());
>       }
>       // Graceful shutdown of the Threadpool, it will let all scheduled
>       // Runnables to end.
>       executorService.shutdown();
>       try {
>         // Now waiting for all Runnables to end.
>         while (!executorService.awaitTermination(100, TimeUnit.MILLISECONDS)) {
>           if (LOG.isDebugEnabled()) {
>             LOG.debug("Awaiting all running Mappper.map calls to finish, job "
>                 + job.getJobName());
>           }
>           // Checking if a Mapper.map within a Runnable has generated an
>           // IOException. If so we rethrow it to force an abort of the Map
>           // operation thus keeping the semantics of the default
>           // implementation.
>           // NOTE: while Mapper.map dispatching has concluded there are still
>           // map calls in progress.
>           if (ioException != null) {
>             throw ioException;
>           }
>         }
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         // NOTE: it could be that a map call has had an exception after the
>         // call for awaitTermination() returing true. And edge case but it
>         // could happen.
>         if (ioException != null) {
>           throw ioException;
>         }
>       }
>       catch (IOException ioEx) {
>         // Forcing a shutdown of all thread of the threadpool and rethrowing
>         // the IOException
>         executorService.shutdownNow();
>         throw ioEx;
>       }
>       catch (InterruptedException iEx) {
>         throw new IOException(iEx.getMessage());
>       }
>     } finally {
>         mapper.close();
>     }
>   }
>   /**
>    * Runnable to execute a single Mapper.map call from a forked thread.
>    */
>   private class MTMapperRunable implements Runnable {
>     private WritableComparable key;
>     private Writable value;
>     private OutputCollector output;
>     private Reporter reporter;
>     /**
>      * Collecting all required parameters to execute a Mapper.map call.
>      * <p>
>      *
>      * @param key
>      * @param value
>      * @param output
>      * @param reporter
>      */
>     public MTMapperRunable(WritableComparable key, Writable value,
>         OutputCollector output, Reporter reporter) {
>       this.key = key;
>       this.value = value;
>       this.output = output;
>       this.reporter = reporter;
>     }
>     /**
>      * Executes a Mapper.map call with the given Mapper and parameters.
>      * <p>
>      * This method is called from the thread-pool thread.
>      *
>      */
>     public void run() {
>       try {
>         // map pair to output
>         MultithreadedMapRunner.this.mapper.map(key, value, output, reporter);
>       }
>       catch (IOException ex) {
>         // If there is an IOException during the call it is set in an instance
>         // variable of the MultithreadedMapRunner from where it will be
>         // rethrown.
>         synchronized (MultithreadedMapRunner.this) {
>           if (MultithreadedMapRunner.this.ioException == null) {
>             MultithreadedMapRunner.this.ioException = ex;
>           }
>         }
>       }
>     }
>   }
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 04:25:40 2006
Return-Path: 
 <hadoop-dev-return-6007-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51962 invoked from network); 14 Dec 2006 04:25:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 04:25:40 -0000
Received: (qmail 44288 invoked by uid 500); 14 Dec 2006 04:25:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44253 invoked by uid 500); 14 Dec 2006 04:25:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44244 invoked by uid 99); 14 Dec 2006 04:25:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 20:25:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 20:25:02 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 352AC7140F6
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 20:24:23 -0800 (PST)
Message-ID: <11945271.1166070263215.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 20:24:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12458360 ] 
            
Doug Cutting commented on HADOOP-432:
-------------------------------------

> the namenode would thus need to export an API similar to 'find /trash -mmin +n'

First, listing all the files in the trash every half hour or so shouldn't be too big of a burden.  Even if it is, then we could create a sub-directory for each ten-minute interval, named by its time of creation.  Then one could quickly find all files that need to be deleted without listing the full trash.

> You'd also need an efficient way to get the size of the trash externally.

We already support server-side du for directories in DFS.  Calling it every half hour or even every ten minutes on the trash should not be too great of a burden.

So I'd still prefer to see this as a FileSystem-independent implementation.


> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch, undelete17.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 05:10:30 2006
Return-Path: 
 <hadoop-dev-return-6008-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63075 invoked from network); 14 Dec 2006 05:10:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 05:10:30 -0000
Received: (qmail 16277 invoked by uid 500); 14 Dec 2006 05:08:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16139 invoked by uid 500); 14 Dec 2006 05:08:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16019 invoked by uid 99); 14 Dec 2006 05:08:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 21:08:50 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 607FC7140D2
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 21:07:22 -0800 (PST)
Message-ID: <10724053.1166072842392.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 21:07:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-791) deadlock issue in taskstracker.
In-Reply-To: <2727015.1165466301505.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-791?page=all ]

Mahadev konar updated HADOOP-791:
---------------------------------

    Attachment: deadlock.patch

this patch fixes the deadlock issue. The calls to cleanup() do not lock the tip first. The cleanup() method  locks the tasktracker first and then the tip. 

> deadlock issue in taskstracker.
> -------------------------------
>
>                 Key: HADOOP-791
>                 URL: http://issues.apache.org/jira/browse/HADOOP-791
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>         Attachments: deadlock.patch
>
>
> the stack trace--
> "main":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.createStatus(TaskTracker.java:880)
>         - waiting to lock <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker.transmitHeartBeat(TaskTracker.java:489)
>         - locked <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:442)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)
> "taskCleanup":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.cleanup(TaskTracker.java:1072)
>         - waiting to lock <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.jobHasFinished(TaskTracker.java:1013)
>         - locked <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker$1.run(TaskTracker.java:144)
>         at java.lang.Thread.run(Thread.java:595)
> Found 1 deadlock.
> The jobhasfinished method and transmitHeart beat lock the tasktracker and tip in a different order. Also , before emitting HeartBeat we should be updating the status and removing entries from runningtasks. Currently this is done after the heartbeat.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 05:35:18 2006
Return-Path: 
 <hadoop-dev-return-6010-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66736 invoked from network); 14 Dec 2006 05:35:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 05:35:18 -0000
Received: (qmail 73069 invoked by uid 500); 14 Dec 2006 05:35:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72903 invoked by uid 500); 14 Dec 2006 05:35:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72886 invoked by uid 99); 14 Dec 2006 05:35:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 21:35:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 21:34:52 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 545F07140D2
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 21:09:22 -0800 (PST)
Message-ID: <6573209.1166072962343.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 21:09:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-791) deadlock issue in taskstracker.
In-Reply-To: <2727015.1165466301505.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-791?page=all ]

Mahadev konar updated HADOOP-791:
---------------------------------

    Status: Patch Available  (was: Open)

> deadlock issue in taskstracker.
> -------------------------------
>
>                 Key: HADOOP-791
>                 URL: http://issues.apache.org/jira/browse/HADOOP-791
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>         Attachments: deadlock.patch
>
>
> the stack trace--
> "main":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.createStatus(TaskTracker.java:880)
>         - waiting to lock <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker.transmitHeartBeat(TaskTracker.java:489)
>         - locked <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:442)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)
> "taskCleanup":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.cleanup(TaskTracker.java:1072)
>         - waiting to lock <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.jobHasFinished(TaskTracker.java:1013)
>         - locked <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker$1.run(TaskTracker.java:144)
>         at java.lang.Thread.run(Thread.java:595)
> Found 1 deadlock.
> The jobhasfinished method and transmitHeart beat lock the tasktracker and tip in a different order. Also , before emitting HeartBeat we should be updating the status and removing entries from runningtasks. Currently this is done after the heartbeat.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 05:23:50 2006
Return-Path: 
 <hadoop-dev-return-6009-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64835 invoked from network); 14 Dec 2006 05:23:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 05:23:50 -0000
Received: (qmail 54718 invoked by uid 500); 14 Dec 2006 05:23:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54677 invoked by uid 500); 14 Dec 2006 05:23:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54646 invoked by uid 99); 14 Dec 2006 05:23:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 21:23:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 21:23:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B103D71413F
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 21:23:22 -0800 (PST)
Message-ID: <14231135.1166073802722.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 21:23:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-791) deadlock issue in taskstracker.
In-Reply-To: <2727015.1165466301505.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-791?page=comments#action_12458366 ] 
            
Hadoop QA commented on HADOOP-791:
----------------------------------

+1, since http://issues.apache.org/jira/secure/attachment/12347138/deadlock.patch applied and successfully tested against trunk revision r486901.

> deadlock issue in taskstracker.
> -------------------------------
>
>                 Key: HADOOP-791
>                 URL: http://issues.apache.org/jira/browse/HADOOP-791
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>         Attachments: deadlock.patch
>
>
> the stack trace--
> "main":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.createStatus(TaskTracker.java:880)
>         - waiting to lock <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker.transmitHeartBeat(TaskTracker.java:489)
>         - locked <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:442)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)
> "taskCleanup":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.cleanup(TaskTracker.java:1072)
>         - waiting to lock <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.jobHasFinished(TaskTracker.java:1013)
>         - locked <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker$1.run(TaskTracker.java:144)
>         at java.lang.Thread.run(Thread.java:595)
> Found 1 deadlock.
> The jobhasfinished method and transmitHeart beat lock the tasktracker and tip in a different order. Also , before emitting HeartBeat we should be updating the status and removing entries from runningtasks. Currently this is done after the heartbeat.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 05:37:44 2006
Return-Path: 
 <hadoop-dev-return-6011-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66920 invoked from network); 14 Dec 2006 05:37:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 05:37:44 -0000
Received: (qmail 77998 invoked by uid 500); 14 Dec 2006 05:37:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77971 invoked by uid 500); 14 Dec 2006 05:37:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77962 invoked by uid 99); 14 Dec 2006 05:37:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 21:37:50 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 69BC27140D2
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 21:36:22 -0800 (PST)
Message-ID: <13076719.1166074582430.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 21:36:22 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-803?page=all ]

Raghu Angadi updated HADOOP-803:
--------------------------------

    Attachment: block-refs-2.patch


block-prefs-2.patch. This removes another copy of block for files that are created in current instance of running Namenode. Also removes iterations when a file is added.

Extra copy still exists for files that are created at the beginning while reading fsimage.


> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>         Attachments: block-refs-2.patch, block-refs.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 05:43:50 2006
Return-Path: 
 <hadoop-dev-return-6012-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68095 invoked from network); 14 Dec 2006 05:43:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 05:43:50 -0000
Received: (qmail 93447 invoked by uid 500); 14 Dec 2006 05:43:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93242 invoked by uid 500); 14 Dec 2006 05:43:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93182 invoked by uid 99); 14 Dec 2006 05:43:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 21:43:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 21:43:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 734E871413D
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 21:43:22 -0800 (PST)
Message-ID: <12332562.1166075002469.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 21:43:22 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-803?page=comments#action_12458370 ] 
            
Raghu Angadi commented on HADOOP-803:
-------------------------------------


2) Another candidate : 
There are two global Maps for blocks 
   a) blockMap : block --> nodes that have this block.
   b) activeBlock : block --> file Inode

We can have only one map : 
    
    blockMap : block --> BlockInfo { Block, nodes, Inode, ... }

Of course this is a bigger code change. 

Is TreeSet much bigger in size than a LinkedList? We have one TreeSet of nodes for each block.


> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>         Attachments: block-refs-2.patch, block-refs.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 05:52:43 2006
Return-Path: 
 <hadoop-dev-return-6013-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69511 invoked from network); 14 Dec 2006 05:52:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 05:52:43 -0000
Received: (qmail 6493 invoked by uid 500); 14 Dec 2006 05:52:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6458 invoked by uid 500); 14 Dec 2006 05:52:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6449 invoked by uid 99); 14 Dec 2006 05:52:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 21:52:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 21:52:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6F35C71413D
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 21:52:22 -0800 (PST)
Message-ID: <26108557.1166075542452.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 21:52:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-814) Increase dfs scalability by optimizing
 locking on namenode.
In-Reply-To: <7461200.1165900101047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-814?page=all ]

dhruba borthakur updated HADOOP-814:
------------------------------------

    Attachment:     (was: heartbeatlock2.patch)

> Increase dfs scalability by optimizing locking on namenode.
> -----------------------------------------------------------
>
>                 Key: HADOOP-814
>                 URL: http://issues.apache.org/jira/browse/HADOOP-814
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: heartbeatlock3.patch
>
>
> The current dfs namenode encounters locking bottlenecks when the number of datanodes is large. The namenode uses a single global lock to protect access to data structures. One key area is heartbeat processing. The lower the cost of processing a heartbeat, more the number of nodes HDFS can support.  A simple change to this current locking model can increase the scalability. Here are the details:
> Case 1: Currently we have three locks, the global lock (on FSNamesystem), the heartbeat lock and the datanodeMap lock. The following function is called when a heartbeat is received by the Namenode
> public synchronized FSNamesystem. gotHeartbeat() { ........ (A)
>     synchronized (heartbeat) {                                        ........ (B)
>       synchronized (datanodeMap) {                               ......... (C)
>    ...
>      }
> }
> In the above piece of code, statement (A) acquires the global-FSNamesystem-lock. This synchronization can be safely removed (remove updateStats too). This means that a heartbeat from the datanode can be processed without holding the FSnamesystem-global-lock.
> Case 2: A following thread called the heartbeatCheck thread periodically traverses all known Datanodes to determine if any of them has timed out. It is of the following form:
> void FSNamesystem.heartbeatCheck() {
>             synchronized (this) {                                        ........... (D)
>                         synchronized (heartbeats) {                .............(E) 
> }
> This thread acquires the global-FSNamesystem lock in Statement (D). This statement (D) can be removed. Instead the loop can check to see if any nodes are dead. If a dead node is found, only then it acquires the FSNamesystem-global-lock.
> It is possible that fixing the above two cases will cause HDFS to scale to higher number of nodes.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 05:52:46 2006
Return-Path: 
 <hadoop-dev-return-6014-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69563 invoked from network); 14 Dec 2006 05:52:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 05:52:46 -0000
Received: (qmail 6832 invoked by uid 500); 14 Dec 2006 05:52:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6801 invoked by uid 500); 14 Dec 2006 05:52:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6792 invoked by uid 99); 14 Dec 2006 05:52:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 21:52:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 21:52:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7A24E7140F6
	for <hadoop-dev@lucene.apache.org>; Wed, 13 Dec 2006 21:52:25 -0800 (PST)
Message-ID: <9667893.1166075545497.JavaMail.jira@brutus>
Date: Wed, 13 Dec 2006 21:52:25 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-814) Increase dfs scalability by optimizing
 locking on namenode.
In-Reply-To: <7461200.1165900101047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-814?page=all ]

dhruba borthakur updated HADOOP-814:
------------------------------------

    Attachment: heartbeatlock3.patch

This patch incorporates Raghu and Konstantin's review comments. The updating of statistics is protected by the heartbeat lock.

> Increase dfs scalability by optimizing locking on namenode.
> -----------------------------------------------------------
>
>                 Key: HADOOP-814
>                 URL: http://issues.apache.org/jira/browse/HADOOP-814
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: heartbeatlock3.patch
>
>
> The current dfs namenode encounters locking bottlenecks when the number of datanodes is large. The namenode uses a single global lock to protect access to data structures. One key area is heartbeat processing. The lower the cost of processing a heartbeat, more the number of nodes HDFS can support.  A simple change to this current locking model can increase the scalability. Here are the details:
> Case 1: Currently we have three locks, the global lock (on FSNamesystem), the heartbeat lock and the datanodeMap lock. The following function is called when a heartbeat is received by the Namenode
> public synchronized FSNamesystem. gotHeartbeat() { ........ (A)
>     synchronized (heartbeat) {                                        ........ (B)
>       synchronized (datanodeMap) {                               ......... (C)
>    ...
>      }
> }
> In the above piece of code, statement (A) acquires the global-FSNamesystem-lock. This synchronization can be safely removed (remove updateStats too). This means that a heartbeat from the datanode can be processed without holding the FSnamesystem-global-lock.
> Case 2: A following thread called the heartbeatCheck thread periodically traverses all known Datanodes to determine if any of them has timed out. It is of the following form:
> void FSNamesystem.heartbeatCheck() {
>             synchronized (this) {                                        ........... (D)
>                         synchronized (heartbeats) {                .............(E) 
> }
> This thread acquires the global-FSNamesystem lock in Statement (D). This statement (D) can be removed. Instead the loop can check to see if any nodes are dead. If a dead node is found, only then it acquires the FSNamesystem-global-lock.
> It is possible that fixing the above two cases will cause HDFS to scale to higher number of nodes.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 11:15:51 2006
Return-Path: 
 <hadoop-dev-return-6015-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78689 invoked from network); 14 Dec 2006 11:15:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 11:15:51 -0000
Received: (qmail 72134 invoked by uid 500); 14 Dec 2006 11:15:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72109 invoked by uid 500); 14 Dec 2006 11:15:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72100 invoked by uid 99); 14 Dec 2006 11:15:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 03:15:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 03:15:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9044971413F
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 03:15:28 -0800 (PST)
Message-ID: <28403151.1166094928587.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 03:15:28 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment: Hadoop-619_1.patch

Thanks Owen for review. I hadn't looked at glob impl in FileSystem. 

This patch uses Filesystem.glob. also fixes an issue which caused server:port pattern to give error in glob expansion. 

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch, Hadoop-619_1.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 12:29:45 2006
Return-Path: 
 <hadoop-dev-return-6016-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5024 invoked from network); 14 Dec 2006 12:29:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 12:29:45 -0000
Received: (qmail 75554 invoked by uid 500); 14 Dec 2006 12:29:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75494 invoked by uid 500); 14 Dec 2006 12:29:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75485 invoked by uid 99); 14 Dec 2006 12:29:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 04:29:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 04:29:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B8A44714057
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 04:29:23 -0800 (PST)
Message-ID: <16459783.1166099363753.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 04:29:23 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Status: Patch Available  (was: Open)

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch, Hadoop-619_1.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 17:46:43 2006
Return-Path: 
 <hadoop-dev-return-6017-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96173 invoked from network); 14 Dec 2006 17:46:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 17:46:43 -0000
Received: (qmail 91789 invoked by uid 500); 14 Dec 2006 17:46:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91756 invoked by uid 500); 14 Dec 2006 17:46:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91746 invoked by uid 99); 14 Dec 2006 17:46:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 09:46:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 09:46:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 158707140F6
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 09:46:21 -0800 (PST)
Message-ID: <14225857.1166118381085.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 09:46:21 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-826) job tracker WI doesnt display shuffle
 finish time correctly.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

job tracker WI doesnt display shuffle finish time correctly. 
-------------------------------------------------------------

                 Key: HADOOP-826
                 URL: http://issues.apache.org/jira/browse/HADOOP-826
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Sanjay Dahiya
         Assigned To: Sanjay Dahiya
            Priority: Minor


It displays current time instead of finish time. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 18:00:45 2006
Return-Path: 
 <hadoop-dev-return-6018-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99193 invoked from network); 14 Dec 2006 18:00:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 18:00:45 -0000
Received: (qmail 15065 invoked by uid 500); 14 Dec 2006 18:00:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14828 invoked by uid 500); 14 Dec 2006 18:00:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14819 invoked by uid 99); 14 Dec 2006 18:00:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 10:00:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 10:00:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 42FB971413F
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 10:00:24 -0800 (PST)
Message-ID: <32776070.1166119224271.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 10:00:24 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12458565 ] 
            
Hadoop QA commented on HADOOP-619:
----------------------------------

+1, since http://issues.apache.org/jira/secure/attachment/12347163/Hadoop-619_1.patch applied and successfully tested against trunk revision r486901.

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch, Hadoop-619_1.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 20:02:55 2006
Return-Path: 
 <hadoop-dev-return-6019-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39503 invoked from network); 14 Dec 2006 20:02:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 20:02:55 -0000
Received: (qmail 83924 invoked by uid 500); 14 Dec 2006 20:02:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83835 invoked by uid 500); 14 Dec 2006 20:02:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83780 invoked by uid 99); 14 Dec 2006 20:02:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 12:02:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 12:02:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B1F87140F6
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 12:02:22 -0800 (PST)
Message-ID: <17103659.1166126542304.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 12:02:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-791) deadlock issue in taskstracker.
In-Reply-To: <2727015.1165466301505.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-791?page=all ]

Mahadev konar updated HADOOP-791:
---------------------------------

    Status: Open  (was: Patch Available)

> deadlock issue in taskstracker.
> -------------------------------
>
>                 Key: HADOOP-791
>                 URL: http://issues.apache.org/jira/browse/HADOOP-791
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>
> the stack trace--
> "main":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.createStatus(TaskTracker.java:880)
>         - waiting to lock <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker.transmitHeartBeat(TaskTracker.java:489)
>         - locked <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:442)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)
> "taskCleanup":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.cleanup(TaskTracker.java:1072)
>         - waiting to lock <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.jobHasFinished(TaskTracker.java:1013)
>         - locked <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker$1.run(TaskTracker.java:144)
>         at java.lang.Thread.run(Thread.java:595)
> Found 1 deadlock.
> The jobhasfinished method and transmitHeart beat lock the tasktracker and tip in a different order. Also , before emitting HeartBeat we should be updating the status and removing entries from runningtasks. Currently this is done after the heartbeat.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 20:02:57 2006
Return-Path: 
 <hadoop-dev-return-6020-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39549 invoked from network); 14 Dec 2006 20:02:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 20:02:57 -0000
Received: (qmail 84115 invoked by uid 500); 14 Dec 2006 20:02:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84070 invoked by uid 500); 14 Dec 2006 20:02:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83975 invoked by uid 99); 14 Dec 2006 20:02:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 12:02:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 12:02:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A95317140D2
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 12:02:23 -0800 (PST)
Message-ID: <32989820.1166126543691.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 12:02:23 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-791) deadlock issue in taskstracker.
In-Reply-To: <2727015.1165466301505.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-791?page=all ]

Mahadev konar updated HADOOP-791:
---------------------------------

    Attachment:     (was: deadlock.patch)

> deadlock issue in taskstracker.
> -------------------------------
>
>                 Key: HADOOP-791
>                 URL: http://issues.apache.org/jira/browse/HADOOP-791
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>
> the stack trace--
> "main":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.createStatus(TaskTracker.java:880)
>         - waiting to lock <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker.transmitHeartBeat(TaskTracker.java:489)
>         - locked <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:442)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)
> "taskCleanup":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.cleanup(TaskTracker.java:1072)
>         - waiting to lock <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.jobHasFinished(TaskTracker.java:1013)
>         - locked <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker$1.run(TaskTracker.java:144)
>         at java.lang.Thread.run(Thread.java:595)
> Found 1 deadlock.
> The jobhasfinished method and transmitHeart beat lock the tasktracker and tip in a different order. Also , before emitting HeartBeat we should be updating the status and removing entries from runningtasks. Currently this is done after the heartbeat.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 20:06:44 2006
Return-Path: 
 <hadoop-dev-return-6021-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40527 invoked from network); 14 Dec 2006 20:06:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 20:06:44 -0000
Received: (qmail 94381 invoked by uid 500); 14 Dec 2006 20:06:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94353 invoked by uid 500); 14 Dec 2006 20:06:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94344 invoked by uid 99); 14 Dec 2006 20:06:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 12:06:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 12:06:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 63E917140F6
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 12:06:22 -0800 (PST)
Message-ID: <14407821.1166126782406.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 12:06:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-791) deadlock issue in taskstracker.
In-Reply-To: <2727015.1165466301505.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-791?page=all ]

Mahadev konar updated HADOOP-791:
---------------------------------

    Attachment: deadlock2.patch

An updated patch which includes a fix for speculative reduces. The cleanup code for speculative reduces currently cleans up the tip directory. It should only clean up the task directory.

> deadlock issue in taskstracker.
> -------------------------------
>
>                 Key: HADOOP-791
>                 URL: http://issues.apache.org/jira/browse/HADOOP-791
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>         Attachments: deadlock2.patch
>
>
> the stack trace--
> "main":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.createStatus(TaskTracker.java:880)
>         - waiting to lock <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker.transmitHeartBeat(TaskTracker.java:489)
>         - locked <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:442)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)
> "taskCleanup":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.cleanup(TaskTracker.java:1072)
>         - waiting to lock <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.jobHasFinished(TaskTracker.java:1013)
>         - locked <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker$1.run(TaskTracker.java:144)
>         at java.lang.Thread.run(Thread.java:595)
> Found 1 deadlock.
> The jobhasfinished method and transmitHeart beat lock the tasktracker and tip in a different order. Also , before emitting HeartBeat we should be updating the status and removing entries from runningtasks. Currently this is done after the heartbeat.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 20:06:46 2006
Return-Path: 
 <hadoop-dev-return-6022-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40582 invoked from network); 14 Dec 2006 20:06:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 20:06:46 -0000
Received: (qmail 94652 invoked by uid 500); 14 Dec 2006 20:06:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94626 invoked by uid 500); 14 Dec 2006 20:06:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94617 invoked by uid 99); 14 Dec 2006 20:06:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 12:06:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 12:06:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D01CD71413D
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 12:06:23 -0800 (PST)
Message-ID: <10096834.1166126783850.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 12:06:23 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-791) deadlock issue in taskstracker.
In-Reply-To: <2727015.1165466301505.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-791?page=all ]

Mahadev konar updated HADOOP-791:
---------------------------------

    Status: Patch Available  (was: Open)

> deadlock issue in taskstracker.
> -------------------------------
>
>                 Key: HADOOP-791
>                 URL: http://issues.apache.org/jira/browse/HADOOP-791
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>         Attachments: deadlock2.patch
>
>
> the stack trace--
> "main":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.createStatus(TaskTracker.java:880)
>         - waiting to lock <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker.transmitHeartBeat(TaskTracker.java:489)
>         - locked <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:442)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)
> "taskCleanup":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.cleanup(TaskTracker.java:1072)
>         - waiting to lock <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.jobHasFinished(TaskTracker.java:1013)
>         - locked <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker$1.run(TaskTracker.java:144)
>         at java.lang.Thread.run(Thread.java:595)
> Found 1 deadlock.
> The jobhasfinished method and transmitHeart beat lock the tasktracker and tip in a different order. Also , before emitting HeartBeat we should be updating the status and removing entries from runningtasks. Currently this is done after the heartbeat.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 21:37:44 2006
Return-Path: 
 <hadoop-dev-return-6023-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77987 invoked from network); 14 Dec 2006 21:37:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 21:37:44 -0000
Received: (qmail 66519 invoked by uid 500); 14 Dec 2006 21:37:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66481 invoked by uid 500); 14 Dec 2006 21:37:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66472 invoked by uid 99); 14 Dec 2006 21:37:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 13:37:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 13:37:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F2B137140D2
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 13:37:22 -0800 (PST)
Message-ID: <26318708.1166132242991.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 13:37:22 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12458610 ] 
            
Konstantin Shvachko commented on HADOOP-432:
--------------------------------------------

I agree with Doug and was advocating for the pure client implementation of the thrash-bin from the very beginning.
But now after so many iterations I'm hesitant about going back to the drawing board stage.

The main reason for implementing it on the name-node was the timestamp issue. Clients do not have synchronized
clocks, so they need to contact the name-node to get a proper timestamp to stamp files being deleted.
Since it has to send a request to the name-node any way why not just ask the name-node to perform the operation.
That kind of logic.

What is good in Wendy's implementation.
- All trash logic is contained in a separate class, the name-node code and data structures have not been affected.
- There is a way to configure parameters so that trash never starts: no wast of space, no trash daemon.


> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch, undelete17.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 21:41:44 2006
Return-Path: 
 <hadoop-dev-return-6024-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79661 invoked from network); 14 Dec 2006 21:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 21:41:44 -0000
Received: (qmail 81714 invoked by uid 500); 14 Dec 2006 21:41:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81682 invoked by uid 500); 14 Dec 2006 21:41:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81673 invoked by uid 99); 14 Dec 2006 21:41:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 13:41:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 13:41:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 13C917140D2
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 13:41:23 -0800 (PST)
Message-ID: <25117935.1166132483078.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 13:41:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-639?page=all ]

Owen O'Malley updated HADOOP-639:
---------------------------------

    Fix Version/s: 0.9.2
                       (was: 0.10.0)

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Arun C Murthy
>             Fix For: 0.9.2
>
>         Attachments: HADOOP-639_1.patch, HADOOP-639_2_20061130.patch, HADOOP-639_3_20061201.patch, HADOOP-639_4_20061205.patch, HADOOP-639_5_20061207.patch
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 21:43:45 2006
Return-Path: 
 <hadoop-dev-return-6025-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80392 invoked from network); 14 Dec 2006 21:43:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 21:43:45 -0000
Received: (qmail 84325 invoked by uid 500); 14 Dec 2006 21:43:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84291 invoked by uid 500); 14 Dec 2006 21:43:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84282 invoked by uid 99); 14 Dec 2006 21:43:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 13:43:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 13:43:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5E5367140F6
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 13:43:22 -0800 (PST)
Message-ID: <19510269.1166132602383.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 13:43:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-791) deadlock issue in taskstracker.
In-Reply-To: <2727015.1165466301505.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-791?page=all ]

Owen O'Malley updated HADOOP-791:
---------------------------------

        Fix Version/s: 0.9.2
    Affects Version/s: 0.9.1

> deadlock issue in taskstracker.
> -------------------------------
>
>                 Key: HADOOP-791
>                 URL: http://issues.apache.org/jira/browse/HADOOP-791
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>             Fix For: 0.9.2
>
>         Attachments: deadlock2.patch
>
>
> the stack trace--
> "main":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.createStatus(TaskTracker.java:880)
>         - waiting to lock <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker.transmitHeartBeat(TaskTracker.java:489)
>         - locked <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:442)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)
> "taskCleanup":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.cleanup(TaskTracker.java:1072)
>         - waiting to lock <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.jobHasFinished(TaskTracker.java:1013)
>         - locked <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker$1.run(TaskTracker.java:144)
>         at java.lang.Thread.run(Thread.java:595)
> Found 1 deadlock.
> The jobhasfinished method and transmitHeart beat lock the tasktracker and tip in a different order. Also , before emitting HeartBeat we should be updating the status and removing entries from runningtasks. Currently this is done after the heartbeat.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 21:45:42 2006
Return-Path: 
 <hadoop-dev-return-6026-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81144 invoked from network); 14 Dec 2006 21:45:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 21:45:42 -0000
Received: (qmail 88806 invoked by uid 500); 14 Dec 2006 21:45:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88571 invoked by uid 500); 14 Dec 2006 21:45:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88562 invoked by uid 99); 14 Dec 2006 21:45:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 13:45:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 13:45:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 160FF7140F6
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 13:45:21 -0800 (PST)
Message-ID: <13634761.1166132721087.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 13:45:21 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-827) turn off speculative execution by
 default
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

turn off speculative execution by default
-----------------------------------------

                 Key: HADOOP-827
                 URL: http://issues.apache.org/jira/browse/HADOOP-827
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.9.1
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.9.2


Currently, speculative execution reduces reliability. I want to turn it off by default until it works well.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 21:55:53 2006
Return-Path: 
 <hadoop-dev-return-6027-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85640 invoked from network); 14 Dec 2006 21:55:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 21:55:53 -0000
Received: (qmail 22169 invoked by uid 500); 14 Dec 2006 21:56:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22137 invoked by uid 500); 14 Dec 2006 21:56:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22127 invoked by uid 99); 14 Dec 2006 21:56:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 13:56:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 13:55:16 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5AF917140F6
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 13:54:22 -0800 (PST)
Message-ID: <486355.1166133262370.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 13:54:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-825) If the default file system is set
 using the new uri syntax, the namenode will not start
In-Reply-To: <29816819.1166052982701.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-825?page=all ]

Owen O'Malley updated HADOOP-825:
---------------------------------

    Attachment: namenode-uri.patch

This patch fixes the DataNode.createSocketAddr to handle both the old style and new style default.fs names. It also fixes fsck.

> If the default file system is set using the new uri syntax, the namenode will not start
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-825
>                 URL: http://issues.apache.org/jira/browse/HADOOP-825
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.10.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: namenode-uri.patch
>
>
> The namenode tries to parse the string manually by looking for the first ":" and translating the rest of the string into an integer. This is great, if it is "<host>:<port>", but not if it is "hdfs://<host>:<port>/"

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 22:14:44 2006
Return-Path: 
 <hadoop-dev-return-6032-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96100 invoked from network); 14 Dec 2006 22:14:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 22:14:44 -0000
Received: (qmail 62491 invoked by uid 500); 14 Dec 2006 22:14:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62470 invoked by uid 500); 14 Dec 2006 22:14:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62440 invoked by uid 99); 14 Dec 2006 22:14:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:14:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:14:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C09C3714167
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 13:54:23 -0800 (PST)
Message-ID: <8552856.1166133263786.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 13:54:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-825) If the default file system is set
 using the new uri syntax, the namenode will not start
In-Reply-To: <29816819.1166052982701.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-825?page=all ]

Owen O'Malley updated HADOOP-825:
---------------------------------

    Status: Patch Available  (was: Open)

> If the default file system is set using the new uri syntax, the namenode will not start
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-825
>                 URL: http://issues.apache.org/jira/browse/HADOOP-825
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.10.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: namenode-uri.patch
>
>
> The namenode tries to parse the string manually by looking for the first ":" and translating the rest of the string into an integer. This is great, if it is "<host>:<port>", but not if it is "hdfs://<host>:<port>/"

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 21:58:54 2006
Return-Path: 
 <hadoop-dev-return-6028-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87299 invoked from network); 14 Dec 2006 21:58:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 21:58:54 -0000
Received: (qmail 29709 invoked by uid 500); 14 Dec 2006 21:58:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29608 invoked by uid 500); 14 Dec 2006 21:58:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29533 invoked by uid 99); 14 Dec 2006 21:58:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 13:58:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 13:58:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 607937140D2
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 13:58:22 -0800 (PST)
Message-ID: <9328705.1166133502392.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 13:58:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-791) deadlock issue in taskstracker.
In-Reply-To: <2727015.1165466301505.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-791?page=comments#action_12458616 ] 
            
Owen O'Malley commented on HADOOP-791:
--------------------------------------

+1

> deadlock issue in taskstracker.
> -------------------------------
>
>                 Key: HADOOP-791
>                 URL: http://issues.apache.org/jira/browse/HADOOP-791
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>             Fix For: 0.9.2
>
>         Attachments: deadlock2.patch
>
>
> the stack trace--
> "main":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.createStatus(TaskTracker.java:880)
>         - waiting to lock <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker.transmitHeartBeat(TaskTracker.java:489)
>         - locked <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:442)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)
> "taskCleanup":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.cleanup(TaskTracker.java:1072)
>         - waiting to lock <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.jobHasFinished(TaskTracker.java:1013)
>         - locked <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker$1.run(TaskTracker.java:144)
>         at java.lang.Thread.run(Thread.java:595)
> Found 1 deadlock.
> The jobhasfinished method and transmitHeart beat lock the tasktracker and tip in a different order. Also , before emitting HeartBeat we should be updating the status and removing entries from runningtasks. Currently this is done after the heartbeat.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 22:07:46 2006
Return-Path: 
 <hadoop-dev-return-6029-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93119 invoked from network); 14 Dec 2006 22:07:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 22:07:46 -0000
Received: (qmail 49294 invoked by uid 500); 14 Dec 2006 22:07:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49269 invoked by uid 500); 14 Dec 2006 22:07:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49244 invoked by uid 99); 14 Dec 2006 22:07:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:07:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:07:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1888C71413D
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 14:07:23 -0800 (PST)
Message-ID: <3169832.1166134043096.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 14:07:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-825) If the default file system is set
 using the new uri syntax, the namenode will not start
In-Reply-To: <29816819.1166052982701.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-825?page=comments#action_12458621 ] 
            
Hadoop QA commented on HADOOP-825:
----------------------------------

+1, since http://issues.apache.org/jira/secure/attachment/12347226/namenode-uri.patch applied and successfully tested against trunk revision r486901.

> If the default file system is set using the new uri syntax, the namenode will not start
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-825
>                 URL: http://issues.apache.org/jira/browse/HADOOP-825
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.10.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: namenode-uri.patch
>
>
> The namenode tries to parse the string manually by looking for the first ":" and translating the rest of the string into an integer. This is great, if it is "<host>:<port>", but not if it is "hdfs://<host>:<port>/"

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 22:09:44 2006
Return-Path: 
 <hadoop-dev-return-6030-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94120 invoked from network); 14 Dec 2006 22:09:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 22:09:44 -0000
Received: (qmail 54347 invoked by uid 500); 14 Dec 2006 22:09:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54310 invoked by uid 500); 14 Dec 2006 22:09:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54301 invoked by uid 99); 14 Dec 2006 22:09:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:09:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:09:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5199E7140F6
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 14:09:22 -0800 (PST)
Message-ID: <17249125.1166134162331.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 14:09:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-827) turn off speculative execution by
 default
In-Reply-To: <13634761.1166132721087.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-827?page=all ]

Owen O'Malley updated HADOOP-827:
---------------------------------

    Attachment: no-spec.patch

Change the hadoop-default.xml to turn off the speculative execution.

> turn off speculative execution by default
> -----------------------------------------
>
>                 Key: HADOOP-827
>                 URL: http://issues.apache.org/jira/browse/HADOOP-827
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.9.1
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.2
>
>         Attachments: no-spec.patch
>
>
> Currently, speculative execution reduces reliability. I want to turn it off by default until it works well.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 22:09:45 2006
Return-Path: 
 <hadoop-dev-return-6031-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94174 invoked from network); 14 Dec 2006 22:09:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 22:09:45 -0000
Received: (qmail 54628 invoked by uid 500); 14 Dec 2006 22:09:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54596 invoked by uid 500); 14 Dec 2006 22:09:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54580 invoked by uid 99); 14 Dec 2006 22:09:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:09:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:09:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BC59471413F
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 14:09:23 -0800 (PST)
Message-ID: <6310353.1166134163769.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 14:09:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-827) turn off speculative execution by
 default
In-Reply-To: <13634761.1166132721087.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-827?page=all ]

Owen O'Malley updated HADOOP-827:
---------------------------------

    Status: Patch Available  (was: Open)

> turn off speculative execution by default
> -----------------------------------------
>
>                 Key: HADOOP-827
>                 URL: http://issues.apache.org/jira/browse/HADOOP-827
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.9.1
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.2
>
>         Attachments: no-spec.patch
>
>
> Currently, speculative execution reduces reliability. I want to turn it off by default until it works well.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 22:20:45 2006
Return-Path: 
 <hadoop-dev-return-6033-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99186 invoked from network); 14 Dec 2006 22:20:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 22:20:45 -0000
Received: (qmail 74085 invoked by uid 500); 14 Dec 2006 22:20:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74042 invoked by uid 500); 14 Dec 2006 22:20:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74002 invoked by uid 99); 14 Dec 2006 22:20:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:20:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:20:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6F65871413F
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 14:20:22 -0800 (PST)
Message-ID: <11018700.1166134822453.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 14:20:22 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-371) ant tar should package contrib jars
In-Reply-To: <22441907.1153248734143.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-371?page=comments#action_12458625 ] 
            
Nigel Daley commented on HADOOP-371:
------------------------------------

Here's an updated proposal for restructuring the hadoop packaging: 

1) consolidate benchmarks into src/test/org/apache/hadoop and include them in the test jar file: 
    - move src/contrib/smallJobsBenchmark to src/test/org/apache/hadoop/mapred
    - move src/examples/org/apache/hadoop/examples/NNBench.java to src/test/org/apache/hadoop/dfs

2) rename PiBenchmark example to PiEstimator and leave it in the examples package 

3) build hadoop-streaming.jar into a top-level contrib directory using the package target 

4) package the contrib and examples javadoc with the core javadoc and provide an overview-summary.html like lucene's: 
http://lucene.apache.org/java/docs/api/overview-summary.html

5) include the site docs into the top-level docs directory

More comments?

> ant tar should package contrib jars
> -----------------------------------
>
>                 Key: HADOOP-371
>                 URL: http://issues.apache.org/jira/browse/HADOOP-371
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Michel Tourn
>         Attachments: build.tarcontrib.patch, contribbuild.patch
>
>
> From Hadoop-356:
> >I note that the contrib packages are not included in distributions (the "tar" target).  
> >They probably should be.  Michel, would you like to modify "tar" to include the contrib code?  
> >This should be done in a separate bug.
> OK.
> This packaging is done in target deploy-contrib.
> So I can just add a dependency to the top-level tar target:
> <!-- Make release tarball(s)                                               -->
> <target name="tar" depends="package, deploy-contrib">

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 22:22:44 2006
Return-Path: 
 <hadoop-dev-return-6034-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99800 invoked from network); 14 Dec 2006 22:22:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 22:22:44 -0000
Received: (qmail 76159 invoked by uid 500); 14 Dec 2006 22:22:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75916 invoked by uid 500); 14 Dec 2006 22:22:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75900 invoked by uid 99); 14 Dec 2006 22:22:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:22:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:22:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0185271413D
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 14:22:23 -0800 (PST)
Message-ID: <12539851.1166134943003.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 14:22:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-813) map tasks lost during sort
In-Reply-To: <30843820.1165896621216.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-813?page=comments#action_12458626 ] 
            
Owen O'Malley commented on HADOOP-813:
--------------------------------------

+1

> map tasks lost during sort
> --------------------------
>
>                 Key: HADOOP-813
>                 URL: http://issues.apache.org/jira/browse/HADOOP-813
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.10.0
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.10.0
>
>         Attachments: 813.patch, 813.patch
>
>
> On a 500 node cluster, I had a bunch of map tasks get "lost" because they failed to report progress for 10 minutes. They appear to be in the sort stage at the end of the map. I hypothesize that the patch for HADOOP-331 does not update the map's progress during the sort/merge. If the sort/merge takes more than 10 minutes, the task is lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 22:28:43 2006
Return-Path: 
 <hadoop-dev-return-6035-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1801 invoked from network); 14 Dec 2006 22:28:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 22:28:43 -0000
Received: (qmail 90762 invoked by uid 500); 14 Dec 2006 22:28:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90527 invoked by uid 500); 14 Dec 2006 22:28:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90518 invoked by uid 99); 14 Dec 2006 22:28:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:28:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:28:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6A3EC7140F6
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 14:28:22 -0800 (PST)
Message-ID: <31507545.1166135302431.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 14:28:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-827) turn off speculative execution by
 default
In-Reply-To: <13634761.1166132721087.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-827?page=comments#action_12458627 ] 
            
Hadoop QA commented on HADOOP-827:
----------------------------------

+1, since http://issues.apache.org/jira/secure/attachment/12347227/no-spec.patch applied and successfully tested against trunk revision r486901.

> turn off speculative execution by default
> -----------------------------------------
>
>                 Key: HADOOP-827
>                 URL: http://issues.apache.org/jira/browse/HADOOP-827
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.9.1
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.2
>
>         Attachments: no-spec.patch
>
>
> Currently, speculative execution reduces reliability. I want to turn it off by default until it works well.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 22:44:45 2006
Return-Path: 
 <hadoop-dev-return-6036-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6606 invoked from network); 14 Dec 2006 22:44:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 22:44:45 -0000
Received: (qmail 18760 invoked by uid 500); 14 Dec 2006 22:44:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18520 invoked by uid 500); 14 Dec 2006 22:44:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18511 invoked by uid 99); 14 Dec 2006 22:44:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:44:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:44:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C7AD17140D2
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 14:44:23 -0800 (PST)
Message-ID: <25463700.1166136263815.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 14:44:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Owen O'Malley updated HADOOP-619:
---------------------------------

               Status: Open  (was: Patch Available)
        Fix Version/s: 0.10.0
    Affects Version/s: 0.9.1

A couple of things:
  1. You shouldn't use the "ignored" FileSystem. You should use the file system for that particular path. (path.getFileSystem(conf)).
  2. I think the error conditions should be that either:
     a. The list of input directories is empty. (conf.getIputPaths().length == 0)
     b. Any glob pattern matches no files or directories.
  3. the hiddenFileFilter is cleaner as:
    public boolean accept(Path p) {
      return !name.startsWith("_") && !name.startsWith(".");
    }

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.10.0
>
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch, Hadoop-619_1.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 22:52:44 2006
Return-Path: 
 <hadoop-dev-return-6037-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9993 invoked from network); 14 Dec 2006 22:52:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 22:52:44 -0000
Received: (qmail 39020 invoked by uid 500); 14 Dec 2006 22:52:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38998 invoked by uid 500); 14 Dec 2006 22:52:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38987 invoked by uid 99); 14 Dec 2006 22:52:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:52:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:52:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AC1C87140F6
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 14:52:22 -0800 (PST)
Message-ID: <21060001.1166136742701.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 14:52:22 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-803?page=comments#action_12458637 ] 
            
Konstantin Shvachko commented on HADOOP-803:
--------------------------------------------

I do not see how replacing TreeSet=TreeMap<Block, static final Object> by TreeMap<Block, Block> in DatanodeDescriptor 
would reduce memory consumption.

Block getBlock( Block b)
looks very strange. So you need a block in order to get it ..........


> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>         Attachments: block-refs-2.patch, block-refs.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 23:03:43 2006
Return-Path: 
 <hadoop-dev-return-6038-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13159 invoked from network); 14 Dec 2006 23:03:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 23:03:43 -0000
Received: (qmail 55249 invoked by uid 500); 14 Dec 2006 23:03:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55215 invoked by uid 500); 14 Dec 2006 23:03:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55206 invoked by uid 99); 14 Dec 2006 23:03:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 15:03:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 15:03:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5395571413F
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 15:03:22 -0800 (PST)
Message-ID: <22189775.1166137402339.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 15:03:22 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-803?page=comments#action_12458638 ] 
            
Raghu Angadi commented on HADOOP-803:
-------------------------------------

> I do not see how replacing TreeSet=TreeMap<Block, static final Object> by TreeMap<Block, Block> in DatanodeDescriptor
> would reduce memory consumption.

This does not reduce memory .This will let us get hold of original object that was inserted in to the map. That fact that all nodes that have a particular block and blockMap reference the same object reduces memory. Now we have 1 Block object instead of 4 (in the case of 3 replicas). This references argument might be flawed since I am kind of new to Java.

> Block getBlock( Block b)
> looks very strange. So you need a block in order to get it .......... 

:). We could call it getStoredBloc() or getBlock(BlockId). We want a function that gives the Block object what was stored in the map.


> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>         Attachments: block-refs-2.patch, block-refs.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 14 23:41:44 2006
Return-Path: 
 <hadoop-dev-return-6039-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20776 invoked from network); 14 Dec 2006 23:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 23:41:44 -0000
Received: (qmail 91898 invoked by uid 500); 14 Dec 2006 23:41:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91872 invoked by uid 500); 14 Dec 2006 23:41:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91863 invoked by uid 99); 14 Dec 2006 23:41:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 15:41:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 15:41:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 33B8271413F
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 15:41:23 -0800 (PST)
Message-ID: <9887423.1166139683209.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 15:41:23 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-783) Hadoop dfs -put and -get accept '-'
 to indicate stdin/stdout
In-Reply-To: <10710218.1165370781063.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-783?page=all ]

Wendy Chien reassigned HADOOP-783:
----------------------------------

    Assignee: Wendy Chien

> Hadoop dfs -put and -get accept '-' to indicate stdin/stdout
> ------------------------------------------------------------
>
>                 Key: HADOOP-783
>                 URL: http://issues.apache.org/jira/browse/HADOOP-783
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Marco Nicosia
>         Assigned To: Wendy Chien
>            Priority: Minor
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 00:34:44 2006
Return-Path: 
 <hadoop-dev-return-6040-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34690 invoked from network); 15 Dec 2006 00:34:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 00:34:44 -0000
Received: (qmail 57825 invoked by uid 500); 15 Dec 2006 00:34:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57588 invoked by uid 500); 15 Dec 2006 00:34:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57579 invoked by uid 99); 15 Dec 2006 00:34:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 16:34:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 16:34:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9B30B7140F6
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 16:34:22 -0800 (PST)
Message-ID: <14418079.1166142862633.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 16:34:22 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-803?page=all ]

Raghu Angadi updated HADOOP-803:
--------------------------------

    Attachment: block-refs-3.patch

block-refs-3.patch:

1) changed to getBlock(Block) to getBlock( long blockid ). Note that this version includes a 'new'.
2) Konstantin found a bug because of change in semantics of removeStoredBlock() and addStoredBlock().
     previously they did not modify node's map. restored.

this also slightly modifies Block.compareTo().

Why not have TreeMap<BlockId, Block> instead of TreeMap<Block, Block>?
   BlockId is long and it needs to be Long for this generic class. That implies another allocation of Long for each element in the map.


> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>         Attachments: block-refs-2.patch, block-refs-3.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 00:34:45 2006
Return-Path: 
 <hadoop-dev-return-6041-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34731 invoked from network); 15 Dec 2006 00:34:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 00:34:45 -0000
Received: (qmail 57887 invoked by uid 500); 15 Dec 2006 00:34:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57852 invoked by uid 500); 15 Dec 2006 00:34:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57843 invoked by uid 99); 15 Dec 2006 00:34:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 16:34:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 16:34:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1216C7140D2
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 16:34:24 -0800 (PST)
Message-ID: <27418724.1166142864071.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 16:34:24 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-803?page=all ]

Raghu Angadi updated HADOOP-803:
--------------------------------

    Attachment:     (was: block-refs.patch)

> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>         Attachments: block-refs-2.patch, block-refs-3.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 01:15:46 2006
Return-Path: 
 <hadoop-dev-return-6042-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46089 invoked from network); 15 Dec 2006 01:15:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 01:15:46 -0000
Received: (qmail 98291 invoked by uid 500); 15 Dec 2006 01:15:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98255 invoked by uid 500); 15 Dec 2006 01:15:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98246 invoked by uid 99); 15 Dec 2006 01:15:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 17:15:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 17:15:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C11737140D2
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 17:15:24 -0800 (PST)
Message-ID: <1932443.1166145324788.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 17:15:24 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12458650 ] 
            
Konstantin Shvachko commented on HADOOP-227:
--------------------------------------------

>    * fs.checkpoint.period : Time (in seconds) between two checkpoints.
This is the maximal time between the checkpoints, right?

We should introduce new NamenodeProtocol for primary to secondary name-node communication.

I'd go in the other direction: the primary node checks the edits log size each time it adds an entry.
When it reaches the checkpoint.size or if the checkpoint was not done longer than checkpoint.period
the primary rolls the edits log and sends a command to the secondary node to create a new checkpoint.

I think we should think about supporting multiple secondary nodes at least at the design stage.
In that case we will need to further propagate the checkpoints.
Or do we just write the latest image into hdfs?


> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: dhruba borthakur
>         Attachments: patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0
>
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 01:17:42 2006
Return-Path: 
 <hadoop-dev-return-6043-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46608 invoked from network); 15 Dec 2006 01:17:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 01:17:42 -0000
Received: (qmail 99166 invoked by uid 500); 15 Dec 2006 01:17:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98926 invoked by uid 500); 15 Dec 2006 01:17:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98917 invoked by uid 99); 15 Dec 2006 01:17:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 17:17:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 17:17:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1272B7140F6
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 17:17:21 -0800 (PST)
Message-ID: <751537.1166145441073.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 17:17:21 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-828) Need a tool to analyse and verify file
 block movements
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Need a tool to analyse and verify file block movements
------------------------------------------------------

                 Key: HADOOP-828
                 URL: http://issues.apache.org/jira/browse/HADOOP-828
             Project: Hadoop
          Issue Type: New Feature
          Components: util
    Affects Versions: 0.9.1
            Reporter: Nigel Daley
         Attachments: Block-Movement-Analysis-Tool-Design.html

Occasionally a file is corrupted because a block goes missing. This may occur if all the Datanodes containing a given block shutdown or crash, or from defects in the Datanode or Namenode code-base.  A simple diagnostic tool is needed that can trace and analyze the historical movement of the blocks in a given file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 01:17:44 2006
Return-Path: 
 <hadoop-dev-return-6044-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46649 invoked from network); 15 Dec 2006 01:17:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 01:17:44 -0000
Received: (qmail 99228 invoked by uid 500); 15 Dec 2006 01:17:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99189 invoked by uid 500); 15 Dec 2006 01:17:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99180 invoked by uid 99); 15 Dec 2006 01:17:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 17:17:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 17:17:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6D5A37140D2
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 17:17:22 -0800 (PST)
Message-ID: <3997405.1166145442445.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 17:17:22 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-828) Need a tool to analyse and verify file
 block movements
In-Reply-To: <751537.1166145441073.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-828?page=all ]

Nigel Daley updated HADOOP-828:
-------------------------------

    Attachment: Block-Movement-Analysis-Tool-Design.html

First draft of a tool design.

> Need a tool to analyse and verify file block movements
> ------------------------------------------------------
>
>                 Key: HADOOP-828
>                 URL: http://issues.apache.org/jira/browse/HADOOP-828
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: util
>    Affects Versions: 0.9.1
>            Reporter: Nigel Daley
>         Attachments: Block-Movement-Analysis-Tool-Design.html
>
>
> Occasionally a file is corrupted because a block goes missing. This may occur if all the Datanodes containing a given block shutdown or crash, or from defects in the Datanode or Namenode code-base.  A simple diagnostic tool is needed that can trace and analyze the historical movement of the blocks in a given file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 03:02:43 2006
Return-Path: 
 <hadoop-dev-return-6045-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71647 invoked from network); 15 Dec 2006 03:02:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 03:02:43 -0000
Received: (qmail 92944 invoked by uid 500); 15 Dec 2006 03:02:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92899 invoked by uid 500); 15 Dec 2006 03:02:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92890 invoked by uid 99); 15 Dec 2006 03:02:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 19:02:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 19:02:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3E6C37140F6
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 19:02:22 -0800 (PST)
Message-ID: <31671169.1166151742253.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 19:02:22 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-803?page=comments#action_12458665 ] 
            
Konstantin Shvachko commented on HADOOP-803:
--------------------------------------------

If the new report contains different block length do you update it in the stored block?


> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>         Attachments: block-refs-2.patch, block-refs-3.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 05:11:43 2006
Return-Path: 
 <hadoop-dev-return-6046-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92386 invoked from network); 15 Dec 2006 05:11:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 05:11:43 -0000
Received: (qmail 38074 invoked by uid 500); 15 Dec 2006 05:11:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37826 invoked by uid 500); 15 Dec 2006 05:11:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37817 invoked by uid 99); 15 Dec 2006 05:11:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 21:11:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 21:11:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 122F27140F6
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 21:11:21 -0800 (PST)
Message-ID: <20527997.1166159481071.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 21:11:21 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-829) Seperate the datanode contents that is
 written to the fsimage vs the contents used in over-the-wire communication
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Seperate the datanode contents that is written to the fsimage vs the contents used in over-the-wire communication
-----------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-829
                 URL: http://issues.apache.org/jira/browse/HADOOP-829
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: dhruba borthakur
         Assigned To: dhruba borthakur


In the existing implementation, the Namenode has a data structure called DatanodeDescriptor. It is used to serialize contents of the Datanode while writing it to the fsimage. The same serialization method is used to send a Datanode object to the Datanode and/or the Client. This introduces the shortcoming that one cannot introduce non-persistent fields in the DatanodeDescriptor.

One solution is to seperate out the following two functionality into two seperate classes:
1. The fields from a Datanode that are part of the ClientProtocol and/or DatanodeProcotol.
2. The fields from a Datanode that are stored in the fsImage.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 05:13:51 2006
Return-Path: 
 <hadoop-dev-return-6047-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92900 invoked from network); 15 Dec 2006 05:13:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 05:13:51 -0000
Received: (qmail 38844 invoked by uid 500); 15 Dec 2006 05:13:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38755 invoked by uid 500); 15 Dec 2006 05:13:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38739 invoked by uid 99); 15 Dec 2006 05:13:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 21:13:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 21:13:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6F3A57140F6
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 21:13:22 -0800 (PST)
Message-ID: <26582775.1166159602453.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 21:13:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-829) Separate the datanode contents that is
 written to the fsimage vs the contents used in over-the-wire communication
In-Reply-To: <20527997.1166159481071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-829?page=all ]

dhruba borthakur updated HADOOP-829:
------------------------------------

        Summary: Separate the datanode contents that is written to the fsimage vs the contents used in over-the-wire communication  (was: Seperate the datanode contents that is written to the fsimage vs the contents used in over-the-wire communication)
    Description: 
In the existing implementation, the Namenode has a data structure called DatanodeDescriptor. It is used to serialize contents of the Datanode while writing it to the fsimage. The same serialization method is used to send a Datanode object to the Datanode and/or the Client. This introduces the shortcoming that one cannot introduce non-persistent fields in the DatanodeDescriptor.

One solution is to separate out the following two functionality into two separate classes:
1. The fields from a Datanode that are part of the ClientProtocol and/or DatanodeProcotol.
2. The fields from a Datanode that are stored in the fsImage.

  was:
In the existing implementation, the Namenode has a data structure called DatanodeDescriptor. It is used to serialize contents of the Datanode while writing it to the fsimage. The same serialization method is used to send a Datanode object to the Datanode and/or the Client. This introduces the shortcoming that one cannot introduce non-persistent fields in the DatanodeDescriptor.

One solution is to seperate out the following two functionality into two seperate classes:
1. The fields from a Datanode that are part of the ClientProtocol and/or DatanodeProcotol.
2. The fields from a Datanode that are stored in the fsImage.


> Separate the datanode contents that is written to the fsimage vs the contents used in over-the-wire communication
> -----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-829
>                 URL: http://issues.apache.org/jira/browse/HADOOP-829
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> In the existing implementation, the Namenode has a data structure called DatanodeDescriptor. It is used to serialize contents of the Datanode while writing it to the fsimage. The same serialization method is used to send a Datanode object to the Datanode and/or the Client. This introduces the shortcoming that one cannot introduce non-persistent fields in the DatanodeDescriptor.
> One solution is to separate out the following two functionality into two separate classes:
> 1. The fields from a Datanode that are part of the ClientProtocol and/or DatanodeProcotol.
> 2. The fields from a Datanode that are stored in the fsImage.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 05:15:43 2006
Return-Path: 
 <hadoop-dev-return-6048-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93080 invoked from network); 15 Dec 2006 05:15:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 05:15:43 -0000
Received: (qmail 40365 invoked by uid 500); 15 Dec 2006 05:15:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40336 invoked by uid 500); 15 Dec 2006 05:15:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40327 invoked by uid 99); 15 Dec 2006 05:15:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 21:15:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 21:15:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 583617140F6
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 21:15:22 -0800 (PST)
Message-ID: <2103765.1166159722359.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 21:15:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-829) Separate the datanode contents that is
 written to the fsimage vs the contents used in over-the-wire communication
In-Reply-To: <20527997.1166159481071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-829?page=all ]

dhruba borthakur updated HADOOP-829:
------------------------------------

    Attachment: datanodeserialize1.patch

This patch clarifies the following rules:

1. Information that is part of the ClientProtocol or DatanodeProtocol is part of DatanodeInfo.

2. Information that is local to the Namenode and need not be persisted across namenode restarts is in DatanodeDescriptor.

3. Information that is persisted across Namenode restarts is in DatanodeImage.

> Separate the datanode contents that is written to the fsimage vs the contents used in over-the-wire communication
> -----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-829
>                 URL: http://issues.apache.org/jira/browse/HADOOP-829
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: datanodeserialize1.patch
>
>
> In the existing implementation, the Namenode has a data structure called DatanodeDescriptor. It is used to serialize contents of the Datanode while writing it to the fsimage. The same serialization method is used to send a Datanode object to the Datanode and/or the Client. This introduces the shortcoming that one cannot introduce non-persistent fields in the DatanodeDescriptor.
> One solution is to separate out the following two functionality into two separate classes:
> 1. The fields from a Datanode that are part of the ClientProtocol and/or DatanodeProcotol.
> 2. The fields from a Datanode that are stored in the fsImage.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 05:22:44 2006
Return-Path: 
 <hadoop-dev-return-6049-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94210 invoked from network); 15 Dec 2006 05:22:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 05:22:44 -0000
Received: (qmail 50802 invoked by uid 500); 15 Dec 2006 05:22:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50550 invoked by uid 500); 15 Dec 2006 05:22:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50513 invoked by uid 99); 15 Dec 2006 05:22:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 21:22:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5CEB17140F6
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 21:21:22 -0800 (PST)
Message-ID: <20024650.1166160082377.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 21:21:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-829) Separate the datanode contents that is
 written to the fsimage vs the contents used in over-the-wire communication
In-Reply-To: <20527997.1166159481071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-829?page=all ]

dhruba borthakur updated HADOOP-829:
------------------------------------

    Status: Patch Available  (was: Open)

This change separates out the three usage of Datanode information:

1. Information that is part of the ClientProtocol or DatanodeProtocol is part of DatanodeInfo.
2. Information that is local to the Namenode and need not be persisted across namenode restarts is in DatanodeDescriptor.
3. Information that is persisted across Namenode restarts is in DatanodeImage.

The initial idea of the refactoring was to enable new transient fields in the DatanodeDescriptor or DatanodeInfo that does not affect the fsimage. We have achieved it with this patch.

> Separate the datanode contents that is written to the fsimage vs the contents used in over-the-wire communication
> -----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-829
>                 URL: http://issues.apache.org/jira/browse/HADOOP-829
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: datanodeserialize1.patch
>
>
> In the existing implementation, the Namenode has a data structure called DatanodeDescriptor. It is used to serialize contents of the Datanode while writing it to the fsimage. The same serialization method is used to send a Datanode object to the Datanode and/or the Client. This introduces the shortcoming that one cannot introduce non-persistent fields in the DatanodeDescriptor.
> One solution is to separate out the following two functionality into two separate classes:
> 1. The fields from a Datanode that are part of the ClientProtocol and/or DatanodeProcotol.
> 2. The fields from a Datanode that are stored in the fsImage.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 05:42:46 2006
Return-Path: 
 <hadoop-dev-return-6050-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99206 invoked from network); 15 Dec 2006 05:42:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 05:42:46 -0000
Received: (qmail 74272 invoked by uid 500); 15 Dec 2006 05:42:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74246 invoked by uid 500); 15 Dec 2006 05:42:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74236 invoked by uid 99); 15 Dec 2006 05:42:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 21:42:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 21:42:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7E0407140D2
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 21:42:24 -0800 (PST)
Message-ID: <22408464.1166161344513.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 21:42:24 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12458679 ] 
            
dhruba borthakur commented on HADOOP-227:
-----------------------------------------

I agree that we can introduce a new Protocol called the SecondaryNamenodeProcotol. 

I would still persist with the proposal that the primary namenode is just a "slave" as far as periodic checkpointing is concerned. All the "intelligence" of when to create the checkpoint, how to create it, etc.etc remains with the SecondaryNamenode. In the case when we support multiple Secondary namenodes doing their own periodic checkpointing according to their own schedules, the primary Namenode would otherwise have to do lots of schedule management for each of these periodic-checkpointers.



> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: dhruba borthakur
>         Attachments: patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0
>
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 06:25:38 2006
Return-Path: 
 <hadoop-dev-return-6051-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7427 invoked from network); 15 Dec 2006 06:25:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 06:25:38 -0000
Received: (qmail 27231 invoked by uid 500); 15 Dec 2006 06:25:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27072 invoked by uid 500); 15 Dec 2006 06:25:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26485 invoked by uid 99); 15 Dec 2006 06:25:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 22:25:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 22:24:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6323671413F
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 22:24:25 -0800 (PST)
Message-ID: <31232973.1166163865403.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 22:24:25 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-803?page=comments#action_12458693 ] 
            
Raghu Angadi commented on HADOOP-803:
-------------------------------------


This patch does not. I was wondering about this. No where in the code do we check or enforce that lengths reported by datanodes are same. For e.g. when a file is closed all the blocks for the file use the length reported by first data node in that has that block. This patch does not change that behavior. Block length is rarely considered.


> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>         Attachments: block-refs-2.patch, block-refs-3.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 13:00:29 2006
Return-Path: 
 <hadoop-dev-return-6053-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5958 invoked from network); 15 Dec 2006 13:00:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 13:00:29 -0000
Received: (qmail 21949 invoked by uid 500); 15 Dec 2006 12:49:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21594 invoked by uid 500); 15 Dec 2006 12:48:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21174 invoked by uid 99); 15 Dec 2006 12:48:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 04:48:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 22:28:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6C67471413D
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 22:28:22 -0800 (PST)
Message-ID: <12136717.1166164102441.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 22:28:22 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-718) JobTracker history should link to
 failed task attemps for tasks that succeeded eventually.
In-Reply-To: <3519324.1163498317141.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-718?page=all ]

Sanjay Dahiya resolved HADOOP-718.
----------------------------------

    Resolution: Duplicate

I think fix for HADOOP-796 should take care of this. I doesnt clone the live WI in history but provides easy access to failed tasks. 

> JobTracker history should link to failed task attemps for tasks that succeeded eventually.
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-718
>                 URL: http://issues.apache.org/jira/browse/HADOOP-718
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> Jobtracker history should show a link to task attempts that failed but the task later succeeded. These could be killed speculative instances or actual task failures. currently if a task succeeds then job details page doesnt show those tasks as having failed attempts. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 12:56:21 2006
Return-Path: 
 <hadoop-dev-return-6052-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98872 invoked from network); 15 Dec 2006 12:56:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 12:56:21 -0000
Received: (qmail 90935 invoked by uid 500); 15 Dec 2006 12:45:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90076 invoked by uid 500); 15 Dec 2006 12:45:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89536 invoked by uid 99); 15 Dec 2006 12:45:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 04:45:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 22:32:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4FA3371413D
	for <hadoop-dev@lucene.apache.org>; Thu, 14 Dec 2006 22:32:22 -0800 (PST)
Message-ID: <27343507.1166164342323.JavaMail.jira@brutus>
Date: Thu, 14 Dec 2006 22:32:22 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-814) Increase dfs scalability by
 optimizing locking on namenode.
In-Reply-To: <7461200.1165900101047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-814?page=comments#action_12458696 ] 
            
Raghu Angadi commented on HADOOP-814:
-------------------------------------


Looks fine. Why do you assert on locking heartbeats instead of sychrnonizing on it?


> Increase dfs scalability by optimizing locking on namenode.
> -----------------------------------------------------------
>
>                 Key: HADOOP-814
>                 URL: http://issues.apache.org/jira/browse/HADOOP-814
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: heartbeatlock3.patch
>
>
> The current dfs namenode encounters locking bottlenecks when the number of datanodes is large. The namenode uses a single global lock to protect access to data structures. One key area is heartbeat processing. The lower the cost of processing a heartbeat, more the number of nodes HDFS can support.  A simple change to this current locking model can increase the scalability. Here are the details:
> Case 1: Currently we have three locks, the global lock (on FSNamesystem), the heartbeat lock and the datanodeMap lock. The following function is called when a heartbeat is received by the Namenode
> public synchronized FSNamesystem. gotHeartbeat() { ........ (A)
>     synchronized (heartbeat) {                                        ........ (B)
>       synchronized (datanodeMap) {                               ......... (C)
>    ...
>      }
> }
> In the above piece of code, statement (A) acquires the global-FSNamesystem-lock. This synchronization can be safely removed (remove updateStats too). This means that a heartbeat from the datanode can be processed without holding the FSnamesystem-global-lock.
> Case 2: A following thread called the heartbeatCheck thread periodically traverses all known Datanodes to determine if any of them has timed out. It is of the following form:
> void FSNamesystem.heartbeatCheck() {
>             synchronized (this) {                                        ........... (D)
>                         synchronized (heartbeats) {                .............(E) 
> }
> This thread acquires the global-FSNamesystem lock in Statement (D). This statement (D) can be removed. Instead the loop can check to see if any nodes are dead. If a dead node is found, only then it acquires the FSNamesystem-global-lock.
> It is possible that fixing the above two cases will cause HDFS to scale to higher number of nodes.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 13:03:17 2006
Return-Path: 
 <hadoop-dev-return-6054-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10907 invoked from network); 15 Dec 2006 13:03:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 13:03:17 -0000
Received: (qmail 41780 invoked by uid 500); 15 Dec 2006 12:51:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40454 invoked by uid 500); 15 Dec 2006 12:51:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39439 invoked by uid 99); 15 Dec 2006 12:51:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 04:51:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 00:53:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0FFBA7140F6
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 00:53:21 -0800 (PST)
Message-ID: <2309156.1166172801062.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 00:53:21 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-830) Improve the performance of the Merge
 phase
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Improve the performance of the Merge phase
------------------------------------------

                 Key: HADOOP-830
                 URL: http://issues.apache.org/jira/browse/HADOOP-830
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: Devaraj Das
         Assigned To: Devaraj Das


This issue is about trying to improve the performance of the merge phase (especially on the reduces). Currently, all the map outputs are copied to disk and then the merge phase starts (just to make a note - sorting happens on the maps).

The first optimization that I plan to implement is to do in-memory merging of the map outputs. There are two buffers maintained - 
1) a scratch buffer for writing map outputs (directly off the socket). This is a first-come-first-serve buffer (as opposed to strategies like best fit). The map output copier copies the map output off the socket and puts it here (assuming there is sufficient space in the buffer).
2) a merge buffer - when the scratch buffer cannot accomodate any more map output, the roles of the buffers are switched - that is, the scratch buffer becomes the merge buffer and the merge buffer becomes the scratch buffer. We avoid copying by doing this switch of roles. The copier threads can continue writing data from the socket buffer to the current scratch buffer (access to the scratch buffer is synchronized). 

Both the above buffers are of equal sizes configured to have default values of 100M.

Before switching roles, a check is done to see whether the merge buffer is in use (merge algorithm is working on the data there). We wait till the merge buffer is free. The hope is that while merging we are reading key/value data from an in-memory buffer and it will be really fast and so we won't see client timeouts on the server serving the map output. However, if they really timeout, the client sees an exception, and resubmits the request to the server.

With the above we are doing copying/merging in parallel.

The merge happens and then a spill to disk happens. At the end of the in-memory merge of all the map outputs, we will end up with ~100M files on disk that we will need to merge. Also, the in-memory merge gets triggered when the in-memory scratch buffer has been idle too long (like 30 secs), or, the number of outputs copied so far is equal to the number of maps in the job, whichever is earlier. We can proceed with the regular merge for these on-disk-files and maybe we can do some optimizations there too (haven't put much thought there).

If the map output can never be copied to the buffer (because the map output is let's say 200M), then that is directly spilled to disk.

To implement the above, I am planning to extend the FileSystem class to provide an InMemoryFileSystem class that will ease the integration of the in-memory scratch/merge with the existing APIs (like SequenceFile, MapOutputCopier) since all them work with the abstractions of FileSystem and Input/Output streams.

Comments?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 18:13:46 2006
Return-Path: 
 <hadoop-dev-return-6055-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35119 invoked from network); 15 Dec 2006 18:13:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 18:13:46 -0000
Received: (qmail 37502 invoked by uid 500); 15 Dec 2006 18:13:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37471 invoked by uid 500); 15 Dec 2006 18:13:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37462 invoked by uid 99); 15 Dec 2006 18:13:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 10:13:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 10:13:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3714371413F
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 10:13:24 -0800 (PST)
Message-ID: <27095808.1166206404223.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 10:13:24 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment: Hadoop-619_1.patch

Thanks owen for review. 
This patch includes review comments and removes hidden files in directory listing on jobtracker end while generating splits. 

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.10.0
>
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch, Hadoop-619_1.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 18:13:48 2006
Return-Path: 
 <hadoop-dev-return-6056-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35170 invoked from network); 15 Dec 2006 18:13:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 18:13:48 -0000
Received: (qmail 37781 invoked by uid 500); 15 Dec 2006 18:13:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37751 invoked by uid 500); 15 Dec 2006 18:13:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37742 invoked by uid 99); 15 Dec 2006 18:13:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 10:13:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 10:13:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2268E7140D2
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 10:13:27 -0800 (PST)
Message-ID: <24467715.1166206407138.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 10:13:27 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment:     (was: Hadoop-619_1.patch)

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.10.0
>
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch, Hadoop-619_1.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 18:23:45 2006
Return-Path: 
 <hadoop-dev-return-6057-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38930 invoked from network); 15 Dec 2006 18:23:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 18:23:45 -0000
Received: (qmail 54921 invoked by uid 500); 15 Dec 2006 18:23:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54683 invoked by uid 500); 15 Dec 2006 18:23:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54674 invoked by uid 99); 15 Dec 2006 18:23:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 10:23:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 10:23:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EB0637140D2
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 10:23:23 -0800 (PST)
Message-ID: <32900217.1166207003960.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 10:23:23 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment: Hadoop-619_2.patch

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.10.0
>
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch, Hadoop-619_1.patch, Hadoop-619_2.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 18:25:06 2006
Return-Path: 
 <hadoop-dev-return-6058-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39283 invoked from network); 15 Dec 2006 18:25:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 18:25:06 -0000
Received: (qmail 55597 invoked by uid 500); 15 Dec 2006 18:25:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55562 invoked by uid 500); 15 Dec 2006 18:25:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55553 invoked by uid 99); 15 Dec 2006 18:25:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 10:25:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [204.127.192.81] (HELO rwcrmhc11.comcast.net) (204.127.192.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 10:25:02 -0800
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc11) with ESMTP
          id <20061215182442m110057rfae>; Fri, 15 Dec 2006 18:24:42 +0000
Message-ID: <4582E869.6070703@apache.org>
Date: Fri, 15 Dec 2006 10:24:41 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.8 (X11/20061117)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: 0.9.2 release
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Barring objection, I will make a 0.9.2 release today containing:

https://issues.apache.org/jira/browse/HADOOP-639
https://issues.apache.org/jira/browse/HADOOP-827
https://issues.apache.org/jira/browse/HADOOP-791

Doug


From MAILER-DAEMON Fri Dec 15 18:28:46 2006
Return-Path: 
 <hadoop-dev-return-6059-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39847 invoked from network); 15 Dec 2006 18:28:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 18:28:46 -0000
Received: (qmail 60218 invoked by uid 500); 15 Dec 2006 18:28:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59972 invoked by uid 500); 15 Dec 2006 18:28:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59963 invoked by uid 99); 15 Dec 2006 18:28:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 10:28:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 10:28:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CBA7A7140D2
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 10:28:23 -0800 (PST)
Message-ID: <5428747.1166207303831.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 10:28:23 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Status: Patch Available  (was: Open)

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.10.0
>
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch, Hadoop-619_1.patch, Hadoop-619_2.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 18:34:44 2006
Return-Path: 
 <hadoop-dev-return-6060-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41682 invoked from network); 15 Dec 2006 18:34:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 18:34:44 -0000
Received: (qmail 77615 invoked by uid 500); 15 Dec 2006 18:34:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77588 invoked by uid 500); 15 Dec 2006 18:34:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77579 invoked by uid 99); 15 Dec 2006 18:34:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 10:34:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 10:34:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B3D7271413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 10:34:22 -0800 (PST)
Message-ID: <8643790.1166207662734.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 10:34:22 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-830) Improve the performance of the Merge
 phase
In-Reply-To: <2309156.1166172801062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-830?page=comments#action_12458875 ] 
            
Sameer Paranjpye commented on HADOOP-830:
-----------------------------------------

I'd be a little more conservative with large map outputs. The scratch and merge buffers add value when the map outputs are substantially smaller than the buffers. You should probably spill map outputs larger than 25% of buffer space or something similar.

> Improve the performance of the Merge phase
> ------------------------------------------
>
>                 Key: HADOOP-830
>                 URL: http://issues.apache.org/jira/browse/HADOOP-830
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>
> This issue is about trying to improve the performance of the merge phase (especially on the reduces). Currently, all the map outputs are copied to disk and then the merge phase starts (just to make a note - sorting happens on the maps).
> The first optimization that I plan to implement is to do in-memory merging of the map outputs. There are two buffers maintained - 
> 1) a scratch buffer for writing map outputs (directly off the socket). This is a first-come-first-serve buffer (as opposed to strategies like best fit). The map output copier copies the map output off the socket and puts it here (assuming there is sufficient space in the buffer).
> 2) a merge buffer - when the scratch buffer cannot accomodate any more map output, the roles of the buffers are switched - that is, the scratch buffer becomes the merge buffer and the merge buffer becomes the scratch buffer. We avoid copying by doing this switch of roles. The copier threads can continue writing data from the socket buffer to the current scratch buffer (access to the scratch buffer is synchronized). 
> Both the above buffers are of equal sizes configured to have default values of 100M.
> Before switching roles, a check is done to see whether the merge buffer is in use (merge algorithm is working on the data there). We wait till the merge buffer is free. The hope is that while merging we are reading key/value data from an in-memory buffer and it will be really fast and so we won't see client timeouts on the server serving the map output. However, if they really timeout, the client sees an exception, and resubmits the request to the server.
> With the above we are doing copying/merging in parallel.
> The merge happens and then a spill to disk happens. At the end of the in-memory merge of all the map outputs, we will end up with ~100M files on disk that we will need to merge. Also, the in-memory merge gets triggered when the in-memory scratch buffer has been idle too long (like 30 secs), or, the number of outputs copied so far is equal to the number of maps in the job, whichever is earlier. We can proceed with the regular merge for these on-disk-files and maybe we can do some optimizations there too (haven't put much thought there).
> If the map output can never be copied to the buffer (because the map output is let's say 200M), then that is directly spilled to disk.
> To implement the above, I am planning to extend the FileSystem class to provide an InMemoryFileSystem class that will ease the integration of the in-memory scratch/merge with the existing APIs (like SequenceFile, MapOutputCopier) since all them work with the abstractions of FileSystem and Input/Output streams.
> Comments?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 18:38:44 2006
Return-Path: 
 <hadoop-dev-return-6061-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42812 invoked from network); 15 Dec 2006 18:38:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 18:38:44 -0000
Received: (qmail 86686 invoked by uid 500); 15 Dec 2006 18:38:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86650 invoked by uid 500); 15 Dec 2006 18:38:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86641 invoked by uid 99); 15 Dec 2006 18:38:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 10:38:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 10:38:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 84BB771413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 10:38:22 -0800 (PST)
Message-ID: <5368472.1166207902540.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 10:38:22 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-814) Increase dfs scalability by
 optimizing locking on namenode.
In-Reply-To: <7461200.1165900101047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-814?page=comments#action_12458876 ] 
            
Raghu Angadi commented on HADOOP-814:
-------------------------------------

since totalLoad is an int. we don't need to lock while reading, right?

> Increase dfs scalability by optimizing locking on namenode.
> -----------------------------------------------------------
>
>                 Key: HADOOP-814
>                 URL: http://issues.apache.org/jira/browse/HADOOP-814
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: heartbeatlock3.patch
>
>
> The current dfs namenode encounters locking bottlenecks when the number of datanodes is large. The namenode uses a single global lock to protect access to data structures. One key area is heartbeat processing. The lower the cost of processing a heartbeat, more the number of nodes HDFS can support.  A simple change to this current locking model can increase the scalability. Here are the details:
> Case 1: Currently we have three locks, the global lock (on FSNamesystem), the heartbeat lock and the datanodeMap lock. The following function is called when a heartbeat is received by the Namenode
> public synchronized FSNamesystem. gotHeartbeat() { ........ (A)
>     synchronized (heartbeat) {                                        ........ (B)
>       synchronized (datanodeMap) {                               ......... (C)
>    ...
>      }
> }
> In the above piece of code, statement (A) acquires the global-FSNamesystem-lock. This synchronization can be safely removed (remove updateStats too). This means that a heartbeat from the datanode can be processed without holding the FSnamesystem-global-lock.
> Case 2: A following thread called the heartbeatCheck thread periodically traverses all known Datanodes to determine if any of them has timed out. It is of the following form:
> void FSNamesystem.heartbeatCheck() {
>             synchronized (this) {                                        ........... (D)
>                         synchronized (heartbeats) {                .............(E) 
> }
> This thread acquires the global-FSNamesystem lock in Statement (D). This statement (D) can be removed. Instead the loop can check to see if any nodes are dead. If a dead node is found, only then it acquires the FSNamesystem-global-lock.
> It is possible that fixing the above two cases will cause HDFS to scale to higher number of nodes.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 18:45:03 2006
Return-Path: 
 <hadoop-dev-return-6062-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44450 invoked from network); 15 Dec 2006 18:45:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 18:45:03 -0000
Received: (qmail 7066 invoked by uid 500); 15 Dec 2006 18:45:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7038 invoked by uid 500); 15 Dec 2006 18:45:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7018 invoked by uid 99); 15 Dec 2006 18:45:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 10:45:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 10:44:55 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7FCB6714168
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 10:44:22 -0800 (PST)
Message-ID: <33355611.1166208262520.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 10:44:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-814) Increase dfs scalability by
 optimizing locking on namenode.
In-Reply-To: <7461200.1165900101047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-814?page=comments#action_12458879 ] 
            
dhruba borthakur commented on HADOOP-814:
-----------------------------------------

I think it is still better and cleaner to lock while reading totalLoad. (instead of relying on hardware architecture). Also, the overhead of locking it should be very very miniscule.

> Increase dfs scalability by optimizing locking on namenode.
> -----------------------------------------------------------
>
>                 Key: HADOOP-814
>                 URL: http://issues.apache.org/jira/browse/HADOOP-814
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: heartbeatlock3.patch
>
>
> The current dfs namenode encounters locking bottlenecks when the number of datanodes is large. The namenode uses a single global lock to protect access to data structures. One key area is heartbeat processing. The lower the cost of processing a heartbeat, more the number of nodes HDFS can support.  A simple change to this current locking model can increase the scalability. Here are the details:
> Case 1: Currently we have three locks, the global lock (on FSNamesystem), the heartbeat lock and the datanodeMap lock. The following function is called when a heartbeat is received by the Namenode
> public synchronized FSNamesystem. gotHeartbeat() { ........ (A)
>     synchronized (heartbeat) {                                        ........ (B)
>       synchronized (datanodeMap) {                               ......... (C)
>    ...
>      }
> }
> In the above piece of code, statement (A) acquires the global-FSNamesystem-lock. This synchronization can be safely removed (remove updateStats too). This means that a heartbeat from the datanode can be processed without holding the FSnamesystem-global-lock.
> Case 2: A following thread called the heartbeatCheck thread periodically traverses all known Datanodes to determine if any of them has timed out. It is of the following form:
> void FSNamesystem.heartbeatCheck() {
>             synchronized (this) {                                        ........... (D)
>                         synchronized (heartbeats) {                .............(E) 
> }
> This thread acquires the global-FSNamesystem lock in Statement (D). This statement (D) can be removed. Instead the loop can check to see if any nodes are dead. If a dead node is found, only then it acquires the FSNamesystem-global-lock.
> It is possible that fixing the above two cases will cause HDFS to scale to higher number of nodes.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 19:02:51 2006
Return-Path: 
 <hadoop-dev-return-6063-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48955 invoked from network); 15 Dec 2006 19:02:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 19:02:51 -0000
Received: (qmail 43458 invoked by uid 500); 15 Dec 2006 19:02:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43274 invoked by uid 500); 15 Dec 2006 19:02:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43215 invoked by uid 99); 15 Dec 2006 19:02:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 11:02:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 11:02:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DF10F71413F
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 11:02:23 -0800 (PST)
Message-ID: <25610964.1166209343910.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 11:02:23 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-814) Increase dfs scalability by
 optimizing locking on namenode.
In-Reply-To: <7461200.1165900101047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-814?page=comments#action_12458885 ] 
            
Raghu Angadi commented on HADOOP-814:
-------------------------------------

locking overhead wont be much. Since heartbeat lock is also one of the 'hot' locks, most of the time it might wait for current heartbeat processing to complete.



> Increase dfs scalability by optimizing locking on namenode.
> -----------------------------------------------------------
>
>                 Key: HADOOP-814
>                 URL: http://issues.apache.org/jira/browse/HADOOP-814
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: heartbeatlock3.patch
>
>
> The current dfs namenode encounters locking bottlenecks when the number of datanodes is large. The namenode uses a single global lock to protect access to data structures. One key area is heartbeat processing. The lower the cost of processing a heartbeat, more the number of nodes HDFS can support.  A simple change to this current locking model can increase the scalability. Here are the details:
> Case 1: Currently we have three locks, the global lock (on FSNamesystem), the heartbeat lock and the datanodeMap lock. The following function is called when a heartbeat is received by the Namenode
> public synchronized FSNamesystem. gotHeartbeat() { ........ (A)
>     synchronized (heartbeat) {                                        ........ (B)
>       synchronized (datanodeMap) {                               ......... (C)
>    ...
>      }
> }
> In the above piece of code, statement (A) acquires the global-FSNamesystem-lock. This synchronization can be safely removed (remove updateStats too). This means that a heartbeat from the datanode can be processed without holding the FSnamesystem-global-lock.
> Case 2: A following thread called the heartbeatCheck thread periodically traverses all known Datanodes to determine if any of them has timed out. It is of the following form:
> void FSNamesystem.heartbeatCheck() {
>             synchronized (this) {                                        ........... (D)
>                         synchronized (heartbeats) {                .............(E) 
> }
> This thread acquires the global-FSNamesystem lock in Statement (D). This statement (D) can be removed. Instead the loop can check to see if any nodes are dead. If a dead node is found, only then it acquires the FSNamesystem-global-lock.
> It is possible that fixing the above two cases will cause HDFS to scale to higher number of nodes.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 19:07:10 2006
Return-Path: 
 <hadoop-dev-return-6064-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50390 invoked from network); 15 Dec 2006 19:07:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 19:07:10 -0000
Received: (qmail 58672 invoked by uid 500); 15 Dec 2006 19:07:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58641 invoked by uid 500); 15 Dec 2006 19:07:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58632 invoked by uid 99); 15 Dec 2006 19:07:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 11:07:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 11:07:08 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A2C5B7140D2
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 11:06:24 -0800 (PST)
Message-ID: <24524051.1166209584663.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 11:06:24 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12458886 ] 
            
dhruba borthakur commented on HADOOP-227:
-----------------------------------------

An addition to the above proposal. There will be an additional parameter named dfs.namenode.secondary.configfile that contains the absolute pathname of the "masters" file.

The namenode will allow SecondaryNamenodeProcotol connections only from nodes listed in the "masters' file. Also, the webUI can query the namenode to list the identities of the Secondary Namenodes.

> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: dhruba borthakur
>         Attachments: patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0
>
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 19:38:57 2006
Return-Path: 
 <hadoop-dev-return-6068-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58311 invoked from network); 15 Dec 2006 19:38:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 19:38:57 -0000
Received: (qmail 9076 invoked by uid 500); 15 Dec 2006 19:39:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9038 invoked by uid 500); 15 Dec 2006 19:39:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8966 invoked by uid 99); 15 Dec 2006 19:39:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 11:39:01 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AD1237141C0
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 11:19:22 -0800 (PST)
Message-ID: <13471363.1166210362705.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 11:19:22 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-596) TaskTracker taskstatus's phase doesnt
 get updated on phase transition causing wrong values displayed in WI
In-Reply-To: <31153390.1160570599642.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-596?page=all ]

Sanjay Dahiya updated HADOOP-596:
---------------------------------

    Attachment: Hadoop-596.patch

Patch Attached. 

> TaskTracker taskstatus's phase doesnt get updated on phase transition causing wrong values displayed in WI
> ----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-596
>                 URL: http://issues.apache.org/jira/browse/HADOOP-596
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-596.patch
>
>
> On task phase transition from shuffle > sort > reduce, the new phase doesnt get updated in task tracker's cached TaskStatus  causing wrong values displayed in WI. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 19:38:55 2006
Return-Path: 
 <hadoop-dev-return-6067-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58267 invoked from network); 15 Dec 2006 19:38:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 19:38:55 -0000
Received: (qmail 9024 invoked by uid 500); 15 Dec 2006 19:39:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8877 invoked by uid 500); 15 Dec 2006 19:39:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8868 invoked by uid 99); 15 Dec 2006 19:39:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 11:39:00 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 210237141A3
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 11:19:24 -0800 (PST)
Message-ID: <3340571.1166210364132.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 11:19:24 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-596) TaskTracker taskstatus's phase doesnt
 get updated on phase transition causing wrong values displayed in WI
In-Reply-To: <31153390.1160570599642.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-596?page=all ]

Sanjay Dahiya updated HADOOP-596:
---------------------------------

    Status: Patch Available  (was: Open)

> TaskTracker taskstatus's phase doesnt get updated on phase transition causing wrong values displayed in WI
> ----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-596
>                 URL: http://issues.apache.org/jira/browse/HADOOP-596
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-596.patch
>
>
> On task phase transition from shuffle > sort > reduce, the new phase doesnt get updated in task tracker's cached TaskStatus  causing wrong values displayed in WI. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 19:32:36 2006
Return-Path: 
 <hadoop-dev-return-6065-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56491 invoked from network); 15 Dec 2006 19:32:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 19:32:36 -0000
Received: (qmail 97268 invoked by uid 500); 15 Dec 2006 19:32:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97230 invoked by uid 500); 15 Dec 2006 19:32:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97221 invoked by uid 99); 15 Dec 2006 19:32:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 11:32:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 23BA17142D8
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 11:31:21 -0800 (PST)
Message-ID: <6476975.1166211081143.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 11:31:21 -0800 (PST)
From: "Koji Noguchi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-831) A command for locking the JobTracker
 to stop receiving new job requests.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

A command for locking the JobTracker to stop receiving new job requests.
------------------------------------------------------------------------

                 Key: HADOOP-831
                 URL: http://issues.apache.org/jira/browse/HADOOP-831
             Project: Hadoop
          Issue Type: New Feature
          Components: mapred
            Reporter: Koji Noguchi
            Priority: Minor


When I want to restart or upgrade the JobTracker, it'll be useful to have a feature to lock the JobTracker so that it won't accept any more jobs.  This way, I can wait for the current running jobs to finish and then safely restart the MR cluster.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 19:34:54 2006
Return-Path: 
 <hadoop-dev-return-6066-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57168 invoked from network); 15 Dec 2006 19:34:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 19:34:54 -0000
Received: (qmail 5087 invoked by uid 500); 15 Dec 2006 19:35:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5061 invoked by uid 500); 15 Dec 2006 19:35:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5052 invoked by uid 99); 15 Dec 2006 19:34:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 11:34:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3DBA47142E1
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 11:33:23 -0800 (PST)
Message-ID: <20214738.1166211203249.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 11:33:23 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-832) Streaming has its own methods to
 monitor jobs. It should use the jobclient methods to monitor the jobs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Streaming has its own methods to monitor jobs. It should use the jobclient methods to monitor the jobs
------------------------------------------------------------------------------------------------------

                 Key: HADOOP-832
                 URL: http://issues.apache.org/jira/browse/HADOOP-832
             Project: Hadoop
          Issue Type: Improvement
          Components: contrib/streaming
            Reporter: Mahadev konar
         Assigned To: Mahadev konar
            Priority: Minor


The job monitor methods in streaming has duplicated code. It should use the jobclient methods with retries.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 19:49:46 2006
Return-Path: 
 <hadoop-dev-return-6069-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60559 invoked from network); 15 Dec 2006 19:49:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 19:49:46 -0000
Received: (qmail 26318 invoked by uid 500); 15 Dec 2006 19:49:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26289 invoked by uid 500); 15 Dec 2006 19:49:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26277 invoked by uid 99); 15 Dec 2006 19:49:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 11:49:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 11:49:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D06CD7140D2
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 11:49:24 -0800 (PST)
Message-ID: <17638425.1166212164741.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 11:49:24 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12458905 ] 
            
Konstantin Shvachko commented on HADOOP-227:
--------------------------------------------

My idea of supporting multiple secondary nodes was that the primary node always deals with ONE secondary node, which in turn
becomes the "primary" node for next secondary node, and so on. The order of the nodes is defined by how the secondary nodes
are listed in the config file. That way each name-node need to know and speak to only one secondary, which substantially
simplifies the logic. The primary decides when the new check point should be created and initiates the chain of checkpoints.
I think we want to avoid heartbeat processing from secondary nodes and minimize inter-name-node communication traffic.

I'd prefer to have all configuration in config file rather than configurable paths to other files, containing edditional configuration parameters.
Don't like the last proposal linking "masters" in the config. This will make configration even more complicated.

> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: dhruba borthakur
>         Attachments: patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0
>
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 19:53:48 2006
Return-Path: 
 <hadoop-dev-return-6070-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62007 invoked from network); 15 Dec 2006 19:53:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 19:53:48 -0000
Received: (qmail 33573 invoked by uid 500); 15 Dec 2006 19:53:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33553 invoked by uid 500); 15 Dec 2006 19:53:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33515 invoked by uid 99); 15 Dec 2006 19:53:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 11:53:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 11:53:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 15545714168
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 11:53:24 -0800 (PST)
Message-ID: <8012961.1166212404084.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 11:53:24 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-829) Separate the datanode contents that
 is written to the fsimage vs the contents used in over-the-wire
 communication
In-Reply-To: <20527997.1166159481071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-829?page=comments#action_12458907 ] 
            
Hadoop QA commented on HADOOP-829:
----------------------------------

-1, because the patch command could not apply the latest attachment (http://issues.apache.org/jira/secure/attachment/12347237/datanodeserialize1.patch) as a patch to trunk revision r486901. Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.

> Separate the datanode contents that is written to the fsimage vs the contents used in over-the-wire communication
> -----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-829
>                 URL: http://issues.apache.org/jira/browse/HADOOP-829
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: datanodeserialize1.patch
>
>
> In the existing implementation, the Namenode has a data structure called DatanodeDescriptor. It is used to serialize contents of the Datanode while writing it to the fsimage. The same serialization method is used to send a Datanode object to the Datanode and/or the Client. This introduces the shortcoming that one cannot introduce non-persistent fields in the DatanodeDescriptor.
> One solution is to separate out the following two functionality into two separate classes:
> 1. The fields from a Datanode that are part of the ClientProtocol and/or DatanodeProcotol.
> 2. The fields from a Datanode that are stored in the fsImage.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 19:59:44 2006
Return-Path: 
 <hadoop-dev-return-6071-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64061 invoked from network); 15 Dec 2006 19:59:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 19:59:44 -0000
Received: (qmail 45119 invoked by uid 500); 15 Dec 2006 19:59:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44882 invoked by uid 500); 15 Dec 2006 19:59:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44873 invoked by uid 99); 15 Dec 2006 19:59:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 11:59:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 11:59:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 53DF971413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 11:59:22 -0800 (PST)
Message-ID: <25533891.1166212762341.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 11:59:22 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-814) Increase dfs scalability by
 optimizing locking on namenode.
In-Reply-To: <7461200.1165900101047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-814?page=comments#action_12458908 ] 
            
Hairong Kuang commented on HADOOP-814:
--------------------------------------

+1 on locking while reading totalLoad. Otherwise an inconsistent value may be read while totalLoad is still being accumulated.

> Increase dfs scalability by optimizing locking on namenode.
> -----------------------------------------------------------
>
>                 Key: HADOOP-814
>                 URL: http://issues.apache.org/jira/browse/HADOOP-814
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: heartbeatlock3.patch
>
>
> The current dfs namenode encounters locking bottlenecks when the number of datanodes is large. The namenode uses a single global lock to protect access to data structures. One key area is heartbeat processing. The lower the cost of processing a heartbeat, more the number of nodes HDFS can support.  A simple change to this current locking model can increase the scalability. Here are the details:
> Case 1: Currently we have three locks, the global lock (on FSNamesystem), the heartbeat lock and the datanodeMap lock. The following function is called when a heartbeat is received by the Namenode
> public synchronized FSNamesystem. gotHeartbeat() { ........ (A)
>     synchronized (heartbeat) {                                        ........ (B)
>       synchronized (datanodeMap) {                               ......... (C)
>    ...
>      }
> }
> In the above piece of code, statement (A) acquires the global-FSNamesystem-lock. This synchronization can be safely removed (remove updateStats too). This means that a heartbeat from the datanode can be processed without holding the FSnamesystem-global-lock.
> Case 2: A following thread called the heartbeatCheck thread periodically traverses all known Datanodes to determine if any of them has timed out. It is of the following form:
> void FSNamesystem.heartbeatCheck() {
>             synchronized (this) {                                        ........... (D)
>                         synchronized (heartbeats) {                .............(E) 
> }
> This thread acquires the global-FSNamesystem lock in Statement (D). This statement (D) can be removed. Instead the loop can check to see if any nodes are dead. If a dead node is found, only then it acquires the FSNamesystem-global-lock.
> It is possible that fixing the above two cases will cause HDFS to scale to higher number of nodes.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 20:09:52 2006
Return-Path: 
 <hadoop-dev-return-6072-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66311 invoked from network); 15 Dec 2006 20:09:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 20:09:52 -0000
Received: (qmail 59976 invoked by uid 500); 15 Dec 2006 20:09:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59953 invoked by uid 500); 15 Dec 2006 20:09:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59920 invoked by uid 99); 15 Dec 2006 20:09:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:09:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:09:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5512871413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 12:09:22 -0800 (PST)
Message-ID: <32850007.1166213362345.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 12:09:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-596) TaskTracker taskstatus's phase
 doesnt get updated on phase transition causing wrong values displayed in WI
In-Reply-To: <31153390.1160570599642.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-596?page=comments#action_12458909 ] 
            
Hadoop QA commented on HADOOP-596:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347309/Hadoop-596.patch applied and successfully tested against trunk revision r486901.

> TaskTracker taskstatus's phase doesnt get updated on phase transition causing wrong values displayed in WI
> ----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-596
>                 URL: http://issues.apache.org/jira/browse/HADOOP-596
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-596.patch
>
>
> On task phase transition from shuffle > sort > reduce, the new phase doesnt get updated in task tracker's cached TaskStatus  causing wrong values displayed in WI. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 20:15:43 2006
Return-Path: 
 <hadoop-dev-return-6073-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67758 invoked from network); 15 Dec 2006 20:15:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 20:15:43 -0000
Received: (qmail 67496 invoked by uid 500); 15 Dec 2006 20:15:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67248 invoked by uid 500); 15 Dec 2006 20:15:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67239 invoked by uid 99); 15 Dec 2006 20:15:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:15:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:15:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 578D671413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 12:15:22 -0800 (PST)
Message-ID: <28011830.1166213722355.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 12:15:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-829) Separate the datanode contents that
 is written to the fsimage vs the contents used in over-the-wire
 communication
In-Reply-To: <20527997.1166159481071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-829?page=comments#action_12458910 ] 
            
Hadoop QA commented on HADOOP-829:
----------------------------------

-1, because the patch command could not apply the latest attachment (http://issues.apache.org/jira/secure/attachment/12347237/datanodeserialize1.patch</a>) as a patch to trunk revision r486901. Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.) as a patch to trunk revision r486901. Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.

> Separate the datanode contents that is written to the fsimage vs the contents used in over-the-wire communication
> -----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-829
>                 URL: http://issues.apache.org/jira/browse/HADOOP-829
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: datanodeserialize1.patch
>
>
> In the existing implementation, the Namenode has a data structure called DatanodeDescriptor. It is used to serialize contents of the Datanode while writing it to the fsimage. The same serialization method is used to send a Datanode object to the Datanode and/or the Client. This introduces the shortcoming that one cannot introduce non-persistent fields in the DatanodeDescriptor.
> One solution is to separate out the following two functionality into two separate classes:
> 1. The fields from a Datanode that are part of the ClientProtocol and/or DatanodeProcotol.
> 2. The fields from a Datanode that are stored in the fsImage.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 20:17:46 2006
Return-Path: 
 <hadoop-dev-return-6074-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68049 invoked from network); 15 Dec 2006 20:17:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 20:17:46 -0000
Received: (qmail 68900 invoked by uid 500); 15 Dec 2006 20:17:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68869 invoked by uid 500); 15 Dec 2006 20:17:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68859 invoked by uid 99); 15 Dec 2006 20:17:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:17:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:17:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0E8C571413F
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 12:17:25 -0800 (PST)
Message-ID: <24946836.1166213845057.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 12:17:25 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-811) Patch to support multi-threaded
 MapRunnable
In-Reply-To: <15932768.1165852041100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-811?page=all ]

Doug Cutting reassigned HADOOP-811:
-----------------------------------

    Assignee: Doug Cutting

> Patch to support multi-threaded MapRunnable
> -------------------------------------------
>
>                 Key: HADOOP-811
>                 URL: http://issues.apache.org/jira/browse/HADOOP-811
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.10.0
>         Environment: all
>            Reporter: Alejandro Abdelnur
>         Assigned To: Doug Cutting
>         Attachments: diff.txt, diff.txt, MultithreadedMapRunner.java, MultithreadedMapRunner.java
>
>
> The MapRunner calls Mapper.map in a serialized fashion.
> This is suitable for CPU/memory bound operations.
> However, when doing IO bound operations this serialization affects the throughput significantly.
> In order to support IO bound operations more efficiently I've implemented a multithreaded MapRunnable.
> Following is the implementation of this MapRunnable, MultithreadedMapRunner.
> I've only had to modify on method in the existing code (in the Task class) to avoid data corruption in the reporter.
> Index: Task.java
> ===================================================================
> --- Task.java   (revision 485492)
> +++ Task.java   (working copy)
> @@ -153,9 +153,11 @@
>    public Reporter getReporter(final TaskUmbilicalProtocol umbilical,
>                                final Progress progress) throws IOException {
>      return new Reporter() {
> -        public void setStatus(String status) throws IOException {
> -          progress.setStatus(status);
> -          progress();
> +        public void setStatus(String status) throws IOException {
> +          synchronized (this) {
> +            progress.setStatus(status);
> +            progress();
> +          }
>          }
>          public void progress() throws IOException {
>              reportProgress(umbilical);
> -----------------------------------------------------------
> MultithreadedMapRunner.java
> package org.apache.hadoop.mapred;
> import org.apache.hadoop.util.ReflectionUtils;
> import org.apache.hadoop.io.WritableComparable;
> import org.apache.hadoop.io.Writable;
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
> import java.io.IOException;
> import java.util.concurrent.ExecutorService;
> import java.util.concurrent.Executors;
> import java.util.concurrent.TimeUnit;
> /**
>  * Multithreaded implementation for @link org.apache.hadoop.mapred.MapRunnable.
>  * <p>
>  * It can be used instead of the default implementation,
>  * @link org.apache.hadoop.mapred.MapRunner, when the Map operation is not CPU
>  * bound in order to improve throughput.
>  * <p>
>  * Map implementations using this MapRunnable must be thread-safe.
>  * <p>
>  * The Map-Reduce job has to be configured to use this MapRunnable class (using
>  * the <b>mapred.map.runner.class</b> property) and
>  * the number of thread the thread-pool can use (using the
>  * <b>mapred.map.multithreadedrunner.threads</b> property).
>  * <p>
>  *
>  * @author Alejandro Abdelnur
>  */
> public class MultithreadedMapRunner implements MapRunnable {
>   private static final Log LOG =
>       LogFactory.getLog(MultithreadedMapRunner.class.getName());
>   private JobConf job;
>   private Mapper mapper;
>   private ExecutorService executorService;
>   private IOException ioException;
>   public void configure(JobConf job) {
>     int numberOfThreads =
>         job.getInt("mapred.map.multithreadedrunner.threads", 10);
>     if (LOG.isDebugEnabled()) {
>       LOG.debug("Configuring job " + job.getJobName() +
>           " to use " + numberOfThreads + " threads" );
>     }
>     this.job = job;
>     this.mapper = (Mapper)ReflectionUtils.newInstance(job.getMapperClass(),
>                                                       job);
>     // Creating a threadpool of the configured size to execute the Mapper
>     // map method in parallel.
>     executorService = Executors.newFixedThreadPool(numberOfThreads);
>   }
>   public void run(RecordReader input, OutputCollector output,
>                   Reporter reporter)
>     throws IOException {
>     try {
>       // allocate key & value instances these objects will not be reused
>       // because execution of Mapper.map is not serialized.
>       WritableComparable key = input.createKey();
>       Writable value = input.createValue();
>       while (input.next(key, value)) {
>         // Run Mapper.map execution asynchronously in a separate thread.
>         // If threads are not available from the thread-pool this method
>         // will block until there is a thread available.
>         executorService.execute(
>             new MTMapperRunable(key, value, output, reporter));
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         if (ioException != null) {
>           throw ioException;
>         }
>         // Allocate new key & value instances as mapper is running in parallel
>         key = input.createKey();
>         value = input.createValue();
>       }
>       if (LOG.isDebugEnabled()) {
>         LOG.debug("Finished dispatching all Mappper.map calls, job "
>             + job.getJobName());
>       }
>       // Graceful shutdown of the Threadpool, it will let all scheduled
>       // Runnables to end.
>       executorService.shutdown();
>       try {
>         // Now waiting for all Runnables to end.
>         while (!executorService.awaitTermination(100, TimeUnit.MILLISECONDS)) {
>           if (LOG.isDebugEnabled()) {
>             LOG.debug("Awaiting all running Mappper.map calls to finish, job "
>                 + job.getJobName());
>           }
>           // Checking if a Mapper.map within a Runnable has generated an
>           // IOException. If so we rethrow it to force an abort of the Map
>           // operation thus keeping the semantics of the default
>           // implementation.
>           // NOTE: while Mapper.map dispatching has concluded there are still
>           // map calls in progress.
>           if (ioException != null) {
>             throw ioException;
>           }
>         }
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         // NOTE: it could be that a map call has had an exception after the
>         // call for awaitTermination() returing true. And edge case but it
>         // could happen.
>         if (ioException != null) {
>           throw ioException;
>         }
>       }
>       catch (IOException ioEx) {
>         // Forcing a shutdown of all thread of the threadpool and rethrowing
>         // the IOException
>         executorService.shutdownNow();
>         throw ioEx;
>       }
>       catch (InterruptedException iEx) {
>         throw new IOException(iEx.getMessage());
>       }
>     } finally {
>         mapper.close();
>     }
>   }
>   /**
>    * Runnable to execute a single Mapper.map call from a forked thread.
>    */
>   private class MTMapperRunable implements Runnable {
>     private WritableComparable key;
>     private Writable value;
>     private OutputCollector output;
>     private Reporter reporter;
>     /**
>      * Collecting all required parameters to execute a Mapper.map call.
>      * <p>
>      *
>      * @param key
>      * @param value
>      * @param output
>      * @param reporter
>      */
>     public MTMapperRunable(WritableComparable key, Writable value,
>         OutputCollector output, Reporter reporter) {
>       this.key = key;
>       this.value = value;
>       this.output = output;
>       this.reporter = reporter;
>     }
>     /**
>      * Executes a Mapper.map call with the given Mapper and parameters.
>      * <p>
>      * This method is called from the thread-pool thread.
>      *
>      */
>     public void run() {
>       try {
>         // map pair to output
>         MultithreadedMapRunner.this.mapper.map(key, value, output, reporter);
>       }
>       catch (IOException ex) {
>         // If there is an IOException during the call it is set in an instance
>         // variable of the MultithreadedMapRunner from where it will be
>         // rethrown.
>         synchronized (MultithreadedMapRunner.this) {
>           if (MultithreadedMapRunner.this.ioException == null) {
>             MultithreadedMapRunner.this.ioException = ex;
>           }
>         }
>       }
>     }
>   }
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 20:17:49 2006
Return-Path: 
 <hadoop-dev-return-6075-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68096 invoked from network); 15 Dec 2006 20:17:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 20:17:49 -0000
Received: (qmail 69457 invoked by uid 500); 15 Dec 2006 20:17:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69173 invoked by uid 500); 15 Dec 2006 20:17:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69163 invoked by uid 99); 15 Dec 2006 20:17:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:17:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:17:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 50325714168
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 12:17:27 -0800 (PST)
Message-ID: <27869626.1166213847326.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 12:17:27 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-811) Patch to support multi-threaded
 MapRunnable
In-Reply-To: <15932768.1165852041100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-811?page=all ]

Doug Cutting updated HADOOP-811:
--------------------------------

    Status: Patch Available  (was: In Progress)

> Patch to support multi-threaded MapRunnable
> -------------------------------------------
>
>                 Key: HADOOP-811
>                 URL: http://issues.apache.org/jira/browse/HADOOP-811
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.10.0
>         Environment: all
>            Reporter: Alejandro Abdelnur
>         Assigned To: Doug Cutting
>         Attachments: diff.txt, diff.txt, MultithreadedMapRunner.java, MultithreadedMapRunner.java
>
>
> The MapRunner calls Mapper.map in a serialized fashion.
> This is suitable for CPU/memory bound operations.
> However, when doing IO bound operations this serialization affects the throughput significantly.
> In order to support IO bound operations more efficiently I've implemented a multithreaded MapRunnable.
> Following is the implementation of this MapRunnable, MultithreadedMapRunner.
> I've only had to modify on method in the existing code (in the Task class) to avoid data corruption in the reporter.
> Index: Task.java
> ===================================================================
> --- Task.java   (revision 485492)
> +++ Task.java   (working copy)
> @@ -153,9 +153,11 @@
>    public Reporter getReporter(final TaskUmbilicalProtocol umbilical,
>                                final Progress progress) throws IOException {
>      return new Reporter() {
> -        public void setStatus(String status) throws IOException {
> -          progress.setStatus(status);
> -          progress();
> +        public void setStatus(String status) throws IOException {
> +          synchronized (this) {
> +            progress.setStatus(status);
> +            progress();
> +          }
>          }
>          public void progress() throws IOException {
>              reportProgress(umbilical);
> -----------------------------------------------------------
> MultithreadedMapRunner.java
> package org.apache.hadoop.mapred;
> import org.apache.hadoop.util.ReflectionUtils;
> import org.apache.hadoop.io.WritableComparable;
> import org.apache.hadoop.io.Writable;
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
> import java.io.IOException;
> import java.util.concurrent.ExecutorService;
> import java.util.concurrent.Executors;
> import java.util.concurrent.TimeUnit;
> /**
>  * Multithreaded implementation for @link org.apache.hadoop.mapred.MapRunnable.
>  * <p>
>  * It can be used instead of the default implementation,
>  * @link org.apache.hadoop.mapred.MapRunner, when the Map operation is not CPU
>  * bound in order to improve throughput.
>  * <p>
>  * Map implementations using this MapRunnable must be thread-safe.
>  * <p>
>  * The Map-Reduce job has to be configured to use this MapRunnable class (using
>  * the <b>mapred.map.runner.class</b> property) and
>  * the number of thread the thread-pool can use (using the
>  * <b>mapred.map.multithreadedrunner.threads</b> property).
>  * <p>
>  *
>  * @author Alejandro Abdelnur
>  */
> public class MultithreadedMapRunner implements MapRunnable {
>   private static final Log LOG =
>       LogFactory.getLog(MultithreadedMapRunner.class.getName());
>   private JobConf job;
>   private Mapper mapper;
>   private ExecutorService executorService;
>   private IOException ioException;
>   public void configure(JobConf job) {
>     int numberOfThreads =
>         job.getInt("mapred.map.multithreadedrunner.threads", 10);
>     if (LOG.isDebugEnabled()) {
>       LOG.debug("Configuring job " + job.getJobName() +
>           " to use " + numberOfThreads + " threads" );
>     }
>     this.job = job;
>     this.mapper = (Mapper)ReflectionUtils.newInstance(job.getMapperClass(),
>                                                       job);
>     // Creating a threadpool of the configured size to execute the Mapper
>     // map method in parallel.
>     executorService = Executors.newFixedThreadPool(numberOfThreads);
>   }
>   public void run(RecordReader input, OutputCollector output,
>                   Reporter reporter)
>     throws IOException {
>     try {
>       // allocate key & value instances these objects will not be reused
>       // because execution of Mapper.map is not serialized.
>       WritableComparable key = input.createKey();
>       Writable value = input.createValue();
>       while (input.next(key, value)) {
>         // Run Mapper.map execution asynchronously in a separate thread.
>         // If threads are not available from the thread-pool this method
>         // will block until there is a thread available.
>         executorService.execute(
>             new MTMapperRunable(key, value, output, reporter));
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         if (ioException != null) {
>           throw ioException;
>         }
>         // Allocate new key & value instances as mapper is running in parallel
>         key = input.createKey();
>         value = input.createValue();
>       }
>       if (LOG.isDebugEnabled()) {
>         LOG.debug("Finished dispatching all Mappper.map calls, job "
>             + job.getJobName());
>       }
>       // Graceful shutdown of the Threadpool, it will let all scheduled
>       // Runnables to end.
>       executorService.shutdown();
>       try {
>         // Now waiting for all Runnables to end.
>         while (!executorService.awaitTermination(100, TimeUnit.MILLISECONDS)) {
>           if (LOG.isDebugEnabled()) {
>             LOG.debug("Awaiting all running Mappper.map calls to finish, job "
>                 + job.getJobName());
>           }
>           // Checking if a Mapper.map within a Runnable has generated an
>           // IOException. If so we rethrow it to force an abort of the Map
>           // operation thus keeping the semantics of the default
>           // implementation.
>           // NOTE: while Mapper.map dispatching has concluded there are still
>           // map calls in progress.
>           if (ioException != null) {
>             throw ioException;
>           }
>         }
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         // NOTE: it could be that a map call has had an exception after the
>         // call for awaitTermination() returing true. And edge case but it
>         // could happen.
>         if (ioException != null) {
>           throw ioException;
>         }
>       }
>       catch (IOException ioEx) {
>         // Forcing a shutdown of all thread of the threadpool and rethrowing
>         // the IOException
>         executorService.shutdownNow();
>         throw ioEx;
>       }
>       catch (InterruptedException iEx) {
>         throw new IOException(iEx.getMessage());
>       }
>     } finally {
>         mapper.close();
>     }
>   }
>   /**
>    * Runnable to execute a single Mapper.map call from a forked thread.
>    */
>   private class MTMapperRunable implements Runnable {
>     private WritableComparable key;
>     private Writable value;
>     private OutputCollector output;
>     private Reporter reporter;
>     /**
>      * Collecting all required parameters to execute a Mapper.map call.
>      * <p>
>      *
>      * @param key
>      * @param value
>      * @param output
>      * @param reporter
>      */
>     public MTMapperRunable(WritableComparable key, Writable value,
>         OutputCollector output, Reporter reporter) {
>       this.key = key;
>       this.value = value;
>       this.output = output;
>       this.reporter = reporter;
>     }
>     /**
>      * Executes a Mapper.map call with the given Mapper and parameters.
>      * <p>
>      * This method is called from the thread-pool thread.
>      *
>      */
>     public void run() {
>       try {
>         // map pair to output
>         MultithreadedMapRunner.this.mapper.map(key, value, output, reporter);
>       }
>       catch (IOException ex) {
>         // If there is an IOException during the call it is set in an instance
>         // variable of the MultithreadedMapRunner from where it will be
>         // rethrown.
>         synchronized (MultithreadedMapRunner.this) {
>           if (MultithreadedMapRunner.this.ioException == null) {
>             MultithreadedMapRunner.this.ioException = ex;
>           }
>         }
>       }
>     }
>   }
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 20:27:45 2006
Return-Path: 
 <hadoop-dev-return-6076-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75903 invoked from network); 15 Dec 2006 20:27:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 20:27:45 -0000
Received: (qmail 76421 invoked by uid 500); 15 Dec 2006 20:27:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76397 invoked by uid 500); 15 Dec 2006 20:27:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76386 invoked by uid 99); 15 Dec 2006 20:27:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:27:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:27:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DFCD67140D2
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 12:27:23 -0800 (PST)
Message-ID: <7908785.1166214443914.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 12:27:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12458914 ] 
            
Hadoop QA commented on HADOOP-619:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347303/Hadoop-619_2.patch applied and successfully tested against trunk revision r486901.

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.10.0
>
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch, Hadoop-619_1.patch, Hadoop-619_2.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 20:27:47 2006
Return-Path: 
 <hadoop-dev-return-6077-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75969 invoked from network); 15 Dec 2006 20:27:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 20:27:47 -0000
Received: (qmail 76862 invoked by uid 500); 15 Dec 2006 20:27:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76823 invoked by uid 500); 15 Dec 2006 20:27:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76814 invoked by uid 99); 15 Dec 2006 20:27:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:27:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:27:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 107B6714167
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 12:27:26 -0800 (PST)
Message-ID: <9755813.1166214446064.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 12:27:26 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-804) Cut down on the "mumbling" in the
 Task process' stdout/stderr
In-Reply-To: <5020745.1165539381298.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-804?page=comments#action_12458915 ] 
            
Doug Cutting commented on HADOOP-804:
-------------------------------------

I don't think we should change the default log level, but rather change most of these to be DEBUG level.  I think the understanding is that INFO and above messages will normally be logged.  WARN and above are candidates for special handling--i.e, also reported and/or counted centrally, but we should not generally quash INFO log messages.

> Cut down on the "mumbling" in the Task process' stdout/stderr
> -------------------------------------------------------------
>
>                 Key: HADOOP-804
>                 URL: http://issues.apache.org/jira/browse/HADOOP-804
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.10.0
>
>
> Currently there is a lot of useless mumbling that Tasks do when running that needs to be removed. For example, here is a list of the output from a map:
> 06/12/07 16:45:48 INFO mapred.TaskTracker: Child starting
> 06/12/07 16:45:48 INFO conf.Configuration: parsing jar:file:/local/owen/hadoop-0.8.1-dev/hadoop-0.8.1-dev.jar!/hadoop-default.xml
> 06/12/07 16:45:48 INFO conf.Configuration: parsing file:/local/owen/conf/mapred-default.xml
> 06/12/07 16:45:48 INFO ipc.Client: org.apache.hadoop.io.ObjectWritableConnection culler maxidletime= 1000ms
> 06/12/07 16:45:48 INFO ipc.Client: org.apache.hadoop.io.ObjectWritable Connection Culler: starting
> 06/12/07 16:45:48 INFO conf.Configuration: parsing jar:file:/local/owen/hadoop-0.8.1-dev/hadoop-0.8.1-dev.jar!/hadoop-default.xml
> 06/12/07 16:45:48 INFO conf.Configuration: parsing file:/local/owen/conf/mapred-default.xml
> 06/12/07 16:45:48 INFO conf.Configuration: parsing /local/owen/run/tasktracker/taskTracker/jobcache/job_0002/task_0002_m_000000_0/job.xml
> 06/12/07 16:45:49 INFO conf.Configuration: parsing jar:file:/local/owen/hadoop-0.8.1-dev/hadoop-0.8.1-dev.jar!/hadoop-default.xml
> 06/12/07 16:45:49 INFO conf.Configuration: parsing file:/local/owen/conf/mapred-default.xml
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-0.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-1.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-2.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-3.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-4.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-5.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-6.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-7.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-8.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-9.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-10.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-11.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-12.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-13.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-14.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-15.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-16.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-17.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-18.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-19.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-20.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-21.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-22.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-23.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-24.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-25.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-26.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-27.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-28.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-29.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-30.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-31.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-32.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-33.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-34.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-35.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-36.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-37.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-38.out
> 06/12/07 16:45:49 INFO mapred.MapTask: opened part-39.out
> Furthermore, it seems like the default logging level for Task subprocesses should be set to WARN.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 20:49:48 2006
Return-Path: 
 <hadoop-dev-return-6078-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81637 invoked from network); 15 Dec 2006 20:49:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 20:49:48 -0000
Received: (qmail 12831 invoked by uid 500); 15 Dec 2006 20:49:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12713 invoked by uid 500); 15 Dec 2006 20:49:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12691 invoked by uid 99); 15 Dec 2006 20:49:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:49:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:49:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EA2E4714167
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 12:49:23 -0800 (PST)
Message-ID: <190235.1166215763956.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 12:49:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-829) Separate the datanode contents that is
 written to the fsimage vs the contents used in over-the-wire communication
In-Reply-To: <20527997.1166159481071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-829?page=all ]

dhruba borthakur updated HADOOP-829:
------------------------------------

    Attachment:     (was: datanodeserialize1.patch)

> Separate the datanode contents that is written to the fsimage vs the contents used in over-the-wire communication
> -----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-829
>                 URL: http://issues.apache.org/jira/browse/HADOOP-829
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: datanodeserialize1.patch
>
>
> In the existing implementation, the Namenode has a data structure called DatanodeDescriptor. It is used to serialize contents of the Datanode while writing it to the fsimage. The same serialization method is used to send a Datanode object to the Datanode and/or the Client. This introduces the shortcoming that one cannot introduce non-persistent fields in the DatanodeDescriptor.
> One solution is to separate out the following two functionality into two separate classes:
> 1. The fields from a Datanode that are part of the ClientProtocol and/or DatanodeProcotol.
> 2. The fields from a Datanode that are stored in the fsImage.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 20:49:50 2006
Return-Path: 
 <hadoop-dev-return-6079-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81701 invoked from network); 15 Dec 2006 20:49:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 20:49:50 -0000
Received: (qmail 13304 invoked by uid 500); 15 Dec 2006 20:49:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13272 invoked by uid 500); 15 Dec 2006 20:49:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13251 invoked by uid 99); 15 Dec 2006 20:49:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:49:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:49:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CB7407141A2
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 12:49:27 -0800 (PST)
Message-ID: <14726004.1166215767831.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 12:49:27 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-829) Separate the datanode contents that is
 written to the fsimage vs the contents used in over-the-wire communication
In-Reply-To: <20527997.1166159481071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-829?page=all ]

dhruba borthakur updated HADOOP-829:
------------------------------------

    Attachment: datanodeserialize1.patch

the previous path file was bad because it did not have full path names.

> Separate the datanode contents that is written to the fsimage vs the contents used in over-the-wire communication
> -----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-829
>                 URL: http://issues.apache.org/jira/browse/HADOOP-829
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: datanodeserialize1.patch
>
>
> In the existing implementation, the Namenode has a data structure called DatanodeDescriptor. It is used to serialize contents of the Datanode while writing it to the fsimage. The same serialization method is used to send a Datanode object to the Datanode and/or the Client. This introduces the shortcoming that one cannot introduce non-persistent fields in the DatanodeDescriptor.
> One solution is to separate out the following two functionality into two separate classes:
> 1. The fields from a Datanode that are part of the ClientProtocol and/or DatanodeProcotol.
> 2. The fields from a Datanode that are stored in the fsImage.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 20:51:43 2006
Return-Path: 
 <hadoop-dev-return-6080-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82256 invoked from network); 15 Dec 2006 20:51:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 20:51:43 -0000
Received: (qmail 15269 invoked by uid 500); 15 Dec 2006 20:51:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15088 invoked by uid 500); 15 Dec 2006 20:51:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15079 invoked by uid 99); 15 Dec 2006 20:51:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:51:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:51:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5A52171413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 12:51:22 -0800 (PST)
Message-ID: <4204997.1166215882367.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 12:51:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-573) Checksum error during sorting in
 reducer
In-Reply-To: <30516684.1159852339589.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-573?page=all ]

Doug Cutting updated HADOOP-573:
--------------------------------

    Component/s: mapred
    Description: 
Many reduce tasks got killed due to checksum error. The strange thing is that the file was generated by the sort function, and was on a local disk. Here is the stack: 

Checksum error:  ../task_0011_r_000140_0/all.2.1 at 5342920704
	at org.apache.hadoop.fs.FSDataInputStream$Checker.verifySum(FSDataInputStream.java:134)
	at org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:110)
	at org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:170)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
	at java.io.DataInputStream.readFully(DataInputStream.java:176)
	at org.apache.hadoop.io.DataOutputBuffer$Buffer.write(DataOutputBuffer.java:55)
	at org.apache.hadoop.io.DataOutputBuffer.write(DataOutputBuffer.java:89)
	at org.apache.hadoop.io.SequenceFile$Reader.readBuffer(SequenceFile.java:1061)
	at org.apache.hadoop.io.SequenceFile$Reader.seekToCurrentValue(SequenceFile.java:1126)
	at org.apache.hadoop.io.SequenceFile$Reader.nextRaw(SequenceFile.java:1354)
	at org.apache.hadoop.io.SequenceFile$Sorter$MergeStream.next(SequenceFile.java:1880)
	at org.apache.hadoop.io.SequenceFile$Sorter$MergeQueue.merge(SequenceFile.java:1938)
	at org.apache.hadoop.io.SequenceFile$Sorter$MergePass.run(SequenceFile.java:1802)
	at org.apache.hadoop.io.SequenceFile$Sorter.mergePass(SequenceFile.java:1749)
	at org.apache.hadoop.io.SequenceFile$Sorter.sort(SequenceFile.java:1494)
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:240)
	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066)


  was:

Many reduce tasks got killed due to checksum error. The strange thing is that the file was generated by the sort function, and was on a local disk. Here is the stack: 

Checksum error:  ../task_0011_r_000140_0/all.2.1 at 5342920704
	at org.apache.hadoop.fs.FSDataInputStream$Checker.verifySum(FSDataInputStream.java:134)
	at org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:110)
	at org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:170)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
	at java.io.DataInputStream.readFully(DataInputStream.java:176)
	at org.apache.hadoop.io.DataOutputBuffer$Buffer.write(DataOutputBuffer.java:55)
	at org.apache.hadoop.io.DataOutputBuffer.write(DataOutputBuffer.java:89)
	at org.apache.hadoop.io.SequenceFile$Reader.readBuffer(SequenceFile.java:1061)
	at org.apache.hadoop.io.SequenceFile$Reader.seekToCurrentValue(SequenceFile.java:1126)
	at org.apache.hadoop.io.SequenceFile$Reader.nextRaw(SequenceFile.java:1354)
	at org.apache.hadoop.io.SequenceFile$Sorter$MergeStream.next(SequenceFile.java:1880)
	at org.apache.hadoop.io.SequenceFile$Sorter$MergeQueue.merge(SequenceFile.java:1938)
	at org.apache.hadoop.io.SequenceFile$Sorter$MergePass.run(SequenceFile.java:1802)
	at org.apache.hadoop.io.SequenceFile$Sorter.mergePass(SequenceFile.java:1749)
	at org.apache.hadoop.io.SequenceFile$Sorter.sort(SequenceFile.java:1494)
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:240)
	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066)



> Checksum error during sorting in reducer
> ----------------------------------------
>
>                 Key: HADOOP-573
>                 URL: http://issues.apache.org/jira/browse/HADOOP-573
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Runping Qi
>
> Many reduce tasks got killed due to checksum error. The strange thing is that the file was generated by the sort function, and was on a local disk. Here is the stack: 
> Checksum error:  ../task_0011_r_000140_0/all.2.1 at 5342920704
> 	at org.apache.hadoop.fs.FSDataInputStream$Checker.verifySum(FSDataInputStream.java:134)
> 	at org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:110)
> 	at org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:170)
> 	at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
> 	at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
> 	at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
> 	at java.io.DataInputStream.readFully(DataInputStream.java:176)
> 	at org.apache.hadoop.io.DataOutputBuffer$Buffer.write(DataOutputBuffer.java:55)
> 	at org.apache.hadoop.io.DataOutputBuffer.write(DataOutputBuffer.java:89)
> 	at org.apache.hadoop.io.SequenceFile$Reader.readBuffer(SequenceFile.java:1061)
> 	at org.apache.hadoop.io.SequenceFile$Reader.seekToCurrentValue(SequenceFile.java:1126)
> 	at org.apache.hadoop.io.SequenceFile$Reader.nextRaw(SequenceFile.java:1354)
> 	at org.apache.hadoop.io.SequenceFile$Sorter$MergeStream.next(SequenceFile.java:1880)
> 	at org.apache.hadoop.io.SequenceFile$Sorter$MergeQueue.merge(SequenceFile.java:1938)
> 	at org.apache.hadoop.io.SequenceFile$Sorter$MergePass.run(SequenceFile.java:1802)
> 	at org.apache.hadoop.io.SequenceFile$Sorter.mergePass(SequenceFile.java:1749)
> 	at org.apache.hadoop.io.SequenceFile$Sorter.sort(SequenceFile.java:1494)
> 	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:240)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 20:59:44 2006
Return-Path: 
 <hadoop-dev-return-6081-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84777 invoked from network); 15 Dec 2006 20:59:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 20:59:44 -0000
Received: (qmail 28991 invoked by uid 500); 15 Dec 2006 20:59:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28965 invoked by uid 500); 15 Dec 2006 20:59:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28956 invoked by uid 99); 15 Dec 2006 20:59:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:59:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 12:59:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 66CCC71413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 12:59:22 -0800 (PST)
Message-ID: <25850077.1166216362418.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 12:59:22 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-817) Streaming reducers throw OutOfMemory
 for not so large inputs
In-Reply-To: <30192547.1165933587180.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-817?page=comments#action_12458930 ] 
            
Sanjay Dahiya commented on HADOOP-817:
--------------------------------------

tracked it down to MergeQueue.merge(), after a couple of iterations of that loop it runs out of memory. 

> Streaming reducers throw OutOfMemory for not so large inputs
> ------------------------------------------------------------
>
>                 Key: HADOOP-817
>                 URL: http://issues.apache.org/jira/browse/HADOOP-817
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: Sanjay Dahiya
>
> I am seeing OutOfMemoryError for moderate size inputs (~70 text files, 20k each ) causing job to fail in streaming. For very small inputs it still succeeds. Looking into details. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 21:01:45 2006
Return-Path: 
 <hadoop-dev-return-6082-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85147 invoked from network); 15 Dec 2006 21:01:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 21:01:45 -0000
Received: (qmail 31810 invoked by uid 500); 15 Dec 2006 21:01:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31785 invoked by uid 500); 15 Dec 2006 21:01:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31776 invoked by uid 99); 15 Dec 2006 21:01:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 13:01:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 13:01:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD6CA71413F
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 13:01:23 -0800 (PST)
Message-ID: <26622758.1166216483838.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 13:01:23 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-814) Increase dfs scalability by
 optimizing locking on namenode.
In-Reply-To: <7461200.1165900101047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-814?page=comments#action_12458931 ] 
            
Raghu Angadi commented on HADOOP-814:
-------------------------------------

totalLoad is 'updated' as opposed to accumulated. ie, for every heartbeat, its value is increased or decreased a little bit. Actually chooseTarget() might wait for more than one heartbeats to finish sometimes. Only reason I think it matters is that it is in chooseTarget(), otherwise it does not matter. Anyway, I don't have any more arguments in favor of not locking.


> Increase dfs scalability by optimizing locking on namenode.
> -----------------------------------------------------------
>
>                 Key: HADOOP-814
>                 URL: http://issues.apache.org/jira/browse/HADOOP-814
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: heartbeatlock3.patch
>
>
> The current dfs namenode encounters locking bottlenecks when the number of datanodes is large. The namenode uses a single global lock to protect access to data structures. One key area is heartbeat processing. The lower the cost of processing a heartbeat, more the number of nodes HDFS can support.  A simple change to this current locking model can increase the scalability. Here are the details:
> Case 1: Currently we have three locks, the global lock (on FSNamesystem), the heartbeat lock and the datanodeMap lock. The following function is called when a heartbeat is received by the Namenode
> public synchronized FSNamesystem. gotHeartbeat() { ........ (A)
>     synchronized (heartbeat) {                                        ........ (B)
>       synchronized (datanodeMap) {                               ......... (C)
>    ...
>      }
> }
> In the above piece of code, statement (A) acquires the global-FSNamesystem-lock. This synchronization can be safely removed (remove updateStats too). This means that a heartbeat from the datanode can be processed without holding the FSnamesystem-global-lock.
> Case 2: A following thread called the heartbeatCheck thread periodically traverses all known Datanodes to determine if any of them has timed out. It is of the following form:
> void FSNamesystem.heartbeatCheck() {
>             synchronized (this) {                                        ........... (D)
>                         synchronized (heartbeats) {                .............(E) 
> }
> This thread acquires the global-FSNamesystem lock in Statement (D). This statement (D) can be removed. Instead the loop can check to see if any nodes are dead. If a dead node is found, only then it acquires the FSNamesystem-global-lock.
> It is possible that fixing the above two cases will cause HDFS to scale to higher number of nodes.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 21:11:48 2006
Return-Path: 
 <hadoop-dev-return-6083-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87950 invoked from network); 15 Dec 2006 21:11:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 21:11:48 -0000
Received: (qmail 46534 invoked by uid 500); 15 Dec 2006 21:11:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46513 invoked by uid 500); 15 Dec 2006 21:11:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46484 invoked by uid 99); 15 Dec 2006 21:11:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 13:11:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 13:11:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 962377141A2
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 13:11:25 -0800 (PST)
Message-ID: <21261749.1166217085612.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 13:11:25 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-745) NameNode throws
 FileNotFoundException: Parent path does not exist on startup
In-Reply-To: <9757325.1164238741994.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-745?page=comments#action_12458936 ] 
            
Konstantin Shvachko commented on HADOOP-745:
--------------------------------------------

The name-node should fall into safe mode when a log edit transaction fails, and
wait until the administrator fixes the problem and turns safe mode off. 

> NameNode throws FileNotFoundException: Parent path does not exist on startup
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-745
>                 URL: http://issues.apache.org/jira/browse/HADOOP-745
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>
> (with credit to Christian)
> The following exception is reported by the namenode upon startup:
> 2006-11-22 12:18:17,713 ERROR org.apache.hadoop.dfs.NameNode:
> java.io.FileNotFoundException: Parent path does not exist: /foo/bar
>         at org.apache.hadoop.dfs.FSDirectory$INode.addNode(FSDirectory.java:186)
>         at org.apache.hadoop.dfs.FSDirectory.unprotectedMkdir(FSDirectory.java:731)
>         at org.apache.hadoop.dfs.FSEditLog.loadFSEdits(FSEditLog.java:254)
>         at org.apache.hadoop.dfs.FSImage.loadFSImage(FSImage.java:191)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:321)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:230)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:145)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:137)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:585)
> Perhaps the 'mkdirs' section
>                INode inserted = unprotectedMkdir(cur);
>                if (inserted != null) {
>                    NameNode.stateChangeLog.debug("DIR* FSDirectory.mkdirs: "
>                         +"created directory "+cur );
>                    fsImage.getEditLog().logMkDir( inserted );
> needs to be synchronized or the unprotectedMkdir method needs to be changed
> to allow creating missing parent directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 21:13:43 2006
Return-Path: 
 <hadoop-dev-return-6084-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88597 invoked from network); 15 Dec 2006 21:13:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 21:13:43 -0000
Received: (qmail 49412 invoked by uid 500); 15 Dec 2006 21:13:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49163 invoked by uid 500); 15 Dec 2006 21:13:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49154 invoked by uid 99); 15 Dec 2006 21:13:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 13:13:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 13:13:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7692071413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 13:13:22 -0800 (PST)
Message-ID: <34674.1166217202483.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 13:13:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-829) Separate the datanode contents that
 is written to the fsimage vs the contents used in over-the-wire
 communication
In-Reply-To: <20527997.1166159481071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-829?page=comments#action_12458937 ] 
            
Hadoop QA commented on HADOOP-829:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347320/datanodeserialize1.patch applied and successfully tested against trunk revision r486901.

> Separate the datanode contents that is written to the fsimage vs the contents used in over-the-wire communication
> -----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-829
>                 URL: http://issues.apache.org/jira/browse/HADOOP-829
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: datanodeserialize1.patch
>
>
> In the existing implementation, the Namenode has a data structure called DatanodeDescriptor. It is used to serialize contents of the Datanode while writing it to the fsimage. The same serialization method is used to send a Datanode object to the Datanode and/or the Client. This introduces the shortcoming that one cannot introduce non-persistent fields in the DatanodeDescriptor.
> One solution is to separate out the following two functionality into two separate classes:
> 1. The fields from a Datanode that are part of the ClientProtocol and/or DatanodeProcotol.
> 2. The fields from a Datanode that are stored in the fsImage.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 21:33:44 2006
Return-Path: 
 <hadoop-dev-return-6085-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96922 invoked from network); 15 Dec 2006 21:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 21:33:44 -0000
Received: (qmail 90910 invoked by uid 500); 15 Dec 2006 21:33:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90886 invoked by uid 500); 15 Dec 2006 21:33:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90874 invoked by uid 99); 15 Dec 2006 21:33:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 13:33:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 13:33:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5C77F71413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 13:33:22 -0800 (PST)
Message-ID: <30662588.1166218402375.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 13:33:22 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-803?page=comments#action_12458944 ] 
            
Konstantin Shvachko commented on HADOOP-803:
--------------------------------------------

Different replicas having different lengths should be detected by check sums.
Your patch should update length imo, since before it was updated with every block report.
If an append occurs the file length should change.

> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Attachments: block-refs-2.patch, block-refs-3.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 21:48:44 2006
Return-Path: 
 <hadoop-dev-return-6086-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 515 invoked from network); 15 Dec 2006 21:48:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 21:48:44 -0000
Received: (qmail 10718 invoked by uid 500); 15 Dec 2006 21:48:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10481 invoked by uid 500); 15 Dec 2006 21:48:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10472 invoked by uid 99); 15 Dec 2006 21:48:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 13:48:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 13:48:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 030DD71413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 13:48:23 -0800 (PST)
Message-ID: <17178327.1166219303009.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 13:48:23 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-803?page=comments#action_12458950 ] 
            
Raghu Angadi commented on HADOOP-803:
-------------------------------------


Ok, so the length reported in the latest block report is the correct length. I will attach a new patch with this change.


> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Sameer Paranjpye
>         Attachments: block-refs-2.patch, block-refs-3.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 21:59:43 2006
Return-Path: 
 <hadoop-dev-return-6087-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2582 invoked from network); 15 Dec 2006 21:59:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 21:59:43 -0000
Received: (qmail 19994 invoked by uid 500); 15 Dec 2006 21:59:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19754 invoked by uid 500); 15 Dec 2006 21:59:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19744 invoked by uid 99); 15 Dec 2006 21:59:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 13:59:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 13:59:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 47CF571413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 13:59:22 -0800 (PST)
Message-ID: <23435582.1166219962291.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 13:59:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-828) Need a tool to analyse and verify file
 block movements
In-Reply-To: <751537.1166145441073.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-828?page=all ]

Doug Cutting updated HADOOP-828:
--------------------------------

    Component/s: dfs
                     (was: util)

> Need a tool to analyse and verify file block movements
> ------------------------------------------------------
>
>                 Key: HADOOP-828
>                 URL: http://issues.apache.org/jira/browse/HADOOP-828
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.9.1
>            Reporter: Nigel Daley
>         Attachments: Block-Movement-Analysis-Tool-Design.html
>
>
> Occasionally a file is corrupted because a block goes missing. This may occur if all the Datanodes containing a given block shutdown or crash, or from defects in the Datanode or Namenode code-base.  A simple diagnostic tool is needed that can trace and analyze the historical movement of the blocks in a given file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 22:01:43 2006
Return-Path: 
 <hadoop-dev-return-6088-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2923 invoked from network); 15 Dec 2006 22:01:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 22:01:43 -0000
Received: (qmail 20964 invoked by uid 500); 15 Dec 2006 22:01:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20940 invoked by uid 500); 15 Dec 2006 22:01:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20931 invoked by uid 99); 15 Dec 2006 22:01:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:01:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:01:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 508E771413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 14:01:22 -0800 (PST)
Message-ID: <17836752.1166220082327.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 14:01:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-231) DFSShell Improvement wish list
In-Reply-To: <19513987.1147981445911.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-231?page=all ]

Doug Cutting updated HADOOP-231:
--------------------------------

    Component/s: dfs
                     (was: util)

> DFSShell Improvement wish list
> ------------------------------
>
>                 Key: HADOOP-231
>                 URL: http://issues.apache.org/jira/browse/HADOOP-231
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.3.0
>            Reporter: Konstantin Shvachko
>
> This is to discuss general DFSShell improvements, standardization, conventions, etc.
> Here are links to assorted ideas on this issue from previous issues.
> We need to generalize them at some point.
> HADOOP-59
> HADOOP-226
> HADOOP-222#action_12412326
> HADOOP-230

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 22:10:43 2006
Return-Path: 
 <hadoop-dev-return-6089-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4588 invoked from network); 15 Dec 2006 22:10:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 22:10:43 -0000
Received: (qmail 32957 invoked by uid 500); 15 Dec 2006 22:10:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32934 invoked by uid 500); 15 Dec 2006 22:10:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32925 invoked by uid 99); 15 Dec 2006 22:10:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:10:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:10:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5093A71413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 14:10:22 -0800 (PST)
Message-ID: <871720.1166220622327.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 14:10:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-827) turn off speculative execution by
 default
In-Reply-To: <13634761.1166132721087.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-827?page=all ]

Doug Cutting updated HADOOP-827:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen.

> turn off speculative execution by default
> -----------------------------------------
>
>                 Key: HADOOP-827
>                 URL: http://issues.apache.org/jira/browse/HADOOP-827
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.9.2
>
>         Attachments: no-spec.patch
>
>
> Currently, speculative execution reduces reliability. I want to turn it off by default until it works well.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 22:14:43 2006
Return-Path: 
 <hadoop-dev-return-6090-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6151 invoked from network); 15 Dec 2006 22:14:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 22:14:43 -0000
Received: (qmail 41553 invoked by uid 500); 15 Dec 2006 22:14:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41452 invoked by uid 500); 15 Dec 2006 22:14:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41443 invoked by uid 99); 15 Dec 2006 22:14:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:14:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:14:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4C42E71413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 14:14:22 -0800 (PST)
Message-ID: <23963381.1166220862309.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 14:14:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-791) deadlock issue in taskstracker.
In-Reply-To: <2727015.1165466301505.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-791?page=all ]

Doug Cutting updated HADOOP-791:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Mahadev!

> deadlock issue in taskstracker.
> -------------------------------
>
>                 Key: HADOOP-791
>                 URL: http://issues.apache.org/jira/browse/HADOOP-791
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>             Fix For: 0.9.2
>
>         Attachments: deadlock2.patch
>
>
> the stack trace--
> "main":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.createStatus(TaskTracker.java:880)
>         - waiting to lock <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker.transmitHeartBeat(TaskTracker.java:489)
>         - locked <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker.offerService(TaskTracker.java:442)
>         at org.apache.hadoop.mapred.TaskTracker.run(TaskTracker.java:720)
>         at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:1374)
> "taskCleanup":
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.cleanup(TaskTracker.java:1072)
>         - waiting to lock <0x75505f00> (a org.apache.hadoop.mapred.TaskTracker)
>         at org.apache.hadoop.mapred.TaskTracker$TaskInProgress.jobHasFinished(TaskTracker.java:1013)
>         - locked <0xea101658> (a org.apache.hadoop.mapred.TaskTracker$TaskInProgress)
>         at org.apache.hadoop.mapred.TaskTracker$1.run(TaskTracker.java:144)
>         at java.lang.Thread.run(Thread.java:595)
> Found 1 deadlock.
> The jobhasfinished method and transmitHeart beat lock the tasktracker and tip in a different order. Also , before emitting HeartBeat we should be updating the status and removing entries from runningtasks. Currently this is done after the heartbeat.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 22:20:44 2006
Return-Path: 
 <hadoop-dev-return-6091-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7188 invoked from network); 15 Dec 2006 22:20:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 22:20:44 -0000
Received: (qmail 52470 invoked by uid 500); 15 Dec 2006 22:20:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52442 invoked by uid 500); 15 Dec 2006 22:20:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52433 invoked by uid 99); 15 Dec 2006 22:20:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:20:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:20:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1B3DE71413F
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 14:20:23 -0800 (PST)
Message-ID: <9562020.1166221223109.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 14:20:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-371) ant tar should package contrib jars
In-Reply-To: <22441907.1153248734143.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-371?page=all ]

Owen O'Malley reassigned HADOOP-371:
------------------------------------

    Assignee: Nigel Daley

> ant tar should package contrib jars
> -----------------------------------
>
>                 Key: HADOOP-371
>                 URL: http://issues.apache.org/jira/browse/HADOOP-371
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Michel Tourn
>         Assigned To: Nigel Daley
>         Attachments: build.tarcontrib.patch, contribbuild.patch
>
>
> From Hadoop-356:
> >I note that the contrib packages are not included in distributions (the "tar" target).  
> >They probably should be.  Michel, would you like to modify "tar" to include the contrib code?  
> >This should be done in a separate bug.
> OK.
> This packaging is done in target deploy-contrib.
> So I can just add a dependency to the top-level tar target:
> <!-- Make release tarball(s)                                               -->
> <target name="tar" depends="package, deploy-contrib">

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 22:24:44 2006
Return-Path: 
 <hadoop-dev-return-6092-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8004 invoked from network); 15 Dec 2006 22:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 22:24:44 -0000
Received: (qmail 58573 invoked by uid 500); 15 Dec 2006 22:24:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58543 invoked by uid 500); 15 Dec 2006 22:24:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58534 invoked by uid 99); 15 Dec 2006 22:24:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:24:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:24:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0865271413F
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 14:24:23 -0800 (PST)
Message-ID: <3691136.1166221463031.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 14:24:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-371) ant tar should package contrib jars
In-Reply-To: <22441907.1153248734143.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-371?page=all ]

Owen O'Malley updated HADOOP-371:
---------------------------------

    Component/s: build

> ant tar should package contrib jars
> -----------------------------------
>
>                 Key: HADOOP-371
>                 URL: http://issues.apache.org/jira/browse/HADOOP-371
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: build
>            Reporter: Michel Tourn
>         Assigned To: Nigel Daley
>         Attachments: build.tarcontrib.patch, contribbuild.patch
>
>
> From Hadoop-356:
> >I note that the contrib packages are not included in distributions (the "tar" target).  
> >They probably should be.  Michel, would you like to modify "tar" to include the contrib code?  
> >This should be done in a separate bug.
> OK.
> This packaging is done in target deploy-contrib.
> So I can just add a dependency to the top-level tar target:
> <!-- Make release tarball(s)                                               -->
> <target name="tar" depends="package, deploy-contrib">

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 22:28:44 2006
Return-Path: 
 <hadoop-dev-return-6093-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8528 invoked from network); 15 Dec 2006 22:28:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 22:28:44 -0000
Received: (qmail 64995 invoked by uid 500); 15 Dec 2006 22:28:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64972 invoked by uid 500); 15 Dec 2006 22:28:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64963 invoked by uid 99); 15 Dec 2006 22:28:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:28:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:28:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1997571413F
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 14:28:23 -0800 (PST)
Message-ID: <30749094.1166221703102.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 14:28:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-61) Bashless Hadoop Start Script
In-Reply-To: <2063972274.1141151262026.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-61?page=all ]

Owen O'Malley updated HADOOP-61:
--------------------------------

    Component/s: scripts
       Assignee: Doug Cutting

> Bashless Hadoop Start Script
> ----------------------------
>
>                 Key: HADOOP-61
>                 URL: http://issues.apache.org/jira/browse/HADOOP-61
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: scripts
>         Environment: Java Class emulating the /bin/hadoop Bash Script
>            Reporter: Jeff Ritchie
>         Assigned To: Doug Cutting
>            Priority: Minor
>         Attachments: hadoop.java, hadoop.xml
>
>
> This is for the people who want to try to get hadoop running without cygwin.  The code needs some work and could be improved.
> Attachment to follow.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 22:30:44 2006
Return-Path: 
 <hadoop-dev-return-6094-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8751 invoked from network); 15 Dec 2006 22:30:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 22:30:44 -0000
Received: (qmail 65810 invoked by uid 500); 15 Dec 2006 22:30:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65771 invoked by uid 500); 15 Dec 2006 22:30:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65759 invoked by uid 99); 15 Dec 2006 22:30:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:30:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:30:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3261671413F
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 14:30:23 -0800 (PST)
Message-ID: <26293175.1166221823203.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 14:30:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-717) When there are few reducers, sorting
 should be done by mappers
In-Reply-To: <23965121.1163486977160.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-717?page=all ]

Owen O'Malley resolved HADOOP-717.
----------------------------------

    Fix Version/s: 0.10.0
       Resolution: Fixed

This was fixed by HADOOP-331.

> When there are few reducers, sorting should be done by mappers
> --------------------------------------------------------------
>
>                 Key: HADOOP-717
>                 URL: http://issues.apache.org/jira/browse/HADOOP-717
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: arkady borkovsky
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>
> If I understand correctly, currently, sort happens on the reducer side.
> So if few hundred mappers produce few (or many) Gig of data, and there is just ONE reduce to consume it, copying and sorting takes forever.
> It may make sense to have a special case optimization for a single reducer.  (E.g. "when there is only reducer and many mappers, sort is done by the mappers, and reducer does only a merge")
> Or to have some smarter policy that makes sure that sorting uses as many CPUs as it makes sense.   If  the map step has produced data on all the nodes of the cluster, it makes sense to use all the nodes for sorting.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 22:32:45 2006
Return-Path: 
 <hadoop-dev-return-6095-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10198 invoked from network); 15 Dec 2006 22:32:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 22:32:45 -0000
Received: (qmail 76576 invoked by uid 500); 15 Dec 2006 22:32:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76531 invoked by uid 500); 15 Dec 2006 22:32:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76515 invoked by uid 99); 15 Dec 2006 22:32:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:32:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:32:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C12187140D2
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 14:32:23 -0800 (PST)
Message-ID: <8408740.1166221943788.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 14:32:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-735) The underlying data structure,
 ByteArrayOutputStream,  for buffer type of Jute record is inappropriate
In-Reply-To: <11740819.1163807977086.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-735?page=all ]

Owen O'Malley updated HADOOP-735:
---------------------------------

          Component/s: record
                           (was: io)
          Description: 
With ByteArrayOutputStream as the underlying data structure for a buffer, the user is forced to convert it into a byte [] object in order to do any operations other than sequence append on the buffer. The convertion will create a new copy of bytes. That will cause huge performance problem. 

It seems BytesWritable is a better replacement.


  was:

With ByteArrayOutputStream as the underlying data structure for a buffer, the user is forced to convert it into a byte [] object in order to do any operations other than sequence append on the buffer. The convertion will create a new copy of bytes. That will cause huge performance problem. 

It seems BytesWritable is a better replacement.


    Affects Version/s: 0.9.2
             Assignee: Milind Bhandarkar  (was: Owen O'Malley)

> The underlying data structure, ByteArrayOutputStream,  for buffer type of Jute record is inappropriate
> ------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-735
>                 URL: http://issues.apache.org/jira/browse/HADOOP-735
>             Project: Hadoop
>          Issue Type: Bug
>          Components: record
>    Affects Versions: 0.9.2
>            Reporter: Runping Qi
>         Assigned To: Milind Bhandarkar
>
> With ByteArrayOutputStream as the underlying data structure for a buffer, the user is forced to convert it into a byte [] object in order to do any operations other than sequence append on the buffer. The convertion will create a new copy of bytes. That will cause huge performance problem. 
> It seems BytesWritable is a better replacement.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 22:59:54 2006
Return-Path: 
 <hadoop-dev-return-6096-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14875 invoked from network); 15 Dec 2006 22:59:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 22:59:54 -0000
Received: (qmail 865 invoked by uid 500); 15 Dec 2006 22:59:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 834 invoked by uid 500); 15 Dec 2006 22:59:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 811 invoked by uid 99); 15 Dec 2006 22:59:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:59:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 14:59:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1572171413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 14:59:21 -0800 (PST)
Message-ID: <7061365.1166223561084.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 14:59:21 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-833) need documentation of native build
 requirements
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

need documentation of native build requirements
-----------------------------------------------

                 Key: HADOOP-833
                 URL: http://issues.apache.org/jira/browse/HADOOP-833
             Project: Hadoop
          Issue Type: Improvement
          Components: documentation
            Reporter: Doug Cutting


We should document the requirements for building the native libraries.

A link to a wiki page should be added to src/java/overview.html.  The wiki page should provide instructions and requirements for building the native code on various platforms.  Ideally Fedora/Redhat, Ubuntu, Windows and Mac instructions should be provided.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 23:05:10 2006
Return-Path: 
 <hadoop-dev-return-6097-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15837 invoked from network); 15 Dec 2006 23:05:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 23:05:10 -0000
Received: (qmail 4098 invoked by uid 500); 15 Dec 2006 23:05:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4065 invoked by uid 500); 15 Dec 2006 23:05:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4056 invoked by uid 99); 15 Dec 2006 23:05:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 15:05:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 15:05:05 -0800
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id kBFN50I02684
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 17:05:00 -0600
Message-ID: <45832A12.5090709@getopt.org>
Date: Sat, 16 Dec 2006 00:04:50 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Native libs on Windows?
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

It would be great if we could have a makefile to build native libs on 
Windows, using either MS command-line tools (which are freely 
redistributable now) or the mingw toolchain. It would be handy both for 
development and for limited-scale production use ...

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



From MAILER-DAEMON Fri Dec 15 23:20:13 2006
Return-Path: 
 <hadoop-dev-return-6098-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18398 invoked from network); 15 Dec 2006 23:20:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 23:20:13 -0000
Received: (qmail 12626 invoked by uid 500); 15 Dec 2006 23:20:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12600 invoked by uid 500); 15 Dec 2006 23:20:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12591 invoked by uid 99); 15 Dec 2006 23:20:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 15:20:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [204.127.192.81] (HELO rwcrmhc11.comcast.net) (204.127.192.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 15:20:09 -0800
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc11) with ESMTP
          id <20061215231948m110057u33e>; Fri, 15 Dec 2006 23:19:48 +0000
Message-ID: <45832D94.10503@apache.org>
Date: Fri, 15 Dec 2006 15:19:48 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.8 (X11/20061117)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Native libs on Windows?
References: <45832A12.5090709@getopt.org>
In-Reply-To: <45832A12.5090709@getopt.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Andrzej Bialecki wrote:
> It would be great if we could have a makefile to build native libs on 
> Windows, using either MS command-line tools (which are freely 
> redistributable now) or the mingw toolchain. It would be handy both for 
> development and for limited-scale production use ...

+1

Has anyone yet succeeded in building and using libhadoop on Windows? 
Cygwin is probably not appropriate for this until there's a Cygwin-based 
JVM.

Doug

From MAILER-DAEMON Fri Dec 15 23:21:45 2006
Return-Path: 
 <hadoop-dev-return-6099-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18585 invoked from network); 15 Dec 2006 23:21:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 23:21:45 -0000
Received: (qmail 14887 invoked by uid 500); 15 Dec 2006 23:21:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14852 invoked by uid 500); 15 Dec 2006 23:21:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14842 invoked by uid 99); 15 Dec 2006 23:21:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 15:21:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 15:21:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DE58671413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 15:21:23 -0800 (PST)
Message-ID: <1268691.1166224883908.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 15:21:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-451) Add a Split interface
In-Reply-To: <24919314.1155330613896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-451?page=all ]

Owen O'Malley updated HADOOP-451:
---------------------------------

    Attachment: input-split.patch

This patch makes the relevant changes:
  1. Introduces InputSplit
  2. Changes InputFormat to return InputSplit[] from getSplits
  3. Remove the FileSystem parameters to InputFormats since I was changing the interfaces anyway.
  4. Add getProgress to RecordReaders to track progress.
  5. Change the InputSplit areValidInputDirectories to validateInput.
  6. Fixes javadoc warnings that have been introduced recently.

> Add a Split interface
> ---------------------
>
>                 Key: HADOOP-451
>                 URL: http://issues.apache.org/jira/browse/HADOOP-451
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Doug Cutting
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: input-split.patch
>
>
> The InputFormat interface has a method:
> FileSplit[] getSplits();
> This should change to:
> Split[] getSplits();
> The Split interface would look like:
> public interface Split extends Writable {
>   /** Returns a list of hosts that contain this split.
>        This is only used to optimize task placement, so this may be empty. */
>   String[] getLocations(FileSystem fs);
>   /** The relative, estimated cost of operating on this.  Typically the size of the data in the split.
>        Used to prioritize tasks in a job (high-cost tasks are run first).  */
>    long getCost();
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 23:21:48 2006
Return-Path: 
 <hadoop-dev-return-6100-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18641 invoked from network); 15 Dec 2006 23:21:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 23:21:48 -0000
Received: (qmail 15170 invoked by uid 500); 15 Dec 2006 23:21:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15140 invoked by uid 500); 15 Dec 2006 23:21:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15131 invoked by uid 99); 15 Dec 2006 23:21:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 15:21:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 15:21:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DDC457141A2
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 15:21:26 -0800 (PST)
Message-ID: <3428579.1166224886906.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 15:21:26 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-451) Add a Split interface
In-Reply-To: <24919314.1155330613896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-451?page=all ]

Owen O'Malley updated HADOOP-451:
---------------------------------

               Status: Patch Available  (was: Open)
        Fix Version/s: 0.10.0
    Affects Version/s: 0.9.2

> Add a Split interface
> ---------------------
>
>                 Key: HADOOP-451
>                 URL: http://issues.apache.org/jira/browse/HADOOP-451
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Doug Cutting
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: input-split.patch
>
>
> The InputFormat interface has a method:
> FileSplit[] getSplits();
> This should change to:
> Split[] getSplits();
> The Split interface would look like:
> public interface Split extends Writable {
>   /** Returns a list of hosts that contain this split.
>        This is only used to optimize task placement, so this may be empty. */
>   String[] getLocations(FileSystem fs);
>   /** The relative, estimated cost of operating on this.  Typically the size of the data in the split.
>        Used to prioritize tasks in a job (high-cost tasks are run first).  */
>    long getCost();
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 23:23:44 2006
Return-Path: 
 <hadoop-dev-return-6101-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19233 invoked from network); 15 Dec 2006 23:23:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 23:23:44 -0000
Received: (qmail 18655 invoked by uid 500); 15 Dec 2006 23:23:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18423 invoked by uid 500); 15 Dec 2006 23:23:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18414 invoked by uid 99); 15 Dec 2006 23:23:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 15:23:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 15:23:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1F69D71413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 15:23:23 -0800 (PST)
Message-ID: <26961261.1166225003126.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 15:23:23 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12458970 ] 
            
Yoram Arnon commented on HADOOP-432:
------------------------------------

* I just ran a 'time hadoop dfs -lsr / > /dev/null' on our dfs from a client; it took 3:38 minutes real time, 1:40 minutes user+system time on the client, consuming 20-30% cpu on both client and namenode. Depending on the number of files deleted, doing this every few minutes is expensive. For comparison, 'time hadoop dfs -du /' takes 2 seconds (<1 second user+system), so the cost of delivering the paths from the namenode to the client is the expensive part, and internal implementation in the namenode is cheap.
I repeated this locally on the namenode, where dfs -lsr took 3:45/0:45 minutes, so the network is not all to blame.

* data in the trash is arranged in its original folder layout, to enable a person to locate her files and restore them. Creating a folder for every X minutes (how many?) will make restoring a file harder.

* an external process reclaiming space needs to be monitored, otherwise files will accumulate in the trash and the dfs will fill up. This could be achieved by a cron job, but then the admin is required to do one extra step to set up dfs, or the namenode could fork off a clean-up process.

I'm 80% for the performance and simplicity an internal thread, 20% for the safety of an external cleanup.

What do others think?


> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch, undelete17.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 23:23:47 2006
Return-Path: 
 <hadoop-dev-return-6102-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19291 invoked from network); 15 Dec 2006 23:23:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 23:23:47 -0000
Received: (qmail 18725 invoked by uid 500); 15 Dec 2006 23:23:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18702 invoked by uid 500); 15 Dec 2006 23:23:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18692 invoked by uid 99); 15 Dec 2006 23:23:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 15:23:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 15:23:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D93C071413F
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 15:23:25 -0800 (PST)
Message-ID: <18725789.1166225005887.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 15:23:25 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-451) Add a Split interface
In-Reply-To: <24919314.1155330613896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-451?page=comments#action_12458971 ] 
            
Hadoop QA commented on HADOOP-451:
----------------------------------

-1, because the patch command could not apply the latest attachment (http://issues.apache.org/jira/secure/attachment/12347324/input-split.patch) as a patch to trunk revision r487696. Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.

> Add a Split interface
> ---------------------
>
>                 Key: HADOOP-451
>                 URL: http://issues.apache.org/jira/browse/HADOOP-451
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Doug Cutting
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: input-split.patch
>
>
> The InputFormat interface has a method:
> FileSplit[] getSplits();
> This should change to:
> Split[] getSplits();
> The Split interface would look like:
> public interface Split extends Writable {
>   /** Returns a list of hosts that contain this split.
>        This is only used to optimize task placement, so this may be empty. */
>   String[] getLocations(FileSystem fs);
>   /** The relative, estimated cost of operating on this.  Typically the size of the data in the split.
>        Used to prioritize tasks in a job (high-cost tasks are run first).  */
>    long getCost();
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 23:33:44 2006
Return-Path: 
 <hadoop-dev-return-6103-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23397 invoked from network); 15 Dec 2006 23:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 23:33:44 -0000
Received: (qmail 26152 invoked by uid 500); 15 Dec 2006 23:33:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26066 invoked by uid 500); 15 Dec 2006 23:33:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26057 invoked by uid 99); 15 Dec 2006 23:33:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 15:33:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 15:33:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3902B7140D2
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 15:33:23 -0800 (PST)
Message-ID: <3093589.1166225603230.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 15:33:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-813) map tasks lost during sort
In-Reply-To: <30843820.1165896621216.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-813?page=all ]

Doug Cutting resolved HADOOP-813.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Devaraj!

> map tasks lost during sort
> --------------------------
>
>                 Key: HADOOP-813
>                 URL: http://issues.apache.org/jira/browse/HADOOP-813
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.10.0
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.10.0
>
>         Attachments: 813.patch, 813.patch
>
>
> On a 500 node cluster, I had a bunch of map tasks get "lost" because they failed to report progress for 10 minutes. They appear to be in the sort stage at the end of the map. I hypothesize that the patch for HADOOP-331 does not update the map's progress during the sort/merge. If the sort/merge takes more than 10 minutes, the task is lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 15 23:37:45 2006
Return-Path: 
 <hadoop-dev-return-6104-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24731 invoked from network); 15 Dec 2006 23:37:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 23:37:45 -0000
Received: (qmail 28291 invoked by uid 500); 15 Dec 2006 23:37:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28264 invoked by uid 500); 15 Dec 2006 23:37:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28255 invoked by uid 99); 15 Dec 2006 23:37:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 15:37:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 15:37:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C3FA071413F
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 15:37:23 -0800 (PST)
Message-ID: <25194516.1166225843800.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 15:37:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-451) Add a Split interface
In-Reply-To: <24919314.1155330613896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-451?page=all ]

Owen O'Malley updated HADOOP-451:
---------------------------------

    Attachment: input-split-2.patch

Fixed the conflict in hadoop-defaults (with my other patch!). Oops.

> Add a Split interface
> ---------------------
>
>                 Key: HADOOP-451
>                 URL: http://issues.apache.org/jira/browse/HADOOP-451
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Doug Cutting
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: input-split-2.patch, input-split.patch
>
>
> The InputFormat interface has a method:
> FileSplit[] getSplits();
> This should change to:
> Split[] getSplits();
> The Split interface would look like:
> public interface Split extends Writable {
>   /** Returns a list of hosts that contain this split.
>        This is only used to optimize task placement, so this may be empty. */
>   String[] getLocations(FileSystem fs);
>   /** The relative, estimated cost of operating on this.  Typically the size of the data in the split.
>        Used to prioritize tasks in a job (high-cost tasks are run first).  */
>    long getCost();
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec 16 01:18:45 2006
Return-Path: 
 <hadoop-dev-return-6105-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41934 invoked from network); 16 Dec 2006 01:18:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 01:18:45 -0000
Received: (qmail 5862 invoked by uid 500); 16 Dec 2006 01:18:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5621 invoked by uid 500); 16 Dec 2006 01:18:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5612 invoked by uid 99); 16 Dec 2006 01:18:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 17:18:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 17:18:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B599071413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 17:18:23 -0800 (PST)
Message-ID: <10035591.1166231903741.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 17:18:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-451) Add a Split interface
In-Reply-To: <24919314.1155330613896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-451?page=comments#action_12458985 ] 
            
Hadoop QA commented on HADOOP-451:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347325/input-split-2.patch applied and successfully tested against trunk revision r487715.

> Add a Split interface
> ---------------------
>
>                 Key: HADOOP-451
>                 URL: http://issues.apache.org/jira/browse/HADOOP-451
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Doug Cutting
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: input-split-2.patch, input-split.patch
>
>
> The InputFormat interface has a method:
> FileSplit[] getSplits();
> This should change to:
> Split[] getSplits();
> The Split interface would look like:
> public interface Split extends Writable {
>   /** Returns a list of hosts that contain this split.
>        This is only used to optimize task placement, so this may be empty. */
>   String[] getLocations(FileSystem fs);
>   /** The relative, estimated cost of operating on this.  Typically the size of the data in the split.
>        Used to prioritize tasks in a job (high-cost tasks are run first).  */
>    long getCost();
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec 16 01:28:44 2006
Return-Path: 
 <hadoop-dev-return-6106-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43558 invoked from network); 16 Dec 2006 01:28:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 01:28:44 -0000
Received: (qmail 11434 invoked by uid 500); 16 Dec 2006 01:28:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11293 invoked by uid 500); 16 Dec 2006 01:28:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11284 invoked by uid 99); 16 Dec 2006 01:28:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 17:28:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 17:28:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0C5D97140D2
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 17:28:23 -0800 (PST)
Message-ID: <1986558.1166232503047.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 17:28:23 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-803?page=all ]

Raghu Angadi updated HADOOP-803:
--------------------------------

    Attachment: block-refs-4.patch

> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Sameer Paranjpye
>         Attachments: block-refs-2.patch, block-refs-3.patch, block-refs-4.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec 16 01:32:45 2006
Return-Path: 
 <hadoop-dev-return-6107-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44307 invoked from network); 16 Dec 2006 01:32:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 01:32:45 -0000
Received: (qmail 14678 invoked by uid 500); 16 Dec 2006 01:32:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14657 invoked by uid 500); 16 Dec 2006 01:32:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14648 invoked by uid 99); 16 Dec 2006 01:32:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 17:32:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 17:32:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 105C17140D2
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 17:32:23 -0800 (PST)
Message-ID: <422994.1166232743064.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 17:32:23 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-803?page=comments#action_12458988 ] 
            
Raghu Angadi commented on HADOOP-803:
-------------------------------------


block-refs-4.patch : adds Konstantin's suggestion above.  Diff between 3 and 4 :

-            block = containingNodes.first().getBlock(block.getBlockId());
+            Block storedBlock = 
+                containingNodes.first().getBlock(block.getBlockId());
+            // update stored block's length.
+            if ( block != storedBlock && block.getNumBytes() > 0 ) {
+                storedBlock.setNumBytes( block.getNumBytes() );
+            }

We now update the block length with the length reported by latest datanode. 

As before this does not affect block lengths of blocks that belong to files that created during previous runs of the namenode.


> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Sameer Paranjpye
>         Attachments: block-refs-2.patch, block-refs-3.patch, block-refs-4.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec 16 01:35:44 2006
Return-Path: 
 <hadoop-dev-return-6108-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44868 invoked from network); 16 Dec 2006 01:35:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 01:35:44 -0000
Received: (qmail 16845 invoked by uid 500); 16 Dec 2006 01:35:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16821 invoked by uid 500); 16 Dec 2006 01:35:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16812 invoked by uid 99); 16 Dec 2006 01:35:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 17:35:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 17:35:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 156A87140D2
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 17:35:23 -0800 (PST)
Message-ID: <8133088.1166232923085.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 17:35:23 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-803?page=all ]

Raghu Angadi updated HADOOP-803:
--------------------------------

    Attachment: block-refs-5.patch

> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Sameer Paranjpye
>         Attachments: block-refs-2.patch, block-refs-3.patch, block-refs-5.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec 16 01:35:46 2006
Return-Path: 
 <hadoop-dev-return-6109-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44912 invoked from network); 16 Dec 2006 01:35:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 01:35:46 -0000
Received: (qmail 17319 invoked by uid 500); 16 Dec 2006 01:35:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17083 invoked by uid 500); 16 Dec 2006 01:35:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17074 invoked by uid 99); 16 Dec 2006 01:35:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 17:35:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 17:35:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3B59C71413F
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 17:35:25 -0800 (PST)
Message-ID: <1145431.1166232925240.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 17:35:25 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-803?page=all ]

Raghu Angadi updated HADOOP-803:
--------------------------------

    Attachment:     (was: block-refs-4.patch)

> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Sameer Paranjpye
>         Attachments: block-refs-2.patch, block-refs-3.patch, block-refs-5.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec 16 01:37:44 2006
Return-Path: 
 <hadoop-dev-return-6110-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45174 invoked from network); 16 Dec 2006 01:37:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 01:37:44 -0000
Received: (qmail 19346 invoked by uid 500); 16 Dec 2006 01:37:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19319 invoked by uid 500); 16 Dec 2006 01:37:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19310 invoked by uid 99); 16 Dec 2006 01:37:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 17:37:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 17:37:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1366471413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 17:37:23 -0800 (PST)
Message-ID: <33184100.1166233043076.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 17:37:23 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-803?page=comments#action_12458989 ] 
            
Raghu Angadi commented on HADOOP-803:
-------------------------------------


please disregard 4. diff between patch 5 and 3:

- block = containingNodes.first().getBlock(block.getBlockId());
+ Block storedBlock =
+ containingNodes.first().getBlock(block.getBlockId());
+ // update stored block's length.
+ if ( block.getNumBytes() > 0 ) {
+ storedBlock.setNumBytes( block.getNumBytes() );
+ block = storedBlock;
+ }


> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Sameer Paranjpye
>         Attachments: block-refs-2.patch, block-refs-3.patch, block-refs-5.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec 16 04:50:44 2006
Return-Path: 
 <hadoop-dev-return-6111-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72566 invoked from network); 16 Dec 2006 04:50:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 04:50:44 -0000
Received: (qmail 19580 invoked by uid 500); 16 Dec 2006 04:50:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19551 invoked by uid 500); 16 Dec 2006 04:50:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19538 invoked by uid 99); 16 Dec 2006 04:50:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 20:50:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 20:50:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5B27571413D
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 20:50:22 -0800 (PST)
Message-ID: <17003665.1166244622370.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 20:50:22 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-817) Streaming reducers throw OutOfMemory
 for not so large inputs
In-Reply-To: <30192547.1165933587180.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-817?page=comments#action_12458993 ] 
            
Devaraj Das commented on HADOOP-817:
------------------------------------

I think we need to investigate this further. Maybe the JVM is not spawned with enough memory. I am saying this because this same loop merges the map outputs even for the sort benchmark and in the sort benchmark this loop successfully merges 1000s of files.

> Streaming reducers throw OutOfMemory for not so large inputs
> ------------------------------------------------------------
>
>                 Key: HADOOP-817
>                 URL: http://issues.apache.org/jira/browse/HADOOP-817
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>
> I am seeing OutOfMemoryError for moderate size inputs (~70 text files, 20k each ) causing job to fail in streaming. For very small inputs it still succeeds. Looking into details. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec 16 05:20:45 2006
Return-Path: 
 <hadoop-dev-return-6112-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75016 invoked from network); 16 Dec 2006 05:20:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 05:20:45 -0000
Received: (qmail 33440 invoked by uid 500); 16 Dec 2006 05:20:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33418 invoked by uid 500); 16 Dec 2006 05:20:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33404 invoked by uid 99); 16 Dec 2006 05:20:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 21:20:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 21:20:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 770437140D2
	for <hadoop-dev@lucene.apache.org>; Fri, 15 Dec 2006 21:20:24 -0800 (PST)
Message-ID: <20312080.1166246424484.JavaMail.jira@brutus>
Date: Fri, 15 Dec 2006 21:20:24 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12458994 ] 
            
dhruba borthakur commented on HADOOP-227:
-----------------------------------------

Konstantin proposal is essentially a push model where the primary Namenode drives the scehduling policies of the periodic checkpointing. Also, he mentioned about supporting cascading secondaries.

I am going ahead the pull model: the Namenode is a very passive entity as far as periodic checkpointing is concerned. The scheduling policies are maintained only by the secondary namenode. The secondary namenode polls the primary periodically (say every 5 minutes) to determine the size of the current edit log.

The secondary would use HTTP-GET method to transfer fsmage and edits. Al alternative that was discussed was to use HDFS itself to transfer the image. However using HDFS has the disadvantage that the secondary would have to poll the primary to determine when the upload to HDFS was complete (HDFS does not have streaming RPC and has a fixed timeout for an RPC).

> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: dhruba borthakur
>         Attachments: patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0
>
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Dec 17 00:34:34 2006
Return-Path: 
 <hadoop-dev-return-6113-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36952 invoked from network); 17 Dec 2006 00:34:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2006 00:34:34 -0000
Received: (qmail 2779 invoked by uid 500); 17 Dec 2006 00:34:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2531 invoked by uid 500); 17 Dec 2006 00:34:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2522 invoked by uid 99); 17 Dec 2006 00:34:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 16:34:41 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_ID,NO_REAL_NAME,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received: from [140.211.11.75] (HELO lucene.zones.apache.org) (140.211.11.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 16:34:31 -0800
Received: from lucene.zones.apache.org (localhost [127.0.0.1])
	by lucene.zones.apache.org (8.13.7+Sun/8.13.7) with SMTP id kBH0YAeO023499
	for <hadoop-dev@lucene.apache.org>; Sun, 17 Dec 2006 00:34:11 GMT
Message-Id: <200612170034.kBH0YAeO023499@lucene.zones.apache.org>
Date: Sun, 17 Dec 2006 00:34:10 +0000
Subject: Hadoop nightly build failure
From: hadoop-dev@lucene.apache.org
To: hadoop-dev@lucene.apache.org
X-Mailer: org.apache.tools.mail.MailMessage (ant.apache.org)
X-Virus-Checked: Checked by ClamAV on apache.org


init:
    [mkdir] Created dir: /tmp/hadoop-nightly/build
    [mkdir] Created dir: /tmp/hadoop-nightly/build/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/src
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/task/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/job/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/dfs/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/datanode/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/examples
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/testjar
     [copy] Copying 6 files to /tmp/hadoop-nightly/build/webapps
     [copy] Copying 4 files to /tmp/hadoop-nightly/conf
     [copy] Copying /tmp/hadoop-nightly/conf/slaves.template to /tmp/hadoop-nightly/conf/slaves
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-site.xml.template to /tmp/hadoop-nightly/conf/hadoop-site.xml
     [copy] Copying /tmp/hadoop-nightly/conf/mapred-default.xml.template to /tmp/hadoop-nightly/conf/mapred-default.xml
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-env.sh.template to /tmp/hadoop-nightly/conf/hadoop-env.sh
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: whoami: not found

record-parser:

compile-core-classes:
    [javac] Compiling 280 source files to /tmp/hadoop-nightly/build/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-native:

compile-core:

compile-examples:
    [javac] Compiling 7 source files to /tmp/hadoop-nightly/build/examples
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-test:
    [javac] Compiling 71 source files to /tmp/hadoop-nightly/build/test/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] Compiling 1 source file to /tmp/hadoop-nightly/build/test/testjar
      [jar] Building jar: /tmp/hadoop-nightly/build/test/testjar/testjob.jar
      [jar] Building jar: /tmp/hadoop-nightly/build/hadoop-nightly-test.jar
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache

test-core:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/data
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/logs
    [junit] Running org.apache.hadoop.conf.TestConfiguration
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.397 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSMkdirs
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 9.161 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSShell
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 13.147 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSShellGenericOptions
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 11.887 sec
    [junit] Running org.apache.hadoop.dfs.TestFileCorruption
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 7.99 sec
    [junit] Running org.apache.hadoop.dfs.TestFsck
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 7.928 sec
    [junit] Running org.apache.hadoop.dfs.TestLocalDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 6.752 sec
    [junit] Running org.apache.hadoop.dfs.TestPread
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 7.987 sec
    [junit] Running org.apache.hadoop.dfs.TestReplication
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 25.327 sec
    [junit] Running org.apache.hadoop.dfs.TestRestartDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 15.772 sec
    [junit] Running org.apache.hadoop.dfs.TestSeekBug
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 6.892 sec
    [junit] Running org.apache.hadoop.dfs.TestSmallBlock
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 6.823 sec
    [junit] Running org.apache.hadoop.fs.TestCopyFiles
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 29.845 sec
    [junit] Running org.apache.hadoop.fs.TestDFSIO
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 8.116 sec
    [junit] Running org.apache.hadoop.fs.TestFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 8.17 sec
    [junit] Running org.apache.hadoop.fs.TestGlobPaths
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 5.777 sec
    [junit] Running org.apache.hadoop.fs.TestLocalFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.329 sec
    [junit] Running org.apache.hadoop.fs.TestPath
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.038 sec
    [junit] Running org.apache.hadoop.fs.s3.TestINode
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.015 sec
    [junit] Running org.apache.hadoop.fs.s3.TestInMemoryS3FileSystem
    [junit] Tests run: 12, Failures: 0, Errors: 0, Time elapsed: 0.74 sec
    [junit] Running org.apache.hadoop.io.TestArrayFile
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 3.601 sec
    [junit] Running org.apache.hadoop.io.TestBytesWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.017 sec
    [junit] Running org.apache.hadoop.io.TestMD5Hash
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.334 sec
    [junit] Running org.apache.hadoop.io.TestSequenceFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 20.557 sec
    [junit] Running org.apache.hadoop.io.TestSetFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.795 sec
    [junit] Running org.apache.hadoop.io.TestText
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.704 sec
    [junit] Running org.apache.hadoop.io.TestTextNonUTF8
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.017 sec
    [junit] Running org.apache.hadoop.io.TestUTF8
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.178 sec
    [junit] Running org.apache.hadoop.io.TestVersionedWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.033 sec
    [junit] Running org.apache.hadoop.io.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.012 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodec
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 2.037 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodecFactory
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.367 sec
    [junit] Running org.apache.hadoop.ipc.TestIPC
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 1.774 sec
    [junit] Running org.apache.hadoop.ipc.TestRPC
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.152 sec
    [junit] Running org.apache.hadoop.mapred.TestEmptyJobWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 12.176 sec
    [junit] Running org.apache.hadoop.mapred.TestMapRed
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 13.261 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRBringup
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.903 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRClasspath
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 29.667 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRDFSCaching
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 27.628 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRLocalFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 54.161 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 864.819 sec
    [junit] Test org.apache.hadoop.mapred.TestMiniMRWithDFS FAILED
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFilter
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 17.396 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFormat
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 13.49 sec
    [junit] Running org.apache.hadoop.mapred.TestTextInputFormat
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 10.586 sec
    [junit] Running org.apache.hadoop.mapred.jobcontrol.TestJobControl
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 35.411 sec
    [junit] Running org.apache.hadoop.record.test.TestMapRed
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.91 sec
    [junit] Running org.apache.hadoop.record.test.TestRecordIO
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.271 sec
    [junit] Running org.apache.hadoop.record.test.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.707 sec

BUILD FAILED
/tmp/hadoop-nightly/build.xml:389: Tests failed!

Total time: 22 minutes 28 seconds



From MAILER-DAEMON Sun Dec 17 20:10:44 2006
Return-Path: 
 <hadoop-dev-return-6114-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57125 invoked from network); 17 Dec 2006 20:10:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2006 20:10:44 -0000
Received: (qmail 9235 invoked by uid 500); 17 Dec 2006 20:10:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8976 invoked by uid 500); 17 Dec 2006 20:10:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8961 invoked by uid 99); 17 Dec 2006 20:10:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Dec 2006 12:10:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Dec 2006 12:10:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 725527141B8
	for <hadoop-dev@lucene.apache.org>; Sun, 17 Dec 2006 12:10:22 -0800 (PST)
Message-ID: <17427843.1166386222465.JavaMail.jira@brutus>
Date: Sun, 17 Dec 2006 12:10:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-815) Investigate and fix the extremely
 large memory-footprint of JobTracker
In-Reply-To: <28416645.1165904481055.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-815?page=all ]

Arun C Murthy updated HADOOP-815:
---------------------------------

    Attachment: 75k_jobs.nps
                150k_1199_774.nps

Attached are 2 netbeans' memory profiles of the JT after executing about 250 jobs & 500 jobs respectively (each job had 300 maps and 2 reduces i.e. ~75k tasks & ~150k tasks respectively) ... at this point the JT was consuming ~500Mb & ~1Gb of memory respectively.

> Investigate and fix the extremely large memory-footprint of JobTracker
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-815
>                 URL: http://issues.apache.org/jira/browse/HADOOP-815
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: 150k_1199_774.nps, 75k_jobs.nps
>
>
> The JobTracker's memory footprint seems excessively large, especially when many jobs are submitted.
> Here is the 'top' output of a JobTracker which has scheduled ~1k jobs thus far:
>   PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                     
> 31877 arunc     19   0 2362m 261m  13m S 14.0 12.9  24:48.08 java  
> Clearly VIRTual memory of 2364Mb v/s 261Mb of RESident memory is symptomatic of this issue...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 06:30:45 2006
Return-Path: 
 <hadoop-dev-return-6115-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77408 invoked from network); 18 Dec 2006 06:30:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 06:30:45 -0000
Received: (qmail 96748 invoked by uid 500); 18 Dec 2006 06:30:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96716 invoked by uid 500); 18 Dec 2006 06:30:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96707 invoked by uid 99); 18 Dec 2006 06:30:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Dec 2006 22:30:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Dec 2006 22:30:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 54A597141B8
	for <hadoop-dev@lucene.apache.org>; Sun, 17 Dec 2006 22:30:22 -0800 (PST)
Message-ID: <28625269.1166423422344.JavaMail.jira@brutus>
Date: Sun, 17 Dec 2006 22:30:22 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-830) Improve the performance of the Merge
 phase
In-Reply-To: <2309156.1166172801062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-830?page=comments#action_12459187 ] 
            
Devaraj Das commented on HADOOP-830:
------------------------------------

In the original proposal, I suggested that we can have one buffer for all the files that the InMemoryFileSystem manages. After a discussion with Owen on this, it seems like the alternative arrangement of having one byte[] per file in the InMemoryFileSystem is a better approach, given that we know the lengths of the files before we allocate byte[] buffers for those. 

In the original proposal, there was an assumption of two equal sized buffers & merge would happen when we have 50% of the total buffer space filled with map outputs. This can be mapped to the multiple buffers (one byte[] per file) case (wherein we consider the total size of all the small buffers).

Yes, Sameer, we can & should spill a map output directly to disk if its size is more than a certain fraction of the total buffer space.

> Improve the performance of the Merge phase
> ------------------------------------------
>
>                 Key: HADOOP-830
>                 URL: http://issues.apache.org/jira/browse/HADOOP-830
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>
> This issue is about trying to improve the performance of the merge phase (especially on the reduces). Currently, all the map outputs are copied to disk and then the merge phase starts (just to make a note - sorting happens on the maps).
> The first optimization that I plan to implement is to do in-memory merging of the map outputs. There are two buffers maintained - 
> 1) a scratch buffer for writing map outputs (directly off the socket). This is a first-come-first-serve buffer (as opposed to strategies like best fit). The map output copier copies the map output off the socket and puts it here (assuming there is sufficient space in the buffer).
> 2) a merge buffer - when the scratch buffer cannot accomodate any more map output, the roles of the buffers are switched - that is, the scratch buffer becomes the merge buffer and the merge buffer becomes the scratch buffer. We avoid copying by doing this switch of roles. The copier threads can continue writing data from the socket buffer to the current scratch buffer (access to the scratch buffer is synchronized). 
> Both the above buffers are of equal sizes configured to have default values of 100M.
> Before switching roles, a check is done to see whether the merge buffer is in use (merge algorithm is working on the data there). We wait till the merge buffer is free. The hope is that while merging we are reading key/value data from an in-memory buffer and it will be really fast and so we won't see client timeouts on the server serving the map output. However, if they really timeout, the client sees an exception, and resubmits the request to the server.
> With the above we are doing copying/merging in parallel.
> The merge happens and then a spill to disk happens. At the end of the in-memory merge of all the map outputs, we will end up with ~100M files on disk that we will need to merge. Also, the in-memory merge gets triggered when the in-memory scratch buffer has been idle too long (like 30 secs), or, the number of outputs copied so far is equal to the number of maps in the job, whichever is earlier. We can proceed with the regular merge for these on-disk-files and maybe we can do some optimizations there too (haven't put much thought there).
> If the map output can never be copied to the buffer (because the map output is let's say 200M), then that is directly spilled to disk.
> To implement the above, I am planning to extend the FileSystem class to provide an InMemoryFileSystem class that will ease the integration of the in-memory scratch/merge with the existing APIs (like SequenceFile, MapOutputCopier) since all them work with the abstractions of FileSystem and Input/Output streams.
> Comments?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 07:06:44 2006
Return-Path: 
 <hadoop-dev-return-6116-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83574 invoked from network); 18 Dec 2006 07:06:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 07:06:44 -0000
Received: (qmail 23741 invoked by uid 500); 18 Dec 2006 07:06:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23505 invoked by uid 500); 18 Dec 2006 07:06:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23496 invoked by uid 99); 18 Dec 2006 07:06:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Dec 2006 23:06:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Dec 2006 23:06:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1B3907141BE
	for <hadoop-dev@lucene.apache.org>; Sun, 17 Dec 2006 23:06:23 -0800 (PST)
Message-ID: <28568847.1166425583107.JavaMail.jira@brutus>
Date: Sun, 17 Dec 2006 23:06:23 -0800 (PST)
From: "Jiang Lei (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-662) dfs -ls sometime prints "Found xxx
 items"; sometimes it does not print that string
In-Reply-To: <15693634.1162340057836.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-662?page=all ]

Jiang Lei updated HADOOP-662:
-----------------------------

    Comment: was deleted

> dfs -ls sometime prints "Found xxx items"; sometimes it does not print that string
> ----------------------------------------------------------------------------------
>
>                 Key: HADOOP-662
>                 URL: http://issues.apache.org/jira/browse/HADOOP-662
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: Jiang Lei
>            Priority: Minor
>
> I get a different response from dfs -ls depending on whether or not the 
> ls contained a directory or a wildcard. The wild card misses the 
> response that tells me how many files.
> It did indeed cause a problem with my scripts. It was easy to filter 
> out. If it's a desired action to do it sometimes and others then that's 
> it's ok. It doesn't seem like this is really the intention so I pointed 
> it out. My script is now happy with both forms. I do really on the fact 
> that the 3 column of the output is the file size. Perhaps I shouldn't be 
> doing this but I am writing some automated scripts in python to drive 
> hadoop so it is useful to check file sizes. If you were to provide a 
> format string that would allow me to place the items in a specific 
> format then you would be free to change it, whenever, however, you wanted.
> -Richard

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 07:45:45 2006
Return-Path: 
 <hadoop-dev-return-6117-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90409 invoked from network); 18 Dec 2006 07:45:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 07:45:45 -0000
Received: (qmail 67299 invoked by uid 500); 18 Dec 2006 07:45:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67062 invoked by uid 500); 18 Dec 2006 07:45:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67046 invoked by uid 99); 18 Dec 2006 07:45:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Dec 2006 23:45:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Dec 2006 23:45:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2BF977141C0
	for <hadoop-dev@lucene.apache.org>; Sun, 17 Dec 2006 23:45:23 -0800 (PST)
Message-ID: <20004109.1166427923177.JavaMail.jira@brutus>
Date: Sun, 17 Dec 2006 23:45:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-834) Export the HDFS file system through a
 NFS protocol
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Export the HDFS file system through a NFS protocol
--------------------------------------------------

                 Key: HADOOP-834
                 URL: http://issues.apache.org/jira/browse/HADOOP-834
             Project: Hadoop
          Issue Type: New Feature
          Components: dfs
            Reporter: dhruba borthakur
         Assigned To: dhruba borthakur
         Attachments: nfshadoop.tar.gz

It would be nice if can expose the HDFS filesystem using the NFS protocol.

There are a couple of options that I could find:
1. Use a user space C-language-implementation of a NFS server and then use the libhdfs API to integrate that code with Hadoop. There is such an implementation available at http://sourceforge.net/project/showfiles.php?group_id=66203.

2.  Use a user space Java implementation of a NFS server and then integrate it with HDFS using Java API. There is such an implementation of NFS server at http://void.org/~steven/jnfs/.

I have experimented with Option 2 and have written a first version of the Hadoop integration. I am attaching the code for your preliminary feedback. This implementation of the Java NFS server has one limitation: it supports UDP only. Some licensing issues will have to be sorted out before it can be used.  Steve (the writer of the NFS server implemenation) has told me that he can change the licensing of the code if needed.

 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 07:45:46 2006
Return-Path: 
 <hadoop-dev-return-6118-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90458 invoked from network); 18 Dec 2006 07:45:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 07:45:46 -0000
Received: (qmail 67453 invoked by uid 500); 18 Dec 2006 07:45:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67325 invoked by uid 500); 18 Dec 2006 07:45:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67316 invoked by uid 99); 18 Dec 2006 07:45:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Dec 2006 23:45:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Dec 2006 23:45:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B2EDD7141A5
	for <hadoop-dev@lucene.apache.org>; Sun, 17 Dec 2006 23:45:24 -0800 (PST)
Message-ID: <16799687.1166427924730.JavaMail.jira@brutus>
Date: Sun, 17 Dec 2006 23:45:24 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-834) Export the HDFS file system through a
 NFS protocol
In-Reply-To: <20004109.1166427923177.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-834?page=all ]

dhruba borthakur updated HADOOP-834:
------------------------------------

    Attachment: nfshadoop.tar.gz

> Export the HDFS file system through a NFS protocol
> --------------------------------------------------
>
>                 Key: HADOOP-834
>                 URL: http://issues.apache.org/jira/browse/HADOOP-834
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: nfshadoop.tar.gz
>
>
> It would be nice if can expose the HDFS filesystem using the NFS protocol.
> There are a couple of options that I could find:
> 1. Use a user space C-language-implementation of a NFS server and then use the libhdfs API to integrate that code with Hadoop. There is such an implementation available at http://sourceforge.net/project/showfiles.php?group_id=66203.
> 2.  Use a user space Java implementation of a NFS server and then integrate it with HDFS using Java API. There is such an implementation of NFS server at http://void.org/~steven/jnfs/.
> I have experimented with Option 2 and have written a first version of the Hadoop integration. I am attaching the code for your preliminary feedback. This implementation of the Java NFS server has one limitation: it supports UDP only. Some licensing issues will have to be sorted out before it can be used.  Steve (the writer of the NFS server implemenation) has told me that he can change the licensing of the code if needed.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 07:56:44 2006
Return-Path: 
 <hadoop-dev-return-6119-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92715 invoked from network); 18 Dec 2006 07:56:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 07:56:44 -0000
Received: (qmail 80324 invoked by uid 500); 18 Dec 2006 07:56:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80085 invoked by uid 500); 18 Dec 2006 07:56:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80076 invoked by uid 99); 18 Dec 2006 07:56:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Dec 2006 23:56:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Dec 2006 23:56:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 13EB67141BE
	for <hadoop-dev@lucene.apache.org>; Sun, 17 Dec 2006 23:56:23 -0800 (PST)
Message-ID: <29257593.1166428583079.JavaMail.jira@brutus>
Date: Sun, 17 Dec 2006 23:56:23 -0800 (PST)
From: "Jiang Lei (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-662) dfs -ls sometime prints "Found xxx
 items"; sometimes it does not print that string
In-Reply-To: <15693634.1162340057836.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-662?page=comments#action_12459206 ] 
            
Jiang Lei commented on HADOOP-662:
----------------------------------

In my opinion, we should provide a format option(for example: -v), then the output show some detail info in some format.
Can you give your suggestion about the detail format you want?  We can discuss about the format.

> dfs -ls sometime prints "Found xxx items"; sometimes it does not print that string
> ----------------------------------------------------------------------------------
>
>                 Key: HADOOP-662
>                 URL: http://issues.apache.org/jira/browse/HADOOP-662
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: Jiang Lei
>            Priority: Minor
>
> I get a different response from dfs -ls depending on whether or not the 
> ls contained a directory or a wildcard. The wild card misses the 
> response that tells me how many files.
> It did indeed cause a problem with my scripts. It was easy to filter 
> out. If it's a desired action to do it sometimes and others then that's 
> it's ok. It doesn't seem like this is really the intention so I pointed 
> it out. My script is now happy with both forms. I do really on the fact 
> that the 3 column of the output is the file size. Perhaps I shouldn't be 
> doing this but I am writing some automated scripts in python to drive 
> hadoop so it is useful to check file sizes. If you were to provide a 
> format string that would allow me to place the items in a specific 
> format then you would be free to change it, whenever, however, you wanted.
> -Richard

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 08:03:45 2006
Return-Path: 
 <hadoop-dev-return-6120-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94319 invoked from network); 18 Dec 2006 08:03:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 08:03:45 -0000
Received: (qmail 87733 invoked by uid 500); 18 Dec 2006 08:03:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87711 invoked by uid 500); 18 Dec 2006 08:03:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87701 invoked by uid 99); 18 Dec 2006 08:03:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 00:03:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 00:03:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 21AE47141B8
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 00:03:23 -0800 (PST)
Message-ID: <32521520.1166429003135.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 00:03:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-814) Increase dfs scalability by optimizing
 locking on namenode.
In-Reply-To: <7461200.1165900101047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-814?page=all ]

dhruba borthakur updated HADOOP-814:
------------------------------------

    Status: Patch Available  (was: Open)

Tested conditions when data nodes arrive and dies while running load on the NameNode.

> Increase dfs scalability by optimizing locking on namenode.
> -----------------------------------------------------------
>
>                 Key: HADOOP-814
>                 URL: http://issues.apache.org/jira/browse/HADOOP-814
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: heartbeatlock3.patch
>
>
> The current dfs namenode encounters locking bottlenecks when the number of datanodes is large. The namenode uses a single global lock to protect access to data structures. One key area is heartbeat processing. The lower the cost of processing a heartbeat, more the number of nodes HDFS can support.  A simple change to this current locking model can increase the scalability. Here are the details:
> Case 1: Currently we have three locks, the global lock (on FSNamesystem), the heartbeat lock and the datanodeMap lock. The following function is called when a heartbeat is received by the Namenode
> public synchronized FSNamesystem. gotHeartbeat() { ........ (A)
>     synchronized (heartbeat) {                                        ........ (B)
>       synchronized (datanodeMap) {                               ......... (C)
>    ...
>      }
> }
> In the above piece of code, statement (A) acquires the global-FSNamesystem-lock. This synchronization can be safely removed (remove updateStats too). This means that a heartbeat from the datanode can be processed without holding the FSnamesystem-global-lock.
> Case 2: A following thread called the heartbeatCheck thread periodically traverses all known Datanodes to determine if any of them has timed out. It is of the following form:
> void FSNamesystem.heartbeatCheck() {
>             synchronized (this) {                                        ........... (D)
>                         synchronized (heartbeats) {                .............(E) 
> }
> This thread acquires the global-FSNamesystem lock in Statement (D). This statement (D) can be removed. Instead the loop can check to see if any nodes are dead. If a dead node is found, only then it acquires the FSNamesystem-global-lock.
> It is possible that fixing the above two cases will cause HDFS to scale to higher number of nodes.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 08:11:47 2006
Return-Path: 
 <hadoop-dev-return-6121-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96206 invoked from network); 18 Dec 2006 08:11:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 08:11:47 -0000
Received: (qmail 97991 invoked by uid 500); 18 Dec 2006 08:11:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97952 invoked by uid 500); 18 Dec 2006 08:11:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97917 invoked by uid 99); 18 Dec 2006 08:11:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 00:11:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 00:11:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 008B67141BE
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 00:11:23 -0800 (PST)
Message-ID: <18839219.1166429482999.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 00:11:22 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-662) dfs -ls sometime prints "Found xxx
 items"; sometimes it does not print that string
In-Reply-To: <15693634.1162340057836.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-662?page=comments#action_12459212 ] 
            
dhruba borthakur commented on HADOOP-662:
-----------------------------------------

I think the user was complaining that the output format was different in the case of of a directory vs that of a file. When we do a ls -l of a directory, it prints "Found xx items". When we do ls -l of a file, the "Found xxx items" is not printed. The user was asking that both these formats be same. He was not tto concerned about what the exact format it.

I think the current format that we got is appropriate.

If we look at linux/unix ls command, it too prints out different format based on whether it is a directory or a file.


> dfs -ls sometime prints "Found xxx items"; sometimes it does not print that string
> ----------------------------------------------------------------------------------
>
>                 Key: HADOOP-662
>                 URL: http://issues.apache.org/jira/browse/HADOOP-662
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: Jiang Lei
>            Priority: Minor
>
> I get a different response from dfs -ls depending on whether or not the 
> ls contained a directory or a wildcard. The wild card misses the 
> response that tells me how many files.
> It did indeed cause a problem with my scripts. It was easy to filter 
> out. If it's a desired action to do it sometimes and others then that's 
> it's ok. It doesn't seem like this is really the intention so I pointed 
> it out. My script is now happy with both forms. I do really on the fact 
> that the 3 column of the output is the file size. Perhaps I shouldn't be 
> doing this but I am writing some automated scripts in python to drive 
> hadoop so it is useful to check file sizes. If you were to provide a 
> format string that would allow me to place the items in a specific 
> format then you would be free to change it, whenever, however, you wanted.
> -Richard

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 08:24:50 2006
Return-Path: 
 <hadoop-dev-return-6122-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5140 invoked from network); 18 Dec 2006 08:24:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 08:24:50 -0000
Received: (qmail 17708 invoked by uid 500); 18 Dec 2006 08:24:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17683 invoked by uid 500); 18 Dec 2006 08:24:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17674 invoked by uid 99); 18 Dec 2006 08:24:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 00:24:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 00:24:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6FAAA7141D1
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 00:24:28 -0800 (PST)
Message-ID: <8821331.1166430268454.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 00:24:28 -0800 (PST)
From: "Jiang Lei (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-662) dfs -ls sometime prints "Found xxx
 items"; sometimes it does not print that string
In-Reply-To: <15693634.1162340057836.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-662?page=comments#action_12459218 ] 
            
Jiang Lei commented on HADOOP-662:
----------------------------------

Yes, the ls command of unix print different format depends on the type of target. 
But I think if we can provide some option to fit the requirement of this user(if this kind of requirement is general). 
If all think this is unnecessary, we can close the bug? :) thx.

> dfs -ls sometime prints "Found xxx items"; sometimes it does not print that string
> ----------------------------------------------------------------------------------
>
>                 Key: HADOOP-662
>                 URL: http://issues.apache.org/jira/browse/HADOOP-662
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: Jiang Lei
>            Priority: Minor
>
> I get a different response from dfs -ls depending on whether or not the 
> ls contained a directory or a wildcard. The wild card misses the 
> response that tells me how many files.
> It did indeed cause a problem with my scripts. It was easy to filter 
> out. If it's a desired action to do it sometimes and others then that's 
> it's ok. It doesn't seem like this is really the intention so I pointed 
> it out. My script is now happy with both forms. I do really on the fact 
> that the 3 column of the output is the file size. Perhaps I shouldn't be 
> doing this but I am writing some automated scripts in python to drive 
> hadoop so it is useful to check file sizes. If you were to provide a 
> format string that would allow me to place the items in a specific 
> format then you would be free to change it, whenever, however, you wanted.
> -Richard

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 11:31:44 2006
Return-Path: 
 <hadoop-dev-return-6123-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97789 invoked from network); 18 Dec 2006 11:31:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 11:31:44 -0000
Received: (qmail 92425 invoked by uid 500); 18 Dec 2006 11:31:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92171 invoked by uid 500); 18 Dec 2006 11:31:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92162 invoked by uid 99); 18 Dec 2006 11:31:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 03:31:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 03:31:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4F97C714289
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 03:31:22 -0800 (PST)
Message-ID: <27698648.1166441482323.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 03:31:22 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-817) Streaming reducers throw OutOfMemory
 for not so large inputs
In-Reply-To: <30192547.1165933587180.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-817?page=comments#action_12459274 ] 
            
Sanjay Dahiya commented on HADOOP-817:
--------------------------------------

After a bit of profiling i see 4 buffers of size 20971520 (FSDataInputStream.Buffer) and 11 buffers of size 9532509. These are in first and second iteration respectively, and not cleaned up before VM runs out of memory. Trace snapshot attached. debugging further. 

> Streaming reducers throw OutOfMemory for not so large inputs
> ------------------------------------------------------------
>
>                 Key: HADOOP-817
>                 URL: http://issues.apache.org/jira/browse/HADOOP-817
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>
> I am seeing OutOfMemoryError for moderate size inputs (~70 text files, 20k each ) causing job to fail in streaming. For very small inputs it still succeeds. Looking into details. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 11:33:44 2006
Return-Path: 
 <hadoop-dev-return-6124-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98425 invoked from network); 18 Dec 2006 11:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 11:33:44 -0000
Received: (qmail 95495 invoked by uid 500); 18 Dec 2006 11:33:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95247 invoked by uid 500); 18 Dec 2006 11:33:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95235 invoked by uid 99); 18 Dec 2006 11:33:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 03:33:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 03:33:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AE57B714289
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 03:33:22 -0800 (PST)
Message-ID: <23157023.1166441602711.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 03:33:22 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-817) Streaming reducers throw OutOfMemory
 for not so large inputs
In-Reply-To: <30192547.1165933587180.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-817?page=all ]

Sanjay Dahiya updated HADOOP-817:
---------------------------------

    Attachment: NetbeansProfie.png

> Streaming reducers throw OutOfMemory for not so large inputs
> ------------------------------------------------------------
>
>                 Key: HADOOP-817
>                 URL: http://issues.apache.org/jira/browse/HADOOP-817
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>         Attachments: NetbeansProfie.png
>
>
> I am seeing OutOfMemoryError for moderate size inputs (~70 text files, 20k each ) causing job to fail in streaming. For very small inputs it still succeeds. Looking into details. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 19:45:44 2006
Return-Path: 
 <hadoop-dev-return-6125-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87471 invoked from network); 18 Dec 2006 19:45:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 19:45:44 -0000
Received: (qmail 80513 invoked by uid 500); 18 Dec 2006 19:45:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80485 invoked by uid 500); 18 Dec 2006 19:45:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80473 invoked by uid 99); 18 Dec 2006 19:45:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 11:45:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 11:45:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 56E6D714293
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 11:45:22 -0800 (PST)
Message-ID: <31239478.1166471122353.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 11:45:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-814) Increase dfs scalability by
 optimizing locking on namenode.
In-Reply-To: <7461200.1165900101047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-814?page=comments#action_12459439 ] 
            
Hadoop QA commented on HADOOP-814:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347142/heartbeatlock3.patch applied and successfully tested against trunk revision r487715.

> Increase dfs scalability by optimizing locking on namenode.
> -----------------------------------------------------------
>
>                 Key: HADOOP-814
>                 URL: http://issues.apache.org/jira/browse/HADOOP-814
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>         Attachments: heartbeatlock3.patch
>
>
> The current dfs namenode encounters locking bottlenecks when the number of datanodes is large. The namenode uses a single global lock to protect access to data structures. One key area is heartbeat processing. The lower the cost of processing a heartbeat, more the number of nodes HDFS can support.  A simple change to this current locking model can increase the scalability. Here are the details:
> Case 1: Currently we have three locks, the global lock (on FSNamesystem), the heartbeat lock and the datanodeMap lock. The following function is called when a heartbeat is received by the Namenode
> public synchronized FSNamesystem. gotHeartbeat() { ........ (A)
>     synchronized (heartbeat) {                                        ........ (B)
>       synchronized (datanodeMap) {                               ......... (C)
>    ...
>      }
> }
> In the above piece of code, statement (A) acquires the global-FSNamesystem-lock. This synchronization can be safely removed (remove updateStats too). This means that a heartbeat from the datanode can be processed without holding the FSnamesystem-global-lock.
> Case 2: A following thread called the heartbeatCheck thread periodically traverses all known Datanodes to determine if any of them has timed out. It is of the following form:
> void FSNamesystem.heartbeatCheck() {
>             synchronized (this) {                                        ........... (D)
>                         synchronized (heartbeats) {                .............(E) 
> }
> This thread acquires the global-FSNamesystem lock in Statement (D). This statement (D) can be removed. Instead the loop can check to see if any nodes are dead. If a dead node is found, only then it acquires the FSNamesystem-global-lock.
> It is possible that fixing the above two cases will cause HDFS to scale to higher number of nodes.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 19:49:45 2006
Return-Path: 
 <hadoop-dev-return-6126-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88762 invoked from network); 18 Dec 2006 19:49:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 19:49:45 -0000
Received: (qmail 91050 invoked by uid 500); 18 Dec 2006 19:49:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91022 invoked by uid 500); 18 Dec 2006 19:49:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91006 invoked by uid 99); 18 Dec 2006 19:49:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 11:49:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 11:49:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3BAD5714289
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 11:49:23 -0800 (PST)
Message-ID: <17547304.1166471363241.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 11:49:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12459441 ] 
            
Doug Cutting commented on HADOOP-432:
-------------------------------------

> doing this every few minutes is expensive

Yes, walking the entire trash bucket too frequently would be a problem.  So we can either walk it less frequently and/or don't walk the whole thing.  I've proposed bucketing the trash into 10-or-more minute sub-directories, so that only the root trash directory need be listed, and even that should only be listed every 30 or more minutes.

> Creating a folder for every X minutes (how many?) will make restoring a file harder.

But, with globbing, it won't be too hard.  The primary point is not to make restoring files ultra-simple but rather to make it possible.

> an external process reclaiming space needs to be monitored, otherwise files will accumulate in the trash and the dfs will fill up

If the trash is full then folks can empty the trash.  I'm not arguing that we shouldn't start a thread in the namenode that empties the trash, just that this thread should be reusable code, written using the public FileSystem API.

Adding a trash can isn't going to magically resolve space issues.  It will primarily permit folks who accidentally delete things using the command line to recover their files.  With a per-user trash can, folks can easily monitor their trash usage manually if they like, and admins can email users whose trash is large, or even empty it for them.  The cleanup thread is an added feature that reduces the need for manual monitoring.


> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch, undelete17.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 20:08:44 2006
Return-Path: 
 <hadoop-dev-return-6127-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94448 invoked from network); 18 Dec 2006 20:08:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 20:08:44 -0000
Received: (qmail 16674 invoked by uid 500); 18 Dec 2006 20:08:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16653 invoked by uid 500); 18 Dec 2006 20:08:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16644 invoked by uid 99); 18 Dec 2006 20:08:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 12:08:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 12:08:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6BD1171428E
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 12:08:22 -0800 (PST)
Message-ID: <26847735.1166472502438.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 12:08:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-825) If the default file system is set
 using the new uri syntax, the namenode will not start
In-Reply-To: <29816819.1166052982701.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-825?page=all ]

Doug Cutting updated HADOOP-825:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> If the default file system is set using the new uri syntax, the namenode will not start
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-825
>                 URL: http://issues.apache.org/jira/browse/HADOOP-825
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.10.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: namenode-uri.patch
>
>
> The namenode tries to parse the string manually by looking for the first ":" and translating the rest of the string into an integer. This is great, if it is "<host>:<port>", but not if it is "hdfs://<host>:<port>/"

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 20:12:45 2006
Return-Path: 
 <hadoop-dev-return-6128-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95789 invoked from network); 18 Dec 2006 20:12:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 20:12:45 -0000
Received: (qmail 23587 invoked by uid 500); 18 Dec 2006 20:12:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23568 invoked by uid 500); 18 Dec 2006 20:12:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23559 invoked by uid 99); 18 Dec 2006 20:12:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 12:12:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 12:12:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F110A71428E
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 12:12:23 -0800 (PST)
Message-ID: <6922650.1166472743984.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 12:12:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-596) TaskTracker taskstatus's phase doesnt
 get updated on phase transition causing wrong values displayed in WI
In-Reply-To: <31153390.1160570599642.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-596?page=all ]

Doug Cutting updated HADOOP-596:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Sanjay!

> TaskTracker taskstatus's phase doesnt get updated on phase transition causing wrong values displayed in WI
> ----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-596
>                 URL: http://issues.apache.org/jira/browse/HADOOP-596
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.10.0
>
>         Attachments: Hadoop-596.patch
>
>
> On task phase transition from shuffle > sort > reduce, the new phase doesnt get updated in task tracker's cached TaskStatus  causing wrong values displayed in WI. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 20:16:45 2006
Return-Path: 
 <hadoop-dev-return-6129-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97175 invoked from network); 18 Dec 2006 20:16:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 20:16:45 -0000
Received: (qmail 28533 invoked by uid 500); 18 Dec 2006 20:16:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28512 invoked by uid 500); 18 Dec 2006 20:16:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28503 invoked by uid 99); 18 Dec 2006 20:16:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 12:16:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 12:16:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4F05B714293
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 12:16:23 -0800 (PST)
Message-ID: <5978636.1166472983321.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 12:16:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-811) Patch to support multi-threaded
 MapRunnable
In-Reply-To: <15932768.1165852041100.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-811?page=all ]

Doug Cutting updated HADOOP-811:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Alejandro!

> Patch to support multi-threaded MapRunnable
> -------------------------------------------
>
>                 Key: HADOOP-811
>                 URL: http://issues.apache.org/jira/browse/HADOOP-811
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.10.0
>         Environment: all
>            Reporter: Alejandro Abdelnur
>         Assigned To: Doug Cutting
>             Fix For: 0.10.0
>
>         Attachments: diff.txt, diff.txt, MultithreadedMapRunner.java, MultithreadedMapRunner.java
>
>
> The MapRunner calls Mapper.map in a serialized fashion.
> This is suitable for CPU/memory bound operations.
> However, when doing IO bound operations this serialization affects the throughput significantly.
> In order to support IO bound operations more efficiently I've implemented a multithreaded MapRunnable.
> Following is the implementation of this MapRunnable, MultithreadedMapRunner.
> I've only had to modify on method in the existing code (in the Task class) to avoid data corruption in the reporter.
> Index: Task.java
> ===================================================================
> --- Task.java   (revision 485492)
> +++ Task.java   (working copy)
> @@ -153,9 +153,11 @@
>    public Reporter getReporter(final TaskUmbilicalProtocol umbilical,
>                                final Progress progress) throws IOException {
>      return new Reporter() {
> -        public void setStatus(String status) throws IOException {
> -          progress.setStatus(status);
> -          progress();
> +        public void setStatus(String status) throws IOException {
> +          synchronized (this) {
> +            progress.setStatus(status);
> +            progress();
> +          }
>          }
>          public void progress() throws IOException {
>              reportProgress(umbilical);
> -----------------------------------------------------------
> MultithreadedMapRunner.java
> package org.apache.hadoop.mapred;
> import org.apache.hadoop.util.ReflectionUtils;
> import org.apache.hadoop.io.WritableComparable;
> import org.apache.hadoop.io.Writable;
> import org.apache.commons.logging.Log;
> import org.apache.commons.logging.LogFactory;
> import java.io.IOException;
> import java.util.concurrent.ExecutorService;
> import java.util.concurrent.Executors;
> import java.util.concurrent.TimeUnit;
> /**
>  * Multithreaded implementation for @link org.apache.hadoop.mapred.MapRunnable.
>  * <p>
>  * It can be used instead of the default implementation,
>  * @link org.apache.hadoop.mapred.MapRunner, when the Map operation is not CPU
>  * bound in order to improve throughput.
>  * <p>
>  * Map implementations using this MapRunnable must be thread-safe.
>  * <p>
>  * The Map-Reduce job has to be configured to use this MapRunnable class (using
>  * the <b>mapred.map.runner.class</b> property) and
>  * the number of thread the thread-pool can use (using the
>  * <b>mapred.map.multithreadedrunner.threads</b> property).
>  * <p>
>  *
>  * @author Alejandro Abdelnur
>  */
> public class MultithreadedMapRunner implements MapRunnable {
>   private static final Log LOG =
>       LogFactory.getLog(MultithreadedMapRunner.class.getName());
>   private JobConf job;
>   private Mapper mapper;
>   private ExecutorService executorService;
>   private IOException ioException;
>   public void configure(JobConf job) {
>     int numberOfThreads =
>         job.getInt("mapred.map.multithreadedrunner.threads", 10);
>     if (LOG.isDebugEnabled()) {
>       LOG.debug("Configuring job " + job.getJobName() +
>           " to use " + numberOfThreads + " threads" );
>     }
>     this.job = job;
>     this.mapper = (Mapper)ReflectionUtils.newInstance(job.getMapperClass(),
>                                                       job);
>     // Creating a threadpool of the configured size to execute the Mapper
>     // map method in parallel.
>     executorService = Executors.newFixedThreadPool(numberOfThreads);
>   }
>   public void run(RecordReader input, OutputCollector output,
>                   Reporter reporter)
>     throws IOException {
>     try {
>       // allocate key & value instances these objects will not be reused
>       // because execution of Mapper.map is not serialized.
>       WritableComparable key = input.createKey();
>       Writable value = input.createValue();
>       while (input.next(key, value)) {
>         // Run Mapper.map execution asynchronously in a separate thread.
>         // If threads are not available from the thread-pool this method
>         // will block until there is a thread available.
>         executorService.execute(
>             new MTMapperRunable(key, value, output, reporter));
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         if (ioException != null) {
>           throw ioException;
>         }
>         // Allocate new key & value instances as mapper is running in parallel
>         key = input.createKey();
>         value = input.createValue();
>       }
>       if (LOG.isDebugEnabled()) {
>         LOG.debug("Finished dispatching all Mappper.map calls, job "
>             + job.getJobName());
>       }
>       // Graceful shutdown of the Threadpool, it will let all scheduled
>       // Runnables to end.
>       executorService.shutdown();
>       try {
>         // Now waiting for all Runnables to end.
>         while (!executorService.awaitTermination(100, TimeUnit.MILLISECONDS)) {
>           if (LOG.isDebugEnabled()) {
>             LOG.debug("Awaiting all running Mappper.map calls to finish, job "
>                 + job.getJobName());
>           }
>           // Checking if a Mapper.map within a Runnable has generated an
>           // IOException. If so we rethrow it to force an abort of the Map
>           // operation thus keeping the semantics of the default
>           // implementation.
>           // NOTE: while Mapper.map dispatching has concluded there are still
>           // map calls in progress.
>           if (ioException != null) {
>             throw ioException;
>           }
>         }
>         // Checking if a Mapper.map within a Runnable has generated an
>         // IOException. If so we rethrow it to force an abort of the Map
>         // operation thus keeping the semantics of the default
>         // implementation.
>         // NOTE: it could be that a map call has had an exception after the
>         // call for awaitTermination() returing true. And edge case but it
>         // could happen.
>         if (ioException != null) {
>           throw ioException;
>         }
>       }
>       catch (IOException ioEx) {
>         // Forcing a shutdown of all thread of the threadpool and rethrowing
>         // the IOException
>         executorService.shutdownNow();
>         throw ioEx;
>       }
>       catch (InterruptedException iEx) {
>         throw new IOException(iEx.getMessage());
>       }
>     } finally {
>         mapper.close();
>     }
>   }
>   /**
>    * Runnable to execute a single Mapper.map call from a forked thread.
>    */
>   private class MTMapperRunable implements Runnable {
>     private WritableComparable key;
>     private Writable value;
>     private OutputCollector output;
>     private Reporter reporter;
>     /**
>      * Collecting all required parameters to execute a Mapper.map call.
>      * <p>
>      *
>      * @param key
>      * @param value
>      * @param output
>      * @param reporter
>      */
>     public MTMapperRunable(WritableComparable key, Writable value,
>         OutputCollector output, Reporter reporter) {
>       this.key = key;
>       this.value = value;
>       this.output = output;
>       this.reporter = reporter;
>     }
>     /**
>      * Executes a Mapper.map call with the given Mapper and parameters.
>      * <p>
>      * This method is called from the thread-pool thread.
>      *
>      */
>     public void run() {
>       try {
>         // map pair to output
>         MultithreadedMapRunner.this.mapper.map(key, value, output, reporter);
>       }
>       catch (IOException ex) {
>         // If there is an IOException during the call it is set in an instance
>         // variable of the MultithreadedMapRunner from where it will be
>         // rethrown.
>         synchronized (MultithreadedMapRunner.this) {
>           if (MultithreadedMapRunner.this.ioException == null) {
>             MultithreadedMapRunner.this.ioException = ex;
>           }
>         }
>       }
>     }
>   }
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 20:48:49 2006
Return-Path: 
 <hadoop-dev-return-6130-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14447 invoked from network); 18 Dec 2006 20:48:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 20:48:49 -0000
Received: (qmail 71349 invoked by uid 500); 18 Dec 2006 20:48:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71326 invoked by uid 500); 18 Dec 2006 20:48:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71285 invoked by uid 99); 18 Dec 2006 20:48:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 12:48:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 12:48:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 113F6714293
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 12:48:24 -0800 (PST)
Message-ID: <15377660.1166474904068.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 12:48:24 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Doug Cutting updated HADOOP-619:
--------------------------------

    Status: Open  (was: Patch Available)

+      String filename = filePattern.toString();
+      int schemeIdx = filename.lastIndexOf(':');
+      // remove scheme/server/port from path for glob match
+      if( -1 != schemeIdx ){
+        filename = filename.substring(
+            filename.indexOf(Path.SEPARATOR_CHAR, schemeIdx));
+      }

This should not be a string manipulation, but rather use the Path's URI, e.g. simply:

String filename = filePattern.toUri().getPath();

The spacing in this patch is also unusual.

http://java.sun.com/docs/codeconv/html/CodeConventions.doc7.html#682



> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.10.0
>
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch, Hadoop-619_1.patch, Hadoop-619_2.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 21:00:45 2006
Return-Path: 
 <hadoop-dev-return-6131-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19607 invoked from network); 18 Dec 2006 21:00:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 21:00:45 -0000
Received: (qmail 97581 invoked by uid 500); 18 Dec 2006 21:00:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97549 invoked by uid 500); 18 Dec 2006 21:00:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97540 invoked by uid 99); 18 Dec 2006 21:00:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 13:00:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 13:00:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 26292714293
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 13:00:23 -0800 (PST)
Message-ID: <22553491.1166475623153.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 13:00:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-829) Separate the datanode contents that is
 written to the fsimage vs the contents used in over-the-wire communication
In-Reply-To: <20527997.1166159481071.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-829?page=all ]

Doug Cutting updated HADOOP-829:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba!

> Separate the datanode contents that is written to the fsimage vs the contents used in over-the-wire communication
> -----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-829
>                 URL: http://issues.apache.org/jira/browse/HADOOP-829
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>             Fix For: 0.10.0
>
>         Attachments: datanodeserialize1.patch
>
>
> In the existing implementation, the Namenode has a data structure called DatanodeDescriptor. It is used to serialize contents of the Datanode while writing it to the fsimage. The same serialization method is used to send a Datanode object to the Datanode and/or the Client. This introduces the shortcoming that one cannot introduce non-persistent fields in the DatanodeDescriptor.
> One solution is to separate out the following two functionality into two separate classes:
> 1. The fields from a Datanode that are part of the ClientProtocol and/or DatanodeProcotol.
> 2. The fields from a Datanode that are stored in the fsImage.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 21:07:45 2006
Return-Path: 
 <hadoop-dev-return-6132-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22216 invoked from network); 18 Dec 2006 21:07:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 21:07:45 -0000
Received: (qmail 13935 invoked by uid 500); 18 Dec 2006 21:07:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13905 invoked by uid 500); 18 Dec 2006 21:07:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13896 invoked by uid 99); 18 Dec 2006 21:07:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 13:07:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 13:07:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1F529714289
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 13:07:23 -0800 (PST)
Message-ID: <19048831.1166476043125.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 13:07:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-823) DataNode will not start up if any
 directories from dfs.data.dir are missing
In-Reply-To: <13577180.1166037381421.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-823?page=all ]

Doug Cutting updated HADOOP-823:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Bryan!

> DataNode will not start up if any directories from dfs.data.dir are missing
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-823
>                 URL: http://issues.apache.org/jira/browse/HADOOP-823
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Bryan Pendleton
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.10.0
>
>         Attachments: fixDataNodeStartup.patch
>
>
> Minor bug - the list of good directories is generated, but the original list of directories is still used.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 22:01:45 2006
Return-Path: 
 <hadoop-dev-return-6133-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40005 invoked from network); 18 Dec 2006 22:01:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 22:01:45 -0000
Received: (qmail 14822 invoked by uid 500); 18 Dec 2006 22:01:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14794 invoked by uid 500); 18 Dec 2006 22:01:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14761 invoked by uid 99); 18 Dec 2006 22:01:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 14:01:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 14:01:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D6FB0714295
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 14:01:23 -0800 (PST)
Message-ID: <21696316.1166479283878.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 14:01:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-451) Add a Split interface
In-Reply-To: <24919314.1155330613896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-451?page=all ]

Doug Cutting updated HADOOP-451:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> Add a Split interface
> ---------------------
>
>                 Key: HADOOP-451
>                 URL: http://issues.apache.org/jira/browse/HADOOP-451
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Doug Cutting
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: input-split-2.patch, input-split.patch
>
>
> The InputFormat interface has a method:
> FileSplit[] getSplits();
> This should change to:
> Split[] getSplits();
> The Split interface would look like:
> public interface Split extends Writable {
>   /** Returns a list of hosts that contain this split.
>        This is only used to optimize task placement, so this may be empty. */
>   String[] getLocations(FileSystem fs);
>   /** The relative, estimated cost of operating on this.  Typically the size of the data in the split.
>        Used to prioritize tasks in a job (high-cost tasks are run first).  */
>    long getCost();
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 22:42:00 2006
Return-Path: 
 <hadoop-dev-return-6134-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53165 invoked from network); 18 Dec 2006 22:42:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 22:42:00 -0000
Received: (qmail 73030 invoked by uid 500); 18 Dec 2006 22:42:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72993 invoked by uid 500); 18 Dec 2006 22:42:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72959 invoked by uid 99); 18 Dec 2006 22:42:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 14:42:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 14:41:52 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D4ADB7142AB
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 14:41:32 -0800 (PST)
Message-ID: <2973187.1166481692868.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 14:41:32 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-814) Increase dfs scalability by optimizing
 locking on namenode.
In-Reply-To: <7461200.1165900101047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-814?page=all ]

Doug Cutting updated HADOOP-814:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba!

> Increase dfs scalability by optimizing locking on namenode.
> -----------------------------------------------------------
>
>                 Key: HADOOP-814
>                 URL: http://issues.apache.org/jira/browse/HADOOP-814
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>             Fix For: 0.10.0
>
>         Attachments: heartbeatlock3.patch
>
>
> The current dfs namenode encounters locking bottlenecks when the number of datanodes is large. The namenode uses a single global lock to protect access to data structures. One key area is heartbeat processing. The lower the cost of processing a heartbeat, more the number of nodes HDFS can support.  A simple change to this current locking model can increase the scalability. Here are the details:
> Case 1: Currently we have three locks, the global lock (on FSNamesystem), the heartbeat lock and the datanodeMap lock. The following function is called when a heartbeat is received by the Namenode
> public synchronized FSNamesystem. gotHeartbeat() { ........ (A)
>     synchronized (heartbeat) {                                        ........ (B)
>       synchronized (datanodeMap) {                               ......... (C)
>    ...
>      }
> }
> In the above piece of code, statement (A) acquires the global-FSNamesystem-lock. This synchronization can be safely removed (remove updateStats too). This means that a heartbeat from the datanode can be processed without holding the FSnamesystem-global-lock.
> Case 2: A following thread called the heartbeatCheck thread periodically traverses all known Datanodes to determine if any of them has timed out. It is of the following form:
> void FSNamesystem.heartbeatCheck() {
>             synchronized (this) {                                        ........... (D)
>                         synchronized (heartbeats) {                .............(E) 
> }
> This thread acquires the global-FSNamesystem lock in Statement (D). This statement (D) can be removed. Instead the loop can check to see if any nodes are dead. If a dead node is found, only then it acquires the FSNamesystem-global-lock.
> It is possible that fixing the above two cases will cause HDFS to scale to higher number of nodes.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 23:00:45 2006
Return-Path: 
 <hadoop-dev-return-6135-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57208 invoked from network); 18 Dec 2006 23:00:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 23:00:45 -0000
Received: (qmail 95307 invoked by uid 500); 18 Dec 2006 23:00:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95283 invoked by uid 500); 18 Dec 2006 23:00:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95274 invoked by uid 99); 18 Dec 2006 23:00:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 15:00:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 15:00:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 25E5F714293
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 15:00:24 -0800 (PST)
Message-ID: <32010188.1166482824152.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 15:00:24 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-783) Hadoop dfs -put and -get accept '-' to
 indicate stdin/stdout
In-Reply-To: <10710218.1165370781063.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-783?page=all ]

Wendy Chien updated HADOOP-783:
-------------------------------

    Attachment: getput4.patch

> Hadoop dfs -put and -get accept '-' to indicate stdin/stdout
> ------------------------------------------------------------
>
>                 Key: HADOOP-783
>                 URL: http://issues.apache.org/jira/browse/HADOOP-783
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Marco Nicosia
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: getput4.patch
>
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 23:00:56 2006
Return-Path: 
 <hadoop-dev-return-6136-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57300 invoked from network); 18 Dec 2006 23:00:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 23:00:56 -0000
Received: (qmail 96117 invoked by uid 500); 18 Dec 2006 23:01:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96079 invoked by uid 500); 18 Dec 2006 23:01:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96060 invoked by uid 99); 18 Dec 2006 23:01:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 15:01:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 15:00:53 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 305BE7142AB
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 15:00:33 -0800 (PST)
Message-ID: <13272069.1166482833195.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 15:00:33 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-783) Hadoop dfs -put and -get accept '-' to
 indicate stdin/stdout
In-Reply-To: <10710218.1165370781063.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-783?page=all ]

Wendy Chien updated HADOOP-783:
-------------------------------

    Status: Patch Available  (was: Open)

> Hadoop dfs -put and -get accept '-' to indicate stdin/stdout
> ------------------------------------------------------------
>
>                 Key: HADOOP-783
>                 URL: http://issues.apache.org/jira/browse/HADOOP-783
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Marco Nicosia
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: getput4.patch
>
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 23:05:45 2006
Return-Path: 
 <hadoop-dev-return-6137-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58469 invoked from network); 18 Dec 2006 23:05:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 23:05:45 -0000
Received: (qmail 2678 invoked by uid 500); 18 Dec 2006 23:05:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2652 invoked by uid 500); 18 Dec 2006 23:05:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2643 invoked by uid 99); 18 Dec 2006 23:05:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 15:05:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 15:05:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3A1FD714293
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 15:05:23 -0800 (PST)
Message-ID: <5169884.1166483123235.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 15:05:23 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-785) Divide the server and client
 configurations
In-Reply-To: <4048066.1165393281134.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-785?page=comments#action_12459492 ] 
            
Milind Bhandarkar commented on HADOOP-785:
------------------------------------------

Request for Comments
--------------------------------

Separating Server and Client Configuration
------------------------------------------

Current mechanisms for configuring Hadoop daemons and specifying job-specific
details using a single Configuration object is confusing and error-prone. The
overall goal of this proposal is to make it more intuitive, and thus, less
prone to errors.

Detailed Goals:
---------------

1. Separate configuration variables according to the contexts in which they are
used. There are two contexts in which the configuration variables are used
currently. Those that are used in the server context by Hadoop daemons
(Namenode, Datanodes, Jobtracker and TaskTrackers) and those that are used in
the client context by running jobs (either jobs that use the MapReduce
framework or standalone jobs that are DFSClients).

2. Allow job-specific configuration as a way to pass job-wide parameters from
JobClient to individual tasks that belong to the job. This also includes
frameworks built on top of the MapReduce framework, such as Hadoop Streaming.

3. Provide documentation for all parameters used in both server and client
contexts in default configuration resources.

4. Examining the need for each configuration parameter used in Hadoop code,
and eliminating unnecessary parameters for which we see no need of overriding
the default values.

5. Provide mechanisms to detect configuration errors as early as possible.

Configuration Parameters Used In Hadoop
---------------------------------------

Configuration parameters used in Hadoop codebase are either used in
server-context (dfs.name.dir, mapred.local.dir), in Client context
(dfs.replication, mapred.map.tasks), or both (fs.default.name). All the
configuration parameters should have default values specified in the default
configuration files. In addition, we need to enforce that the server-context
parameters cannot be overridden from the client-context, and vice-versa.

Client configurations have effect during the lifetime of the client and the
artifacts that it created. For example, the replication factor configured in
the HDFS client would remain the default for only that client and for the files
that the client created during its lifetime. Similarly, configuration of the
JobClient would remain effective for the jobs that the JobClient created during
its lifetime.

Apart from the configuration parameters used in Hadoop, individual jobs or
frameworks built on top of Hadoop may use their own configuration parameters as
means of communication from job-client to the job. We need to make sure that
these parameters do not conflict with parameters used in Hadoop.

For common parameters, such as dfs.replication, which are used in the
server-context and can be overridden in the client-context per file, we need to
make sure that such parameters are bounded by upper and lower bounds specified
in the server configuration.

Class Hierarchy
---------------

In order to implement the requirements outlined above, we propose the following
class hierarchy, and the default and final resources that they load.

Configuration (common-defaults.xml, common-final.xml)
|
+---ServerConfiguration (common-defauls.xml, server-defaults.xml, server-final.xml, common-final.xml)
|
+---ClientConfiguration (common-defauls.xml, client-defaults.xml, common-final.xml)
|
+---AppConfiguration (common-defauls.xml, client-defaults.xml, common-final.xml)

New configuration parameters and default-overrides are specified between the
default resources and final resources. If a parameter exists in final resource
already, then it cannot be overridden. Thus, server-final and common-final
corresponds to current hadoop-site.xml.

common-defaults.xml should contains parameters that are used in both server and
client contexts, such as ipc.*, io.*, fs.*, user.* parameters. common-final.xml
overrides selected parameters in common-defaults.xml.

Generated job.xml file would contain parameters not specified in *-defaults.xml
resources.

Other Proposals
---------------

In order to ensure that all configuration parameters used in the Hadoop
codebase are documented in the configuration files, the default value specified
in the Configuration.get* methods should be eliminated. This ensures that *ALL*
configuration parameters have exactly one default value in the configuration
files. If a given parameter is somehow not defined in any of the configuration
resources, these methods would throw an exception called ConfigurationException.

Direct use of Configuration.get* and Configuration.set* methods be allowed only
from classes that derive from Configuration. That is, these methods should be
protected. One should use static methods such as

JobConf.setNumMapTasks(ClientConfiguration conf, int num);

or

HdfsClient.setReplication(ClientConfiguration, int num);

in order to access or modify Configuration. This allows us to change parameter
names used in Hadoop without changing the application codes.

The AppConfiguration class is the only configuration class that allows usage of
get* and set* methods directly. However, the ClientConfiguration class is the
only way to communicate from JobClient to the Application. We would provide a
static method:

JobConf.setAppConfiguration(ClientConfiguration, AppConfiguration);

to merge  the application (or framework configuration) with JobConf. This
allows us to check that the application or framework configuration does not try
to reuse the same configuration parameters for different purposes.



> Divide the server and client configurations
> -------------------------------------------
>
>                 Key: HADOOP-785
>                 URL: http://issues.apache.org/jira/browse/HADOOP-785
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>    Affects Versions: 0.9.0
>            Reporter: Owen O'Malley
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.10.0
>
>
> The configuration system is easy to misconfigure and I think we need to strongly divide the server from client configs. 
> An example of the problem was a configuration where the task tracker has a hadoop-site.xml that set mapred.reduce.tasks to 1. Therefore, the job tracker had the right number of reduces, but the map task thought there was a single reduce. This lead to a hard to find diagnose failure.
> Therefore, I propose separating out the configuration types as:
> class Configuration;
> // reads site-default.xml, hadoop-default.xml
> class ServerConf extends Configuration;
> // reads hadoop-server.xml, $super
> class DfsServerConf extends ServerConf;
> // reads dfs-server.xml, $super
> class MapRedServerConf extends ServerConf;
> // reads mapred-server.xml, $super
> class ClientConf extends Configuration;
> // reads hadoop-client.xml, $super
> class JobConf extends ClientConf;
> // reads job.xml, $super
> Note in particular, that nothing corresponds to hadoop-site.xml, which overrides both client and server configs. Furthermore, the properties from the *-default.xml files should never be saved into the job.xml.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 23:05:50 2006
Return-Path: 
 <hadoop-dev-return-6138-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58566 invoked from network); 18 Dec 2006 23:05:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 23:05:50 -0000
Received: (qmail 3230 invoked by uid 500); 18 Dec 2006 23:05:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3201 invoked by uid 500); 18 Dec 2006 23:05:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3128 invoked by uid 99); 18 Dec 2006 23:05:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 15:05:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 15:05:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 70E7271429F
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 15:05:25 -0800 (PST)
Message-ID: <9748187.1166483125458.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 15:05:25 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-783) Hadoop dfs -put and -get accept '-' to
 indicate stdin/stdout
In-Reply-To: <10710218.1165370781063.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-783?page=all ]

Wendy Chien updated HADOOP-783:
-------------------------------

    Status: Open  (was: Patch Available)

> Hadoop dfs -put and -get accept '-' to indicate stdin/stdout
> ------------------------------------------------------------
>
>                 Key: HADOOP-783
>                 URL: http://issues.apache.org/jira/browse/HADOOP-783
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Marco Nicosia
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: getput4.patch
>
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 18 23:05:51 2006
Return-Path: 
 <hadoop-dev-return-6139-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58595 invoked from network); 18 Dec 2006 23:05:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 23:05:51 -0000
Received: (qmail 3625 invoked by uid 500); 18 Dec 2006 23:05:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3604 invoked by uid 500); 18 Dec 2006 23:05:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3594 invoked by uid 99); 18 Dec 2006 23:05:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 15:05:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 15:05:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AEC27714289
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 15:05:27 -0800 (PST)
Message-ID: <28942321.1166483127685.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 15:05:27 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-525) Need raw comparators for hadoop
 record types
In-Reply-To: <23311423.1158101362457.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-525?page=all ]

Work on HADOOP-525 started by Milind Bhandarkar.

> Need raw comparators for hadoop record types
> --------------------------------------------
>
>                 Key: HADOOP-525
>                 URL: http://issues.apache.org/jira/browse/HADOOP-525
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>         Attachments: TypeBuilder-support.tar, TypeBuilder.java, WordCountType.java
>
>
> Raw comparators are not generated for types that are generated with the Hadoop record framework. This could have a substantial performance impact when using hadoop record generated types in Map/Reduce. The record i/o framework should auto-generate raw comparators for types.
> Comparison for hadoop record i/o types is defined to be member wise comparison of objects. A possible implementation could only deserialize one member from each object at a time, compare them and either return or move on to the next member if the values are equal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 19 00:22:42 2006
Return-Path: 
 <hadoop-dev-return-6140-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71383 invoked from network); 19 Dec 2006 00:22:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 00:22:42 -0000
Received: (qmail 87935 invoked by uid 500); 19 Dec 2006 00:22:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87801 invoked by uid 500); 19 Dec 2006 00:22:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87765 invoked by uid 99); 19 Dec 2006 00:22:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 16:22:38 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_ID,NO_REAL_NAME,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received: from [140.211.11.75] (HELO lucene.zones.apache.org) (140.211.11.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 16:22:28 -0800
Received: from lucene.zones.apache.org (localhost [127.0.0.1])
	by lucene.zones.apache.org (8.13.7+Sun/8.13.7) with SMTP id kBJ0M7pS001238
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 00:22:07 GMT
Message-Id: <200612190022.kBJ0M7pS001238@lucene.zones.apache.org>
Date: Tue, 19 Dec 2006 00:22:07 +0000
Subject: Hadoop nightly build failure
From: hadoop-dev@lucene.apache.org
To: hadoop-dev@lucene.apache.org
X-Mailer: org.apache.tools.mail.MailMessage (ant.apache.org)
X-Virus-Checked: Checked by ClamAV on apache.org


init:
    [mkdir] Created dir: /tmp/hadoop-nightly/build
    [mkdir] Created dir: /tmp/hadoop-nightly/build/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/src
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/task/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/job/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/dfs/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/datanode/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/examples
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/testjar
     [copy] Copying 6 files to /tmp/hadoop-nightly/build/webapps
     [copy] Copying 4 files to /tmp/hadoop-nightly/conf
     [copy] Copying /tmp/hadoop-nightly/conf/slaves.template to /tmp/hadoop-nightly/conf/slaves
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-site.xml.template to /tmp/hadoop-nightly/conf/hadoop-site.xml
     [copy] Copying /tmp/hadoop-nightly/conf/mapred-default.xml.template to /tmp/hadoop-nightly/conf/mapred-default.xml
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-env.sh.template to /tmp/hadoop-nightly/conf/hadoop-env.sh
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: whoami: not found

record-parser:

compile-core-classes:
    [javac] Compiling 283 source files to /tmp/hadoop-nightly/build/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-native:

compile-core:

compile-examples:
    [javac] Compiling 7 source files to /tmp/hadoop-nightly/build/examples
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-test:
    [javac] Compiling 71 source files to /tmp/hadoop-nightly/build/test/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] Compiling 1 source file to /tmp/hadoop-nightly/build/test/testjar
      [jar] Building jar: /tmp/hadoop-nightly/build/test/testjar/testjob.jar
      [jar] Building jar: /tmp/hadoop-nightly/build/hadoop-nightly-test.jar
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache

test-core:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/data
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/logs
    [junit] Running org.apache.hadoop.conf.TestConfiguration
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 1.419 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSMkdirs
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 20.184 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSShell
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 14.927 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSShellGenericOptions
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 10.134 sec
    [junit] Running org.apache.hadoop.dfs.TestFileCorruption
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 8.617 sec
    [junit] Running org.apache.hadoop.dfs.TestFsck
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 9.382 sec
    [junit] Running org.apache.hadoop.dfs.TestLocalDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 7.856 sec
    [junit] Running org.apache.hadoop.dfs.TestPread
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 7.643 sec
    [junit] Running org.apache.hadoop.dfs.TestReplication
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 23.191 sec
    [junit] Running org.apache.hadoop.dfs.TestRestartDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 17.75 sec
    [junit] Running org.apache.hadoop.dfs.TestSeekBug
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 7.152 sec
    [junit] Running org.apache.hadoop.dfs.TestSmallBlock
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 7.906 sec
    [junit] Running org.apache.hadoop.fs.TestCopyFiles
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 28.686 sec
    [junit] Running org.apache.hadoop.fs.TestDFSIO
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 9.178 sec
    [junit] Running org.apache.hadoop.fs.TestFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 5.647 sec
    [junit] Running org.apache.hadoop.fs.TestGlobPaths
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 5.962 sec
    [junit] Running org.apache.hadoop.fs.TestLocalFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.338 sec
    [junit] Running org.apache.hadoop.fs.TestPath
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.029 sec
    [junit] Running org.apache.hadoop.fs.s3.TestINode
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.01 sec
    [junit] Running org.apache.hadoop.fs.s3.TestInMemoryS3FileSystem
    [junit] Tests run: 12, Failures: 0, Errors: 0, Time elapsed: 0.991 sec
    [junit] Running org.apache.hadoop.io.TestArrayFile
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 3.81 sec
    [junit] Running org.apache.hadoop.io.TestBytesWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.023 sec
    [junit] Running org.apache.hadoop.io.TestMD5Hash
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.332 sec
    [junit] Running org.apache.hadoop.io.TestSequenceFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 16.898 sec
    [junit] Running org.apache.hadoop.io.TestSetFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.841 sec
    [junit] Running org.apache.hadoop.io.TestText
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.747 sec
    [junit] Running org.apache.hadoop.io.TestTextNonUTF8
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.018 sec
    [junit] Running org.apache.hadoop.io.TestUTF8
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.177 sec
    [junit] Running org.apache.hadoop.io.TestVersionedWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.031 sec
    [junit] Running org.apache.hadoop.io.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.012 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodec
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 1.712 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodecFactory
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.419 sec
    [junit] Running org.apache.hadoop.ipc.TestIPC
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.609 sec
    [junit] Running org.apache.hadoop.ipc.TestRPC
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.138 sec
    [junit] Running org.apache.hadoop.mapred.TestEmptyJobWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 11.392 sec
    [junit] Running org.apache.hadoop.mapred.TestMapRed
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 14.283 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRBringup
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.758 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRClasspath
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 30.066 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRDFSCaching
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 28.907 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRLocalFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 115.136 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 20.202 sec
    [junit] Test org.apache.hadoop.mapred.TestMiniMRWithDFS FAILED
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFilter
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 13.924 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFormat
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 6.06 sec
    [junit] Running org.apache.hadoop.mapred.TestTextInputFormat
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 5.326 sec
    [junit] Running org.apache.hadoop.mapred.jobcontrol.TestJobControl
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 78.698 sec
    [junit] Running org.apache.hadoop.record.test.TestMapRed
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 5.298 sec
    [junit] Running org.apache.hadoop.record.test.TestRecordIO
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.305 sec
    [junit] Running org.apache.hadoop.record.test.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.112 sec

BUILD FAILED
/tmp/hadoop-nightly/build.xml:389: Tests failed!

Total time: 10 minutes 25 seconds



From MAILER-DAEMON Tue Dec 19 04:08:47 2006
Return-Path: 
 <hadoop-dev-return-6141-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23496 invoked from network); 19 Dec 2006 04:08:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 04:08:47 -0000
Received: (qmail 94238 invoked by uid 500); 19 Dec 2006 04:08:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94220 invoked by uid 500); 19 Dec 2006 04:08:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94211 invoked by uid 99); 19 Dec 2006 04:08:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 20:08:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 20:08:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 51FDF714295
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 20:08:25 -0800 (PST)
Message-ID: <1377457.1166501305331.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 20:08:25 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-783) Hadoop dfs -put and -get accept '-' to
 indicate stdin/stdout
In-Reply-To: <10710218.1165370781063.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-783?page=all ]

Wendy Chien updated HADOOP-783:
-------------------------------

    Attachment:     (was: getput4.patch)

> Hadoop dfs -put and -get accept '-' to indicate stdin/stdout
> ------------------------------------------------------------
>
>                 Key: HADOOP-783
>                 URL: http://issues.apache.org/jira/browse/HADOOP-783
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Marco Nicosia
>         Assigned To: Wendy Chien
>            Priority: Minor
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 19 04:10:44 2006
Return-Path: 
 <hadoop-dev-return-6142-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23842 invoked from network); 19 Dec 2006 04:10:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 04:10:44 -0000
Received: (qmail 95361 invoked by uid 500); 19 Dec 2006 04:10:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95327 invoked by uid 500); 19 Dec 2006 04:10:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95318 invoked by uid 99); 19 Dec 2006 04:10:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 20:10:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 20:10:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 16FDB714289
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 20:10:23 -0800 (PST)
Message-ID: <24111033.1166501423091.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 20:10:23 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-783) Hadoop dfs -put and -get accept '-' to
 indicate stdin/stdout
In-Reply-To: <10710218.1165370781063.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-783?page=all ]

Wendy Chien updated HADOOP-783:
-------------------------------

    Attachment: getput5.patch

Adds ability to use stdin/stdout as options to put/get. (get to stdout works like cat)  

> Hadoop dfs -put and -get accept '-' to indicate stdin/stdout
> ------------------------------------------------------------
>
>                 Key: HADOOP-783
>                 URL: http://issues.apache.org/jira/browse/HADOOP-783
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Marco Nicosia
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: getput5.patch
>
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 19 04:10:47 2006
Return-Path: 
 <hadoop-dev-return-6143-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23885 invoked from network); 19 Dec 2006 04:10:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 04:10:47 -0000
Received: (qmail 95753 invoked by uid 500); 19 Dec 2006 04:10:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95590 invoked by uid 500); 19 Dec 2006 04:10:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95581 invoked by uid 99); 19 Dec 2006 04:10:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 20:10:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 20:10:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 92AB1714293
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 20:10:25 -0800 (PST)
Message-ID: <18017454.1166501425598.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 20:10:25 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-783) Hadoop dfs -put and -get accept '-' to
 indicate stdin/stdout
In-Reply-To: <10710218.1165370781063.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-783?page=all ]

Wendy Chien updated HADOOP-783:
-------------------------------

    Status: Patch Available  (was: Open)

> Hadoop dfs -put and -get accept '-' to indicate stdin/stdout
> ------------------------------------------------------------
>
>                 Key: HADOOP-783
>                 URL: http://issues.apache.org/jira/browse/HADOOP-783
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Marco Nicosia
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: getput5.patch
>
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 19 04:22:44 2006
Return-Path: 
 <hadoop-dev-return-6144-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26113 invoked from network); 19 Dec 2006 04:22:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 04:22:44 -0000
Received: (qmail 1726 invoked by uid 500); 19 Dec 2006 04:22:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1483 invoked by uid 500); 19 Dec 2006 04:22:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1472 invoked by uid 99); 19 Dec 2006 04:22:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 20:22:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 20:22:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0E537714293
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 20:22:23 -0800 (PST)
Message-ID: <3669337.1166502143055.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 20:22:23 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-783) Hadoop dfs -put and -get accept '-' to
 indicate stdin/stdout
In-Reply-To: <10710218.1165370781063.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-783?page=all ]

Wendy Chien updated HADOOP-783:
-------------------------------

    Attachment:     (was: getput5.patch)

> Hadoop dfs -put and -get accept '-' to indicate stdin/stdout
> ------------------------------------------------------------
>
>                 Key: HADOOP-783
>                 URL: http://issues.apache.org/jira/browse/HADOOP-783
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Marco Nicosia
>         Assigned To: Wendy Chien
>            Priority: Minor
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 19 04:24:49 2006
Return-Path: 
 <hadoop-dev-return-6145-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26982 invoked from network); 19 Dec 2006 04:24:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 04:24:49 -0000
Received: (qmail 3852 invoked by uid 500); 19 Dec 2006 04:24:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3818 invoked by uid 500); 19 Dec 2006 04:24:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3809 invoked by uid 99); 19 Dec 2006 04:24:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 20:24:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 20:24:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 17B6E714289
	for <hadoop-dev@lucene.apache.org>; Mon, 18 Dec 2006 20:24:23 -0800 (PST)
Message-ID: <4605771.1166502263094.JavaMail.jira@brutus>
Date: Mon, 18 Dec 2006 20:24:23 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-783) Hadoop dfs -put and -get accept '-' to
 indicate stdin/stdout
In-Reply-To: <10710218.1165370781063.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-783?page=all ]

Wendy Chien updated HADOOP-783:
-------------------------------

    Attachment: getput6.patch

> Hadoop dfs -put and -get accept '-' to indicate stdin/stdout
> ------------------------------------------------------------
>
>                 Key: HADOOP-783
>                 URL: http://issues.apache.org/jira/browse/HADOOP-783
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Marco Nicosia
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: getput6.patch
>
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 19 21:12:51 2006
Return-Path: 
 <hadoop-dev-return-6146-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77558 invoked from network); 19 Dec 2006 21:12:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 21:12:51 -0000
Received: (qmail 80734 invoked by uid 500); 19 Dec 2006 21:12:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80510 invoked by uid 500); 19 Dec 2006 21:12:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80501 invoked by uid 99); 19 Dec 2006 21:12:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 13:12:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 13:12:49 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7DE777141BE
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 13:12:27 -0800 (PST)
Message-ID: <33186306.1166562747512.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 13:12:27 -0800 (PST)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-332) Implement remote replication of dfs
 namespace images and transaction logs
In-Reply-To: <10603792.1151562509899.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-332?page=all ]

Sameer Paranjpye resolved HADOOP-332.
-------------------------------------

    Resolution: Duplicate

Duplicate of HADOOP-90

> Implement remote replication of dfs namespace images and transaction logs
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-332
>                 URL: http://issues.apache.org/jira/browse/HADOOP-332
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace information (image and transaction logs) needs to be replicated on hosts other than the namenode to prevent data loss if a namenode crashes. In the short term we will add a new protocol to the datanodes to receive and store the namespace information.
> In the long term, it would be nice to have read-only namenodes that could receive the information and serve it up for users that want to read data, but do not need to write to the namespace.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 19 23:18:42 2006
Return-Path: 
 <hadoop-dev-return-6147-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6906 invoked from network); 19 Dec 2006 23:18:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 23:18:42 -0000
Received: (qmail 53263 invoked by uid 500); 19 Dec 2006 23:18:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53194 invoked by uid 500); 19 Dec 2006 23:18:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53166 invoked by uid 99); 19 Dec 2006 23:18:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 15:18:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 15:18:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 086CF714289
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 15:18:21 -0800 (PST)
Message-ID: <14671749.1166570301031.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 15:18:21 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-835) conf not set for the default Codec
 when initializing a Reader for a record-compressed sequence file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

conf not set for the default Codec when initializing a Reader for a record-compressed sequence file
---------------------------------------------------------------------------------------------------

                 Key: HADOOP-835
                 URL: http://issues.apache.org/jira/browse/HADOOP-835
             Project: Hadoop
          Issue Type: Bug
          Components: io
    Affects Versions: 0.9.2
            Reporter: Hairong Kuang
         Assigned To: Hairong Kuang
             Fix For: 0.10.0


Because the conf field of a default Codec does not get set when initializing a reader for a record-compressed sequence file, a NullPointerException is thrown when attempting to create an input stream for the default Codec as shown in the following stack trace:

java.lang.NullPointerException
	at org.apache.hadoop.io.compress.DefaultCodec.createInputStream(DefaultCodec.java:59)
	at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:1004)
	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:927)
	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:918)
	at org.apache.hadoop.mapred.SequenceFileRecordReader.(SequenceFileRecordReader.java:39)
	at org.apache.hadoop.mapred.SequenceFileInputFormat.getRecordReader(SequenceFileInputFormat.java:55)
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:180)
	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1388)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 19 23:22:44 2006
Return-Path: 
 <hadoop-dev-return-6148-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7807 invoked from network); 19 Dec 2006 23:22:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 23:22:44 -0000
Received: (qmail 57205 invoked by uid 500); 19 Dec 2006 23:22:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56964 invoked by uid 500); 19 Dec 2006 23:22:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56955 invoked by uid 99); 19 Dec 2006 23:22:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 15:22:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 15:22:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 330717141BE
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 15:22:23 -0800 (PST)
Message-ID: <4344936.1166570543206.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 15:22:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-783) Hadoop dfs -put and -get accept '-'
 to indicate stdin/stdout
In-Reply-To: <10710218.1165370781063.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-783?page=comments#action_12459789 ] 
            
Hadoop QA commented on HADOOP-783:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347462/getput6.patch applied and successfully tested against trunk revision r488444.

> Hadoop dfs -put and -get accept '-' to indicate stdin/stdout
> ------------------------------------------------------------
>
>                 Key: HADOOP-783
>                 URL: http://issues.apache.org/jira/browse/HADOOP-783
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Marco Nicosia
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: getput6.patch
>
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 19 23:33:42 2006
Return-Path: 
 <hadoop-dev-return-6149-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10014 invoked from network); 19 Dec 2006 23:33:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 23:33:42 -0000
Received: (qmail 74679 invoked by uid 500); 19 Dec 2006 23:33:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74437 invoked by uid 500); 19 Dec 2006 23:33:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74428 invoked by uid 99); 19 Dec 2006 23:33:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 15:33:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 15:33:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 243097141BE
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 15:33:21 -0800 (PST)
Message-ID: <32781184.1166571201144.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 15:33:21 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-836) unit tests fail on windows
 (/C:/cygwin/... is invalid)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

unit tests fail on windows (/C:/cygwin/... is invalid)
------------------------------------------------------

                 Key: HADOOP-836
                 URL: http://issues.apache.org/jira/browse/HADOOP-836
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.10.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.10.0


Under windows, I get the following exception from some of the unit tests:

java.io.IOException: Invalid file name: /C:/cygwin/home/hadoopwin/owen/hadoop/build/test/mapre
d/local/50062_0/taskTracker/jobcache/job_0001/task_0001_m_000002_0/.split.dta.crc
        at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:416)
        at org.apache.hadoop.dfs.NameNode.create(NameNode.java:238)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:2
5)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:337)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:538)



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 19 23:33:44 2006
Return-Path: 
 <hadoop-dev-return-6150-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10063 invoked from network); 19 Dec 2006 23:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 23:33:44 -0000
Received: (qmail 74947 invoked by uid 500); 19 Dec 2006 23:33:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74713 invoked by uid 500); 19 Dec 2006 23:33:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74704 invoked by uid 99); 19 Dec 2006 23:33:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 15:33:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 15:33:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9ECF5714295
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 15:33:22 -0800 (PST)
Message-ID: <19292173.1166571202647.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 15:33:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-836) unit tests fail on windows
 (/C:/cygwin/... is invalid)
In-Reply-To: <32781184.1166571201144.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-836?page=all ]

Owen O'Malley updated HADOOP-836:
---------------------------------

    Description: 
Under windows, I get the following exception from some of the unit tests:

java.io.IOException: Invalid file name: /C:/cygwin/home/hadoopwin/owen/hadoop/build/test/mapre
d/local/50062_0/taskTracker/jobcache/job_0001/task_0001_m_000002_0/.split.dta.crc
        at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:416)
        at org.apache.hadoop.dfs.NameNode.create(NameNode.java:238)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:337)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:538)



  was:
Under windows, I get the following exception from some of the unit tests:

java.io.IOException: Invalid file name: /C:/cygwin/home/hadoopwin/owen/hadoop/build/test/mapre
d/local/50062_0/taskTracker/jobcache/job_0001/task_0001_m_000002_0/.split.dta.crc
        at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:416)
        at org.apache.hadoop.dfs.NameNode.create(NameNode.java:238)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:2
5)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:337)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:538)




> unit tests fail on windows (/C:/cygwin/... is invalid)
> ------------------------------------------------------
>
>                 Key: HADOOP-836
>                 URL: http://issues.apache.org/jira/browse/HADOOP-836
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.10.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>
> Under windows, I get the following exception from some of the unit tests:
> java.io.IOException: Invalid file name: /C:/cygwin/home/hadoopwin/owen/hadoop/build/test/mapre
> d/local/50062_0/taskTracker/jobcache/job_0001/task_0001_m_000002_0/.split.dta.crc
>         at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:416)
>         at org.apache.hadoop.dfs.NameNode.create(NameNode.java:238)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:337)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:538)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 19 23:51:43 2006
Return-Path: 
 <hadoop-dev-return-6151-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13034 invoked from network); 19 Dec 2006 23:51:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 23:51:43 -0000
Received: (qmail 99661 invoked by uid 500); 19 Dec 2006 23:51:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99426 invoked by uid 500); 19 Dec 2006 23:51:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99417 invoked by uid 99); 19 Dec 2006 23:51:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 15:51:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 15:51:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5B60F7141BE
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 15:51:22 -0800 (PST)
Message-ID: <6117109.1166572282371.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 15:51:22 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-835) conf not set for the default Codec
 when initializing a Reader for a record-compressed sequence file
In-Reply-To: <14671749.1166570301031.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-835?page=all ]

Hairong Kuang updated HADOOP-835:
---------------------------------

    Status: Patch Available  (was: Open)

> conf not set for the default Codec when initializing a Reader for a record-compressed sequence file
> ---------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-835
>                 URL: http://issues.apache.org/jira/browse/HADOOP-835
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.9.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.10.0
>
>         Attachments: default_codec.patch
>
>
> Because the conf field of a default Codec does not get set when initializing a reader for a record-compressed sequence file, a NullPointerException is thrown when attempting to create an input stream for the default Codec as shown in the following stack trace:
> java.lang.NullPointerException
> 	at org.apache.hadoop.io.compress.DefaultCodec.createInputStream(DefaultCodec.java:59)
> 	at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:1004)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:927)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:918)
> 	at org.apache.hadoop.mapred.SequenceFileRecordReader.(SequenceFileRecordReader.java:39)
> 	at org.apache.hadoop.mapred.SequenceFileInputFormat.getRecordReader(SequenceFileInputFormat.java:55)
> 	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:180)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1388)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 19 23:51:45 2006
Return-Path: 
 <hadoop-dev-return-6152-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13079 invoked from network); 19 Dec 2006 23:51:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 23:51:45 -0000
Received: (qmail 99722 invoked by uid 500); 19 Dec 2006 23:51:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99690 invoked by uid 500); 19 Dec 2006 23:51:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99679 invoked by uid 99); 19 Dec 2006 23:51:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 15:51:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 15:51:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CA941714058
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 15:51:23 -0800 (PST)
Message-ID: <18956599.1166572283827.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 15:51:23 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-835) conf not set for the default Codec
 when initializing a Reader for a record-compressed sequence file
In-Reply-To: <14671749.1166570301031.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-835?page=all ]

Hairong Kuang updated HADOOP-835:
---------------------------------

    Attachment: default_codec.patch

Here is the patch

> conf not set for the default Codec when initializing a Reader for a record-compressed sequence file
> ---------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-835
>                 URL: http://issues.apache.org/jira/browse/HADOOP-835
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.9.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.10.0
>
>         Attachments: default_codec.patch
>
>
> Because the conf field of a default Codec does not get set when initializing a reader for a record-compressed sequence file, a NullPointerException is thrown when attempting to create an input stream for the default Codec as shown in the following stack trace:
> java.lang.NullPointerException
> 	at org.apache.hadoop.io.compress.DefaultCodec.createInputStream(DefaultCodec.java:59)
> 	at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:1004)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:927)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:918)
> 	at org.apache.hadoop.mapred.SequenceFileRecordReader.(SequenceFileRecordReader.java:39)
> 	at org.apache.hadoop.mapred.SequenceFileInputFormat.getRecordReader(SequenceFileInputFormat.java:55)
> 	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:180)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1388)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 19 23:51:47 2006
Return-Path: 
 <hadoop-dev-return-6153-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13121 invoked from network); 19 Dec 2006 23:51:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 23:51:47 -0000
Received: (qmail 99987 invoked by uid 500); 19 Dec 2006 23:51:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99958 invoked by uid 500); 19 Dec 2006 23:51:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99949 invoked by uid 99); 19 Dec 2006 23:51:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 15:51:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 15:51:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 387C1714293
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 15:51:25 -0800 (PST)
Message-ID: <30584956.1166572285229.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 15:51:25 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-835) conf not set for the default Codec
 when initializing a Reader for a record-compressed sequence file
In-Reply-To: <14671749.1166570301031.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-835?page=comments#action_12459794 ] 
            
Hadoop QA commented on HADOOP-835:
----------------------------------

-1, because the patch command could not apply the latest attachment (http://issues.apache.org) as a patch to trunk revision r488444. Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.

> conf not set for the default Codec when initializing a Reader for a record-compressed sequence file
> ---------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-835
>                 URL: http://issues.apache.org/jira/browse/HADOOP-835
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.9.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.10.0
>
>         Attachments: default_codec.patch
>
>
> Because the conf field of a default Codec does not get set when initializing a reader for a record-compressed sequence file, a NullPointerException is thrown when attempting to create an input stream for the default Codec as shown in the following stack trace:
> java.lang.NullPointerException
> 	at org.apache.hadoop.io.compress.DefaultCodec.createInputStream(DefaultCodec.java:59)
> 	at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:1004)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:927)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:918)
> 	at org.apache.hadoop.mapred.SequenceFileRecordReader.(SequenceFileRecordReader.java:39)
> 	at org.apache.hadoop.mapred.SequenceFileInputFormat.getRecordReader(SequenceFileInputFormat.java:55)
> 	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:180)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1388)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 00:22:43 2006
Return-Path: 
 <hadoop-dev-return-6154-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21736 invoked from network); 20 Dec 2006 00:22:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 00:22:43 -0000
Received: (qmail 35684 invoked by uid 500); 20 Dec 2006 00:22:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35521 invoked by uid 500); 20 Dec 2006 00:22:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35512 invoked by uid 99); 20 Dec 2006 00:22:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 16:22:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 16:22:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5D4B87141BE
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 16:22:22 -0800 (PST)
Message-ID: <28669166.1166574142379.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 16:22:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-835) conf not set for the default Codec
 when initializing a Reader for a record-compressed sequence file
In-Reply-To: <14671749.1166570301031.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-835?page=comments#action_12459796 ] 
            
Hadoop QA commented on HADOOP-835:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347525/default_codec.patch applied and successfully tested against trunk revision r488444.

> conf not set for the default Codec when initializing a Reader for a record-compressed sequence file
> ---------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-835
>                 URL: http://issues.apache.org/jira/browse/HADOOP-835
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.9.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.10.0
>
>         Attachments: default_codec.patch
>
>
> Because the conf field of a default Codec does not get set when initializing a reader for a record-compressed sequence file, a NullPointerException is thrown when attempting to create an input stream for the default Codec as shown in the following stack trace:
> java.lang.NullPointerException
> 	at org.apache.hadoop.io.compress.DefaultCodec.createInputStream(DefaultCodec.java:59)
> 	at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:1004)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:927)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:918)
> 	at org.apache.hadoop.mapred.SequenceFileRecordReader.(SequenceFileRecordReader.java:39)
> 	at org.apache.hadoop.mapred.SequenceFileInputFormat.getRecordReader(SequenceFileInputFormat.java:55)
> 	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:180)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1388)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 00:28:43 2006
Return-Path: 
 <hadoop-dev-return-6155-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23075 invoked from network); 20 Dec 2006 00:28:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 00:28:43 -0000
Received: (qmail 40926 invoked by uid 500); 20 Dec 2006 00:28:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40904 invoked by uid 500); 20 Dec 2006 00:28:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40895 invoked by uid 99); 20 Dec 2006 00:28:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 16:28:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 16:28:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 112C37141BE
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 16:28:21 -0800 (PST)
Message-ID: <31224115.1166574501067.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 16:28:21 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-837) RunJar should unpack jar files into
 hadoop.tmp.dir
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

RunJar should unpack jar files into hadoop.tmp.dir
--------------------------------------------------

                 Key: HADOOP-837
                 URL: http://issues.apache.org/jira/browse/HADOOP-837
             Project: Hadoop
          Issue Type: Improvement
          Components: util
    Affects Versions: 0.9.2
            Reporter: Hairong Kuang
         Assigned To: Hairong Kuang
             Fix For: 0.10.0


RunJar currently unpacks a jar file into the default system temp directory. RunJar sometimes can not proceed because the disk space is running out. It would be better to unpack the jar file into a configurable temp directory like hadoop.tmp.dir.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 00:30:43 2006
Return-Path: 
 <hadoop-dev-return-6156-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23286 invoked from network); 20 Dec 2006 00:30:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 00:30:43 -0000
Received: (qmail 41777 invoked by uid 500); 20 Dec 2006 00:30:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41750 invoked by uid 500); 20 Dec 2006 00:30:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41741 invoked by uid 99); 20 Dec 2006 00:30:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 16:30:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 16:30:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 52B4F7141BE
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 16:30:22 -0800 (PST)
Message-ID: <29489811.1166574622336.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 16:30:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-836) unit tests fail on windows
 (/C:/cygwin/... is invalid)
In-Reply-To: <32781184.1166571201144.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-836?page=all ]

Owen O'Malley updated HADOOP-836:
---------------------------------

    Attachment: dos-dfs.patch

Paths without schemes were being used in MapTask.java. So the local split file was being written into dfs by mistake. This patch fixes that problem, makes the dfs client reject illegal names immediately, and adds a new static method to get the local file system.

> unit tests fail on windows (/C:/cygwin/... is invalid)
> ------------------------------------------------------
>
>                 Key: HADOOP-836
>                 URL: http://issues.apache.org/jira/browse/HADOOP-836
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.10.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: dos-dfs.patch
>
>
> Under windows, I get the following exception from some of the unit tests:
> java.io.IOException: Invalid file name: /C:/cygwin/home/hadoopwin/owen/hadoop/build/test/mapre
> d/local/50062_0/taskTracker/jobcache/job_0001/task_0001_m_000002_0/.split.dta.crc
>         at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:416)
>         at org.apache.hadoop.dfs.NameNode.create(NameNode.java:238)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:337)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:538)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 00:30:57 2006
Return-Path: 
 <hadoop-dev-return-6157-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23389 invoked from network); 20 Dec 2006 00:30:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 00:30:57 -0000
Received: (qmail 42281 invoked by uid 500); 20 Dec 2006 00:30:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42245 invoked by uid 500); 20 Dec 2006 00:30:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42209 invoked by uid 99); 20 Dec 2006 00:30:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 16:30:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 16:30:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AF582714295
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 16:30:23 -0800 (PST)
Message-ID: <17967812.1166574623715.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 16:30:23 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-836) unit tests fail on windows
 (/C:/cygwin/... is invalid)
In-Reply-To: <32781184.1166571201144.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-836?page=all ]

Owen O'Malley updated HADOOP-836:
---------------------------------

    Status: Patch Available  (was: Open)

> unit tests fail on windows (/C:/cygwin/... is invalid)
> ------------------------------------------------------
>
>                 Key: HADOOP-836
>                 URL: http://issues.apache.org/jira/browse/HADOOP-836
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.10.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: dos-dfs.patch
>
>
> Under windows, I get the following exception from some of the unit tests:
> java.io.IOException: Invalid file name: /C:/cygwin/home/hadoopwin/owen/hadoop/build/test/mapre
> d/local/50062_0/taskTracker/jobcache/job_0001/task_0001_m_000002_0/.split.dta.crc
>         at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:416)
>         at org.apache.hadoop.dfs.NameNode.create(NameNode.java:238)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:337)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:538)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 00:46:43 2006
Return-Path: 
 <hadoop-dev-return-6158-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26126 invoked from network); 20 Dec 2006 00:46:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 00:46:43 -0000
Received: (qmail 64027 invoked by uid 500); 20 Dec 2006 00:46:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63803 invoked by uid 500); 20 Dec 2006 00:46:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63794 invoked by uid 99); 20 Dec 2006 00:46:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 16:46:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 16:46:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 52A8D7141BE
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 16:46:22 -0800 (PST)
Message-ID: <17950761.1166575582335.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 16:46:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-836) unit tests fail on windows
 (/C:/cygwin/... is invalid)
In-Reply-To: <32781184.1166571201144.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-836?page=comments#action_12459800 ] 
            
Hadoop QA commented on HADOOP-836:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347526/dos-dfs.patch applied and successfully tested against trunk revision r488444.

> unit tests fail on windows (/C:/cygwin/... is invalid)
> ------------------------------------------------------
>
>                 Key: HADOOP-836
>                 URL: http://issues.apache.org/jira/browse/HADOOP-836
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.10.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: dos-dfs.patch
>
>
> Under windows, I get the following exception from some of the unit tests:
> java.io.IOException: Invalid file name: /C:/cygwin/home/hadoopwin/owen/hadoop/build/test/mapre
> d/local/50062_0/taskTracker/jobcache/job_0001/task_0001_m_000002_0/.split.dta.crc
>         at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:416)
>         at org.apache.hadoop.dfs.NameNode.create(NameNode.java:238)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:337)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:538)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 01:04:44 2006
Return-Path: 
 <hadoop-dev-return-6159-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29899 invoked from network); 20 Dec 2006 01:04:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 01:04:44 -0000
Received: (qmail 84247 invoked by uid 500); 20 Dec 2006 01:04:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84218 invoked by uid 500); 20 Dec 2006 01:04:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84209 invoked by uid 99); 20 Dec 2006 01:04:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 17:04:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 17:04:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 83406714289
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 17:04:22 -0800 (PST)
Message-ID: <18783430.1166576662533.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 17:04:22 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-837) RunJar should unpack jar files into
 hadoop.tmp.dir
In-Reply-To: <31224115.1166574501067.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-837?page=all ]

Hairong Kuang updated HADOOP-837:
---------------------------------

    Attachment: unjar_tmp.patch

Here is the patch.

> RunJar should unpack jar files into hadoop.tmp.dir
> --------------------------------------------------
>
>                 Key: HADOOP-837
>                 URL: http://issues.apache.org/jira/browse/HADOOP-837
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: util
>    Affects Versions: 0.9.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.10.0
>
>         Attachments: unjar_tmp.patch
>
>
> RunJar currently unpacks a jar file into the default system temp directory. RunJar sometimes can not proceed because the disk space is running out. It would be better to unpack the jar file into a configurable temp directory like hadoop.tmp.dir.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 01:04:45 2006
Return-Path: 
 <hadoop-dev-return-6160-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29942 invoked from network); 20 Dec 2006 01:04:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 01:04:45 -0000
Received: (qmail 84516 invoked by uid 500); 20 Dec 2006 01:04:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84481 invoked by uid 500); 20 Dec 2006 01:04:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84472 invoked by uid 99); 20 Dec 2006 01:04:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 17:04:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 17:04:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0340E714295
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 17:04:24 -0800 (PST)
Message-ID: <32149777.1166576664011.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 17:04:24 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-837) RunJar should unpack jar files into
 hadoop.tmp.dir
In-Reply-To: <31224115.1166574501067.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-837?page=all ]

Hairong Kuang updated HADOOP-837:
---------------------------------

    Status: Patch Available  (was: Open)

> RunJar should unpack jar files into hadoop.tmp.dir
> --------------------------------------------------
>
>                 Key: HADOOP-837
>                 URL: http://issues.apache.org/jira/browse/HADOOP-837
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: util
>    Affects Versions: 0.9.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.10.0
>
>         Attachments: unjar_tmp.patch
>
>
> RunJar currently unpacks a jar file into the default system temp directory. RunJar sometimes can not proceed because the disk space is running out. It would be better to unpack the jar file into a configurable temp directory like hadoop.tmp.dir.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 01:18:44 2006
Return-Path: 
 <hadoop-dev-return-6161-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34859 invoked from network); 20 Dec 2006 01:18:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 01:18:44 -0000
Received: (qmail 95040 invoked by uid 500); 20 Dec 2006 01:18:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95015 invoked by uid 500); 20 Dec 2006 01:18:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95006 invoked by uid 99); 20 Dec 2006 01:18:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 17:18:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 17:18:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5148F714289
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 17:18:22 -0800 (PST)
Message-ID: <22936215.1166577502330.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 17:18:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-837) RunJar should unpack jar files into
 hadoop.tmp.dir
In-Reply-To: <31224115.1166574501067.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-837?page=comments#action_12459803 ] 
            
Hadoop QA commented on HADOOP-837:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347527/unjar_tmp.patch applied and successfully tested against trunk revision r488444.

> RunJar should unpack jar files into hadoop.tmp.dir
> --------------------------------------------------
>
>                 Key: HADOOP-837
>                 URL: http://issues.apache.org/jira/browse/HADOOP-837
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: util
>    Affects Versions: 0.9.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.10.0
>
>         Attachments: unjar_tmp.patch
>
>
> RunJar currently unpacks a jar file into the default system temp directory. RunJar sometimes can not proceed because the disk space is running out. It would be better to unpack the jar file into a configurable temp directory like hadoop.tmp.dir.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 01:35:20 2006
Return-Path: 
 <hadoop-dev-return-6162-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36538 invoked from network); 20 Dec 2006 01:35:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 01:35:20 -0000
Received: (qmail 11551 invoked by uid 500); 20 Dec 2006 01:35:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11508 invoked by uid 500); 20 Dec 2006 01:35:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11499 invoked by uid 99); 20 Dec 2006 01:35:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 17:35:27 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 17:35:17 -0800
Received: from [10.72.109.129] (thickbeside-lm.corp.yahoo.com [10.72.109.129])
	by rsmtp2.corp.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id kBK1Ys0Q088139
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 17:34:55 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=nvcVMoL/Q/GZJaFjpamd9ed/0TUEJHf6UaNJDWgEf4J0mMfjdEpzbpg6wQI2ygiQ
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <17950761.1166575582335.JavaMail.jira@brutus>
References: <17950761.1166575582335.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6ED9E1A6-D508-4C1A-BA11-94477B48F6F2@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Nigel Daley <ndaley@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-836) unit tests fail on windows
 (/C:/cygwin/... is invalid)
Date: Tue, 19 Dec 2006 17:34:46 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Also ran with this patch on Windows and it passes.  Thanks Owen!

Cheers,
Nige

On Dec 19, 2006, at 4:46 PM, Hadoop QA (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-836? 
> page=comments#action_12459800 ]
>
> Hadoop QA commented on HADOOP-836:
> ----------------------------------
>
> +1, because http://issues.apache.org/jira/secure/attachment/ 
> 12347526/dos-dfs.patch applied and successfully tested against  
> trunk revision r488444.
>
>> unit tests fail on windows (/C:/cygwin/... is invalid)
>> ------------------------------------------------------
>>
>>                 Key: HADOOP-836
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-836
>>             Project: Hadoop
>>          Issue Type: Bug
>>          Components: mapred
>>    Affects Versions: 0.10.0
>>            Reporter: Owen O'Malley
>>         Assigned To: Owen O'Malley
>>             Fix For: 0.10.0
>>
>>         Attachments: dos-dfs.patch
>>
>>
>> Under windows, I get the following exception from some of the unit  
>> tests:
>> java.io.IOException: Invalid file name: /C:/cygwin/home/hadoopwin/ 
>> owen/hadoop/build/test/mapre
>> d/local/50062_0/taskTracker/jobcache/job_0001/ 
>> task_0001_m_000002_0/.split.dta.crc
>>         at org.apache.hadoop.dfs.FSNamesystem.startFile 
>> (FSNamesystem.java:416)
>>         at org.apache.hadoop.dfs.NameNode.create(NameNode.java:238)
>>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native  
>> Method)
>>         at sun.reflect.NativeMethodAccessorImpl.invoke 
>> (NativeMethodAccessorImpl.java:39)
>>         at sun.reflect.DelegatingMethodAccessorImpl.invoke 
>> (DelegatingMethodAccessorImpl.java:25)
>>         at java.lang.reflect.Method.invoke(Method.java:585)
>>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:337)
>>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:538)
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Wed Dec 20 05:41:43 2006
Return-Path: 
 <hadoop-dev-return-6163-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3581 invoked from network); 20 Dec 2006 05:41:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 05:41:43 -0000
Received: (qmail 65204 invoked by uid 500); 20 Dec 2006 05:41:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64985 invoked by uid 500); 20 Dec 2006 05:41:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64976 invoked by uid 99); 20 Dec 2006 05:41:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 21:41:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 21:41:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1B8C5714295
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 21:41:21 -0800 (PST)
Message-ID: <666926.1166593281109.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 21:41:21 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-838) TaskRunner.run() doesn't pass along
 the 'java.library.path' to the child (task) jvm
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

TaskRunner.run() doesn't pass along the 'java.library.path' to the child (task) jvm
-----------------------------------------------------------------------------------

                 Key: HADOOP-838
                 URL: http://issues.apache.org/jira/browse/HADOOP-838
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.9.2
            Reporter: Arun C Murthy
         Assigned To: Arun C Murthy


Since TaskRunner.run doesn't pass along java.library.path of the parent (TT) to the child (task) the native library path (if needed) is missing and hence it cannot load the native library. The fix is to do a System.getProperty and add it to the child jvm's arguments.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 06:21:43 2006
Return-Path: 
 <hadoop-dev-return-6164-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11872 invoked from network); 20 Dec 2006 06:21:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 06:21:43 -0000
Received: (qmail 9571 invoked by uid 500); 20 Dec 2006 06:21:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9534 invoked by uid 500); 20 Dec 2006 06:21:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9525 invoked by uid 99); 20 Dec 2006 06:21:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 22:21:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 22:21:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0F2F4714295
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 22:21:21 -0800 (PST)
Message-ID: <3927457.1166595681058.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 22:21:21 -0800 (PST)
From: "Feng Jiang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-839) CLONE -hadoop should provide a common
 way to wrap instances with different types into one type
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

CLONE -hadoop should provide a common way to wrap instances with different types into one type
----------------------------------------------------------------------------------------------

                 Key: HADOOP-839
                 URL: http://issues.apache.org/jira/browse/HADOOP-839
             Project: Hadoop
          Issue Type: Improvement
          Components: io
         Environment: All environment
            Reporter: Feng Jiang
             Fix For: 0.9.0


When two sequence files, which have same Key type but different Value types, are mapped out to reduce, multiple Value types is not allowed. In this case, we need a way to wrap instances with different types into one class type to reduce.

In current code, ObjectWritable is a sole choice. but it costs too many space, because the class declaration will be appended into output file as a string for every Key-value pair.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 06:32:43 2006
Return-Path: 
 <hadoop-dev-return-6165-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14404 invoked from network); 20 Dec 2006 06:32:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 06:32:43 -0000
Received: (qmail 18311 invoked by uid 500); 20 Dec 2006 06:32:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18069 invoked by uid 500); 20 Dec 2006 06:32:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18060 invoked by uid 99); 20 Dec 2006 06:32:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 22:32:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 22:32:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 482CE714295
	for <hadoop-dev@lucene.apache.org>; Tue, 19 Dec 2006 22:32:22 -0800 (PST)
Message-ID: <25780362.1166596342293.JavaMail.jira@brutus>
Date: Tue, 19 Dec 2006 22:32:22 -0800 (PST)
From: "Feng Jiang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-839) CLONE -hadoop should provide a common
 way to wrap instances with different types into one type
In-Reply-To: <3927457.1166595681058.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-839?page=all ]

Feng Jiang updated HADOOP-839:
------------------------------

    Attachment: patch.839.r488924

This is reopened version of issue#689.

The org.apache.hadoop.io.GenericWritable.java (at -r488924) has a little bit problem, though it works in the most cases. But the registered classes are in the relationship of Parents-child, it doesn't work correctly.

For example, ClassType1 is super class of ClassType2, the an object that wanted to be wrapped is ClassType2. But in the set(Writable obj) method, the ClassType1 may be treated as corresponding Class incorrectly.

Meanwhile, the old GenericWritable uses the O(N) algorithm to look up the corresponding class, so the performance is not so good especially when set() method is called frequently.

The updated GenericWritable fixed this bug, and improved the performance. It has detailed javadoc and sample to show users how to use it.

> CLONE -hadoop should provide a common way to wrap instances with different types into one type
> ----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-839
>                 URL: http://issues.apache.org/jira/browse/HADOOP-839
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>         Environment: All environment
>            Reporter: Feng Jiang
>             Fix For: 0.9.0
>
>         Attachments: patch.839.r488924
>
>
> When two sequence files, which have same Key type but different Value types, are mapped out to reduce, multiple Value types is not allowed. In this case, we need a way to wrap instances with different types into one class type to reduce.
> In current code, ObjectWritable is a sole choice. but it costs too many space, because the class declaration will be appended into output file as a string for every Key-value pair.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 11:01:45 2006
Return-Path: 
 <hadoop-dev-return-6166-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14121 invoked from network); 20 Dec 2006 11:01:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 11:01:45 -0000
Received: (qmail 27645 invoked by uid 500); 20 Dec 2006 11:01:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27626 invoked by uid 500); 20 Dec 2006 11:01:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27617 invoked by uid 99); 20 Dec 2006 11:01:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 03:01:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 03:01:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 798A8714295
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 03:01:22 -0800 (PST)
Message-ID: <30582303.1166612482495.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 03:01:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-815) Investigate and fix the extremely
 large memory-footprint of JobTracker
In-Reply-To: <28416645.1165904481055.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-815?page=all ]

Arun C Murthy updated HADOOP-815:
---------------------------------

    Attachment: HADOOP-815_20061220_1.patch

Here is a very early patch while I keep testing; appreciate any feedback... 

> Investigate and fix the extremely large memory-footprint of JobTracker
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-815
>                 URL: http://issues.apache.org/jira/browse/HADOOP-815
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: 150k_1199_774.nps, 75k_jobs.nps, HADOOP-815_20061220_1.patch
>
>
> The JobTracker's memory footprint seems excessively large, especially when many jobs are submitted.
> Here is the 'top' output of a JobTracker which has scheduled ~1k jobs thus far:
>   PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                     
> 31877 arunc     19   0 2362m 261m  13m S 14.0 12.9  24:48.08 java  
> Clearly VIRTual memory of 2364Mb v/s 261Mb of RESident memory is symptomatic of this issue...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 12:06:45 2006
Return-Path: 
 <hadoop-dev-return-6167-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36558 invoked from network); 20 Dec 2006 12:06:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 12:06:45 -0000
Received: (qmail 5686 invoked by uid 500); 20 Dec 2006 12:06:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5449 invoked by uid 500); 20 Dec 2006 12:06:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5440 invoked by uid 99); 20 Dec 2006 12:06:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 04:06:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 04:06:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2B1FD7141BE
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 04:06:23 -0800 (PST)
Message-ID: <31947692.1166616383174.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 04:06:23 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-838) TaskRunner.run() doesn't pass along
 the 'java.library.path' to the child (task) jvm
In-Reply-To: <666926.1166593281109.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-838?page=all ]

Arun C Murthy updated HADOOP-838:
---------------------------------

    Attachment: HADOOP-838_20061220_1.patch

Straight-forward fix...

Mahadev: Can you confirm this works for you? Thanks!

> TaskRunner.run() doesn't pass along the 'java.library.path' to the child (task) jvm
> -----------------------------------------------------------------------------------
>
>                 Key: HADOOP-838
>                 URL: http://issues.apache.org/jira/browse/HADOOP-838
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-838_20061220_1.patch
>
>
> Since TaskRunner.run doesn't pass along java.library.path of the parent (TT) to the child (task) the native library path (if needed) is missing and hence it cannot load the native library. The fix is to do a System.getProperty and add it to the child jvm's arguments.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 13:12:46 2006
Return-Path: 
 <hadoop-dev-return-6168-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90088 invoked from network); 20 Dec 2006 13:12:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 13:12:46 -0000
Received: (qmail 1523 invoked by uid 500); 20 Dec 2006 13:12:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1306 invoked by uid 500); 20 Dec 2006 13:12:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1297 invoked by uid 99); 20 Dec 2006 13:12:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 05:12:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 05:12:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8241671429F
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 05:12:24 -0800 (PST)
Message-ID: <4165047.1166620344530.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 05:12:24 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment: Hadoop-619_2.patch

Updated patch with Doug's comments
thanks Doug for the review. 

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.10.0
>
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch, Hadoop-619_1.patch, Hadoop-619_2.patch, Hadoop-619_2.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 19:14:43 2006
Return-Path: 
 <hadoop-dev-return-6169-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21059 invoked from network); 20 Dec 2006 19:14:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 19:14:43 -0000
Received: (qmail 75568 invoked by uid 500); 20 Dec 2006 19:14:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75534 invoked by uid 500); 20 Dec 2006 19:14:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75525 invoked by uid 99); 20 Dec 2006 19:14:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:14:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:14:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 14789714295
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 11:14:21 -0800 (PST)
Message-ID: <24071482.1166642061080.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 11:14:21 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-840) the task tracker is getting blocked by
 long deletes of local files
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

the task tracker is getting blocked by long deletes of local files
------------------------------------------------------------------

                 Key: HADOOP-840
                 URL: http://issues.apache.org/jira/browse/HADOOP-840
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.9.2
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.10.0


The task tracker is getting blocked in the main heartbeat loop by doing task cleanups in the main thread. We need to queue up the cleanup actions and work on them offline. This should make our task trackers not miss heartbeats and thus get lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 19:16:44 2006
Return-Path: 
 <hadoop-dev-return-6170-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21336 invoked from network); 20 Dec 2006 19:16:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 19:16:44 -0000
Received: (qmail 79079 invoked by uid 500); 20 Dec 2006 19:16:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79054 invoked by uid 500); 20 Dec 2006 19:16:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79045 invoked by uid 99); 20 Dec 2006 19:16:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:16:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:16:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6CC08714295
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 11:16:22 -0800 (PST)
Message-ID: <25488381.1166642182442.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 11:16:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-840) the task tracker is getting blocked by
 long deletes of local files
In-Reply-To: <24071482.1166642061080.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-840?page=all ]

Owen O'Malley updated HADOOP-840:
---------------------------------

    Attachment: lost-tt.patch

This patch needs review and testing...

> the task tracker is getting blocked by long deletes of local files
> ------------------------------------------------------------------
>
>                 Key: HADOOP-840
>                 URL: http://issues.apache.org/jira/browse/HADOOP-840
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: lost-tt.patch
>
>
> The task tracker is getting blocked in the main heartbeat loop by doing task cleanups in the main thread. We need to queue up the cleanup actions and work on them offline. This should make our task trackers not miss heartbeats and thus get lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 19:18:43 2006
Return-Path: 
 <hadoop-dev-return-6171-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21662 invoked from network); 20 Dec 2006 19:18:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 19:18:43 -0000
Received: (qmail 79896 invoked by uid 500); 20 Dec 2006 19:18:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79869 invoked by uid 500); 20 Dec 2006 19:18:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79860 invoked by uid 99); 20 Dec 2006 19:18:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:18:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:18:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 63052714295
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 11:18:22 -0800 (PST)
Message-ID: <30886949.1166642302402.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 11:18:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-840) the task tracker is getting blocked
 by long deletes of local files
In-Reply-To: <24071482.1166642061080.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-840?page=comments#action_12460022 ] 
            
Owen O'Malley commented on HADOOP-840:
--------------------------------------

My patch depends on HADOOP-836

> the task tracker is getting blocked by long deletes of local files
> ------------------------------------------------------------------
>
>                 Key: HADOOP-840
>                 URL: http://issues.apache.org/jira/browse/HADOOP-840
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: lost-tt.patch
>
>
> The task tracker is getting blocked in the main heartbeat loop by doing task cleanups in the main thread. We need to queue up the cleanup actions and work on them offline. This should make our task trackers not miss heartbeats and thus get lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 19:29:48 2006
Return-Path: 
 <hadoop-dev-return-6172-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24369 invoked from network); 20 Dec 2006 19:29:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 19:29:48 -0000
Received: (qmail 89907 invoked by uid 500); 20 Dec 2006 19:29:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89873 invoked by uid 500); 20 Dec 2006 19:29:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89849 invoked by uid 99); 20 Dec 2006 19:29:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:29:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:29:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9CF23714293
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 11:29:24 -0800 (PST)
Message-ID: <29034841.1166642964640.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 11:29:24 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-783) Hadoop dfs -put and -get accept '-' to
 indicate stdin/stdout
In-Reply-To: <10710218.1165370781063.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-783?page=all ]

Doug Cutting updated HADOOP-783:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Wendy!

> Hadoop dfs -put and -get accept '-' to indicate stdin/stdout
> ------------------------------------------------------------
>
>                 Key: HADOOP-783
>                 URL: http://issues.apache.org/jira/browse/HADOOP-783
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Marco Nicosia
>         Assigned To: Wendy Chien
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: getput6.patch
>
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 19:35:44 2006
Return-Path: 
 <hadoop-dev-return-6173-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26633 invoked from network); 20 Dec 2006 19:35:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 19:35:44 -0000
Received: (qmail 5534 invoked by uid 500); 20 Dec 2006 19:35:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5510 invoked by uid 500); 20 Dec 2006 19:35:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5501 invoked by uid 99); 20 Dec 2006 19:35:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:35:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:35:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 665A6714295
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 11:35:22 -0800 (PST)
Message-ID: <24672855.1166643322416.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 11:35:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-835) conf not set for the default Codec
 when initializing a Reader for a record-compressed sequence file
In-Reply-To: <14671749.1166570301031.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-835?page=all ]

Doug Cutting updated HADOOP-835:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Hairong!

> conf not set for the default Codec when initializing a Reader for a record-compressed sequence file
> ---------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-835
>                 URL: http://issues.apache.org/jira/browse/HADOOP-835
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.9.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.10.0
>
>         Attachments: default_codec.patch
>
>
> Because the conf field of a default Codec does not get set when initializing a reader for a record-compressed sequence file, a NullPointerException is thrown when attempting to create an input stream for the default Codec as shown in the following stack trace:
> java.lang.NullPointerException
> 	at org.apache.hadoop.io.compress.DefaultCodec.createInputStream(DefaultCodec.java:59)
> 	at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:1004)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:927)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:918)
> 	at org.apache.hadoop.mapred.SequenceFileRecordReader.(SequenceFileRecordReader.java:39)
> 	at org.apache.hadoop.mapred.SequenceFileInputFormat.getRecordReader(SequenceFileInputFormat.java:55)
> 	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:180)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1388)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 19:41:43 2006
Return-Path: 
 <hadoop-dev-return-6174-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27906 invoked from network); 20 Dec 2006 19:41:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 19:41:43 -0000
Received: (qmail 14428 invoked by uid 500); 20 Dec 2006 19:41:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14404 invoked by uid 500); 20 Dec 2006 19:41:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14395 invoked by uid 99); 20 Dec 2006 19:41:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:41:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:41:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1A1D1714295
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 11:41:21 -0800 (PST)
Message-ID: <11761068.1166643681103.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 11:41:21 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-841) native hadoop libraries don't build
 properly with 64-bit OS and a 32-bit jvm
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

native hadoop libraries don't build properly with 64-bit OS and a 32-bit jvm
----------------------------------------------------------------------------

                 Key: HADOOP-841
                 URL: http://issues.apache.org/jira/browse/HADOOP-841
             Project: Hadoop
          Issue Type: Bug
          Components: build
    Affects Versions: 0.9.2
            Reporter: Arun C Murthy
         Assigned To: Arun C Murthy
             Fix For: 0.10.0


src/native/lib/Makefile.am doesn't pass along the appropriate -m32/-m64 flag while using libtool to create the shared-object which results in this problem.

Simple fix:
-AM_LDFLAGS = @JNI_LDFLAGS@
+AM_LDFLAGS = @JNI_LDFLAGS@ -m$(JVM_DATA_MODEL)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 19:51:44 2006
Return-Path: 
 <hadoop-dev-return-6175-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32739 invoked from network); 20 Dec 2006 19:51:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 19:51:44 -0000
Received: (qmail 30227 invoked by uid 500); 20 Dec 2006 19:51:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30196 invoked by uid 500); 20 Dec 2006 19:51:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30187 invoked by uid 99); 20 Dec 2006 19:51:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:51:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:51:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 616EA714295
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 11:51:22 -0800 (PST)
Message-ID: <5537719.1166644282396.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 11:51:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-841) native hadoop libraries don't build
 properly with 64-bit OS and a 32-bit jvm
In-Reply-To: <11761068.1166643681103.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-841?page=all ]

Arun C Murthy updated HADOOP-841:
---------------------------------

    Attachment: HADOOP-841_20061221_1.patch

Straight-forward patch...

> native hadoop libraries don't build properly with 64-bit OS and a 32-bit jvm
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-841
>                 URL: http://issues.apache.org/jira/browse/HADOOP-841
>             Project: Hadoop
>          Issue Type: Bug
>          Components: build
>    Affects Versions: 0.9.2
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-841_20061221_1.patch
>
>
> src/native/lib/Makefile.am doesn't pass along the appropriate -m32/-m64 flag while using libtool to create the shared-object which results in this problem.
> Simple fix:
> -AM_LDFLAGS = @JNI_LDFLAGS@
> +AM_LDFLAGS = @JNI_LDFLAGS@ -m$(JVM_DATA_MODEL)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 19:51:47 2006
Return-Path: 
 <hadoop-dev-return-6176-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32795 invoked from network); 20 Dec 2006 19:51:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 19:51:47 -0000
Received: (qmail 30715 invoked by uid 500); 20 Dec 2006 19:51:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30466 invoked by uid 500); 20 Dec 2006 19:51:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30457 invoked by uid 99); 20 Dec 2006 19:51:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:51:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:51:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F130871429F
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 11:51:23 -0800 (PST)
Message-ID: <11890535.1166644283984.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 11:51:23 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-841) native hadoop libraries don't build
 properly with 64-bit OS and a 32-bit jvm
In-Reply-To: <11761068.1166643681103.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-841?page=all ]

Arun C Murthy updated HADOOP-841:
---------------------------------

    Status: Patch Available  (was: Open)

> native hadoop libraries don't build properly with 64-bit OS and a 32-bit jvm
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-841
>                 URL: http://issues.apache.org/jira/browse/HADOOP-841
>             Project: Hadoop
>          Issue Type: Bug
>          Components: build
>    Affects Versions: 0.9.2
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-841_20061221_1.patch
>
>
> src/native/lib/Makefile.am doesn't pass along the appropriate -m32/-m64 flag while using libtool to create the shared-object which results in this problem.
> Simple fix:
> -AM_LDFLAGS = @JNI_LDFLAGS@
> +AM_LDFLAGS = @JNI_LDFLAGS@ -m$(JVM_DATA_MODEL)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 19:56:44 2006
Return-Path: 
 <hadoop-dev-return-6177-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33837 invoked from network); 20 Dec 2006 19:56:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 19:56:44 -0000
Received: (qmail 37184 invoked by uid 500); 20 Dec 2006 19:56:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37150 invoked by uid 500); 20 Dec 2006 19:56:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37141 invoked by uid 99); 20 Dec 2006 19:56:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:56:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:56:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 50334714295
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 11:56:22 -0800 (PST)
Message-ID: <25814163.1166644582326.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 11:56:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-836) unit tests fail on windows
 (/C:/cygwin/... is invalid)
In-Reply-To: <32781184.1166571201144.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-836?page=all ]

Doug Cutting updated HADOOP-836:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  I made two minor changes.  I used LocalFileSystem.NAME instead of new URI("file:///") to name the LocalFileSystem, and I replaced calls to FileSystem.getNamed("local",...) with FileSystem.getLocal(...).

Thanks, Owen!

> unit tests fail on windows (/C:/cygwin/... is invalid)
> ------------------------------------------------------
>
>                 Key: HADOOP-836
>                 URL: http://issues.apache.org/jira/browse/HADOOP-836
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.10.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: dos-dfs.patch
>
>
> Under windows, I get the following exception from some of the unit tests:
> java.io.IOException: Invalid file name: /C:/cygwin/home/hadoopwin/owen/hadoop/build/test/mapre
> d/local/50062_0/taskTracker/jobcache/job_0001/task_0001_m_000002_0/.split.dta.crc
>         at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:416)
>         at org.apache.hadoop.dfs.NameNode.create(NameNode.java:238)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:337)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:538)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 19:58:45 2006
Return-Path: 
 <hadoop-dev-return-6178-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34370 invoked from network); 20 Dec 2006 19:58:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 19:58:45 -0000
Received: (qmail 41934 invoked by uid 500); 20 Dec 2006 19:58:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41910 invoked by uid 500); 20 Dec 2006 19:58:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41894 invoked by uid 99); 20 Dec 2006 19:58:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:58:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:58:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C44A1714293
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 11:58:23 -0800 (PST)
Message-ID: <22447904.1166644703801.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 11:58:23 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Status: Patch Available  (was: Open)

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.10.0
>
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch, Hadoop-619_1.patch, Hadoop-619_2.patch, Hadoop-619_2.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 20:00:44 2006
Return-Path: 
 <hadoop-dev-return-6179-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34865 invoked from network); 20 Dec 2006 20:00:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 20:00:44 -0000
Received: (qmail 44076 invoked by uid 500); 20 Dec 2006 20:00:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44053 invoked by uid 500); 20 Dec 2006 20:00:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44044 invoked by uid 99); 20 Dec 2006 20:00:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 12:00:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 12:00:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C3A70714295
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 12:00:22 -0800 (PST)
Message-ID: <8042760.1166644822798.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 12:00:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-837) RunJar should unpack jar files into
 hadoop.tmp.dir
In-Reply-To: <31224115.1166574501067.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-837?page=all ]

Doug Cutting updated HADOOP-837:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Hairong!

> RunJar should unpack jar files into hadoop.tmp.dir
> --------------------------------------------------
>
>                 Key: HADOOP-837
>                 URL: http://issues.apache.org/jira/browse/HADOOP-837
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: util
>    Affects Versions: 0.9.2
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.10.0
>
>         Attachments: unjar_tmp.patch
>
>
> RunJar currently unpacks a jar file into the default system temp directory. RunJar sometimes can not proceed because the disk space is running out. It would be better to unpack the jar file into a configurable temp directory like hadoop.tmp.dir.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 20:04:43 2006
Return-Path: 
 <hadoop-dev-return-6180-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35621 invoked from network); 20 Dec 2006 20:04:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 20:04:43 -0000
Received: (qmail 47164 invoked by uid 500); 20 Dec 2006 20:04:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47135 invoked by uid 500); 20 Dec 2006 20:04:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47126 invoked by uid 99); 20 Dec 2006 20:04:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 12:04:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 12:04:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 53AD5714293
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 12:04:22 -0800 (PST)
Message-ID: <17827004.1166645062340.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 12:04:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-839) Improvements to GenericWritable
In-Reply-To: <3927457.1166595681058.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-839?page=all ]

Doug Cutting updated HADOOP-839:
--------------------------------

        Summary: Improvements to GenericWritable  (was: CLONE -hadoop should provide a common way to wrap instances with different types into one type)
    Description: GenericWritable has a few easily addressed problems.  (was: When two sequence files, which have same Key type but different Value types, are mapped out to reduce, multiple Value types is not allowed. In this case, we need a way to wrap instances with different types into one class type to reduce.

In current code, ObjectWritable is a sole choice. but it costs too many space, because the class declaration will be appended into output file as a string for every Key-value pair.)

> Improvements to GenericWritable
> -------------------------------
>
>                 Key: HADOOP-839
>                 URL: http://issues.apache.org/jira/browse/HADOOP-839
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>         Environment: All environment
>            Reporter: Feng Jiang
>             Fix For: 0.9.0
>
>         Attachments: patch.839.r488924
>
>
> GenericWritable has a few easily addressed problems.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 20:06:44 2006
Return-Path: 
 <hadoop-dev-return-6181-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35929 invoked from network); 20 Dec 2006 20:06:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 20:06:44 -0000
Received: (qmail 49589 invoked by uid 500); 20 Dec 2006 20:06:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49348 invoked by uid 500); 20 Dec 2006 20:06:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49339 invoked by uid 99); 20 Dec 2006 20:06:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 12:06:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 12:06:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 78570714295
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 12:06:22 -0800 (PST)
Message-ID: <5456675.1166645182490.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 12:06:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-839) Improvements to GenericWritable
In-Reply-To: <3927457.1166595681058.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-839?page=all ]

Doug Cutting updated HADOOP-839:
--------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s:     (was: 0.9.0)

A patch was submitted for review.

> Improvements to GenericWritable
> -------------------------------
>
>                 Key: HADOOP-839
>                 URL: http://issues.apache.org/jira/browse/HADOOP-839
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>         Environment: All environment
>            Reporter: Feng Jiang
>         Attachments: patch.839.r488924
>
>
> GenericWritable has a few easily addressed problems.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 20:06:46 2006
Return-Path: 
 <hadoop-dev-return-6182-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35967 invoked from network); 20 Dec 2006 20:06:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 20:06:46 -0000
Received: (qmail 49813 invoked by uid 500); 20 Dec 2006 20:06:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49616 invoked by uid 500); 20 Dec 2006 20:06:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49607 invoked by uid 99); 20 Dec 2006 20:06:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 12:06:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 12:06:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3B4B8714293
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 12:06:25 -0800 (PST)
Message-ID: <29285432.1166645185240.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 12:06:25 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-432) support undelete, snapshots, or other
 mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-432?page=all ]

Doug Cutting updated HADOOP-432:
--------------------------------

    Status: Open  (was: Patch Available)

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch, undelete17.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 20:13:45 2006
Return-Path: 
 <hadoop-dev-return-6183-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38432 invoked from network); 20 Dec 2006 20:13:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 20:13:45 -0000
Received: (qmail 63137 invoked by uid 500); 20 Dec 2006 20:13:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63113 invoked by uid 500); 20 Dec 2006 20:13:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63101 invoked by uid 99); 20 Dec 2006 20:13:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 12:13:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 12:13:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9C7477142A1
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 12:13:22 -0800 (PST)
Message-ID: <32518962.1166645602638.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 12:13:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-841) native hadoop libraries don't build
 properly with 64-bit OS and a 32-bit jvm
In-Reply-To: <11761068.1166643681103.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-841?page=comments#action_12460035 ] 
            
Hadoop QA commented on HADOOP-841:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347604/HADOOP-841_20061221_1.patch applied and successfully tested against trunk revision r489177.

> native hadoop libraries don't build properly with 64-bit OS and a 32-bit jvm
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-841
>                 URL: http://issues.apache.org/jira/browse/HADOOP-841
>             Project: Hadoop
>          Issue Type: Bug
>          Components: build
>    Affects Versions: 0.9.2
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-841_20061221_1.patch
>
>
> src/native/lib/Makefile.am doesn't pass along the appropriate -m32/-m64 flag while using libtool to create the shared-object which results in this problem.
> Simple fix:
> -AM_LDFLAGS = @JNI_LDFLAGS@
> +AM_LDFLAGS = @JNI_LDFLAGS@ -m$(JVM_DATA_MODEL)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 20:25:44 2006
Return-Path: 
 <hadoop-dev-return-6184-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47113 invoked from network); 20 Dec 2006 20:25:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 20:25:44 -0000
Received: (qmail 75666 invoked by uid 500); 20 Dec 2006 20:25:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75633 invoked by uid 500); 20 Dec 2006 20:25:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75624 invoked by uid 99); 20 Dec 2006 20:25:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 12:25:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 12:25:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 68F1D7142A1
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 12:25:22 -0800 (PST)
Message-ID: <31524943.1166646322427.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 12:25:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-841) native hadoop libraries don't build
 properly with 64-bit OS and a 32-bit jvm
In-Reply-To: <11761068.1166643681103.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-841?page=all ]

Doug Cutting updated HADOOP-841:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Arun!

> native hadoop libraries don't build properly with 64-bit OS and a 32-bit jvm
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-841
>                 URL: http://issues.apache.org/jira/browse/HADOOP-841
>             Project: Hadoop
>          Issue Type: Bug
>          Components: build
>    Affects Versions: 0.9.2
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-841_20061221_1.patch
>
>
> src/native/lib/Makefile.am doesn't pass along the appropriate -m32/-m64 flag while using libtool to create the shared-object which results in this problem.
> Simple fix:
> -AM_LDFLAGS = @JNI_LDFLAGS@
> +AM_LDFLAGS = @JNI_LDFLAGS@ -m$(JVM_DATA_MODEL)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 20:34:44 2006
Return-Path: 
 <hadoop-dev-return-6185-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50668 invoked from network); 20 Dec 2006 20:34:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 20:34:44 -0000
Received: (qmail 89705 invoked by uid 500); 20 Dec 2006 20:34:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89454 invoked by uid 500); 20 Dec 2006 20:34:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89445 invoked by uid 99); 20 Dec 2006 20:34:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 12:34:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 12:34:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6FEF0714293
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 12:34:22 -0800 (PST)
Message-ID: <6933121.1166646862455.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 12:34:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-839) Improvements to GenericWritable
In-Reply-To: <3927457.1166595681058.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-839?page=comments#action_12460042 ] 
            
Hadoop QA commented on HADOOP-839:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347538/patch.839.r488924 applied and successfully tested against trunk revision r489186.

> Improvements to GenericWritable
> -------------------------------
>
>                 Key: HADOOP-839
>                 URL: http://issues.apache.org/jira/browse/HADOOP-839
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>         Environment: All environment
>            Reporter: Feng Jiang
>         Attachments: patch.839.r488924
>
>
> GenericWritable has a few easily addressed problems.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 20:51:46 2006
Return-Path: 
 <hadoop-dev-return-6186-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53818 invoked from network); 20 Dec 2006 20:51:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 20:51:46 -0000
Received: (qmail 15896 invoked by uid 500); 20 Dec 2006 20:51:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15866 invoked by uid 500); 20 Dec 2006 20:51:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15847 invoked by uid 99); 20 Dec 2006 20:51:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 12:51:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 12:51:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EF30B714293
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 12:51:23 -0800 (PST)
Message-ID: <10450427.1166647883977.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 12:51:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Doug Cutting updated HADOOP-619:
--------------------------------

    Status: Open  (was: Patch Available)

The spacing in this patch is still non-standard.

I note that the "mapred.input.subdir" feature is removed.  I think this is okay, as no one uses it, but thought it should be noted.

Why can't validateInput() simply call globPaths() and check that the results exist?  The current implementation is not only much more complicated, but I'm not sure that it's correct, since it fails if any glob pattern fails to have matches.  Is that what we want?  I would think that non-matching glob expressions, like empty directories, should be ignored so long as some of the inputs exist.

Finally, it looks like globPaths() still calls Path#toString() instead of Path#toUri().getPath().

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.10.0
>
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch, Hadoop-619_1.patch, Hadoop-619_2.patch, Hadoop-619_2.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 21:21:46 2006
Return-Path: 
 <hadoop-dev-return-6187-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62045 invoked from network); 20 Dec 2006 21:21:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 21:21:46 -0000
Received: (qmail 85047 invoked by uid 500); 20 Dec 2006 21:21:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85026 invoked by uid 500); 20 Dec 2006 21:21:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85010 invoked by uid 99); 20 Dec 2006 21:21:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 13:21:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 13:21:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3E755714293
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 13:21:24 -0800 (PST)
Message-ID: <28724472.1166649684253.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 13:21:24 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12460057 ] 
            
Sanjay Dahiya commented on HADOOP-619:
--------------------------------------

Why can't validateInput() simply call globPaths() and check that the results exist? The current implementation is not only much more complicated, but I'm not sure that it's correct, since it fails if any glob pattern fails to have matches. Is that what we want? I would think that non-matching glob expressions, like empty directories, should be ignored so long as some of the inputs exist. 

Doug: 
- From an earlier discussion with Owen http://issues.apache.org/jira/browse/HADOOP-619#action_12458633
we decided that non matching patterns should throw errors where as empty directories are acceptable. 

I'll see whats happening to indentation.

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.10.0
>
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch, Hadoop-619_1.patch, Hadoop-619_2.patch, Hadoop-619_2.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 21:55:44 2006
Return-Path: 
 <hadoop-dev-return-6188-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70912 invoked from network); 20 Dec 2006 21:55:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 21:55:44 -0000
Received: (qmail 46986 invoked by uid 500); 20 Dec 2006 21:55:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46965 invoked by uid 500); 20 Dec 2006 21:55:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46956 invoked by uid 99); 20 Dec 2006 21:55:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 13:55:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 13:55:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7677E714295
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 13:55:22 -0800 (PST)
Message-ID: <2090059.1166651722482.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 13:55:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-839) Improvements to GenericWritable
In-Reply-To: <3927457.1166595681058.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-839?page=all ]

Doug Cutting updated HADOOP-839:
--------------------------------

           Status: Open  (was: Patch Available)
    Fix Version/s: 0.10.0

This incompatibly changes the public API.  Wouldn't it be possible to instead deprecate the getTypes() method and then provide a default implementation of the new methods in terms of the old, deprecated method?  Then, in the following release, we can remove the deprecated method.

> Improvements to GenericWritable
> -------------------------------
>
>                 Key: HADOOP-839
>                 URL: http://issues.apache.org/jira/browse/HADOOP-839
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>         Environment: All environment
>            Reporter: Feng Jiang
>             Fix For: 0.10.0
>
>         Attachments: patch.839.r488924
>
>
> GenericWritable has a few easily addressed problems.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 22:50:45 2006
Return-Path: 
 <hadoop-dev-return-6189-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83601 invoked from network); 20 Dec 2006 22:50:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 22:50:45 -0000
Received: (qmail 10384 invoked by uid 500); 20 Dec 2006 22:50:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10361 invoked by uid 500); 20 Dec 2006 22:50:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10352 invoked by uid 99); 20 Dec 2006 22:50:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 14:50:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 14:50:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 389A5714295
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 14:50:23 -0800 (PST)
Message-ID: <5724931.1166655023229.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 14:50:23 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-838) TaskRunner.run() doesn't pass along
 the 'java.library.path' to the child (task) jvm
In-Reply-To: <666926.1166593281109.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-838?page=comments#action_12460083 ] 
            
Nigel Daley commented on HADOOP-838:
------------------------------------

+1

With LD_LIBRARY_PATH set to *not* include the hadoop native library, I successfully ran all the unit tests and saw that the native library was always loaded.

> TaskRunner.run() doesn't pass along the 'java.library.path' to the child (task) jvm
> -----------------------------------------------------------------------------------
>
>                 Key: HADOOP-838
>                 URL: http://issues.apache.org/jira/browse/HADOOP-838
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-838_20061220_1.patch
>
>
> Since TaskRunner.run doesn't pass along java.library.path of the parent (TT) to the child (task) the native library path (if needed) is missing and hence it cannot load the native library. The fix is to do a System.getProperty and add it to the child jvm's arguments.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 22:59:46 2006
Return-Path: 
 <hadoop-dev-return-6190-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85586 invoked from network); 20 Dec 2006 22:59:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 22:59:46 -0000
Received: (qmail 19218 invoked by uid 500); 20 Dec 2006 22:59:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19192 invoked by uid 500); 20 Dec 2006 22:59:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19183 invoked by uid 99); 20 Dec 2006 22:59:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 14:59:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 14:59:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9442971429F
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 14:59:24 -0800 (PST)
Message-ID: <3846081.1166655564604.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 14:59:24 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-803?page=comments#action_12460087 ] 
            
Hairong Kuang commented on HADOOP-803:
--------------------------------------

Currently blockMap maps a block to a TreeSet of DatanodeDescriptors. I would suggest that we use ArrayList in order to reduce the use of memory. Most of the time the set size is 3 because the default replication factor of a file is 3. So in term of speed, there is no benifit using TreeSet. However in term of memory TreeSet is way more expensive than ArrayList. An entry in TreeSet is at least 6 times as expensive as an entry in ArrayList and approximately we have 3*total#_of_blocks of such entries in FSNamesystem.

> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Sameer Paranjpye
>         Attachments: block-refs-2.patch, block-refs-3.patch, block-refs-5.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 23:35:50 2006
Return-Path: 
 <hadoop-dev-return-6191-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92589 invoked from network); 20 Dec 2006 23:35:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 23:35:50 -0000
Received: (qmail 55645 invoked by uid 500); 20 Dec 2006 23:35:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55625 invoked by uid 500); 20 Dec 2006 23:35:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55601 invoked by uid 99); 20 Dec 2006 23:35:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 15:35:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 15:35:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DF0B2714295
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 15:35:23 -0800 (PST)
Message-ID: <29521797.1166657723910.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 15:35:23 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-803?page=all ]

Raghu Angadi reassigned HADOOP-803:
-----------------------------------

    Assignee: Raghu Angadi  (was: Sameer Paranjpye)

> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>         Attachments: block-refs-2.patch, block-refs-3.patch, block-refs-5.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 20 23:37:46 2006
Return-Path: 
 <hadoop-dev-return-6192-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93032 invoked from network); 20 Dec 2006 23:37:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 23:37:46 -0000
Received: (qmail 59018 invoked by uid 500); 20 Dec 2006 23:37:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58783 invoked by uid 500); 20 Dec 2006 23:37:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58774 invoked by uid 99); 20 Dec 2006 23:37:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 15:37:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 15:37:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EDCA871404B
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 15:37:24 -0800 (PST)
Message-ID: <8754645.1166657844971.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 15:37:24 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-803?page=comments#action_12460093 ] 
            
Raghu Angadi commented on HADOOP-803:
-------------------------------------

+1
I was thinking of the same. 
How much do think the memory difference between a LinkedList entry and ArrayList entry?


> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>         Attachments: block-refs-2.patch, block-refs-3.patch, block-refs-5.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 21 01:32:43 2006
Return-Path: 
 <hadoop-dev-return-6193-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16649 invoked from network); 21 Dec 2006 01:32:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 01:32:43 -0000
Received: (qmail 62587 invoked by uid 500); 21 Dec 2006 01:32:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62558 invoked by uid 500); 21 Dec 2006 01:32:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62549 invoked by uid 99); 21 Dec 2006 01:32:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 17:32:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 17:32:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5594E714295
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 17:32:22 -0800 (PST)
Message-ID: <3655321.1166664742347.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 17:32:22 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-803?page=comments#action_12460102 ] 
            
Hairong Kuang commented on HADOOP-803:
--------------------------------------

A LinkedList entry contains a pointer to the previous entry and a pointer to the next entry. So it is more expensive entry-wise. One problem with ArrayList is that it creates an array of size 10 by default. But because most of time the set size is 3, we could set the intial array size to be 3.

> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>         Attachments: block-refs-2.patch, block-refs-3.patch, block-refs-5.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 21 02:47:45 2006
Return-Path: 
 <hadoop-dev-return-6194-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38744 invoked from network); 21 Dec 2006 02:47:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 02:47:45 -0000
Received: (qmail 26286 invoked by uid 500); 21 Dec 2006 02:47:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26037 invoked by uid 500); 21 Dec 2006 02:47:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26027 invoked by uid 99); 21 Dec 2006 02:47:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 18:47:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 18:47:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C8D1E7142A1
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 18:47:22 -0800 (PST)
Message-ID: <125805.1166669242819.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 18:47:22 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-842) change the open method in
 ClientProtocol to take an additional argument: clientMachine
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

change the open method in ClientProtocol to take an additional argument: clientMachine
--------------------------------------------------------------------------------------

                 Key: HADOOP-842
                 URL: http://issues.apache.org/jira/browse/HADOOP-842
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
    Affects Versions: 0.9.2
            Reporter: Hairong Kuang
         Assigned To: Hairong Kuang
             Fix For: 0.10.0


The open method returns a list of blocks that belong to a file and, for each block, a list of datanodes that contain the block.To improve reading efficiency, I'd like to return the list of datanodes in the order of its distance to the client machine. So I suggest that we make the open method to take an additional argument clientMachine which is in the format of hostname:port#.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 21 02:56:44 2006
Return-Path: 
 <hadoop-dev-return-6195-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40957 invoked from network); 21 Dec 2006 02:56:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 02:56:44 -0000
Received: (qmail 34490 invoked by uid 500); 21 Dec 2006 02:56:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34241 invoked by uid 500); 21 Dec 2006 02:56:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34232 invoked by uid 99); 21 Dec 2006 02:56:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 18:56:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 18:56:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5971E714293
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 18:56:23 -0800 (PST)
Message-ID: <21790340.1166669783363.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 18:56:23 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-838) TaskRunner.run() doesn't pass along
 the 'java.library.path' to the child (task) jvm
In-Reply-To: <666926.1166593281109.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-838?page=all ]

Arun C Murthy updated HADOOP-838:
---------------------------------

    Status: Patch Available  (was: Open)

Thanks for the review Nigel!

> TaskRunner.run() doesn't pass along the 'java.library.path' to the child (task) jvm
> -----------------------------------------------------------------------------------
>
>                 Key: HADOOP-838
>                 URL: http://issues.apache.org/jira/browse/HADOOP-838
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-838_20061220_1.patch
>
>
> Since TaskRunner.run doesn't pass along java.library.path of the parent (TT) to the child (task) the native library path (if needed) is missing and hence it cannot load the native library. The fix is to do a System.getProperty and add it to the child jvm's arguments.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 21 03:13:45 2006
Return-Path: 
 <hadoop-dev-return-6196-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43429 invoked from network); 21 Dec 2006 03:13:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 03:13:45 -0000
Received: (qmail 52085 invoked by uid 500); 21 Dec 2006 03:13:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52063 invoked by uid 500); 21 Dec 2006 03:13:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52054 invoked by uid 99); 21 Dec 2006 03:13:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 19:13:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 19:13:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2E4DD714293
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 19:13:23 -0800 (PST)
Message-ID: <15565339.1166670803187.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 19:13:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-838) TaskRunner.run() doesn't pass along
 the 'java.library.path' to the child (task) jvm
In-Reply-To: <666926.1166593281109.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-838?page=comments#action_12460125 ] 
            
Hadoop QA commented on HADOOP-838:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347564/HADOOP-838_20061220_1.patch applied and successfully tested against trunk revision r489190.

> TaskRunner.run() doesn't pass along the 'java.library.path' to the child (task) jvm
> -----------------------------------------------------------------------------------
>
>                 Key: HADOOP-838
>                 URL: http://issues.apache.org/jira/browse/HADOOP-838
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-838_20061220_1.patch
>
>
> Since TaskRunner.run doesn't pass along java.library.path of the parent (TT) to the child (task) the native library path (if needed) is missing and hence it cannot load the native library. The fix is to do a System.getProperty and add it to the child jvm's arguments.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 21 06:42:44 2006
Return-Path: 
 <hadoop-dev-return-6197-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72325 invoked from network); 21 Dec 2006 06:42:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 06:42:44 -0000
Received: (qmail 99333 invoked by uid 500); 21 Dec 2006 06:42:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99311 invoked by uid 500); 21 Dec 2006 06:42:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99302 invoked by uid 99); 21 Dec 2006 06:42:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 22:42:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 22:42:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6D9A7714295
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 22:42:22 -0800 (PST)
Message-ID: <4807868.1166683342446.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 22:42:22 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-840) the task tracker is getting blocked
 by long deletes of local files
In-Reply-To: <24071482.1166642061080.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-840?page=comments#action_12460159 ] 
            
Nigel Daley commented on HADOOP-840:
------------------------------------

I believe that because the patch for 836 was modified before committing it, this patch now needs to be updated.

> the task tracker is getting blocked by long deletes of local files
> ------------------------------------------------------------------
>
>                 Key: HADOOP-840
>                 URL: http://issues.apache.org/jira/browse/HADOOP-840
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: lost-tt.patch
>
>
> The task tracker is getting blocked in the main heartbeat loop by doing task cleanups in the main thread. We need to queue up the cleanup actions and work on them offline. This should make our task trackers not miss heartbeats and thus get lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 21 06:59:46 2006
Return-Path: 
 <hadoop-dev-return-6198-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75141 invoked from network); 21 Dec 2006 06:59:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 06:59:46 -0000
Received: (qmail 17832 invoked by uid 500); 21 Dec 2006 06:59:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17790 invoked by uid 500); 21 Dec 2006 06:59:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17780 invoked by uid 99); 21 Dec 2006 06:59:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 22:59:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 22:59:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EE8D1714293
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 22:59:23 -0800 (PST)
Message-ID: <16120379.1166684363974.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 22:59:23 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-843) JobClient gets rpc timeout exception
 after running lots of jobs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

JobClient gets rpc timeout exception after running lots of jobs
---------------------------------------------------------------

                 Key: HADOOP-843
                 URL: http://issues.apache.org/jira/browse/HADOOP-843
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.9.2
            Reporter: Arun C Murthy


While testing HADOOP-815 with smallJobsBenchmark (running ~750 jobs with 300 maps & 2 reduces each) I ran into this:

06/12/20 22:35:22 INFO conf.Configuration: parsing file:/export/crawlspace/kryptonite/arunc/hadoop/hadoop-0.9.3-dev/conf/hadoop-default.xml
06/12/20 22:35:22 INFO conf.Configuration: parsing file:/export/crawlspace/kryptonite/arunc/hadoop/hadoop-0.9.3-dev/conf/mapred-default.xml
06/12/20 22:35:22 INFO mapred.MultiJobRunner: Running job, Input : /mapred/benchmark/input Output : /mapred/benchmark/temp/multiMapRedOutput_-2104398834
06/12/20 22:35:39 INFO mapred.JobClient: Running job: job_0746
06/12/20 22:35:41 INFO mapred.JobClient:  map 0% reduce 0%
06/12/20 22:36:07 INFO mapred.JobClient:  map 1% reduce 0%
06/12/20 22:36:08 INFO mapred.JobClient:  map 2% reduce 0%
06/12/20 22:36:09 INFO mapred.JobClient:  map 3% reduce 0%
06/12/20 22:36:10 INFO mapred.JobClient:  map 4% reduce 0%
06/12/20 22:37:11 INFO mapred.JobClient: Communication problem with server: java.net.SocketTimeoutException: timed out waiting for rpc response
        at org.apache.hadoop.ipc.Client.call(Client.java:467)
        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:164)
        at $Proxy1.getJobStatus(Unknown Source)
        at org.apache.hadoop.mapred.JobClient.getJob(JobClient.java:345)
        at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:382)
        at org.apache.hadoop.benchmarks.mapred.MultiJobRunner.runJobInSequence(MultiJobRunner.java:169)
        at org.apache.hadoop.benchmarks.mapred.MultiJobRunner.run(MultiJobRunner.java:277)
        at org.apache.hadoop.benchmarks.mapred.MultiJobRunner.main(MultiJobRunner.java:401)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:71)
        at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:143)
        at org.apache.hadoop.benchmarks.mapred.BenchmarkRunner.main(BenchmarkRunner.java:17)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:149)
06/12/20 22:38:46 INFO mapred.JobClient: Communication problem with server: java.net.SocketTimeoutException: timed out waiting for rpc response
        at org.apache.hadoop.ipc.Client.call(Client.java:467)
        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:164)
        at $Proxy1.getJobStatus(Unknown Source)
        at org.apache.hadoop.mapred.JobClient.getJob(JobClient.java:345)
        at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:382)
        at org.apache.hadoop.benchmarks.mapred.MultiJobRunner.runJobInSequence(MultiJobRunner.java:169)
        at org.apache.hadoop.benchmarks.mapred.MultiJobRunner.run(MultiJobRunner.java:277)
        at org.apache.hadoop.benchmarks.mapred.MultiJobRunner.main(MultiJobRunner.java:401)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:71)
        at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:143)
        at org.apache.hadoop.benchmarks.mapred.BenchmarkRunner.main(BenchmarkRunner.java:17)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:149)

06/12/20 22:38:47 INFO mapred.JobClient:  map 99% reduce 1%
06/12/20 22:38:52 INFO mapred.JobClient:  map 100% reduce 2%
06/12/20 22:39:03 INFO mapred.JobClient:  map 100% reduce 17%
06/12/20 22:39:06 INFO mapred.JobClient:  map 100% reduce 51%
06/12/20 22:39:12 INFO mapred.JobClient:  map 100% reduce 66%
06/12/20 22:39:15 INFO mapred.JobClient:  map 100% reduce 100%
06/12/20 22:39:16 INFO mapred.JobClient: Job complete: job_0746

The job completes successfully though...

Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 21 07:30:44 2006
Return-Path: 
 <hadoop-dev-return-6199-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80835 invoked from network); 21 Dec 2006 07:30:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 07:30:44 -0000
Received: (qmail 39384 invoked by uid 500); 21 Dec 2006 07:30:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39146 invoked by uid 500); 21 Dec 2006 07:30:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39135 invoked by uid 99); 21 Dec 2006 07:30:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 23:30:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 23:30:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 52456714295
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 23:30:22 -0800 (PST)
Message-ID: <9286233.1166686222333.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 23:30:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-843) JobClient gets rpc timeout exception
 after running lots of jobs
In-Reply-To: <16120379.1166684363974.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-843?page=comments#action_12460171 ] 
            
Arun C Murthy commented on HADOOP-843:
--------------------------------------

Clarification: This is very reproducible and happens to every job after ~750 have run.

> JobClient gets rpc timeout exception after running lots of jobs
> ---------------------------------------------------------------
>
>                 Key: HADOOP-843
>                 URL: http://issues.apache.org/jira/browse/HADOOP-843
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Arun C Murthy
>
> While testing HADOOP-815 with smallJobsBenchmark (running ~750 jobs with 300 maps & 2 reduces each) I ran into this:
> 06/12/20 22:35:22 INFO conf.Configuration: parsing file:/export/crawlspace/kryptonite/arunc/hadoop/hadoop-0.9.3-dev/conf/hadoop-default.xml
> 06/12/20 22:35:22 INFO conf.Configuration: parsing file:/export/crawlspace/kryptonite/arunc/hadoop/hadoop-0.9.3-dev/conf/mapred-default.xml
> 06/12/20 22:35:22 INFO mapred.MultiJobRunner: Running job, Input : /mapred/benchmark/input Output : /mapred/benchmark/temp/multiMapRedOutput_-2104398834
> 06/12/20 22:35:39 INFO mapred.JobClient: Running job: job_0746
> 06/12/20 22:35:41 INFO mapred.JobClient:  map 0% reduce 0%
> 06/12/20 22:36:07 INFO mapred.JobClient:  map 1% reduce 0%
> 06/12/20 22:36:08 INFO mapred.JobClient:  map 2% reduce 0%
> 06/12/20 22:36:09 INFO mapred.JobClient:  map 3% reduce 0%
> 06/12/20 22:36:10 INFO mapred.JobClient:  map 4% reduce 0%
> 06/12/20 22:37:11 INFO mapred.JobClient: Communication problem with server: java.net.SocketTimeoutException: timed out waiting for rpc response
>         at org.apache.hadoop.ipc.Client.call(Client.java:467)
>         at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:164)
>         at $Proxy1.getJobStatus(Unknown Source)
>         at org.apache.hadoop.mapred.JobClient.getJob(JobClient.java:345)
>         at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:382)
>         at org.apache.hadoop.benchmarks.mapred.MultiJobRunner.runJobInSequence(MultiJobRunner.java:169)
>         at org.apache.hadoop.benchmarks.mapred.MultiJobRunner.run(MultiJobRunner.java:277)
>         at org.apache.hadoop.benchmarks.mapred.MultiJobRunner.main(MultiJobRunner.java:401)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:71)
>         at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:143)
>         at org.apache.hadoop.benchmarks.mapred.BenchmarkRunner.main(BenchmarkRunner.java:17)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.util.RunJar.main(RunJar.java:149)
> 06/12/20 22:38:46 INFO mapred.JobClient: Communication problem with server: java.net.SocketTimeoutException: timed out waiting for rpc response
>         at org.apache.hadoop.ipc.Client.call(Client.java:467)
>         at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:164)
>         at $Proxy1.getJobStatus(Unknown Source)
>         at org.apache.hadoop.mapred.JobClient.getJob(JobClient.java:345)
>         at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:382)
>         at org.apache.hadoop.benchmarks.mapred.MultiJobRunner.runJobInSequence(MultiJobRunner.java:169)
>         at org.apache.hadoop.benchmarks.mapred.MultiJobRunner.run(MultiJobRunner.java:277)
>         at org.apache.hadoop.benchmarks.mapred.MultiJobRunner.main(MultiJobRunner.java:401)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:71)
>         at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:143)
>         at org.apache.hadoop.benchmarks.mapred.BenchmarkRunner.main(BenchmarkRunner.java:17)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.util.RunJar.main(RunJar.java:149)
> 06/12/20 22:38:47 INFO mapred.JobClient:  map 99% reduce 1%
> 06/12/20 22:38:52 INFO mapred.JobClient:  map 100% reduce 2%
> 06/12/20 22:39:03 INFO mapred.JobClient:  map 100% reduce 17%
> 06/12/20 22:39:06 INFO mapred.JobClient:  map 100% reduce 51%
> 06/12/20 22:39:12 INFO mapred.JobClient:  map 100% reduce 66%
> 06/12/20 22:39:15 INFO mapred.JobClient:  map 100% reduce 100%
> 06/12/20 22:39:16 INFO mapred.JobClient: Job complete: job_0746
> The job completes successfully though...
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 21 07:34:44 2006
Return-Path: 
 <hadoop-dev-return-6200-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81732 invoked from network); 21 Dec 2006 07:34:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 07:34:44 -0000
Received: (qmail 41042 invoked by uid 500); 21 Dec 2006 07:34:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41009 invoked by uid 500); 21 Dec 2006 07:34:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40998 invoked by uid 99); 21 Dec 2006 07:34:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 23:34:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 23:34:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 53455714295
	for <hadoop-dev@lucene.apache.org>; Wed, 20 Dec 2006 23:34:22 -0800 (PST)
Message-ID: <24728066.1166686462338.JavaMail.jira@brutus>
Date: Wed, 20 Dec 2006 23:34:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-815) Investigate and fix the extremely
 large memory-footprint of JobTracker
In-Reply-To: <28416645.1165904481055.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-815?page=all ]

Arun C Murthy updated HADOOP-815:
---------------------------------

    Attachment: HADOOP-815_20061221_2.patch

Here is an updated patch (reflecting changes to trunk and some preliminary review by Devaraj).

After some thought I have done away with the call to jobtracker.removeTaskEntry from JobInProgress.failedTask and instead let the JobInProgress.garbageCollect -> jobtracker.finalizeJob handle it at the end of the job (success/failed/killed). Thoughts?

> Investigate and fix the extremely large memory-footprint of JobTracker
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-815
>                 URL: http://issues.apache.org/jira/browse/HADOOP-815
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: 150k_1199_774.nps, 75k_jobs.nps, HADOOP-815_20061220_1.patch, HADOOP-815_20061221_2.patch
>
>
> The JobTracker's memory footprint seems excessively large, especially when many jobs are submitted.
> Here is the 'top' output of a JobTracker which has scheduled ~1k jobs thus far:
>   PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                     
> 31877 arunc     19   0 2362m 261m  13m S 14.0 12.9  24:48.08 java  
> Clearly VIRTual memory of 2364Mb v/s 261Mb of RESident memory is symptomatic of this issue...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 21 18:35:43 2006
Return-Path: 
 <hadoop-dev-return-6201-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87746 invoked from network); 21 Dec 2006 18:35:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 18:35:43 -0000
Received: (qmail 82008 invoked by uid 500); 21 Dec 2006 18:35:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81990 invoked by uid 500); 21 Dec 2006 18:35:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81981 invoked by uid 99); 21 Dec 2006 18:35:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 10:35:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 10:35:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 173BC714293
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Dec 2006 10:35:21 -0800 (PST)
Message-ID: <6388263.1166726121092.JavaMail.jira@brutus>
Date: Thu, 21 Dec 2006 10:35:21 -0800 (PST)
From: "David Bowen (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-844) Metrics messages are sent on a
 fixed-delay schedule instead of a fixed-rate schedule
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Metrics messages are sent on a fixed-delay schedule instead of a fixed-rate schedule
------------------------------------------------------------------------------------

                 Key: HADOOP-844
                 URL: http://issues.apache.org/jira/browse/HADOOP-844
             Project: Hadoop
          Issue Type: Bug
          Components: metrics
            Reporter: David Bowen
            Priority: Minor


This potentially affects all metrics implementation packages which use a server that expects data to be sent at a particular rate.  It means that with counter metrics you will see a spurious periodic dip in the metric, because the rate at which metrics are sent is not  quite keeping up with what the server expects.

The fix is trivial.  In org.apache.hadoop.metrics.spi.AbstractMetricsContext, the call to Timer.schedule should be changes to Timer.scheduleAtFixedRate (which takes the same arguments).



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 21 19:15:47 2006
Return-Path: 
 <hadoop-dev-return-6202-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 415 invoked from network); 21 Dec 2006 19:15:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 19:15:47 -0000
Received: (qmail 49211 invoked by uid 500); 21 Dec 2006 19:15:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49191 invoked by uid 500); 21 Dec 2006 19:15:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48869 invoked by uid 99); 21 Dec 2006 19:15:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 11:15:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 11:15:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 68B22714293
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Dec 2006 11:15:22 -0800 (PST)
Message-ID: <8200383.1166728522425.JavaMail.jira@brutus>
Date: Thu, 21 Dec 2006 11:15:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-815) Investigate and fix the extremely
 large memory-footprint of JobTracker
In-Reply-To: <28416645.1165904481055.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-815?page=all ]

Arun C Murthy updated HADOOP-815:
---------------------------------

    Attachment: HADOOP-815_20061222_3.patch

Another take while I continue further testing... appreciate any f/b.

> Investigate and fix the extremely large memory-footprint of JobTracker
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-815
>                 URL: http://issues.apache.org/jira/browse/HADOOP-815
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: 150k_1199_774.nps, 75k_jobs.nps, HADOOP-815_20061220_1.patch, HADOOP-815_20061221_2.patch, HADOOP-815_20061222_3.patch
>
>
> The JobTracker's memory footprint seems excessively large, especially when many jobs are submitted.
> Here is the 'top' output of a JobTracker which has scheduled ~1k jobs thus far:
>   PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                     
> 31877 arunc     19   0 2362m 261m  13m S 14.0 12.9  24:48.08 java  
> Clearly VIRTual memory of 2364Mb v/s 261Mb of RESident memory is symptomatic of this issue...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 21 19:52:51 2006
Return-Path: 
 <hadoop-dev-return-6203-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6881 invoked from network); 21 Dec 2006 19:52:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 19:52:51 -0000
Received: (qmail 95135 invoked by uid 500); 21 Dec 2006 19:52:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95118 invoked by uid 500); 21 Dec 2006 19:52:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95082 invoked by uid 99); 21 Dec 2006 19:52:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 11:52:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 11:52:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6320D714293
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Dec 2006 11:52:22 -0800 (PST)
Message-ID: <21112303.1166730742403.JavaMail.jira@brutus>
Date: Thu, 21 Dec 2006 11:52:22 -0800 (PST)
From: "David Bowen (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-844) Metrics messages are sent on a
 fixed-delay schedule instead of a fixed-rate schedule
In-Reply-To: <6388263.1166726121092.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-844?page=all ]

David Bowen updated HADOOP-844:
-------------------------------

    Attachment: hadoop-844.patch

Here's the fix, with CHANGES.txt modified accordingly.

> Metrics messages are sent on a fixed-delay schedule instead of a fixed-rate schedule
> ------------------------------------------------------------------------------------
>
>                 Key: HADOOP-844
>                 URL: http://issues.apache.org/jira/browse/HADOOP-844
>             Project: Hadoop
>          Issue Type: Bug
>          Components: metrics
>            Reporter: David Bowen
>            Priority: Minor
>         Attachments: hadoop-844.patch
>
>
> This potentially affects all metrics implementation packages which use a server that expects data to be sent at a particular rate.  It means that with counter metrics you will see a spurious periodic dip in the metric, because the rate at which metrics are sent is not  quite keeping up with what the server expects.
> The fix is trivial.  In org.apache.hadoop.metrics.spi.AbstractMetricsContext, the call to Timer.schedule should be changes to Timer.scheduleAtFixedRate (which takes the same arguments).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 21 22:41:45 2006
Return-Path: 
 <hadoop-dev-return-6204-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60210 invoked from network); 21 Dec 2006 22:41:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 22:41:45 -0000
Received: (qmail 39976 invoked by uid 500); 21 Dec 2006 22:41:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39945 invoked by uid 500); 21 Dec 2006 22:41:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39935 invoked by uid 99); 21 Dec 2006 22:41:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 14:41:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 14:41:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1F2BE714293
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Dec 2006 14:41:23 -0800 (PST)
Message-ID: <30915152.1166740883125.JavaMail.jira@brutus>
Date: Thu, 21 Dec 2006 14:41:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-838) TaskRunner.run() doesn't pass along
 the 'java.library.path' to the child (task) jvm
In-Reply-To: <666926.1166593281109.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-838?page=all ]

Doug Cutting updated HADOOP-838:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, Arun!

> TaskRunner.run() doesn't pass along the 'java.library.path' to the child (task) jvm
> -----------------------------------------------------------------------------------
>
>                 Key: HADOOP-838
>                 URL: http://issues.apache.org/jira/browse/HADOOP-838
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: HADOOP-838_20061220_1.patch
>
>
> Since TaskRunner.run doesn't pass along java.library.path of the parent (TT) to the child (task) the native library path (if needed) is missing and hence it cannot load the native library. The fix is to do a System.getProperty and add it to the child jvm's arguments.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 21 22:59:42 2006
Return-Path: 
 <hadoop-dev-return-6205-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64609 invoked from network); 21 Dec 2006 22:59:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 22:59:42 -0000
Received: (qmail 62390 invoked by uid 500); 21 Dec 2006 22:59:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62369 invoked by uid 500); 21 Dec 2006 22:59:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62360 invoked by uid 99); 21 Dec 2006 22:59:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 14:59:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 14:59:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 41B77714293
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Dec 2006 14:59:21 -0800 (PST)
Message-ID: <3149493.1166741961266.JavaMail.jira@brutus>
Date: Thu, 21 Dec 2006 14:59:21 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-845) DFS -get and DFS -cat on a zip file
 generate different output
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

DFS -get and DFS -cat on a zip file generate different output
-------------------------------------------------------------

                 Key: HADOOP-845
                 URL: http://issues.apache.org/jira/browse/HADOOP-845
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Mahadev konar
            Priority: Minor


dfs -get file.gz localfile.gz and dfs -cat file.gz  > /tmp/file.gz generate different output. dfs -get geenreates corect output but dfs -cat does not geenerate the right ouput. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 21 23:21:45 2006
Return-Path: 
 <hadoop-dev-return-6206-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68751 invoked from network); 21 Dec 2006 23:21:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 23:21:45 -0000
Received: (qmail 78025 invoked by uid 500); 21 Dec 2006 23:21:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77997 invoked by uid 500); 21 Dec 2006 23:21:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77988 invoked by uid 99); 21 Dec 2006 23:21:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 15:21:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 15:21:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1392D714293
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Dec 2006 15:21:23 -0800 (PST)
Message-ID: <24289001.1166743283076.JavaMail.jira@brutus>
Date: Thu, 21 Dec 2006 15:21:23 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-803) Reducing memory consumption on
 Namenode : Part 1
In-Reply-To: <20960270.1165538721047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-803?page=comments#action_12460365 ] 
            
Raghu Angadi commented on HADOOP-803:
-------------------------------------


The attached patch seems to save in the order of 1MB with around 3000 blocks (9000 total blocks/3). Without the patch Jconsole show  around 5.3-5.57 MB of heap in use just after GC.  With the patch it is around 4.4-4.8 MB. Calculation would be more accurate on a larger cluster. I will try.


> Reducing memory consumption on Namenode : Part 1
> ------------------------------------------------
>
>                 Key: HADOOP-803
>                 URL: http://issues.apache.org/jira/browse/HADOOP-803
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Raghu Angadi
>         Assigned To: Raghu Angadi
>         Attachments: block-refs-2.patch, block-refs-3.patch, block-refs-5.patch
>
>
> There appears to be some places in Namenode that allow reducing memory consumption without intrusive code or feature changes. This bug is an initial attempt making those changes. Please include your thoughts as well. 
> One change I am planning to make : 
> Currently one copy of each block exists for each of the replicas and one copy for blockMap. I think they are all supposed to be same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 21 23:40:44 2006
Return-Path: 
 <hadoop-dev-return-6207-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75458 invoked from network); 21 Dec 2006 23:40:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 23:40:44 -0000
Received: (qmail 91006 invoked by uid 500); 21 Dec 2006 23:40:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90977 invoked by uid 500); 21 Dec 2006 23:40:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90963 invoked by uid 99); 21 Dec 2006 23:40:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 15:40:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 15:40:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 770FB714293
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Dec 2006 15:40:22 -0800 (PST)
Message-ID: <16101102.1166744422484.JavaMail.jira@brutus>
Date: Thu, 21 Dec 2006 15:40:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-840) the task tracker is getting blocked by
 long deletes of local files
In-Reply-To: <24071482.1166642061080.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-840?page=all ]

Mahadev konar updated HADOOP-840:
---------------------------------

    Attachment: lost-tt_1.patch

updated the patch to the current trunk. Fixed a nullpointer exception in the patch and also changed synchronization so that initialization of the new job does not get stuck on cleanup of the previous one.

> the task tracker is getting blocked by long deletes of local files
> ------------------------------------------------------------------
>
>                 Key: HADOOP-840
>                 URL: http://issues.apache.org/jira/browse/HADOOP-840
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: lost-tt.patch, lost-tt_1.patch
>
>
> The task tracker is getting blocked in the main heartbeat loop by doing task cleanups in the main thread. We need to queue up the cleanup actions and work on them offline. This should make our task trackers not miss heartbeats and thus get lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 02:00:40 2006
Return-Path: 
 <hadoop-dev-return-6210-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2946 invoked from network); 22 Dec 2006 02:00:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 02:00:40 -0000
Received: (qmail 10369 invoked by uid 500); 22 Dec 2006 02:00:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10319 invoked by uid 500); 22 Dec 2006 02:00:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10278 invoked by uid 99); 22 Dec 2006 02:00:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 18:00:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 18:00:06 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3A0AB714289
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Dec 2006 17:59:24 -0800 (PST)
Message-ID: <9637174.1166752764235.JavaMail.jira@brutus>
Date: Thu, 21 Dec 2006 17:59:24 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-628) hadoop hdfs -cat   replaces some
 characters with question marks.
In-Reply-To: <16871.1161664156551.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-628?page=all ]

Wendy Chien reassigned HADOOP-628:
----------------------------------

    Assignee: Wendy Chien  (was: Sameer Paranjpye)

> hadoop hdfs -cat   replaces some characters with question marks.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-628
>                 URL: http://issues.apache.org/jira/browse/HADOOP-628
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: arkady borkovsky
>         Assigned To: Wendy Chien
>         Attachments: hadoop-628.patch
>
>
> Should not the effect of
> hadoop hdfs -get path local-file
> and
> hadoop hdfs -cat path >local-file
> be the same?
> Try to do this with a (hdfs) file that contains non-ascii characters and do a diff.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 02:00:30 2006
Return-Path: 
 <hadoop-dev-return-6208-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2853 invoked from network); 22 Dec 2006 02:00:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 02:00:30 -0000
Received: (qmail 9764 invoked by uid 500); 22 Dec 2006 02:00:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9703 invoked by uid 500); 22 Dec 2006 02:00:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9694 invoked by uid 99); 22 Dec 2006 02:00:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 18:00:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 17:59:57 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 64C53714295
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Dec 2006 17:59:26 -0800 (PST)
Message-ID: <27665912.1166752766410.JavaMail.jira@brutus>
Date: Thu, 21 Dec 2006 17:59:26 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-628) hadoop hdfs -cat   replaces some
 characters with question marks.
In-Reply-To: <16871.1161664156551.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-628?page=all ]

Wendy Chien updated HADOOP-628:
-------------------------------

    Attachment: hadoop-628.patch

> hadoop hdfs -cat   replaces some characters with question marks.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-628
>                 URL: http://issues.apache.org/jira/browse/HADOOP-628
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: arkady borkovsky
>         Assigned To: Wendy Chien
>         Attachments: hadoop-628.patch
>
>
> Should not the effect of
> hadoop hdfs -get path local-file
> and
> hadoop hdfs -cat path >local-file
> be the same?
> Try to do this with a (hdfs) file that contains non-ascii characters and do a diff.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 02:00:32 2006
Return-Path: 
 <hadoop-dev-return-6209-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2896 invoked from network); 22 Dec 2006 02:00:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 02:00:32 -0000
Received: (qmail 10026 invoked by uid 500); 22 Dec 2006 02:00:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9996 invoked by uid 500); 22 Dec 2006 02:00:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9986 invoked by uid 99); 22 Dec 2006 02:00:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 18:00:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 17:59:59 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8B8EA714293
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Dec 2006 17:59:28 -0800 (PST)
Message-ID: <4791017.1166752768569.JavaMail.jira@brutus>
Date: Thu, 21 Dec 2006 17:59:28 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-628) hadoop hdfs -cat   replaces some
 characters with question marks.
In-Reply-To: <16871.1161664156551.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-628?page=all ]

Wendy Chien updated HADOOP-628:
-------------------------------

    Status: Patch Available  (was: Open)

> hadoop hdfs -cat   replaces some characters with question marks.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-628
>                 URL: http://issues.apache.org/jira/browse/HADOOP-628
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: arkady borkovsky
>         Assigned To: Wendy Chien
>         Attachments: hadoop-628.patch
>
>
> Should not the effect of
> hadoop hdfs -get path local-file
> and
> hadoop hdfs -cat path >local-file
> be the same?
> Try to do this with a (hdfs) file that contains non-ascii characters and do a diff.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 02:55:46 2006
Return-Path: 
 <hadoop-dev-return-6211-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20184 invoked from network); 22 Dec 2006 02:55:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 02:55:46 -0000
Received: (qmail 58965 invoked by uid 500); 22 Dec 2006 02:55:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58940 invoked by uid 500); 22 Dec 2006 02:55:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58931 invoked by uid 99); 22 Dec 2006 02:55:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 18:55:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 18:55:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1BFB6714293
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Dec 2006 18:55:24 -0800 (PST)
Message-ID: <10830390.1166756124111.JavaMail.jira@brutus>
Date: Thu, 21 Dec 2006 18:55:24 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12460373 ] 
            
Yoram Arnon commented on HADOOP-432:
------------------------------------

> bucketing the trash into 10-or-more minute sub-directories...with globbing, it won't be too hard

True, but without sub-directories it will be even easier. And with the DFS GUI, globbing doesn't help, you're left to drill down-down-down, then up-up-up to find your files. If you're unlucky, your files, deleted seconds apart, are in two directories, and very deep.
And besides, *nobody* else does it this way. Windows shows a flat view of deleted files, not sure about the Mac.
If we're going to reinvent the wheel, let's do things better than others, not worse.

> If the trash is full then folks can empty the trash

While there are no permissions in HDFS yet, there will be permissions in the medium future, and then people won't be able to delete each other's files. That will leave the administrator with the task of cleaning out the trash if it's large, which makes it a non-starter in my mind.
A per-user trash can is interesting, but still some thread needs to clean up the trash in the background, and needs to be fair in that it removes the globally oldest file deleted first. The intent was for files to stay around in case of accidental deletion, definitely not to require a second operation in order to really delete a file. Without a background thread or some other process that automatically removes old deleted files I'd vote against a trash altogether - it would just make the system less usable.

> this thread should be reusable code, written using the public FileSystem API

Well, that would require the FileSystem API to support something like 'find /trash -mmin +n', or "ls -r | head -<n>", implemented internally in the namenode for performance reasons. I'm not strictly against this, but it seems like an unnecessary complication at this time. The implementation doesn't preclude exporting this API in the future.

IMO, the approach taken by the proposed patch is the right one. It resembles other trashes, it's a reasonably round wheel.


> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch, undelete17.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 03:25:45 2006
Return-Path: 
 <hadoop-dev-return-6212-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26726 invoked from network); 22 Dec 2006 03:25:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 03:25:45 -0000
Received: (qmail 81206 invoked by uid 500); 22 Dec 2006 03:25:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80973 invoked by uid 500); 22 Dec 2006 03:25:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80963 invoked by uid 99); 22 Dec 2006 03:25:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 19:25:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 19:25:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E41B271429F
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Dec 2006 19:25:23 -0800 (PST)
Message-ID: <19854219.1166757923931.JavaMail.jira@brutus>
Date: Thu, 21 Dec 2006 19:25:23 -0800 (PST)
From: "weilei (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-562) Jobs fail if mapred.local.dir have
 several entries in it
In-Reply-To: <27491016.1159364451366.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-562?page=comments#action_12460375 ] 
            
weilei commented on HADOOP-562:
-------------------------------

if you have a full path as your mapred.local.dir? I have done the test, but haven't met any problem.


> Jobs fail if mapred.local.dir have several entries in it
> --------------------------------------------------------
>
>                 Key: HADOOP-562
>                 URL: http://issues.apache.org/jira/browse/HADOOP-562
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Johan Oskarson
>         Assigned To: Owen O'Malley
>
> Since HADOOP-288 got commited jobs (sometimes) fail if you have a comma seperated list of directories as your mapred.local.dir
> The jobs fail with ClassNotFoundExceptions, I'm guessing the job.jar is put on one of the disks but something fails when reading/finding it again.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 06:49:44 2006
Return-Path: 
 <hadoop-dev-return-6213-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61436 invoked from network); 22 Dec 2006 06:49:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 06:49:44 -0000
Received: (qmail 16892 invoked by uid 500); 22 Dec 2006 06:49:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16869 invoked by uid 500); 22 Dec 2006 06:49:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16860 invoked by uid 99); 22 Dec 2006 06:49:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 22:49:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 22:49:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 39691714289
	for <hadoop-dev@lucene.apache.org>; Thu, 21 Dec 2006 22:49:23 -0800 (PST)
Message-ID: <30774146.1166770163232.JavaMail.jira@brutus>
Date: Thu, 21 Dec 2006 22:49:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-628) hadoop hdfs -cat   replaces some
 characters with question marks.
In-Reply-To: <16871.1161664156551.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-628?page=comments#action_12460392 ] 
            
Hadoop QA commented on HADOOP-628:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347709/hadoop-628.patch applied and successfully tested against trunk revision r489489.

> hadoop hdfs -cat   replaces some characters with question marks.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-628
>                 URL: http://issues.apache.org/jira/browse/HADOOP-628
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: arkady borkovsky
>         Assigned To: Wendy Chien
>         Attachments: hadoop-628.patch
>
>
> Should not the effect of
> hadoop hdfs -get path local-file
> and
> hadoop hdfs -cat path >local-file
> be the same?
> Try to do this with a (hdfs) file that contains non-ascii characters and do a diff.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 10:19:45 2006
Return-Path: 
 <hadoop-dev-return-6214-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25180 invoked from network); 22 Dec 2006 10:19:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 10:19:45 -0000
Received: (qmail 93703 invoked by uid 500); 22 Dec 2006 10:19:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93468 invoked by uid 500); 22 Dec 2006 10:19:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93456 invoked by uid 99); 22 Dec 2006 10:19:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 02:19:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 02:19:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BEA687142A1
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 02:19:23 -0800 (PST)
Message-ID: <16754902.1166782763778.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 02:19:23 -0800 (PST)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-562) Jobs fail if mapred.local.dir have
 several entries in it
In-Reply-To: <27491016.1159364451366.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-562?page=comments#action_12460421 ] 
            
Johan Oskarson commented on HADOOP-562:
---------------------------------------

I'm pretty sure this issue is solved after HADOOP-607 got commited. 
Either way it works just fine with the latest version.

> Jobs fail if mapred.local.dir have several entries in it
> --------------------------------------------------------
>
>                 Key: HADOOP-562
>                 URL: http://issues.apache.org/jira/browse/HADOOP-562
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Johan Oskarson
>         Assigned To: Owen O'Malley
>
> Since HADOOP-288 got commited jobs (sometimes) fail if you have a comma seperated list of directories as your mapred.local.dir
> The jobs fail with ClassNotFoundExceptions, I'm guessing the job.jar is put on one of the disks but something fails when reading/finding it again.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 12:36:46 2006
Return-Path: 
 <hadoop-dev-return-6215-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51907 invoked from network); 22 Dec 2006 12:36:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 12:36:46 -0000
Received: (qmail 11042 invoked by uid 500); 22 Dec 2006 12:36:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10883 invoked by uid 500); 22 Dec 2006 12:36:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10873 invoked by uid 99); 22 Dec 2006 12:36:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 04:36:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 04:36:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 99CC1714295
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 04:36:24 -0800 (PST)
Message-ID: <32149863.1166790984626.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 04:36:24 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-619) Unify Map-Reduce and Streaming to take
 the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-619?page=all ]

Sanjay Dahiya updated HADOOP-619:
---------------------------------

    Attachment: Hadoop-619_3.patch

Updated patch, with spacing changes. 

>Finally, it looks like globPaths() still calls Path#toString() instead of Path#toUri().getPath().

Doug: The earlier patch didn't use Path.toString(), i replaced it with Path.toURI(). 
Also I have not changed the implementation to accept the empty patterns yet, if you feel thats the right semantics then i will change it and resubmit the patch. 

> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.10.0
>
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch, Hadoop-619_1.patch, Hadoop-619_2.patch, Hadoop-619_2.patch, Hadoop-619_3.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 16:52:43 2006
Return-Path: 
 <hadoop-dev-return-6216-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14191 invoked from network); 22 Dec 2006 16:52:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 16:52:43 -0000
Received: (qmail 94921 invoked by uid 500); 22 Dec 2006 16:52:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94897 invoked by uid 500); 22 Dec 2006 16:52:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94888 invoked by uid 99); 22 Dec 2006 16:52:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 08:52:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 08:52:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0C542714293
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 08:52:21 -0800 (PST)
Message-ID: <6035354.1166806341047.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 08:52:21 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-846) Progress report is not sent during the
 intermediate sorts in the map phase
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Progress report is not sent during the intermediate sorts in the map phase
--------------------------------------------------------------------------

                 Key: HADOOP-846
                 URL: http://issues.apache.org/jira/browse/HADOOP-846
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Devaraj Das
         Assigned To: Devaraj Das


Have seen tasks getting lost at the TaskTracker's end due to MapTask's progress not getting reported for a long time (the configured timeout). The progress report is currently not sent in the intermediate sort phases in the MapTask. But, if for some reason, the sort takes a long time, the TaskTracker might kill the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 17:22:44 2006
Return-Path: 
 <hadoop-dev-return-6217-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22397 invoked from network); 22 Dec 2006 17:22:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 17:22:44 -0000
Received: (qmail 30894 invoked by uid 500); 22 Dec 2006 17:22:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30866 invoked by uid 500); 22 Dec 2006 17:22:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30857 invoked by uid 99); 22 Dec 2006 17:22:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 09:22:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 09:22:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 77C02714293
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 09:22:22 -0800 (PST)
Message-ID: <6815777.1166808142487.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 09:22:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-844) Metrics messages are sent on a
 fixed-delay schedule instead of a fixed-rate schedule
In-Reply-To: <6388263.1166726121092.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-844?page=all ]

Doug Cutting updated HADOOP-844:
--------------------------------

    Status: Patch Available  (was: Open)

> Metrics messages are sent on a fixed-delay schedule instead of a fixed-rate schedule
> ------------------------------------------------------------------------------------
>
>                 Key: HADOOP-844
>                 URL: http://issues.apache.org/jira/browse/HADOOP-844
>             Project: Hadoop
>          Issue Type: Bug
>          Components: metrics
>            Reporter: David Bowen
>            Priority: Minor
>         Attachments: hadoop-844.patch
>
>
> This potentially affects all metrics implementation packages which use a server that expects data to be sent at a particular rate.  It means that with counter metrics you will see a spurious periodic dip in the metric, because the rate at which metrics are sent is not  quite keeping up with what the server expects.
> The fix is trivial.  In org.apache.hadoop.metrics.spi.AbstractMetricsContext, the call to Timer.schedule should be changes to Timer.scheduleAtFixedRate (which takes the same arguments).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 17:39:43 2006
Return-Path: 
 <hadoop-dev-return-6218-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26217 invoked from network); 22 Dec 2006 17:39:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 17:39:43 -0000
Received: (qmail 52999 invoked by uid 500); 22 Dec 2006 17:39:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52964 invoked by uid 500); 22 Dec 2006 17:39:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52955 invoked by uid 99); 22 Dec 2006 17:39:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 09:39:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 09:39:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5185F714295
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 09:39:22 -0800 (PST)
Message-ID: <21670280.1166809162331.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 09:39:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-844) Metrics messages are sent on a
 fixed-delay schedule instead of a fixed-rate schedule
In-Reply-To: <6388263.1166726121092.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-844?page=comments#action_12460553 ] 
            
Hadoop QA commented on HADOOP-844:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347694/hadoop-844.patch applied and successfully tested against trunk revision r489489.

> Metrics messages are sent on a fixed-delay schedule instead of a fixed-rate schedule
> ------------------------------------------------------------------------------------
>
>                 Key: HADOOP-844
>                 URL: http://issues.apache.org/jira/browse/HADOOP-844
>             Project: Hadoop
>          Issue Type: Bug
>          Components: metrics
>            Reporter: David Bowen
>            Priority: Minor
>         Attachments: hadoop-844.patch
>
>
> This potentially affects all metrics implementation packages which use a server that expects data to be sent at a particular rate.  It means that with counter metrics you will see a spurious periodic dip in the metric, because the rate at which metrics are sent is not  quite keeping up with what the server expects.
> The fix is trivial.  In org.apache.hadoop.metrics.spi.AbstractMetricsContext, the call to Timer.schedule should be changes to Timer.scheduleAtFixedRate (which takes the same arguments).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 17:43:45 2006
Return-Path: 
 <hadoop-dev-return-6219-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27110 invoked from network); 22 Dec 2006 17:43:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 17:43:45 -0000
Received: (qmail 58662 invoked by uid 500); 22 Dec 2006 17:43:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58635 invoked by uid 500); 22 Dec 2006 17:43:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58626 invoked by uid 99); 22 Dec 2006 17:43:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 09:43:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 09:43:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BE0C9714293
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 09:43:23 -0800 (PST)
Message-ID: <22257703.1166809403775.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 09:43:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-619) Unify Map-Reduce and Streaming to
 take the same globbed input specification
In-Reply-To: <29129765.1161378094901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-619?page=comments#action_12460554 ] 
            
Doug Cutting commented on HADOOP-619:
-------------------------------------

> we decided that non matching patterns should throw errors

Sorry, I missed that.  Yes, that's probably reasonable.

There're still a few unspaced '}else{' clauses, but I can fix those easily enough.

One other thing I just noticed is that it looks like globbed paths are not fully qualified with scheme and authority.  This will cause problems if patterns from multiple filesystems are included in a job's input.  We don't test that yet, so this won't break anything today, but we'd like that to work.




> Unify Map-Reduce and Streaming to take the same globbed input specification
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-619
>                 URL: http://issues.apache.org/jira/browse/HADOOP-619
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: eric baldeschwieler
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.10.0
>
>         Attachments: Hadoop-619.patch, Hadoop-619.patch, Hadoop-619.patch, Hadoop-619_1.patch, Hadoop-619_1.patch, Hadoop-619_2.patch, Hadoop-619_2.patch, Hadoop-619_3.patch
>
>
> Right now streaming input is specified very differently from other map-reduce input.  It would be good if these two apps could take much more similar input specs.
> In particular -input in streaming expects a file or glob pattern while MR takes a directory.  It would be cool if both could take a glob patern of files and if both took a directory by default (with some patern excluded to allow logs, metadata and other framework output to be safely stored).
> We want to be sure that MR input is backward compatible over this change.  I propose that a single file should be accepted as an input or a single directory.  Globs should only match directories if the paterns is '/' terminated, to avoid massive inputs specified by mistake.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 17:45:45 2006
Return-Path: 
 <hadoop-dev-return-6220-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27467 invoked from network); 22 Dec 2006 17:45:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 17:45:45 -0000
Received: (qmail 60066 invoked by uid 500); 22 Dec 2006 17:45:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60047 invoked by uid 500); 22 Dec 2006 17:45:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60038 invoked by uid 99); 22 Dec 2006 17:45:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 09:45:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 09:45:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B13667142A1
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 09:45:23 -0800 (PST)
Message-ID: <6013542.1166809523723.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 09:45:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-562) Jobs fail if mapred.local.dir have
 several entries in it
In-Reply-To: <27491016.1159364451366.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-562?page=all ]

Doug Cutting resolved HADOOP-562.
---------------------------------

    Resolution: Duplicate

> Jobs fail if mapred.local.dir have several entries in it
> --------------------------------------------------------
>
>                 Key: HADOOP-562
>                 URL: http://issues.apache.org/jira/browse/HADOOP-562
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Johan Oskarson
>         Assigned To: Owen O'Malley
>
> Since HADOOP-288 got commited jobs (sometimes) fail if you have a comma seperated list of directories as your mapred.local.dir
> The jobs fail with ClassNotFoundExceptions, I'm guessing the job.jar is put on one of the disks but something fails when reading/finding it again.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 17:55:45 2006
Return-Path: 
 <hadoop-dev-return-6221-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29097 invoked from network); 22 Dec 2006 17:55:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 17:55:45 -0000
Received: (qmail 69152 invoked by uid 500); 22 Dec 2006 17:55:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69127 invoked by uid 500); 22 Dec 2006 17:55:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69118 invoked by uid 99); 22 Dec 2006 17:55:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 09:55:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 09:55:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 25EE9714295
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 09:55:24 -0800 (PST)
Message-ID: <3263302.1166810124152.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 09:55:24 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12460556 ] 
            
Doug Cutting commented on HADOOP-432:
-------------------------------------

I unfortunately don't think we're going to resolve this until Owen returns in January.  When I last discussed this with him he claimed we ought to have per-user trash.  It would be best to hear his rationale before we proceed.

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch, undelete17.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 18:08:44 2006
Return-Path: 
 <hadoop-dev-return-6222-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31758 invoked from network); 22 Dec 2006 18:08:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 18:08:44 -0000
Received: (qmail 85293 invoked by uid 500); 22 Dec 2006 18:08:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85267 invoked by uid 500); 22 Dec 2006 18:08:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85258 invoked by uid 99); 22 Dec 2006 18:08:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 10:08:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 10:08:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 16E94714293
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 10:08:23 -0800 (PST)
Message-ID: <19004047.1166810903091.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 10:08:23 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-628) hadoop hdfs -cat   replaces some
 characters with question marks.
In-Reply-To: <16871.1161664156551.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-628?page=all ]

Doug Cutting updated HADOOP-628:
--------------------------------

    Status: Open  (was: Patch Available)

I like that this patch uses a common loop for copying, but it loses the early-exit feature that 'cat' had.  I think copyBytes should check for the error status if the output is a PrintStream.  Perhaps something like:

  PrintStream ps = out instanceof PrintStream ? (PrintStream)out : null;
  ...
  while (...) {
    out.write(...);
    if (ps != null && ps.checkError()) {
      throw new IOException(...);
    ...
    }
  }

This means that, when output is piped into another program and that program exits, the 'cat' or 'get' will exit too.  So things like 'bin/hadoop fs -cat foo | head' will execute quickly.


> hadoop hdfs -cat   replaces some characters with question marks.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-628
>                 URL: http://issues.apache.org/jira/browse/HADOOP-628
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: arkady borkovsky
>         Assigned To: Wendy Chien
>         Attachments: hadoop-628.patch
>
>
> Should not the effect of
> hadoop hdfs -get path local-file
> and
> hadoop hdfs -cat path >local-file
> be the same?
> Try to do this with a (hdfs) file that contains non-ascii characters and do a diff.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 18:18:44 2006
Return-Path: 
 <hadoop-dev-return-6223-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34333 invoked from network); 22 Dec 2006 18:18:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 18:18:44 -0000
Received: (qmail 97841 invoked by uid 500); 22 Dec 2006 18:18:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97819 invoked by uid 500); 22 Dec 2006 18:18:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97810 invoked by uid 99); 22 Dec 2006 18:18:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 10:18:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 10:18:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 57797714295
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 10:18:22 -0800 (PST)
Message-ID: <2241973.1166811502355.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 10:18:22 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-844) Metrics messages are sent on a
 fixed-delay schedule instead of a fixed-rate schedule
In-Reply-To: <6388263.1166726121092.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-844?page=all ]

Doug Cutting updated HADOOP-844:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.10.0
       Resolution: Fixed

I just committed this.  Thanks, David!

> Metrics messages are sent on a fixed-delay schedule instead of a fixed-rate schedule
> ------------------------------------------------------------------------------------
>
>                 Key: HADOOP-844
>                 URL: http://issues.apache.org/jira/browse/HADOOP-844
>             Project: Hadoop
>          Issue Type: Bug
>          Components: metrics
>            Reporter: David Bowen
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: hadoop-844.patch
>
>
> This potentially affects all metrics implementation packages which use a server that expects data to be sent at a particular rate.  It means that with counter metrics you will see a spurious periodic dip in the metric, because the rate at which metrics are sent is not  quite keeping up with what the server expects.
> The fix is trivial.  In org.apache.hadoop.metrics.spi.AbstractMetricsContext, the call to Timer.schedule should be changes to Timer.scheduleAtFixedRate (which takes the same arguments).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 18:20:44 2006
Return-Path: 
 <hadoop-dev-return-6224-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34816 invoked from network); 22 Dec 2006 18:20:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 18:20:44 -0000
Received: (qmail 99413 invoked by uid 500); 22 Dec 2006 18:20:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99379 invoked by uid 500); 22 Dec 2006 18:20:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99368 invoked by uid 99); 22 Dec 2006 18:20:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 10:20:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 10:20:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5C9FD714295
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 10:20:22 -0800 (PST)
Message-ID: <28654515.1166811622376.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 10:20:22 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-846) Progress report is not sent during the
 intermediate sorts in the map phase
In-Reply-To: <6035354.1166806341047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-846?page=all ]

Devaraj Das updated HADOOP-846:
-------------------------------

    Attachment: 846.patch

Attached is the patch - this starts a single thread that does progress reporting for the entire map phase. Also made taskProgress as volatile since that is read/updated by multiple threads.

> Progress report is not sent during the intermediate sorts in the map phase
> --------------------------------------------------------------------------
>
>                 Key: HADOOP-846
>                 URL: http://issues.apache.org/jira/browse/HADOOP-846
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: 846.patch
>
>
> Have seen tasks getting lost at the TaskTracker's end due to MapTask's progress not getting reported for a long time (the configured timeout). The progress report is currently not sent in the intermediate sort phases in the MapTask. But, if for some reason, the sort takes a long time, the TaskTracker might kill the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 18:24:43 2006
Return-Path: 
 <hadoop-dev-return-6225-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36235 invoked from network); 22 Dec 2006 18:24:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 18:24:43 -0000
Received: (qmail 3630 invoked by uid 500); 22 Dec 2006 18:24:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3393 invoked by uid 500); 22 Dec 2006 18:24:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3384 invoked by uid 99); 22 Dec 2006 18:24:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 10:24:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 10:24:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6E4D9714293
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 10:24:22 -0800 (PST)
Message-ID: <12821857.1166811862449.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 10:24:22 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-846) Progress report is not sent during the
 intermediate sorts in the map phase
In-Reply-To: <6035354.1166806341047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-846?page=all ]

Devaraj Das updated HADOOP-846:
-------------------------------

    Attachment: 846-correct.patch

Oops.. had attached the wrong patch earlier. This is the correct one.

> Progress report is not sent during the intermediate sorts in the map phase
> --------------------------------------------------------------------------
>
>                 Key: HADOOP-846
>                 URL: http://issues.apache.org/jira/browse/HADOOP-846
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: 846-correct.patch, 846.patch
>
>
> Have seen tasks getting lost at the TaskTracker's end due to MapTask's progress not getting reported for a long time (the configured timeout). The progress report is currently not sent in the intermediate sort phases in the MapTask. But, if for some reason, the sort takes a long time, the TaskTracker might kill the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 18:24:50 2006
Return-Path: 
 <hadoop-dev-return-6226-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36350 invoked from network); 22 Dec 2006 18:24:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 18:24:50 -0000
Received: (qmail 4113 invoked by uid 500); 22 Dec 2006 18:24:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4091 invoked by uid 500); 22 Dec 2006 18:24:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4032 invoked by uid 99); 22 Dec 2006 18:24:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 10:24:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 10:24:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 99F6E714289
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 10:24:26 -0800 (PST)
Message-ID: <21618874.1166811866627.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 10:24:26 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-846) Progress report is not sent during the
 intermediate sorts in the map phase
In-Reply-To: <6035354.1166806341047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-846?page=all ]

Devaraj Das updated HADOOP-846:
-------------------------------

    Status: Patch Available  (was: Open)

> Progress report is not sent during the intermediate sorts in the map phase
> --------------------------------------------------------------------------
>
>                 Key: HADOOP-846
>                 URL: http://issues.apache.org/jira/browse/HADOOP-846
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: 846-correct.patch, 846.patch
>
>
> Have seen tasks getting lost at the TaskTracker's end due to MapTask's progress not getting reported for a long time (the configured timeout). The progress report is currently not sent in the intermediate sort phases in the MapTask. But, if for some reason, the sort takes a long time, the TaskTracker might kill the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 18:49:44 2006
Return-Path: 
 <hadoop-dev-return-6227-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42446 invoked from network); 22 Dec 2006 18:49:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 18:49:44 -0000
Received: (qmail 38964 invoked by uid 500); 22 Dec 2006 18:49:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38943 invoked by uid 500); 22 Dec 2006 18:49:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38934 invoked by uid 99); 22 Dec 2006 18:49:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 10:49:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 10:49:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4C3F4714293
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 10:49:22 -0800 (PST)
Message-ID: <28517582.1166813362309.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 10:49:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-846) Progress report is not sent during
 the intermediate sorts in the map phase
In-Reply-To: <6035354.1166806341047.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-846?page=comments#action_12460568 ] 
            
Hadoop QA commented on HADOOP-846:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347767/846-correct.patch applied and successfully tested against trunk revision r489707.

> Progress report is not sent during the intermediate sorts in the map phase
> --------------------------------------------------------------------------
>
>                 Key: HADOOP-846
>                 URL: http://issues.apache.org/jira/browse/HADOOP-846
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: 846-correct.patch, 846.patch
>
>
> Have seen tasks getting lost at the TaskTracker's end due to MapTask's progress not getting reported for a long time (the configured timeout). The progress report is currently not sent in the intermediate sort phases in the MapTask. But, if for some reason, the sort takes a long time, the TaskTracker might kill the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 20:15:44 2006
Return-Path: 
 <hadoop-dev-return-6228-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63041 invoked from network); 22 Dec 2006 20:15:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 20:15:44 -0000
Received: (qmail 39984 invoked by uid 500); 22 Dec 2006 20:15:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39739 invoked by uid 500); 22 Dec 2006 20:15:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39730 invoked by uid 99); 22 Dec 2006 20:15:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 12:15:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 12:15:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A29B2714293
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 12:15:22 -0800 (PST)
Message-ID: <27884678.1166818522662.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 12:15:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-840) the task tracker is getting blocked by
 long deletes of local files
In-Reply-To: <24071482.1166642061080.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-840?page=all ]

Mahadev konar updated HADOOP-840:
---------------------------------

    Attachment:     (was: lost-tt_1.patch)

> the task tracker is getting blocked by long deletes of local files
> ------------------------------------------------------------------
>
>                 Key: HADOOP-840
>                 URL: http://issues.apache.org/jira/browse/HADOOP-840
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: lost-tt.patch
>
>
> The task tracker is getting blocked in the main heartbeat loop by doing task cleanups in the main thread. We need to queue up the cleanup actions and work on them offline. This should make our task trackers not miss heartbeats and thus get lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 20:17:44 2006
Return-Path: 
 <hadoop-dev-return-6229-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63432 invoked from network); 22 Dec 2006 20:17:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 20:17:44 -0000
Received: (qmail 42744 invoked by uid 500); 22 Dec 2006 20:17:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42503 invoked by uid 500); 22 Dec 2006 20:17:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42493 invoked by uid 99); 22 Dec 2006 20:17:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 12:17:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 12:17:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6FC00714293
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 12:17:22 -0800 (PST)
Message-ID: <8311329.1166818642455.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 12:17:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-840) the task tracker is getting blocked by
 long deletes of local files
In-Reply-To: <24071482.1166642061080.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-840?page=all ]

Mahadev konar updated HADOOP-840:
---------------------------------

    Attachment: lost-tt_2.patch

problem with the prvious patch. Updating a new one.

> the task tracker is getting blocked by long deletes of local files
> ------------------------------------------------------------------
>
>                 Key: HADOOP-840
>                 URL: http://issues.apache.org/jira/browse/HADOOP-840
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: lost-tt.patch, lost-tt_2.patch
>
>
> The task tracker is getting blocked in the main heartbeat loop by doing task cleanups in the main thread. We need to queue up the cleanup actions and work on them offline. This should make our task trackers not miss heartbeats and thus get lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 20:17:45 2006
Return-Path: 
 <hadoop-dev-return-6230-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63479 invoked from network); 22 Dec 2006 20:17:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 20:17:45 -0000
Received: (qmail 42927 invoked by uid 500); 22 Dec 2006 20:17:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42778 invoked by uid 500); 22 Dec 2006 20:17:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42769 invoked by uid 99); 22 Dec 2006 20:17:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 12:17:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 12:17:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D631471429F
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 12:17:23 -0800 (PST)
Message-ID: <29994180.1166818643875.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 12:17:23 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-840) the task tracker is getting blocked by
 long deletes of local files
In-Reply-To: <24071482.1166642061080.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-840?page=all ]

Mahadev konar updated HADOOP-840:
---------------------------------

    Status: Patch Available  (was: Open)

> the task tracker is getting blocked by long deletes of local files
> ------------------------------------------------------------------
>
>                 Key: HADOOP-840
>                 URL: http://issues.apache.org/jira/browse/HADOOP-840
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: lost-tt.patch, lost-tt_2.patch
>
>
> The task tracker is getting blocked in the main heartbeat loop by doing task cleanups in the main thread. We need to queue up the cleanup actions and work on them offline. This should make our task trackers not miss heartbeats and thus get lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 21:49:43 2006
Return-Path: 
 <hadoop-dev-return-6231-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2077 invoked from network); 22 Dec 2006 21:49:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 21:49:43 -0000
Received: (qmail 25442 invoked by uid 500); 22 Dec 2006 21:49:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25413 invoked by uid 500); 22 Dec 2006 21:49:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25404 invoked by uid 99); 22 Dec 2006 21:49:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 13:49:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 13:49:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 10C90714293
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 13:49:21 -0800 (PST)
Message-ID: <21447472.1166824161066.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 13:49:21 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-847) reduce % complete incorrect in webui
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

reduce % complete incorrect in webui
------------------------------------

                 Key: HADOOP-847
                 URL: http://issues.apache.org/jira/browse/HADOOP-847
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.9.2
            Reporter: Nigel Daley


I have a running job that has 1002 reduces.  Currently the JobTracker WebUI has the following:

Kind	 %Complete	Num Tasks	Pending	Running	Complete  Killed  Failures
map <snip>
reduce  100.00%	1002	0	2	1000	0	10

So 2 reduces are still running but the % complete is 100%.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 22:36:47 2006
Return-Path: 
 <hadoop-dev-return-6232-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17136 invoked from network); 22 Dec 2006 22:36:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 22:36:47 -0000
Received: (qmail 68604 invoked by uid 500); 22 Dec 2006 22:36:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68362 invoked by uid 500); 22 Dec 2006 22:36:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68353 invoked by uid 99); 22 Dec 2006 22:36:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 14:36:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 14:36:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4889F7142A1
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 14:36:26 -0800 (PST)
Message-ID: <1648621.1166826986293.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 14:36:26 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-840) the task tracker is getting blocked by
 long deletes of local files
In-Reply-To: <24071482.1166642061080.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-840?page=all ]

Mahadev konar updated HADOOP-840:
---------------------------------

    Status: Open  (was: Patch Available)

> the task tracker is getting blocked by long deletes of local files
> ------------------------------------------------------------------
>
>                 Key: HADOOP-840
>                 URL: http://issues.apache.org/jira/browse/HADOOP-840
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: lost-tt.patch, lost-tt_2.patch
>
>
> The task tracker is getting blocked in the main heartbeat loop by doing task cleanups in the main thread. We need to queue up the cleanup actions and work on them offline. This should make our task trackers not miss heartbeats and thus get lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 22:40:43 2006
Return-Path: 
 <hadoop-dev-return-6233-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17760 invoked from network); 22 Dec 2006 22:40:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 22:40:43 -0000
Received: (qmail 69580 invoked by uid 500); 22 Dec 2006 22:40:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69553 invoked by uid 500); 22 Dec 2006 22:40:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69540 invoked by uid 99); 22 Dec 2006 22:40:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 14:40:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 14:40:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6021B714295
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 14:40:22 -0800 (PST)
Message-ID: <3268813.1166827222391.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 14:40:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-840) the task tracker is getting blocked
 by long deletes of local files
In-Reply-To: <24071482.1166642061080.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-840?page=comments#action_12460600 ] 
            
Hadoop QA commented on HADOOP-840:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347774/lost-tt_2.patch applied and successfully tested against trunk revision r489707.

> the task tracker is getting blocked by long deletes of local files
> ------------------------------------------------------------------
>
>                 Key: HADOOP-840
>                 URL: http://issues.apache.org/jira/browse/HADOOP-840
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: lost-tt.patch, lost-tt_2.patch
>
>
> The task tracker is getting blocked in the main heartbeat loop by doing task cleanups in the main thread. We need to queue up the cleanup actions and work on them offline. This should make our task trackers not miss heartbeats and thus get lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 23:05:44 2006
Return-Path: 
 <hadoop-dev-return-6234-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27922 invoked from network); 22 Dec 2006 23:05:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 23:05:44 -0000
Received: (qmail 86798 invoked by uid 500); 22 Dec 2006 23:05:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86765 invoked by uid 500); 22 Dec 2006 23:05:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86756 invoked by uid 99); 22 Dec 2006 23:05:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 15:05:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 15:05:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 632D1714293
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 15:05:23 -0800 (PST)
Message-ID: <72435.1166828723403.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 15:05:23 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-525) Need raw comparators for hadoop record
 types
In-Reply-To: <23311423.1158101362457.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-525?page=all ]

Milind Bhandarkar updated HADOOP-525:
-------------------------------------

    Attachment: raw-comparators.patch

Patch attached. Added raw-comparators to Hadoop record I/O types. (Also fixes compareTo bugs, so that raw comparator semantics match compareTo semantics for generated types.


> Need raw comparators for hadoop record types
> --------------------------------------------
>
>                 Key: HADOOP-525
>                 URL: http://issues.apache.org/jira/browse/HADOOP-525
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.10.0
>
>         Attachments: raw-comparators.patch, TypeBuilder-support.tar, TypeBuilder.java, WordCountType.java
>
>
> Raw comparators are not generated for types that are generated with the Hadoop record framework. This could have a substantial performance impact when using hadoop record generated types in Map/Reduce. The record i/o framework should auto-generate raw comparators for types.
> Comparison for hadoop record i/o types is defined to be member wise comparison of objects. A possible implementation could only deserialize one member from each object at a time, compare them and either return or move on to the next member if the values are equal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 23:05:46 2006
Return-Path: 
 <hadoop-dev-return-6235-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27969 invoked from network); 22 Dec 2006 23:05:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 23:05:46 -0000
Received: (qmail 87062 invoked by uid 500); 22 Dec 2006 23:05:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87031 invoked by uid 500); 22 Dec 2006 23:05:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87022 invoked by uid 99); 22 Dec 2006 23:05:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 15:05:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 15:05:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 83C33714295
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 15:05:25 -0800 (PST)
Message-ID: <22138511.1166828725537.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 15:05:25 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-525) Need raw comparators for hadoop record
 types
In-Reply-To: <23311423.1158101362457.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-525?page=all ]

Milind Bhandarkar updated HADOOP-525:
-------------------------------------

           Status: Patch Available  (was: In Progress)
    Fix Version/s: 0.10.0

> Need raw comparators for hadoop record types
> --------------------------------------------
>
>                 Key: HADOOP-525
>                 URL: http://issues.apache.org/jira/browse/HADOOP-525
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.10.0
>
>         Attachments: raw-comparators.patch, TypeBuilder-support.tar, TypeBuilder.java, WordCountType.java
>
>
> Raw comparators are not generated for types that are generated with the Hadoop record framework. This could have a substantial performance impact when using hadoop record generated types in Map/Reduce. The record i/o framework should auto-generate raw comparators for types.
> Comparison for hadoop record i/o types is defined to be member wise comparison of objects. A possible implementation could only deserialize one member from each object at a time, compare them and either return or move on to the next member if the values are equal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 23:07:46 2006
Return-Path: 
 <hadoop-dev-return-6236-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29714 invoked from network); 22 Dec 2006 23:07:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 23:07:46 -0000
Received: (qmail 91524 invoked by uid 500); 22 Dec 2006 23:07:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91498 invoked by uid 500); 22 Dec 2006 23:07:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91488 invoked by uid 99); 22 Dec 2006 23:07:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 15:07:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 15:07:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2CE43714295
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 15:07:25 -0800 (PST)
Message-ID: <3697883.1166828845180.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 15:07:25 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-525) Need raw comparators for hadoop
 record types
In-Reply-To: <23311423.1158101362457.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-525?page=comments#action_12460605 ] 
            
Hadoop QA commented on HADOOP-525:
----------------------------------

-1, because the javadoc command appears to have generated warning messages when testing the latest attachment (http://issues.apache.org/jira/secure/attachment/12347780/raw-comparators.patch) against trunk revision r489707. Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.

> Need raw comparators for hadoop record types
> --------------------------------------------
>
>                 Key: HADOOP-525
>                 URL: http://issues.apache.org/jira/browse/HADOOP-525
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.10.0
>
>         Attachments: raw-comparators.patch, TypeBuilder-support.tar, TypeBuilder.java, WordCountType.java
>
>
> Raw comparators are not generated for types that are generated with the Hadoop record framework. This could have a substantial performance impact when using hadoop record generated types in Map/Reduce. The record i/o framework should auto-generate raw comparators for types.
> Comparison for hadoop record i/o types is defined to be member wise comparison of objects. A possible implementation could only deserialize one member from each object at a time, compare them and either return or move on to the next member if the values are equal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 23:43:47 2006
Return-Path: 
 <hadoop-dev-return-6237-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36955 invoked from network); 22 Dec 2006 23:43:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 23:43:47 -0000
Received: (qmail 14629 invoked by uid 500); 22 Dec 2006 23:43:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14403 invoked by uid 500); 22 Dec 2006 23:43:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14394 invoked by uid 99); 22 Dec 2006 23:43:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 15:43:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 15:43:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D6BD77142AB
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 15:43:24 -0800 (PST)
Message-ID: <6483956.1166831004876.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 15:43:24 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-525) Need raw comparators for hadoop record
 types
In-Reply-To: <23311423.1158101362457.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-525?page=all ]

Milind Bhandarkar updated HADOOP-525:
-------------------------------------

    Status: Open  (was: Patch Available)

produces javadoc warnings. cancelling patch.

> Need raw comparators for hadoop record types
> --------------------------------------------
>
>                 Key: HADOOP-525
>                 URL: http://issues.apache.org/jira/browse/HADOOP-525
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.10.0
>
>         Attachments: raw-comparators.patch, TypeBuilder-support.tar, TypeBuilder.java, WordCountType.java
>
>
> Raw comparators are not generated for types that are generated with the Hadoop record framework. This could have a substantial performance impact when using hadoop record generated types in Map/Reduce. The record i/o framework should auto-generate raw comparators for types.
> Comparison for hadoop record i/o types is defined to be member wise comparison of objects. A possible implementation could only deserialize one member from each object at a time, compare them and either return or move on to the next member if the values are equal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 23:43:56 2006
Return-Path: 
 <hadoop-dev-return-6238-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37170 invoked from network); 22 Dec 2006 23:43:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 23:43:56 -0000
Received: (qmail 15835 invoked by uid 500); 22 Dec 2006 23:44:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15812 invoked by uid 500); 22 Dec 2006 23:44:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15787 invoked by uid 99); 22 Dec 2006 23:44:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 15:43:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 15:43:52 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1C29E714293
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 15:43:32 -0800 (PST)
Message-ID: <9578606.1166831012112.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 15:43:32 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-525) Need raw comparators for hadoop record
 types
In-Reply-To: <23311423.1158101362457.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-525?page=all ]

Milind Bhandarkar updated HADOOP-525:
-------------------------------------

    Attachment:     (was: raw-comparators.patch)

> Need raw comparators for hadoop record types
> --------------------------------------------
>
>                 Key: HADOOP-525
>                 URL: http://issues.apache.org/jira/browse/HADOOP-525
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.10.0
>
>         Attachments: TypeBuilder-support.tar, TypeBuilder.java, WordCountType.java
>
>
> Raw comparators are not generated for types that are generated with the Hadoop record framework. This could have a substantial performance impact when using hadoop record generated types in Map/Reduce. The record i/o framework should auto-generate raw comparators for types.
> Comparison for hadoop record i/o types is defined to be member wise comparison of objects. A possible implementation could only deserialize one member from each object at a time, compare them and either return or move on to the next member if the values are equal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 23:45:49 2006
Return-Path: 
 <hadoop-dev-return-6239-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37594 invoked from network); 22 Dec 2006 23:45:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 23:45:49 -0000
Received: (qmail 17116 invoked by uid 500); 22 Dec 2006 23:45:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17095 invoked by uid 500); 22 Dec 2006 23:45:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17086 invoked by uid 99); 22 Dec 2006 23:45:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 15:45:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 15:45:47 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD28871429F
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 15:45:27 -0800 (PST)
Message-ID: <2360661.1166831127837.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 15:45:27 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-525) Need raw comparators for hadoop record
 types
In-Reply-To: <23311423.1158101362457.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-525?page=all ]

Milind Bhandarkar updated HADOOP-525:
-------------------------------------

    Attachment: raw-comparators.patch

Attached patch that does not emit javadoc warnings.

> Need raw comparators for hadoop record types
> --------------------------------------------
>
>                 Key: HADOOP-525
>                 URL: http://issues.apache.org/jira/browse/HADOOP-525
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.10.0
>
>         Attachments: raw-comparators.patch, TypeBuilder-support.tar, TypeBuilder.java, WordCountType.java
>
>
> Raw comparators are not generated for types that are generated with the Hadoop record framework. This could have a substantial performance impact when using hadoop record generated types in Map/Reduce. The record i/o framework should auto-generate raw comparators for types.
> Comparison for hadoop record i/o types is defined to be member wise comparison of objects. A possible implementation could only deserialize one member from each object at a time, compare them and either return or move on to the next member if the values are equal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Dec 22 23:45:51 2006
Return-Path: 
 <hadoop-dev-return-6240-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37639 invoked from network); 22 Dec 2006 23:45:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 23:45:51 -0000
Received: (qmail 17389 invoked by uid 500); 22 Dec 2006 23:45:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17367 invoked by uid 500); 22 Dec 2006 23:45:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17350 invoked by uid 99); 22 Dec 2006 23:45:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 15:45:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 15:45:50 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 037DA7142AB
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 15:45:30 -0800 (PST)
Message-ID: <1835885.1166831130011.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 15:45:30 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-525) Need raw comparators for hadoop record
 types
In-Reply-To: <23311423.1158101362457.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-525?page=all ]

Milind Bhandarkar updated HADOOP-525:
-------------------------------------

    Status: Patch Available  (was: Open)

> Need raw comparators for hadoop record types
> --------------------------------------------
>
>                 Key: HADOOP-525
>                 URL: http://issues.apache.org/jira/browse/HADOOP-525
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.10.0
>
>         Attachments: raw-comparators.patch, TypeBuilder-support.tar, TypeBuilder.java, WordCountType.java
>
>
> Raw comparators are not generated for types that are generated with the Hadoop record framework. This could have a substantial performance impact when using hadoop record generated types in Map/Reduce. The record i/o framework should auto-generate raw comparators for types.
> Comparison for hadoop record i/o types is defined to be member wise comparison of objects. A possible implementation could only deserialize one member from each object at a time, compare them and either return or move on to the next member if the values are equal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Dec 23 00:03:44 2006
Return-Path: 
 <hadoop-dev-return-6241-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40785 invoked from network); 23 Dec 2006 00:03:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2006 00:03:44 -0000
Received: (qmail 27770 invoked by uid 500); 23 Dec 2006 00:03:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27743 invoked by uid 500); 23 Dec 2006 00:03:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27734 invoked by uid 99); 23 Dec 2006 00:03:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 16:03:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 16:03:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2E891714289
	for <hadoop-dev@lucene.apache.org>; Fri, 22 Dec 2006 16:03:23 -0800 (PST)
Message-ID: <8103269.1166832203187.JavaMail.jira@brutus>
Date: Fri, 22 Dec 2006 16:03:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-525) Need raw comparators for hadoop
 record types
In-Reply-To: <23311423.1158101362457.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-525?page=comments#action_12460622 ] 
            
Hadoop QA commented on HADOOP-525:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347782/raw-comparators.patch applied and successfully tested against trunk revision r489707.

> Need raw comparators for hadoop record types
> --------------------------------------------
>
>                 Key: HADOOP-525
>                 URL: http://issues.apache.org/jira/browse/HADOOP-525
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.10.0
>
>         Attachments: raw-comparators.patch, TypeBuilder-support.tar, TypeBuilder.java, WordCountType.java
>
>
> Raw comparators are not generated for types that are generated with the Hadoop record framework. This could have a substantial performance impact when using hadoop record generated types in Map/Reduce. The record i/o framework should auto-generate raw comparators for types.
> Comparison for hadoop record i/o types is defined to be member wise comparison of objects. A possible implementation could only deserialize one member from each object at a time, compare them and either return or move on to the next member if the values are equal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Dec 24 00:24:06 2006
Return-Path: 
 <hadoop-dev-return-6242-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4780 invoked from network); 24 Dec 2006 00:24:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2006 00:24:06 -0000
Received: (qmail 6331 invoked by uid 500); 24 Dec 2006 00:24:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6091 invoked by uid 500); 24 Dec 2006 00:24:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6082 invoked by uid 99); 24 Dec 2006 00:24:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Dec 2006 16:24:12 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_ID,NO_REAL_NAME,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received: from [140.211.11.75] (HELO lucene.zones.apache.org) (140.211.11.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Dec 2006 16:23:59 -0800
Received: from lucene.zones.apache.org (localhost [127.0.0.1])
	by lucene.zones.apache.org (8.13.7+Sun/8.13.7) with SMTP id kBO0NcMh011905
	for <hadoop-dev@lucene.apache.org>; Sun, 24 Dec 2006 00:23:38 GMT
Message-Id: <200612240023.kBO0NcMh011905@lucene.zones.apache.org>
Date: Sun, 24 Dec 2006 00:23:38 +0000
Subject: Hadoop nightly build failure
From: hadoop-dev@lucene.apache.org
To: hadoop-dev@lucene.apache.org
X-Mailer: org.apache.tools.mail.MailMessage (ant.apache.org)
X-Virus-Checked: Checked by ClamAV on apache.org


init:
    [mkdir] Created dir: /tmp/hadoop-nightly/build
    [mkdir] Created dir: /tmp/hadoop-nightly/build/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/src
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/task/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/job/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/dfs/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/datanode/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/examples
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/testjar
     [copy] Copying 6 files to /tmp/hadoop-nightly/build/webapps
     [copy] Copying 4 files to /tmp/hadoop-nightly/conf
     [copy] Copying /tmp/hadoop-nightly/conf/slaves.template to /tmp/hadoop-nightly/conf/slaves
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-site.xml.template to /tmp/hadoop-nightly/conf/hadoop-site.xml
     [copy] Copying /tmp/hadoop-nightly/conf/mapred-default.xml.template to /tmp/hadoop-nightly/conf/mapred-default.xml
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-env.sh.template to /tmp/hadoop-nightly/conf/hadoop-env.sh
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: whoami: not found

record-parser:

compile-core-classes:
    [javac] Compiling 283 source files to /tmp/hadoop-nightly/build/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-native:

compile-core:

compile-examples:
    [javac] Compiling 7 source files to /tmp/hadoop-nightly/build/examples
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-test:
    [javac] Compiling 71 source files to /tmp/hadoop-nightly/build/test/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] Compiling 1 source file to /tmp/hadoop-nightly/build/test/testjar
      [jar] Building jar: /tmp/hadoop-nightly/build/test/testjar/testjob.jar
      [jar] Building jar: /tmp/hadoop-nightly/build/hadoop-nightly-test.jar
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache

test-core:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/data
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/logs
    [junit] Running org.apache.hadoop.conf.TestConfiguration
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 1.052 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSMkdirs
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 12.449 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSShell
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 12.744 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSShellGenericOptions
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 13.152 sec
    [junit] Running org.apache.hadoop.dfs.TestFileCorruption
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 11.826 sec
    [junit] Test org.apache.hadoop.dfs.TestFileCorruption FAILED
    [junit] Running org.apache.hadoop.dfs.TestFsck
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 13.262 sec
    [junit] Running org.apache.hadoop.dfs.TestLocalDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 8.081 sec
    [junit] Running org.apache.hadoop.dfs.TestPread
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 8.81 sec
    [junit] Running org.apache.hadoop.dfs.TestReplication
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 25.459 sec
    [junit] Running org.apache.hadoop.dfs.TestRestartDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 19.373 sec
    [junit] Running org.apache.hadoop.dfs.TestSeekBug
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 9.453 sec
    [junit] Running org.apache.hadoop.dfs.TestSmallBlock
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 6.836 sec
    [junit] Running org.apache.hadoop.fs.TestCopyFiles
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 34.94 sec
    [junit] Running org.apache.hadoop.fs.TestDFSIO
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 11.65 sec
    [junit] Running org.apache.hadoop.fs.TestFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 5.058 sec
    [junit] Running org.apache.hadoop.fs.TestGlobPaths
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 5.78 sec
    [junit] Running org.apache.hadoop.fs.TestLocalFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.363 sec
    [junit] Running org.apache.hadoop.fs.TestPath
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.028 sec
    [junit] Running org.apache.hadoop.fs.s3.TestINode
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.012 sec
    [junit] Running org.apache.hadoop.fs.s3.TestInMemoryS3FileSystem
    [junit] Tests run: 12, Failures: 0, Errors: 0, Time elapsed: 0.916 sec
    [junit] Running org.apache.hadoop.io.TestArrayFile
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 3.685 sec
    [junit] Running org.apache.hadoop.io.TestBytesWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.014 sec
    [junit] Running org.apache.hadoop.io.TestMD5Hash
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.295 sec
    [junit] Running org.apache.hadoop.io.TestSequenceFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 19.657 sec
    [junit] Running org.apache.hadoop.io.TestSetFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.863 sec
    [junit] Running org.apache.hadoop.io.TestText
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.771 sec
    [junit] Running org.apache.hadoop.io.TestTextNonUTF8
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.016 sec
    [junit] Running org.apache.hadoop.io.TestUTF8
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.2 sec
    [junit] Running org.apache.hadoop.io.TestVersionedWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.031 sec
    [junit] Running org.apache.hadoop.io.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.01 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodec
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 2.325 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodecFactory
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.409 sec
    [junit] Running org.apache.hadoop.ipc.TestIPC
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 1.183 sec
    [junit] Running org.apache.hadoop.ipc.TestRPC
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.16 sec
    [junit] Running org.apache.hadoop.mapred.TestEmptyJobWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 15.136 sec
    [junit] Running org.apache.hadoop.mapred.TestMapRed
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 16.309 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRBringup
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.845 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRClasspath
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 34.339 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRDFSCaching
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 32.942 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRLocalFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 72.717 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 105.857 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFilter
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 15.108 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFormat
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 8.992 sec
    [junit] Running org.apache.hadoop.mapred.TestTextInputFormat
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 5.718 sec
    [junit] Running org.apache.hadoop.mapred.jobcontrol.TestJobControl
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 73.566 sec
    [junit] Running org.apache.hadoop.record.test.TestMapRed
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.171 sec
    [junit] Running org.apache.hadoop.record.test.TestRecordIO
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.286 sec
    [junit] Running org.apache.hadoop.record.test.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.874 sec

BUILD FAILED
/tmp/hadoop-nightly/build.xml:389: Tests failed!

Total time: 11 minutes 55 seconds



From MAILER-DAEMON Mon Dec 25 07:08:44 2006
Return-Path: 
 <hadoop-dev-return-6243-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69444 invoked from network); 25 Dec 2006 07:08:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2006 07:08:44 -0000
Received: (qmail 76116 invoked by uid 500); 25 Dec 2006 07:08:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76086 invoked by uid 500); 25 Dec 2006 07:08:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76077 invoked by uid 99); 25 Dec 2006 07:08:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Dec 2006 23:08:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Dec 2006 23:08:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 102FA7142B5
	for <hadoop-dev@lucene.apache.org>; Sun, 24 Dec 2006 23:08:21 -0800 (PST)
Message-ID: <24170331.1167030501062.JavaMail.jira@brutus>
Date: Sun, 24 Dec 2006 23:08:21 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-848) randomwriter generates too many errors
 of type: org.apache.hadoop.dfs.AlreadyBeingCreatedException
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

randomwriter generates too many errors of type: org.apache.hadoop.dfs.AlreadyBeingCreatedException
--------------------------------------------------------------------------------------------------

                 Key: HADOOP-848
                 URL: http://issues.apache.org/jira/browse/HADOOP-848
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.9.2
            Reporter: Arun C Murthy


randomwriter with speculative execution turned 'on' fails with too many errors:

2006-12-25 06:50:38,880 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0002_m_002175_1: org.apache.hadoop.ipc.RemoteException: org.apache.hadoop.dfs.AlreadyBeingCreatedException: failed to create file /randomwriter/input/part000522 for DFSClient_task_0002_m_002101_1 on client XXX because pendingCreates is non-null.
2006-12-25 06:50:48,203 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0002_m_002213_1: org.apache.hadoop.ipc.RemoteException: org.apache.hadoop.dfs.AlreadyBeingCreatedException: failed to create file /randomwriter/input/part000623 for DFSClient_task_0002_m_002213_1 on client XXX because pendingCreates is non-null.
2006-12-25 06:50:49,917 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0002_m_002211_1: org.apache.hadoop.ipc.RemoteException: org.apache.hadoop.dfs.AlreadyBeingCreatedException: failed to create file /randomwriter/input/part000621 for DFSClient_task_0002_m_002211_1 on client XXX because pendingCreates is non-null.
2006-12-25 06:50:52,812 INFO org.apache.hadoop.mapred.TaskInProgress: Error from task_0002_m_002247_1: org.apache.hadoop.ipc.RemoteException: org.apache.hadoop.dfs.AlreadyBeingCreatedException: failed to create file /randomwriter/input/part000654 for DFSClient_task_0002_m_002247_1 on client XXX because pendingCreates is non-null.

I suspect this is due to the the fact that randomwriter doesn't use the PhasedFileSystem.

-*-*-

Unrelated note: can we add the 'examples' *Component* to this project here on jira? I've put in 'mapred' for this issue for now, please feel free to correct me. Thanks!

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 25 08:23:45 2006
Return-Path: 
 <hadoop-dev-return-6244-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82052 invoked from network); 25 Dec 2006 08:23:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2006 08:23:45 -0000
Received: (qmail 8624 invoked by uid 500); 25 Dec 2006 08:23:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8586 invoked by uid 500); 25 Dec 2006 08:23:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8576 invoked by uid 99); 25 Dec 2006 08:23:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 00:23:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 00:23:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E0711714057
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Dec 2006 00:23:23 -0800 (PST)
Message-ID: <12043694.1167035003916.JavaMail.jira@brutus>
Date: Mon, 25 Dec 2006 00:23:23 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-745) NameNode throws
 FileNotFoundException: Parent path does not exist on startup
In-Reply-To: <9757325.1164238741994.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-745?page=all ]

dhruba borthakur reassigned HADOOP-745:
---------------------------------------

    Assignee: dhruba borthakur  (was: Sameer Paranjpye)

> NameNode throws FileNotFoundException: Parent path does not exist on startup
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-745
>                 URL: http://issues.apache.org/jira/browse/HADOOP-745
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: dhruba borthakur
>         Attachments: namenodelocking1.patch
>
>
> (with credit to Christian)
> The following exception is reported by the namenode upon startup:
> 2006-11-22 12:18:17,713 ERROR org.apache.hadoop.dfs.NameNode:
> java.io.FileNotFoundException: Parent path does not exist: /foo/bar
>         at org.apache.hadoop.dfs.FSDirectory$INode.addNode(FSDirectory.java:186)
>         at org.apache.hadoop.dfs.FSDirectory.unprotectedMkdir(FSDirectory.java:731)
>         at org.apache.hadoop.dfs.FSEditLog.loadFSEdits(FSEditLog.java:254)
>         at org.apache.hadoop.dfs.FSImage.loadFSImage(FSImage.java:191)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:321)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:230)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:145)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:137)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:585)
> Perhaps the 'mkdirs' section
>                INode inserted = unprotectedMkdir(cur);
>                if (inserted != null) {
>                    NameNode.stateChangeLog.debug("DIR* FSDirectory.mkdirs: "
>                         +"created directory "+cur );
>                    fsImage.getEditLog().logMkDir( inserted );
> needs to be synchronized or the unprotectedMkdir method needs to be changed
> to allow creating missing parent directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 25 08:23:48 2006
Return-Path: 
 <hadoop-dev-return-6245-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82113 invoked from network); 25 Dec 2006 08:23:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2006 08:23:48 -0000
Received: (qmail 8909 invoked by uid 500); 25 Dec 2006 08:23:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8867 invoked by uid 500); 25 Dec 2006 08:23:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8858 invoked by uid 99); 25 Dec 2006 08:23:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 00:23:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 00:23:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 27A097141A4
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Dec 2006 00:23:26 -0800 (PST)
Message-ID: <29249223.1167035006159.JavaMail.jira@brutus>
Date: Mon, 25 Dec 2006 00:23:26 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-745) NameNode throws FileNotFoundException:
 Parent path does not exist on startup
In-Reply-To: <9757325.1164238741994.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-745?page=all ]

dhruba borthakur updated HADOOP-745:
------------------------------------

    Attachment: namenodelocking1.patch

I could reliably reproduce this problem as part of the testing for Periodic Checkpointing. There was insufficient locking when directories were being created or renamed.

> NameNode throws FileNotFoundException: Parent path does not exist on startup
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-745
>                 URL: http://issues.apache.org/jira/browse/HADOOP-745
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: dhruba borthakur
>         Attachments: namenodelocking1.patch
>
>
> (with credit to Christian)
> The following exception is reported by the namenode upon startup:
> 2006-11-22 12:18:17,713 ERROR org.apache.hadoop.dfs.NameNode:
> java.io.FileNotFoundException: Parent path does not exist: /foo/bar
>         at org.apache.hadoop.dfs.FSDirectory$INode.addNode(FSDirectory.java:186)
>         at org.apache.hadoop.dfs.FSDirectory.unprotectedMkdir(FSDirectory.java:731)
>         at org.apache.hadoop.dfs.FSEditLog.loadFSEdits(FSEditLog.java:254)
>         at org.apache.hadoop.dfs.FSImage.loadFSImage(FSImage.java:191)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:321)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:230)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:145)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:137)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:585)
> Perhaps the 'mkdirs' section
>                INode inserted = unprotectedMkdir(cur);
>                if (inserted != null) {
>                    NameNode.stateChangeLog.debug("DIR* FSDirectory.mkdirs: "
>                         +"created directory "+cur );
>                    fsImage.getEditLog().logMkDir( inserted );
> needs to be synchronized or the unprotectedMkdir method needs to be changed
> to allow creating missing parent directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 25 08:23:50 2006
Return-Path: 
 <hadoop-dev-return-6246-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82155 invoked from network); 25 Dec 2006 08:23:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2006 08:23:50 -0000
Received: (qmail 9342 invoked by uid 500); 25 Dec 2006 08:23:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9138 invoked by uid 500); 25 Dec 2006 08:23:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9129 invoked by uid 99); 25 Dec 2006 08:23:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 00:23:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 00:23:48 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3EF67714295
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Dec 2006 00:23:28 -0800 (PST)
Message-ID: <5376170.1167035008255.JavaMail.jira@brutus>
Date: Mon, 25 Dec 2006 00:23:28 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-745) NameNode throws FileNotFoundException:
 Parent path does not exist on startup
In-Reply-To: <9757325.1164238741994.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-745?page=all ]

dhruba borthakur updated HADOOP-745:
------------------------------------

    Status: Patch Available  (was: Open)

There was insufficient locking when directories were being created or renamed.

> NameNode throws FileNotFoundException: Parent path does not exist on startup
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-745
>                 URL: http://issues.apache.org/jira/browse/HADOOP-745
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: dhruba borthakur
>         Attachments: namenodelocking1.patch
>
>
> (with credit to Christian)
> The following exception is reported by the namenode upon startup:
> 2006-11-22 12:18:17,713 ERROR org.apache.hadoop.dfs.NameNode:
> java.io.FileNotFoundException: Parent path does not exist: /foo/bar
>         at org.apache.hadoop.dfs.FSDirectory$INode.addNode(FSDirectory.java:186)
>         at org.apache.hadoop.dfs.FSDirectory.unprotectedMkdir(FSDirectory.java:731)
>         at org.apache.hadoop.dfs.FSEditLog.loadFSEdits(FSEditLog.java:254)
>         at org.apache.hadoop.dfs.FSImage.loadFSImage(FSImage.java:191)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:321)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:230)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:145)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:137)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:585)
> Perhaps the 'mkdirs' section
>                INode inserted = unprotectedMkdir(cur);
>                if (inserted != null) {
>                    NameNode.stateChangeLog.debug("DIR* FSDirectory.mkdirs: "
>                         +"created directory "+cur );
>                    fsImage.getEditLog().logMkDir( inserted );
> needs to be synchronized or the unprotectedMkdir method needs to be changed
> to allow creating missing parent directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 25 08:37:44 2006
Return-Path: 
 <hadoop-dev-return-6247-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84417 invoked from network); 25 Dec 2006 08:37:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2006 08:37:44 -0000
Received: (qmail 13551 invoked by uid 500); 25 Dec 2006 08:37:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13515 invoked by uid 500); 25 Dec 2006 08:37:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13506 invoked by uid 99); 25 Dec 2006 08:37:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 00:37:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 00:37:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3E07B714057
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Dec 2006 00:37:23 -0800 (PST)
Message-ID: <12606904.1167035843251.JavaMail.jira@brutus>
Date: Mon, 25 Dec 2006 00:37:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-745) NameNode throws
 FileNotFoundException: Parent path does not exist on startup
In-Reply-To: <9757325.1164238741994.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-745?page=comments#action_12460749 ] 
            
Hadoop QA commented on HADOOP-745:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347815/namenodelocking1.patch applied and successfully tested against trunk revision r489707.

> NameNode throws FileNotFoundException: Parent path does not exist on startup
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-745
>                 URL: http://issues.apache.org/jira/browse/HADOOP-745
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>            Reporter: Nigel Daley
>         Assigned To: dhruba borthakur
>         Attachments: namenodelocking1.patch
>
>
> (with credit to Christian)
> The following exception is reported by the namenode upon startup:
> 2006-11-22 12:18:17,713 ERROR org.apache.hadoop.dfs.NameNode:
> java.io.FileNotFoundException: Parent path does not exist: /foo/bar
>         at org.apache.hadoop.dfs.FSDirectory$INode.addNode(FSDirectory.java:186)
>         at org.apache.hadoop.dfs.FSDirectory.unprotectedMkdir(FSDirectory.java:731)
>         at org.apache.hadoop.dfs.FSEditLog.loadFSEdits(FSEditLog.java:254)
>         at org.apache.hadoop.dfs.FSImage.loadFSImage(FSImage.java:191)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:321)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:230)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:145)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:137)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:585)
> Perhaps the 'mkdirs' section
>                INode inserted = unprotectedMkdir(cur);
>                if (inserted != null) {
>                    NameNode.stateChangeLog.debug("DIR* FSDirectory.mkdirs: "
>                         +"created directory "+cur );
>                    fsImage.getEditLog().logMkDir( inserted );
> needs to be synchronized or the unprotectedMkdir method needs to be changed
> to allow creating missing parent directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 25 09:25:43 2006
Return-Path: 
 <hadoop-dev-return-6248-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 553 invoked from network); 25 Dec 2006 09:25:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2006 09:25:43 -0000
Received: (qmail 38087 invoked by uid 500); 25 Dec 2006 09:25:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38060 invoked by uid 500); 25 Dec 2006 09:25:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38051 invoked by uid 99); 25 Dec 2006 09:25:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 01:25:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 01:25:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 67B737141A4
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Dec 2006 01:25:22 -0800 (PST)
Message-ID: <793118.1167038722422.JavaMail.jira@brutus>
Date: Mon, 25 Dec 2006 01:25:22 -0800 (PST)
From: "weilei (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-845) DFS -get and DFS -cat on a zip file
 generate different output
In-Reply-To: <3149493.1166741961266.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-845?page=all ]

weilei updated HADOOP-845:
--------------------------

               Status: Patch Available  (was: Open)
    Affects Version/s: 0.9.1

> DFS -get and DFS -cat on a zip file generate different output
> -------------------------------------------------------------
>
>                 Key: HADOOP-845
>                 URL: http://issues.apache.org/jira/browse/HADOOP-845
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.9.1
>            Reporter: Mahadev konar
>            Priority: Minor
>
> dfs -get file.gz localfile.gz and dfs -cat file.gz  > /tmp/file.gz generate different output. dfs -get geenreates corect output but dfs -cat does not geenerate the right ouput. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 25 09:25:45 2006
Return-Path: 
 <hadoop-dev-return-6249-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 598 invoked from network); 25 Dec 2006 09:25:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2006 09:25:45 -0000
Received: (qmail 38564 invoked by uid 500); 25 Dec 2006 09:25:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38325 invoked by uid 500); 25 Dec 2006 09:25:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38316 invoked by uid 99); 25 Dec 2006 09:25:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 01:25:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 01:25:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E172E714057
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Dec 2006 01:25:23 -0800 (PST)
Message-ID: <18592801.1167038723921.JavaMail.jira@brutus>
Date: Mon, 25 Dec 2006 01:25:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-845) DFS -get and DFS -cat on a zip file
 generate different output
In-Reply-To: <3149493.1166741961266.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-845?page=comments#action_12460757 ] 
            
Hadoop QA commented on HADOOP-845:
----------------------------------

-1, because the patch command could not apply the latest attachment (http://issues.apache.org) as a patch to trunk revision r489707. Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.

> DFS -get and DFS -cat on a zip file generate different output
> -------------------------------------------------------------
>
>                 Key: HADOOP-845
>                 URL: http://issues.apache.org/jira/browse/HADOOP-845
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.9.1
>            Reporter: Mahadev konar
>            Priority: Minor
>
> dfs -get file.gz localfile.gz and dfs -cat file.gz  > /tmp/file.gz generate different output. dfs -get geenreates corect output but dfs -cat does not geenerate the right ouput. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 25 09:35:43 2006
Return-Path: 
 <hadoop-dev-return-6250-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3912 invoked from network); 25 Dec 2006 09:35:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2006 09:35:43 -0000
Received: (qmail 41468 invoked by uid 500); 25 Dec 2006 09:35:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41434 invoked by uid 500); 25 Dec 2006 09:35:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41425 invoked by uid 99); 25 Dec 2006 09:35:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 01:35:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 01:35:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 68DF67141A4
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Dec 2006 01:35:22 -0800 (PST)
Message-ID: <29068649.1167039322427.JavaMail.jira@brutus>
Date: Mon, 25 Dec 2006 01:35:22 -0800 (PST)
From: "weilei (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-845) DFS -get and DFS -cat on a zip file
 generate different output
In-Reply-To: <3149493.1166741961266.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-845?page=all ]

weilei updated HADOOP-845:
--------------------------

    Attachment: patch.txt

Some codes are added to org.apache.hadoop.dfs.DFSShell.java. then we can cat gzip file like others

> DFS -get and DFS -cat on a zip file generate different output
> -------------------------------------------------------------
>
>                 Key: HADOOP-845
>                 URL: http://issues.apache.org/jira/browse/HADOOP-845
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.9.1
>            Reporter: Mahadev konar
>            Priority: Minor
>         Attachments: patch.txt
>
>
> dfs -get file.gz localfile.gz and dfs -cat file.gz  > /tmp/file.gz generate different output. dfs -get geenreates corect output but dfs -cat does not geenerate the right ouput. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 25 17:41:42 2006
Return-Path: 
 <hadoop-dev-return-6251-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77725 invoked from network); 25 Dec 2006 17:41:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2006 17:41:42 -0000
Received: (qmail 16296 invoked by uid 500); 25 Dec 2006 17:41:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16260 invoked by uid 500); 25 Dec 2006 17:41:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16251 invoked by uid 99); 25 Dec 2006 17:41:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 09:41:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 09:41:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0AC25714286
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Dec 2006 09:41:21 -0800 (PST)
Message-ID: <5228499.1167068481039.JavaMail.jira@brutus>
Date: Mon, 25 Dec 2006 09:41:21 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-849) randomwriter fails with
 'java.lang.OutOfMemoryError: Java heap space'
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

randomwriter fails with 'java.lang.OutOfMemoryError: Java heap space'
---------------------------------------------------------------------

                 Key: HADOOP-849
                 URL: http://issues.apache.org/jira/browse/HADOOP-849
             Project: Hadoop
          Issue Type: Bug
            Reporter: Arun C Murthy
             Fix For: 0.9.2


Reproducible, tried to increase the child jvm's heapsize via 
<property>
  <name>mapred.child.java.opts</name>
  <value>-Xmx512m</value>
</property>

without any difference, still fails.

Need to investigate further.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Dec 25 18:34:43 2006
Return-Path: 
 <hadoop-dev-return-6252-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81751 invoked from network); 25 Dec 2006 18:34:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2006 18:34:43 -0000
Received: (qmail 37677 invoked by uid 500); 25 Dec 2006 18:34:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37650 invoked by uid 500); 25 Dec 2006 18:34:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37641 invoked by uid 99); 25 Dec 2006 18:34:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 10:34:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 10:34:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5D668714286
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Dec 2006 10:34:22 -0800 (PST)
Message-ID: <20402871.1167071662379.JavaMail.jira@brutus>
Date: Mon, 25 Dec 2006 10:34:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-849) randomwriter fails with
 'java.lang.OutOfMemoryError: Java heap space' in the 'reduce' task
In-Reply-To: <5228499.1167068481039.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-849?page=all ]

Arun C Murthy updated HADOOP-849:
---------------------------------

    Summary: randomwriter fails with 'java.lang.OutOfMemoryError: Java heap space' in the 'reduce' task  (was: randomwriter fails with 'java.lang.OutOfMemoryError: Java heap space')

> randomwriter fails with 'java.lang.OutOfMemoryError: Java heap space' in the 'reduce' task
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-849
>                 URL: http://issues.apache.org/jira/browse/HADOOP-849
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Arun C Murthy
>             Fix For: 0.9.2
>
>
> Reproducible, tried to increase the child jvm's heapsize via 
> <property>
>   <name>mapred.child.java.opts</name>
>   <value>-Xmx512m</value>
> </property>
> without any difference, still fails.
> Need to investigate further.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 26 06:09:45 2006
Return-Path: 
 <hadoop-dev-return-6253-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68992 invoked from network); 26 Dec 2006 06:09:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2006 06:09:45 -0000
Received: (qmail 48100 invoked by uid 500); 26 Dec 2006 06:09:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48048 invoked by uid 500); 26 Dec 2006 06:09:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48033 invoked by uid 99); 26 Dec 2006 06:09:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 22:09:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 22:09:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 54AC57141A4
	for <hadoop-dev@lucene.apache.org>; Mon, 25 Dec 2006 22:09:23 -0800 (PST)
Message-ID: <1333360.1167113363344.JavaMail.jira@brutus>
Date: Mon, 25 Dec 2006 22:09:23 -0800 (PST)
From: "weilei (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-768) directory browser can not  list all
 the entries for a large directory
In-Reply-To: <3497752.1164916161069.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-768?page=comments#action_12460845 ] 
            
weilei commented on HADOOP-768:
-------------------------------

I have put a temporary directory with 500 files. then they are all displayed in my web browser (ie6). My hadoop's version is 0.9.1

> directory browser can not  list all the entries for a large directory
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-768
>                 URL: http://issues.apache.org/jira/browse/HADOOP-768
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.8.0
>         Environment: IE Firefox Safari
>            Reporter: Hairong Kuang
>         Assigned To: Sameer Paranjpye
>
> When browsing a large directory, for example, one with 500 files, web browser is not able to display all the entries. Instead, it stops loading the page in the middle.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 26 23:42:24 2006
Return-Path: 
 <hadoop-dev-return-6254-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23118 invoked from network); 26 Dec 2006 23:42:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2006 23:42:24 -0000
Received: (qmail 48954 invoked by uid 500); 26 Dec 2006 21:55:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48927 invoked by uid 500); 26 Dec 2006 21:55:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48918 invoked by uid 99); 26 Dec 2006 21:55:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 13:55:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 13:55:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 03FD3714295
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Dec 2006 13:55:23 -0800 (PST)
Message-ID: <1917870.1167170123013.JavaMail.jira@brutus>
Date: Tue, 26 Dec 2006 13:55:23 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-840) the task tracker is getting blocked by
 long deletes of local files
In-Reply-To: <24071482.1166642061080.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-840?page=all ]

Mahadev konar updated HADOOP-840:
---------------------------------

    Attachment:     (was: lost-tt_2.patch)

> the task tracker is getting blocked by long deletes of local files
> ------------------------------------------------------------------
>
>                 Key: HADOOP-840
>                 URL: http://issues.apache.org/jira/browse/HADOOP-840
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: lost-tt.patch
>
>
> The task tracker is getting blocked in the main heartbeat loop by doing task cleanups in the main thread. We need to queue up the cleanup actions and work on them offline. This should make our task trackers not miss heartbeats and thus get lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Dec 26 23:44:24 2006
Return-Path: 
 <hadoop-dev-return-6255-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24013 invoked from network); 26 Dec 2006 23:44:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2006 23:44:24 -0000
Received: (qmail 49841 invoked by uid 500); 26 Dec 2006 21:57:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49824 invoked by uid 500); 26 Dec 2006 21:57:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49815 invoked by uid 99); 26 Dec 2006 21:57:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 13:57:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 13:57:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5B144714295
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Dec 2006 13:57:22 -0800 (PST)
Message-ID: <17707896.1167170242370.JavaMail.jira@brutus>
Date: Tue, 26 Dec 2006 13:57:22 -0800 (PST)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-840) the task tracker is getting blocked by
 long deletes of local files
In-Reply-To: <24071482.1166642061080.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-840?page=all ]

Mahadev konar updated HADOOP-840:
---------------------------------

    Attachment: lost-tt_3.patch

an updated patch that passes all the unit tests.

> the task tracker is getting blocked by long deletes of local files
> ------------------------------------------------------------------
>
>                 Key: HADOOP-840
>                 URL: http://issues.apache.org/jira/browse/HADOOP-840
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.10.0
>
>         Attachments: lost-tt.patch, lost-tt_3.patch
>
>
> The task tracker is getting blocked in the main heartbeat loop by doing task cleanups in the main thread. We need to queue up the cleanup actions and work on them offline. This should make our task trackers not miss heartbeats and thus get lost.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 27 06:32:46 2006
Return-Path: 
 <hadoop-dev-return-6256-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82816 invoked from network); 27 Dec 2006 06:32:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 06:32:46 -0000
Received: (qmail 53638 invoked by uid 500); 27 Dec 2006 06:32:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53607 invoked by uid 500); 27 Dec 2006 06:32:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53598 invoked by uid 99); 27 Dec 2006 06:32:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 22:32:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 22:32:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C92D171429F
	for <hadoop-dev@lucene.apache.org>; Tue, 26 Dec 2006 22:32:24 -0800 (PST)
Message-ID: <32063745.1167201144821.JavaMail.jira@brutus>
Date: Tue, 26 Dec 2006 22:32:24 -0800 (PST)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-227?page=all ]

dhruba borthakur updated HADOOP-227:
------------------------------------

    Attachment: periodiccheckpoint.patch

First draft of periodic chekpointing code. Code review comments appreciated.

> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: dhruba borthakur
>         Attachments: patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0, patch-async-checkpoints-0.9.0, periodiccheckpoint.patch
>
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 27 19:13:42 2006
Return-Path: 
 <hadoop-dev-return-6257-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66262 invoked from network); 27 Dec 2006 19:13:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 19:13:42 -0000
Received: (qmail 13587 invoked by uid 500); 27 Dec 2006 19:13:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13564 invoked by uid 500); 27 Dec 2006 19:13:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13550 invoked by uid 99); 27 Dec 2006 19:13:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 11:13:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 11:13:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 230CD714295
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Dec 2006 11:13:21 -0800 (PST)
Message-ID: <8634952.1167246801140.JavaMail.jira@brutus>
Date: Wed, 27 Dec 2006 11:13:21 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-850) Add Writable implementations for
 variable-length integer types.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Add Writable implementations for variable-length integer types.
---------------------------------------------------------------

                 Key: HADOOP-850
                 URL: http://issues.apache.org/jira/browse/HADOOP-850
             Project: Hadoop
          Issue Type: Improvement
          Components: io
    Affects Versions: 0.10.0
            Reporter: Andrzej Bialecki 
         Assigned To: Andrzej Bialecki 
            Priority: Minor
             Fix For: 0.10.0


Currently Hadoop supports only three basic integer-like types: ByteWritable, IntWritable and LongWritable. They provide a fixed tradeoff between their value range and on-disk space consumption. But it is sometimes useful to be able to store integer values with broader allowed range, but less space consumption when possible.

This is especially useful when storing very long series of  values, combined with delta encoding.

Lucene already implements variable-length encoding for positive int and long. I propose to add similar Writable implementations, which use the same encoding methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 27 19:15:43 2006
Return-Path: 
 <hadoop-dev-return-6258-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66585 invoked from network); 27 Dec 2006 19:15:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 19:15:43 -0000
Received: (qmail 14801 invoked by uid 500); 27 Dec 2006 19:15:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14769 invoked by uid 500); 27 Dec 2006 19:15:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14760 invoked by uid 99); 27 Dec 2006 19:15:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 11:15:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 11:15:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5EDED7142A1
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Dec 2006 11:15:22 -0800 (PST)
Message-ID: <4435427.1167246922386.JavaMail.jira@brutus>
Date: Wed, 27 Dec 2006 11:15:22 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-850) Add Writable implementations for
 variable-length integer types.
In-Reply-To: <8634952.1167246801140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-850?page=all ]

Andrzej Bialecki  updated HADOOP-850:
-------------------------------------

    Attachment: variable-ints.patch

Implementation of VIntWritable and VLongWritable. If there are no objections I'd like to commit them soon.

> Add Writable implementations for variable-length integer types.
> ---------------------------------------------------------------
>
>                 Key: HADOOP-850
>                 URL: http://issues.apache.org/jira/browse/HADOOP-850
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.10.0
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: variable-ints.patch
>
>
> Currently Hadoop supports only three basic integer-like types: ByteWritable, IntWritable and LongWritable. They provide a fixed tradeoff between their value range and on-disk space consumption. But it is sometimes useful to be able to store integer values with broader allowed range, but less space consumption when possible.
> This is especially useful when storing very long series of  values, combined with delta encoding.
> Lucene already implements variable-length encoding for positive int and long. I propose to add similar Writable implementations, which use the same encoding methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 27 19:19:43 2006
Return-Path: 
 <hadoop-dev-return-6259-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67222 invoked from network); 27 Dec 2006 19:19:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 19:19:43 -0000
Received: (qmail 19469 invoked by uid 500); 27 Dec 2006 19:19:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19224 invoked by uid 500); 27 Dec 2006 19:19:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19214 invoked by uid 99); 27 Dec 2006 19:19:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 11:19:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 11:19:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 50BCE7142A1
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Dec 2006 11:19:22 -0800 (PST)
Message-ID: <2625312.1167247162327.JavaMail.jira@brutus>
Date: Wed, 27 Dec 2006 11:19:22 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-850) Add Writable implementations for
 variable-length integer types.
In-Reply-To: <8634952.1167246801140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-850?page=all ]

Andrzej Bialecki  updated HADOOP-850:
-------------------------------------

    Status: Patch Available  (was: Open)

> Add Writable implementations for variable-length integer types.
> ---------------------------------------------------------------
>
>                 Key: HADOOP-850
>                 URL: http://issues.apache.org/jira/browse/HADOOP-850
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.10.0
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: variable-ints.patch
>
>
> Currently Hadoop supports only three basic integer-like types: ByteWritable, IntWritable and LongWritable. They provide a fixed tradeoff between their value range and on-disk space consumption. But it is sometimes useful to be able to store integer values with broader allowed range, but less space consumption when possible.
> This is especially useful when storing very long series of  values, combined with delta encoding.
> Lucene already implements variable-length encoding for positive int and long. I propose to add similar Writable implementations, which use the same encoding methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 27 19:34:43 2006
Return-Path: 
 <hadoop-dev-return-6260-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70030 invoked from network); 27 Dec 2006 19:34:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 19:34:43 -0000
Received: (qmail 26933 invoked by uid 500); 27 Dec 2006 19:34:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26911 invoked by uid 500); 27 Dec 2006 19:34:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26902 invoked by uid 99); 27 Dec 2006 19:34:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 11:34:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 11:34:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6C8207142A1
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Dec 2006 11:34:22 -0800 (PST)
Message-ID: <17130260.1167248062441.JavaMail.jira@brutus>
Date: Wed, 27 Dec 2006 11:34:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-850) Add Writable implementations for
 variable-length integer types.
In-Reply-To: <8634952.1167246801140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-850?page=comments#action_12461082 ] 
            
Hadoop QA commented on HADOOP-850:
----------------------------------

-1, because the javadoc command appears to have generated warning messages when testing the latest attachment (http://issues.apache.org/jira/secure/attachment/12347952/variable-ints.patch) against trunk revision r489707. Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.

> Add Writable implementations for variable-length integer types.
> ---------------------------------------------------------------
>
>                 Key: HADOOP-850
>                 URL: http://issues.apache.org/jira/browse/HADOOP-850
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.10.0
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: variable-ints.patch
>
>
> Currently Hadoop supports only three basic integer-like types: ByteWritable, IntWritable and LongWritable. They provide a fixed tradeoff between their value range and on-disk space consumption. But it is sometimes useful to be able to store integer values with broader allowed range, but less space consumption when possible.
> This is especially useful when storing very long series of  values, combined with delta encoding.
> Lucene already implements variable-length encoding for positive int and long. I propose to add similar Writable implementations, which use the same encoding methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 27 20:04:44 2006
Return-Path: 
 <hadoop-dev-return-6261-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80547 invoked from network); 27 Dec 2006 20:04:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 20:04:44 -0000
Received: (qmail 60371 invoked by uid 500); 27 Dec 2006 20:04:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60338 invoked by uid 500); 27 Dec 2006 20:04:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60329 invoked by uid 99); 27 Dec 2006 20:04:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 12:04:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 12:04:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5846271429F
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Dec 2006 12:04:22 -0800 (PST)
Message-ID: <15501014.1167249862358.JavaMail.jira@brutus>
Date: Wed, 27 Dec 2006 12:04:22 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-850) Add Writable implementations for
 variable-length integer types.
In-Reply-To: <8634952.1167246801140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-850?page=all ]

Andrzej Bialecki  updated HADOOP-850:
-------------------------------------

    Status: Open  (was: Patch Available)

> Add Writable implementations for variable-length integer types.
> ---------------------------------------------------------------
>
>                 Key: HADOOP-850
>                 URL: http://issues.apache.org/jira/browse/HADOOP-850
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.10.0
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: variable-ints.patch, variable-ints.patch
>
>
> Currently Hadoop supports only three basic integer-like types: ByteWritable, IntWritable and LongWritable. They provide a fixed tradeoff between their value range and on-disk space consumption. But it is sometimes useful to be able to store integer values with broader allowed range, but less space consumption when possible.
> This is especially useful when storing very long series of  values, combined with delta encoding.
> Lucene already implements variable-length encoding for positive int and long. I propose to add similar Writable implementations, which use the same encoding methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 27 20:04:45 2006
Return-Path: 
 <hadoop-dev-return-6262-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80590 invoked from network); 27 Dec 2006 20:04:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 20:04:45 -0000
Received: (qmail 60858 invoked by uid 500); 27 Dec 2006 20:04:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60607 invoked by uid 500); 27 Dec 2006 20:04:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60598 invoked by uid 99); 27 Dec 2006 20:04:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 12:04:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 12:04:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BC2487142B6
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Dec 2006 12:04:23 -0800 (PST)
Message-ID: <20438252.1167249863768.JavaMail.jira@brutus>
Date: Wed, 27 Dec 2006 12:04:23 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-850) Add Writable implementations for
 variable-length integer types.
In-Reply-To: <8634952.1167246801140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-850?page=all ]

Andrzej Bialecki  updated HADOOP-850:
-------------------------------------

    Attachment: variable-ints.patch

Fix javadoc warnings (references to external classes in Lucene).

> Add Writable implementations for variable-length integer types.
> ---------------------------------------------------------------
>
>                 Key: HADOOP-850
>                 URL: http://issues.apache.org/jira/browse/HADOOP-850
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.10.0
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: variable-ints.patch, variable-ints.patch
>
>
> Currently Hadoop supports only three basic integer-like types: ByteWritable, IntWritable and LongWritable. They provide a fixed tradeoff between their value range and on-disk space consumption. But it is sometimes useful to be able to store integer values with broader allowed range, but less space consumption when possible.
> This is especially useful when storing very long series of  values, combined with delta encoding.
> Lucene already implements variable-length encoding for positive int and long. I propose to add similar Writable implementations, which use the same encoding methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 27 20:06:44 2006
Return-Path: 
 <hadoop-dev-return-6263-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80827 invoked from network); 27 Dec 2006 20:06:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 20:06:44 -0000
Received: (qmail 61450 invoked by uid 500); 27 Dec 2006 20:06:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61422 invoked by uid 500); 27 Dec 2006 20:06:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61413 invoked by uid 99); 27 Dec 2006 20:06:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 12:06:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 12:06:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5BDFC71429F
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Dec 2006 12:06:22 -0800 (PST)
Message-ID: <18924029.1167249982373.JavaMail.jira@brutus>
Date: Wed, 27 Dec 2006 12:06:22 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-850) Add Writable implementations for
 variable-length integer types.
In-Reply-To: <8634952.1167246801140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-850?page=all ]

Andrzej Bialecki  updated HADOOP-850:
-------------------------------------

    Attachment:     (was: variable-ints.patch)

> Add Writable implementations for variable-length integer types.
> ---------------------------------------------------------------
>
>                 Key: HADOOP-850
>                 URL: http://issues.apache.org/jira/browse/HADOOP-850
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.10.0
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: variable-ints.patch
>
>
> Currently Hadoop supports only three basic integer-like types: ByteWritable, IntWritable and LongWritable. They provide a fixed tradeoff between their value range and on-disk space consumption. But it is sometimes useful to be able to store integer values with broader allowed range, but less space consumption when possible.
> This is especially useful when storing very long series of  values, combined with delta encoding.
> Lucene already implements variable-length encoding for positive int and long. I propose to add similar Writable implementations, which use the same encoding methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 27 20:06:46 2006
Return-Path: 
 <hadoop-dev-return-6264-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80880 invoked from network); 27 Dec 2006 20:06:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 20:06:46 -0000
Received: (qmail 61750 invoked by uid 500); 27 Dec 2006 20:06:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61691 invoked by uid 500); 27 Dec 2006 20:06:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61682 invoked by uid 99); 27 Dec 2006 20:06:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 12:06:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 12:06:44 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 20B517142B6
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Dec 2006 12:06:24 -0800 (PST)
Message-ID: <6818731.1167249984131.JavaMail.jira@brutus>
Date: Wed, 27 Dec 2006 12:06:24 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-850) Add Writable implementations for
 variable-length integer types.
In-Reply-To: <8634952.1167246801140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-850?page=all ]

Andrzej Bialecki  updated HADOOP-850:
-------------------------------------

    Status: Patch Available  (was: Open)

> Add Writable implementations for variable-length integer types.
> ---------------------------------------------------------------
>
>                 Key: HADOOP-850
>                 URL: http://issues.apache.org/jira/browse/HADOOP-850
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.10.0
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: variable-ints.patch
>
>
> Currently Hadoop supports only three basic integer-like types: ByteWritable, IntWritable and LongWritable. They provide a fixed tradeoff between their value range and on-disk space consumption. But it is sometimes useful to be able to store integer values with broader allowed range, but less space consumption when possible.
> This is especially useful when storing very long series of  values, combined with delta encoding.
> Lucene already implements variable-length encoding for positive int and long. I propose to add similar Writable implementations, which use the same encoding methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Dec 27 20:43:44 2006
Return-Path: 
 <hadoop-dev-return-6265-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95662 invoked from network); 27 Dec 2006 20:43:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 20:43:44 -0000
Received: (qmail 97420 invoked by uid 500); 27 Dec 2006 20:43:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97182 invoked by uid 500); 27 Dec 2006 20:43:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97172 invoked by uid 99); 27 Dec 2006 20:43:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 12:43:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 12:43:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7CB2B714295
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Dec 2006 12:43:22 -0800 (PST)
Message-ID: <12183303.1167252202506.JavaMail.jira@brutus>
Date: Wed, 27 Dec 2006 12:43:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-850) Add Writable implementations for
 variable-length integer types.
In-Reply-To: <8634952.1167246801140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-850?page=comments#action_12461099 ] 
            
Hadoop QA commented on HADOOP-850:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347954/variable-ints.patch applied and successfully tested against trunk revision r489707.

> Add Writable implementations for variable-length integer types.
> ---------------------------------------------------------------
>
>                 Key: HADOOP-850
>                 URL: http://issues.apache.org/jira/browse/HADOOP-850
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.10.0
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: variable-ints.patch
>
>
> Currently Hadoop supports only three basic integer-like types: ByteWritable, IntWritable and LongWritable. They provide a fixed tradeoff between their value range and on-disk space consumption. But it is sometimes useful to be able to store integer values with broader allowed range, but less space consumption when possible.
> This is especially useful when storing very long series of  values, combined with delta encoding.
> Lucene already implements variable-length encoding for positive int and long. I propose to add similar Writable implementations, which use the same encoding methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 28 02:48:47 2006
Return-Path: 
 <hadoop-dev-return-6266-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68332 invoked from network); 28 Dec 2006 02:48:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 02:48:47 -0000
Received: (qmail 17757 invoked by uid 500); 28 Dec 2006 02:48:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17735 invoked by uid 500); 28 Dec 2006 02:48:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17725 invoked by uid 99); 28 Dec 2006 02:48:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 18:48:53 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of you.leiqing@gmail.com
 designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 18:48:44 -0800
Received: by py-out-1112.google.com with SMTP id a25so2432565pyi
        for <hadoop-dev@lucene.apache.org>;
 Wed, 27 Dec 2006 18:48:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:date:from:to:subject:x-mailer:mime-version:content-type:content-transfer-encoding:message-id;
        b=iVOBieMwnYdnTe9f5Fk6XABpcSJ5g4ErS12UyCMqaeDgNx8+53bZ15OS+REvFDeZDuLZl9Bx+zTZDoPG8fuLTzbheEy19Owmranc+gIbpGY73NueOPWEbRarkqrm9BsWMacK6p64j7RWGD4AWTzcdBNT7hB3AaCgly+5A0Hym6E=
Received: by 10.35.129.19 with SMTP id g19mr27706089pyn.1167274080376;
        Wed, 27 Dec 2006 18:48:00 -0800 (PST)
Received: from fsti-youlq ( [202.101.100.76])
        by mx.google.com with ESMTP id f45sm22551256pyh.2006.12.27.18.47.57;
        Wed, 27 Dec 2006 18:48:00 -0800 (PST)
Date: Thu, 28 Dec 2006 10:48:07 +0800
From: "youlq" <you.leiqing@gmail.com>
To: "hadoop-dev" <hadoop-dev@lucene.apache.org>
Subject: Make hadoop really platform independed
X-mailer: Foxmail 5.0 [cn]
Mime-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64
Message-ID: <45933060.18a8b13a.1c93.0c6f@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

aGksYWxsOg0KDQoJQXMgd2Uga25vd24gLCBub3cgaGFkb29wIGNhbid0IHJ1biBvbiB3aW5kb3dz
IGJlY2F1c2Ugb2YgdGhlIHVuaXggc2hlbGwgdXNlZCBieSBhbnQgYW5kIERGIHV0aWxpdHkgdXNl
ZCBieSBERi5qYXZhICxJIHRoaW5rIHRoZSB1bml4IHNoZWxsIGNvdWxkIGJlIGVhc3lseSByZXBs
YWNlIHdpdGggamF2YSBjb2RlIG9yIGFudCBzY3JpcHQgLEFuZCBpbiBKYXZhIDYsIEkgZmluZCB0
aGUgREYgdXRpbGl0eSBjYW4gYmUgcmVwbGFjZSB3aXRoIGdldFVzYWJsZVNwYWNlKClhbmQgZ2V0
VG90YWxTcGFjZSgpIG9mIGphdmEuaW8uRmlsZS4gQmV0d2VlbiB0aGUgdHdvLCB5b3UgY2FuIHNo
b3cgaG93IG11Y2ggc3BhY2UNCmVhY2ggZmlsZSBzeXN0ZW0gaGFzIGF2YWlsYWJsZSBhbmQgaGFz
IGluIHRvdGFsKFNlZSB0aGUgY29kZSBsaXN0ZWQgYmVsb3cpLiBNYXkgYmUgdGhlIERGIGNsYXNz
IHNob3VsZCBtYWRlIHRvIG1vcmUgc21hcnQgdG8gc3VwcG9ydCBkaWZmZXJlbnQgT1MgYW5kIEpE
SyAuDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KcHVibGljIGNsYXNzIFNwYWNlew0K
ICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmcgYXJnc1tdKXsNCiAgICBDb25zb2xlIGNv
bnNvbGU9U3lzdGVtLmNvbnNvbGUoKTsNCiAgICBGaWxlIHJvb3RzW109RmlsZS5saXN0Um9vdHMo
KTsNCiAgICBmb3IoRmlsZSByb290IDogcm9vdHMpew0KICAgICAgY29uc29sZS5wcmludGYoIiVz
IGhhcyAlLGQgb2YgJSxkIGZyZWUlbiIsIHJvb3QuZ2V0UGF0aCgpLA0KICAgICAgICAgICAgICAg
ICAgICAgcm9vdC5nZXRVc2FibGVTcGFjZSgpLCByb290LmdldFRvdGFsU3BhY2UoKQ0KICAgICAg
KTsNCiAgICB9DQogIH0NCn0NCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0Kb3VwdXQ6DQot
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCkE6XCBoYXMgMzAsNzIwIG9mIDczMCwxMTIgZnJl
ZQ0KQzpcIGhhcyA1LDgyNSw2NzEsNjgwIG9mIDM5LDk3NCw4NjAsMjg4IGZyZWUNCkQ6XCBoYXMg
NTEsMTI4LDMyMCBvZiAxMDAsNDMxLDg3MiBmcmVlDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0NCg0KCQ0KDQqhoaGhoaGhoaGhoaGhoaGheW91bHENCqGhoaGhoaGhoaGhoaGhoaF5b3UubGVp
cWluZ0BnbWFpbC5jb20NCqGhoaGhoaGhoaGhoaGhoaGhoaGhMjAwNi0xMi0yOA0K


From MAILER-DAEMON Thu Dec 28 03:18:47 2006
Return-Path: 
 <hadoop-dev-return-6267-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71092 invoked from network); 28 Dec 2006 03:18:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 03:18:47 -0000
Received: (qmail 28743 invoked by uid 500); 28 Dec 2006 03:18:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28685 invoked by uid 500); 28 Dec 2006 03:18:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28654 invoked by uid 99); 28 Dec 2006 03:18:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 19:18:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 19:18:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 69A2B7142BA
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Dec 2006 19:18:22 -0800 (PST)
Message-ID: <10641956.1167275902430.JavaMail.jira@brutus>
Date: Wed, 27 Dec 2006 19:18:22 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-850) Add Writable implementations for
 variable-length integer types.
In-Reply-To: <8634952.1167246801140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-850?page=comments#action_12461139 ] 
            
Owen O'Malley commented on HADOOP-850:
--------------------------------------

Please use the VInt implementation that is already in org.apache.hadoop.io.WritableUtils. It makes sense to have a WritableComparable class for this, but I think it is confusing to have two incompatible vint implementations.

> Add Writable implementations for variable-length integer types.
> ---------------------------------------------------------------
>
>                 Key: HADOOP-850
>                 URL: http://issues.apache.org/jira/browse/HADOOP-850
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.10.0
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: variable-ints.patch
>
>
> Currently Hadoop supports only three basic integer-like types: ByteWritable, IntWritable and LongWritable. They provide a fixed tradeoff between their value range and on-disk space consumption. But it is sometimes useful to be able to store integer values with broader allowed range, but less space consumption when possible.
> This is especially useful when storing very long series of  values, combined with delta encoding.
> Lucene already implements variable-length encoding for positive int and long. I propose to add similar Writable implementations, which use the same encoding methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 28 03:49:00 2006
Return-Path: 
 <hadoop-dev-return-6268-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76199 invoked from network); 28 Dec 2006 03:49:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 03:49:00 -0000
Received: (qmail 44962 invoked by uid 500); 28 Dec 2006 03:49:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44942 invoked by uid 500); 28 Dec 2006 03:49:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44933 invoked by uid 99); 28 Dec 2006 03:49:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 19:49:06 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.151.94.5] (HELO megs8.100mwh.com) (209.151.94.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 19:48:57 -0800
Received: from [12.183.175.180] (helo=[12.183.175.180])
	by megs8.100mwh.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.52)
	id 1GzmFt-0008UP-EG
	for hadoop-dev@lucene.apache.org; Wed, 27 Dec 2006 20:48:33 -0700
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <45933060.18a8b13a.1c93.0c6f@mx.google.com>
References: <45933060.18a8b13a.1c93.0c6f@mx.google.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <20C14807-627A-4300-9F88-0AD74BD33A22@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Owen O'Malley <owen@yahoo-inc.com>
Subject: Re: Make hadoop really platform independed
Date: Wed, 27 Dec 2006 19:48:23 -0800
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-AntiAbuse: This header was added to track abuse,
 please include it with any abuse report
X-AntiAbuse: Primary Hostname - megs8.100mwh.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - yahoo-inc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 27, 2006, at 6:48 PM, youlq wrote:

> hi,all:
>
> 	As we known , now hadoop can't run on windows because of the unix  
> shell used by ant and DF utility used by DF.java ,I think the unix  
> shell could be easyly replace with java code or ant script ,And in  
> Java 6, I find the DF utility can be replace with getUsableSpace() 
> and getTotalSpace() of java.io.File. Between the two, you can show  
> how much space
> each file system has available and has in total(See the code listed  
> below). May be the DF class should made to more smart to support  
> different OS and JDK .

Actually, Hadoop runs fine on Windows, except when someone makes a  
mistake. *smile* Under Windows, it requires cygwin. I just updated  
the FAQ to include the platform information:
http://wiki.apache.org/lucene-hadoop/FAQ

Java 6 has just been released and I think it is too early to make  
Hadoop require Java 6 in order to run. Of course in the long run,  
having a pure Java implementation of all of the required  
functionality is a very good thing.

-- Owen

From MAILER-DAEMON Thu Dec 28 03:49:44 2006
Return-Path: 
 <hadoop-dev-return-6269-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76266 invoked from network); 28 Dec 2006 03:49:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 03:49:44 -0000
Received: (qmail 45349 invoked by uid 500); 28 Dec 2006 03:49:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45322 invoked by uid 500); 28 Dec 2006 03:49:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45313 invoked by uid 99); 28 Dec 2006 03:49:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 19:49:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 19:49:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 21BC771428E
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Dec 2006 19:49:23 -0800 (PST)
Message-ID: <23825938.1167277763135.JavaMail.jira@brutus>
Date: Wed, 27 Dec 2006 19:49:23 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-628) hadoop hdfs -cat   replaces some
 characters with question marks.
In-Reply-To: <16871.1161664156551.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-628?page=all ]

Wendy Chien updated HADOOP-628:
-------------------------------

    Attachment: hadoop-628-3.patch

Added the change Doug suggested.

> hadoop hdfs -cat   replaces some characters with question marks.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-628
>                 URL: http://issues.apache.org/jira/browse/HADOOP-628
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: arkady borkovsky
>         Assigned To: Wendy Chien
>         Attachments: hadoop-628-3.patch
>
>
> Should not the effect of
> hadoop hdfs -get path local-file
> and
> hadoop hdfs -cat path >local-file
> be the same?
> Try to do this with a (hdfs) file that contains non-ascii characters and do a diff.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 28 03:49:46 2006
Return-Path: 
 <hadoop-dev-return-6270-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76308 invoked from network); 28 Dec 2006 03:49:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 03:49:46 -0000
Received: (qmail 45614 invoked by uid 500); 28 Dec 2006 03:49:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45585 invoked by uid 500); 28 Dec 2006 03:49:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45575 invoked by uid 99); 28 Dec 2006 03:49:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 19:49:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 19:49:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 606937142BA
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Dec 2006 19:49:25 -0800 (PST)
Message-ID: <6810464.1167277765392.JavaMail.jira@brutus>
Date: Wed, 27 Dec 2006 19:49:25 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-628) hadoop hdfs -cat   replaces some
 characters with question marks.
In-Reply-To: <16871.1161664156551.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-628?page=all ]

Wendy Chien updated HADOOP-628:
-------------------------------

    Attachment:     (was: hadoop-628.patch)

> hadoop hdfs -cat   replaces some characters with question marks.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-628
>                 URL: http://issues.apache.org/jira/browse/HADOOP-628
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: arkady borkovsky
>         Assigned To: Wendy Chien
>         Attachments: hadoop-628-3.patch
>
>
> Should not the effect of
> hadoop hdfs -get path local-file
> and
> hadoop hdfs -cat path >local-file
> be the same?
> Try to do this with a (hdfs) file that contains non-ascii characters and do a diff.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 28 03:51:44 2006
Return-Path: 
 <hadoop-dev-return-6271-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76806 invoked from network); 28 Dec 2006 03:51:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 03:51:44 -0000
Received: (qmail 47091 invoked by uid 500); 28 Dec 2006 03:51:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47055 invoked by uid 500); 28 Dec 2006 03:51:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47046 invoked by uid 99); 28 Dec 2006 03:51:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 19:51:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 19:51:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1D2BA71428E
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Dec 2006 19:51:23 -0800 (PST)
Message-ID: <30510294.1167277883116.JavaMail.jira@brutus>
Date: Wed, 27 Dec 2006 19:51:23 -0800 (PST)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-628) hadoop hdfs -cat   replaces some
 characters with question marks.
In-Reply-To: <16871.1161664156551.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-628?page=all ]

Wendy Chien updated HADOOP-628:
-------------------------------

    Status: Patch Available  (was: Open)

> hadoop hdfs -cat   replaces some characters with question marks.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-628
>                 URL: http://issues.apache.org/jira/browse/HADOOP-628
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: arkady borkovsky
>         Assigned To: Wendy Chien
>         Attachments: hadoop-628-3.patch
>
>
> Should not the effect of
> hadoop hdfs -get path local-file
> and
> hadoop hdfs -cat path >local-file
> be the same?
> Try to do this with a (hdfs) file that contains non-ascii characters and do a diff.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 28 04:37:47 2006
Return-Path: 
 <hadoop-dev-return-6272-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82031 invoked from network); 28 Dec 2006 04:37:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 04:37:47 -0000
Received: (qmail 70550 invoked by uid 500); 28 Dec 2006 04:37:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70524 invoked by uid 500); 28 Dec 2006 04:37:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70515 invoked by uid 99); 28 Dec 2006 04:37:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 20:37:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 20:37:45 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 123727141A4
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Dec 2006 20:37:25 -0800 (PST)
Message-ID: <17871347.1167280645072.JavaMail.jira@brutus>
Date: Wed, 27 Dec 2006 20:37:25 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-432) support undelete, snapshots, or
 other mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-432?page=comments#action_12461144 ] 
            
Owen O'Malley commented on HADOOP-432:
--------------------------------------

Per-a-user trash directories are required once we have permissions. If you have /Trash or whatever, the permissions on that directory would need to be world writable. That wouldn't be acceptable, because user X could see (and delete) the files that user Y had deleted.

The solution that Linux and Mac uses with user specific delete directories seems like the right one to me.

And yes, the cron job equivalent that cleans up the trash will need to have super-user permissions.

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>         Attachments: undelete12.patch, undelete16.patch, undelete17.patch
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 28 06:10:48 2006
Return-Path: 
 <hadoop-dev-return-6273-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96041 invoked from network); 28 Dec 2006 06:10:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 06:10:48 -0000
Received: (qmail 29966 invoked by uid 500); 28 Dec 2006 06:10:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29732 invoked by uid 500); 28 Dec 2006 06:10:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29723 invoked by uid 99); 28 Dec 2006 06:10:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 22:10:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 22:10:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 72C1A7142BB
	for <hadoop-dev@lucene.apache.org>; Wed, 27 Dec 2006 22:10:26 -0800 (PST)
Message-ID: <5830930.1167286226467.JavaMail.jira@brutus>
Date: Wed, 27 Dec 2006 22:10:26 -0800 (PST)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-845) DFS -get and DFS -cat on a zip file
 generate different output
In-Reply-To: <3149493.1166741961266.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-845?page=comments#action_12461152 ] 
            
Hairong Kuang commented on HADOOP-845:
--------------------------------------

Weilei's patch seems to implement zcat. You may refer to the method getRecordReader in hadoop.org.apache.mapred.TextInputFormat.java for a general implementation of zcat.

> DFS -get and DFS -cat on a zip file generate different output
> -------------------------------------------------------------
>
>                 Key: HADOOP-845
>                 URL: http://issues.apache.org/jira/browse/HADOOP-845
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.9.1
>            Reporter: Mahadev konar
>            Priority: Minor
>         Attachments: patch.txt
>
>
> dfs -get file.gz localfile.gz and dfs -cat file.gz  > /tmp/file.gz generate different output. dfs -get geenreates corect output but dfs -cat does not geenerate the right ouput. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 28 09:53:09 2006
Return-Path: 
 <hadoop-dev-return-6274-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46610 invoked from network); 28 Dec 2006 09:53:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 09:53:09 -0000
Received: (qmail 63539 invoked by uid 500); 28 Dec 2006 09:53:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63298 invoked by uid 500); 28 Dec 2006 09:53:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63289 invoked by uid 99); 28 Dec 2006 09:53:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 01:53:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 01:52:58 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2519A7142D3
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Dec 2006 01:52:23 -0800 (PST)
Message-ID: <14489104.1167299543148.JavaMail.jira@brutus>
Date: Thu, 28 Dec 2006 01:52:23 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-849) randomwriter fails with
 'java.lang.OutOfMemoryError: Java heap space' in the 'reduce' task
In-Reply-To: <5228499.1167068481039.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-849?page=all ]

Devaraj Das reassigned HADOOP-849:
----------------------------------

    Assignee: Devaraj Das

> randomwriter fails with 'java.lang.OutOfMemoryError: Java heap space' in the 'reduce' task
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-849
>                 URL: http://issues.apache.org/jira/browse/HADOOP-849
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Arun C Murthy
>         Assigned To: Devaraj Das
>             Fix For: 0.9.2
>
>
> Reproducible, tried to increase the child jvm's heapsize via 
> <property>
>   <name>mapred.child.java.opts</name>
>   <value>-Xmx512m</value>
> </property>
> without any difference, still fails.
> Need to investigate further.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 28 10:55:07 2006
Return-Path: 
 <hadoop-dev-return-6275-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55813 invoked from network); 28 Dec 2006 10:55:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 10:55:07 -0000
Received: (qmail 13463 invoked by uid 500); 28 Dec 2006 10:55:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13424 invoked by uid 500); 28 Dec 2006 10:55:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13415 invoked by uid 99); 28 Dec 2006 10:55:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 02:55:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 02:55:05 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C6D907142C9
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Dec 2006 02:54:24 -0800 (PST)
Message-ID: <7898171.1167303264811.JavaMail.jira@brutus>
Date: Thu, 28 Dec 2006 02:54:24 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-849) randomwriter fails with
 'java.lang.OutOfMemoryError: Java heap space' in the 'reduce' task
In-Reply-To: <5228499.1167068481039.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-849?page=all ]

Devaraj Das updated HADOOP-849:
-------------------------------

    Attachment: 849.patch

This patch fixes the problem. The merge code that opens map output files for reading used to never close the empty map output files (empty means that the sequence files contains just the sequence file header without any key/val data). For the RandomWriter case, this problem shows up as OutOfMemory, which basically means that the program is out of file descriptors after merging 100s of empty map output files (in the case of RandomWriter, all map outputs are empty; the data is written directly to the dfs).

> randomwriter fails with 'java.lang.OutOfMemoryError: Java heap space' in the 'reduce' task
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-849
>                 URL: http://issues.apache.org/jira/browse/HADOOP-849
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Arun C Murthy
>         Assigned To: Devaraj Das
>             Fix For: 0.9.2
>
>         Attachments: 849.patch
>
>
> Reproducible, tried to increase the child jvm's heapsize via 
> <property>
>   <name>mapred.child.java.opts</name>
>   <value>-Xmx512m</value>
> </property>
> without any difference, still fails.
> Need to investigate further.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 28 10:57:28 2006
Return-Path: 
 <hadoop-dev-return-6276-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56550 invoked from network); 28 Dec 2006 10:57:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 10:57:28 -0000
Received: (qmail 16955 invoked by uid 500); 28 Dec 2006 10:57:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16705 invoked by uid 500); 28 Dec 2006 10:57:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16696 invoked by uid 99); 28 Dec 2006 10:57:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 02:57:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 02:57:27 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4ACA07142BB
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Dec 2006 02:56:23 -0800 (PST)
Message-ID: <5631334.1167303383303.JavaMail.jira@brutus>
Date: Thu, 28 Dec 2006 02:56:23 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-849) randomwriter fails with
 'java.lang.OutOfMemoryError: Java heap space' in the 'reduce' task
In-Reply-To: <5228499.1167068481039.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-849?page=all ]

Devaraj Das updated HADOOP-849:
-------------------------------

    Status: Patch Available  (was: Open)

> randomwriter fails with 'java.lang.OutOfMemoryError: Java heap space' in the 'reduce' task
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-849
>                 URL: http://issues.apache.org/jira/browse/HADOOP-849
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Arun C Murthy
>         Assigned To: Devaraj Das
>             Fix For: 0.9.2
>
>         Attachments: 849.patch
>
>
> Reproducible, tried to increase the child jvm's heapsize via 
> <property>
>   <name>mapred.child.java.opts</name>
>   <value>-Xmx512m</value>
> </property>
> without any difference, still fails.
> Need to investigate further.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 28 11:17:45 2006
Return-Path: 
 <hadoop-dev-return-6278-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60239 invoked from network); 28 Dec 2006 11:17:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 11:17:45 -0000
Received: (qmail 37568 invoked by uid 500); 28 Dec 2006 11:17:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37523 invoked by uid 500); 28 Dec 2006 11:17:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37508 invoked by uid 99); 28 Dec 2006 11:17:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 03:17:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 03:17:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BF8567142C3
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Dec 2006 02:56:24 -0800 (PST)
Message-ID: <22735937.1167303384781.JavaMail.jira@brutus>
Date: Thu, 28 Dec 2006 02:56:24 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-817) Streaming reducers throw OutOfMemory
 for not so large inputs
In-Reply-To: <30192547.1165933587180.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-817?page=comments#action_12461175 ] 
            
Devaraj Das commented on HADOOP-817:
------------------------------------

Could you please check this with the patch for HADOOP-849? Think it is the same problem. Thanks.

> Streaming reducers throw OutOfMemory for not so large inputs
> ------------------------------------------------------------
>
>                 Key: HADOOP-817
>                 URL: http://issues.apache.org/jira/browse/HADOOP-817
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>         Attachments: NetbeansProfie.png
>
>
> I am seeing OutOfMemoryError for moderate size inputs (~70 text files, 20k each ) causing job to fail in streaming. For very small inputs it still succeeds. Looking into details. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 28 11:09:52 2006
Return-Path: 
 <hadoop-dev-return-6277-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58178 invoked from network); 28 Dec 2006 11:09:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 11:09:52 -0000
Received: (qmail 23624 invoked by uid 500); 28 Dec 2006 11:09:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23587 invoked by uid 500); 28 Dec 2006 11:09:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23578 invoked by uid 99); 28 Dec 2006 11:09:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 03:09:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 03:09:50 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DBBE8714295
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Dec 2006 03:09:24 -0800 (PST)
Message-ID: <3597280.1167304164897.JavaMail.jira@brutus>
Date: Thu, 28 Dec 2006 03:09:24 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-849) randomwriter fails with
 'java.lang.OutOfMemoryError: Java heap space' in the 'reduce' task
In-Reply-To: <5228499.1167068481039.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-849?page=comments#action_12461176 ] 
            
Hadoop QA commented on HADOOP-849:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347969/849.patch applied and successfully tested against trunk revision r489707.

> randomwriter fails with 'java.lang.OutOfMemoryError: Java heap space' in the 'reduce' task
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-849
>                 URL: http://issues.apache.org/jira/browse/HADOOP-849
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Arun C Murthy
>         Assigned To: Devaraj Das
>             Fix For: 0.9.2
>
>         Attachments: 849.patch
>
>
> Reproducible, tried to increase the child jvm's heapsize via 
> <property>
>   <name>mapred.child.java.opts</name>
>   <value>-Xmx512m</value>
> </property>
> without any difference, still fails.
> Need to investigate further.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 28 14:38:44 2006
Return-Path: 
 <hadoop-dev-return-6279-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4806 invoked from network); 28 Dec 2006 14:38:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 14:38:44 -0000
Received: (qmail 86968 invoked by uid 500); 28 Dec 2006 14:38:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86949 invoked by uid 500); 28 Dec 2006 14:38:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86940 invoked by uid 99); 28 Dec 2006 14:38:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 06:38:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 06:38:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 68B6E7142A6
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Dec 2006 06:38:22 -0800 (PST)
Message-ID: <30682103.1167316702426.JavaMail.jira@brutus>
Date: Thu, 28 Dec 2006 06:38:22 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-830) Improve the performance of the Merge
 phase
In-Reply-To: <2309156.1166172801062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-830?page=all ]

Devaraj Das updated HADOOP-830:
-------------------------------

    Attachment: 830-for-review.patch

Implemented as discussed. MapOutput files are buffered in an InMemoryFileSystem. The MapOutputs are spilled directly to disk if the size of the file is more than 25% of the total filesystem size (75M by default). When the used space of the filesystem becomes more than 50%, merge is triggered and the output goes directly to disk. During that time, merging/copying proceeds in parallel. The InMemoryFileSystem (uri is mem://<name>) extends from FileSystem. Although it has a few special methods, it appears as a regular FileSystem for the most part to the rest of the framework. It keeps file-data as byte arrays, and there is a map from filenames to byte[ ]. The figures 25% & 50% are hardcoded constants for now.

> Improve the performance of the Merge phase
> ------------------------------------------
>
>                 Key: HADOOP-830
>                 URL: http://issues.apache.org/jira/browse/HADOOP-830
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: 830-for-review.patch
>
>
> This issue is about trying to improve the performance of the merge phase (especially on the reduces). Currently, all the map outputs are copied to disk and then the merge phase starts (just to make a note - sorting happens on the maps).
> The first optimization that I plan to implement is to do in-memory merging of the map outputs. There are two buffers maintained - 
> 1) a scratch buffer for writing map outputs (directly off the socket). This is a first-come-first-serve buffer (as opposed to strategies like best fit). The map output copier copies the map output off the socket and puts it here (assuming there is sufficient space in the buffer).
> 2) a merge buffer - when the scratch buffer cannot accomodate any more map output, the roles of the buffers are switched - that is, the scratch buffer becomes the merge buffer and the merge buffer becomes the scratch buffer. We avoid copying by doing this switch of roles. The copier threads can continue writing data from the socket buffer to the current scratch buffer (access to the scratch buffer is synchronized). 
> Both the above buffers are of equal sizes configured to have default values of 100M.
> Before switching roles, a check is done to see whether the merge buffer is in use (merge algorithm is working on the data there). We wait till the merge buffer is free. The hope is that while merging we are reading key/value data from an in-memory buffer and it will be really fast and so we won't see client timeouts on the server serving the map output. However, if they really timeout, the client sees an exception, and resubmits the request to the server.
> With the above we are doing copying/merging in parallel.
> The merge happens and then a spill to disk happens. At the end of the in-memory merge of all the map outputs, we will end up with ~100M files on disk that we will need to merge. Also, the in-memory merge gets triggered when the in-memory scratch buffer has been idle too long (like 30 secs), or, the number of outputs copied so far is equal to the number of maps in the job, whichever is earlier. We can proceed with the regular merge for these on-disk-files and maybe we can do some optimizations there too (haven't put much thought there).
> If the map output can never be copied to the buffer (because the map output is let's say 200M), then that is directly spilled to disk.
> To implement the above, I am planning to extend the FileSystem class to provide an InMemoryFileSystem class that will ease the integration of the in-memory scratch/merge with the existing APIs (like SequenceFile, MapOutputCopier) since all them work with the abstractions of FileSystem and Input/Output streams.
> Comments?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 28 18:27:45 2006
Return-Path: 
 <hadoop-dev-return-6280-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52516 invoked from network); 28 Dec 2006 18:27:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 18:27:45 -0000
Received: (qmail 56769 invoked by uid 500); 28 Dec 2006 18:27:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56741 invoked by uid 500); 28 Dec 2006 18:27:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56732 invoked by uid 99); 28 Dec 2006 18:27:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 10:27:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 10:27:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0E0B97142CC
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Dec 2006 10:27:23 -0800 (PST)
Message-ID: <16445149.1167330443054.JavaMail.jira@brutus>
Date: Thu, 28 Dec 2006 10:27:23 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-628) hadoop hdfs -cat   replaces some
 characters with question marks.
In-Reply-To: <16871.1161664156551.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-628?page=comments#action_12461238 ] 
            
Hadoop QA commented on HADOOP-628:
----------------------------------

+1, because http://issues.apache.org/jira/secure/attachment/12347965/hadoop-628-3.patch applied and successfully tested against trunk revision r489707.

> hadoop hdfs -cat   replaces some characters with question marks.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-628
>                 URL: http://issues.apache.org/jira/browse/HADOOP-628
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: arkady borkovsky
>         Assigned To: Wendy Chien
>         Attachments: hadoop-628-3.patch
>
>
> Should not the effect of
> hadoop hdfs -get path local-file
> and
> hadoop hdfs -cat path >local-file
> be the same?
> Try to do this with a (hdfs) file that contains non-ascii characters and do a diff.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 28 19:29:44 2006
Return-Path: 
 <hadoop-dev-return-6281-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61599 invoked from network); 28 Dec 2006 19:29:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 19:29:44 -0000
Received: (qmail 29823 invoked by uid 500); 28 Dec 2006 19:29:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29581 invoked by uid 500); 28 Dec 2006 19:29:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29572 invoked by uid 99); 28 Dec 2006 19:29:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 11:29:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 11:29:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8746A7142A6
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Dec 2006 11:29:22 -0800 (PST)
Message-ID: <22978412.1167334162551.JavaMail.jira@brutus>
Date: Thu, 28 Dec 2006 11:29:22 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-850) Add Writable implementations for
 variable-length integer types.
In-Reply-To: <8634952.1167246801140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-850?page=all ]

Andrzej Bialecki  updated HADOOP-850:
-------------------------------------

    Attachment:     (was: variable-ints.patch)

> Add Writable implementations for variable-length integer types.
> ---------------------------------------------------------------
>
>                 Key: HADOOP-850
>                 URL: http://issues.apache.org/jira/browse/HADOOP-850
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.10.0
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>            Priority: Minor
>             Fix For: 0.10.0
>
>
> Currently Hadoop supports only three basic integer-like types: ByteWritable, IntWritable and LongWritable. They provide a fixed tradeoff between their value range and on-disk space consumption. But it is sometimes useful to be able to store integer values with broader allowed range, but less space consumption when possible.
> This is especially useful when storing very long series of  values, combined with delta encoding.
> Lucene already implements variable-length encoding for positive int and long. I propose to add similar Writable implementations, which use the same encoding methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 28 19:31:43 2006
Return-Path: 
 <hadoop-dev-return-6282-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61815 invoked from network); 28 Dec 2006 19:31:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 19:31:43 -0000
Received: (qmail 31442 invoked by uid 500); 28 Dec 2006 19:31:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31401 invoked by uid 500); 28 Dec 2006 19:31:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31382 invoked by uid 99); 28 Dec 2006 19:31:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 11:31:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 11:31:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 512C37142A6
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Dec 2006 11:31:22 -0800 (PST)
Message-ID: <11313351.1167334282329.JavaMail.jira@brutus>
Date: Thu, 28 Dec 2006 11:31:22 -0800 (PST)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-850) Add Writable implementations for
 variable-length integer types.
In-Reply-To: <8634952.1167246801140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-850?page=all ]

Andrzej Bialecki  updated HADOOP-850:
-------------------------------------

    Attachment: variable-ints.patch

Indeed, I missed the implementation in WritableUtils, which is even better than Lucene's as it supports also negative numbers. Here's an updated patch.

> Add Writable implementations for variable-length integer types.
> ---------------------------------------------------------------
>
>                 Key: HADOOP-850
>                 URL: http://issues.apache.org/jira/browse/HADOOP-850
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.10.0
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: variable-ints.patch
>
>
> Currently Hadoop supports only three basic integer-like types: ByteWritable, IntWritable and LongWritable. They provide a fixed tradeoff between their value range and on-disk space consumption. But it is sometimes useful to be able to store integer values with broader allowed range, but less space consumption when possible.
> This is especially useful when storing very long series of  values, combined with delta encoding.
> Lucene already implements variable-length encoding for positive int and long. I propose to add similar Writable implementations, which use the same encoding methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Dec 28 22:54:04 2006
Return-Path: 
 <hadoop-dev-return-6283-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2300 invoked from network); 28 Dec 2006 22:54:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 22:54:04 -0000
Received: (qmail 48536 invoked by uid 500); 28 Dec 2006 22:54:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48494 invoked by uid 500); 28 Dec 2006 22:54:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48484 invoked by uid 99); 28 Dec 2006 22:54:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 14:54:10 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.145.54.171] (HELO mrout1.yahoo.com) (216.145.54.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 14:54:00 -0800
Received: from [10.72.104.183] (enoughhot-lx.corp.yahoo.com [10.72.104.183])
	by mrout1.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id kBSMrAIm047821
	for <hadoop-dev@lucene.apache.org>; Thu, 28 Dec 2006 14:53:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
	b=Lp3uzWokUpooEB0F7yd7cnp2u01yIZNkKvzOJD3pqpVL6OTE47QN/Fjx23V+tUe1
Message-ID: <45944AD7.50109@yahoo-inc.com>
Date: Thu, 28 Dec 2006 14:53:11 -0800
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Make hadoop really platform independed
References: <45933060.18a8b13a.1c93.0c6f@mx.google.com>
 <20C14807-627A-4300-9F88-0AD74BD33A22@yahoo-inc.com>
In-Reply-To: <20C14807-627A-4300-9F88-0AD74BD33A22@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

DF is the only win-incompatibility if you can run your cluster without 
scripts.
There is a version of DF.java source file that is compatible with windows.
http://issues.apache.org/jira/secure/attachment/12337494/DF.java
Just replace your df.java with this, recompile, and  you don't need to 
run cygwin.
See also HADOOP-33.

It is good to know that in Java 6 the df problem is solved.

--Konstantin

Owen O'Malley wrote:

>
> On Dec 27, 2006, at 6:48 PM, youlq wrote:
>
>> hi,all:
>>
>>     As we known , now hadoop can't run on windows because of the 
>> unix  shell used by ant and DF utility used by DF.java ,I think the 
>> unix  shell could be easyly replace with java code or ant script ,And 
>> in  Java 6, I find the DF utility can be replace with 
>> getUsableSpace() and getTotalSpace() of java.io.File. Between the 
>> two, you can show  how much space
>> each file system has available and has in total(See the code listed  
>> below). May be the DF class should made to more smart to support  
>> different OS and JDK .
>
>
> Actually, Hadoop runs fine on Windows, except when someone makes a  
> mistake. *smile* Under Windows, it requires cygwin. I just updated  
> the FAQ to include the platform information:
> http://wiki.apache.org/lucene-hadoop/FAQ
>
> Java 6 has just been released and I think it is too early to make  
> Hadoop require Java 6 in order to run. Of course in the long run,  
> having a pure Java implementation of all of the required  
> functionality is a very good thing.
>
> -- Owen
>
>
>


From MAILER-DAEMON Fri Dec 29 08:07:48 2006
Return-Path: 
 <hadoop-dev-return-6284-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68925 invoked from network); 29 Dec 2006 08:07:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2006 08:07:48 -0000
Received: (qmail 70021 invoked by uid 500); 29 Dec 2006 08:07:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69996 invoked by uid 500); 29 Dec 2006 08:07:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69987 invoked by uid 99); 29 Dec 2006 08:07:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Dec 2006 00:07:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Dec 2006 00:07:46 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7CDD57141D1
	for <hadoop-dev@lucene.apache.org>; Fri, 29 Dec 2006 00:07:26 -0800 (PST)
Message-ID: <32862973.1167379646508.JavaMail.jira@brutus>
Date: Fri, 29 Dec 2006 00:07:26 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-850) Add Writable implementations for
 variable-length integer types.
In-Reply-To: <8634952.1167246801140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-850?page=comments#action_12461326 ] 
            
Owen O'Malley commented on HADOOP-850:
--------------------------------------

Do we really need both VInt and VLong? They will serialize in exactly the same space, so all you are saving is in memory space. Other than that question/comment +1.

> Add Writable implementations for variable-length integer types.
> ---------------------------------------------------------------
>
>                 Key: HADOOP-850
>                 URL: http://issues.apache.org/jira/browse/HADOOP-850
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.10.0
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>            Priority: Minor
>             Fix For: 0.10.0
>
>         Attachments: variable-ints.patch
>
>
> Currently Hadoop supports only three basic integer-like types: ByteWritable, IntWritable and LongWritable. They provide a fixed tradeoff between their value range and on-disk space consumption. But it is sometimes useful to be able to store integer values with broader allowed range, but less space consumption when possible.
> This is especially useful when storing very long series of  values, combined with delta encoding.
> Lucene already implements variable-length encoding for positive int and long. I propose to add similar Writable implementations, which use the same encoding methods.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Dec 31 00:37:40 2006
Return-Path: 
 <hadoop-dev-return-6285-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44410 invoked from network); 31 Dec 2006 00:37:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Dec 2006 00:37:40 -0000
Received: (qmail 41402 invoked by uid 500); 31 Dec 2006 00:37:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41374 invoked by uid 500); 31 Dec 2006 00:37:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41365 invoked by uid 99); 31 Dec 2006 00:37:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Dec 2006 16:37:45 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_ID,NO_REAL_NAME,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received: from [140.211.11.75] (HELO lucene.zones.apache.org) (140.211.11.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Dec 2006 16:37:35 -0800
Received: from lucene.zones.apache.org (localhost [127.0.0.1])
	by lucene.zones.apache.org (8.13.7+Sun/8.13.7) with SMTP id kBV0bEhO027431
	for <hadoop-dev@lucene.apache.org>; Sun, 31 Dec 2006 00:37:14 GMT
Message-Id: <200612310037.kBV0bEhO027431@lucene.zones.apache.org>
Date: Sun, 31 Dec 2006 00:37:14 +0000
Subject: Hadoop nightly build failure
From: hadoop-dev@lucene.apache.org
To: hadoop-dev@lucene.apache.org
X-Mailer: org.apache.tools.mail.MailMessage (ant.apache.org)
X-Virus-Checked: Checked by ClamAV on apache.org


init:
    [mkdir] Created dir: /tmp/hadoop-nightly/build
    [mkdir] Created dir: /tmp/hadoop-nightly/build/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/src
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/task/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/job/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/dfs/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/datanode/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/examples
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/testjar
     [copy] Copying 6 files to /tmp/hadoop-nightly/build/webapps
     [copy] Copying 4 files to /tmp/hadoop-nightly/conf
     [copy] Copying /tmp/hadoop-nightly/conf/slaves.template to /tmp/hadoop-nightly/conf/slaves
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-site.xml.template to /tmp/hadoop-nightly/conf/hadoop-site.xml
     [copy] Copying /tmp/hadoop-nightly/conf/mapred-default.xml.template to /tmp/hadoop-nightly/conf/mapred-default.xml
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-env.sh.template to /tmp/hadoop-nightly/conf/hadoop-env.sh
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: whoami: not found

record-parser:

compile-core-classes:
    [javac] Compiling 283 source files to /tmp/hadoop-nightly/build/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-native:

compile-core:

compile-examples:
    [javac] Compiling 7 source files to /tmp/hadoop-nightly/build/examples
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-test:
    [javac] Compiling 71 source files to /tmp/hadoop-nightly/build/test/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] Compiling 1 source file to /tmp/hadoop-nightly/build/test/testjar
      [jar] Building jar: /tmp/hadoop-nightly/build/test/testjar/testjob.jar
      [jar] Building jar: /tmp/hadoop-nightly/build/hadoop-nightly-test.jar
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache

test-core:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/data
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/logs
    [junit] Running org.apache.hadoop.conf.TestConfiguration
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.496 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSMkdirs
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 9.505 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSShell
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 18.184 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSShellGenericOptions
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 13.507 sec
    [junit] Running org.apache.hadoop.dfs.TestFileCorruption
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 11.356 sec
    [junit] Running org.apache.hadoop.dfs.TestFsck
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 14.906 sec
    [junit] Running org.apache.hadoop.dfs.TestLocalDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 7.773 sec
    [junit] Running org.apache.hadoop.dfs.TestPread
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 8.457 sec
    [junit] Running org.apache.hadoop.dfs.TestReplication
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 24.98 sec
    [junit] Running org.apache.hadoop.dfs.TestRestartDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 23.643 sec
    [junit] Running org.apache.hadoop.dfs.TestSeekBug
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 13.016 sec
    [junit] Running org.apache.hadoop.dfs.TestSmallBlock
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 8.169 sec
    [junit] Running org.apache.hadoop.fs.TestCopyFiles
    [junit] Tests run: 4, Failures: 0, Errors: 1, Time elapsed: 36.224 sec
    [junit] Test org.apache.hadoop.fs.TestCopyFiles FAILED
    [junit] Running org.apache.hadoop.fs.TestDFSIO
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 12.331 sec
    [junit] Running org.apache.hadoop.fs.TestFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 12.508 sec
    [junit] Running org.apache.hadoop.fs.TestGlobPaths
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 10.707 sec
    [junit] Running org.apache.hadoop.fs.TestLocalFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.382 sec
    [junit] Running org.apache.hadoop.fs.TestPath
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.028 sec
    [junit] Running org.apache.hadoop.fs.s3.TestINode
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.009 sec
    [junit] Running org.apache.hadoop.fs.s3.TestInMemoryS3FileSystem
    [junit] Tests run: 12, Failures: 0, Errors: 0, Time elapsed: 2.592 sec
    [junit] Running org.apache.hadoop.io.TestArrayFile
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 10.359 sec
    [junit] Running org.apache.hadoop.io.TestBytesWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.017 sec
    [junit] Running org.apache.hadoop.io.TestMD5Hash
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.434 sec
    [junit] Running org.apache.hadoop.io.TestSequenceFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 30.546 sec
    [junit] Running org.apache.hadoop.io.TestSetFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 15.453 sec
    [junit] Running org.apache.hadoop.io.TestText
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.775 sec
    [junit] Running org.apache.hadoop.io.TestTextNonUTF8
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.011 sec
    [junit] Running org.apache.hadoop.io.TestUTF8
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.236 sec
    [junit] Running org.apache.hadoop.io.TestVersionedWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.044 sec
    [junit] Running org.apache.hadoop.io.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.008 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodec
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 2.875 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodecFactory
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.422 sec
    [junit] Running org.apache.hadoop.ipc.TestIPC
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 1.49 sec
    [junit] Running org.apache.hadoop.ipc.TestRPC
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.229 sec
    [junit] Running org.apache.hadoop.mapred.TestEmptyJobWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 20.821 sec
    [junit] Running org.apache.hadoop.mapred.TestMapRed
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 13.002 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRBringup
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.72 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRClasspath
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 64.773 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRDFSCaching
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 29.325 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRLocalFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 89.568 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 858.651 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFilter
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 9.531 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFormat
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 6.538 sec
    [junit] Running org.apache.hadoop.mapred.TestTextInputFormat
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 5.205 sec
    [junit] Running org.apache.hadoop.mapred.jobcontrol.TestJobControl
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 65.988 sec
    [junit] Running org.apache.hadoop.record.test.TestMapRed
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.978 sec
    [junit] Running org.apache.hadoop.record.test.TestRecordIO
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.292 sec
    [junit] Running org.apache.hadoop.record.test.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.951 sec

BUILD FAILED
/tmp/hadoop-nightly/build.xml:389: Tests failed!

Total time: 25 minutes 38 seconds



From MAILER-DAEMON Sun Dec 31 07:20:48 2006
Return-Path: 
 <hadoop-dev-return-6286-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95690 invoked from network); 31 Dec 2006 07:20:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Dec 2006 07:20:48 -0000
Received: (qmail 63067 invoked by uid 500); 31 Dec 2006 07:20:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62908 invoked by uid 500); 31 Dec 2006 07:20:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62844 invoked by uid 99); 31 Dec 2006 07:20:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Dec 2006 23:20:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Dec 2006 23:20:15 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 697997141BE
	for <hadoop-dev@lucene.apache.org>; Sat, 30 Dec 2006 23:19:22 -0800 (PST)
Message-ID: <2585682.1167549562429.JavaMail.jira@brutus>
Date: Sat, 30 Dec 2006 23:19:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-815) Investigate and fix the extremely
 large memory-footprint of JobTracker
In-Reply-To: <28416645.1165904481055.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-815?page=all ]

Arun C Murthy updated HADOOP-815:
---------------------------------

    Attachment: HADOOP-815_20061230_4.patch
                jt_memory_profiles.tgz

Ok, here is a reasonably well-tested patch...

List of changes:
  a) Fixed HADOOP-740 i.e. ensure task entries are cleaned up on completion.
  b) Fixed HADOOP-787 i.e. ensure we keep only 100jobs per user; rest are available via jobhistroy anyway.
  c) Fixed both JobTracker & TaskTracker to ensure lost status-updates/heartbeatResponses due to lost rpcs are resent by both TaskTracker & JobTracker; and also that the JobTracker can detect that duplicate 'TaskTrackerStatus' updates and ignore them, which otherwise are fatal.
  d) Some miscellaneous fixes like using ArrayList instead of TreeSet and array for 'usableTaskIds' in TaskInProgress.java
  
  Results:
  Currently after running smallJobsBenchmark with 750 jobs each with 300 maps & 2 reduces (i.e. total of ~225,000 tasks) the memory footprint of the JobTracker is ~1.5Gb after 'RETIRE_JOB_INTERVAL' (which I suspect also leads to degeneration of JT's performance as in HADOOP-843 since each of the JT's datastructures are extremely bloated leading to sluggishness). With this patch the memory-footprint is down to ~150MB after 'RETIRE_JOB_INTERVAL', yes, that's 150Mb! :) (and seems to solve HADOOP-843 too).

  Appreciate any feedback...


> Investigate and fix the extremely large memory-footprint of JobTracker
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-815
>                 URL: http://issues.apache.org/jira/browse/HADOOP-815
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: 150k_1199_774.nps, 75k_jobs.nps, HADOOP-815_20061220_1.patch, HADOOP-815_20061221_2.patch, HADOOP-815_20061222_3.patch, HADOOP-815_20061230_4.patch, jt_memory_profiles.tgz
>
>
> The JobTracker's memory footprint seems excessively large, especially when many jobs are submitted.
> Here is the 'top' output of a JobTracker which has scheduled ~1k jobs thus far:
>   PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                     
> 31877 arunc     19   0 2362m 261m  13m S 14.0 12.9  24:48.08 java  
> Clearly VIRTual memory of 2364Mb v/s 261Mb of RESident memory is symptomatic of this issue...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Dec 31 07:21:43 2006
Return-Path: 
 <hadoop-dev-return-6287-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95814 invoked from network); 31 Dec 2006 07:21:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Dec 2006 07:21:43 -0000
Received: (qmail 64140 invoked by uid 500); 31 Dec 2006 07:21:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63900 invoked by uid 500); 31 Dec 2006 07:21:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63891 invoked by uid 99); 31 Dec 2006 07:21:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Dec 2006 23:21:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Dec 2006 23:21:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 567A471404B
	for <hadoop-dev@lucene.apache.org>; Sat, 30 Dec 2006 23:21:22 -0800 (PST)
Message-ID: <1824971.1167549682351.JavaMail.jira@brutus>
Date: Sat, 30 Dec 2006 23:21:22 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-815) Investigate and fix the extremely
 large memory-footprint of JobTracker
In-Reply-To: <28416645.1165904481055.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-815?page=all ]

Arun C Murthy updated HADOOP-815:
---------------------------------

    Status: Patch Available  (was: Open)

> Investigate and fix the extremely large memory-footprint of JobTracker
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-815
>                 URL: http://issues.apache.org/jira/browse/HADOOP-815
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: 150k_1199_774.nps, 75k_jobs.nps, HADOOP-815_20061220_1.patch, HADOOP-815_20061221_2.patch, HADOOP-815_20061222_3.patch, HADOOP-815_20061230_4.patch, jt_memory_profiles.tgz
>
>
> The JobTracker's memory footprint seems excessively large, especially when many jobs are submitted.
> Here is the 'top' output of a JobTracker which has scheduled ~1k jobs thus far:
>   PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                     
> 31877 arunc     19   0 2362m 261m  13m S 14.0 12.9  24:48.08 java  
> Clearly VIRTual memory of 2364Mb v/s 261Mb of RESident memory is symptomatic of this issue...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Dec 31 07:23:43 2006
Return-Path: 
 <hadoop-dev-return-6288-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96120 invoked from network); 31 Dec 2006 07:23:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Dec 2006 07:23:43 -0000
Received: (qmail 65319 invoked by uid 500); 31 Dec 2006 07:23:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65293 invoked by uid 500); 31 Dec 2006 07:23:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65283 invoked by uid 99); 31 Dec 2006 07:23:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Dec 2006 23:23:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Dec 2006 23:23:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 548F87141BE
	for <hadoop-dev@lucene.apache.org>; Sat, 30 Dec 2006 23:23:22 -0800 (PST)
Message-ID: <4409451.1167549802344.JavaMail.jira@brutus>
Date: Sat, 30 Dec 2006 23:23:22 -0800 (PST)
From: "Hadoop QA (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-815) Investigate and fix the extremely
 large memory-footprint of JobTracker
In-Reply-To: <28416645.1165904481055.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-815?page=comments#action_12461560 ] 
            
Hadoop QA commented on HADOOP-815:
----------------------------------

-1, because the patch command could not apply the latest attachment (http://issues.apache.org/jira/secure/attachment/12348120/jt_memory_profiles.tgz) as a patch to trunk revision r489707. Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.

> Investigate and fix the extremely large memory-footprint of JobTracker
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-815
>                 URL: http://issues.apache.org/jira/browse/HADOOP-815
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.9.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.10.0
>
>         Attachments: 150k_1199_774.nps, 75k_jobs.nps, HADOOP-815_20061220_1.patch, HADOOP-815_20061221_2.patch, HADOOP-815_20061222_3.patch, HADOOP-815_20061230_4.patch, jt_memory_profiles.tgz
>
>
> The JobTracker's memory footprint seems excessively large, especially when many jobs are submitted.
> Here is the 'top' output of a JobTracker which has scheduled ~1k jobs thus far:
>   PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                     
> 31877 arunc     19   0 2362m 261m  13m S 14.0 12.9  24:48.08 java  
> Clearly VIRTual memory of 2364Mb v/s 261Mb of RESident memory is symptomatic of this issue...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

