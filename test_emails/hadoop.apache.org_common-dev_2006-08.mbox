From MAILER-DAEMON Mon Jul 31 22:13:50 2006
Return-Path: 
 <hadoop-dev-return-2848-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68092 invoked from network); 31 Jul 2006 22:13:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 22:13:50 -0000
Received: (qmail 742 invoked by uid 500); 31 Jul 2006 22:13:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 714 invoked by uid 500); 31 Jul 2006 22:13:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 705 invoked by uid 99); 31 Jul 2006 22:13:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 15:13:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 15:13:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DB5BE41000B
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 22:11:13 +0000 (GMT)
Message-ID: <14218394.1154383873895.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 15:11:13 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-403) close method in a Mapper should be
 provided with OutputCollector and a Reporter
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

close method in a Mapper should be provided with OutputCollector and a Reporter
-------------------------------------------------------------------------------

                 Key: HADOOP-403
                 URL: http://issues.apache.org/jira/browse/HADOOP-403
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.5.0
         Environment: all
            Reporter: Milind Bhandarkar
         Assigned To: Milind Bhandarkar
             Fix For: 0.5.0


For mappers with side-effects, or mappers that work as aggregators (i.e. no output on individual key-value pairs, but an aggregate output at the end of all key-value pairs), output should be performed in the close method. For this purpose, we need to supply output collector and reporter to the close method of Mapper. This involves interface change, though. Thoughts ?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Jul 31 22:47:47 2006
Return-Path: 
 <hadoop-dev-return-2849-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78975 invoked from network); 31 Jul 2006 22:47:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 22:47:47 -0000
Received: (qmail 45327 invoked by uid 500); 31 Jul 2006 22:47:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45163 invoked by uid 500); 31 Jul 2006 22:47:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45150 invoked by uid 99); 31 Jul 2006 22:47:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 15:47:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 15:47:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3F7F541000C
	for <hadoop-dev@lucene.apache.org>; Mon, 31 Jul 2006 22:45:16 +0000 (GMT)
Message-ID: <22477301.1154385916257.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 15:45:16 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-403) close method in a Mapper should be
 provided with OutputCollector and a Reporter
In-Reply-To: <14218394.1154383873895.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-403?page=comments#action_12424687 ] 
            
Bryan Pendleton commented on HADOOP-403:
----------------------------------------

+1 on this one. Reporter or Progressable objects should be passed into *any* call in this project, but I've also run into the need to output "after all maps", with no hook currently available to do it.

> close method in a Mapper should be provided with OutputCollector and a Reporter
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-403
>                 URL: http://issues.apache.org/jira/browse/HADOOP-403
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.5.0
>
>
> For mappers with side-effects, or mappers that work as aggregators (i.e. no output on individual key-value pairs, but an aggregate output at the end of all key-value pairs), output should be performed in the close method. For this purpose, we need to supply output collector and reporter to the close method of Mapper. This involves interface change, though. Thoughts ?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 00:15:47 2006
Return-Path: 
 <hadoop-dev-return-2850-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2656 invoked from network); 1 Aug 2006 00:15:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 00:15:47 -0000
Received: (qmail 80666 invoked by uid 500); 1 Aug 2006 00:15:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80508 invoked by uid 500); 1 Aug 2006 00:15:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80499 invoked by uid 99); 1 Aug 2006 00:15:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 17:15:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 17:15:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4595441000E
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 00:13:15 +0000 (GMT)
Message-ID: <28179582.1154391195282.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 17:13:15 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-367) Static blocks do not automatically run
 when a class is loaded in Java 5.0
In-Reply-To: <22771983.1153174453937.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-367?page=all ]

Hairong Kuang updated HADOOP-367:
---------------------------------

    Attachment: reflection.patch

This patch provides a util function newInstance. It's an incomplete patch to this bug. Still need to clean up all the factories.

> Static blocks do not automatically run when a class is loaded in Java 5.0
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-367
>                 URL: http://issues.apache.org/jira/browse/HADOOP-367
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>         Environment: Java 5.0
>            Reporter: Benjamin Reed
>             Fix For: 0.5.0
>
>         Attachments: f.patch, reflection.patch
>
>
> There seems to be a change that happened between 1.4 and 1.5 with respect to static initializers. I can't find this documented, but I can reproduce with a very simple program. Basically, a static initializer is not called unless a static member/method of the class is accessed or an instance is created. This is actually what the JLS says, but until 1.5 the static initializers ran when the class was loaded. Note that this behavior only occurs when running with the 1.5 JRE AND compiling for 1.5.
> For many Writables this isn't an issue, so the fallback behavior of the WritableFactory works, but Block is package private, so loadEdits fails when called from org.apache.hadoop.io.ArrayWritable.readFields() yielding the following trace:
> Caused by: java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSEdits(FSDirectory.java:532)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:470)
>         at org.apache.hadoop.dfs.FSDirectory.<init>(FSDirectory.java:307)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:177)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:91)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:84)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:491)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 01:36:48 2006
Return-Path: 
 <hadoop-dev-return-2852-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23488 invoked from network); 1 Aug 2006 01:36:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 01:36:48 -0000
Received: (qmail 68206 invoked by uid 500); 1 Aug 2006 01:36:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68157 invoked by uid 500); 1 Aug 2006 01:36:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68146 invoked by uid 99); 1 Aug 2006 01:36:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 18:36:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 18:36:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CC2B541000E
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 01:34:14 +0000 (GMT)
Message-ID: <13473194.1154396054833.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 18:34:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-396) Writable DatanodeID
In-Reply-To: <22464813.1154061496799.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-396?page=all ]

Konstantin Shvachko updated HADOOP-396:
---------------------------------------

    Attachment:     (was: DatanodeID3.patch)

> Writable DatanodeID
> -------------------
>
>                 Key: HADOOP-396
>                 URL: http://issues.apache.org/jira/browse/HADOOP-396
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: DatanodeID.patch, DatanodeID2.patch, DatanodeID3.patch
>
>
> This patch implements Owen's comments to HADOOP-321. Namely,
> - Namenode.sendHeartbeat does not create a throwaway DatanodeDescriptor. DatanodeID is sufficient in this case.
> - DatanodeID is made Writable, and it also implements equals() and hashCode().
> - DatanodeInfo is updated to call base class methods in its implementation of Writable interface.
> - I changed the way strings are written/read using UTF8.writeString and UTF8.readString.
> - Some comments are updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 01:36:48 2006
Return-Path: 
 <hadoop-dev-return-2851-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23484 invoked from network); 1 Aug 2006 01:36:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 01:36:48 -0000
Received: (qmail 68204 invoked by uid 500); 1 Aug 2006 01:36:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68147 invoked by uid 500); 1 Aug 2006 01:36:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68137 invoked by uid 99); 1 Aug 2006 01:36:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 18:36:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 18:36:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C93F2410011
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 01:34:15 +0000 (GMT)
Message-ID: <14468726.1154396055822.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 18:34:15 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-396) Writable DatanodeID
In-Reply-To: <22464813.1154061496799.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-396?page=all ]

Konstantin Shvachko updated HADOOP-396:
---------------------------------------

    Attachment: DatanodeID3.patch

And removed a redundant variable in registerDatanode().

> Writable DatanodeID
> -------------------
>
>                 Key: HADOOP-396
>                 URL: http://issues.apache.org/jira/browse/HADOOP-396
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: DatanodeID.patch, DatanodeID2.patch, DatanodeID3.patch
>
>
> This patch implements Owen's comments to HADOOP-321. Namely,
> - Namenode.sendHeartbeat does not create a throwaway DatanodeDescriptor. DatanodeID is sufficient in this case.
> - DatanodeID is made Writable, and it also implements equals() and hashCode().
> - DatanodeInfo is updated to call base class methods in its implementation of Writable interface.
> - I changed the way strings are written/read using UTF8.writeString and UTF8.readString.
> - Some comments are updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 01:44:48 2006
Return-Path: 
 <hadoop-dev-return-2853-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24617 invoked from network); 1 Aug 2006 01:44:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 01:44:48 -0000
Received: (qmail 72077 invoked by uid 500); 1 Aug 2006 01:44:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72045 invoked by uid 500); 1 Aug 2006 01:44:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72008 invoked by uid 99); 1 Aug 2006 01:44:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 18:44:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 18:44:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C77E441001A
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 01:42:16 +0000 (GMT)
Message-ID: <2601450.1154396536813.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 18:42:16 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-404) Regression tests are not working.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Regression tests are not working.
---------------------------------

                 Key: HADOOP-404
                 URL: http://issues.apache.org/jira/browse/HADOOP-404
             Project: Hadoop
          Issue Type: Bug
            Reporter: Mahadev konar


TestMiniMRLocalFS gets stuck on running the reduce. THe reduce never seems to return. The test kept on running for more than an hour and the reduce never returned. I tried ant test with revision 427236
 which is just before the patch for HADOOP-362, and the tests seemed to work fine. I have not yet diagnozed the problem.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 02:28:45 2006
Return-Path: 
 <hadoop-dev-return-2854-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33563 invoked from network); 1 Aug 2006 02:28:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 02:28:45 -0000
Received: (qmail 9450 invoked by uid 500); 1 Aug 2006 02:28:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9431 invoked by uid 500); 1 Aug 2006 02:28:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9420 invoked by uid 99); 1 Aug 2006 02:28:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 19:28:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 19:28:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E542441000E
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 02:26:13 +0000 (GMT)
Message-ID: <30045167.1154399173936.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 19:26:13 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-405) Duplicate browseDirectory.jsp
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Duplicate browseDirectory.jsp
-----------------------------

                 Key: HADOOP-405
                 URL: http://issues.apache.org/jira/browse/HADOOP-405
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.4.0
            Reporter: Konstantin Shvachko
            Priority: Minor
             Fix For: 0.5.0


I found 2 identical files
src\webapps\datanode\browseDirectory.jsp
and
src\webapps\dfs\browseDirectory.jsp

And there is a line in build.xml that makes the copy
    <copy file="${src.webapps}/datanode/browseDirectory.jsp" todir="${src.webapps}/dfs/"/>

That does not seem right. If one of them is a copy of another, then only one should be in svn.
Another thing is that while copying files to the build/ directory is OK, copying files around within
the source directories makes things complicated. Is there a way to avoid that?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 05:37:47 2006
Return-Path: 
 <hadoop-dev-return-2855-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81020 invoked from network); 1 Aug 2006 05:37:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 05:37:47 -0000
Received: (qmail 65814 invoked by uid 500); 1 Aug 2006 05:37:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65792 invoked by uid 500); 1 Aug 2006 05:37:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65783 invoked by uid 99); 1 Aug 2006 05:37:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 22:37:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 22:37:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 01D9641000C
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 05:35:15 +0000 (GMT)
Message-ID: <25365121.1154410515005.JavaMail.jira@brutus>
Date: Mon, 31 Jul 2006 22:35:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-405) Duplicate browseDirectory.jsp
In-Reply-To: <30045167.1154399173936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-405?page=comments#action_12424747 ] 
            
Devaraj Das commented on HADOOP-405:
------------------------------------

Yes, the file browseDirectory.jsp need not be there in src\webapps\dfs directory. It is anyway overwritten with a copy from src\webapps\datanode during the build process. Only one copy need to be there in svn.
I think the *.jsp files have to be there in the src\webapps\* directories for the jsp compilation to complete successfully. Not sure whether we can avoid that copying.

> Duplicate browseDirectory.jsp
> -----------------------------
>
>                 Key: HADOOP-405
>                 URL: http://issues.apache.org/jira/browse/HADOOP-405
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>            Priority: Minor
>             Fix For: 0.5.0
>
>
> I found 2 identical files
> src\webapps\datanode\browseDirectory.jsp
> and
> src\webapps\dfs\browseDirectory.jsp
> And there is a line in build.xml that makes the copy
>     <copy file="${src.webapps}/datanode/browseDirectory.jsp" todir="${src.webapps}/dfs/"/>
> That does not seem right. If one of them is a copy of another, then only one should be in svn.
> Another thing is that while copying files to the build/ directory is OK, copying files around within
> the source directories makes things complicated. Is there a way to avoid that?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 11:05:54 2006
Return-Path: 
 <hadoop-dev-return-2856-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96681 invoked from network); 1 Aug 2006 11:05:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 11:05:54 -0000
Received: (qmail 90986 invoked by uid 500); 1 Aug 2006 11:05:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90968 invoked by uid 500); 1 Aug 2006 11:05:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90959 invoked by uid 99); 1 Aug 2006 11:05:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 04:05:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 04:05:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EAAB741001D
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 11:03:15 +0000 (GMT)
Message-ID: <15243931.1154430195958.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 04:03:15 -0700 (PDT)
From: "Mikkel Kamstrup Erlandsen (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-293) map reduce job fail without reporting
 a reason
In-Reply-To: <25233677.1149814169844.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-293?page=all ]

Mikkel Kamstrup Erlandsen updated HADOOP-293:
---------------------------------------------

    Attachment: report-error-1.patch

I've had my share of troubles regarding this too. When a task encounters an error, all I see is:

Exception in thread "main" java.io.IOException: Job failed!
        at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:357)
       ...
        <snip useless info>

I attach a preview patch of my suggestion. It is against 0.4, but I'll forward port it to head and integrate it more with the rest of the system, if the approach is generally accepted by the devs. Please consider the patch as a idea-preview, not as a serious stab at the problem.

The approach is to add a public JobStatus.lastError string, which can be set from any throwable like JobStatus.setLastError(Throwable t). Setting this at relevant places (fx. on errors in mapred.LocalJobRunner.run() as in the patch) is useful for debugging purposes (for me atleast).

> map reduce job fail without reporting a reason
> ----------------------------------------------
>
>                 Key: HADOOP-293
>                 URL: http://issues.apache.org/jira/browse/HADOOP-293
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.3.1
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>             Fix For: 0.5.0
>
>         Attachments: report-error-1.patch
>
>
> Often I see in the WI reports of tasks failing without information reported as to the reason of the failure.
> It makes analysis and fixing the problem much harder.
> The reason for the failure should always be reported in the WI.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 16:26:52 2006
Return-Path: 
 <hadoop-dev-return-2857-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20466 invoked from network); 1 Aug 2006 16:26:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 16:26:52 -0000
Received: (qmail 81377 invoked by uid 500); 1 Aug 2006 16:26:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81352 invoked by uid 500); 1 Aug 2006 16:26:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81342 invoked by uid 99); 1 Aug 2006 16:26:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 09:26:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 09:26:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E07C7410017
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 16:24:13 +0000 (GMT)
Message-ID: <3656443.1154449453917.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 09:24:13 -0700 (PDT)
From: "Chris Schneider (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-406) Tasks launched by tasktracker in
 separate JVM can't generate log output
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Tasks launched by tasktracker in separate JVM can't generate log output
-----------------------------------------------------------------------

                 Key: HADOOP-406
                 URL: http://issues.apache.org/jira/browse/HADOOP-406
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.4.0
            Reporter: Chris Schneider


Child JVM's don't have access to logging config system properties. When the child JVM gets launched, it doesn't inherit the Java system properties hadoop.log.dir and hadoop.log.file (which are actually based on the Bash environment variables $HADOOP_LOG_DIR and $HADOOP_LOGFILE). This means that you get no log messages from the actual map/reduce tasks that are executing.

Stefan Groschupf reported this problem a while back:

-------------------------------------------------------------------------
To: hadoop-dev@lucene.apache.org
From: Stefan Groschupf <sg@media-style.com>
Subject: tasks can't log bug?
Date: Tue, 25 Jul 2006 19:26:17 -0700
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Hadoop developers,

I'm confused about the way logging works within map or reduce tasks.
Since tasks are launched in a new JVM  the java system properties "hadoop.log.dir" and "hadoop.log.file" are not passed to the new JVM.
This prevents the child process from logging properly. In fact you get:

 java.io.FileNotFoundException: / (Is a directory)
  at java.io.FileOutputStream.openAppend(Native Method)
  at java.io.FileOutputStream.<init>(FileOutputStream.java:177)
  at java.io.FileOutputStream.<init>(FileOutputStream.java:102)
  at org.apache.log4j.FileAppender.setFile(FileAppender.java:289)
  at org.apache.log4j.RollingFileAppender.setFile(RollingFileAppender.java:165)
  at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:163)
  at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:256)
  at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:132)
  at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:96)
  at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:654)
  at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:612)
  at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.j
2006-07-25 15:59:07,553 INFO  mapred.TaskTracker (TaskTracker.java:main(993)) - Child
  at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:415)
  at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:441)
  at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:4
  at org.apache.log4j.LogManager.<clinit>(LogManager.java:122)
  at org.apache.log4j.Logger.getLogger(Logger.java:104)
  at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:229)
  at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:65)
  at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
  at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImp
  at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAcc
  at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
  at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529
  at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235
  at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)
  at org.apache.hadoop.mapred.TaskTracker.<clinit>(TaskTracker.java:44)
  at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:993)

We see several ways to solve this problem. First retrieve the properties "hadoop.log.dir" and "hadoop.log.file" from the mother JVM and then pass them to the child JVM as within the args parameter.
Second would be to  access the environment variables "$HADOOP_LOG_DIR" and "$HADOOP_LOGFILE" using System.getEnv (java 1.5).
Third there would be a more general solution. Taskrunner would resolve any environment variables it found in "mapred.child.java.opts" by lookup the value using System.getEnv().
Eg:
unix:
export MAX_MEMORY = 200
hadoop-site.xml:
<name>mapred.child.java.opts</name>
<value>-Xmx${MAX_MEMORY}</value>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 16:49:51 2006
Return-Path: 
 <hadoop-dev-return-2858-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28586 invoked from network); 1 Aug 2006 16:49:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 16:49:51 -0000
Received: (qmail 53317 invoked by uid 500); 1 Aug 2006 16:49:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53155 invoked by uid 500); 1 Aug 2006 16:49:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53146 invoked by uid 99); 1 Aug 2006 16:49:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 09:49:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 09:49:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8B5F741001E
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 16:47:18 +0000 (GMT)
Message-ID: <27611520.1154450838568.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 09:47:18 -0700 (PDT)
From: "Chris Schneider (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-406) Tasks launched by tasktracker in
 separate JVM can't generate log output
In-Reply-To: <3656443.1154449453917.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-406?page=all ]

Chris Schneider updated HADOOP-406:
-----------------------------------

    Attachment: HADOOP-406.patch

Here's a patch that provides one solution to the problem.

I modified TaskRunner.java so that it supports elements like -Dhadoop.log.dir=@property[hadoop.log.dir]@ within the mapred.child.java.opts Hadoop configuration property (replacing @property[hadoop.log.dir]@ with this property value).

If others agree that this is the appropriate way to solve the problem, then we should probably modify mapred.child.java.opts in hadoop-default.xml to include all 5 of the items in the default $HADOOP_OPTS (hadoop.log.dir, hadoop.log.file, hadoop.home.dir, hadoop.id.str, and hadoop.root.logger), using this method. A few notes, though:

1) This creates yet another dependency on the contents of $HADOOP_OPTS (i.e., anyone that adds items to this should probably add them to mapred.child.java.opts as well.) This is less than elegant.

2) It doesn't seem like hadoop.home.dir, hadoop.id.str, and hadoop.root.logger are actually being used currently by the code. Both hadoop.home.dir and hadoop.id.str are loaded by LogFormatter.initFileHandler(), but that method doesn't seem to be used by anyone. It doesn't seem like anyone is loading hadoop.root.logger at all.

> Tasks launched by tasktracker in separate JVM can't generate log output
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-406
>                 URL: http://issues.apache.org/jira/browse/HADOOP-406
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Chris Schneider
>         Attachments: HADOOP-406.patch
>
>
> Child JVM's don't have access to logging config system properties. When the child JVM gets launched, it doesn't inherit the Java system properties hadoop.log.dir and hadoop.log.file (which are actually based on the Bash environment variables $HADOOP_LOG_DIR and $HADOOP_LOGFILE). This means that you get no log messages from the actual map/reduce tasks that are executing.
> Stefan Groschupf reported this problem a while back:
> -------------------------------------------------------------------------
> To: hadoop-dev@lucene.apache.org
> From: Stefan Groschupf <sg@media-style.com>
> Subject: tasks can't log bug?
> Date: Tue, 25 Jul 2006 19:26:17 -0700
> X-Virus-Checked: Checked by ClamAV on apache.org
> Hi Hadoop developers,
> I'm confused about the way logging works within map or reduce tasks.
> Since tasks are launched in a new JVM  the java system properties "hadoop.log.dir" and "hadoop.log.file" are not passed to the new JVM.
> This prevents the child process from logging properly. In fact you get:
>  java.io.FileNotFoundException: / (Is a directory)
>   at java.io.FileOutputStream.openAppend(Native Method)
>   at java.io.FileOutputStream.<init>(FileOutputStream.java:177)
>   at java.io.FileOutputStream.<init>(FileOutputStream.java:102)
>   at org.apache.log4j.FileAppender.setFile(FileAppender.java:289)
>   at org.apache.log4j.RollingFileAppender.setFile(RollingFileAppender.java:165)
>   at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:163)
>   at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:256)
>   at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:132)
>   at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:96)
>   at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:654)
>   at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:612)
>   at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.j
> 2006-07-25 15:59:07,553 INFO  mapred.TaskTracker (TaskTracker.java:main(993)) - Child
>   at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:415)
>   at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:441)
>   at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:4
>   at org.apache.log4j.LogManager.<clinit>(LogManager.java:122)
>   at org.apache.log4j.Logger.getLogger(Logger.java:104)
>   at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:229)
>   at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:65)
>   at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
>   at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImp
>   at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAcc
>   at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
>   at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529
>   at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235
>   at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)
>   at org.apache.hadoop.mapred.TaskTracker.<clinit>(TaskTracker.java:44)
>   at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:993)
> We see several ways to solve this problem. First retrieve the properties "hadoop.log.dir" and "hadoop.log.file" from the mother JVM and then pass them to the child JVM as within the args parameter.
> Second would be to  access the environment variables "$HADOOP_LOG_DIR" and "$HADOOP_LOGFILE" using System.getEnv (java 1.5).
> Third there would be a more general solution. Taskrunner would resolve any environment variables it found in "mapred.child.java.opts" by lookup the value using System.getEnv().
> Eg:
> unix:
> export MAX_MEMORY = 200
> hadoop-site.xml:
> <name>mapred.child.java.opts</name>
> <value>-Xmx${MAX_MEMORY}</value>

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 17:32:50 2006
Return-Path: 
 <hadoop-dev-return-2859-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45878 invoked from network); 1 Aug 2006 17:32:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 17:32:50 -0000
Received: (qmail 87792 invoked by uid 500); 1 Aug 2006 17:32:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87767 invoked by uid 500); 1 Aug 2006 17:32:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87751 invoked by uid 99); 1 Aug 2006 17:32:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 10:32:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 10:32:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5576241001F
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 17:30:17 +0000 (GMT)
Message-ID: <2493016.1154453417347.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 10:30:17 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-287) Speed up SequenceFile sort with
 memory reduction
In-Reply-To: <30420683.1149716489884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-287?page=comments#action_12424941 ] 
            
Owen O'Malley commented on HADOOP-287:
--------------------------------------

This patch broke the build. In particular, the org.apache.hadoop.mapred.TestMiniMRLocalFS no longer finishes. When the job becomes stuck, the reduces are still running. I assume they are stuck in an infinite loop somewhere. 

> Speed up SequenceFile sort with memory reduction
> ------------------------------------------------
>
>                 Key: HADOOP-287
>                 URL: http://issues.apache.org/jira/browse/HADOOP-287
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.3.2
>            Reporter: Benjamin Reed
>         Assigned To: Doug Cutting
>             Fix For: 0.5.0
>
>         Attachments: s.patch, zoom-sort.patch, zoom-sort.patch
>
>
> I replaced the merge sort with a quick sort and it yielded approx 30% improvement in sort time. It also reduced the memory requirement for sorting because the sort is done in place.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 17:40:48 2006
Return-Path: 
 <hadoop-dev-return-2860-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48670 invoked from network); 1 Aug 2006 17:40:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 17:40:48 -0000
Received: (qmail 97467 invoked by uid 500); 1 Aug 2006 17:40:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97391 invoked by uid 500); 1 Aug 2006 17:40:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97370 invoked by uid 99); 1 Aug 2006 17:40:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 10:40:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 10:40:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2042741001F
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 17:38:15 +0000 (GMT)
Message-ID: <17223275.1154453895129.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 10:38:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-407) the SequenceFile sorter should take a
 Progressable that should be used in map/reduce sort
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

the SequenceFile sorter should take a Progressable that should be used in map/reduce sort
-----------------------------------------------------------------------------------------

                 Key: HADOOP-407
                 URL: http://issues.apache.org/jira/browse/HADOOP-407
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.4.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.5.0


Currently, when the framework is sorting it creates a side thread that sends fake progress reports back to the task tracker once a second. This can cause problems if there is a problem in the sort getting stuck. It would be far better to have the sort take a Progressable that can report that progress is being made in the sort.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 17:42:49 2006
Return-Path: 
 <hadoop-dev-return-2861-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49553 invoked from network); 1 Aug 2006 17:42:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 17:42:49 -0000
Received: (qmail 1124 invoked by uid 500); 1 Aug 2006 17:42:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1104 invoked by uid 500); 1 Aug 2006 17:42:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1088 invoked by uid 99); 1 Aug 2006 17:42:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 10:42:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 10:42:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E626A41001D
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 17:40:14 +0000 (GMT)
Message-ID: <17703074.1154454014940.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 10:40:14 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-345) JobConf access to name-values
In-Reply-To: <25954528.1152146549836.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-345?page=all ]

Michel Tourn updated HADOOP-345:
--------------------------------

    Attachment: config.entries.patch

All right, here is the entries() patch.


> JobConf access to name-values
> -----------------------------
>
>                 Key: HADOOP-345
>                 URL: http://issues.apache.org/jira/browse/HADOOP-345
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Michel Tourn
>         Assigned To: Michel Tourn
>         Attachments: config.entries.patch
>
>
> class JobConf (or its base class Configuration) 
> should be extended to enable enumeration of all its key-value pairs.
> ( more precisely: the Properties returned by Configuration.getProps() )
> This will be useful to "export" all JobConf properties to environment variables.
> We use env.vars to expose some Hadoop context to non-Java MapReduce applications.
> Note that the typed properties are also represented as Strings 
> (getInt, getStrings, getClass, etc.)
> So a single enumeration exposes everything as (untyped) environment variables.
> The proposed escaping rules from JobConf properties to env.var are:
> 1. values are left as-is.
> 2. keys are escaped as follows:
> [A-Za-z0-9] --> unchanged.
> all other chars --> underscore.
> For example
> set("mapred.input.key.class", "com.example.MyKey")
> becomes env.var:
> export mapred_input_key_class=com.example.MyKey
> Justification:
> 1. Environment variables are case-sensitive. (Although uppercase is the preferred convention)
>   So no need to uppercase everything.
> 2. Some characters are forbidden in env.vars, or at least not shell-friendly:
> For example period, colon are problematic.
> 3. The Hadoop conventions are already hierarchical and provide some namespace protection.
>    This means we don't need an additional prefix as protection.
>    For example all exported environment variables will start with "mapred." , "dfs." , "ipc." etc.
>   This means they will not conflict with standard environemnt variables like PATH, USER, etc.
>   And they will not conflict with standard hadoop env.vars because those are upper-case. (like HADOOP_CONF_DIR)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 17:47:49 2006
Return-Path: 
 <hadoop-dev-return-2862-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61061 invoked from network); 1 Aug 2006 17:47:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 17:47:49 -0000
Received: (qmail 18720 invoked by uid 500); 1 Aug 2006 17:47:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18697 invoked by uid 500); 1 Aug 2006 17:47:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18684 invoked by uid 99); 1 Aug 2006 17:47:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 10:47:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 10:47:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A37D241001D
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 17:45:16 +0000 (GMT)
Message-ID: <24969105.1154454316667.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 10:45:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Reopened: (HADOOP-287) Speed up SequenceFile sort with
 memory reduction
In-Reply-To: <30420683.1149716489884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-287?page=all ]

Doug Cutting reopened HADOOP-287:
---------------------------------

             
I just reverted this.

> Speed up SequenceFile sort with memory reduction
> ------------------------------------------------
>
>                 Key: HADOOP-287
>                 URL: http://issues.apache.org/jira/browse/HADOOP-287
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.3.2
>            Reporter: Benjamin Reed
>         Assigned To: Doug Cutting
>             Fix For: 0.5.0
>
>         Attachments: s.patch, zoom-sort.patch, zoom-sort.patch
>
>
> I replaced the merge sort with a quick sort and it yielded approx 30% improvement in sort time. It also reduced the memory requirement for sorting because the sort is done in place.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 18:03:46 2006
Return-Path: 
 <hadoop-dev-return-2863-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67342 invoked from network); 1 Aug 2006 18:03:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 18:03:46 -0000
Received: (qmail 43266 invoked by uid 500); 1 Aug 2006 18:03:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43250 invoked by uid 500); 1 Aug 2006 18:03:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43241 invoked by uid 99); 1 Aug 2006 18:03:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 11:03:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 11:03:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0530041001D
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 18:01:14 +0000 (GMT)
Message-ID: <7740811.1154455274018.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 11:01:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-408) Unit tests take too long to run.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Unit tests take too long to run.
--------------------------------

                 Key: HADOOP-408
                 URL: http://issues.apache.org/jira/browse/HADOOP-408
             Project: Hadoop
          Issue Type: Wish
    Affects Versions: 0.4.0
            Reporter: Doug Cutting
            Priority: Minor


Several of the unit tests take over a minute to run.  I suspect most of this time is waiting for daemons to stop.  Perhaps we can restructure daemon shutdown in the test frameworks so that all daemons are first asked to shutdown, and then wait for the actual shutdown of all daemons in the TestCase's tearDown() method.  Also, we might try to combine some unit tests that require the same daemons under a single TestCase caller, so that they share setup/tearDown costs.  Or we could try to simply make daemon shutdowns faster.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 18:03:47 2006
Return-Path: 
 <hadoop-dev-return-2864-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67379 invoked from network); 1 Aug 2006 18:03:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 18:03:47 -0000
Received: (qmail 43326 invoked by uid 500); 1 Aug 2006 18:03:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43302 invoked by uid 500); 1 Aug 2006 18:03:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43282 invoked by uid 99); 1 Aug 2006 18:03:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 11:03:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 11:03:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2CBC341001F
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 18:01:14 +0000 (GMT)
Message-ID: <21644457.1154455274180.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 11:01:14 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-409) expose JobConf properties as
 environment variables
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

expose JobConf properties as environment variables
--------------------------------------------------

                 Key: HADOOP-409
                 URL: http://issues.apache.org/jira/browse/HADOOP-409
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Michel Tourn
         Attachments: envvar.entries.patch

expose JobConf properties as environment variables (for the benefit of hadoopStreaming apps)

This patch depends on  HADOOP-345


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 18:03:49 2006
Return-Path: 
 <hadoop-dev-return-2865-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67485 invoked from network); 1 Aug 2006 18:03:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 18:03:49 -0000
Received: (qmail 43747 invoked by uid 500); 1 Aug 2006 18:03:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43720 invoked by uid 500); 1 Aug 2006 18:03:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43704 invoked by uid 99); 1 Aug 2006 18:03:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 11:03:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 11:03:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4CE9A41001E
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 18:01:16 +0000 (GMT)
Message-ID: <18407825.1154455276312.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 11:01:16 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-409) expose JobConf properties as
 environment variables
In-Reply-To: <21644457.1154455274180.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-409?page=all ]

Michel Tourn updated HADOOP-409:
--------------------------------

    Attachment: envvar.entries.patch

> expose JobConf properties as environment variables
> --------------------------------------------------
>
>                 Key: HADOOP-409
>                 URL: http://issues.apache.org/jira/browse/HADOOP-409
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Michel Tourn
>         Attachments: envvar.entries.patch
>
>
> expose JobConf properties as environment variables (for the benefit of hadoopStreaming apps)
> This patch depends on  HADOOP-345

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 18:26:47 2006
Return-Path: 
 <hadoop-dev-return-2866-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81053 invoked from network); 1 Aug 2006 18:26:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 18:26:47 -0000
Received: (qmail 92607 invoked by uid 500); 1 Aug 2006 18:26:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92441 invoked by uid 500); 1 Aug 2006 18:26:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92431 invoked by uid 99); 1 Aug 2006 18:26:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 11:26:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 11:26:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BDDF47141E4
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 18:24:14 +0000 (GMT)
Message-ID: <14866956.1154456654775.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 11:24:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-398) refactor the mapred package into
 small pieces
In-Reply-To: <17354608.1154118133952.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-398?page=comments#action_12424970 ] 
            
Doug Cutting commented on HADOOP-398:
-------------------------------------

+1

I would name the "utils" package "common" or something instead, since "util" might imply it's for users.

Should we also move the input & output format implementations to an "io" package, or to the "lib" package?

> refactor the mapred package into small pieces
> ---------------------------------------------
>
>                 Key: HADOOP-398
>                 URL: http://issues.apache.org/jira/browse/HADOOP-398
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>
> The mapred package has gotten too big, so I propose changing it to split it into parts.
> I propose the following splits:
> org.apache.hadoop.mapred = client API
> org.apache.hadoop.mapred.task = code for task tracker
> org.apache.hadoop.mapred.job = code for job tracker
> org.apache.hadoop.mapred.utils = non public code that is shared between the servers
> Does anyone have any other divisions that would help?
> I would make the classes sent through RPC public classes in the server's package.
> Thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 18:29:47 2006
Return-Path: 
 <hadoop-dev-return-2867-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82055 invoked from network); 1 Aug 2006 18:29:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 18:29:47 -0000
Received: (qmail 99072 invoked by uid 500); 1 Aug 2006 18:29:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99042 invoked by uid 500); 1 Aug 2006 18:29:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99033 invoked by uid 99); 1 Aug 2006 18:29:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 11:29:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 11:29:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2EBF3410011
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 18:27:15 +0000 (GMT)
Message-ID: <28747920.1154456835188.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 11:27:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-396) Writable DatanodeID
In-Reply-To: <22464813.1154061496799.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-396?page=all ]

Doug Cutting resolved HADOOP-396.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Konstantin!

> Writable DatanodeID
> -------------------
>
>                 Key: HADOOP-396
>                 URL: http://issues.apache.org/jira/browse/HADOOP-396
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: DatanodeID.patch, DatanodeID2.patch, DatanodeID3.patch
>
>
> This patch implements Owen's comments to HADOOP-321. Namely,
> - Namenode.sendHeartbeat does not create a throwaway DatanodeDescriptor. DatanodeID is sufficient in this case.
> - DatanodeID is made Writable, and it also implements equals() and hashCode().
> - DatanodeInfo is updated to call base class methods in its implementation of Writable interface.
> - I changed the way strings are written/read using UTF8.writeString and UTF8.readString.
> - Some comments are updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 18:31:48 2006
Return-Path: 
 <hadoop-dev-return-2868-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83362 invoked from network); 1 Aug 2006 18:31:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 18:31:48 -0000
Received: (qmail 4025 invoked by uid 500); 1 Aug 2006 18:31:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4006 invoked by uid 500); 1 Aug 2006 18:31:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3997 invoked by uid 99); 1 Aug 2006 18:31:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 11:31:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 11:31:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9F2917141E3
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 18:29:15 +0000 (GMT)
Message-ID: <5391283.1154456955648.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 11:29:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-395) infoPort field should be a DatanodeID
 member
In-Reply-To: <20953780.1154040013956.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-395?page=all ]

Doug Cutting resolved HADOOP-395.
---------------------------------

    Resolution: Fixed

This was fixed as a part of HADOOP-396.

> infoPort field should be a DatanodeID member
> --------------------------------------------
>
>                 Key: HADOOP-395
>                 URL: http://issues.apache.org/jira/browse/HADOOP-395
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Devaraj Das
>             Fix For: 0.5.0
>
>         Attachments: refactor_infoport.patch
>
>
> I have a couple of comments on HADOOP-375. Sorry missed that discussion when the patch was under construction.
> 1) As it is done now infoPort is a member of two classes DatanodeInfo and DatanodeRegistration, which in fact have a
> common base DatanodeID. It seems more logical to place infoPort into DatanodeID. This will let us handle the port
> assignments inside the constructors rather than outside, and will prevent from unsafe "dynamic casts" like the one
> found in FSNamesystem.gotHeartbeat( DatanodeID nodeID, ... )
>             nodeinfo.infoPort = ((DatanodeRegistration)nodeID).infoPort;
> 2) Also, should we make infoPort short rather than integer?
> Since it is a part of a heartbeat message we might want keeping it small.
> 3) Member getters should start with get<MemberName>
> - public int infoPort() { return infoPort; }
> + public int getInfoPort() { return infoPort; }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 18:53:55 2006
Return-Path: 
 <hadoop-dev-return-2869-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93780 invoked from network); 1 Aug 2006 18:53:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 18:53:55 -0000
Received: (qmail 44557 invoked by uid 500); 1 Aug 2006 18:53:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44528 invoked by uid 500); 1 Aug 2006 18:53:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44492 invoked by uid 99); 1 Aug 2006 18:53:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 11:53:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 11:53:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BB1C641001D
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 18:51:14 +0000 (GMT)
Message-ID: <25214653.1154458274763.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 11:51:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-404) Regression tests are not working.
In-Reply-To: <2601450.1154396536813.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-404?page=all ]

Doug Cutting resolved HADOOP-404.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

This was fixed by the revert of HADOOP-287.

> Regression tests are not working.
> ---------------------------------
>
>                 Key: HADOOP-404
>                 URL: http://issues.apache.org/jira/browse/HADOOP-404
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>             Fix For: 0.5.0
>
>
> TestMiniMRLocalFS gets stuck on running the reduce. THe reduce never seems to return. The test kept on running for more than an hour and the reduce never returned. I tried ant test with revision 427236
>  which is just before the patch for HADOOP-362, and the tests seemed to work fine. I have not yet diagnozed the problem.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 18:55:48 2006
Return-Path: 
 <hadoop-dev-return-2870-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94648 invoked from network); 1 Aug 2006 18:55:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 18:55:48 -0000
Received: (qmail 51685 invoked by uid 500); 1 Aug 2006 18:55:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51526 invoked by uid 500); 1 Aug 2006 18:55:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51517 invoked by uid 99); 1 Aug 2006 18:55:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 11:55:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 11:55:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C99C041001E
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 18:53:14 +0000 (GMT)
Message-ID: <7753126.1154458394823.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 11:53:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-392) Improve the UI for DFS content
 browsing
In-Reply-To: <25536299.1153988653988.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-392?page=all ]

Devaraj Das updated HADOOP-392:
-------------------------------

    Attachment: new-ui.patch

This patch implements most of what has been requested for.

> Improve the UI for DFS content browsing
> ---------------------------------------
>
>                 Key: HADOOP-392
>                 URL: http://issues.apache.org/jira/browse/HADOOP-392
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Devaraj Das
>             Fix For: 0.5.0
>
>         Attachments: new-ui.patch
>
>
> A couple of improvements requested:
> * change the title of the namenode page to include namenode
>     Hadoop Administration
>     -> Hadoop NameNode (<host>:<port>)
> * Move all the info except the per node info from the dfshealth.jsp page to the home page.  No reason to make folks go through that page to get summary info or to find local logs.
> * It would  be good if the health status information were sorted by node name, rather than the (random) order that -report returns
> * Looking at an xml file copied to the dfs, can't view/tail it in the browser. Can download the file and view it locally.
> * Viewing a java source file, the newlines don't come out right. Again, downloading and viewing locally is fine.
> * When clicking on a file, it would be good to view its contents (or some subset of it) immediately, with the advanced options appearing at the bottom (block locations [just choose one], number of blocks view/tail/download/chunk size).
> * Fix the filename problem (browser related) [e.g. /user/yarnon/build.xml gets translated to -user-yarnon-build.xml]

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 19:20:47 2006
Return-Path: 
 <hadoop-dev-return-2871-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10877 invoked from network); 1 Aug 2006 19:20:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 19:20:47 -0000
Received: (qmail 6169 invoked by uid 500); 1 Aug 2006 19:20:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6145 invoked by uid 500); 1 Aug 2006 19:20:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6136 invoked by uid 99); 1 Aug 2006 19:20:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 12:20:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 12:20:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BB45641001D
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 19:18:14 +0000 (GMT)
Message-ID: <29048169.1154459894764.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 12:18:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-377) Configuration does not handle URL
In-Reply-To: <29286.1153504213953.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-377?page=all ]

Doug Cutting resolved HADOOP-377.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this, minus the changes to the imports.  Thanks!

> Configuration does not handle URL
> ---------------------------------
>
>                 Key: HADOOP-377
>                 URL: http://issues.apache.org/jira/browse/HADOOP-377
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Jean-Baptiste Quenot
>             Fix For: 0.5.0
>
>         Attachments: 20060721-hadoop-Configuration-URL
>
>
> Current Configuration allows:
> * <String> pointing to a resource in the classpath
> * <Path> local path on the file system
> The attached patch handles java.net.URL.  We use it to load hadoop-client.xml from a JAR.
> Thanks in advance!

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 19:37:51 2006
Return-Path: 
 <hadoop-dev-return-2872-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16738 invoked from network); 1 Aug 2006 19:37:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 19:37:51 -0000
Received: (qmail 42892 invoked by uid 500); 1 Aug 2006 19:37:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42873 invoked by uid 500); 1 Aug 2006 19:37:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42835 invoked by uid 99); 1 Aug 2006 19:37:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 12:37:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 12:37:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 259BA41001E
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 19:35:16 +0000 (GMT)
Message-ID: <11754574.1154460916149.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 12:35:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-405) Duplicate browseDirectory.jsp
In-Reply-To: <30045167.1154399173936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-405?page=comments#action_12424984 ] 
            
Doug Cutting commented on HADOOP-405:
-------------------------------------

I agree with Konstantin: the build should not modify anything in the src tree.

Instead of the copy, you can add <jspcompile jspfiles="../browseDirectory.jsp" .../>.

http://tomcat.apache.org/tomcat-5.5-doc/jasper/docs/api/org/apache/jasper/JspC.html


> Duplicate browseDirectory.jsp
> -----------------------------
>
>                 Key: HADOOP-405
>                 URL: http://issues.apache.org/jira/browse/HADOOP-405
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>            Priority: Minor
>             Fix For: 0.5.0
>
>
> I found 2 identical files
> src\webapps\datanode\browseDirectory.jsp
> and
> src\webapps\dfs\browseDirectory.jsp
> And there is a line in build.xml that makes the copy
>     <copy file="${src.webapps}/datanode/browseDirectory.jsp" todir="${src.webapps}/dfs/"/>
> That does not seem right. If one of them is a copy of another, then only one should be in svn.
> Another thing is that while copying files to the build/ directory is OK, copying files around within
> the source directories makes things complicated. Is there a way to avoid that?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 20:10:54 2006
Return-Path: 
 <hadoop-dev-return-2873-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30502 invoked from network); 1 Aug 2006 20:10:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 20:10:54 -0000
Received: (qmail 12680 invoked by uid 500); 1 Aug 2006 20:10:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12644 invoked by uid 500); 1 Aug 2006 20:10:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12622 invoked by uid 99); 1 Aug 2006 20:10:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 13:10:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 13:10:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 51989410022
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 20:08:17 +0000 (GMT)
Message-ID: <30258532.1154462897331.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 13:08:17 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-396) Writable DatanodeID
In-Reply-To: <22464813.1154061496799.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-396?page=comments#action_12424994 ] 
            
Konstantin Shvachko commented on HADOOP-396:
--------------------------------------------

And Devaraj! That was a joint patch.

> Writable DatanodeID
> -------------------
>
>                 Key: HADOOP-396
>                 URL: http://issues.apache.org/jira/browse/HADOOP-396
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: DatanodeID.patch, DatanodeID2.patch, DatanodeID3.patch
>
>
> This patch implements Owen's comments to HADOOP-321. Namely,
> - Namenode.sendHeartbeat does not create a throwaway DatanodeDescriptor. DatanodeID is sufficient in this case.
> - DatanodeID is made Writable, and it also implements equals() and hashCode().
> - DatanodeInfo is updated to call base class methods in its implementation of Writable interface.
> - I changed the way strings are written/read using UTF8.writeString and UTF8.readString.
> - Some comments are updated.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 20:17:07 2006
Return-Path: 
 <hadoop-dev-return-2874-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32377 invoked from network); 1 Aug 2006 20:17:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 20:17:07 -0000
Received: (qmail 31503 invoked by uid 500); 1 Aug 2006 20:16:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31473 invoked by uid 500); 1 Aug 2006 20:16:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31451 invoked by uid 99); 1 Aug 2006 20:16:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 13:16:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 13:16:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6110A410022
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 20:14:16 +0000 (GMT)
Message-ID: <324821.1154463256395.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 13:14:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-345) JobConf access to name-values
In-Reply-To: <25954528.1152146549836.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-345?page=all ]

Doug Cutting resolved HADOOP-345.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks, Michel.

> JobConf access to name-values
> -----------------------------
>
>                 Key: HADOOP-345
>                 URL: http://issues.apache.org/jira/browse/HADOOP-345
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Michel Tourn
>         Assigned To: Michel Tourn
>             Fix For: 0.5.0
>
>         Attachments: config.entries.patch
>
>
> class JobConf (or its base class Configuration) 
> should be extended to enable enumeration of all its key-value pairs.
> ( more precisely: the Properties returned by Configuration.getProps() )
> This will be useful to "export" all JobConf properties to environment variables.
> We use env.vars to expose some Hadoop context to non-Java MapReduce applications.
> Note that the typed properties are also represented as Strings 
> (getInt, getStrings, getClass, etc.)
> So a single enumeration exposes everything as (untyped) environment variables.
> The proposed escaping rules from JobConf properties to env.var are:
> 1. values are left as-is.
> 2. keys are escaped as follows:
> [A-Za-z0-9] --> unchanged.
> all other chars --> underscore.
> For example
> set("mapred.input.key.class", "com.example.MyKey")
> becomes env.var:
> export mapred_input_key_class=com.example.MyKey
> Justification:
> 1. Environment variables are case-sensitive. (Although uppercase is the preferred convention)
>   So no need to uppercase everything.
> 2. Some characters are forbidden in env.vars, or at least not shell-friendly:
> For example period, colon are problematic.
> 3. The Hadoop conventions are already hierarchical and provide some namespace protection.
>    This means we don't need an additional prefix as protection.
>    For example all exported environment variables will start with "mapred." , "dfs." , "ipc." etc.
>   This means they will not conflict with standard environemnt variables like PATH, USER, etc.
>   And they will not conflict with standard hadoop env.vars because those are upper-case. (like HADOOP_CONF_DIR)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 20:22:48 2006
Return-Path: 
 <hadoop-dev-return-2875-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34763 invoked from network); 1 Aug 2006 20:22:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 20:22:48 -0000
Received: (qmail 50440 invoked by uid 500); 1 Aug 2006 20:22:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50412 invoked by uid 500); 1 Aug 2006 20:22:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50402 invoked by uid 99); 1 Aug 2006 20:22:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 13:22:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 13:22:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C328A41001D
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 20:20:14 +0000 (GMT)
Message-ID: <10867275.1154463614796.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 13:20:14 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-369) Added ability to copy all part-files
 into one output file
In-Reply-To: <6586655.1153240813983.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-369?page=comments#action_12425000 ] 
            
Johan Oskarson commented on HADOOP-369:
---------------------------------------

*bump*
Any reason why the revised copymerge patch would not be suitable for commit?
If so I'd like to fix it asap, this is a feature we need badly.

> Added ability to copy all part-files into one output file
> ---------------------------------------------------------
>
>                 Key: HADOOP-369
>                 URL: http://issues.apache.org/jira/browse/HADOOP-369
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Johan Oskarson
>            Priority: Trivial
>         Attachments: copymerge.patch, copymerge.patch, dircat.patch
>
>
> Since we use the hadoop output in non-hadoop applications it's nice to be able to merge the part-files into one output file on the local filesystem.
> So I've added a dfsshell feature that streams from all files in a directory to one output file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 20:22:53 2006
Return-Path: 
 <hadoop-dev-return-2876-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34821 invoked from network); 1 Aug 2006 20:22:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 20:22:53 -0000
Received: (qmail 50670 invoked by uid 500); 1 Aug 2006 20:22:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50642 invoked by uid 500); 1 Aug 2006 20:22:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50633 invoked by uid 99); 1 Aug 2006 20:22:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 13:22:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 13:22:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BF16B41001E
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 20:20:15 +0000 (GMT)
Message-ID: <25247037.1154463615780.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 13:20:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-409) expose JobConf properties as
 environment variables
In-Reply-To: <21644457.1154455274180.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-409?page=all ]

Doug Cutting resolved HADOOP-409.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks, Michel!

> expose JobConf properties as environment variables
> --------------------------------------------------
>
>                 Key: HADOOP-409
>                 URL: http://issues.apache.org/jira/browse/HADOOP-409
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Michel Tourn
>             Fix For: 0.5.0
>
>         Attachments: envvar.entries.patch
>
>
> expose JobConf properties as environment variables (for the benefit of hadoopStreaming apps)
> This patch depends on  HADOOP-345

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 20:35:47 2006
Return-Path: 
 <hadoop-dev-return-2877-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39986 invoked from network); 1 Aug 2006 20:35:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 20:35:47 -0000
Received: (qmail 84046 invoked by uid 500); 1 Aug 2006 20:35:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84027 invoked by uid 500); 1 Aug 2006 20:35:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84017 invoked by uid 99); 1 Aug 2006 20:35:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 13:35:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 13:35:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B47D1410011
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 20:33:14 +0000 (GMT)
Message-ID: <22497991.1154464394736.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 13:33:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-392) Improve the UI for DFS content
 browsing
In-Reply-To: <25536299.1153988653988.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-392?page=all ]

Doug Cutting resolved HADOOP-392.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Devaraj!

> Improve the UI for DFS content browsing
> ---------------------------------------
>
>                 Key: HADOOP-392
>                 URL: http://issues.apache.org/jira/browse/HADOOP-392
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Devaraj Das
>             Fix For: 0.5.0
>
>         Attachments: new-ui.patch
>
>
> A couple of improvements requested:
> * change the title of the namenode page to include namenode
>     Hadoop Administration
>     -> Hadoop NameNode (<host>:<port>)
> * Move all the info except the per node info from the dfshealth.jsp page to the home page.  No reason to make folks go through that page to get summary info or to find local logs.
> * It would  be good if the health status information were sorted by node name, rather than the (random) order that -report returns
> * Looking at an xml file copied to the dfs, can't view/tail it in the browser. Can download the file and view it locally.
> * Viewing a java source file, the newlines don't come out right. Again, downloading and viewing locally is fine.
> * When clicking on a file, it would be good to view its contents (or some subset of it) immediately, with the advanced options appearing at the bottom (block locations [just choose one], number of blocks view/tail/download/chunk size).
> * Fix the filename problem (browser related) [e.g. /user/yarnon/build.xml gets translated to -user-yarnon-build.xml]

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 20:42:47 2006
Return-Path: 
 <hadoop-dev-return-2878-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43045 invoked from network); 1 Aug 2006 20:42:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 20:42:47 -0000
Received: (qmail 8978 invoked by uid 500); 1 Aug 2006 20:42:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8952 invoked by uid 500); 1 Aug 2006 20:42:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8941 invoked by uid 99); 1 Aug 2006 20:42:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 13:42:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 13:42:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1070341001D
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 20:40:15 +0000 (GMT)
Message-ID: <18479631.1154464815034.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 13:40:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-369) Added ability to copy all part-files
 into one output file
In-Reply-To: <6586655.1153240813983.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-369?page=all ]

Doug Cutting resolved HADOOP-369.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks, Johan!

> Added ability to copy all part-files into one output file
> ---------------------------------------------------------
>
>                 Key: HADOOP-369
>                 URL: http://issues.apache.org/jira/browse/HADOOP-369
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Johan Oskarson
>            Priority: Trivial
>             Fix For: 0.5.0
>
>         Attachments: copymerge.patch, copymerge.patch, dircat.patch
>
>
> Since we use the hadoop output in non-hadoop applications it's nice to be able to merge the part-files into one output file on the local filesystem.
> So I've added a dfsshell feature that streams from all files in a directory to one output file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 21:13:48 2006
Return-Path: 
 <hadoop-dev-return-2879-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56685 invoked from network); 1 Aug 2006 21:13:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 21:13:48 -0000
Received: (qmail 68375 invoked by uid 500); 1 Aug 2006 21:13:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68217 invoked by uid 500); 1 Aug 2006 21:13:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68200 invoked by uid 99); 1 Aug 2006 21:13:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 14:13:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 14:13:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0F47941001F
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 21:11:15 +0000 (GMT)
Message-ID: <31556196.1154466675060.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 14:11:15 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-410) Using HashMap instead of TreeMap for
 some maps in Namenode yields 17% performance improvement
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Using HashMap instead of TreeMap for some maps in Namenode yields 17% performance improvement
---------------------------------------------------------------------------------------------

                 Key: HADOOP-410
                 URL: http://issues.apache.org/jira/browse/HADOOP-410
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
    Affects Versions: 0.5.0
         Environment: linux
            Reporter: Milind Bhandarkar
         Assigned To: Milind Bhandarkar
             Fix For: 0.5.0
         Attachments: hashmap.patch

For blocksMap in FSNameSystem and activeBlocks map in FSDirectory, if we use HashMap instead of TreeMap, it yields 17% performance improvement (without significant difference in memory consumption).
I am attaching a patch, alongwith a namenode benchmark.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 21:13:49 2006
Return-Path: 
 <hadoop-dev-return-2880-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56727 invoked from network); 1 Aug 2006 21:13:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 21:13:49 -0000
Received: (qmail 68526 invoked by uid 500); 1 Aug 2006 21:13:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68401 invoked by uid 500); 1 Aug 2006 21:13:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68392 invoked by uid 99); 1 Aug 2006 21:13:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 14:13:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 14:13:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0CB00410021
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 21:11:16 +0000 (GMT)
Message-ID: <23966704.1154466676049.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 14:11:16 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-410) Using HashMap instead of TreeMap for
 some maps in Namenode yields 17% performance improvement
In-Reply-To: <31556196.1154466675060.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-410?page=all ]

Milind Bhandarkar updated HADOOP-410:
-------------------------------------

    Attachment: hashmap.patch

patch attached.

> Using HashMap instead of TreeMap for some maps in Namenode yields 17% performance improvement
> ---------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-410
>                 URL: http://issues.apache.org/jira/browse/HADOOP-410
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.5.0
>         Environment: linux
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.5.0
>
>         Attachments: hashmap.patch
>
>
> For blocksMap in FSNameSystem and activeBlocks map in FSDirectory, if we use HashMap instead of TreeMap, it yields 17% performance improvement (without significant difference in memory consumption).
> I am attaching a patch, alongwith a namenode benchmark.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 21:15:51 2006
Return-Path: 
 <hadoop-dev-return-2881-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57017 invoked from network); 1 Aug 2006 21:15:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 21:15:51 -0000
Received: (qmail 69937 invoked by uid 500); 1 Aug 2006 21:15:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69901 invoked by uid 500); 1 Aug 2006 21:15:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69892 invoked by uid 99); 1 Aug 2006 21:15:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 14:15:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 14:15:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E3B9A41001E
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 21:13:15 +0000 (GMT)
Message-ID: <13292659.1154466795930.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 14:13:15 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-403) close method in a Mapper should be
 provided with OutputCollector and a Reporter
In-Reply-To: <14218394.1154383873895.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-403?page=comments#action_12425021 ] 
            
Milind Bhandarkar commented on HADOOP-403:
------------------------------------------

I just checked that this can be done without changing the mapper interface. We can hang the Reporter and OutputCollector off of JobConf which is passed to configure method. I will attach a patch soon.

> close method in a Mapper should be provided with OutputCollector and a Reporter
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-403
>                 URL: http://issues.apache.org/jira/browse/HADOOP-403
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.5.0
>
>
> For mappers with side-effects, or mappers that work as aggregators (i.e. no output on individual key-value pairs, but an aggregate output at the end of all key-value pairs), output should be performed in the close method. For this purpose, we need to supply output collector and reporter to the close method of Mapper. This involves interface change, though. Thoughts ?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 21:39:49 2006
Return-Path: 
 <hadoop-dev-return-2882-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66866 invoked from network); 1 Aug 2006 21:39:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 21:39:49 -0000
Received: (qmail 17604 invoked by uid 500); 1 Aug 2006 21:39:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17587 invoked by uid 500); 1 Aug 2006 21:39:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17578 invoked by uid 99); 1 Aug 2006 21:39:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 14:39:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 14:39:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EA23641001E
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 21:37:14 +0000 (GMT)
Message-ID: <13955760.1154468234956.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 14:37:14 -0700 (PDT)
From: "Marco Nicosia (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-401) JobTracker crashes Sun JVM
In-Reply-To: <19999404.1154127860513.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-401?page=comments#action_12425029 ] 
            
Marco Nicosia commented on HADOOP-401:
--------------------------------------

This happened again:

#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0xf27f7e1f, pid=27283, tid=1859124144
#
# Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
#
# An error report file with more information is saved as hs_err_pid27283.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

And the hs_err_pid27283.log file:

#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0xf27f7e1f, pid=27283, tid=1859124144
#
# Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
#

---------------  T H R E A D  ---------------

Current thread (0x09730f18):  JavaThread "SocketListener0-0" [_thread_in_Java, id=31212]

siginfo:si_signo=11, si_errno=0, si_code=2, si_addr=0x00022008

Registers:
EAX=0x00022000, EBX=0x00000000, ECX=0x339dc50d, EDX=0x339dc50d
ESP=0x6ecfeba8, EBP=0xe96a1910, ESI=0x71b81cf5, EDI=0x00000402
EIP=0xf27f7e1f, CR2=0x00022008, EFLAGS=0x00010213

Top of Stack: (sp=0x6ecfeba8)
0x6ecfeba8:   e9dea1f0 6ecfebac 00002000 09730f18
0x6ecfebb8:   00000400 7572ab70 6ecfec1c 6ecfec30
0x6ecfebc8:   6ecfebf0 e9dea170 e9dea1f0 6ecfebd4
0x6ecfebd8:   7154d7c9 f25cb0c0 6ecfec1c 6ecfec30
0x6ecfebe8:   7154d7d8 6ecfebf4 6ecfec1c f2501a14
0x6ecfebf8:   00002000 e9dea1f0 6ecfec00 71b81cf5
0x6ecfec08:   6ecfec30 71b85598 00000000 71b81d80
0x6ecfec18:   6ecfec24 6ecfec58 f2501aeb 71943248 

Instructions: (pc=0xf27f7e1f)
0xf27f7e0f:   89 44 24 0c 8b a8 a4 00 00 00 8b 5d 20 8b 43 08
0xf27f7e1f:   8b 48 08 89 5c 24 28 89 74 24 24 8b d9 4b 8b ea 

Stack: [0x6ec7f000,0x6ed00000),  sp=0x6ecfeba8,  free space=510k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B


---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
=>0x09730f18 JavaThread "SocketListener0-0" [_thread_in_Java, id=31212]

[...]

Heap
 PSYoungGen      total 204480K, used 104064K [0xe4640000, 0xf1eb0000, 0xf2470000)
  eden space 190400K, 47% used [0xe4640000,0xe9e221d8,0xf0030000)
  from space 14080K, 99% used [0xf08f0000,0xf16ae010,0xf16b0000)
  to   space 8192K, 0% used [0xf16b0000,0xf16b0000,0xf1eb0000)
 PSOldGen        total 678912K, used 650402K [0x75470000, 0x9eb70000, 0xe4640000)
  object space 678912K, 95% used [0x75470000,0x9cf988d0,0x9eb70000)
 PSPermGen       total 16384K, used 8063K [0x71470000, 0x72470000, 0x75470000)
  object space 16384K, 49% used [0x71470000,0x71c4fee0,0x72470000)

[...]
VM Arguments:
jvm_args: -Xmx2000m -Dhadoop.log.dir=/e/c/kryptonite/hadoop/current/../run2/log -Dhadoop.log.file=hadoop-crawler-jobtracker-kry1190.log 
-Dhadoop.home.dir=/e/c/kryptonite/hadoop/current -Dhadoop.id.str=crawler -Dhadoop.root.logger=INFO,DRFA
java_command: org.apache.hadoop.mapred.JobTracker
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=/e/c/kryptonite/java/jdk
PATH=/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin
LD_LIBRARY_PATH=/e/c/kryptonite/java/jdk1.5.0_06/jre/lib/i386/server:/e/c/kryptonite/java/jdk1.5.0_06/jre/lib/i386:/e/c/kryptonite/java/jdk1.5.0_06/jre/../lib/i386
SHELL=/bin/tcsh
HOSTTYPE=x86_64-linux
OSTYPE=linux
MACHTYPE=x86_64



> JobTracker crashes Sun JVM
> --------------------------
>
>                 Key: HADOOP-401
>                 URL: http://issues.apache.org/jira/browse/HADOOP-401
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: OS:Red Hat Enterprise Linux AS release 4 (Nahant Update 2)
> uname:Linux 2.6.9-22.12.y1-64 #5 SMP Fri Nov 4 13:39:56 PST 2005 x86_64
> libc:glibc 2.3.4 NPTL 2.3.4 
> rlimit: STACK 10240k, CORE 0k, NPROC 32768, NOFILE 32768, AS infinity
> load average:0.20 0.21 0.18
> CPU:total 4 family 47, cmov, cx8, fxsr, mmx, sse, sse2, ht
> Memory: 4k page, physical 988k(220k free), swap 3070k(3070k free)
> vm_info: Java HotSpot(TM) Server VM (1.5.0_06-b05) for linux-x86, built on Nov 10 2005 10:56:33 by java_re with gcc 3.2.1-7a (J2SE release)
>            Reporter: Marco Nicosia
>            Priority: Minor
>
> From our jobtacker's .out file:
> #
> # An unexpected error has been detected by HotSpot Virtual Machine:
> #
> #  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
> #
> # Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
> # Problematic frame:
> # J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> #
> # An error report file with more information is saved as hs_err_pid24028.log
> #
> # If you would like to submit a bug report, please visit:
> #   http://java.sun.com/webapps/bugreport/crash.jsp
> #
> And the relevant parts of that hs_err_pid24028.log file:
> #
> # An unexpected error has been detected by HotSpot Virtual Machine:
> #
> #  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
> #
> # Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
> # Problematic frame:
> # J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> #
> ---------------  T H R E A D  ---------------
> Current thread (0x086e0088):  JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]
> siginfo:si_signo=11, si_errno=0, si_code=2, si_addr=0x00022008
> Registers:
> EAX=0x00022000, EBX=0x75a0fac8, ECX=0x00000000, EDX=0x75b31258
> ESP=0x6ea7ded0, EBP=0x6ea7df3c, ESI=0x71b6def5, EDI=0x00000402
> EIP=0xf27bf825, CR2=0x00022008, EFLAGS=0x00010217
> Top of Stack: (sp=0x6ea7ded0)
> 0x6ea7ded0:   71549561 6ea7def0 00002000 00000400
> 0x6ea7dee0:   339dc50d 086e0088 6ea7df3c 6ea7df50
> 0x6ea7def0:   00000000 71b6def5 7154d7c9 f2595a80
> 0x6ea7df00:   6ea7df3c 6ea7df50 7154d7d8 6ea7df14
> 0x6ea7df10:   6ea7df3c f2501a14 00002000 e57bd350
> 0x6ea7df20:   6ea7df20 71b6def5 6ea7df50 71b71798
> 0x6ea7df30:   00000000 71b6df80 6ea7df44 6ea7df78
> 0x6ea7df40:   f2501aeb 719431e8 00002000 e57bd2d0 
> Instructions: (pc=0xf27bf825)
> 0xf27bf815:   8b 98 a4 00 00 00 8b 4b 20 89 4c 24 20 8b 41 08
> 0xf27bf825:   8b 70 08 8b de 4b 8b 4c 24 10 23 cb 89 4c 24 10 
> Stack: [0x6e9fe000,0x6ea7f000),  sp=0x6ea7ded0,  free space=511k
> Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
> J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> j  org.mortbay.http.HttpInputStream.<init>(Ljava/io/InputStream;I)V+15
> j  org.mortbay.http.HttpConnection.<init>(Lorg/mortbay/http/HttpListener;Ljava/net/InetAddress;Ljava/io/InputStream;Ljava/io/OutputStream;Ljava/lang/Object;)V+97
> j  org.mortbay.http.SocketListener.createConnection(Ljava/net/Socket;)Lorg/mortbay/http/HttpConnection;+18
> j  org.mortbay.http.SocketListener.handleConnection(Ljava/net/Socket;)V+2
> j  org.mortbay.util.ThreadedServer.handle(Ljava/lang/Object;)V+19
> ---------------  P R O C E S S  ---------------
> Java Threads: ( => current thread )
>   0x086bb8a0 JavaThread "Thread-0" [_thread_blocked, id=24117]
>   0x0859dd38 JavaThread "Thread-20" [_thread_blocked, id=24116]
>   0x0859a8a8 JavaThread "Thread-19" [_thread_blocked, id=24115]
>   0x0859a1f8 JavaThread "Thread-18" [_thread_blocked, id=24114]
>   0x085d54d8 JavaThread "SocketListener0-1" [_thread_in_native, id=24113]
> =>0x086e0088 JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]
> [...]
> Heap
>  PSYoungGen      total 21248K, used 19699K [0xe4640000, 0xe6a00000, 0xf2470000)
>   eden space 19584K, 92% used [0xe4640000,0xe57def08,0xe5960000)
>   from space 1664K, 99% used [0xe5960000,0xe5afe020,0xe5b00000)
>   to   space 8384K, 0% used [0xe61d0000,0xe61d0000,0xe6a00000)
>  PSOldGen        total 390080K, used 370693K [0x75470000, 0x8d160000, 0xe4640000)
>   object space 390080K, 95% used [0x75470000,0x8be716e0,0x8d160000)
>  PSPermGen       total 16384K, used 8080K [0x71470000, 0x72470000, 0x75470000)
>   object space 16384K, 49% used [0x71470000,0x71c54298,0x72470000)
> [...]
> VM Arguments:
> jvm_args: -Xmx2000m -Dhadoop.log.dir=/export//current/../run2/log -Dhadoop.log.file=hadoop-jobtracker.log -Dhadoop.home.dir=/export/current -Dhadoop.id.str=crawler -Dhadoop.root.logger=INFO,DRFA
> java_command: org.apache.hadoop.mapred.JobTracker
> Launcher Type: SUN_STANDARD
> Environment Variables:
> JAVA_HOME=/export//java/jdk
> PATH=/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/export//current/bin
> LD_LIBRARY_PATH=/export/java/jdk1.5.0_06/jre/lib/i386/server:/export//java/jdk1.5.0_06/jre/lib/i386:/export//java/jdk1.5.0_06/jre/../lib/i386
> SHELL=/bin/tcsh
> HOSTTYPE=x86_64-linux
> OSTYPE=linux
> MACHTYPE=x86_64

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 21:44:47 2006
Return-Path: 
 <hadoop-dev-return-2883-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67925 invoked from network); 1 Aug 2006 21:44:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 21:44:47 -0000
Received: (qmail 25157 invoked by uid 500); 1 Aug 2006 21:44:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25000 invoked by uid 500); 1 Aug 2006 21:44:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24991 invoked by uid 99); 1 Aug 2006 21:44:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 14:44:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 14:44:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D7DEB41001E
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 21:42:14 +0000 (GMT)
Message-ID: <24102106.1154468534881.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 14:42:14 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-401) JobTracker crashes Sun JVM
In-Reply-To: <19999404.1154127860513.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-401?page=all ]

Mahadev konar updated HADOOP-401:
---------------------------------

    Priority: Major  (was: Minor)

> JobTracker crashes Sun JVM
> --------------------------
>
>                 Key: HADOOP-401
>                 URL: http://issues.apache.org/jira/browse/HADOOP-401
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: OS:Red Hat Enterprise Linux AS release 4 (Nahant Update 2)
> uname:Linux 2.6.9-22.12.y1-64 #5 SMP Fri Nov 4 13:39:56 PST 2005 x86_64
> libc:glibc 2.3.4 NPTL 2.3.4 
> rlimit: STACK 10240k, CORE 0k, NPROC 32768, NOFILE 32768, AS infinity
> load average:0.20 0.21 0.18
> CPU:total 4 family 47, cmov, cx8, fxsr, mmx, sse, sse2, ht
> Memory: 4k page, physical 988k(220k free), swap 3070k(3070k free)
> vm_info: Java HotSpot(TM) Server VM (1.5.0_06-b05) for linux-x86, built on Nov 10 2005 10:56:33 by java_re with gcc 3.2.1-7a (J2SE release)
>            Reporter: Marco Nicosia
>
> From our jobtacker's .out file:
> #
> # An unexpected error has been detected by HotSpot Virtual Machine:
> #
> #  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
> #
> # Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
> # Problematic frame:
> # J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> #
> # An error report file with more information is saved as hs_err_pid24028.log
> #
> # If you would like to submit a bug report, please visit:
> #   http://java.sun.com/webapps/bugreport/crash.jsp
> #
> And the relevant parts of that hs_err_pid24028.log file:
> #
> # An unexpected error has been detected by HotSpot Virtual Machine:
> #
> #  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
> #
> # Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
> # Problematic frame:
> # J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> #
> ---------------  T H R E A D  ---------------
> Current thread (0x086e0088):  JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]
> siginfo:si_signo=11, si_errno=0, si_code=2, si_addr=0x00022008
> Registers:
> EAX=0x00022000, EBX=0x75a0fac8, ECX=0x00000000, EDX=0x75b31258
> ESP=0x6ea7ded0, EBP=0x6ea7df3c, ESI=0x71b6def5, EDI=0x00000402
> EIP=0xf27bf825, CR2=0x00022008, EFLAGS=0x00010217
> Top of Stack: (sp=0x6ea7ded0)
> 0x6ea7ded0:   71549561 6ea7def0 00002000 00000400
> 0x6ea7dee0:   339dc50d 086e0088 6ea7df3c 6ea7df50
> 0x6ea7def0:   00000000 71b6def5 7154d7c9 f2595a80
> 0x6ea7df00:   6ea7df3c 6ea7df50 7154d7d8 6ea7df14
> 0x6ea7df10:   6ea7df3c f2501a14 00002000 e57bd350
> 0x6ea7df20:   6ea7df20 71b6def5 6ea7df50 71b71798
> 0x6ea7df30:   00000000 71b6df80 6ea7df44 6ea7df78
> 0x6ea7df40:   f2501aeb 719431e8 00002000 e57bd2d0 
> Instructions: (pc=0xf27bf825)
> 0xf27bf815:   8b 98 a4 00 00 00 8b 4b 20 89 4c 24 20 8b 41 08
> 0xf27bf825:   8b 70 08 8b de 4b 8b 4c 24 10 23 cb 89 4c 24 10 
> Stack: [0x6e9fe000,0x6ea7f000),  sp=0x6ea7ded0,  free space=511k
> Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
> J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> j  org.mortbay.http.HttpInputStream.<init>(Ljava/io/InputStream;I)V+15
> j  org.mortbay.http.HttpConnection.<init>(Lorg/mortbay/http/HttpListener;Ljava/net/InetAddress;Ljava/io/InputStream;Ljava/io/OutputStream;Ljava/lang/Object;)V+97
> j  org.mortbay.http.SocketListener.createConnection(Ljava/net/Socket;)Lorg/mortbay/http/HttpConnection;+18
> j  org.mortbay.http.SocketListener.handleConnection(Ljava/net/Socket;)V+2
> j  org.mortbay.util.ThreadedServer.handle(Ljava/lang/Object;)V+19
> ---------------  P R O C E S S  ---------------
> Java Threads: ( => current thread )
>   0x086bb8a0 JavaThread "Thread-0" [_thread_blocked, id=24117]
>   0x0859dd38 JavaThread "Thread-20" [_thread_blocked, id=24116]
>   0x0859a8a8 JavaThread "Thread-19" [_thread_blocked, id=24115]
>   0x0859a1f8 JavaThread "Thread-18" [_thread_blocked, id=24114]
>   0x085d54d8 JavaThread "SocketListener0-1" [_thread_in_native, id=24113]
> =>0x086e0088 JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]
> [...]
> Heap
>  PSYoungGen      total 21248K, used 19699K [0xe4640000, 0xe6a00000, 0xf2470000)
>   eden space 19584K, 92% used [0xe4640000,0xe57def08,0xe5960000)
>   from space 1664K, 99% used [0xe5960000,0xe5afe020,0xe5b00000)
>   to   space 8384K, 0% used [0xe61d0000,0xe61d0000,0xe6a00000)
>  PSOldGen        total 390080K, used 370693K [0x75470000, 0x8d160000, 0xe4640000)
>   object space 390080K, 95% used [0x75470000,0x8be716e0,0x8d160000)
>  PSPermGen       total 16384K, used 8080K [0x71470000, 0x72470000, 0x75470000)
>   object space 16384K, 49% used [0x71470000,0x71c54298,0x72470000)
> [...]
> VM Arguments:
> jvm_args: -Xmx2000m -Dhadoop.log.dir=/export//current/../run2/log -Dhadoop.log.file=hadoop-jobtracker.log -Dhadoop.home.dir=/export/current -Dhadoop.id.str=crawler -Dhadoop.root.logger=INFO,DRFA
> java_command: org.apache.hadoop.mapred.JobTracker
> Launcher Type: SUN_STANDARD
> Environment Variables:
> JAVA_HOME=/export//java/jdk
> PATH=/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/export//current/bin
> LD_LIBRARY_PATH=/export/java/jdk1.5.0_06/jre/lib/i386/server:/export//java/jdk1.5.0_06/jre/lib/i386:/export//java/jdk1.5.0_06/jre/../lib/i386
> SHELL=/bin/tcsh
> HOSTTYPE=x86_64-linux
> OSTYPE=linux
> MACHTYPE=x86_64

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 22:04:47 2006
Return-Path: 
 <hadoop-dev-return-2884-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73603 invoked from network); 1 Aug 2006 22:04:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 22:04:47 -0000
Received: (qmail 53677 invoked by uid 500); 1 Aug 2006 22:04:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53652 invoked by uid 500); 1 Aug 2006 22:04:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53643 invoked by uid 99); 1 Aug 2006 22:04:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 15:04:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 15:04:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 582C341001D
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 22:02:14 +0000 (GMT)
Message-ID: <29661971.1154469734356.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 15:02:14 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-411) junit test for HADOOP-59: support
 generic command-line options
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

junit test for HADOOP-59: support generic command-line options
--------------------------------------------------------------

                 Key: HADOOP-411
                 URL: http://issues.apache.org/jira/browse/HADOOP-411
             Project: Hadoop
          Issue Type: Test
          Components: dfs
    Affects Versions: 0.4.0
            Reporter: Hairong Kuang
         Assigned To: Hairong Kuang
             Fix For: 0.4.0


This issue will proivde Junit test cases for HADOOP-59.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  1 22:06:56 2006
Return-Path: 
 <hadoop-dev-return-2885-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74356 invoked from network); 1 Aug 2006 22:06:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 22:06:56 -0000
Received: (qmail 55660 invoked by uid 500); 1 Aug 2006 22:06:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55633 invoked by uid 500); 1 Aug 2006 22:06:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55624 invoked by uid 99); 1 Aug 2006 22:06:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 15:06:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 15:06:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD215410021
	for <hadoop-dev@lucene.apache.org>; Tue,  1 Aug 2006 22:04:18 +0000 (GMT)
Message-ID: <21393246.1154469858837.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 15:04:18 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-411) junit test for HADOOP-59: support
 generic command-line options
In-Reply-To: <29661971.1154469734356.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-411?page=all ]

Hairong Kuang updated HADOOP-411:
---------------------------------

    Attachment: testcases59.patch

> junit test for HADOOP-59: support generic command-line options
> --------------------------------------------------------------
>
>                 Key: HADOOP-411
>                 URL: http://issues.apache.org/jira/browse/HADOOP-411
>             Project: Hadoop
>          Issue Type: Test
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.4.0
>
>         Attachments: testcases59.patch
>
>
> This issue will proivde Junit test cases for HADOOP-59.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 00:10:53 2006
Return-Path: 
 <hadoop-dev-return-2886-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24590 invoked from network); 2 Aug 2006 00:10:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 00:10:53 -0000
Received: (qmail 128 invoked by uid 500); 2 Aug 2006 00:10:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99997 invoked by uid 500); 2 Aug 2006 00:10:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99984 invoked by uid 99); 2 Aug 2006 00:10:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 17:10:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 17:10:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DFAA5410021
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 00:08:13 +0000 (GMT)
Message-ID: <1340190.1154477293913.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 17:08:13 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-412) provide an input format that fetches a
 subset of sequence file records
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

provide an input format that fetches a subset of sequence file records
----------------------------------------------------------------------

                 Key: HADOOP-412
                 URL: http://issues.apache.org/jira/browse/HADOOP-412
             Project: Hadoop
          Issue Type: New Feature
            Reporter: Hairong Kuang
         Assigned To: Hairong Kuang


Sometimes a map/red job only wants to work on a subset of input data for the needs of its apllication or at the debugging phase. It would be convenient if an input format transparently handles this. It should provide an API that allows a programmer to specify a filtering criteria.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 00:10:54 2006
Return-Path: 
 <hadoop-dev-return-2887-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24777 invoked from network); 2 Aug 2006 00:10:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 00:10:54 -0000
Received: (qmail 476 invoked by uid 500); 2 Aug 2006 00:10:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 302 invoked by uid 500); 2 Aug 2006 00:10:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 285 invoked by uid 99); 2 Aug 2006 00:10:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 17:10:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 17:10:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D7FA1410022
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 00:08:14 +0000 (GMT)
Message-ID: <20779995.1154477294882.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 17:08:14 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-412) provide an input format that fetches a
 subset of sequence file records
In-Reply-To: <1340190.1154477293913.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-412?page=all ]

Hairong Kuang updated HADOOP-412:
---------------------------------

          Component/s: mapred
        Fix Version/s: 0.4.0
    Affects Version/s: 0.4.0

> provide an input format that fetches a subset of sequence file records
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-412
>                 URL: http://issues.apache.org/jira/browse/HADOOP-412
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.4.0
>
>
> Sometimes a map/red job only wants to work on a subset of input data for the needs of its apllication or at the debugging phase. It would be convenient if an input format transparently handles this. It should provide an API that allows a programmer to specify a filtering criteria.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 00:27:54 2006
Return-Path: 
 <hadoop-dev-return-2888-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34135 invoked from network); 2 Aug 2006 00:27:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 00:27:54 -0000
Received: (qmail 31811 invoked by uid 500); 2 Aug 2006 00:27:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31791 invoked by uid 500); 2 Aug 2006 00:27:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31782 invoked by uid 99); 2 Aug 2006 00:27:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 17:27:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 17:27:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 518EF41001E
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 00:25:16 +0000 (GMT)
Message-ID: <228863.1154478316331.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 17:25:16 -0700 (PDT)
From: "Anonymous (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-412) provide an input format that fetches a
 subset of sequence file records
In-Reply-To: <1340190.1154477293913.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-412?page=all ]


    Attachment: filter.patch

> provide an input format that fetches a subset of sequence file records
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-412
>                 URL: http://issues.apache.org/jira/browse/HADOOP-412
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.4.0
>
>         Attachments: filter.patch
>
>
> Sometimes a map/red job only wants to work on a subset of input data for the needs of its apllication or at the debugging phase. It would be convenient if an input format transparently handles this. It should provide an API that allows a programmer to specify a filtering criteria.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 00:29:47 2006
Return-Path: 
 <hadoop-dev-return-2889-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34655 invoked from network); 2 Aug 2006 00:29:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 00:29:47 -0000
Received: (qmail 34018 invoked by uid 500); 2 Aug 2006 00:29:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33993 invoked by uid 500); 2 Aug 2006 00:29:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33984 invoked by uid 99); 2 Aug 2006 00:29:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 17:29:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 17:29:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C05AC41001E
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 00:27:14 +0000 (GMT)
Message-ID: <25681022.1154478434785.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 17:27:14 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-412) provide an input format that fetches a
 subset of sequence file records
In-Reply-To: <1340190.1154477293913.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-412?page=all ]

Hairong Kuang updated HADOOP-412:
---------------------------------

    Attachment:     (was: filter.patch)

> provide an input format that fetches a subset of sequence file records
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-412
>                 URL: http://issues.apache.org/jira/browse/HADOOP-412
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.4.0
>
>
> Sometimes a map/red job only wants to work on a subset of input data for the needs of its apllication or at the debugging phase. It would be convenient if an input format transparently handles this. It should provide an API that allows a programmer to specify a filtering criteria.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 00:31:47 2006
Return-Path: 
 <hadoop-dev-return-2890-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35392 invoked from network); 2 Aug 2006 00:31:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 00:31:47 -0000
Received: (qmail 36840 invoked by uid 500); 2 Aug 2006 00:31:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36816 invoked by uid 500); 2 Aug 2006 00:31:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36807 invoked by uid 99); 2 Aug 2006 00:31:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 17:31:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 17:31:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DFE8C410022
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 00:29:13 +0000 (GMT)
Message-ID: <20792221.1154478553914.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 17:29:13 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-413) streaming: replace class UTF8 with
 class Text
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

streaming: replace class UTF8 with class Text
---------------------------------------------

                 Key: HADOOP-413
                 URL: http://issues.apache.org/jira/browse/HADOOP-413
             Project: Hadoop
          Issue Type: Improvement
          Components: contrib/streaming
            Reporter: Michel Tourn
         Assigned To: Michel Tourn


need to support long lines in hadoopStreaming.
So replace class UTF8 with class Text or with line-oriented binary I/O


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 00:36:48 2006
Return-Path: 
 <hadoop-dev-return-2891-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38403 invoked from network); 2 Aug 2006 00:36:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 00:36:48 -0000
Received: (qmail 49501 invoked by uid 500); 2 Aug 2006 00:36:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49342 invoked by uid 500); 2 Aug 2006 00:36:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49333 invoked by uid 99); 2 Aug 2006 00:36:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 17:36:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 17:36:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 04DE241001E
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 00:34:15 +0000 (GMT)
Message-ID: <12967039.1154478855017.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 17:34:15 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-412) provide an input format that fetches a
 subset of sequence file records
In-Reply-To: <1340190.1154477293913.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-412?page=all ]

Hairong Kuang updated HADOOP-412:
---------------------------------

    Attachment: filter.patch

This patch provides class SequenceFileInputFilter that can feed a subset of sequence file records to map tasks.  It provides a class method setFilter that defines a flltering criteria.

The patch provides three Filters: RegexFilter, PercentFilter, and MD5Filter. But a programmer may define its own filter. Any user-defined filter should either implements interface Filter or extend from FilterBase.

A junit test is also included.

> provide an input format that fetches a subset of sequence file records
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-412
>                 URL: http://issues.apache.org/jira/browse/HADOOP-412
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.4.0
>
>         Attachments: filter.patch
>
>
> Sometimes a map/red job only wants to work on a subset of input data for the needs of its apllication or at the debugging phase. It would be convenient if an input format transparently handles this. It should provide an API that allows a programmer to specify a filtering criteria.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 01:12:09 2006
Return-Path: 
 <hadoop-dev-return-2892-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48446 invoked from network); 2 Aug 2006 01:12:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 01:12:09 -0000
Received: (qmail 82892 invoked by uid 500); 2 Aug 2006 01:12:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82863 invoked by uid 500); 2 Aug 2006 01:12:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82848 invoked by uid 99); 2 Aug 2006 01:12:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 18:12:08 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 18:12:07 -0700
Received: from [207.126.231.236] (eric14-mac.corp.yahoo.com [207.126.231.236])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k721Bhnc070166
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Tue, 1 Aug 2006 18:11:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=ZkMcOvDKEN1sBkYgu2xc9QcVGESrB7h24/QhJytU9khbscmxWU7IqfRFKkv6JHCa
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <12967039.1154478855017.JavaMail.jira@brutus>
References: <12967039.1154478855017.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A0191518-671A-40F2-9A6E-9586BB6A5D15@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Updated: (HADOOP-412) provide an input format that fetches
 a subset of sequence file records
Date: Tue, 1 Aug 2006 18:11:40 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

cool.  Want to be walked through the "man page" of this.

Forward to me? Or be prepared to demo in the review?

On Aug 1, 2006, at 5:34 PM, Hairong Kuang (JIRA) wrote:

>      [ http://issues.apache.org/jira/browse/HADOOP-412?page=all ]
>
> Hairong Kuang updated HADOOP-412:
> ---------------------------------
>
>     Attachment: filter.patch
>
> This patch provides class SequenceFileInputFilter that can feed a  
> subset of sequence file records to map tasks.  It provides a class  
> method setFilter that defines a flltering criteria.
>
> The patch provides three Filters: RegexFilter, PercentFilter, and  
> MD5Filter. But a programmer may define its own filter. Any user- 
> defined filter should either implements interface Filter or extend  
> from FilterBase.
>
> A junit test is also included.
>
>> provide an input format that fetches a subset of sequence file  
>> records
>> --------------------------------------------------------------------- 
>> -
>>
>>                 Key: HADOOP-412
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-412
>>             Project: Hadoop
>>          Issue Type: New Feature
>>          Components: mapred
>>    Affects Versions: 0.4.0
>>            Reporter: Hairong Kuang
>>         Assigned To: Hairong Kuang
>>             Fix For: 0.4.0
>>
>>         Attachments: filter.patch
>>
>>
>> Sometimes a map/red job only wants to work on a subset of input  
>> data for the needs of its apllication or at the debugging phase.  
>> It would be convenient if an input format transparently handles  
>> this. It should provide an API that allows a programmer to specify  
>> a filtering criteria.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Wed Aug  2 01:26:47 2006
Return-Path: 
 <hadoop-dev-return-2893-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57510 invoked from network); 2 Aug 2006 01:26:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 01:26:47 -0000
Received: (qmail 878 invoked by uid 500); 2 Aug 2006 01:26:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 858 invoked by uid 500); 2 Aug 2006 01:26:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 849 invoked by uid 99); 2 Aug 2006 01:26:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 18:26:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 18:26:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3F9EA410021
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 01:24:14 +0000 (GMT)
Message-ID: <26221885.1154481854253.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 18:24:14 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-414) replace class UTF8 with class Text
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

replace class UTF8 with class Text
----------------------------------

                 Key: HADOOP-414
                 URL: http://issues.apache.org/jira/browse/HADOOP-414
             Project: Hadoop
          Issue Type: Improvement
    Affects Versions: 0.4.0
            Reporter: Hairong Kuang
         Assigned To: Hairong Kuang
             Fix For: 0.4.0


Since class UTF8 is deprecated, all references of UTF8 in hadoop should be replaced with class Text if the change does not break the system. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 01:41:54 2006
Return-Path: 
 <hadoop-dev-return-2894-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61613 invoked from network); 2 Aug 2006 01:41:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 01:41:54 -0000
Received: (qmail 16535 invoked by uid 500); 2 Aug 2006 01:41:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16512 invoked by uid 500); 2 Aug 2006 01:41:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16503 invoked by uid 99); 2 Aug 2006 01:41:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 18:41:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 18:41:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E8430410025
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 01:39:15 +0000 (GMT)
Message-ID: <11728384.1154482755948.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 18:39:15 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-415) DFSNodesStatus() should sort data
 nodes.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DFSNodesStatus() should sort data nodes.
----------------------------------------

                 Key: HADOOP-415
                 URL: http://issues.apache.org/jira/browse/HADOOP-415
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.4.0
            Reporter: Konstantin Shvachko
             Fix For: 0.5.0


HADOOP-392 introduced a new TreeMap member (datanodeMapByName) in the name node.
It is used solely for reporting the data nodes in the UI sorted by their names.
I think it is quite inefficient both time and space-wise to support an excessive
data structure just for that.
Suppose the UI will also require sorting by last heartbeat and/or by the available space....
I think DFSNodesStatus() should just sort the original datanodeMap before returning the list.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 02:21:47 2006
Return-Path: 
 <hadoop-dev-return-2895-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68677 invoked from network); 2 Aug 2006 02:21:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 02:21:47 -0000
Received: (qmail 59684 invoked by uid 500); 2 Aug 2006 02:21:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59524 invoked by uid 500); 2 Aug 2006 02:21:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59515 invoked by uid 99); 2 Aug 2006 02:21:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 19:21:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 19:21:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D9A4E410021
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 02:19:13 +0000 (GMT)
Message-ID: <30723901.1154485153889.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 19:19:13 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-416) Web UI JSP: need to HTML-Escape log
 file contents
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Web UI JSP: need to HTML-Escape log file contents
-------------------------------------------------

                 Key: HADOOP-416
                 URL: http://issues.apache.org/jira/browse/HADOOP-416
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Michel Tourn


Web UI JSP: need to HTML-Escape log (file) contents

Displaying the task's error log or the mapred.Reporter status String:

the content should 
have all "<" and ">" converted to "&lt;" and "&gt;", 
or use "<pre>" tag. 
Otherwise, ant HTML/XML tags within will not be displayed correctly

This problem occurs for ex. when using hadoopStreaming and 
a MapRed record is a chunk of HTML/XML content (and a task fails)

ex. problematic view:
http://jobtracker:50030/taskdetails.jsp?jobid=job_0009&taskid=tip_0009_m_000000
Other jsp pages may also need a change.






-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 02:54:52 2006
Return-Path: 
 <hadoop-dev-return-2896-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76047 invoked from network); 2 Aug 2006 02:54:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 02:54:52 -0000
Received: (qmail 85603 invoked by uid 500); 2 Aug 2006 02:54:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85584 invoked by uid 500); 2 Aug 2006 02:54:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85561 invoked by uid 99); 2 Aug 2006 02:54:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 19:54:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 19:54:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DD993410021
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 02:52:13 +0000 (GMT)
Message-ID: <11248109.1154487133904.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 19:52:13 -0700 (PDT)
From: "Marco Nicosia (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-417) Replace Jetty5 with Jetty6
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Replace Jetty5 with Jetty6
--------------------------

                 Key: HADOOP-417
                 URL: http://issues.apache.org/jira/browse/HADOOP-417
             Project: Hadoop
          Issue Type: Wish
          Components: dfs, mapred
    Affects Versions: 0.4.0
            Reporter: Marco Nicosia


Possibly a solution for HADOOP-401?


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 02:56:50 2006
Return-Path: 
 <hadoop-dev-return-2897-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76567 invoked from network); 2 Aug 2006 02:56:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 02:56:50 -0000
Received: (qmail 88366 invoked by uid 500); 2 Aug 2006 02:56:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88283 invoked by uid 500); 2 Aug 2006 02:56:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88256 invoked by uid 99); 2 Aug 2006 02:56:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 19:56:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 19:56:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 24E42410021
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 02:54:15 +0000 (GMT)
Message-ID: <15684449.1154487255148.JavaMail.jira@brutus>
Date: Tue, 1 Aug 2006 19:54:15 -0700 (PDT)
From: "Marco Nicosia (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-417) Replace Jetty5 with Jetty6
In-Reply-To: <11248109.1154487133904.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-417?page=comments#action_12425101 ] 
            
Marco Nicosia commented on HADOOP-417:
--------------------------------------

I realize it may be premature to file this, there are newer versions of Jetty5 we could try first. But it seems from the mortbay site, that even though Jetty6 has only gone GA pretty recently, they're really pushing it. I expect we'll have to upgrade sooner or later, hence the bug.


> Replace Jetty5 with Jetty6
> --------------------------
>
>                 Key: HADOOP-417
>                 URL: http://issues.apache.org/jira/browse/HADOOP-417
>             Project: Hadoop
>          Issue Type: Wish
>          Components: mapred, dfs
>    Affects Versions: 0.4.0
>            Reporter: Marco Nicosia
>
> Possibly a solution for HADOOP-401?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 14:06:53 2006
Return-Path: 
 <hadoop-dev-return-2898-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17196 invoked from network); 2 Aug 2006 14:06:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 14:06:53 -0000
Received: (qmail 65764 invoked by uid 500); 2 Aug 2006 14:06:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65746 invoked by uid 500); 2 Aug 2006 14:06:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65667 invoked by uid 99); 2 Aug 2006 14:06:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 07:06:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 07:06:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 68CF0410025
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 14:04:17 +0000 (GMT)
Message-ID: <27233168.1154527457426.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 07:04:17 -0700 (PDT)
From: "Philippe Gassmann (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-417) Replace Jetty5 with Jetty6
In-Reply-To: <11248109.1154487133904.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-417?page=comments#action_12425242 ] 
            
Philippe Gassmann commented on HADOOP-417:
------------------------------------------

Warning, jetty6 has not been released as a production version, and still contains some bugs.

> Replace Jetty5 with Jetty6
> --------------------------
>
>                 Key: HADOOP-417
>                 URL: http://issues.apache.org/jira/browse/HADOOP-417
>             Project: Hadoop
>          Issue Type: Wish
>          Components: mapred, dfs
>    Affects Versions: 0.4.0
>            Reporter: Marco Nicosia
>
> Possibly a solution for HADOOP-401?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 15:02:50 2006
Return-Path: 
 <hadoop-dev-return-2899-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40903 invoked from network); 2 Aug 2006 15:02:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 15:02:50 -0000
Received: (qmail 38266 invoked by uid 500); 2 Aug 2006 15:02:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38211 invoked by uid 500); 2 Aug 2006 15:02:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38185 invoked by uid 99); 2 Aug 2006 15:02:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 08:02:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 08:02:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6E608410021
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 15:00:14 +0000 (GMT)
Message-ID: <1896910.1154530814448.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 08:00:14 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-418) hadoopStreaming test jobconf ->
 env.var. mapping
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hadoopStreaming test jobconf -> env.var. mapping
------------------------------------------------

                 Key: HADOOP-418
                 URL: http://issues.apache.org/jira/browse/HADOOP-418
             Project: Hadoop
          Issue Type: Test
            Reporter: Michel Tourn
         Attachments: streaming.test.jobconf.env

The subprocess loads environment variables and tests for expected JobConf properties.



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 15:02:51 2006
Return-Path: 
 <hadoop-dev-return-2900-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40943 invoked from network); 2 Aug 2006 15:02:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 15:02:51 -0000
Received: (qmail 38309 invoked by uid 500); 2 Aug 2006 15:02:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38290 invoked by uid 500); 2 Aug 2006 15:02:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38276 invoked by uid 99); 2 Aug 2006 15:02:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 08:02:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 08:02:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7DB38410022
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 15:00:15 +0000 (GMT)
Message-ID: <16975510.1154530815512.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 08:00:15 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-418) hadoopStreaming test jobconf ->
 env.var. mapping
In-Reply-To: <1896910.1154530814448.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-418?page=all ]

Michel Tourn updated HADOOP-418:
--------------------------------

    Attachment: streaming.test.jobconf.env

> hadoopStreaming test jobconf -> env.var. mapping
> ------------------------------------------------
>
>                 Key: HADOOP-418
>                 URL: http://issues.apache.org/jira/browse/HADOOP-418
>             Project: Hadoop
>          Issue Type: Test
>            Reporter: Michel Tourn
>         Attachments: streaming.test.jobconf.env
>
>
> The subprocess loads environment variables and tests for expected JobConf properties.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 18:08:50 2006
Return-Path: 
 <hadoop-dev-return-2901-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6201 invoked from network); 2 Aug 2006 18:08:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 18:08:50 -0000
Received: (qmail 81038 invoked by uid 500); 2 Aug 2006 18:08:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81004 invoked by uid 500); 2 Aug 2006 18:08:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80995 invoked by uid 99); 2 Aug 2006 18:08:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:08:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:08:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 77A88410022
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 18:06:15 +0000 (GMT)
Message-ID: <23552859.1154541975487.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 11:06:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-59) support generic command-line options
In-Reply-To: <321463887.1140733957324.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-59?page=comments#action_12425315 ] 
            
Doug Cutting commented on HADOOP-59:
------------------------------------

Owen, what you say makes good sense.  If you feel strongly about it, please submit a new bug.

> support generic command-line options
> ------------------------------------
>
>                 Key: HADOOP-59
>                 URL: http://issues.apache.org/jira/browse/HADOOP-59
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Hairong Kuang
>            Priority: Minor
>             Fix For: 0.4.0
>
>         Attachments: bashfile.patch, commons-cli-2.0-SNAPSHOT.jar, genericCommand.patch, Tool.java, ToolBase.java, toolbase.patch
>
>
> Hadoop commands should all support some common options.  For example, it should be possible to specify the namenode, datanode, and, for that matter, any config option, in a generic way.
> This could be implemented with code like:
> public interface Tool extends Configurable {
>   void run(String[] args) throws Exception;
> }
> public class ToolBase implements Tool extends Configured {
>   public final void main(String[] args) throws Exception {
>     Configuration conf = new Configuration();
>     ... parse config options from args into conf ...
>     this.configure(conf);
>     this.run();
>   }
> }
> public MyTool extends ExcecutableBase {
>   public static void main(String[] args) throws Exception {
>     new MyTool().main(args);
>   }
> }
> The general command line syntax could be:
> bin/hadoop [generalOptions] command [commandOptions]
> Where generalOptions are things that ToolBase handles, and only the commandOptions are passed to Tool.run().  The most important generalOption would be '-D', which would define name/value pairs that are set in the configuration.  This alone would permit folks to set the namenode, datanode, etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 18:10:50 2006
Return-Path: 
 <hadoop-dev-return-2902-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6935 invoked from network); 2 Aug 2006 18:10:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 18:10:50 -0000
Received: (qmail 89933 invoked by uid 500); 2 Aug 2006 18:10:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89912 invoked by uid 500); 2 Aug 2006 18:10:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89903 invoked by uid 99); 2 Aug 2006 18:10:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:10:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:10:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E0C4841001E
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 18:08:14 +0000 (GMT)
Message-ID: <19331686.1154542094918.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 11:08:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-410) Using HashMap instead of TreeMap for
 some maps in Namenode yields 17% performance improvement
In-Reply-To: <31556196.1154466675060.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-410?page=all ]

Doug Cutting resolved HADOOP-410.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Milind!

> Using HashMap instead of TreeMap for some maps in Namenode yields 17% performance improvement
> ---------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-410
>                 URL: http://issues.apache.org/jira/browse/HADOOP-410
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.5.0
>         Environment: linux
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.5.0
>
>         Attachments: hashmap.patch
>
>
> For blocksMap in FSNameSystem and activeBlocks map in FSDirectory, if we use HashMap instead of TreeMap, it yields 17% performance improvement (without significant difference in memory consumption).
> I am attaching a patch, alongwith a namenode benchmark.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 18:12:50 2006
Return-Path: 
 <hadoop-dev-return-2903-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8009 invoked from network); 2 Aug 2006 18:12:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 18:12:50 -0000
Received: (qmail 97782 invoked by uid 500); 2 Aug 2006 18:12:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97758 invoked by uid 500); 2 Aug 2006 18:12:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97749 invoked by uid 99); 2 Aug 2006 18:12:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:12:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:12:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C57FC41000D
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 18:10:15 +0000 (GMT)
Message-ID: <4646555.1154542215805.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 11:10:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-411) junit test for HADOOP-59: support
 generic command-line options
In-Reply-To: <29661971.1154469734356.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-411?page=all ]

Doug Cutting resolved HADOOP-411.
---------------------------------

    Fix Version/s: 0.5.0
                       (was: 0.4.0)
       Resolution: Fixed

I just committed this.  Thanks, Hairong!

> junit test for HADOOP-59: support generic command-line options
> --------------------------------------------------------------
>
>                 Key: HADOOP-411
>                 URL: http://issues.apache.org/jira/browse/HADOOP-411
>             Project: Hadoop
>          Issue Type: Test
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.5.0
>
>         Attachments: testcases59.patch
>
>
> This issue will proivde Junit test cases for HADOOP-59.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 18:34:55 2006
Return-Path: 
 <hadoop-dev-return-2904-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16697 invoked from network); 2 Aug 2006 18:34:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 18:34:55 -0000
Received: (qmail 64018 invoked by uid 500); 2 Aug 2006 18:34:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63999 invoked by uid 500); 2 Aug 2006 18:34:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63978 invoked by uid 99); 2 Aug 2006 18:34:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:34:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:34:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 482A9410021
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 18:32:16 +0000 (GMT)
Message-ID: <14511492.1154543536293.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 11:32:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-414) replace class UTF8 with class Text
In-Reply-To: <26221885.1154481854253.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-414?page=all ]

Doug Cutting updated HADOOP-414:
--------------------------------

        Fix Version/s: 0.6.0
                           (was: 0.4.0)
    Affects Version/s: 0.5.0
                           (was: 0.4.0)

I think we should target this for 0.6, and just deprecate UTF8 in 0.5.  Does that make sense?

> replace class UTF8 with class Text
> ----------------------------------
>
>                 Key: HADOOP-414
>                 URL: http://issues.apache.org/jira/browse/HADOOP-414
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>
> Since class UTF8 is deprecated, all references of UTF8 in hadoop should be replaced with class Text if the change does not break the system. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 18:37:03 2006
Return-Path: 
 <hadoop-dev-return-2905-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17951 invoked from network); 2 Aug 2006 18:37:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 18:37:03 -0000
Received: (qmail 70068 invoked by uid 500); 2 Aug 2006 18:36:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69995 invoked by uid 500); 2 Aug 2006 18:36:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69980 invoked by uid 99); 2 Aug 2006 18:36:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:36:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:36:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 761AC41000D
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 18:34:17 +0000 (GMT)
Message-ID: <31717658.1154543657480.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 11:34:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-412) provide an input format that fetches
 a subset of sequence file records
In-Reply-To: <1340190.1154477293913.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-412?page=all ]

Doug Cutting resolved HADOOP-412.
---------------------------------

    Fix Version/s: 0.5.0
                       (was: 0.4.0)
       Resolution: Fixed

I just committed this, along with the patch from HADOOP-376 that it requires.  Thanks, Hairong!

> provide an input format that fetches a subset of sequence file records
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-412
>                 URL: http://issues.apache.org/jira/browse/HADOOP-412
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.5.0
>
>         Attachments: filter.patch
>
>
> Sometimes a map/red job only wants to work on a subset of input data for the needs of its apllication or at the debugging phase. It would be convenient if an input format transparently handles this. It should provide an API that allows a programmer to specify a filtering criteria.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 18:38:56 2006
Return-Path: 
 <hadoop-dev-return-2906-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19873 invoked from network); 2 Aug 2006 18:38:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 18:38:56 -0000
Received: (qmail 74139 invoked by uid 500); 2 Aug 2006 18:38:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74067 invoked by uid 500); 2 Aug 2006 18:38:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74033 invoked by uid 99); 2 Aug 2006 18:38:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:38:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:38:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C16FB410021
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 18:36:16 +0000 (GMT)
Message-ID: <13997421.1154543776789.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 11:36:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-367) Static blocks do not automatically
 run when a class is loaded in Java 5.0
In-Reply-To: <22771983.1153174453937.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-367?page=comments#action_12425331 ] 
            
Doug Cutting commented on HADOOP-367:
-------------------------------------

I committed the reflection patch, but am not yet closing this.

Hairong, will you provide a patch replacing WritableFactory with ReflectionUtils?

> Static blocks do not automatically run when a class is loaded in Java 5.0
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-367
>                 URL: http://issues.apache.org/jira/browse/HADOOP-367
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>         Environment: Java 5.0
>            Reporter: Benjamin Reed
>             Fix For: 0.5.0
>
>         Attachments: f.patch, reflection.patch
>
>
> There seems to be a change that happened between 1.4 and 1.5 with respect to static initializers. I can't find this documented, but I can reproduce with a very simple program. Basically, a static initializer is not called unless a static member/method of the class is accessed or an instance is created. This is actually what the JLS says, but until 1.5 the static initializers ran when the class was loaded. Note that this behavior only occurs when running with the 1.5 JRE AND compiling for 1.5.
> For many Writables this isn't an issue, so the fallback behavior of the WritableFactory works, but Block is package private, so loadEdits fails when called from org.apache.hadoop.io.ArrayWritable.readFields() yielding the following trace:
> Caused by: java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSEdits(FSDirectory.java:532)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:470)
>         at org.apache.hadoop.dfs.FSDirectory.<init>(FSDirectory.java:307)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:177)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:91)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:84)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:491)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 18:42:49 2006
Return-Path: 
 <hadoop-dev-return-2907-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21437 invoked from network); 2 Aug 2006 18:42:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 18:42:49 -0000
Received: (qmail 91242 invoked by uid 500); 2 Aug 2006 18:42:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91216 invoked by uid 500); 2 Aug 2006 18:42:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91206 invoked by uid 99); 2 Aug 2006 18:42:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:42:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:42:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BD1A041000D
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 18:40:14 +0000 (GMT)
Message-ID: <11756365.1154544014772.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 11:40:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-411) junit test for HADOOP-59: support
 generic command-line options
In-Reply-To: <29661971.1154469734356.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-411?page=comments#action_12425334 ] 
            
Doug Cutting commented on HADOOP-411:
-------------------------------------

This writes files in the conf directory that it does not remove.  It would be better to write these in the build directory.

> junit test for HADOOP-59: support generic command-line options
> --------------------------------------------------------------
>
>                 Key: HADOOP-411
>                 URL: http://issues.apache.org/jira/browse/HADOOP-411
>             Project: Hadoop
>          Issue Type: Test
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.5.0
>
>         Attachments: testcases59.patch
>
>
> This issue will proivde Junit test cases for HADOOP-59.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 18:46:49 2006
Return-Path: 
 <hadoop-dev-return-2908-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22316 invoked from network); 2 Aug 2006 18:46:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 18:46:49 -0000
Received: (qmail 97264 invoked by uid 500); 2 Aug 2006 18:46:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97243 invoked by uid 500); 2 Aug 2006 18:46:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97233 invoked by uid 99); 2 Aug 2006 18:46:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:46:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:46:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CB9E741000D
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 18:44:14 +0000 (GMT)
Message-ID: <18615976.1154544254831.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 11:44:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-418) hadoopStreaming test jobconf ->
 env.var. mapping
In-Reply-To: <1896910.1154530814448.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-418?page=all ]

Doug Cutting resolved HADOOP-418.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

I just committed this.  Thanks, Michel!

> hadoopStreaming test jobconf -> env.var. mapping
> ------------------------------------------------
>
>                 Key: HADOOP-418
>                 URL: http://issues.apache.org/jira/browse/HADOOP-418
>             Project: Hadoop
>          Issue Type: Test
>            Reporter: Michel Tourn
>             Fix For: 0.5.0
>
>         Attachments: streaming.test.jobconf.env
>
>
> The subprocess loads environment variables and tests for expected JobConf properties.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 19:35:48 2006
Return-Path: 
 <hadoop-dev-return-2909-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50727 invoked from network); 2 Aug 2006 19:35:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 19:35:48 -0000
Received: (qmail 28813 invoked by uid 500); 2 Aug 2006 19:35:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28666 invoked by uid 500); 2 Aug 2006 19:35:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28657 invoked by uid 99); 2 Aug 2006 19:35:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 12:35:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 12:35:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DD2EB41000F
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 19:33:13 +0000 (GMT)
Message-ID: <7601484.1154547193903.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 12:33:13 -0700 (PDT)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-419) libdfs doesn't work with application
 threads
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

libdfs doesn't work with application threads
--------------------------------------------

                 Key: HADOOP-419
                 URL: http://issues.apache.org/jira/browse/HADOOP-419
             Project: Hadoop
          Issue Type: Bug
          Components: conf
            Reporter: Christian Kunz


Using libdfs from C++ using threads I get a null pointer for the ThreadClassLoader, which throws an exception.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 20:19:50 2006
Return-Path: 
 <hadoop-dev-return-2910-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63342 invoked from network); 2 Aug 2006 20:19:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 20:19:50 -0000
Received: (qmail 41369 invoked by uid 500); 2 Aug 2006 20:19:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41308 invoked by uid 500); 2 Aug 2006 20:19:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41258 invoked by uid 99); 2 Aug 2006 20:19:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 13:19:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 13:19:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5015C410023
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 20:17:15 +0000 (GMT)
Message-ID: <16400996.1154549835325.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 13:17:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-420) Accumulate bytes & records statistics
 at the job level via haoop.metrics.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Accumulate bytes & records statistics at the job level via haoop.metrics.
-------------------------------------------------------------------------

                 Key: HADOOP-420
                 URL: http://issues.apache.org/jira/browse/HADOOP-420
             Project: Hadoop
          Issue Type: Bug
          Components: metrics
    Affects Versions: 0.5.0
            Reporter: Owen O'Malley
         Assigned To: Milind Bhandarkar
             Fix For: 0.6.0


We'd like to accumulate the statistics (and get graphs) at the job level rather than the job level, because it will provide a lot more useful information. This likely implies that they need to be rolled up in the TaskStatus reported up to the JobTracker.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 20:23:49 2006
Return-Path: 
 <hadoop-dev-return-2911-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65184 invoked from network); 2 Aug 2006 20:23:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 20:23:49 -0000
Received: (qmail 45521 invoked by uid 500); 2 Aug 2006 20:23:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45497 invoked by uid 500); 2 Aug 2006 20:23:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45488 invoked by uid 99); 2 Aug 2006 20:23:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 13:23:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 13:23:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CEDD341001E
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 20:21:14 +0000 (GMT)
Message-ID: <20456051.1154550074844.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 13:21:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-141) Disk thrashing / task timeouts
 during map output copy phase
In-Reply-To: <9808210.1145312482052.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-141?page=comments#action_12425370 ] 
            
Owen O'Malley commented on HADOOP-141:
--------------------------------------

Paul,
   Is this still happening with the http map output transfer or can I close this?

> Disk thrashing / task timeouts during map output copy phase
> -----------------------------------------------------------
>
>                 Key: HADOOP-141
>                 URL: http://issues.apache.org/jira/browse/HADOOP-141
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>         Environment: linux
>            Reporter: paul sutter
>
> MapOutputProtocol connections cause timeouts because of system thrashing and transferring the same file over and over again, ultimately leading to making no forward progress(medium sized job, 500GB input file, map output about as large as the input, 10 node cluster).
> There are several bugs behind this, but the following two changes improved matters considerably.
> (1) 
> The buffersize in MapOutputFile is currently hardcoded to 8192 bytes (for both reads and writes). By changing this buffer size to 256KB, the number of disk seeks are reduced and the problem went away. 
> Ideally there would be a buffer size parameter for this that is separate from the DFS io buffer size.
> (2)
> I also added the following code to the socket configuration in both Server.java and Client.java. No linger is a minor good idea in an enivronment with some packet loss (and you will have that when all the nodes get busy at once), but 256KB buffers is probably excessive, especially on a LAN, but it takes me two hours to test changes so I havent experimented.
> socket.setSendBufferSize(256*1024);
> socket.setReceiveBufferSize(256*1024);
> socket.setSoLinger(false, 0);
> socket.setKeepAlive(true);

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 20:34:48 2006
Return-Path: 
 <hadoop-dev-return-2912-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68560 invoked from network); 2 Aug 2006 20:34:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 20:34:48 -0000
Received: (qmail 65328 invoked by uid 500); 2 Aug 2006 20:34:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65307 invoked by uid 500); 2 Aug 2006 20:34:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65298 invoked by uid 99); 2 Aug 2006 20:34:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 13:34:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 13:34:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EDDCB41001E
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 20:32:13 +0000 (GMT)
Message-ID: <2032099.1154550733971.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 13:32:13 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-421) replace String in hadoop record io
 with the new Text class
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

replace String in hadoop record io with the new Text class
----------------------------------------------------------

                 Key: HADOOP-421
                 URL: http://issues.apache.org/jira/browse/HADOOP-421
             Project: Hadoop
          Issue Type: Bug
          Components: record
    Affects Versions: 0.4.0
            Reporter: Owen O'Malley
         Assigned To: Milind Bhandarkar
             Fix For: 0.5.0


The record io in Java is currently using String and should be using the new Text class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 21:16:50 2006
Return-Path: 
 <hadoop-dev-return-2913-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81559 invoked from network); 2 Aug 2006 21:16:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 21:16:50 -0000
Received: (qmail 78023 invoked by uid 500); 2 Aug 2006 21:16:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78005 invoked by uid 500); 2 Aug 2006 21:16:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77996 invoked by uid 99); 2 Aug 2006 21:16:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 14:16:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 14:16:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 207C841001E
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 21:14:15 +0000 (GMT)
Message-ID: <6281492.1154553255129.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 14:14:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-403) close method in a Mapper should be
 provided with OutputCollector and a Reporter
In-Reply-To: <14218394.1154383873895.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-403?page=comments#action_12425381 ] 
            
Owen O'Malley commented on HADOOP-403:
--------------------------------------

I'm very uncomfortable with passing the Reporter and OutputCollector via the JobConf.

It does two bad things:
  1. It passes "real" Java objects around in the JobConf, which breaks the assumption that the JobConf can be serialized successfully. (In this case, it is ok because it won't cross the process boundary, but it breaks the developers expectations.)
  2. It hides the information that application writers need in a very hidden place. If I look at Mapper or Reducer, I won't see the information that I have available. Only if I scan through the HUGE JobConf API will I see the fact that they are avaiable.

I strongly suggest that we just take the hit and extend the Closeable interface. I'd propose:
  1. Making the Closeable.close() method depricated.
  2. Add a new Closeable.close(OutputCollector, Reporter) method.
  3. In MapReduceBase provide a default implementation that calls the close() method.

That should minimize the breakage in user code and still make the intended interface clear.

> close method in a Mapper should be provided with OutputCollector and a Reporter
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-403
>                 URL: http://issues.apache.org/jira/browse/HADOOP-403
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.5.0
>
>
> For mappers with side-effects, or mappers that work as aggregators (i.e. no output on individual key-value pairs, but an aggregate output at the end of all key-value pairs), output should be performed in the close method. For this purpose, we need to supply output collector and reporter to the close method of Mapper. This involves interface change, though. Thoughts ?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 22:02:56 2006
Return-Path: 
 <hadoop-dev-return-2914-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1926 invoked from network); 2 Aug 2006 22:02:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 22:02:56 -0000
Received: (qmail 14477 invoked by uid 500); 2 Aug 2006 22:02:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14454 invoked by uid 500); 2 Aug 2006 22:02:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14445 invoked by uid 99); 2 Aug 2006 22:02:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 15:02:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 15:02:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4BFF1410012
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 22:00:16 +0000 (GMT)
Message-ID: <30807016.1154556016308.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 15:00:16 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-302) class Text (replacement for class
 UTF8) was: HADOOP-136
In-Reply-To: <26017675.1150245149961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-302?page=comments#action_12425388 ] 
            
Bryan Pendleton commented on HADOOP-302:
----------------------------------------

Don't know what the culprits are, but here are two stack traces I got today that killed a 2-hour job. Maybe, for now, validateUTF should be called when first serializing, too. There seem to still be a few bugs in how Text handles content.

java.lang.RuntimeException: java.nio.charset.MalformedInputException: Input length = 3
	at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.next(ReduceTask.java:152)
	at org.apache.hadoop.mapred.lib.IdentityReducer.reduce(IdentityReducer.java:39)
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:272)
	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1076)
Caused by: java.nio.charset.MalformedInputException: Input length = 3
	at org.apache.hadoop.io.Text.validateUTF(Text.java:439)
	at org.apache.hadoop.io.Text.validateUTF8(Text.java:419)
	at org.apache.hadoop.io.Text.readFields(Text.java:228)
	at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:82)
	at org.apache.hadoop.io.SequenceFile$Reader.next(SequenceFile.java:370)
	at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.getNext(ReduceTask.java:183)
	at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.next(ReduceTask.java:149)
	... 3 more

java.lang.RuntimeException: java.nio.charset.MalformedInputException: Input length = 26
	at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.next(ReduceTask.java:152)
	at org.apache.hadoop.mapred.lib.IdentityReducer.reduce(IdentityReducer.java:39)
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:272)
	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1076)
Caused by: java.nio.charset.MalformedInputException: Input length = 26
	at org.apache.hadoop.io.Text.validateUTF(Text.java:439)
	at org.apache.hadoop.io.Text.validateUTF8(Text.java:419)
	at org.apache.hadoop.io.Text.readFields(Text.java:228)
	at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:82)
	at org.apache.hadoop.io.SequenceFile$Reader.next(SequenceFile.java:370)
	at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.getNext(ReduceTask.java:183)
	at org.apache.hadoop.mapred.ReduceTask$ValuesIterator.next(ReduceTask.java:149)
	... 3 more

Unlike last time, this content doesn't contain tabs. Contact me off-list for pointers to the dataset this occured in.

> class Text (replacement for class UTF8) was: HADOOP-136
> -------------------------------------------------------
>
>                 Key: HADOOP-302
>                 URL: http://issues.apache.org/jira/browse/HADOOP-302
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>            Reporter: Michel Tourn
>         Assigned To: Hairong Kuang
>             Fix For: 0.5.0
>
>         Attachments: text.patch, textwrap.patch, VInt.patch
>
>
> Just to verify, which length-encoding scheme are we using for class Text (aka LargeUTF8) 
> a) The "UTF-8/Lucene" scheme? (highest bit of each byte is an extension bit, which I think is what Doug is describing in his last comment) or 
> b) the record-IO scheme in o.a.h.record.Utils.java:readInt 
> Either way, note that: 
> 1. UTF8.java and its successor Text.java need to read the length in two ways: 
>   1a. consume 1+ bytes from a DataInput and 
>   1b. parse the length within a byte array at a given offset 
> (1.b is used for the "WritableComparator optimized for UTF8 keys" ). 
> o.a.h.record.Utils only supports the DataInput mode. 
> It is not clear to me what is the best way to extend this Utils code when you need to support both reading modes 
> 2 Methods like UTF8's WritableComparator are to be low overhead, in partic. there should be no Object allocation. 
> For the byte array case, the varlen-reader utility needs to be extended to return both: 
>  the decoded length and the length of the encoded length. 
>  (so that the caller can do offset += encodedlength) 
>     
> 3. A String length does not need (small) negative integers. 
> 4. One advantage of a) is that it is standard (or at least well-known and natural) and there are no magic constants (like -120, -121 -124) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  2 22:50:49 2006
Return-Path: 
 <hadoop-dev-return-2915-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13138 invoked from network); 2 Aug 2006 22:50:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 22:50:49 -0000
Received: (qmail 89610 invoked by uid 500); 2 Aug 2006 22:50:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89583 invoked by uid 500); 2 Aug 2006 22:50:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89574 invoked by uid 99); 2 Aug 2006 22:50:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 15:50:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 15:50:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B89EE41000D
	for <hadoop-dev@lucene.apache.org>; Wed,  2 Aug 2006 22:48:14 +0000 (GMT)
Message-ID: <28913436.1154558894753.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 15:48:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-415) DFSNodesStatus() should sort data
 nodes.
In-Reply-To: <11728384.1154482755948.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-415?page=comments#action_12425393 ] 
            
Konstantin Shvachko commented on HADOOP-415:
--------------------------------------------

Actually, I think that it would be even better to make DFSNodesStatus() a member of the JspHelper  class.
And sorting should be called directly in the jsp file.
In general it would be good to keep all data collection/processing in the JspHelper class,
and let the jsp-files just output information.

> DFSNodesStatus() should sort data nodes.
> ----------------------------------------
>
>                 Key: HADOOP-415
>                 URL: http://issues.apache.org/jira/browse/HADOOP-415
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>             Fix For: 0.5.0
>
>
> HADOOP-392 introduced a new TreeMap member (datanodeMapByName) in the name node.
> It is used solely for reporting the data nodes in the UI sorted by their names.
> I think it is quite inefficient both time and space-wise to support an excessive
> data structure just for that.
> Suppose the UI will also require sorting by last heartbeat and/or by the available space....
> I think DFSNodesStatus() should just sort the original datanodeMap before returning the list.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug  3 00:30:49 2006
Return-Path: 
 <hadoop-dev-return-2916-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45827 invoked from network); 3 Aug 2006 00:30:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 00:30:49 -0000
Received: (qmail 8407 invoked by uid 500); 3 Aug 2006 00:30:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8246 invoked by uid 500); 3 Aug 2006 00:30:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8237 invoked by uid 99); 3 Aug 2006 00:30:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 17:30:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 17:30:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B455841000F
	for <hadoop-dev@lucene.apache.org>; Thu,  3 Aug 2006 00:28:14 +0000 (GMT)
Message-ID: <9046369.1154564894736.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 17:28:14 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-414) replace class UTF8 with class Text
In-Reply-To: <26221885.1154481854253.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-414?page=comments#action_12425412 ] 
            
Sameer Paranjpye commented on HADOOP-414:
-----------------------------------------

I agree, it seems reasonable practice to deprecate the class in 0.5 and give people enough time to prepare for removal.





> replace class UTF8 with class Text
> ----------------------------------
>
>                 Key: HADOOP-414
>                 URL: http://issues.apache.org/jira/browse/HADOOP-414
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>
> Since class UTF8 is deprecated, all references of UTF8 in hadoop should be replaced with class Text if the change does not break the system. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug  3 01:53:51 2006
Return-Path: 
 <hadoop-dev-return-2917-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70382 invoked from network); 3 Aug 2006 01:53:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 01:53:51 -0000
Received: (qmail 83330 invoked by uid 500); 3 Aug 2006 01:53:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82848 invoked by uid 500); 3 Aug 2006 01:53:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82838 invoked by uid 99); 3 Aug 2006 01:53:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 18:53:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 18:53:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E03A241001E
	for <hadoop-dev@lucene.apache.org>; Thu,  3 Aug 2006 01:51:14 +0000 (GMT)
Message-ID: <33030538.1154569874915.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 18:51:14 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-422) ant test is failing with TestLocalDFS
 and TestMiniMRWithDFS failing
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

ant test is failing with TestLocalDFS and TestMiniMRWithDFS failing
-------------------------------------------------------------------

                 Key: HADOOP-422
                 URL: http://issues.apache.org/jira/browse/HADOOP-422
             Project: Hadoop
          Issue Type: Bug
            Reporter: Mahadev konar


org.apache.hadoop.ipc.RPC$VersionMismatch: Protocol org.apache.hadoop.dfs.ClientProtocol version mismatch. (client = 1, server = 2)
        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:250)
        at org.apache.hadoop.dfs.DFSClient.<init>(DFSClient.java:103)
        at org.apache.hadoop.dfs.DistributedFileSystem.<init>(DistributedFileSystem.java:47)
        at org.apache.hadoop.fs.FileSystem.getNamed(FileSystem.java:101)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:86)
        at org.apache.hadoop.dfs.MiniDFSCluster.getFileSystem(MiniDFSCluster.java:146)
        at org.apache.hadoop.dfs.TestLocalDFS.testWorkingDirectory(TestLocalDFS.java:42)

This is the error I am getting when running ant test on TestLocalDFS.
Its the same error (version mismatch) for TestMiniMRWithDFS.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug  3 03:39:50 2006
Return-Path: 
 <hadoop-dev-return-2918-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86103 invoked from network); 3 Aug 2006 03:39:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 03:39:50 -0000
Received: (qmail 2864 invoked by uid 500); 3 Aug 2006 03:39:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2769 invoked by uid 500); 3 Aug 2006 03:39:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2760 invoked by uid 99); 3 Aug 2006 03:39:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 20:39:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 20:39:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5F99C41000F
	for <hadoop-dev@lucene.apache.org>; Thu,  3 Aug 2006 03:37:15 +0000 (GMT)
Message-ID: <29429373.1154576235389.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 20:37:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-334) Redesign the dfs namespace
 datastructures to be copy on write
In-Reply-To: <27865237.1151602049843.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-334?page=all ]

Owen O'Malley reassigned HADOOP-334:
------------------------------------

    Assignee: Konstantin Shvachko  (was: Owen O'Malley)

> Redesign the dfs namespace datastructures to be copy on write
> -------------------------------------------------------------
>
>                 Key: HADOOP-334
>                 URL: http://issues.apache.org/jira/browse/HADOOP-334
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>
> The namespace datastructures should be copy on write so that the namespace does not need to be completely locked down from user changes while the checkpoint is being made.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug  3 03:39:52 2006
Return-Path: 
 <hadoop-dev-return-2919-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86171 invoked from network); 3 Aug 2006 03:39:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 03:39:52 -0000
Received: (qmail 3221 invoked by uid 500); 3 Aug 2006 03:39:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3193 invoked by uid 500); 3 Aug 2006 03:39:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3165 invoked by uid 99); 3 Aug 2006 03:39:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 20:39:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 20:39:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 02E9341001E
	for <hadoop-dev@lucene.apache.org>; Thu,  3 Aug 2006 03:37:17 +0000 (GMT)
Message-ID: <20276359.1154576237009.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 20:37:17 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-332) Implement remote replication of dfs
 namespace images and transaction logs
In-Reply-To: <10603792.1151562509899.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-332?page=all ]

Owen O'Malley reassigned HADOOP-332:
------------------------------------

    Assignee: Konstantin Shvachko  (was: Owen O'Malley)

> Implement remote replication of dfs namespace images and transaction logs
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-332
>                 URL: http://issues.apache.org/jira/browse/HADOOP-332
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.5.0
>
>
> The namespace information (image and transaction logs) needs to be replicated on hosts other than the namenode to prevent data loss if a namenode crashes. In the short term we will add a new protocol to the datanodes to receive and store the namespace information.
> In the long term, it would be nice to have read-only namenodes that could receive the information and serve it up for users that want to read data, but do not need to write to the namespace.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug  3 06:03:50 2006
Return-Path: 
 <hadoop-dev-return-2920-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18921 invoked from network); 3 Aug 2006 06:03:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 06:03:50 -0000
Received: (qmail 91836 invoked by uid 500); 3 Aug 2006 06:03:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91807 invoked by uid 500); 3 Aug 2006 06:03:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91798 invoked by uid 99); 3 Aug 2006 06:03:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 23:03:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 23:03:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5743E714219
	for <hadoop-dev@lucene.apache.org>; Thu,  3 Aug 2006 06:01:15 +0000 (GMT)
Message-ID: <16456315.1154584875355.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 23:01:15 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Sanjay Dahiya reassigned HADOOP-263:
------------------------------------

    Assignee: Sanjay Dahiya  (was: Owen O'Malley)

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.5.0
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug  3 06:03:52 2006
Return-Path: 
 <hadoop-dev-return-2921-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18965 invoked from network); 3 Aug 2006 06:03:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 06:03:52 -0000
Received: (qmail 92166 invoked by uid 500); 3 Aug 2006 06:03:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92007 invoked by uid 500); 3 Aug 2006 06:03:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91998 invoked by uid 99); 3 Aug 2006 06:03:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 23:03:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 23:03:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D891F71429B
	for <hadoop-dev@lucene.apache.org>; Thu,  3 Aug 2006 06:01:16 +0000 (GMT)
Message-ID: <28225021.1154584876884.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 23:01:16 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-263) task status should include
 timestamps for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-263?page=comments#action_12425441 ] 
            
Sanjay Dahiya commented on HADOOP-263:
--------------------------------------

Here is what I am thinking for this. 

We add an extra field (timestamp) in org.apache.hadoop.mapred.TaskStatus. The timestamp gets TaskTracker.TaskInprogress.reportProgress(), when a task reports progress. As part of Task the timestamp is updated in Progress.set(), Progress.setStatus() and complete(). The timestamp is sent over to TaskTracker over RPC along with status.

Another option is to update the timestamp when TaskTracker gets the progress report, without making any change to the Task. But sending timestamp over RPC gives a more accurate timestamp of the last progress update. 


> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.5.0
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug  3 06:05:50 2006
Return-Path: 
 <hadoop-dev-return-2922-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20172 invoked from network); 3 Aug 2006 06:05:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 06:05:50 -0000
Received: (qmail 94918 invoked by uid 500); 3 Aug 2006 06:05:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94887 invoked by uid 500); 3 Aug 2006 06:05:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94878 invoked by uid 99); 3 Aug 2006 06:05:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 23:05:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 23:05:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 46838714204
	for <hadoop-dev@lucene.apache.org>; Thu,  3 Aug 2006 06:03:15 +0000 (GMT)
Message-ID: <2705343.1154584995286.JavaMail.jira@brutus>
Date: Wed, 2 Aug 2006 23:03:15 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-263) task status should include
 timestamps for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Work on HADOOP-263 started by Sanjay Dahiya.

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.5.0
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug  3 12:44:50 2006
Return-Path: 
 <hadoop-dev-return-2923-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73300 invoked from network); 3 Aug 2006 12:44:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 12:44:50 -0000
Received: (qmail 81001 invoked by uid 500); 3 Aug 2006 12:44:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80842 invoked by uid 500); 3 Aug 2006 12:44:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80833 invoked by uid 99); 3 Aug 2006 12:44:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 05:44:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 05:44:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D2D9041000D
	for <hadoop-dev@lucene.apache.org>; Thu,  3 Aug 2006 12:42:14 +0000 (GMT)
Message-ID: <4460527.1154608934860.JavaMail.jira@brutus>
Date: Thu, 3 Aug 2006 05:42:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-415) DFSNodesStatus() should sort data
 nodes.
In-Reply-To: <11728384.1154482755948.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-415?page=all ]

Devaraj Das updated HADOOP-415:
-------------------------------

    Attachment: refactor_nodestatus.patch

Agree with this. Attached is the patch. In dfshealth.jsp, I also changed the DatanodeInfo references to DatanodeDescriptor to reflect the current code.

> DFSNodesStatus() should sort data nodes.
> ----------------------------------------
>
>                 Key: HADOOP-415
>                 URL: http://issues.apache.org/jira/browse/HADOOP-415
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: refactor_nodestatus.patch
>
>
> HADOOP-392 introduced a new TreeMap member (datanodeMapByName) in the name node.
> It is used solely for reporting the data nodes in the UI sorted by their names.
> I think it is quite inefficient both time and space-wise to support an excessive
> data structure just for that.
> Suppose the UI will also require sorting by last heartbeat and/or by the available space....
> I think DFSNodesStatus() should just sort the original datanodeMap before returning the list.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug  3 17:58:52 2006
Return-Path: 
 <hadoop-dev-return-2924-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21813 invoked from network); 3 Aug 2006 17:58:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 17:58:52 -0000
Received: (qmail 35240 invoked by uid 500); 3 Aug 2006 17:58:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35220 invoked by uid 500); 3 Aug 2006 17:58:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35211 invoked by uid 99); 3 Aug 2006 17:58:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 10:58:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 10:58:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 187BD410021
	for <hadoop-dev@lucene.apache.org>; Thu,  3 Aug 2006 17:56:16 +0000 (GMT)
Message-ID: <17083976.1154627776097.JavaMail.jira@brutus>
Date: Thu, 3 Aug 2006 10:56:16 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-71) The SequenceFileRecordReader uses the
 default FileSystem rather than the supplied one
In-Reply-To: <539883049.1141863519345.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-71?page=all ]

Owen O'Malley updated HADOOP-71:
--------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.6.0

> The SequenceFileRecordReader uses the default FileSystem rather than the supplied one
> -------------------------------------------------------------------------------------
>
>                 Key: HADOOP-71
>                 URL: http://issues.apache.org/jira/browse/HADOOP-71
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: explicit-fs.patch
>
>
> The mapred.TestSequenceFileInputFormat test was failing when run with a conf directory that pointed to a dfs cluster. The reason was that SequenceFileRecordReader was using the default FileSystem from the config, while the test program was assuming the "local" file system was being used.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug  3 18:00:50 2006
Return-Path: 
 <hadoop-dev-return-2925-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22625 invoked from network); 3 Aug 2006 18:00:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 18:00:50 -0000
Received: (qmail 37586 invoked by uid 500); 3 Aug 2006 18:00:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37570 invoked by uid 500); 3 Aug 2006 18:00:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37560 invoked by uid 99); 3 Aug 2006 18:00:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 11:00:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 11:00:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BDF4B41000F
	for <hadoop-dev@lucene.apache.org>; Thu,  3 Aug 2006 17:58:14 +0000 (GMT)
Message-ID: <7733804.1154627894775.JavaMail.jira@brutus>
Date: Thu, 3 Aug 2006 10:58:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-71) The SequenceFileRecordReader uses the
 default FileSystem rather than the supplied one
In-Reply-To: <539883049.1141863519345.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-71?page=all ]

Owen O'Malley updated HADOOP-71:
--------------------------------

    Status: In Progress  (was: Patch Available)

> The SequenceFileRecordReader uses the default FileSystem rather than the supplied one
> -------------------------------------------------------------------------------------
>
>                 Key: HADOOP-71
>                 URL: http://issues.apache.org/jira/browse/HADOOP-71
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: explicit-fs.patch
>
>
> The mapred.TestSequenceFileInputFormat test was failing when run with a conf directory that pointed to a dfs cluster. The reason was that SequenceFileRecordReader was using the default FileSystem from the config, while the test program was assuming the "local" file system was being used.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug  3 19:12:51 2006
Return-Path: 
 <hadoop-dev-return-2926-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43937 invoked from network); 3 Aug 2006 19:12:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 19:12:51 -0000
Received: (qmail 98572 invoked by uid 500); 3 Aug 2006 19:12:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98409 invoked by uid 500); 3 Aug 2006 19:12:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98400 invoked by uid 99); 3 Aug 2006 19:12:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 12:12:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 12:12:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 85DDC41001E
	for <hadoop-dev@lucene.apache.org>; Thu,  3 Aug 2006 19:10:15 +0000 (GMT)
Message-ID: <8230673.1154632215545.JavaMail.jira@brutus>
Date: Thu, 3 Aug 2006 12:10:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-400) the job tracker re-runs failed tasks
 on the same node
In-Reply-To: <33242031.1154118913944.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-400?page=all ]

Owen O'Malley updated HADOOP-400:
---------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.6.0
       Attachment: task-schedule.patch

This patch does:
  1. It limits each TaskTracker to running
        min(tasksPerTracker, ceil(tasksLeftToRun/numTaskTrackers))
      this will prevent the problem that we saw where the last 2 reduces scheduled were put on the same node rather than different empty ones
  2. It refactors obtainNewMapTask and obtainNewReduceTask to call a common utility function. It also replaces the two parallel loops with one.
  3. Only allowed tasks that have failed on this task tracker to run if we have exhausted the cluster.

> the job tracker re-runs failed tasks on the same node
> -----------------------------------------------------
>
>                 Key: HADOOP-400
>                 URL: http://issues.apache.org/jira/browse/HADOOP-400
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: task-schedule.patch
>
>
> The job tracker tries not to run tasks that have previously failed on a node on that node again, but it doesn't strictly prevent it.
> I propose to change the rule so that when pollForNewTask is called by a TaskTracker, the JobTracker will only assign it a task that has failed on that TaskTracker, if and only if it has already failed on the entire cluster. Thus, for "normal" clusters with more than 4 TaskTrackers, you will be guaranteed that it will run on 4 different TaskTrackers. For small clusters, it will run on every TaskTracker in the cluster at least once.
> Does that sound reasonable to everyone?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug  3 20:28:50 2006
Return-Path: 
 <hadoop-dev-return-2927-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81262 invoked from network); 3 Aug 2006 20:28:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 20:28:50 -0000
Received: (qmail 35043 invoked by uid 500); 3 Aug 2006 20:28:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34876 invoked by uid 500); 3 Aug 2006 20:28:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34867 invoked by uid 99); 3 Aug 2006 20:28:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 13:28:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 13:28:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E561241001E
	for <hadoop-dev@lucene.apache.org>; Thu,  3 Aug 2006 20:26:13 +0000 (GMT)
Message-ID: <13847288.1154636773936.JavaMail.jira@brutus>
Date: Thu, 3 Aug 2006 13:26:13 -0700 (PDT)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-423) file paths are not normalized
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

file paths are not normalized
-----------------------------

                 Key: HADOOP-423
                 URL: http://issues.apache.org/jira/browse/HADOOP-423
             Project: Hadoop
          Issue Type: Bug
          Components: fs
    Affects Versions: 0.4.0
            Reporter: Christian Kunz


Paths containing  '.' or '..' are not normalized -- the corresponding directories actually seem to be created. This is inconsistent and unexpected behavior, and  is particularly painful when running from a working directory, using relative paths that start with ...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug  3 20:53:51 2006
Return-Path: 
 <hadoop-dev-return-2928-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9925 invoked from network); 3 Aug 2006 20:53:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 20:53:51 -0000
Received: (qmail 81155 invoked by uid 500); 3 Aug 2006 20:53:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81125 invoked by uid 500); 3 Aug 2006 20:53:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81116 invoked by uid 99); 3 Aug 2006 20:53:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 13:53:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 13:53:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2835C410022
	for <hadoop-dev@lucene.apache.org>; Thu,  3 Aug 2006 20:51:15 +0000 (GMT)
Message-ID: <15303483.1154638275162.JavaMail.jira@brutus>
Date: Thu, 3 Aug 2006 13:51:15 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-226) DFSShell problems. Incorrect block
 replication detection in fsck.
In-Reply-To: <24430703.1147903865906.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-226?page=all ]

Bryan Pendleton updated HADOOP-226:
-----------------------------------

               Status: Patch Available  (was: Open)
           Attachment: fsck.replication.fix.txt
    Affects Version/s: 0.4.0
                           (was: 0.2.0)

Here's a fix to make "fsck" count over/under replicated blocks according to the per-file value, rather than the global one.

> DFSShell problems. Incorrect block replication detection in fsck.
> -----------------------------------------------------------------
>
>                 Key: HADOOP-226
>                 URL: http://issues.apache.org/jira/browse/HADOOP-226
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>         Environment: All
>            Reporter: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: fsck.replication.fix.txt
>
>
> 1. We need to adjust Dfsck to the new per-file replication feature.
> fsck checks block replication based on the configured global replication parameter.
> Which is now just the default. The actual file replication is returned in DFSFileInfo.
> So at least the reporting is screwed by that, although I didn't check what will happen with
> other options -move and -delete.
> 2. fsck throws NullPointerException if you type
> bin/hadoop fsck -files /doc
> instead of
> bin/hadoop fsck /doc -files
> 3. Unfortunately, there are several commands that throw different kinds of Exceptions
> rather than at least printing the usage info, when some of its arguments are missing or
> misplaced. ArrayIndexOutOfBoundsException is one them. Try
> bin/hadoop dfs -mv
> bin/hadoop dfs -cp
> bin/hadoop dfs -rm
> 4. In general the shell is growing and getting more sophisticated.
> Should we work out a general convention on how the parameters should be structured, named,
> short/long version of the keywords, help, etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug  4 00:25:51 2006
Return-Path: 
 <hadoop-dev-return-2929-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46841 invoked from network); 4 Aug 2006 00:25:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 00:25:51 -0000
Received: (qmail 51653 invoked by uid 500); 4 Aug 2006 00:25:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51491 invoked by uid 500); 4 Aug 2006 00:25:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51482 invoked by uid 99); 4 Aug 2006 00:25:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 17:25:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 17:25:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BE4FA41001E
	for <hadoop-dev@lucene.apache.org>; Fri,  4 Aug 2006 00:23:14 +0000 (GMT)
Message-ID: <24064942.1154650994776.JavaMail.jira@brutus>
Date: Thu, 3 Aug 2006 17:23:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-415) DFSNodesStatus() should sort data
 nodes.
In-Reply-To: <11728384.1154482755948.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-415?page=comments#action_12425644 ] 
            
Konstantin Shvachko commented on HADOOP-415:
--------------------------------------------

DatanodeDescriptor is supposed to be used only be the namenode internally.
The class for external use is DatanodeInfo. See HADOOP-321.
That is why DatanodeInfo is public and DatanodeDescriptor is not.
So using DatanodeInfo in dfshealth.jsp was actually right.
I should add some comments in JavaDoc on that.

> DFSNodesStatus() should sort data nodes.
> ----------------------------------------
>
>                 Key: HADOOP-415
>                 URL: http://issues.apache.org/jira/browse/HADOOP-415
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: refactor_nodestatus.patch
>
>
> HADOOP-392 introduced a new TreeMap member (datanodeMapByName) in the name node.
> It is used solely for reporting the data nodes in the UI sorted by their names.
> I think it is quite inefficient both time and space-wise to support an excessive
> data structure just for that.
> Suppose the UI will also require sorting by last heartbeat and/or by the available space....
> I think DFSNodesStatus() should just sort the original datanodeMap before returning the list.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug  4 12:38:52 2006
Return-Path: 
 <hadoop-dev-return-2930-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45968 invoked from network); 4 Aug 2006 12:38:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 12:38:52 -0000
Received: (qmail 75210 invoked by uid 500); 4 Aug 2006 12:38:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75188 invoked by uid 500); 4 Aug 2006 12:38:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75176 invoked by uid 99); 4 Aug 2006 12:38:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 05:38:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 05:38:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BD8A941000F
	for <hadoop-dev@lucene.apache.org>; Fri,  4 Aug 2006 12:36:14 +0000 (GMT)
Message-ID: <30591086.1154694974773.JavaMail.jira@brutus>
Date: Fri, 4 Aug 2006 05:36:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-415) DFSNodesStatus() should sort data
 nodes.
In-Reply-To: <11728384.1154482755948.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-415?page=all ]

Devaraj Das updated HADOOP-415:
-------------------------------

    Attachment: refactor_nodestatus.patch

Well, that should be okay since the jsp file actually belongs to the dfs package. But in any case, I have attached a new patch with the DatanodeDescriptor changes reverted.

> DFSNodesStatus() should sort data nodes.
> ----------------------------------------
>
>                 Key: HADOOP-415
>                 URL: http://issues.apache.org/jira/browse/HADOOP-415
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: refactor_nodestatus.patch, refactor_nodestatus.patch
>
>
> HADOOP-392 introduced a new TreeMap member (datanodeMapByName) in the name node.
> It is used solely for reporting the data nodes in the UI sorted by their names.
> I think it is quite inefficient both time and space-wise to support an excessive
> data structure just for that.
> Suppose the UI will also require sorting by last heartbeat and/or by the available space....
> I think DFSNodesStatus() should just sort the original datanodeMap before returning the list.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug  4 15:09:57 2006
Return-Path: 
 <hadoop-dev-return-2931-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15171 invoked from network); 4 Aug 2006 15:09:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 15:09:57 -0000
Received: (qmail 55235 invoked by uid 500); 4 Aug 2006 15:09:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55211 invoked by uid 500); 4 Aug 2006 15:09:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55195 invoked by uid 99); 4 Aug 2006 15:09:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 08:09:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 08:09:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E754B410025
	for <hadoop-dev@lucene.apache.org>; Fri,  4 Aug 2006 15:07:14 +0000 (GMT)
Message-ID: <16027160.1154704034944.JavaMail.jira@brutus>
Date: Fri, 4 Aug 2006 08:07:14 -0700 (PDT)
From: =?utf-8?Q?Fr=C3=A9d=C3=A9ric_Bertin_=28JIRA=29?= <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-424) mapreduce jobs fail when no split is
 returned via inputFormat.getSplits
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

mapreduce jobs fail when no split is returned via inputFormat.getSplits
-----------------------------------------------------------------------

                 Key: HADOOP-424
                 URL: http://issues.apache.org/jira/browse/HADOOP-424
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.4.0
            Reporter: Fr=C3=A9d=C3=A9ric Bertin


I'm using a MapReduce job to process some data logged and timestamped into =
files.
When the job runs, it does not process the whole data, but filters only the=
 data that has been logged since the last job run.

However, when no new data has been logged, the job fails because the getSpl=
its method of InputFormat returns no split. Thus the number of map tasks is=
 0. This is not intercepted, and the job fails at reduce step because it se=
ems it does not find any data to process:

java.io.FileNotFoundException: /local/home/hadoop/var/mapred/local/task_003=
0_r_000000_3/all.2 at org.apache.hadoop.fs.LocalFileSystem.openRaw(LocalFil=
eSystem.java:121) at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSData=
InputStream.java:47) at org.apache.hadoop.fs.FSDataInputStream.(FSDataInput=
Stream.java:221) at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:15=
0) at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:259) at o=
rg.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:253) at org.apac=
he.hadoop.mapred.ReduceTask.run(ReduceTask.java:241) at org.apache.hadoop.m=
apred.TaskTracker$Child.main(TaskTracker.java:1013)

What should be Hadoop's behaviour in such a case?

IMHO, the job should be considered as successful. Indeed, this is not a job=
 failure, but just a lack of input data. WDYT?



--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Fri Aug  4 15:20:52 2006
Return-Path: 
 <hadoop-dev-return-2932-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19615 invoked from network); 4 Aug 2006 15:20:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 15:20:52 -0000
Received: (qmail 81707 invoked by uid 500); 4 Aug 2006 15:20:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81688 invoked by uid 500); 4 Aug 2006 15:20:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81679 invoked by uid 99); 4 Aug 2006 15:20:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 08:20:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 08:20:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B7E287142C9
	for <hadoop-dev@lucene.apache.org>; Fri,  4 Aug 2006 15:18:14 +0000 (GMT)
Message-ID: <12165279.1154704694750.JavaMail.jira@brutus>
Date: Fri, 4 Aug 2006 08:18:14 -0700 (PDT)
From: "Uros Gruber (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-307) Many small jobs benchmark for
 MapReduce
In-Reply-To: <13009062.1150636529837.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-307?page=comments#action_12425771 ] 
            
Uros Gruber commented on HADOOP-307:
------------------------------------

I want to try this on Windows with cygwin and found some problems.

1. $JAVA_HOME in run.sh needs to be "$JAVA_HOME" because on windows java is installed in Program Files and there is problem with spaces
2. also there is some /export/crawlspace/kryptonite/java/jdk/lib/tools.jar in classpath which I believe is not needed.

also with this I could not get script working with error

java.lang.NoClassDefFoundError: org/apache/hadoop/benchmarks/mapred/MultiJobRunner

If I have only ./classes in my classpath there is problem with loger. I don't know If there is any problem with classpath definition in windows.


> Many small jobs benchmark for MapReduce
> ---------------------------------------
>
>                 Key: HADOOP-307
>                 URL: http://issues.apache.org/jira/browse/HADOOP-307
>             Project: Hadoop
>          Issue Type: Task
>          Components: mapred
>            Reporter: Sanjay Dahiya
>            Priority: Minor
>             Fix For: 0.5.0
>
>         Attachments: patch.txt, patch.txt
>
>
> A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug  4 16:23:53 2006
Return-Path: 
 <hadoop-dev-return-2933-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43658 invoked from network); 4 Aug 2006 16:23:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 16:23:53 -0000
Received: (qmail 7476 invoked by uid 500); 4 Aug 2006 16:23:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7398 invoked by uid 500); 4 Aug 2006 16:23:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7384 invoked by uid 99); 4 Aug 2006 16:23:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 09:23:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 09:23:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 407F4410025
	for <hadoop-dev@lucene.apache.org>; Fri,  4 Aug 2006 16:21:15 +0000 (GMT)
Message-ID: <26036472.1154708475261.JavaMail.jira@brutus>
Date: Fri, 4 Aug 2006 09:21:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-425) a python word count example that runs
 under jython
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

a python word count example that runs under jython
--------------------------------------------------

                 Key: HADOOP-425
                 URL: http://issues.apache.org/jira/browse/HADOOP-425
             Project: Hadoop
          Issue Type: New Feature
          Components: mapred
    Affects Versions: 0.4.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.6.0


I translated the word count example into python and convert it into a jar using jython. It provides a nice example of writing Hadoop map/reduce programs in python.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug  4 16:26:52 2006
Return-Path: 
 <hadoop-dev-return-2934-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44542 invoked from network); 4 Aug 2006 16:26:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 16:26:52 -0000
Received: (qmail 14783 invoked by uid 500); 4 Aug 2006 16:26:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14620 invoked by uid 500); 4 Aug 2006 16:26:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14611 invoked by uid 99); 4 Aug 2006 16:26:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 09:26:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 09:26:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C0858410023
	for <hadoop-dev@lucene.apache.org>; Fri,  4 Aug 2006 16:24:14 +0000 (GMT)
Message-ID: <21939731.1154708654786.JavaMail.jira@brutus>
Date: Fri, 4 Aug 2006 09:24:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-425) a python word count example that runs
 under jython
In-Reply-To: <26036472.1154708475261.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-425?page=all ]

Owen O'Malley updated HADOOP-425:
---------------------------------

    Attachment: python-wc.patch

> a python word count example that runs under jython
> --------------------------------------------------
>
>                 Key: HADOOP-425
>                 URL: http://issues.apache.org/jira/browse/HADOOP-425
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: python-wc.patch
>
>
> I translated the word count example into python and convert it into a jar using jython. It provides a nice example of writing Hadoop map/reduce programs in python.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug  4 16:28:52 2006
Return-Path: 
 <hadoop-dev-return-2935-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44862 invoked from network); 4 Aug 2006 16:28:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 16:28:52 -0000
Received: (qmail 16901 invoked by uid 500); 4 Aug 2006 16:28:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16740 invoked by uid 500); 4 Aug 2006 16:28:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16729 invoked by uid 99); 4 Aug 2006 16:28:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 09:28:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 09:28:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C9E9E410022
	for <hadoop-dev@lucene.apache.org>; Fri,  4 Aug 2006 16:26:14 +0000 (GMT)
Message-ID: <21826501.1154708774824.JavaMail.jira@brutus>
Date: Fri, 4 Aug 2006 09:26:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-425) a python word count example that runs
 under jython
In-Reply-To: <26036472.1154708475261.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-425?page=all ]

Owen O'Malley updated HADOOP-425:
---------------------------------

    Status: Patch Available  (was: Open)

> a python word count example that runs under jython
> --------------------------------------------------
>
>                 Key: HADOOP-425
>                 URL: http://issues.apache.org/jira/browse/HADOOP-425
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: python-wc.patch
>
>
> I translated the word count example into python and convert it into a jar using jython. It provides a nice example of writing Hadoop map/reduce programs in python.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug  4 17:19:19 2006
Return-Path: 
 <hadoop-dev-return-2936-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67976 invoked from network); 4 Aug 2006 17:19:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 17:19:19 -0000
Received: (qmail 8924 invoked by uid 500); 4 Aug 2006 17:19:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8756 invoked by uid 500); 4 Aug 2006 17:19:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8746 invoked by uid 99); 4 Aug 2006 17:19:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 10:19:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.192.81] (HELO rwcrmhc11.comcast.net) (204.127.192.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 10:19:17 -0700
Received: from [192.168.168.11]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc11) with ESMTP
          id <20060804171856m1100l62nme>; Fri, 4 Aug 2006 17:18:56 +0000
Message-ID: <44D38180.6030704@apache.org>
Date: Fri, 04 Aug 2006 10:18:56 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Jira workflow: "Patch Available" status added
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I changed the workflow in Jira yesterday, adding a "Patch Available" 
status for issues.  Folks should use this when they believe a patch is 
ready to be reviewed and committed.  The list of issues in this state 
(http://tinyurl.com/lazcw) is the queue of patches for committers to 
review.  So, if you want your patch to get committed, please put it in 
this state.  If a committer judges that an issue in this state is not 
actually ready for commit, then he-or-she should re-open the issue.

Doug

From MAILER-DAEMON Fri Aug  4 17:49:52 2006
Return-Path: 
 <hadoop-dev-return-2937-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77485 invoked from network); 4 Aug 2006 17:49:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 17:49:52 -0000
Received: (qmail 64100 invoked by uid 500); 4 Aug 2006 17:49:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64081 invoked by uid 500); 4 Aug 2006 17:49:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64072 invoked by uid 99); 4 Aug 2006 17:49:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 10:49:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 10:49:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BD742410022
	for <hadoop-dev@lucene.apache.org>; Fri,  4 Aug 2006 17:47:14 +0000 (GMT)
Message-ID: <22732780.1154713634773.JavaMail.jira@brutus>
Date: Fri, 4 Aug 2006 10:47:14 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-425) a python word count example that
 runs under jython
In-Reply-To: <26036472.1154708475261.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-425?page=comments#action_12425799 ] 
            
Milind Bhandarkar commented on HADOOP-425:
------------------------------------------

+1 on this !!!!!

> a python word count example that runs under jython
> --------------------------------------------------
>
>                 Key: HADOOP-425
>                 URL: http://issues.apache.org/jira/browse/HADOOP-425
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: python-wc.patch
>
>
> I translated the word count example into python and convert it into a jar using jython. It provides a nice example of writing Hadoop map/reduce programs in python.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug  4 19:00:52 2006
Return-Path: 
 <hadoop-dev-return-2938-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 174 invoked from network); 4 Aug 2006 19:00:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 19:00:52 -0000
Received: (qmail 71409 invoked by uid 500); 4 Aug 2006 19:00:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71250 invoked by uid 500); 4 Aug 2006 19:00:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71241 invoked by uid 99); 4 Aug 2006 19:00:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 12:00:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 12:00:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D117F71429F
	for <hadoop-dev@lucene.apache.org>; Fri,  4 Aug 2006 18:58:14 +0000 (GMT)
Message-ID: <16285693.1154717894853.JavaMail.jira@brutus>
Date: Fri, 4 Aug 2006 11:58:14 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-373) Some calls to mkdirs do not check
 return value
In-Reply-To: <19322325.1153351633892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-373?page=all ]

Wendy Chien reassigned HADOOP-373:
----------------------------------

    Assignee: Wendy Chien

> Some calls to mkdirs do not check return value
> ----------------------------------------------
>
>                 Key: HADOOP-373
>                 URL: http://issues.apache.org/jira/browse/HADOOP-373
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>
> Some calls to mkdirs do not check if mkdirs failed.  
> Arun noticed this while looking at HADOOP-281.  Since this issue is actually a separate issue from the mkdirs implementation issue of HADOOP-281, I created a new bug for it.   

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug  4 19:00:54 2006
Return-Path: 
 <hadoop-dev-return-2939-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 214 invoked from network); 4 Aug 2006 19:00:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 19:00:54 -0000
Received: (qmail 71462 invoked by uid 500); 4 Aug 2006 19:00:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71436 invoked by uid 500); 4 Aug 2006 19:00:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71427 invoked by uid 99); 4 Aug 2006 19:00:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 12:00:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 12:00:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 524527142B7
	for <hadoop-dev@lucene.apache.org>; Fri,  4 Aug 2006 18:58:16 +0000 (GMT)
Message-ID: <11803429.1154717896334.JavaMail.jira@brutus>
Date: Fri, 4 Aug 2006 11:58:16 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-324) "IOException: No space left on
 device" is handled incorrectly
In-Reply-To: <18409093.1151369969863.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-324?page=all ]

Wendy Chien reassigned HADOOP-324:
----------------------------------

    Assignee: Wendy Chien

> "IOException: No space left on device" is handled incorrectly
> -------------------------------------------------------------
>
>                 Key: HADOOP-324
>                 URL: http://issues.apache.org/jira/browse/HADOOP-324
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Wendy Chien
>
> When a data node disk is almost full the name node still assigns blocks to the data node.
> By the time the data node actually tries to write that data to disk the disk may become full.
> Current implementation forces the data node to shutdown after that.
> The expected behavior is to report the block write failure and continue.
> The Exception looks as follows:
> java.io.IOException: No space left on device
> at java.io.FileOutputStream.writeBytes(Native Method)
> at java.io.FileOutputStream.write(FileOutputStream.java:260)
> at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
> at java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)
> at java.io.DataOutputStream.write(DataOutputStream.java:90)
> at org.apache.hadoop.dfs.DataNode$DataXceiver.writeBlock(DataNode.java:623)
> at org.apache.hadoop.dfs.DataNode$DataXceiver.run(DataNode.java:410)
> at java.lang.Thread.run(Thread.java:595)
> 2006-06-26 08:26:04,751 INFO org.apache.hadoop.dfs.DataNode: Finishing DataNode in: /tmp/hadoop/dfs/data/data

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug  4 19:02:56 2006
Return-Path: 
 <hadoop-dev-return-2940-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 651 invoked from network); 4 Aug 2006 19:02:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 19:02:56 -0000
Received: (qmail 73842 invoked by uid 500); 4 Aug 2006 19:02:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73807 invoked by uid 500); 4 Aug 2006 19:02:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73798 invoked by uid 99); 4 Aug 2006 19:02:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 12:02:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 12:02:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1BE507142C7
	for <hadoop-dev@lucene.apache.org>; Fri,  4 Aug 2006 19:00:17 +0000 (GMT)
Message-ID: <24020552.1154718017111.JavaMail.jira@brutus>
Date: Fri, 4 Aug 2006 12:00:17 -0700 (PDT)
From: "Marco Nicosia (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-401) JobTracker crashes Sun JVM
In-Reply-To: <19999404.1154127860513.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-401?page=comments#action_12425817 ] 
            
Marco Nicosia commented on HADOOP-401:
--------------------------------------

And again, this time in VMThread!

Exception in thread "Server handler 3 on 50020" java.lang.IncompatibleClassChangeError
        at java.util.HashSet.iterator(HashSet.java:154)
        at sun.nio.ch.SelectorImpl.processDeregisterQueue(SelectorImpl.java:127)
        at sun.nio.ch.PollSelectorImpl.doSelect(PollSelectorImpl.java:53)
        at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)
        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)
        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:84)
        at org.mortbay.http.nio.SocketChannelOutputStream.flushBuffer(SocketChannelOutputStream.java:149)
        at org.mortbay.http.nio.SocketChannelOutputStream.write(SocketChannelOutputStream.java:103)
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
        at java.io.DataOutputStream.flush(DataOutputStream.java:106)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:487)
#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0xf76e0b48, pid=921, tid=1890360240
#
# Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# V  [libjvm.so+0x205b48]
#
# An error report file with more information is saved as hs_err_pid921.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

And the hs_err_pid921.log file:

#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0xf76e0b48, pid=921, tid=1890360240
#
# Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# V  [libjvm.so+0x205b48]
#

---------------  T H R E A D  ---------------

Current thread (0x081111b8):  VMThread [id=931]

siginfo:si_signo=11, si_errno=0, si_code=1, si_addr=0x00330037
Registers:
EAX=0x00330037, EBX=0xf7a867f0, ECX=0x00000000, EDX=0x0033003f
ESP=0x70ac8eb0, EBP=0x70ac8ec8, ESI=0x70ac8ee0, EDI=0x70ac8ef0
EIP=0xf76e0b48, CR2=0x00330037, EFLAGS=0x00010246

Top of Stack: (sp=0x70ac8eb0)
0x70ac8eb0:   00000000 70ac8ee8 00000000 f7a867f0
0x70ac8ec0:   70ac8ef0 70ac8ee0 70ac9018 f79a001c
0x70ac8ed0:   70ac8ee0 70ac8ef0 70ac8efc 00000000
0x70ac8ee0:   79880008 00000000 00330037 70ac8f48
0x70ac8ef0:   79880008 00000000 00330037 6f0d9040
0x70ac8f00:   6f0d9038 6f0d9084 6f0d9088 6f0d9044
0x70ac8f10:   6f0d903c 6f0d9080 70ac8f88 f78e6c04
0x70ac8f20:   70ac8f40 6f0d8fac 6f0d8fb0 6f0d8fb4 

Instructions: (pc=0xf76e0b48)
0xf76e0b38:   00 00 00 8b 45 f0 85 c0 74 15 8b 47 08 8b 50 fc
0xf76e0b48:   8b 38 8b 40 04 89 46 04 89 16 89 7e 08 eb b4 8b 

Stack: [0x70a49000,0x70aca000),  sp=0x70ac8eb0,  free space=511k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x205b48]
V  [libjvm.so+0x4c501c]
V  [libjvm.so+0x4c7629]
V  [libjvm.so+0x4a467f]
V  [libjvm.so+0x4870b7]
V  [libjvm.so+0x504e8b]
V  [libjvm.so+0x504850]
V  [libjvm.so+0x424338]
C  [libpthread.so.0+0x5341]


---------------  P R O C E S S  ---------------

[... most threads in _thread_blocked state]

Other Threads:
=>0x081111b8 VMThread [id=931]
  0x08123170 WatcherThread [id=939]

VM state:at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])
[0x0805d368/0x0805d390] Safepoint_lock - owner thread: 0x081111b8
[0x0805d3e8/0x0805d410] Threads_lock - owner thread: 0x081111b8

Heap
 PSYoungGen      total 196288K, used 71209K [0xe4640000, 0xf2460000, 0xf2470000)
  eden space 181696K, 35% used [0xe4640000,0xe85be468,0xef7b0000)
  from space 14592K, 42% used [0xef7b0000,0xefdbc000,0xf05f0000)
  to   space 14208K, 0% used [0xf1680000,0xf1680000,0xf2460000)
 PSOldGen        total 359232K, used 347217K [0x75470000, 0x8b340000, 0xe4640000)
  object space 359232K, 96% used [0x75470000,0x8a784528,0x8b340000)
 PSPermGen       total 16384K, used 8009K [0x71470000, 0x72470000, 0x75470000)
  object space 16384K, 48% used [0x71470000,0x71c42470,0x72470000)

[...]

VM Arguments:
jvm_args: -Xmx2000m -Dhadoop.log.dir=/e/c/k/hadoop/current/../run2/log -Dhadoop.log.file=hadoop-crawler-jobtracker-kry
1190.log -Dhadoop.home.dir=/e/c/k/hadoop/current -Dhadoop.id.str=crawler -Dhadoop.root.logger=INFO,DRFA
java_command: org.apache.hadoop.mapred.JobTracker
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=/e/c/k/java/jdk
PATH=/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin
LD_LIBRARY_PATH=/e/c/k/java/jdk1.5.0_06/jre/lib/i386/server:/e/c/k/java/jdk1.5.0_06/jre/lib/i386:/e/c/k/java/jdk1.5.0_06/jre/../lib/i386
SHELL=/bin/tcsh
HOSTTYPE=x86_64-linux
OSTYPE=linux
MACHTYPE=x86_64


> JobTracker crashes Sun JVM
> --------------------------
>
>                 Key: HADOOP-401
>                 URL: http://issues.apache.org/jira/browse/HADOOP-401
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: OS:Red Hat Enterprise Linux AS release 4 (Nahant Update 2)
> uname:Linux 2.6.9-22.12.y1-64 #5 SMP Fri Nov 4 13:39:56 PST 2005 x86_64
> libc:glibc 2.3.4 NPTL 2.3.4 
> rlimit: STACK 10240k, CORE 0k, NPROC 32768, NOFILE 32768, AS infinity
> load average:0.20 0.21 0.18
> CPU:total 4 family 47, cmov, cx8, fxsr, mmx, sse, sse2, ht
> Memory: 4k page, physical 988k(220k free), swap 3070k(3070k free)
> vm_info: Java HotSpot(TM) Server VM (1.5.0_06-b05) for linux-x86, built on Nov 10 2005 10:56:33 by java_re with gcc 3.2.1-7a (J2SE release)
>            Reporter: Marco Nicosia
>
> From our jobtacker's .out file:
> #
> # An unexpected error has been detected by HotSpot Virtual Machine:
> #
> #  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
> #
> # Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
> # Problematic frame:
> # J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> #
> # An error report file with more information is saved as hs_err_pid24028.log
> #
> # If you would like to submit a bug report, please visit:
> #   http://java.sun.com/webapps/bugreport/crash.jsp
> #
> And the relevant parts of that hs_err_pid24028.log file:
> #
> # An unexpected error has been detected by HotSpot Virtual Machine:
> #
> #  SIGSEGV (0xb) at pc=0xf27bf825, pid=24028, tid=1856498608
> #
> # Java VM: Java HotSpot(TM) Server VM (1.5.0_06-b05 mixed mode)
> # Problematic frame:
> # J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> #
> ---------------  T H R E A D  ---------------
> Current thread (0x086e0088):  JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]
> siginfo:si_signo=11, si_errno=0, si_code=2, si_addr=0x00022008
> Registers:
> EAX=0x00022000, EBX=0x75a0fac8, ECX=0x00000000, EDX=0x75b31258
> ESP=0x6ea7ded0, EBP=0x6ea7df3c, ESI=0x71b6def5, EDI=0x00000402
> EIP=0xf27bf825, CR2=0x00022008, EFLAGS=0x00010217
> Top of Stack: (sp=0x6ea7ded0)
> 0x6ea7ded0:   71549561 6ea7def0 00002000 00000400
> 0x6ea7dee0:   339dc50d 086e0088 6ea7df3c 6ea7df50
> 0x6ea7def0:   00000000 71b6def5 7154d7c9 f2595a80
> 0x6ea7df00:   6ea7df3c 6ea7df50 7154d7d8 6ea7df14
> 0x6ea7df10:   6ea7df3c f2501a14 00002000 e57bd350
> 0x6ea7df20:   6ea7df20 71b6def5 6ea7df50 71b71798
> 0x6ea7df30:   00000000 71b6df80 6ea7df44 6ea7df78
> 0x6ea7df40:   f2501aeb 719431e8 00002000 e57bd2d0 
> Instructions: (pc=0xf27bf825)
> 0xf27bf815:   8b 98 a4 00 00 00 8b 4b 20 89 4c 24 20 8b 41 08
> 0xf27bf825:   8b 70 08 8b de 4b 8b 4c 24 10 23 cb 89 4c 24 10 
> Stack: [0x6e9fe000,0x6ea7f000),  sp=0x6ea7ded0,  free space=511k
> Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
> J  org.mortbay.util.ByteArrayPool.getByteArray(I)[B
> j  org.mortbay.http.HttpInputStream.<init>(Ljava/io/InputStream;I)V+15
> j  org.mortbay.http.HttpConnection.<init>(Lorg/mortbay/http/HttpListener;Ljava/net/InetAddress;Ljava/io/InputStream;Ljava/io/OutputStream;Ljava/lang/Object;)V+97
> j  org.mortbay.http.SocketListener.createConnection(Ljava/net/Socket;)Lorg/mortbay/http/HttpConnection;+18
> j  org.mortbay.http.SocketListener.handleConnection(Ljava/net/Socket;)V+2
> j  org.mortbay.util.ThreadedServer.handle(Ljava/lang/Object;)V+19
> ---------------  P R O C E S S  ---------------
> Java Threads: ( => current thread )
>   0x086bb8a0 JavaThread "Thread-0" [_thread_blocked, id=24117]
>   0x0859dd38 JavaThread "Thread-20" [_thread_blocked, id=24116]
>   0x0859a8a8 JavaThread "Thread-19" [_thread_blocked, id=24115]
>   0x0859a1f8 JavaThread "Thread-18" [_thread_blocked, id=24114]
>   0x085d54d8 JavaThread "SocketListener0-1" [_thread_in_native, id=24113]
> =>0x086e0088 JavaThread "SocketListener0-0" [_thread_in_Java, id=24112]
> [...]
> Heap
>  PSYoungGen      total 21248K, used 19699K [0xe4640000, 0xe6a00000, 0xf2470000)
>   eden space 19584K, 92% used [0xe4640000,0xe57def08,0xe5960000)
>   from space 1664K, 99% used [0xe5960000,0xe5afe020,0xe5b00000)
>   to   space 8384K, 0% used [0xe61d0000,0xe61d0000,0xe6a00000)
>  PSOldGen        total 390080K, used 370693K [0x75470000, 0x8d160000, 0xe4640000)
>   object space 390080K, 95% used [0x75470000,0x8be716e0,0x8d160000)
>  PSPermGen       total 16384K, used 8080K [0x71470000, 0x72470000, 0x75470000)
>   object space 16384K, 49% used [0x71470000,0x71c54298,0x72470000)
> [...]
> VM Arguments:
> jvm_args: -Xmx2000m -Dhadoop.log.dir=/export//current/../run2/log -Dhadoop.log.file=hadoop-jobtracker.log -Dhadoop.home.dir=/export/current -Dhadoop.id.str=crawler -Dhadoop.root.logger=INFO,DRFA
> java_command: org.apache.hadoop.mapred.JobTracker
> Launcher Type: SUN_STANDARD
> Environment Variables:
> JAVA_HOME=/export//java/jdk
> PATH=/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/export//current/bin
> LD_LIBRARY_PATH=/export/java/jdk1.5.0_06/jre/lib/i386/server:/export//java/jdk1.5.0_06/jre/lib/i386:/export//java/jdk1.5.0_06/jre/../lib/i386
> SHELL=/bin/tcsh
> HOSTTYPE=x86_64-linux
> OSTYPE=linux
> MACHTYPE=x86_64

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug  4 19:40:53 2006
Return-Path: 
 <hadoop-dev-return-2941-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17916 invoked from network); 4 Aug 2006 19:40:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 19:40:53 -0000
Received: (qmail 31880 invoked by uid 500); 4 Aug 2006 19:40:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31858 invoked by uid 500); 4 Aug 2006 19:40:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31848 invoked by uid 99); 4 Aug 2006 19:40:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 12:40:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 12:40:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2CF0A7142B7
	for <hadoop-dev@lucene.apache.org>; Fri,  4 Aug 2006 19:38:15 +0000 (GMT)
Message-ID: <18609039.1154720295181.JavaMail.jira@brutus>
Date: Fri, 4 Aug 2006 12:38:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-226) DFSShell problems. Incorrect block
 replication detection in fsck.
In-Reply-To: <24430703.1147903865906.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-226?page=all ]

Doug Cutting updated HADOOP-226:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks Bryan!

Please submit new issues for the other aspects of this that remain unfixed.

> DFSShell problems. Incorrect block replication detection in fsck.
> -----------------------------------------------------------------
>
>                 Key: HADOOP-226
>                 URL: http://issues.apache.org/jira/browse/HADOOP-226
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>         Environment: All
>            Reporter: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: fsck.replication.fix.txt
>
>
> 1. We need to adjust Dfsck to the new per-file replication feature.
> fsck checks block replication based on the configured global replication parameter.
> Which is now just the default. The actual file replication is returned in DFSFileInfo.
> So at least the reporting is screwed by that, although I didn't check what will happen with
> other options -move and -delete.
> 2. fsck throws NullPointerException if you type
> bin/hadoop fsck -files /doc
> instead of
> bin/hadoop fsck /doc -files
> 3. Unfortunately, there are several commands that throw different kinds of Exceptions
> rather than at least printing the usage info, when some of its arguments are missing or
> misplaced. ArrayIndexOutOfBoundsException is one them. Try
> bin/hadoop dfs -mv
> bin/hadoop dfs -cp
> bin/hadoop dfs -rm
> 4. In general the shell is growing and getting more sophisticated.
> Should we work out a general convention on how the parameters should be structured, named,
> short/long version of the keywords, help, etc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug  4 20:03:52 2006
Return-Path: 
 <hadoop-dev-return-2942-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26019 invoked from network); 4 Aug 2006 20:03:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 20:03:52 -0000
Received: (qmail 77202 invoked by uid 500); 4 Aug 2006 20:03:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77184 invoked by uid 500); 4 Aug 2006 20:03:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77175 invoked by uid 99); 4 Aug 2006 20:03:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 13:03:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 13:03:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E6F7F41000F
	for <hadoop-dev@lucene.apache.org>; Fri,  4 Aug 2006 20:01:14 +0000 (GMT)
Message-ID: <22673511.1154721674943.JavaMail.jira@brutus>
Date: Fri, 4 Aug 2006 13:01:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-425) a python word count example that runs
 under jython
In-Reply-To: <26036472.1154708475261.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-425?page=all ]

Doug Cutting updated HADOOP-425:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.5.0
                       (was: 0.6.0)
       Resolution: Fixed

I just committed this.  Since it poses no dangers, I'm including it in 0.5.

Thanks, Owen!

> a python word count example that runs under jython
> --------------------------------------------------
>
>                 Key: HADOOP-425
>                 URL: http://issues.apache.org/jira/browse/HADOOP-425
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.5.0
>
>         Attachments: python-wc.patch
>
>
> I translated the word count example into python and convert it into a jar using jython. It provides a nice example of writing Hadoop map/reduce programs in python.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug  4 20:05:52 2006
Return-Path: 
 <hadoop-dev-return-2943-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27349 invoked from network); 4 Aug 2006 20:05:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 20:05:52 -0000
Received: (qmail 81790 invoked by uid 500); 4 Aug 2006 20:05:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81768 invoked by uid 500); 4 Aug 2006 20:05:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81759 invoked by uid 99); 4 Aug 2006 20:05:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 13:05:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 13:05:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C4FDA7142C7
	for <hadoop-dev@lucene.apache.org>; Fri,  4 Aug 2006 20:03:14 +0000 (GMT)
Message-ID: <24607365.1154721794804.JavaMail.jira@brutus>
Date: Fri, 4 Aug 2006 13:03:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-415) DFSNodesStatus() should sort data
 nodes.
In-Reply-To: <11728384.1154482755948.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-415?page=all ]

Doug Cutting resolved HADOOP-415.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Devaraj!

> DFSNodesStatus() should sort data nodes.
> ----------------------------------------
>
>                 Key: HADOOP-415
>                 URL: http://issues.apache.org/jira/browse/HADOOP-415
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: refactor_nodestatus.patch, refactor_nodestatus.patch
>
>
> HADOOP-392 introduced a new TreeMap member (datanodeMapByName) in the name node.
> It is used solely for reporting the data nodes in the UI sorted by their names.
> I think it is quite inefficient both time and space-wise to support an excessive
> data structure just for that.
> Suppose the UI will also require sorting by last heartbeat and/or by the available space....
> I think DFSNodesStatus() should just sort the original datanodeMap before returning the list.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug  4 20:50:57 2006
Return-Path: 
 <hadoop-dev-return-2944-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37049 invoked from network); 4 Aug 2006 20:50:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 20:50:57 -0000
Received: (qmail 43031 invoked by uid 500); 4 Aug 2006 20:50:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43002 invoked by uid 500); 4 Aug 2006 20:50:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42993 invoked by uid 99); 4 Aug 2006 20:50:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 13:50:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 13:50:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B6E04410022
	for <hadoop-dev@lucene.apache.org>; Fri,  4 Aug 2006 20:48:14 +0000 (GMT)
Message-ID: <1591202.1154724494746.JavaMail.jira@brutus>
Date: Fri, 4 Aug 2006 13:48:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-394) MiniDFSCluster shudown order
In-Reply-To: <28678698.1154025013891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-394?page=all ]

Work on HADOOP-394 started by Konstantin Shvachko.

> MiniDFSCluster shudown order
> ----------------------------
>
>                 Key: HADOOP-394
>                 URL: http://issues.apache.org/jira/browse/HADOOP-394
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>            Priority: Minor
>         Attachments: MiniDFSClusterShutdownOrder.patch
>
>
> I propose to reverse the order of shutdown in MiniDFSCluster.
> Currently it shutdowns the name node first and then the data node,
> which causes the data node throwing unnecessary Exceptions in unit test.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug  4 23:26:52 2006
Return-Path: 
 <hadoop-dev-return-2945-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77894 invoked from network); 4 Aug 2006 23:26:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 23:26:52 -0000
Received: (qmail 15805 invoked by uid 500); 4 Aug 2006 23:26:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15767 invoked by uid 500); 4 Aug 2006 23:26:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15758 invoked by uid 99); 4 Aug 2006 23:26:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 16:26:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 16:26:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 05448410023
	for <hadoop-dev@lucene.apache.org>; Fri,  4 Aug 2006 23:24:14 +0000 (GMT)
Message-ID: <3488634.1154733854019.JavaMail.jira@brutus>
Date: Fri, 4 Aug 2006 16:24:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-426) streaming unit tests failing on SunOS
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

streaming unit tests failing on SunOS
-------------------------------------

                 Key: HADOOP-426
                 URL: http://issues.apache.org/jira/browse/HADOOP-426
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
    Affects Versions: 0.5.0
            Reporter: Doug Cutting
         Assigned To: Michel Tourn
             Fix For: 0.6.0


This is causing nightly builds to fail, since these run on a Solaris box.

java.lang.RuntimeException: Operating system SunOS not supported by this class
        at org.apache.hadoop.streaming.Environment.<init>(Environment.java:47)
        at org.apache.hadoop.streaming.StreamJob.init(StreamJob.java:68)
        at org.apache.hadoop.streaming.StreamJob.go(StreamJob.java:55)
        at org.apache.hadoop.streaming.TestStreaming.testCommandLine(Unknown Sour

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug  5 09:05:53 2006
Return-Path: 
 <hadoop-dev-return-2946-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16747 invoked from network); 5 Aug 2006 09:05:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2006 09:05:53 -0000
Received: (qmail 34554 invoked by uid 500); 5 Aug 2006 09:05:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34525 invoked by uid 500); 5 Aug 2006 09:05:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34516 invoked by uid 99); 5 Aug 2006 09:05:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Aug 2006 02:05:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Aug 2006 02:05:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 18A9341000F
	for <hadoop-dev@lucene.apache.org>; Sat,  5 Aug 2006 09:03:15 +0000 (GMT)
Message-ID: <22692368.1154768595097.JavaMail.jira@brutus>
Date: Sat, 5 Aug 2006 02:03:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-415) DFSNodesStatus() should sort data
 nodes.
In-Reply-To: <11728384.1154482755948.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-415?page=all ]

Devaraj Das updated HADOOP-415:
-------------------------------

    Attachment: refactor_datanodeinfo.patch

I mistakenly submitted the same patch file that I submitted the first time. Sorry. Thanks to Konstantin for pointing it out. I have now placed the patch with just the DatanodeDescriptor -> DatanodeInfo changes. This will apply cleanly to the current trunk.

> DFSNodesStatus() should sort data nodes.
> ----------------------------------------
>
>                 Key: HADOOP-415
>                 URL: http://issues.apache.org/jira/browse/HADOOP-415
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: refactor_datanodeinfo.patch, refactor_nodestatus.patch, refactor_nodestatus.patch
>
>
> HADOOP-392 introduced a new TreeMap member (datanodeMapByName) in the name node.
> It is used solely for reporting the data nodes in the UI sorted by their names.
> I think it is quite inefficient both time and space-wise to support an excessive
> data structure just for that.
> Suppose the UI will also require sorting by last heartbeat and/or by the available space....
> I think DFSNodesStatus() should just sort the original datanodeMap before returning the list.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug  5 11:41:55 2006
Return-Path: 
 <hadoop-dev-return-2947-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51687 invoked from network); 5 Aug 2006 11:41:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2006 11:41:55 -0000
Received: (qmail 11377 invoked by uid 500); 5 Aug 2006 11:41:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11353 invoked by uid 500); 5 Aug 2006 11:41:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11342 invoked by uid 99); 5 Aug 2006 11:41:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Aug 2006 04:41:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Aug 2006 04:41:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1830041000F
	for <hadoop-dev@lucene.apache.org>; Sat,  5 Aug 2006 11:39:16 +0000 (GMT)
Message-ID: <12698963.1154777956096.JavaMail.jira@brutus>
Date: Sat, 5 Aug 2006 04:39:16 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12425953 ] 
            
Arun C Murthy commented on HADOOP-54:
-------------------------------------

An implementation detail which I would like to bring to everyone's attention: 

With the 'raw' values now being a concrete object (implementing the 'ValueBytes' interface) we now have a situation in the 'base' sort of SequenceFile.Sorter where we will potentially have to store millions of 'rawValue' objects (assuming a decent sized SequenceFile with 'small' records). 

As it exists today the 'sort' implementation in SequenceFile.Sorter uses 'io.sort.mb' no. of bytes to 'segment' input for sorting (and later merges them). 

Owen suggested we also use 'no. of records' to augment the above in order to prevent situations where we might have to store millions of 'ValueBytes' objects in memory... thus we have a limit on the no. of records (i.e. ValueBytes objects) we use along with 'io.sort.mb' to segment input for sorting.

Thoughts?



> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug  5 19:23:55 2006
Return-Path: 
 <hadoop-dev-return-2948-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28417 invoked from network); 5 Aug 2006 19:23:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2006 19:23:55 -0000
Received: (qmail 11201 invoked by uid 500); 5 Aug 2006 19:23:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11169 invoked by uid 500); 5 Aug 2006 19:23:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11160 invoked by uid 99); 5 Aug 2006 19:23:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Aug 2006 12:23:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Aug 2006 12:23:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BAD85410022
	for <hadoop-dev@lucene.apache.org>; Sat,  5 Aug 2006 19:21:15 +0000 (GMT)
Message-ID: <28542775.1154805675762.JavaMail.jira@brutus>
Date: Sat, 5 Aug 2006 12:21:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-181) task trackers should not restart for
 having a late heartbeat
In-Reply-To: <701484.1146509206378.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-181?page=all ]

Devaraj Das reassigned HADOOP-181:
----------------------------------

    Assignee: Devaraj Das  (was: Owen O'Malley)

> task trackers should not restart for having a late heartbeat
> ------------------------------------------------------------
>
>                 Key: HADOOP-181
>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.1.1
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.6.0
>
>
> TaskTrackers should not close and restart themselves for having a late heartbeat. The JobTracker should just accept their current status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug  5 21:48:36 2006
Return-Path: 
 <hadoop-dev-return-2949-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46938 invoked from network); 5 Aug 2006 21:48:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2006 21:48:36 -0000
Received: (qmail 97733 invoked by uid 500); 5 Aug 2006 21:48:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97696 invoked by uid 500); 5 Aug 2006 21:48:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97687 invoked by uid 99); 5 Aug 2006 21:48:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Aug 2006 14:48:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.148.227.153] (HELO rwcrmhc13.comcast.net)
 (216.148.227.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Aug 2006 14:48:26 -0700
Received: from [192.168.168.11]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc13) with ESMTP
          id <20060805214759m1300la5pue>; Sat, 5 Aug 2006 21:48:00 +0000
Message-ID: <44D5120F.1070207@apache.org>
Date: Sat, 05 Aug 2006 14:47:59 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: release 0.5.0 available
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Release 0.5.0 of Hadoop is now available.

The release may be downloaded from:

   http://www.apache.org/dyn/closer.cgi/lucene/hadoop/

Release notes are available at:

  http://tinyurl.com/pnml2

Please report problems via:

  http://issues.apache.org/jira/browse/HADOOP

Doug

From MAILER-DAEMON Sun Aug  6 09:02:06 2006
Return-Path: 
 <hadoop-dev-return-2950-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59575 invoked from network); 6 Aug 2006 09:02:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Aug 2006 09:02:06 -0000
Received: (qmail 86314 invoked by uid 500); 6 Aug 2006 09:02:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86239 invoked by uid 500); 6 Aug 2006 09:02:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86170 invoked by uid 99); 6 Aug 2006 09:02:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 02:02:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 02:01:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B64B641000C
	for <hadoop-dev@lucene.apache.org>; Sun,  6 Aug 2006 08:59:14 +0000 (GMT)
Message-ID: <29764893.1154854754744.JavaMail.jira@brutus>
Date: Sun, 6 Aug 2006 01:59:14 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-307) Many small jobs benchmark for
 MapReduce
In-Reply-To: <13009062.1150636529837.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-307?page=all ]

Sanjay Dahiya reassigned HADOOP-307:
------------------------------------

    Assignee: Sanjay Dahiya

> Many small jobs benchmark for MapReduce
> ---------------------------------------
>
>                 Key: HADOOP-307
>                 URL: http://issues.apache.org/jira/browse/HADOOP-307
>             Project: Hadoop
>          Issue Type: Task
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>             Fix For: 0.5.0
>
>         Attachments: patch.txt, patch.txt
>
>
> A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Aug  6 09:23:02 2006
Return-Path: 
 <hadoop-dev-return-2951-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64983 invoked from network); 6 Aug 2006 09:23:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Aug 2006 09:23:02 -0000
Received: (qmail 3329 invoked by uid 500); 6 Aug 2006 09:23:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3295 invoked by uid 500); 6 Aug 2006 09:23:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3286 invoked by uid 99); 6 Aug 2006 09:23:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 02:23:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 02:22:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E17D6714219
	for <hadoop-dev@lucene.apache.org>; Sun,  6 Aug 2006 09:20:14 +0000 (GMT)
Message-ID: <2008087.1154856014920.JavaMail.jira@brutus>
Date: Sun, 6 Aug 2006 02:20:14 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-307) Many small jobs benchmark for
 MapReduce
In-Reply-To: <13009062.1150636529837.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-307?page=all ]

Sanjay Dahiya updated HADOOP-307:
---------------------------------

    Attachment: patch.txt

Patch for classpath issues. The benchmark can now be run using hadoop script without having to set any extra classpath - $HADOOP_HOME/bin/hadoop jar <path to MRBenchmark.jar> smallJobsBenchmark <options .. >. See Readme.txt for an example of options. 
bin/run.sh script can be used as an optional helper script if benchmark needs to be run multiple times with different input configurations. 

thanks Uros for pointing this out. 

> Many small jobs benchmark for MapReduce
> ---------------------------------------
>
>                 Key: HADOOP-307
>                 URL: http://issues.apache.org/jira/browse/HADOOP-307
>             Project: Hadoop
>          Issue Type: Task
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>             Fix For: 0.5.0
>
>         Attachments: patch.txt, patch.txt, patch.txt
>
>
> A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Aug  6 12:10:25 2006
Return-Path: 
 <hadoop-dev-return-2952-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87651 invoked from network); 6 Aug 2006 12:10:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Aug 2006 12:10:25 -0000
Received: (qmail 93877 invoked by uid 500); 6 Aug 2006 12:10:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93846 invoked by uid 500); 6 Aug 2006 12:10:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93837 invoked by uid 99); 6 Aug 2006 12:10:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 05:10:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 61A81714293
	for <hadoop-dev@lucene.apache.org>; Sun,  6 Aug 2006 12:07:15 +0000 (GMT)
Message-ID: <22153274.1154866035397.JavaMail.jira@brutus>
Date: Sun, 6 Aug 2006 05:07:15 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Sanjay Dahiya updated HADOOP-263:
---------------------------------

    Attachment: patch.txt

This patch displays a timestamp with task status on the webpage. The timestamp is of time when task tracker receives a state change update. Time stamps are also displayed for individual task attempts in addition to state changes. 

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Aug  6 12:10:26 2006
Return-Path: 
 <hadoop-dev-return-2953-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87722 invoked from network); 6 Aug 2006 12:10:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Aug 2006 12:10:26 -0000
Received: (qmail 94306 invoked by uid 500); 6 Aug 2006 12:10:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94147 invoked by uid 500); 6 Aug 2006 12:10:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94137 invoked by uid 99); 6 Aug 2006 12:10:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 05:10:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DF89771429F
	for <hadoop-dev@lucene.apache.org>; Sun,  6 Aug 2006 12:07:16 +0000 (GMT)
Message-ID: <23639717.1154866036913.JavaMail.jira@brutus>
Date: Sun, 6 Aug 2006 05:07:16 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Sanjay Dahiya updated HADOOP-263:
---------------------------------

    Status: Patch Available  (was: In Progress)

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Aug  6 17:14:56 2006
Return-Path: 
 <hadoop-dev-return-2954-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34443 invoked from network); 6 Aug 2006 17:14:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Aug 2006 17:14:56 -0000
Received: (qmail 69483 invoked by uid 500); 6 Aug 2006 17:14:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69457 invoked by uid 500); 6 Aug 2006 17:14:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69448 invoked by uid 99); 6 Aug 2006 17:14:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 10:14:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 10:14:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BF6F071429F
	for <hadoop-dev@lucene.apache.org>; Sun,  6 Aug 2006 17:12:15 +0000 (GMT)
Message-ID: <17087291.1154884335781.JavaMail.jira@brutus>
Date: Sun, 6 Aug 2006 10:12:15 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-53) MapReduce log files should be storable
 in dfs.
In-Reply-To: <13654009.1140640359390.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-53?page=all ]

Sanjay Dahiya reassigned HADOOP-53:
-----------------------------------

    Assignee: Sanjay Dahiya  (was: Sameer Paranjpye)

> MapReduce log files should be storable in dfs.
> ----------------------------------------------
>
>                 Key: HADOOP-53
>                 URL: http://issues.apache.org/jira/browse/HADOOP-53
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>
> It should be possible to cause a job's log output to be stored in dfs.  The jobtracker's log output and (optionally) all tasktracker log output related to a job should be storable in a job-specified dfs directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Aug  6 17:14:57 2006
Return-Path: 
 <hadoop-dev-return-2955-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34477 invoked from network); 6 Aug 2006 17:14:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Aug 2006 17:14:57 -0000
Received: (qmail 69709 invoked by uid 500); 6 Aug 2006 17:14:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69647 invoked by uid 500); 6 Aug 2006 17:14:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69638 invoked by uid 99); 6 Aug 2006 17:14:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 10:14:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 10:14:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 415F27142A7
	for <hadoop-dev@lucene.apache.org>; Sun,  6 Aug 2006 17:12:17 +0000 (GMT)
Message-ID: <11699252.1154884337265.JavaMail.jira@brutus>
Date: Sun, 6 Aug 2006 10:12:17 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-53) MapReduce log files should be
 storable in dfs.
In-Reply-To: <13654009.1140640359390.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-53?page=all ]

Work on HADOOP-53 started by Sanjay Dahiya.

> MapReduce log files should be storable in dfs.
> ----------------------------------------------
>
>                 Key: HADOOP-53
>                 URL: http://issues.apache.org/jira/browse/HADOOP-53
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>
> It should be possible to cause a job's log output to be stored in dfs.  The jobtracker's log output and (optionally) all tasktracker log output related to a job should be storable in a job-specified dfs directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Aug  6 17:43:55 2006
Return-Path: 
 <hadoop-dev-return-2956-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40519 invoked from network); 6 Aug 2006 17:43:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Aug 2006 17:43:55 -0000
Received: (qmail 4647 invoked by uid 500); 6 Aug 2006 17:43:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4472 invoked by uid 500); 6 Aug 2006 17:43:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4463 invoked by uid 99); 6 Aug 2006 17:43:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 10:43:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 10:43:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4459B7142CF
	for <hadoop-dev@lucene.apache.org>; Sun,  6 Aug 2006 17:41:15 +0000 (GMT)
Message-ID: <26821049.1154886075277.JavaMail.jira@brutus>
Date: Sun, 6 Aug 2006 10:41:15 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-239?page=all ]

Sanjay Dahiya reassigned HADOOP-239:
------------------------------------

    Assignee: Sanjay Dahiya

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Aug  6 18:00:55 2006
Return-Path: 
 <hadoop-dev-return-2957-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42753 invoked from network); 6 Aug 2006 18:00:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Aug 2006 18:00:55 -0000
Received: (qmail 18396 invoked by uid 500); 6 Aug 2006 18:00:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18227 invoked by uid 500); 6 Aug 2006 18:00:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18217 invoked by uid 99); 6 Aug 2006 18:00:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 11:00:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 11:00:54 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 41B357142D3
	for <hadoop-dev@lucene.apache.org>; Sun,  6 Aug 2006 17:58:15 +0000 (GMT)
Message-ID: <33377373.1154887095266.JavaMail.jira@brutus>
Date: Sun, 6 Aug 2006 10:58:15 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12426073 ] 
            
Sanjay Dahiya commented on HADOOP-239:
--------------------------------------

How about providing an additional JSP for job history. Current JSP's are using live data (not persistant), they will be significantly changed if we read from log file as well as live jobtracker in them. It will be cleaner if we dump the job log in a file and read the file in a separate JSP, linked from current page. Comments ? 

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 06:23:57 2006
Return-Path: 
 <hadoop-dev-return-2958-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74012 invoked from network); 7 Aug 2006 06:23:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 06:23:57 -0000
Received: (qmail 77809 invoked by uid 500); 7 Aug 2006 06:23:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77791 invoked by uid 500); 7 Aug 2006 06:23:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77782 invoked by uid 99); 7 Aug 2006 06:23:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 23:23:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 23:23:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4BD0A714204
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 06:21:15 +0000 (GMT)
Message-ID: <11483790.1154931675308.JavaMail.jira@brutus>
Date: Sun, 6 Aug 2006 23:21:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Owen O'Malley updated HADOOP-263:
---------------------------------

    Status: Open  (was: Patch Available)

A couple of points need work:
  1. It only catches the finish time of the task.
  2. It includes a couple of comment/whitespace changes that are accidental.
  3. It calls the added field "timestamp", which doesn't say what the time represents.

I was expecting to see:
  2 new fields in TaskStatus:
     private long timeStarted;
     private long timeStopped;
  a new class derived from TaskStatus named ReduceTaskStatus that includes:
     private long timeShuffleFinished;
     private long timeSortFinished;

This patch does point out the high simularity of the TaskStatus and TaskReport. They are basically the same type just slightly filtered by which protocol they are being used on. Why don't you add timeStarted and timeStopped to TaskReport and we can  drop TaskReport in a later patch.
  

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 07:21:58 2006
Return-Path: 
 <hadoop-dev-return-2959-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95567 invoked from network); 7 Aug 2006 07:21:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 07:21:58 -0000
Received: (qmail 47645 invoked by uid 500); 7 Aug 2006 07:21:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47616 invoked by uid 500); 7 Aug 2006 07:21:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47607 invoked by uid 99); 7 Aug 2006 07:21:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 00:21:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 00:21:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 47692714294
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 07:19:15 +0000 (GMT)
Message-ID: <31051726.1154935155290.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 00:19:15 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12426154 ] 
            
eric baldeschwieler commented on HADOOP-239:
--------------------------------------------

+1 to the general idea of logging the data and reporting from the log.

It would be good to expand a bit on your idea, so it is clear what you are suggesting.

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 17:14:57 2006
Return-Path: 
 <hadoop-dev-return-2960-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91498 invoked from network); 7 Aug 2006 17:14:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 17:14:57 -0000
Received: (qmail 167 invoked by uid 500); 7 Aug 2006 17:14:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 138 invoked by uid 500); 7 Aug 2006 17:14:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 129 invoked by uid 99); 7 Aug 2006 17:14:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 10:14:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 10:14:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 488077142CC
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 17:12:15 +0000 (GMT)
Message-ID: <4087713.1154970735293.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 10:12:15 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-239?page=all ]

Yoram Arnon updated HADOOP-239:
-------------------------------

    Description: 
The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
if the cluster was idle for a day (say Sunday) it drops all its history.
Monday morning, the page is empty.
Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).

Also, if the job tracker is restarted, it loses all its history.
The history should be persistent, withstanding restarts and upgrades.

  was:
The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
if the cluster was idle for a day (say Sunday) it drops all its history.
Monday morning, the page is empty.
Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).


> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 17:26:58 2006
Return-Path: 
 <hadoop-dev-return-2961-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95820 invoked from network); 7 Aug 2006 17:26:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 17:26:58 -0000
Received: (qmail 22183 invoked by uid 500); 7 Aug 2006 17:26:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22020 invoked by uid 500); 7 Aug 2006 17:26:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22011 invoked by uid 99); 7 Aug 2006 17:26:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 10:26:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 10:26:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BAD4341000E
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 17:24:15 +0000 (GMT)
Message-ID: <23630925.1154971455762.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 10:24:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-53) MapReduce log files should be storable
 in dfs.
In-Reply-To: <13654009.1140640359390.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-53?page=all ]

Owen O'Malley reassigned HADOOP-53:
-----------------------------------

    Assignee: Owen O'Malley  (was: Sanjay Dahiya)

> MapReduce log files should be storable in dfs.
> ----------------------------------------------
>
>                 Key: HADOOP-53
>                 URL: http://issues.apache.org/jira/browse/HADOOP-53
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>
> It should be possible to cause a job's log output to be stored in dfs.  The jobtracker's log output and (optionally) all tasktracker log output related to a job should be storable in a job-specified dfs directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 17:26:59 2006
Return-Path: 
 <hadoop-dev-return-2962-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95870 invoked from network); 7 Aug 2006 17:26:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 17:26:59 -0000
Received: (qmail 22244 invoked by uid 500); 7 Aug 2006 17:26:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22218 invoked by uid 500); 7 Aug 2006 17:26:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22209 invoked by uid 99); 7 Aug 2006 17:26:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 10:26:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 10:26:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 36967410011
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 17:24:17 +0000 (GMT)
Message-ID: <8695013.1154971457221.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 10:24:17 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work stopped: (HADOOP-53) MapReduce log files should be
 storable in dfs.
In-Reply-To: <13654009.1140640359390.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-53?page=all ]

Work on HADOOP-53 stopped by Owen O'Malley.

> MapReduce log files should be storable in dfs.
> ----------------------------------------------
>
>                 Key: HADOOP-53
>                 URL: http://issues.apache.org/jira/browse/HADOOP-53
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>
> It should be possible to cause a job's log output to be stored in dfs.  The jobtracker's log output and (optionally) all tasktracker log output related to a job should be storable in a job-specified dfs directory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 18:39:01 2006
Return-Path: 
 <hadoop-dev-return-2963-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21048 invoked from network); 7 Aug 2006 18:39:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 18:39:01 -0000
Received: (qmail 46555 invoked by uid 500); 7 Aug 2006 18:39:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46537 invoked by uid 500); 7 Aug 2006 18:39:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46527 invoked by uid 99); 7 Aug 2006 18:39:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 11:39:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 11:39:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0977A41000B
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 18:36:19 +0000 (GMT)
Message-ID: <25478328.1154975779036.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 11:36:19 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-312?page=all ]

Devaraj Das updated HADOOP-312:
-------------------------------

               Status: Patch Available  (was: Open)
    Affects Version/s:     (was: 0.4.0)

This patch implements the following:
1) Caching of client - server connections is made optional. Defaults to no-caching.
2) If no-caching is true, clients will disconnect idle connections to a server after a configured time. The idle time defaults to 1 second.

The performance hit in this case is that once in a while clients are not able to establish a connection to a server (if the server is too busy to accept incoming connections). I have seen this in the case of TaskTracker -> JobTracker protocol. It happens once in a while. When it happens, the JobTracker assumes that the TaskTracker is lost and then there is a whole set of reruns for the tasks that were running on this "lost" tasktracker. This slows down the overall progress of the job. Of course, this also happens in the case where the connections are cached but the difference is that the RPCs timeout as opposed to connect failing.

If the above doesn't happen, the performance figures with/without caching on a 370 node cluster is nearly the same.

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 18:44:57 2006
Return-Path: 
 <hadoop-dev-return-2964-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23370 invoked from network); 7 Aug 2006 18:44:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 18:44:57 -0000
Received: (qmail 64004 invoked by uid 500); 7 Aug 2006 18:44:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63971 invoked by uid 500); 7 Aug 2006 18:44:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63962 invoked by uid 99); 7 Aug 2006 18:44:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 11:44:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 11:44:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0584C714294
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 18:42:15 +0000 (GMT)
Message-ID: <4486326.1154976135017.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 11:42:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-312?page=all ]

Devaraj Das updated HADOOP-312:
-------------------------------

    Attachment: no_connection_caching.patch

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 18:55:58 2006
Return-Path: 
 <hadoop-dev-return-2965-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26368 invoked from network); 7 Aug 2006 18:55:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 18:55:58 -0000
Received: (qmail 89660 invoked by uid 500); 7 Aug 2006 18:55:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89632 invoked by uid 500); 7 Aug 2006 18:55:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89623 invoked by uid 99); 7 Aug 2006 18:55:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 11:55:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 11:55:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BA1E87141F2
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 18:53:15 +0000 (GMT)
Message-ID: <15540448.1154976795759.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 11:53:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-181) task trackers should not restart for
 having a late heartbeat
In-Reply-To: <701484.1146509206378.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-181?page=all ]

Devaraj Das updated HADOOP-181:
-------------------------------

    Attachment: lost-heartbeat.patch

Attached is the patch.

> task trackers should not restart for having a late heartbeat
> ------------------------------------------------------------
>
>                 Key: HADOOP-181
>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.1.1
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.6.0
>
>         Attachments: lost-heartbeat.patch
>
>
> TaskTrackers should not close and restart themselves for having a late heartbeat. The JobTracker should just accept their current status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 18:57:58 2006
Return-Path: 
 <hadoop-dev-return-2966-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26750 invoked from network); 7 Aug 2006 18:57:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 18:57:58 -0000
Received: (qmail 92085 invoked by uid 500); 7 Aug 2006 18:57:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91908 invoked by uid 500); 7 Aug 2006 18:57:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91899 invoked by uid 99); 7 Aug 2006 18:57:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 11:57:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 11:57:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AD3AC714294
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 18:55:15 +0000 (GMT)
Message-ID: <11592729.1154976915707.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 11:55:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-181) task trackers should not restart for
 having a late heartbeat
In-Reply-To: <701484.1146509206378.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-181?page=all ]

Devaraj Das updated HADOOP-181:
-------------------------------

               Status: Patch Available  (was: Open)
    Affects Version/s:     (was: 0.1.1)

> task trackers should not restart for having a late heartbeat
> ------------------------------------------------------------
>
>                 Key: HADOOP-181
>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.6.0
>
>         Attachments: lost-heartbeat.patch
>
>
> TaskTrackers should not close and restart themselves for having a late heartbeat. The JobTracker should just accept their current status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 19:04:02 2006
Return-Path: 
 <hadoop-dev-return-2967-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28361 invoked from network); 7 Aug 2006 19:04:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 19:04:02 -0000
Received: (qmail 1919 invoked by uid 500); 7 Aug 2006 19:04:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1894 invoked by uid 500); 7 Aug 2006 19:04:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1885 invoked by uid 99); 7 Aug 2006 19:04:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:04:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:04:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DA6D77142A7
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 19:01:14 +0000 (GMT)
Message-ID: <8607246.1154977274892.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 12:01:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-427) DatanodeInfo class should be used
 instead of DatanodeDescriptor in the jsp & related files
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DatanodeInfo class should be used instead of DatanodeDescriptor in the jsp & related files
------------------------------------------------------------------------------------------

                 Key: HADOOP-427
                 URL: http://issues.apache.org/jira/browse/HADOOP-427
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Devaraj Das
         Assigned To: Devaraj Das
             Fix For: 0.5.1


DatanodeDescriptor should be replaced by DatanodeInfo since DatanodeInfo is a public class and meant to be used by others. Specifically, DatanodeDescriptor is referenced in dfshealth.jsp & JspHelper.java files. Change those references to DatanodeInfo.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 19:10:57 2006
Return-Path: 
 <hadoop-dev-return-2968-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31171 invoked from network); 7 Aug 2006 19:10:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 19:10:57 -0000
Received: (qmail 13992 invoked by uid 500); 7 Aug 2006 19:10:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13827 invoked by uid 500); 7 Aug 2006 19:10:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13818 invoked by uid 99); 7 Aug 2006 19:10:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:10:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:10:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C5D0571421B
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 19:08:14 +0000 (GMT)
Message-ID: <26493892.1154977694807.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 12:08:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-427) DatanodeInfo class should be used
 instead of DatanodeDescriptor in the jsp & related files
In-Reply-To: <8607246.1154977274892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-427?page=all ]

Devaraj Das updated HADOOP-427:
-------------------------------

    Attachment: refactor_datanodeinfo.patch

I had submitted this same patch earlier. That was for Hadoop-415 but since that was closed before I submitted the patch I am resubmitting it again.

> DatanodeInfo class should be used instead of DatanodeDescriptor in the jsp & related files
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-427
>                 URL: http://issues.apache.org/jira/browse/HADOOP-427
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>             Fix For: 0.5.1
>
>         Attachments: refactor_datanodeinfo.patch
>
>
> DatanodeDescriptor should be replaced by DatanodeInfo since DatanodeInfo is a public class and meant to be used by others. Specifically, DatanodeDescriptor is referenced in dfshealth.jsp & JspHelper.java files. Change those references to DatanodeInfo.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 19:18:59 2006
Return-Path: 
 <hadoop-dev-return-2969-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34627 invoked from network); 7 Aug 2006 19:18:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 19:18:59 -0000
Received: (qmail 26231 invoked by uid 500); 7 Aug 2006 19:18:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26063 invoked by uid 500); 7 Aug 2006 19:18:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26054 invoked by uid 99); 7 Aug 2006 19:18:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:18:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:18:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A09E371429F
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 19:16:16 +0000 (GMT)
Message-ID: <28772198.1154978176655.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 12:16:16 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12426298 ] 
            
Sanjay Dahiya commented on HADOOP-239:
--------------------------------------

I meant on JobTracker we log the job transition states in a structured ( XML?) persistent file. This is different from the standard log file and can be parsed and displayed by a JSP page (something like JobHistory.jsp) . It includes only completed and failed jobs. So from the user interface perspective running jobs are displayed as they are currently but failed and completed jobs are displayed from this log.

We can add extra information in this log than what we have currently as a postmortem analysis like time spent by different phases or by different hosts (?). 

This will require unique job ids across jobtracker restarts otherwise it will be difficult to track jobs in history with same id. 
This log file can contain a configurable numbers of days of history, which can be browsed by time. Optionally this history can itself reside in HDFS. Does this make sense ?

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 19:31:57 2006
Return-Path: 
 <hadoop-dev-return-2970-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44835 invoked from network); 7 Aug 2006 19:31:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 19:31:57 -0000
Received: (qmail 42619 invoked by uid 500); 7 Aug 2006 19:31:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42595 invoked by uid 500); 7 Aug 2006 19:31:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42584 invoked by uid 99); 7 Aug 2006 19:31:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:31:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:31:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 537F371429F
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 19:29:15 +0000 (GMT)
Message-ID: <1577517.1154978955339.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 12:29:15 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-64) DataNode should be capable of
 managing multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-64?page=comments#action_12426300 ] 
            
Milind Bhandarkar commented on HADOOP-64:
-----------------------------------------

I have profiled the namenode, and most action in namenode happens as a response to heartbeat and blockreport messages. Therefore I think it is important to enable the datanode to handle multiple volumes. this also relates to hadoop-50, which needs handling multiple directories. The scheme I have in mind is for datanode to load-balance among volumes (that corrspond to multiple disks) and then within a volume, block-placement will be done within multiple directories according to block-id. I am currently preparing a proposal on this issue.

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Konstantin Shvachko
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 19:31:59 2006
Return-Path: 
 <hadoop-dev-return-2971-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44870 invoked from network); 7 Aug 2006 19:31:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 19:31:59 -0000
Received: (qmail 42821 invoked by uid 500); 7 Aug 2006 19:31:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42790 invoked by uid 500); 7 Aug 2006 19:31:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42781 invoked by uid 99); 7 Aug 2006 19:31:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:31:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:31:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 43C267142A7
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 19:29:17 +0000 (GMT)
Message-ID: <21678691.1154978957275.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 12:29:17 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-64) DataNode should be capable of managing
 multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-64?page=all ]

Milind Bhandarkar reassigned HADOOP-64:
---------------------------------------

    Assignee: Milind Bhandarkar  (was: Konstantin Shvachko)

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 19:36:00 2006
Return-Path: 
 <hadoop-dev-return-2972-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46082 invoked from network); 7 Aug 2006 19:36:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 19:36:00 -0000
Received: (qmail 46591 invoked by uid 500); 7 Aug 2006 19:36:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46434 invoked by uid 500); 7 Aug 2006 19:36:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46425 invoked by uid 99); 7 Aug 2006 19:36:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:36:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:35:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6D7257142C9
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 19:33:18 +0000 (GMT)
Message-ID: <20342347.1154979198445.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 12:33:18 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12426302 ] 
            
Yoram Arnon commented on HADOOP-239:
------------------------------------

if a job tracker fails while running a job, you'd want the failed job's information shown in the history, so you probably want to log a job in the file as soon as it's launched, rather than when it's completed.

There are several links that can be drilled down into from the job information - tasks, failed tasks, task trackers etc. Take care to store all that information in the log file so we do not lose any current functionality.

creating a file per day may be good, as it will enable a simple way of keeping a configurable length of history.

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 19:45:02 2006
Return-Path: 
 <hadoop-dev-return-2973-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48261 invoked from network); 7 Aug 2006 19:45:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 19:45:02 -0000
Received: (qmail 59063 invoked by uid 500); 7 Aug 2006 19:45:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59039 invoked by uid 500); 7 Aug 2006 19:45:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59030 invoked by uid 99); 7 Aug 2006 19:45:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:45:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:45:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD39D71429F
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 19:42:14 +0000 (GMT)
Message-ID: <13416432.1154979734838.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 12:42:14 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12426304 ] 
            
Yoram Arnon commented on HADOOP-312:
------------------------------------

lost tasktrackers because the jobtracker is temporarily busy is a bad thing.
we should have some sort of retry mechanism, or a longer accept queue on the server, or some allowable number of lost heartbeats, or something - to overcome this.
As a rule, barring hardware failure and user-code bugs, any time a tasktracker is lost is a bug. 

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 19:51:04 2006
Return-Path: 
 <hadoop-dev-return-2974-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50032 invoked from network); 7 Aug 2006 19:51:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 19:51:04 -0000
Received: (qmail 73180 invoked by uid 500); 7 Aug 2006 19:51:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73014 invoked by uid 500); 7 Aug 2006 19:51:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73005 invoked by uid 99); 7 Aug 2006 19:51:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:51:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:50:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D23807142C7
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 19:48:16 +0000 (GMT)
Message-ID: <21237784.1154980096858.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 12:48:16 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12426306 ] 
            
Sanjay Dahiya commented on HADOOP-239:
--------------------------------------

I agree, but to display the status of running job we can use the existing infrastructure rather than the log file as it already provides the most current status. We will log as things happen but use it for display when job fails/completes or job tracker restarts. 
Yes, the current functionality should be the minimum thats available in the log.

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 19:59:02 2006
Return-Path: 
 <hadoop-dev-return-2975-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51873 invoked from network); 7 Aug 2006 19:59:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 19:59:02 -0000
Received: (qmail 85705 invoked by uid 500); 7 Aug 2006 19:59:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85537 invoked by uid 500); 7 Aug 2006 19:59:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85528 invoked by uid 99); 7 Aug 2006 19:59:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:59:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:59:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5025571429F
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 19:56:15 +0000 (GMT)
Message-ID: <30527863.1154980575325.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 12:56:15 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-426) streaming unit tests failing on SunOS
In-Reply-To: <3488634.1154733854019.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-426?page=all ]

Michel Tourn updated HADOOP-426:
--------------------------------

    Attachment: sunos.patch

Add SunOS and a few others to the list




> streaming unit tests failing on SunOS
> -------------------------------------
>
>                 Key: HADOOP-426
>                 URL: http://issues.apache.org/jira/browse/HADOOP-426
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Doug Cutting
>         Assigned To: Michel Tourn
>             Fix For: 0.6.0
>
>         Attachments: sunos.patch
>
>
> This is causing nightly builds to fail, since these run on a Solaris box.
> java.lang.RuntimeException: Operating system SunOS not supported by this class
>         at org.apache.hadoop.streaming.Environment.<init>(Environment.java:47)
>         at org.apache.hadoop.streaming.StreamJob.init(StreamJob.java:68)
>         at org.apache.hadoop.streaming.StreamJob.go(StreamJob.java:55)
>         at org.apache.hadoop.streaming.TestStreaming.testCommandLine(Unknown Sour

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 20:09:57 2006
Return-Path: 
 <hadoop-dev-return-2976-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56025 invoked from network); 7 Aug 2006 20:09:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 20:09:57 -0000
Received: (qmail 6727 invoked by uid 500); 7 Aug 2006 20:09:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6705 invoked by uid 500); 7 Aug 2006 20:09:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6695 invoked by uid 99); 7 Aug 2006 20:09:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 13:09:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 13:09:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B8CF9714294
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 20:07:14 +0000 (GMT)
Message-ID: <21459334.1154981234754.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 13:07:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12426312 ] 
            
Devaraj Das commented on HADOOP-312:
------------------------------------

I agree with this. In the current code, there is a timeout of 10 minutes and only when a TaskTracker is out of contact for this much amount of time does the JobTracker assume that the TaskTracker is dead. Unfortunately, even with this large timeout, sometimes an unfortunate TaskTracker cannot make it. Yes, the accept queue can be made longer but we will hit the problem sometime later when we have more clients. So,  do you think, in addition to increasing the accept queue size, it makes sense to have a two-way heartbeat here? That is, if a server doesn't receive a heartbeat from a client and the expiry-timeout is about to expire, it schedules a heartbeat to the client and probably invokes a GETSTATUS or some such method on the client and if that method returns a valid response, it keeps the client alive for another expiry-timeout interval and this goes on... We can also look at other approaches - some of them are outlined in hadoop-362.
By the way, the patch for hadoop-181 should handle the lost tracker problem but this kind of a problem might turn up for any client-server interaction.

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 20:43:56 2006
Return-Path: 
 <hadoop-dev-return-2977-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66257 invoked from network); 7 Aug 2006 20:43:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 20:43:56 -0000
Received: (qmail 57955 invoked by uid 500); 7 Aug 2006 20:43:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57792 invoked by uid 500); 7 Aug 2006 20:43:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57783 invoked by uid 99); 7 Aug 2006 20:43:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 13:43:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 13:43:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E458F71429F
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 20:41:13 +0000 (GMT)
Message-ID: <17661487.1154983273932.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 13:41:13 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-428) Condor and Hadoop Map Reduce
 integration
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Condor and Hadoop Map Reduce integration
----------------------------------------

                 Key: HADOOP-428
                 URL: http://issues.apache.org/jira/browse/HADOOP-428
             Project: Hadoop
          Issue Type: New Feature
          Components: mapred
            Reporter: Devaraj Das
         Assigned To: Devaraj Das


The issue is about using/enhancing Condor's features for Hadoop's Map Reduce framework. Some of the early thoughts in this respect:
* One should be able to submit a MR job that takes advantage of Condor's features like node reservation according to a job's requirements, monitoring of jobs, etc.
* JobTracker and TaskTrackers work as Master/Workers in the Condor environment. One should be able to simply start a MR cluster and the cluster goes down when the job is done.
* The classads can have an attribute for input file block locations that will be an input to Condor's scheduling decisions.
* Condor's features of monitoring jobs can be leveraged to reschedule failed TaskTrackers. Checkpointing of JobTrackers can also probably be done so that if the JobTracker job dies for some reason, the failed jobs can be restarted to start from the point where the JobTracker was last checkpointed at (assuming the input data has not changed).
* User priorities, job priorities should also be handled. If nodes are currently in use due to a job being run by one user, and another user of the same priority submits a new job, it gets queued and opportunistically the job of the second user is scheduled - for e.g., one master and 1 worker to start with and then 2 workers and so on... If the second user is of a higher priority, then the first user's job is completely suspended.
Please add your thoughts on this topic.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 21:04:57 2006
Return-Path: 
 <hadoop-dev-return-2978-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71403 invoked from network); 7 Aug 2006 21:04:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 21:04:57 -0000
Received: (qmail 85627 invoked by uid 500); 7 Aug 2006 21:04:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85609 invoked by uid 500); 7 Aug 2006 21:04:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85599 invoked by uid 99); 7 Aug 2006 21:04:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 14:04:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 14:04:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4568271429F
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 21:02:15 +0000 (GMT)
Message-ID: <15734189.1154984535281.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 14:02:15 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12426324 ] 
            
eric baldeschwieler commented on HADOOP-239:
--------------------------------------------

+1 to the gist of this (Sanjay's latest suggestions and yoram's point about startup).

Putting the log in HDFS is interesting, but perhaps a distraction short term.

I think it would be worth trying to use the actual log infrastructure to store this information.  Rolling, compression, removal after a fixed time, no lost state when the sever fails...  all of this sounds like logging.


> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 21:06:58 2006
Return-Path: 
 <hadoop-dev-return-2979-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71829 invoked from network); 7 Aug 2006 21:06:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 21:06:58 -0000
Received: (qmail 89198 invoked by uid 500); 7 Aug 2006 21:06:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89174 invoked by uid 500); 7 Aug 2006 21:06:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89161 invoked by uid 99); 7 Aug 2006 21:06:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 14:06:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 14:06:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A6B2F714294
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 21:04:15 +0000 (GMT)
Message-ID: <13625308.1154984655680.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 14:04:15 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12426325 ] 
            
Sanjay Dahiya commented on HADOOP-239:
--------------------------------------

Here is a first cut at the information in job history. While displaying in JSP we can show it in different views like by hosts or by jobs  -  

 - jobid 
 - jobName
 - User
 - jobconf ( job.xml ) 
 - start time 
 - finish time
 - Status 
 - total maps 
 - total reduces
 - finished maps ( if make -k )
 - finished reduces ( if make -k )
 - Available task trackers list at job start (to find which hosts never ran any tasks, not sure if this is available from else where ?)
 
 - maps 
 	- taskid
 		- task attempt
 			- hostname
 			- start time
 			- finish time 
 			- error

 - reduces 
 	- taskid 
 		- task attempt
 			- host name 
 			- start time
 			- finish time
 			- phases 
 				- copy (?)
 					- start time
 					- finish time
 				- sort 
 					- start time
 					- finish time
 				- reduce 
 					- start time
 					- finish time
 			- status 
 			- error 
 	

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 21:08:58 2006
Return-Path: 
 <hadoop-dev-return-2980-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72029 invoked from network); 7 Aug 2006 21:08:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 21:08:58 -0000
Received: (qmail 90930 invoked by uid 500); 7 Aug 2006 21:08:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90904 invoked by uid 500); 7 Aug 2006 21:08:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90895 invoked by uid 99); 7 Aug 2006 21:08:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 14:08:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 14:08:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 58E6F7142A7
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 21:06:16 +0000 (GMT)
Message-ID: <20230225.1154984776361.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 14:06:16 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-239?page=all ]

Sanjay Dahiya updated HADOOP-239:
---------------------------------

    Comment: was deleted

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 21:10:57 2006
Return-Path: 
 <hadoop-dev-return-2981-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72669 invoked from network); 7 Aug 2006 21:10:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 21:10:57 -0000
Received: (qmail 94878 invoked by uid 500); 7 Aug 2006 21:10:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94860 invoked by uid 500); 7 Aug 2006 21:10:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94851 invoked by uid 99); 7 Aug 2006 21:10:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 14:10:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 14:10:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 454FA71429F
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 21:08:15 +0000 (GMT)
Message-ID: <29136408.1154984895281.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 14:08:15 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12426326 ] 
            
Sanjay Dahiya commented on HADOOP-239:
--------------------------------------

repost, lost tabs in last post - 

Here is a first cut at the information in job history. While displaying in JSP we can show it in different views like by hosts or by jobs  -  


- jobid 
 - jobName
 - User
 - jobconf ( job.xml ) 
 - start time 
 - finish time
 - Status 
 - total maps 
 - total reduces
 - finished maps ( if make -k )
 - finished reduces ( if make -k )
 - Available task trackers list at job start (to find which hosts never ran any tasks or if hosts added in between. not sure if this is available from else where ?)
 
 - maps 
    - taskid
        - task attempt
            - hostname
            - start time
            - finish time 
            - error

 - reduces 
    - taskid 
        - task attempt
            - host name 
            - start time
            - finish time
            - phases 
                - copy (?)
                    - start time
                    - finish time
                - sort 
                    - start time
                    - finish time
                - reduce 
                    - start time
                    - finish time
            - status 
            - error 

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 21:42:59 2006
Return-Path: 
 <hadoop-dev-return-2982-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78752 invoked from network); 7 Aug 2006 21:43:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 21:42:59 -0000
Received: (qmail 29218 invoked by uid 500); 7 Aug 2006 21:42:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29195 invoked by uid 500); 7 Aug 2006 21:42:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29178 invoked by uid 99); 7 Aug 2006 21:42:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 14:42:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 14:42:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F133041000B
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 21:40:16 +0000 (GMT)
Message-ID: <16618079.1154986816985.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 14:40:16 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-64) DataNode should be capable of
 managing multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-64?page=comments#action_12426338 ] 
            
Milind Bhandarkar commented on HADOOP-64:
-----------------------------------------

Proposal:

In the configuration (e.g. hadoop-site.xml), site-admin can specify a comma separated list of volumes as a value corresponding to key "dfs.data.dir". These volumes are assumed to be mounted on different disks. Thus the total disk capacity for the datanode is assumed to be a sum of disk capacities of these volumes, in addition, taking into account the /dev/sda* or /dev/hda* mapping of these volumes (i.e. not counting the same /dev/* twice.)

New blocks are created round-robin in these volumes. The policy for block-allocation is controlled by a separable piece of code, so that different policies can be substituted at runtime later. Mapping of datablocks to volume-id is kept in memory of datanode. When the datanode comes up again, it discovers this mapping by reading specified volumes. Later, when datanode is also periodically checkpointed, this mapping is stored in the checkpoint as well.

Each volume is further automatically split into multiple subdirectories (the number of these directories is configurable, and should be a power of 2, so that the last x bits of a block-id is used to determine which subdirectory the block is stored in. this is the scheme used in Mike's patch for hadoop-50.

If a datanode is re-configured with different number (or locations) of volumes for dfs.data.dir, the blocks stored in earlier locations are considered by the datanode to be lost (when in future, the datanode is checkpointed, it will try to recover those "lost" blocks). If one of the volumes is read-only, it will currently be considered to be dead only with-respect-to that volume. i.e. it will still continue to store blocks in read-write volumes, but blocks in the read-only volumes will be considered lost, since they cannot be deleted.)

Please comment on this proposal asap, so that I can go ahead with implementation.


> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 22:15:59 2006
Return-Path: 
 <hadoop-dev-return-2983-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87637 invoked from network); 7 Aug 2006 22:15:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 22:15:59 -0000
Received: (qmail 53253 invoked by uid 500); 7 Aug 2006 22:15:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53106 invoked by uid 500); 7 Aug 2006 22:15:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53097 invoked by uid 99); 7 Aug 2006 22:15:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 15:15:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 15:15:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 82BA1410010
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 22:13:16 +0000 (GMT)
Message-ID: <27521000.1154988796532.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 15:13:16 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-64) DataNode should be capable of
 managing multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-64?page=comments#action_12426343 ] 
            
Bryan Pendleton commented on HADOOP-64:
---------------------------------------

Why do datanodes need to checkpoint? What's the value of storing out the mapping, vs. re-enumerating them at startup time? The namenode doesn't keep track of what nodes have which blocks, why should a storage node keep track any more rigorously within its own state? I'd argue that all of that complexity is needless - the cost of maintaining a consistent state is way too high for little benefit.

Please make it very easy to change the block-allocation code. The default behaviors of the current code have been causing troubles on my very heterogenous cluster for a very long time - uniform distribution only really actually makes sense if the same amount of space is available on each drive. For all other cases, doing this leads immediately to unnecessary failures.

I'm not sure about the "blocks considered lost on read-only volumes" bit, but, if that implies that the blocks become unavailable, then I think the approach is too heavy-handed. Those blocks might be the only copies, and ignoring them means that cluster might not be able to find a live copy of a block anywhere else. Please clarify what a "lost" block is.

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 22:24:56 2006
Return-Path: 
 <hadoop-dev-return-2984-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91527 invoked from network); 7 Aug 2006 22:24:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 22:24:56 -0000
Received: (qmail 63888 invoked by uid 500); 7 Aug 2006 22:24:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63857 invoked by uid 500); 7 Aug 2006 22:24:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63848 invoked by uid 99); 7 Aug 2006 22:24:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 15:24:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 15:24:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 18B1B41000C
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 22:22:14 +0000 (GMT)
Message-ID: <31611790.1154989334097.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 15:22:14 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-429)  Periodically move blocks from full
 nodes to those with space
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

 Periodically move blocks from full nodes to those with space
-------------------------------------------------------------

                 Key: HADOOP-429
                 URL: http://issues.apache.org/jira/browse/HADOOP-429
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Bryan Pendleton


Continuance of Hadoop-386. The patch to that issue makes it possible to redistribute blocks (change replication up, wait for replication to succeed, then lower replication again). However, this requires a lot more space, is not automatic, and doesn't respect a reasonable I/O limit. I have actually had MapReduce jobs fail from block missing execptions after having recently changed the replication level (from 3 to 4, with no underreplications to start with) because the datanodes were too slow responding to requests while performing the necessary replications.

A good fix to this problem would be a low-priority thread on the NameNode that schedules low-priority replications of blocks on over-full machines, followed by the removal of the extra replications. It might be worth having a specific prototocol for asking for these low-priority copies to happen in the datanodes, so that they continue to service (and be available to service) normal block requests.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 22:25:01 2006
Return-Path: 
 <hadoop-dev-return-2985-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91667 invoked from network); 7 Aug 2006 22:25:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 22:25:01 -0000
Received: (qmail 64649 invoked by uid 500); 7 Aug 2006 22:24:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64626 invoked by uid 500); 7 Aug 2006 22:24:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64588 invoked by uid 99); 7 Aug 2006 22:24:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 15:24:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 15:24:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 964DC41000B
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 22:22:16 +0000 (GMT)
Message-ID: <9782642.1154989336613.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 15:22:16 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-64) DataNode should be capable of
 managing multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-64?page=comments#action_12426347 ] 
            
Sameer Paranjpye commented on HADOOP-64:
----------------------------------------

Can we map effectively map volumes to devices on Windows? Will 'df' under cygwin produce a comprehensible mapping of paths to devices? Maybe this should be left out of the implementation?

Code for monitoring disk capacity on the datanode will need to be updated to run 'df' on all volumes considered.  Round robin placement needs to account for differences in capacity on the various volumes.

How does this interact with Konstantin's storage id implementation? We will now need to have 1 storage-id across multiple volumes.

Do we need to use the last x-bits of a block to map it to a directory? Maybe we should use a simple round robin scheme here as well. The amount of state is small enough to keep in a hastable, no?

Do we ever need to checkpoint datanodes? Seems like that is a separable discussion. In any case, it seems like the less state we keep in side files the better it is.

We should include a mechanism to make read-only volumes visible on the namenode, as part of the health/status page, so that admins can be alerted in a timely manner.

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 22:37:56 2006
Return-Path: 
 <hadoop-dev-return-2986-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94392 invoked from network); 7 Aug 2006 22:37:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 22:37:56 -0000
Received: (qmail 77940 invoked by uid 500); 7 Aug 2006 22:37:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77907 invoked by uid 500); 7 Aug 2006 22:37:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77897 invoked by uid 99); 7 Aug 2006 22:37:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 15:37:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 15:37:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D9A8B41000C
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 22:35:13 +0000 (GMT)
Message-ID: <21253528.1154990113889.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 15:35:13 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-430) http server should die if the Datanode
 fails.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

http server should die if the Datanode fails.
---------------------------------------------

                 Key: HADOOP-430
                 URL: http://issues.apache.org/jira/browse/HADOOP-430
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.5.0
            Reporter: Konstantin Shvachko
             Fix For: 0.5.1
         Attachments: RegistrationOrder.patch

HADOOP-375 changed the order in which a data node registers and starts its http server.
Current version first starts the http server, then registers. As a result if the registration fails,
which can happen e.g. if the datanode has illegal storage id (=does not belong to the cluster),
the http server keeps running, which makes the data node seem running too.
I think 2 things need to be done.
1) Datanode registration should precede the http server startup.
2) The http server should shutdown when the datanode fails (in general).
I am attaching a patch for the first item.
Does anybody know how the latter can be done in the version of jetty we are on now?


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 22:39:57 2006
Return-Path: 
 <hadoop-dev-return-2987-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94586 invoked from network); 7 Aug 2006 22:39:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 22:39:57 -0000
Received: (qmail 81212 invoked by uid 500); 7 Aug 2006 22:39:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81183 invoked by uid 500); 7 Aug 2006 22:39:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81174 invoked by uid 99); 7 Aug 2006 22:39:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 15:39:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 15:39:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 60ABC41000B
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 22:37:15 +0000 (GMT)
Message-ID: <26354743.1154990235393.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 15:37:15 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-64) DataNode should be capable of
 managing multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-64?page=comments#action_12426354 ] 
            
Milind Bhandarkar commented on HADOOP-64:
-----------------------------------------

About check-pointing datanodes. I agree that it is a needless complexity. I was confused about this as well. But as Konstantin pointed out to me, the datanode checkpointing proposal is NOT checkpointing datanodes' state, but checkpointing datanodes' blockreport in the namenode checkpoint. Thanks konstantin.

As the proposal (and the implementation) currently stands, if dfs.data.dir is read-only, the datanode reports to be dead, since block-delete etc operations cannot be carried out on it. The namenode treats that datanode as dead, and tries to re-replicate its blocks on other data nodes. The same behavior will continue, except the datanode will not report itself to be dead if at least one volume specified in the dfs.data.dir list is read-write. However, it will not report blocks contained in read-only volumes.

Storage-ID continues to be one per datanode. Putting blocks in different volumes is datanode-internal.

The DF.java contains code to detect mount. This will be considered to be the differentiation between different disks. Even if it is not right, it does not preclude correct operation of datanode, only performance is affected. Performance will be maximized if all volumes specified in dfs.data.dir are located on different local disks.

Making read-only mounts visible on namenode is an orthogonal issue. My proposal specifies a backward-compatible way of dealing with it.

Using the last x bits to map a block on local directory will minimize datanode's state as well as keep the directory size minimal (since block-ids are random). Consider it an implicit hashtable on disk.

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 23:29:58 2006
Return-Path: 
 <hadoop-dev-return-2988-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8981 invoked from network); 7 Aug 2006 23:29:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 23:29:58 -0000
Received: (qmail 68192 invoked by uid 500); 7 Aug 2006 23:29:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68172 invoked by uid 500); 7 Aug 2006 23:29:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68163 invoked by uid 99); 7 Aug 2006 23:29:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 16:29:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 16:29:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5DC9E41000C
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 23:27:15 +0000 (GMT)
Message-ID: <15593357.1154993235381.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 16:27:15 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12426362 ] 
            
Yoram Arnon commented on HADOOP-239:
------------------------------------

looks good.
what would the jobconf be used for?

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 23:43:03 2006
Return-Path: 
 <hadoop-dev-return-2989-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12759 invoked from network); 7 Aug 2006 23:43:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 23:43:03 -0000
Received: (qmail 88456 invoked by uid 500); 7 Aug 2006 23:42:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88430 invoked by uid 500); 7 Aug 2006 23:42:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88412 invoked by uid 99); 7 Aug 2006 23:42:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 16:42:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 16:42:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 357D97141F2
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 23:40:15 +0000 (GMT)
Message-ID: <32814488.1154994015216.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 16:40:15 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-64) DataNode should be capable of
 managing multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-64?page=comments#action_12426366 ] 
            
Yoram Arnon commented on HADOOP-64:
-----------------------------------

dfs.data.dir is currently used to specify the location of temporary files written by dfs client (data is written to disk, then an entire dfs block is streamed to the datanodes). Rather than trying to support a multiple-volume behaviour there too, let's separate the client config from the datanode config, using 'client.tempdata.dir'. Try to make the change backwards compatible.

read-only drives are hard to maintain except by totally ignoring them, since data can not be deleted from them. If a file is deleted, then a blockid is reclaimed for another file, bad things might happen if that blockid is served by some read-only volume. If it's the last copy of a block, *and* the volume is read-only and on its way to be dead, then that block is unfortunately lost.

round robin is a bit harsh as an allocation scheme. allocation proportional to free space would work better IMO.

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 23:56:57 2006
Return-Path: 
 <hadoop-dev-return-2990-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16249 invoked from network); 7 Aug 2006 23:56:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 23:56:57 -0000
Received: (qmail 854 invoked by uid 500); 7 Aug 2006 23:56:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 688 invoked by uid 500); 7 Aug 2006 23:56:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 676 invoked by uid 99); 7 Aug 2006 23:56:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 16:56:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 16:56:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4390141000E
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 23:54:15 +0000 (GMT)
Message-ID: <4359960.1154994855274.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 16:54:15 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12426369 ] 
            
Sanjay Dahiya commented on HADOOP-239:
--------------------------------------

thats for looking at job parameters - input/output etc on the web page itself if we keeps lots of jobs in history. currently we have it as a path in a temp directory displayed on the JSP. We can have the same path there or dump the jobConf in the log file. 

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug  7 23:57:04 2006
Return-Path: 
 <hadoop-dev-return-2991-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16285 invoked from network); 7 Aug 2006 23:57:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 23:57:04 -0000
Received: (qmail 933 invoked by uid 500); 7 Aug 2006 23:57:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 894 invoked by uid 500); 7 Aug 2006 23:57:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 883 invoked by uid 99); 7 Aug 2006 23:57:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 16:57:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 16:57:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B310B410011
	for <hadoop-dev@lucene.apache.org>; Mon,  7 Aug 2006 23:54:16 +0000 (GMT)
Message-ID: <18727056.1154994856731.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 16:54:16 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-64) DataNode should be capable of
 managing multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-64?page=comments#action_12426370 ] 
            
Bryan Pendleton commented on HADOOP-64:
---------------------------------------

It sounds like its a different issue, but, I'm still worried about the "treat read-only as dead" option.

I regularly see old drives throw out enough IDE errors to get remounted read-only. Often times, a reboot will bring the drive back online just fine - and bring back the blocks that weren't deleted from it. If that block number was reused in the meantime, we'll have a problem anyway, regardless of whether we treat that block as readable once the initial read-only condition is encountered. Meanwhile, we've possibly missed an opportunity to save a block from early death, since a copy of it is still actually available.

I'll probably open up another issue around this later one, once the current one is closed, just to clarify. In the meantime, is there a realistic issue with block numbers being reused, such that an old block coming online would pervert things? Should a datanode maybe be periodically requesting the CRCs for its blocks, and checking to see if they still match? This generally falls into the space of "a good idea" anyway, since, barring reading a block, there's no way to tell if its disk has gone bad.

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 00:35:05 2006
Return-Path: 
 <hadoop-dev-return-2992-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26362 invoked from network); 8 Aug 2006 00:35:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 00:35:05 -0000
Received: (qmail 32867 invoked by uid 500); 8 Aug 2006 00:35:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32834 invoked by uid 500); 8 Aug 2006 00:35:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32801 invoked by uid 99); 8 Aug 2006 00:35:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 17:35:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 17:35:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4E28C41000C
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 00:32:15 +0000 (GMT)
Message-ID: <19088540.1154997135317.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 17:32:15 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12426378 ] 
            
Yoram Arnon commented on HADOOP-312:
------------------------------------

the current model, where a tasktracker sends a heartbeat every few seconds, and is declared dead only after 10 minutes is fine, as long as the rate of loss of heartbeats is low.
I'm only concerned, since the size of the accept queue is fairly small by default (~5), that  the probability of missing a new connection will be significantly greater than the probability of losing a message in an open tcp stream (very low). Increasing the size of the queue, or implemeting some form of retries could help.

There's a tradeoff here between the overhead of many 'accept's per second and the overhead of 'select'ing on many sockets, many of which are idle. Let's compare performance with and without connection caching, and see where we get more lost heartbeats, and better jobtracker performance.

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 02:31:59 2006
Return-Path: 
 <hadoop-dev-return-2993-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59566 invoked from network); 8 Aug 2006 02:31:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 02:31:59 -0000
Received: (qmail 19251 invoked by uid 500); 8 Aug 2006 02:31:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19221 invoked by uid 500); 8 Aug 2006 02:31:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19210 invoked by uid 99); 8 Aug 2006 02:31:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 19:31:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 19:31:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AD8867142C7
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 02:29:16 +0000 (GMT)
Message-ID: <26559946.1155004156708.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 19:29:16 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-64) DataNode should be capable of
 managing multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-64?page=comments#action_12426393 ] 
            
Konstantin Shvachko commented on HADOOP-64:
-------------------------------------------

 = I believe there was a misunderstanding on the datanode checkpointing issue.
HADOOP-306 proposes to checkpoint only the list of datanodes, effectively DatanodeInfo.
It was not meant to store the datanode block reports.
The block map is not and should not be checkpointed.

= DF on Windows will return the drive letter, which can be used to distinguish disks.
It will work only for local disks though. Mounted (mapped network) drives on Windows won't work.

= I agree storageID should be the same per node. It will need to be stored separately on each drive.
Otherwise, if only one drive stores the id and gets corrupted we will not be able to restore the
storage id for other drives. Also, the storage files on each drive should be locked when the datanode
starts to prevent from running multiple data nodes with the same blocks.

= It is a good idea that the number of directories is a power of 2.
But I do not support the idea to reserve any number of bits of block-id to determine block locations, for 2 reasons.
a) Block replicas can have different locations on different data nodes.
b) The block id is issued by the namenode, and it is not good if the namenode will need to
know about a datanode storage setup.
Instead, we can partition bit representation of the block id into a number of parts consistent
with the number of directories and e.g. XOR them. The result will represent the directory name.
I think this will be random enough.

= I don't think the datanode can be even start on a read-only disk.
The storage file won't open.

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 05:50:57 2006
Return-Path: 
 <hadoop-dev-return-2994-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10970 invoked from network); 8 Aug 2006 05:50:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 05:50:57 -0000
Received: (qmail 69649 invoked by uid 500); 8 Aug 2006 05:50:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69626 invoked by uid 500); 8 Aug 2006 05:50:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69617 invoked by uid 99); 8 Aug 2006 05:50:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 22:50:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 22:50:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E500971429F
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 05:48:14 +0000 (GMT)
Message-ID: <2887850.1155016094934.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 22:48:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-430) http server should die if the
 Datanode fails.
In-Reply-To: <21253528.1154990113889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-430?page=comments#action_12426444 ] 
            
Devaraj Das commented on HADOOP-430:
------------------------------------

Invoking the "stop" method on the StatusHttpServer object should stop the http server. It is currently invoked only in DataNode.shutdown.

> http server should die if the Datanode fails.
> ---------------------------------------------
>
>                 Key: HADOOP-430
>                 URL: http://issues.apache.org/jira/browse/HADOOP-430
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>             Fix For: 0.5.1
>
>         Attachments: RegistrationOrder.patch
>
>
> HADOOP-375 changed the order in which a data node registers and starts its http server.
> Current version first starts the http server, then registers. As a result if the registration fails,
> which can happen e.g. if the datanode has illegal storage id (=does not belong to the cluster),
> the http server keeps running, which makes the data node seem running too.
> I think 2 things need to be done.
> 1) Datanode registration should precede the http server startup.
> 2) The http server should shutdown when the datanode fails (in general).
> I am attaching a patch for the first item.
> Does anybody know how the latter can be done in the version of jetty we are on now?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 06:09:58 2006
Return-Path: 
 <hadoop-dev-return-2995-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17601 invoked from network); 8 Aug 2006 06:09:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 06:09:58 -0000
Received: (qmail 91831 invoked by uid 500); 8 Aug 2006 06:09:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91666 invoked by uid 500); 8 Aug 2006 06:09:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91656 invoked by uid 99); 8 Aug 2006 06:09:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 23:09:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 23:09:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 584F271429F
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 06:07:15 +0000 (GMT)
Message-ID: <11381344.1155017235359.JavaMail.jira@brutus>
Date: Mon, 7 Aug 2006 23:07:15 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-64) DataNode should be capable of
 managing multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-64?page=comments#action_12426452 ] 
            
Yoram Arnon commented on HADOOP-64:
-----------------------------------

for more discussion on the read-only disk issue, see the discussion in HADOOP-163

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 07:55:15 2006
Return-Path: 
 <hadoop-dev-return-2996-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54030 invoked from network); 8 Aug 2006 07:55:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 07:55:15 -0000
Received: (qmail 16430 invoked by uid 500); 8 Aug 2006 07:55:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16406 invoked by uid 500); 8 Aug 2006 07:55:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16356 invoked by uid 99); 8 Aug 2006 07:55:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 00:55:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 00:55:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C73EB7141F2
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 07:52:15 +0000 (GMT)
Message-ID: <7100757.1155023535813.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 00:52:15 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-54?page=all ]

Arun C Murthy updated HADOOP-54:
--------------------------------

    Attachment: SequenceFiles.patch

Here's the patch for block compressed SequenceFiles.

Main attractions:
a) Three different writers for SequenceFiles: Writer, RecordCompressWriter, BlockCompressWriter (with a factory to create the different writers).
b) The 'raw' apis are significantly different (as per previous discussions here)
c) Fixed SequenceFile.Sorter to take advantage of new 'raw' apis and some minor tweak/enhancements there.

As per Owen's suggestion, I've only uploaded the patch... once I get some feedback, I'll go ahead and change the 'status' to 'Patch Available'.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFiles.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 14:15:53 2006
Return-Path: 
 <hadoop-dev-return-2997-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42030 invoked from network); 8 Aug 2006 14:15:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 14:15:53 -0000
Received: (qmail 2348 invoked by uid 500); 8 Aug 2006 14:15:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2254 invoked by uid 500); 8 Aug 2006 14:15:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2234 invoked by uid 99); 8 Aug 2006 14:15:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 07:15:51 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of michael.cafarella@gmail.com
 designates 64.233.162.204 as permitted sender)
Received: from [64.233.162.204] (HELO nz-out-0102.google.com) (64.233.162.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 07:15:50 -0700
Received: by nz-out-0102.google.com with SMTP id z6so236496nzd
        for <hadoop-dev@lucene.apache.org>;
 Tue, 08 Aug 2006 07:15:30 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qD2YMOZ+rJKZPtP2kkfTKLCil3wnJxNbonk2TBkyN9FKv/Lsvckjo3P2kBVM9F+yKALIHGfTsgCIqF9brWmAX0xuGDLS9K/wqsm3hs5D5GGdlZyXRey7j4wK6D4YEDF4qtEhV6i8nXTzXZ8R33oLcVe74cnee8hoyz+cXFumSvs=
Received: by 10.65.240.5 with SMTP id s5mr7861001qbr;
        Tue, 08 Aug 2006 07:15:29 -0700 (PDT)
Received: by 10.65.252.12 with HTTP; Tue, 8 Aug 2006 07:15:29 -0700 (PDT)
Message-ID: <8a8b9f3f0608080715g123951abuec486049f74bc473@mail.gmail.com>
Date: Tue, 8 Aug 2006 07:15:29 -0700
From: "Michael Cafarella" <michael.cafarella@gmail.com>
To: hadoop-user@lucene.apache.org, hadoop-dev@lucene.apache.org,
	nutch-user@lucene.apache.org, nutch-dev@lucene.apache.org,
	nutch-general@lucene.apache.org, dev@lucene.apache.org
Subject: Re: Re: SIGIR meetup?
In-Reply-To: <cac652840608071342h26e404c1j69b6e63eb6f4f79d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_4327_14927545.1155046529446"
References: <8a8b9f3f0607250910y6c651fffy16f7563455746756@mail.gmail.com>
	 <44C667E5.1040900@archive.org>
	 <8a8b9f3f0607270944p14a6139al4d0cc0382665bf9e@mail.gmail.com>
	 <p06230908c0eef9cb4458@10.250.4.187>
	 <cac652840608071342h26e404c1j69b6e63eb6f4f79d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4327_14927545.1155046529446
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Barry (and everyone else),

It's definitely not too late to RSVP for the Nutch/Hadoop meetup.

Remember, it's August 9, in Seattle, WA at 7pm.

BigTime Brewery
4133 University Way NE, Seattle, WA

BigTime is just about a ten minute walk from the main SIGIR venue.

More details here:
http://www.evite.com/app/publicUrl/michael.cafarella@gmail.com/<http://www.evite.com/app/publicUrl/michael.cafarella@gmail.com/>
*nutchparty


See you there!
--Mike


*

------=_Part_4327_14927545.1155046529446--

From MAILER-DAEMON Tue Aug  8 17:19:27 2006
Return-Path: 
 <hadoop-dev-return-2998-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31129 invoked from network); 8 Aug 2006 17:19:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 17:19:27 -0000
Received: (qmail 6632 invoked by uid 500); 8 Aug 2006 17:19:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6486 invoked by uid 500); 8 Aug 2006 17:19:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6470 invoked by uid 99); 8 Aug 2006 17:19:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 10:19:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E304341000C
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 17:16:13 +0000 (GMT)
Message-ID: <15901306.1155057373927.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 10:16:13 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-431) default behaviour of dfsShell -rm
 should resemble 'rm -i', not 'rm -rf'
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

default behaviour of dfsShell -rm should resemble 'rm -i', not 'rm -rf'
-----------------------------------------------------------------------

                 Key: HADOOP-431
                 URL: http://issues.apache.org/jira/browse/HADOOP-431
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Yoram Arnon


when using hadoop dfs -rm <path> the behaviour is like that of rm -rf.
That's very dangerous.
A better behaviour would require a confirmation and allow removal of files only by default. Optional flags would allow recursive and forced deleted.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 17:21:33 2006
Return-Path: 
 <hadoop-dev-return-2999-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31701 invoked from network); 8 Aug 2006 17:21:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 17:21:33 -0000
Received: (qmail 15845 invoked by uid 500); 8 Aug 2006 17:21:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15813 invoked by uid 500); 8 Aug 2006 17:21:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15804 invoked by uid 99); 8 Aug 2006 17:21:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 10:21:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 10:21:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D99C741000C
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 17:18:13 +0000 (GMT)
Message-ID: <13436198.1155057493889.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 10:18:13 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-432) support undelete, snapshots, or other
 mechanism to recover lost files
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

support undelete, snapshots, or other mechanism to recover lost files
---------------------------------------------------------------------

                 Key: HADOOP-432
                 URL: http://issues.apache.org/jira/browse/HADOOP-432
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Yoram Arnon


currently, once you delete a file it's gone forever.
most file systems allow some form of recovery of deleted files.
a simple solution would be an 'undelete' command.
a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 21:26:58 2006
Return-Path: 
 <hadoop-dev-return-3000-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45429 invoked from network); 8 Aug 2006 21:26:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 21:26:58 -0000
Received: (qmail 14905 invoked by uid 500); 8 Aug 2006 21:26:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14739 invoked by uid 500); 8 Aug 2006 21:26:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14730 invoked by uid 99); 8 Aug 2006 21:26:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 14:26:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 14:26:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ED76D41000C
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 21:24:13 +0000 (GMT)
Message-ID: <31236916.1155072253970.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 14:24:13 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-433) Better access to the RecordReader
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Better access to the RecordReader
---------------------------------

                 Key: HADOOP-433
                 URL: http://issues.apache.org/jira/browse/HADOOP-433
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.5.0
            Reporter: Benjamin Reed
            Priority: Minor


The record reader has access to the FileSplit which can in turn have information that is useful to the Mapper. For example, Map processing may vary according to file name or attributes associated with a file. Unfortunately, even using a MapRunner you only have access to the progress wrapper of the RecordReader. To get access to the real record reader I had to use a thread local variable which I set in RecordReader.getNext(). It would be much nicer if you could get a reference to the real RecordReader from the RecordReader passed to MapRunner.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 21:49:59 2006
Return-Path: 
 <hadoop-dev-return-3001-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54698 invoked from network); 8 Aug 2006 21:49:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 21:49:59 -0000
Received: (qmail 52695 invoked by uid 500); 8 Aug 2006 21:49:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52678 invoked by uid 500); 8 Aug 2006 21:49:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52669 invoked by uid 99); 8 Aug 2006 21:49:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 14:49:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 14:49:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 08F4441000C
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 21:47:15 +0000 (GMT)
Message-ID: <4800780.1155073635034.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 14:47:15 -0700 (PDT)
From: "KuroSaka TeruHiko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-323) IO Exception at
 LocalFileSystem.renameRaw, when running Nutch nightly builds (0.8-dev).
In-Reply-To: <7831319.1151344050095.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-323?page=comments#action_12426728 ] 
            
KuroSaka TeruHiko commented on HADOOP-323:
------------------------------------------

Hadoop 0.5 automagically fixes this.
See
http://issues.apache.org/jira/browse/NUTCH-266


> IO Exception at LocalFileSystem.renameRaw, when running Nutch nightly builds (0.8-dev).
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-323
>                 URL: http://issues.apache.org/jira/browse/HADOOP-323
>             Project: Hadoop
>          Issue Type: Bug
>          Components: fs
>    Affects Versions: 0.3.2
>         Environment: Windows XP + CygWin
>            Reporter: KuroSaka TeruHiko
>
> IO Exception at LocalFileSystem.renameRaw, when running Nutch nightly builds (0.8-dev).
> Please see the deatil descriptions in:
> http://issues.apache.org/jira/browse/NUTCH-266
> Not knowing how to reclassify an existing bug, I am opening this new bug under Hadoop.
> The version number is 0.3.3 but because I don't see it in the jira list, I chose the closest matching version.  The Nutch-with-GUI build was running with hadoop-0.2 but stopped running, exhibiting the same symptom with other nightly builds, when switched to use hadoop-0.3.3.
> I checked "fs" as component but this bug could also be caused by the order in which jobs are scheduled, I suspect.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 22:01:59 2006
Return-Path: 
 <hadoop-dev-return-3002-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59780 invoked from network); 8 Aug 2006 22:01:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:01:59 -0000
Received: (qmail 73043 invoked by uid 500); 8 Aug 2006 22:01:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73013 invoked by uid 500); 8 Aug 2006 22:01:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73000 invoked by uid 99); 8 Aug 2006 22:01:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:01:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:01:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C253441000C
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 21:59:14 +0000 (GMT)
Message-ID: <19242906.1155074354793.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 14:59:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-424) mapreduce jobs fail when no split is
 returned via inputFormat.getSplits
In-Reply-To: <16027160.1154704034944.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-424?page=3Dcomments#actio=
n_12426736 ]=20
           =20
Doug Cutting commented on HADOOP-424:
-------------------------------------

I agree that this should not fail.  Can you please modify one of the mini-m=
r unit tests to test for this case and submit that as a patch?

> mapreduce jobs fail when no split is returned via inputFormat.getSplits
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-424
>                 URL: http://issues.apache.org/jira/browse/HADOOP-424
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Fr=C3=A9d=C3=A9ric Bertin
>
> I'm using a MapReduce job to process some data logged and timestamped int=
o files.
> When the job runs, it does not process the whole data, but filters only t=
he data that has been logged since the last job run.
> However, when no new data has been logged, the job fails because the getS=
plits method of InputFormat returns no split. Thus the number of map tasks =
is 0. This is not intercepted, and the job fails at reduce step because it =
seems it does not find any data to process:
> java.io.FileNotFoundException: /local/home/hadoop/var/mapred/local/task_0=
030_r_000000_3/all.2 at org.apache.hadoop.fs.LocalFileSystem.openRaw(LocalF=
ileSystem.java:121) at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDa=
taInputStream.java:47) at org.apache.hadoop.fs.FSDataInputStream.(FSDataInp=
utStream.java:221) at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:=
150) at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:259) at=
 org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:253) at org.ap=
ache.hadoop.mapred.ReduceTask.run(ReduceTask.java:241) at org.apache.hadoop=
.mapred.TaskTracker$Child.main(TaskTracker.java:1013)
> What should be Hadoop's behaviour in such a case?
> IMHO, the job should be considered as successful. Indeed, this is not a j=
ob failure, but just a lack of input data. WDYT?

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Tue Aug  8 22:05:59 2006
Return-Path: 
 <hadoop-dev-return-3003-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61163 invoked from network); 8 Aug 2006 22:05:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:05:59 -0000
Received: (qmail 78383 invoked by uid 500); 8 Aug 2006 22:05:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78359 invoked by uid 500); 8 Aug 2006 22:05:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78349 invoked by uid 99); 8 Aug 2006 22:05:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:05:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:05:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C9FCD410010
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 22:03:15 +0000 (GMT)
Message-ID: <31816551.1155074595824.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 15:03:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-307) Many small jobs benchmark for
 MapReduce
In-Reply-To: <13009062.1150636529837.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-307?page=comments#action_12426737 ] 
            
Doug Cutting commented on HADOOP-307:
-------------------------------------

Can you please create a new issue for this patch?  Since the release of 0.5.0, this issue was closed.

In general, once a patch is committed and the issue is resolved then subsequent patches should be attached to new issues.

> Many small jobs benchmark for MapReduce
> ---------------------------------------
>
>                 Key: HADOOP-307
>                 URL: http://issues.apache.org/jira/browse/HADOOP-307
>             Project: Hadoop
>          Issue Type: Task
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>             Fix For: 0.5.0
>
>         Attachments: patch.txt, patch.txt, patch.txt
>
>
> A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 22:08:03 2006
Return-Path: 
 <hadoop-dev-return-3004-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62535 invoked from network); 8 Aug 2006 22:08:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:08:03 -0000
Received: (qmail 85849 invoked by uid 500); 8 Aug 2006 22:08:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85804 invoked by uid 500); 8 Aug 2006 22:08:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85790 invoked by uid 99); 8 Aug 2006 22:08:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:08:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:07:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0B3C7410011
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 22:05:17 +0000 (GMT)
Message-ID: <30682508.1155074717043.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 15:05:17 -0700 (PDT)
From: "paul sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-433) Better access to the RecordReader
In-Reply-To: <31236916.1155072253970.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-433?page=comments#action_12426741 ] 
            
paul sutter commented on HADOOP-433:
------------------------------------


we encounter this need all the time, and are always blocked by that progress wrapper.

another way might be to just inject the split information into the jobconf when the split is opened by the maptask.



> Better access to the RecordReader
> ---------------------------------
>
>                 Key: HADOOP-433
>                 URL: http://issues.apache.org/jira/browse/HADOOP-433
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>            Priority: Minor
>
> The record reader has access to the FileSplit which can in turn have information that is useful to the Mapper. For example, Map processing may vary according to file name or attributes associated with a file. Unfortunately, even using a MapRunner you only have access to the progress wrapper of the RecordReader. To get access to the real record reader I had to use a thread local variable which I set in RecordReader.getNext(). It would be much nicer if you could get a reference to the real RecordReader from the RecordReader passed to MapRunner.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 22:19:00 2006
Return-Path: 
 <hadoop-dev-return-3005-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66933 invoked from network); 8 Aug 2006 22:19:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:19:00 -0000
Received: (qmail 7817 invoked by uid 500); 8 Aug 2006 22:19:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7784 invoked by uid 500); 8 Aug 2006 22:19:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7774 invoked by uid 99); 8 Aug 2006 22:18:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:18:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:18:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 69F0841000E
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 22:16:16 +0000 (GMT)
Message-ID: <27942509.1155075376431.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 15:16:16 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-307) Many small jobs benchmark for
 MapReduce
In-Reply-To: <13009062.1150636529837.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-307?page=comments#action_12426751 ] 
            
Sanjay Dahiya commented on HADOOP-307:
--------------------------------------

ok, I will create a new issue for this. 

> Many small jobs benchmark for MapReduce
> ---------------------------------------
>
>                 Key: HADOOP-307
>                 URL: http://issues.apache.org/jira/browse/HADOOP-307
>             Project: Hadoop
>          Issue Type: Task
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>             Fix For: 0.5.0
>
>         Attachments: patch.txt, patch.txt, patch.txt
>
>
> A benchmark that runs many small MapReduce tasks in sequence. A single map reduce implementation is used, it is invoked multiple times with input as the output from previous run. The input to first Map is a TextInputFormat ( a text file with few hundred KBs). Input records are passed to output without much processing. The idea is to benchmark the time taken by initialization of Mapper and Reducer. An initial prototyping on a single machine with 20 MR tasks in sequence took ~47 seconds per task. Looking for suggestions on what else can be included in the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 22:22:58 2006
Return-Path: 
 <hadoop-dev-return-3006-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68426 invoked from network); 8 Aug 2006 22:22:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:22:58 -0000
Received: (qmail 13918 invoked by uid 500); 8 Aug 2006 22:22:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13899 invoked by uid 500); 8 Aug 2006 22:22:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13890 invoked by uid 99); 8 Aug 2006 22:22:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:22:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:22:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E463B41000C
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 22:20:13 +0000 (GMT)
Message-ID: <20188000.1155075613933.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 15:20:13 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-434) Use Hadoop scripts to run
 smallJobsBenchmark to avoid classpath issues.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Use Hadoop scripts to run smallJobsBenchmark to avoid classpath issues. 
------------------------------------------------------------------------

                 Key: HADOOP-434
                 URL: http://issues.apache.org/jira/browse/HADOOP-434
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
            Reporter: Sanjay Dahiya
         Assigned To: Sanjay Dahiya


Small job benchmark uses its own scripts to set classpath, it should use hadoop scripts with ProgramDriver to run the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 22:24:58 2006
Return-Path: 
 <hadoop-dev-return-3007-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69005 invoked from network); 8 Aug 2006 22:24:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:24:58 -0000
Received: (qmail 15485 invoked by uid 500); 8 Aug 2006 22:24:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15452 invoked by uid 500); 8 Aug 2006 22:24:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15443 invoked by uid 99); 8 Aug 2006 22:24:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:24:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:24:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C6FD841000C
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 22:22:14 +0000 (GMT)
Message-ID: <27120136.1155075734812.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 15:22:14 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-434) Use Hadoop scripts to run
 smallJobsBenchmark to avoid classpath issues.
In-Reply-To: <20188000.1155075613933.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-434?page=all ]

Sanjay Dahiya updated HADOOP-434:
---------------------------------

    Attachment: patch.txt

Patch is attached for this. 

> Use Hadoop scripts to run smallJobsBenchmark to avoid classpath issues.
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-434
>                 URL: http://issues.apache.org/jira/browse/HADOOP-434
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>         Attachments: patch.txt
>
>
> Small job benchmark uses its own scripts to set classpath, it should use hadoop scripts with ProgramDriver to run the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 22:26:59 2006
Return-Path: 
 <hadoop-dev-return-3008-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69316 invoked from network); 8 Aug 2006 22:26:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:26:59 -0000
Received: (qmail 19813 invoked by uid 500); 8 Aug 2006 22:26:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19643 invoked by uid 500); 8 Aug 2006 22:26:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19634 invoked by uid 99); 8 Aug 2006 22:26:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:26:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:26:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E739F41000C
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 22:24:14 +0000 (GMT)
Message-ID: <28633306.1155075854944.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 15:24:14 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-434) Use Hadoop scripts to run
 smallJobsBenchmark to avoid classpath issues.
In-Reply-To: <20188000.1155075613933.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-434?page=all ]

Sanjay Dahiya updated HADOOP-434:
---------------------------------

    Status: Patch Available  (was: Open)

> Use Hadoop scripts to run smallJobsBenchmark to avoid classpath issues.
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-434
>                 URL: http://issues.apache.org/jira/browse/HADOOP-434
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>         Attachments: patch.txt
>
>
> Small job benchmark uses its own scripts to set classpath, it should use hadoop scripts with ProgramDriver to run the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 22:32:03 2006
Return-Path: 
 <hadoop-dev-return-3010-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71660 invoked from network); 8 Aug 2006 22:32:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:32:03 -0000
Received: (qmail 28883 invoked by uid 500); 8 Aug 2006 22:32:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28862 invoked by uid 500); 8 Aug 2006 22:32:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28853 invoked by uid 99); 8 Aug 2006 22:32:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:32:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:32:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D284041000E
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 22:29:14 +0000 (GMT)
Message-ID: <4259476.1155076154859.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 15:29:14 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-89) files are not visible until they are
 closed
In-Reply-To: <1845748515.1142561833009.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-89?page=all ]

Wendy Chien updated HADOOP-89:
------------------------------

    Status: Patch Available  (was: Open)

> files are not visible until they are closed
> -------------------------------------------
>
>                 Key: HADOOP-89
>                 URL: http://issues.apache.org/jira/browse/HADOOP-89
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.1.0
>            Reporter: Yoram Arnon
>            Priority: Critical
>
> the current behaviour, whereby a file is not visible until it is closed has several flaws,including:
> 1. no practical way to know if a file/job is progressing
> 2. no way to implement files that never close, such as log files
> 3. failure to close a file results in loss of the file
> The part of the file that's written should be visible.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 22:32:05 2006
Return-Path: 
 <hadoop-dev-return-3011-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71700 invoked from network); 8 Aug 2006 22:32:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:32:05 -0000
Received: (qmail 29096 invoked by uid 500); 8 Aug 2006 22:32:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29057 invoked by uid 500); 8 Aug 2006 22:32:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29048 invoked by uid 99); 8 Aug 2006 22:32:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:32:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:32:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D0AF7410010
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 22:29:15 +0000 (GMT)
Message-ID: <33213189.1155076155852.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 15:29:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-427) DatanodeInfo class should be used
 instead of DatanodeDescriptor in the jsp & related files
In-Reply-To: <8607246.1154977274892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-427?page=all ]

Doug Cutting resolved HADOOP-427.
---------------------------------

    Fix Version/s: 0.6.0
                       (was: 0.5.1)
       Resolution: Fixed

I committed this.  Thanks!

> DatanodeInfo class should be used instead of DatanodeDescriptor in the jsp & related files
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-427
>                 URL: http://issues.apache.org/jira/browse/HADOOP-427
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>             Fix For: 0.6.0
>
>         Attachments: refactor_datanodeinfo.patch
>
>
> DatanodeDescriptor should be replaced by DatanodeInfo since DatanodeInfo is a public class and meant to be used by others. Specifically, DatanodeDescriptor is referenced in dfshealth.jsp & JspHelper.java files. Change those references to DatanodeInfo.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 22:32:01 2006
Return-Path: 
 <hadoop-dev-return-3009-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71619 invoked from network); 8 Aug 2006 22:32:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:32:01 -0000
Received: (qmail 28829 invoked by uid 500); 8 Aug 2006 22:32:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28653 invoked by uid 500); 8 Aug 2006 22:32:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28643 invoked by uid 99); 8 Aug 2006 22:32:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:32:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:31:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D1C59410011
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 22:29:16 +0000 (GMT)
Message-ID: <6486411.1155076156856.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 15:29:16 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-89) files are not visible until they are
 closed
In-Reply-To: <1845748515.1142561833009.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-89?page=all ]

Wendy Chien updated HADOOP-89:
------------------------------

    Status: Open  (was: Patch Available)

> files are not visible until they are closed
> -------------------------------------------
>
>                 Key: HADOOP-89
>                 URL: http://issues.apache.org/jira/browse/HADOOP-89
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.1.0
>            Reporter: Yoram Arnon
>            Priority: Critical
>
> the current behaviour, whereby a file is not visible until it is closed has several flaws,including:
> 1. no practical way to know if a file/job is progressing
> 2. no way to implement files that never close, such as log files
> 3. failure to close a file results in loss of the file
> The part of the file that's written should be visible.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 22:37:00 2006
Return-Path: 
 <hadoop-dev-return-3012-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72605 invoked from network); 8 Aug 2006 22:37:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:37:00 -0000
Received: (qmail 33547 invoked by uid 500); 8 Aug 2006 22:36:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33523 invoked by uid 500); 8 Aug 2006 22:36:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33514 invoked by uid 99); 8 Aug 2006 22:36:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:36:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:36:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EF8DF71421B
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 22:34:15 +0000 (GMT)
Message-ID: <21760202.1155076455978.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 15:34:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-181) task trackers should not restart for
 having a late heartbeat
In-Reply-To: <701484.1146509206378.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-181?page=comments#action_12426757 ] 
            
Doug Cutting commented on HADOOP-181:
-------------------------------------

It strikes me that we should instead improve detection of task tracker death, rather than to try to revive things when we mistakenly decide one is dead.  Thoughts?

> task trackers should not restart for having a late heartbeat
> ------------------------------------------------------------
>
>                 Key: HADOOP-181
>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.6.0
>
>         Attachments: lost-heartbeat.patch
>
>
> TaskTrackers should not close and restart themselves for having a late heartbeat. The JobTracker should just accept their current status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 22:42:02 2006
Return-Path: 
 <hadoop-dev-return-3013-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73591 invoked from network); 8 Aug 2006 22:42:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:42:02 -0000
Received: (qmail 39375 invoked by uid 500); 8 Aug 2006 22:42:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39350 invoked by uid 500); 8 Aug 2006 22:42:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39330 invoked by uid 99); 8 Aug 2006 22:42:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:42:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:42:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AEC687142CC
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 22:39:17 +0000 (GMT)
Message-ID: <17871510.1155076757713.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 15:39:17 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-431) default behaviour of dfsShell -rm
 should resemble 'rm -i', not 'rm -rf'
In-Reply-To: <15901306.1155057373927.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-431?page=comments#action_12426760 ] 
            
Owen O'Malley commented on HADOOP-431:
--------------------------------------

-1 on making -i the default. (*smile* "-1" even looks like "-i")

Part of the problem with even making the unix default the default is that in Hadoop, every logical file is modelled as a directory with a bunch of files in it (eg. my-data/part-* ). I'd suggest that the default should be willing to delete a first-level directory, but not a second-level or higher directory. (I'm defining a first-level directory to mean a directory with no sub-directories.)

> default behaviour of dfsShell -rm should resemble 'rm -i', not 'rm -rf'
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-431
>                 URL: http://issues.apache.org/jira/browse/HADOOP-431
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Yoram Arnon
>
> when using hadoop dfs -rm <path> the behaviour is like that of rm -rf.
> That's very dangerous.
> A better behaviour would require a confirmation and allow removal of files only by default. Optional flags would allow recursive and forced deleted.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 22:46:04 2006
Return-Path: 
 <hadoop-dev-return-3014-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75751 invoked from network); 8 Aug 2006 22:46:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:46:04 -0000
Received: (qmail 42276 invoked by uid 500); 8 Aug 2006 22:46:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42245 invoked by uid 500); 8 Aug 2006 22:46:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42236 invoked by uid 99); 8 Aug 2006 22:46:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:46:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:46:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 39FA971421B
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 22:43:15 +0000 (GMT)
Message-ID: <15205973.1155076995235.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 15:43:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-426) streaming unit tests failing on SunOS
In-Reply-To: <3488634.1154733854019.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-426?page=all ]

Doug Cutting resolved HADOOP-426.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Michel.

> streaming unit tests failing on SunOS
> -------------------------------------
>
>                 Key: HADOOP-426
>                 URL: http://issues.apache.org/jira/browse/HADOOP-426
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Doug Cutting
>         Assigned To: Michel Tourn
>             Fix For: 0.6.0
>
>         Attachments: sunos.patch
>
>
> This is causing nightly builds to fail, since these run on a Solaris box.
> java.lang.RuntimeException: Operating system SunOS not supported by this class
>         at org.apache.hadoop.streaming.Environment.<init>(Environment.java:47)
>         at org.apache.hadoop.streaming.StreamJob.init(StreamJob.java:68)
>         at org.apache.hadoop.streaming.StreamJob.go(StreamJob.java:55)
>         at org.apache.hadoop.streaming.TestStreaming.testCommandLine(Unknown Sour

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 22:51:09 2006
Return-Path: 
 <hadoop-dev-return-3016-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76679 invoked from network); 8 Aug 2006 22:51:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:51:09 -0000
Received: (qmail 46654 invoked by uid 500); 8 Aug 2006 22:51:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46625 invoked by uid 500); 8 Aug 2006 22:51:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46616 invoked by uid 99); 8 Aug 2006 22:51:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:51:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:51:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C705A71421B
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 22:48:15 +0000 (GMT)
Message-ID: <3551625.1155077295812.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 15:48:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-433) Better access to the RecordReader
In-Reply-To: <31236916.1155072253970.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-433?page=comments#action_12426763 ] 
            
Owen O'Malley commented on HADOOP-433:
--------------------------------------

This is largely addressed by the extensions I put into the JobConf task localization code. Look at MapTask.localizeConfiguration.

In particular, each Mapper has available to it:
map.input.file
map.input.start
map.input.length

For application writers that don't want to read the Hadoop code, I've put the list of attributes in:
http://wiki.apache.org/lucene-hadoop/TaskExecutionEnvironment

This will let you get an equivalent RecordReader even if it is not the same object. Will that address your problem?

> Better access to the RecordReader
> ---------------------------------
>
>                 Key: HADOOP-433
>                 URL: http://issues.apache.org/jira/browse/HADOOP-433
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>            Priority: Minor
>
> The record reader has access to the FileSplit which can in turn have information that is useful to the Mapper. For example, Map processing may vary according to file name or attributes associated with a file. Unfortunately, even using a MapRunner you only have access to the progress wrapper of the RecordReader. To get access to the real record reader I had to use a thread local variable which I set in RecordReader.getNext(). It would be much nicer if you could get a reference to the real RecordReader from the RecordReader passed to MapRunner.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 22:51:02 2006
Return-Path: 
 <hadoop-dev-return-3015-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76555 invoked from network); 8 Aug 2006 22:51:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:51:02 -0000
Received: (qmail 46178 invoked by uid 500); 8 Aug 2006 22:51:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46152 invoked by uid 500); 8 Aug 2006 22:51:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46143 invoked by uid 99); 8 Aug 2006 22:51:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:51:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:51:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CF8C041000E
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 22:48:17 +0000 (GMT)
Message-ID: <11748472.1155077297847.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 15:48:17 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-64) DataNode should be capable of
 managing multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-64?page=comments#action_12426764 ] 
            
Milind Bhandarkar commented on HADOOP-64:
-----------------------------------------

Thanks for your inputs Yoram, Konstantin, Bryan, Sameer.

Here is my modified proposal:

1. The config parameter dfs.data.dir could have a list of directories separated by commas.
2. Another config parameter (client.buffer.dir) will contain comma-separated list of directories for buffering blocks until they are sent to datanode. DFS client will manage the in-memory map of blocks to these directories.
3. Datanode will maintain a map in memory of blockid's mapped to storage locations.
4. Datanode will choose appropriate location to write a block based on a separate block-to-volume placement strategy. Information about volumes will be made available to this strategy with DF.
5. Datanode will try to report correct available diskspace by appropriately taking into account the space reported by DF on each volume. If the mount point is same for more than one volume, then the available disk space will not be counted twice.
6. Storage-ID will be unique per data node, and will be stored in each of the volumes at top levels.
7. Each volume will further be separated into a shallow directory hierarchy, with maximum of N blocks per directory. This block to directory mapping will also be maintained in a hashtable by datanode. as a directory fills up, new directory will be created as a sibling, upto a maximum of N siblings. Then second level of directories will start. The parameter N can be specified as a config variable "dfs.data.numdir".
8. Only if all the volumes specified in dfs.data.dir are read-only, the datanode will shutdown. Otherwise, it will log the readonly directories, and treat them as if they were never specified in dfs.data.dir list. This behavior is consistent with current state of implementation.

If there are any other issues to think about, please comment.


> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 22:56:59 2006
Return-Path: 
 <hadoop-dev-return-3017-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77975 invoked from network); 8 Aug 2006 22:56:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:56:59 -0000
Received: (qmail 52236 invoked by uid 500); 8 Aug 2006 22:56:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52212 invoked by uid 500); 8 Aug 2006 22:56:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52203 invoked by uid 99); 8 Aug 2006 22:56:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:56:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:56:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 59B187142CC
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 22:54:15 +0000 (GMT)
Message-ID: <6749740.1155077655364.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 15:54:15 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-324) "IOException: No space left on device"
 is handled incorrectly
In-Reply-To: <18409093.1151369969863.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-324?page=all ]

Wendy Chien updated HADOOP-324:
-------------------------------

    Attachment: hadoop-324.patch

This patch fixes the problem by checking the message of the IOException to see if it is "No space left on device".   If so, then it throws a new DiskOutOfSpaceException and does not shutdown.  If not, then it does what it originally did, shutdown.  

If there are objections to this way, please let me know.

> "IOException: No space left on device" is handled incorrectly
> -------------------------------------------------------------
>
>                 Key: HADOOP-324
>                 URL: http://issues.apache.org/jira/browse/HADOOP-324
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Wendy Chien
>         Attachments: hadoop-324.patch
>
>
> When a data node disk is almost full the name node still assigns blocks to the data node.
> By the time the data node actually tries to write that data to disk the disk may become full.
> Current implementation forces the data node to shutdown after that.
> The expected behavior is to report the block write failure and continue.
> The Exception looks as follows:
> java.io.IOException: No space left on device
> at java.io.FileOutputStream.writeBytes(Native Method)
> at java.io.FileOutputStream.write(FileOutputStream.java:260)
> at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
> at java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)
> at java.io.DataOutputStream.write(DataOutputStream.java:90)
> at org.apache.hadoop.dfs.DataNode$DataXceiver.writeBlock(DataNode.java:623)
> at org.apache.hadoop.dfs.DataNode$DataXceiver.run(DataNode.java:410)
> at java.lang.Thread.run(Thread.java:595)
> 2006-06-26 08:26:04,751 INFO org.apache.hadoop.dfs.DataNode: Finishing DataNode in: /tmp/hadoop/dfs/data/data

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 22:57:01 2006
Return-Path: 
 <hadoop-dev-return-3018-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78013 invoked from network); 8 Aug 2006 22:57:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:57:01 -0000
Received: (qmail 52452 invoked by uid 500); 8 Aug 2006 22:57:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52403 invoked by uid 500); 8 Aug 2006 22:57:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52394 invoked by uid 99); 8 Aug 2006 22:57:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:57:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:56:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD15E41000B
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 22:54:16 +0000 (GMT)
Message-ID: <26073220.1155077656837.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 15:54:16 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-324) "IOException: No space left on
 device" is handled incorrectly
In-Reply-To: <18409093.1151369969863.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-324?page=all ]

Work on HADOOP-324 started by Wendy Chien.

> "IOException: No space left on device" is handled incorrectly
> -------------------------------------------------------------
>
>                 Key: HADOOP-324
>                 URL: http://issues.apache.org/jira/browse/HADOOP-324
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Wendy Chien
>         Attachments: hadoop-324.patch
>
>
> When a data node disk is almost full the name node still assigns blocks to the data node.
> By the time the data node actually tries to write that data to disk the disk may become full.
> Current implementation forces the data node to shutdown after that.
> The expected behavior is to report the block write failure and continue.
> The Exception looks as follows:
> java.io.IOException: No space left on device
> at java.io.FileOutputStream.writeBytes(Native Method)
> at java.io.FileOutputStream.write(FileOutputStream.java:260)
> at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
> at java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)
> at java.io.DataOutputStream.write(DataOutputStream.java:90)
> at org.apache.hadoop.dfs.DataNode$DataXceiver.writeBlock(DataNode.java:623)
> at org.apache.hadoop.dfs.DataNode$DataXceiver.run(DataNode.java:410)
> at java.lang.Thread.run(Thread.java:595)
> 2006-06-26 08:26:04,751 INFO org.apache.hadoop.dfs.DataNode: Finishing DataNode in: /tmp/hadoop/dfs/data/data

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 22:57:05 2006
Return-Path: 
 <hadoop-dev-return-3019-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78092 invoked from network); 8 Aug 2006 22:57:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 22:57:05 -0000
Received: (qmail 52685 invoked by uid 500); 8 Aug 2006 22:57:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52655 invoked by uid 500); 8 Aug 2006 22:57:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52634 invoked by uid 99); 8 Aug 2006 22:57:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:57:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 15:57:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B8B441000C
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 22:54:18 +0000 (GMT)
Message-ID: <28216619.1155077658307.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 15:54:18 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-324) "IOException: No space left on device"
 is handled incorrectly
In-Reply-To: <18409093.1151369969863.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-324?page=all ]

Wendy Chien updated HADOOP-324:
-------------------------------

    Status: Patch Available  (was: In Progress)

> "IOException: No space left on device" is handled incorrectly
> -------------------------------------------------------------
>
>                 Key: HADOOP-324
>                 URL: http://issues.apache.org/jira/browse/HADOOP-324
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Wendy Chien
>         Attachments: hadoop-324.patch
>
>
> When a data node disk is almost full the name node still assigns blocks to the data node.
> By the time the data node actually tries to write that data to disk the disk may become full.
> Current implementation forces the data node to shutdown after that.
> The expected behavior is to report the block write failure and continue.
> The Exception looks as follows:
> java.io.IOException: No space left on device
> at java.io.FileOutputStream.writeBytes(Native Method)
> at java.io.FileOutputStream.write(FileOutputStream.java:260)
> at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
> at java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)
> at java.io.DataOutputStream.write(DataOutputStream.java:90)
> at org.apache.hadoop.dfs.DataNode$DataXceiver.writeBlock(DataNode.java:623)
> at org.apache.hadoop.dfs.DataNode$DataXceiver.run(DataNode.java:410)
> at java.lang.Thread.run(Thread.java:595)
> 2006-06-26 08:26:04,751 INFO org.apache.hadoop.dfs.DataNode: Finishing DataNode in: /tmp/hadoop/dfs/data/data

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug  8 23:07:02 2006
Return-Path: 
 <hadoop-dev-return-3020-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80270 invoked from network); 8 Aug 2006 23:07:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 23:07:02 -0000
Received: (qmail 67567 invoked by uid 500); 8 Aug 2006 23:07:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67537 invoked by uid 500); 8 Aug 2006 23:07:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67524 invoked by uid 99); 8 Aug 2006 23:07:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 16:07:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 16:07:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 290CD7142C9
	for <hadoop-dev@lucene.apache.org>; Tue,  8 Aug 2006 23:04:17 +0000 (GMT)
Message-ID: <28968064.1155078257165.JavaMail.jira@brutus>
Date: Tue, 8 Aug 2006 16:04:17 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-64) DataNode should be capable of
 managing multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-64?page=comments#action_12426770 ] 
            
Yoram Arnon commented on HADOOP-64:
-----------------------------------

We could consider the datanode doing some kind of best effort if one volume is read-only, by copying that volume's data locally to the other volumes before shutting down the bad volume. Best effort only - if there isn't enough space for everything then just copy what you can and move on. It may decrease the number of blocks that need to be replicated over the network.

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  9 12:52:01 2006
Return-Path: 
 <hadoop-dev-return-3021-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37561 invoked from network); 9 Aug 2006 12:52:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 12:52:01 -0000
Received: (qmail 108 invoked by uid 500); 9 Aug 2006 12:52:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99983 invoked by uid 500); 9 Aug 2006 12:52:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99974 invoked by uid 99); 9 Aug 2006 12:52:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 05:52:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 05:51:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D2A927141F5
	for <hadoop-dev@lucene.apache.org>; Wed,  9 Aug 2006 12:49:15 +0000 (GMT)
Message-ID: <21085184.1155127755859.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 05:49:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-181) task trackers should not restart for
 having a late heartbeat
In-Reply-To: <701484.1146509206378.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-181?page=comments#action_12426909 ] 
            
Devaraj Das commented on HADOOP-181:
------------------------------------

I am open to a discussion on this but I thought that while we are discussing the possible solutions to the TaskTracker heartbeat problem in Hadoop-312 (I am actually testing a patch with increased queue length + retries), I think we can consider this patch as a solution to the problem raised in this Jira issue. Doesn't harm I think.

> task trackers should not restart for having a late heartbeat
> ------------------------------------------------------------
>
>                 Key: HADOOP-181
>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.6.0
>
>         Attachments: lost-heartbeat.patch
>
>
> TaskTrackers should not close and restart themselves for having a late heartbeat. The JobTracker should just accept their current status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  9 13:49:02 2006
Return-Path: 
 <hadoop-dev-return-3022-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63963 invoked from network); 9 Aug 2006 13:49:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 13:49:02 -0000
Received: (qmail 31222 invoked by uid 500); 9 Aug 2006 13:49:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31192 invoked by uid 500); 9 Aug 2006 13:49:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31183 invoked by uid 99); 9 Aug 2006 13:49:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 06:49:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 06:49:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 212547141F2
	for <hadoop-dev@lucene.apache.org>; Wed,  9 Aug 2006 13:46:16 +0000 (GMT)
Message-ID: <10361416.1155131176132.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 06:46:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-400) the job tracker re-runs failed tasks
 on the same node
In-Reply-To: <33242031.1154118913944.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-400?page=all ]

Doug Cutting updated HADOOP-400:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> the job tracker re-runs failed tasks on the same node
> -----------------------------------------------------
>
>                 Key: HADOOP-400
>                 URL: http://issues.apache.org/jira/browse/HADOOP-400
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: task-schedule.patch
>
>
> The job tracker tries not to run tasks that have previously failed on a node on that node again, but it doesn't strictly prevent it.
> I propose to change the rule so that when pollForNewTask is called by a TaskTracker, the JobTracker will only assign it a task that has failed on that TaskTracker, if and only if it has already failed on the entire cluster. Thus, for "normal" clusters with more than 4 TaskTrackers, you will be guaranteed that it will run on 4 different TaskTrackers. For small clusters, it will run on every TaskTracker in the cluster at least once.
> Does that sound reasonable to everyone?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  9 14:24:09 2006
Return-Path: 
 <hadoop-dev-return-3023-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75452 invoked from network); 9 Aug 2006 14:24:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 14:24:09 -0000
Received: (qmail 17733 invoked by uid 500); 9 Aug 2006 14:24:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17690 invoked by uid 500); 9 Aug 2006 14:24:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17560 invoked by uid 99); 9 Aug 2006 14:24:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 07:24:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 07:24:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3C3FA71429D
	for <hadoop-dev@lucene.apache.org>; Wed,  9 Aug 2006 14:21:18 +0000 (GMT)
Message-ID: <17565252.1155133278244.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 07:21:18 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-433) Better access to the RecordReader
In-Reply-To: <31236916.1155072253970.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-433?page=comments#action_12426928 ] 
            
Benjamin Reed commented on HADOOP-433:
--------------------------------------

If I understand correctly, you are suggesting that I instantiate another RecordReader using the information in JobConf. If I do that, progress will not be updated correctly unless I also do that myself. At that point it is easier to just do the ThreadLocal variable hack I currently use to get the real RecordReader. In both cases you are looking at just a few lines of code, but it is ugly-silly-slightly-confusing code.

> Better access to the RecordReader
> ---------------------------------
>
>                 Key: HADOOP-433
>                 URL: http://issues.apache.org/jira/browse/HADOOP-433
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>            Priority: Minor
>
> The record reader has access to the FileSplit which can in turn have information that is useful to the Mapper. For example, Map processing may vary according to file name or attributes associated with a file. Unfortunately, even using a MapRunner you only have access to the progress wrapper of the RecordReader. To get access to the real record reader I had to use a thread local variable which I set in RecordReader.getNext(). It would be much nicer if you could get a reference to the real RecordReader from the RecordReader passed to MapRunner.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  9 14:27:07 2006
Return-Path: 
 <hadoop-dev-return-3024-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76705 invoked from network); 9 Aug 2006 14:27:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 14:27:07 -0000
Received: (qmail 35515 invoked by uid 500); 9 Aug 2006 14:27:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35480 invoked by uid 500); 9 Aug 2006 14:27:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35453 invoked by uid 99); 9 Aug 2006 14:26:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 07:26:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 07:26:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5A6C17141F2
	for <hadoop-dev@lucene.apache.org>; Wed,  9 Aug 2006 14:24:15 +0000 (GMT)
Message-ID: <18110284.1155133455367.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 07:24:15 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Sanjay Dahiya updated HADOOP-263:
---------------------------------

    Attachment: patch.txt

A new patch, now shows start, finish times for tasks and shuffle/sort finished time for reduce tasks. 
few points, which should probably be separate issues. 
- TaskStatus, TeskReport replicate some status data which is present as member variables in TaskTracker.TaskInProgress, TaskInProgress. We can reduce the duplication of data by maintaining objects of TaskStatus and get/set from that directly, using simple composition. 
- The status string passed around needs to be a public static final String defined in TaskStatus and used everywhere else, so it can be compared against reliably wrt future changes. Currently its reduce > copy (...), reduce > sort, reduce > reduce.


> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  9 14:46:06 2006
Return-Path: 
 <hadoop-dev-return-3025-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84440 invoked from network); 9 Aug 2006 14:46:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 14:46:06 -0000
Received: (qmail 82780 invoked by uid 500); 9 Aug 2006 14:46:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82759 invoked by uid 500); 9 Aug 2006 14:46:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82750 invoked by uid 99); 9 Aug 2006 14:46:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 07:46:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 07:46:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DF69A7141F2
	for <hadoop-dev@lucene.apache.org>; Wed,  9 Aug 2006 14:43:13 +0000 (GMT)
Message-ID: <23406804.1155134593912.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 07:43:13 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-435) Encapsulating startup scripts and jars
 in a single Jar file.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Encapsulating startup scripts and jars in a single Jar file.
------------------------------------------------------------

                 Key: HADOOP-435
                 URL: http://issues.apache.org/jira/browse/HADOOP-435
             Project: Hadoop
          Issue Type: New Feature
    Affects Versions: 0.5.0
            Reporter: Benjamin Reed
         Attachments: hadoopit.patch

Currently, hadoop is a set of scripts, configurations, and jar files. It makes it a pain to install on compute and datanodes. It also makes it a pain to setup clients so that they can use hadoop. Everytime things are updated the pain begins again.

I suggest that we should be able to build a single Jar file that has a Main-Class defined with the configuration built in so that we can distribute that one file to nodes and clients on updates. One nice thing that I haven't done would be to make the jarfile downloadable from the JobTracker webpage so that clients can easily submit the jobs.

I currently use such a setup on my small cluster. To start the job tracker I used "java -jar hadoop.jar -l /tmp/log jobtracker" to submit a job I use "java -jar hadoop.jar jar wordcount.jar". I used the client on my linux and Mac OSX machines and I'll I need installed in java and the hadoop.jar file.

hadoop.jar helps with logfiles and configurations. The default of pulling the config files from the jar file can be overridden by specifying a config directory so that you can easily have machine specific configs and still have the same hadoop.jar on all machines.

Here are the available commands from hadoop.jar:
USAGE: hadoop [-l logdir] command
  User commands:
    dfs          run a DFS admin client
    jar          run a JAR file
    job          manipulate MapReduce jobs
    fsck         run a DFS filesystem check utility
  Runtime startup commands:
    datanode     run a DFS datanode
    jobtracker   run the MapReduce job Tracker node
    namenode     run the DFS namenode (namenode -format formats the FS)
    tasktracker  run a MapReduce task Tracker node
  HadoopLoader commands:
    buildJar     builds the HadoopLoader jar file
    conf         dump hadoop configuration

Note, I don't have the classes for hadoop streaming built into this Jar file, but if I had that would also be an option (it checks for needed classes before displaying an option). It makes it very easy for users that just write scripts to use hadoop straight from their machines.

I'm also attaching the start.sh and stop.sh scripts that I use. These are the only scripts I use to startup the daemons. They are very simple and the start.sh script uses the config file to figure out whether or not to start the jobtracker and the nameserver.

The attached patch adds the HadoopIt patch, modifies the Configuration class to find the config files correctly, and modifies the build to make a fully contained hadoop.jar. To update the configuration in a hadoop.jar you simply use "zip hadoop.jar hadoop-site.xml".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  9 16:02:05 2006
Return-Path: 
 <hadoop-dev-return-3026-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15230 invoked from network); 9 Aug 2006 16:02:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 16:02:05 -0000
Received: (qmail 57215 invoked by uid 500); 9 Aug 2006 16:01:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57138 invoked by uid 500); 9 Aug 2006 16:01:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57109 invoked by uid 99); 9 Aug 2006 16:01:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 09:01:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 09:01:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C35CC7141E8
	for <hadoop-dev@lucene.apache.org>; Wed,  9 Aug 2006 15:59:14 +0000 (GMT)
Message-ID: <20135144.1155139154797.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 08:59:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-434) Use Hadoop scripts to run
 smallJobsBenchmark to avoid classpath issues.
In-Reply-To: <20188000.1155075613933.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-434?page=all ]

Doug Cutting updated HADOOP-434:
--------------------------------

           Status: Open  (was: Patch Available)
    Fix Version/s: 0.6.0

I can't get this patch to apply to the current trunk.

> Use Hadoop scripts to run smallJobsBenchmark to avoid classpath issues.
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-434
>                 URL: http://issues.apache.org/jira/browse/HADOOP-434
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: patch.txt
>
>
> Small job benchmark uses its own scripts to set classpath, it should use hadoop scripts with ProgramDriver to run the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  9 16:28:06 2006
Return-Path: 
 <hadoop-dev-return-3027-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27273 invoked from network); 9 Aug 2006 16:28:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 16:28:06 -0000
Received: (qmail 16049 invoked by uid 500); 9 Aug 2006 16:28:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16023 invoked by uid 500); 9 Aug 2006 16:28:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16003 invoked by uid 99); 9 Aug 2006 16:28:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 09:28:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 09:28:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4C5F27141F2
	for <hadoop-dev@lucene.apache.org>; Wed,  9 Aug 2006 16:25:15 +0000 (GMT)
Message-ID: <12258387.1155140715310.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 09:25:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-324) "IOException: No space left on device"
 is handled incorrectly
In-Reply-To: <18409093.1151369969863.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-324?page=all ]

Doug Cutting updated HADOOP-324:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.6.0
       Resolution: Fixed

I just committed this.  Thanks!

> "IOException: No space left on device" is handled incorrectly
> -------------------------------------------------------------
>
>                 Key: HADOOP-324
>                 URL: http://issues.apache.org/jira/browse/HADOOP-324
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Wendy Chien
>             Fix For: 0.6.0
>
>         Attachments: hadoop-324.patch
>
>
> When a data node disk is almost full the name node still assigns blocks to the data node.
> By the time the data node actually tries to write that data to disk the disk may become full.
> Current implementation forces the data node to shutdown after that.
> The expected behavior is to report the block write failure and continue.
> The Exception looks as follows:
> java.io.IOException: No space left on device
> at java.io.FileOutputStream.writeBytes(Native Method)
> at java.io.FileOutputStream.write(FileOutputStream.java:260)
> at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
> at java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)
> at java.io.DataOutputStream.write(DataOutputStream.java:90)
> at org.apache.hadoop.dfs.DataNode$DataXceiver.writeBlock(DataNode.java:623)
> at org.apache.hadoop.dfs.DataNode$DataXceiver.run(DataNode.java:410)
> at java.lang.Thread.run(Thread.java:595)
> 2006-06-26 08:26:04,751 INFO org.apache.hadoop.dfs.DataNode: Finishing DataNode in: /tmp/hadoop/dfs/data/data

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  9 16:32:00 2006
Return-Path: 
 <hadoop-dev-return-3028-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29058 invoked from network); 9 Aug 2006 16:32:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 16:32:00 -0000
Received: (qmail 22027 invoked by uid 500); 9 Aug 2006 16:31:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22008 invoked by uid 500); 9 Aug 2006 16:31:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21999 invoked by uid 99); 9 Aug 2006 16:31:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 09:31:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 09:31:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CFD0C7141E8
	for <hadoop-dev@lucene.apache.org>; Wed,  9 Aug 2006 16:29:14 +0000 (GMT)
Message-ID: <26261033.1155140954848.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 09:29:14 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-434) Use Hadoop scripts to run
 smallJobsBenchmark to avoid classpath issues.
In-Reply-To: <20188000.1155075613933.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-434?page=all ]

Sanjay Dahiya updated HADOOP-434:
---------------------------------

    Attachment: patch_benchmark.txt

sorry about that. The attached patch works for latest trunk.  

> Use Hadoop scripts to run smallJobsBenchmark to avoid classpath issues.
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-434
>                 URL: http://issues.apache.org/jira/browse/HADOOP-434
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: patch.txt, patch_benchmark.txt
>
>
> Small job benchmark uses its own scripts to set classpath, it should use hadoop scripts with ProgramDriver to run the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  9 19:12:00 2006
Return-Path: 
 <hadoop-dev-return-3029-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82060 invoked from network); 9 Aug 2006 19:12:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 19:12:00 -0000
Received: (qmail 49185 invoked by uid 500); 9 Aug 2006 19:12:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49023 invoked by uid 500); 9 Aug 2006 19:11:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49012 invoked by uid 99); 9 Aug 2006 19:11:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 12:11:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 12:11:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E80BF7141F2
	for <hadoop-dev@lucene.apache.org>; Wed,  9 Aug 2006 19:09:13 +0000 (GMT)
Message-ID: <11136023.1155150553947.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 12:09:13 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-436) Concluding that the Map task failed
 may not be always right in getMapOutput.jsp
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Concluding that the Map task failed may not be always right in getMapOutput.jsp
-------------------------------------------------------------------------------

                 Key: HADOOP-436
                 URL: http://issues.apache.org/jira/browse/HADOOP-436
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Devaraj Das


In the getMapOutput.jsp, tracker.mapOutputLost is called irrespective of whether the sender of the map output threw an exception or the receiver died (thereby closing the socket causing the jsp to throw an exception). Invoking the method causes the corresponding map task to fail and causes it to be rescheduled but it may be the case that the problem is at the reciever's end. Need to do a better check of where the exception was thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  9 19:21:45 2006
Return-Path: 
 <hadoop-dev-return-3030-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91728 invoked from network); 9 Aug 2006 19:21:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 19:21:45 -0000
Received: (qmail 64295 invoked by uid 500); 9 Aug 2006 19:21:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64127 invoked by uid 500); 9 Aug 2006 19:21:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64118 invoked by uid 99); 9 Aug 2006 19:21:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 12:21:45 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 12:21:44 -0700
Received: from [207.126.231.236] (eric14-mac.corp.yahoo.com [207.126.231.236])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k79JLB3C079386
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Wed, 9 Aug 2006 12:21:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=ihix4Y0BaJ4BRiTK5mEzWxLKFx2KIFFNCTmqvHCS3YCpHutG6Bt0gG/Qu4gbPNg8
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <3551625.1155077295812.JavaMail.jira@brutus>
References: <3551625.1155077295812.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <12A647F5-CD64-41A0-A077-3B89509F1167@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-433) Better access to the RecordReader
Date: Wed, 9 Aug 2006 12:21:10 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Why not provide a pointer to the real record reader?  Seems like a  
valid OO way to get access to all kinds of things.

On Aug 8, 2006, at 3:48 PM, Owen O'Malley (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-433? 
> page=comments#action_12426763 ]
>
> Owen O'Malley commented on HADOOP-433:
> --------------------------------------
>
> This is largely addressed by the extensions I put into the JobConf  
> task localization code. Look at MapTask.localizeConfiguration.
>
> In particular, each Mapper has available to it:
> map.input.file
> map.input.start
> map.input.length
>
> For application writers that don't want to read the Hadoop code,  
> I've put the list of attributes in:
> http://wiki.apache.org/lucene-hadoop/TaskExecutionEnvironment
>
> This will let you get an equivalent RecordReader even if it is not  
> the same object. Will that address your problem?
>
>> Better access to the RecordReader
>> ---------------------------------
>>
>>                 Key: HADOOP-433
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-433
>>             Project: Hadoop
>>          Issue Type: Improvement
>>          Components: mapred
>>    Affects Versions: 0.5.0
>>            Reporter: Benjamin Reed
>>            Priority: Minor
>>
>> The record reader has access to the FileSplit which can in turn  
>> have information that is useful to the Mapper. For example, Map  
>> processing may vary according to file name or attributes  
>> associated with a file. Unfortunately, even using a MapRunner you  
>> only have access to the progress wrapper of the RecordReader. To  
>> get access to the real record reader I had to use a thread local  
>> variable which I set in RecordReader.getNext(). It would be much  
>> nicer if you could get a reference to the real RecordReader from  
>> the RecordReader passed to MapRunner.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Wed Aug  9 20:51:07 2006
Return-Path: 
 <hadoop-dev-return-3031-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19363 invoked from network); 9 Aug 2006 20:51:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 20:51:07 -0000
Received: (qmail 93903 invoked by uid 500); 9 Aug 2006 20:51:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93854 invoked by uid 500); 9 Aug 2006 20:51:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93781 invoked by uid 99); 9 Aug 2006 20:51:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 13:51:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 13:51:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 01DB87141F2
	for <hadoop-dev@lucene.apache.org>; Wed,  9 Aug 2006 20:48:16 +0000 (GMT)
Message-ID: <32779719.1155156496005.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 13:48:16 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-64) DataNode should be capable of
 managing multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-64?page=comments#action_12427026 ] 
            
Konstantin Shvachko commented on HADOOP-64:
-------------------------------------------

This proposition looks good to me.
The only thing that seems excessive is the dynamic data structures for maintaining
blockid-to-directory mapping.
The alternative is to do a static mapping based on blockids and the number of directories.
Suppose that the maximal number of entries per directory is N. We should define a function
      dirName( blockId, N, dirLevel )
which returns a local directory name for each level of the directory tree.
So the datanode needs to store  only the current hight  of the directory tree H.
Then for a given  blockId, its path is determined by
      / dirName(blockId,N,0) / dirName(blockId,N,1) / ... / dirName(blockId,N,H)
And when the datanode needs to add a new directory level it will not need
to rename anything in the existing directory tree.
I see a disadvantage of this approach, that the directories should be
re-structured if the maximal number of entries per directory is changed.
But the same is applicable for the dynamic approach, at least when N is decreased.
We might consider hardcoding N rather than having it configurable.


> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  9 20:53:00 2006
Return-Path: 
 <hadoop-dev-return-3032-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19920 invoked from network); 9 Aug 2006 20:53:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 20:53:00 -0000
Received: (qmail 98047 invoked by uid 500); 9 Aug 2006 20:52:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98027 invoked by uid 500); 9 Aug 2006 20:52:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98018 invoked by uid 99); 9 Aug 2006 20:52:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 13:52:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 13:52:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD2107141F1
	for <hadoop-dev@lucene.apache.org>; Wed,  9 Aug 2006 20:50:14 +0000 (GMT)
Message-ID: <30621440.1155156614837.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 13:50:14 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-373) Some calls to mkdirs do not check
 return value
In-Reply-To: <19322325.1153351633892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-373?page=all ]

Wendy Chien updated HADOOP-373:
-------------------------------

    Attachment: hadoop-373.patch

> Some calls to mkdirs do not check return value
> ----------------------------------------------
>
>                 Key: HADOOP-373
>                 URL: http://issues.apache.org/jira/browse/HADOOP-373
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>         Attachments: hadoop-373.patch
>
>
> Some calls to mkdirs do not check if mkdirs failed.  
> Arun noticed this while looking at HADOOP-281.  Since this issue is actually a separate issue from the mkdirs implementation issue of HADOOP-281, I created a new bug for it.   

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  9 20:53:01 2006
Return-Path: 
 <hadoop-dev-return-3033-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19955 invoked from network); 9 Aug 2006 20:53:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 20:53:01 -0000
Received: (qmail 98255 invoked by uid 500); 9 Aug 2006 20:53:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98221 invoked by uid 500); 9 Aug 2006 20:53:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98212 invoked by uid 99); 9 Aug 2006 20:53:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 13:53:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 13:53:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CE6827141F2
	for <hadoop-dev@lucene.apache.org>; Wed,  9 Aug 2006 20:50:15 +0000 (GMT)
Message-ID: <2508475.1155156615843.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 13:50:15 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-373) Some calls to mkdirs do not check
 return value
In-Reply-To: <19322325.1153351633892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-373?page=all ]

Wendy Chien updated HADOOP-373:
-------------------------------

    Status: Patch Available  (was: Open)

I've changed calls which did not check the return value.

> Some calls to mkdirs do not check return value
> ----------------------------------------------
>
>                 Key: HADOOP-373
>                 URL: http://issues.apache.org/jira/browse/HADOOP-373
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>         Attachments: hadoop-373.patch
>
>
> Some calls to mkdirs do not check if mkdirs failed.  
> Arun noticed this while looking at HADOOP-281.  Since this issue is actually a separate issue from the mkdirs implementation issue of HADOOP-281, I created a new bug for it.   

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  9 21:22:07 2006
Return-Path: 
 <hadoop-dev-return-3034-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28722 invoked from network); 9 Aug 2006 21:22:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 21:22:07 -0000
Received: (qmail 46680 invoked by uid 500); 9 Aug 2006 21:22:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46609 invoked by uid 500); 9 Aug 2006 21:22:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46408 invoked by uid 99); 9 Aug 2006 21:22:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 14:22:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 14:22:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C82DB7141F2
	for <hadoop-dev@lucene.apache.org>; Wed,  9 Aug 2006 21:19:15 +0000 (GMT)
Message-ID: <29857456.1155158355817.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 14:19:15 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-181) task trackers should not restart for
 having a late heartbeat
In-Reply-To: <701484.1146509206378.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-181?page=comments#action_12427033 ] 
            
Sameer Paranjpye commented on HADOOP-181:
-----------------------------------------

I feel that improved detection of tasktracker death is a separate issue, which needs addressing. At the same time, we need to try and not lose work if communication between a tasktracker and the jobtracker fails for some reason.

For instance, a tasktracker may appear lost to the jobtracker due to transient network problems. In such a case it would be ok for the jobtracker to mark the lost tasks as failed and reschedule them to other places. 
If communication to the jobtracker is subsequently restored, while the job is still in progress, the jobtracker can 
easily mark the lost and found tasks as succeeded. Multiple instances of a task should be handled by the speculative execution code. It seems like we could avoid losing a lot of work if we had such as mechanism in place.




> task trackers should not restart for having a late heartbeat
> ------------------------------------------------------------
>
>                 Key: HADOOP-181
>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.6.0
>
>         Attachments: lost-heartbeat.patch
>
>
> TaskTrackers should not close and restart themselves for having a late heartbeat. The JobTracker should just accept their current status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  9 21:46:21 2006
Return-Path: 
 <hadoop-dev-return-3035-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33427 invoked from network); 9 Aug 2006 21:46:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 21:46:21 -0000
Received: (qmail 82738 invoked by uid 500); 9 Aug 2006 21:46:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82569 invoked by uid 500); 9 Aug 2006 21:46:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82560 invoked by uid 99); 9 Aug 2006 21:46:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 14:46:20 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.151.94.5] (HELO megs8.100mwh.com) (209.151.94.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 14:46:20 -0700
Received: from meetsawglad.corp.yahoo.com ([66.228.162.219])
	by megs8.100mwh.com with esmtpsa (TLSv1:RC4-SHA:128)
	(Exim 4.52)
	id 1GAvsF-0004fG-FW
	for hadoop-dev@lucene.apache.org; Wed, 09 Aug 2006 15:45:59 -0600
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <12A647F5-CD64-41A0-A077-3B89509F1167@yahoo-inc.com>
References: <3551625.1155077295812.JavaMail.jira@brutus>
 <12A647F5-CD64-41A0-A077-3B89509F1167@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9D9B08A0-0421-46C7-9FAB-B910CC4FA3BE@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Owen O'Malley <owen@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-433) Better access to the RecordReader
Date: Wed, 9 Aug 2006 14:46:08 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-AntiAbuse: This header was added to track abuse,
 please include it with any abuse report
X-AntiAbuse: Primary Hostname - megs8.100mwh.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - yahoo-inc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 9, 2006, at 12:21 PM, Eric Baldeschwieler wrote:

> Why not provide a pointer to the real record reader?  Seems like a  
> valid OO way to get access to all kinds of things.

Those attributes were put in to the JobConf so that Hadoop could re- 
run an isolated task, so they had to be serializable. Putting real  
objects into the JobConf breaks that property.

Ben hasn't explained why he wants the RecordReader, so I was trying  
to guess. The problem with giving out references to the RecordReader  
is that you are exposing the framework's implementation details. In  
particular, all you can really do to a record reader is advance it.  
That really isn't something that the Mapper should be doing.

-- Owen

From MAILER-DAEMON Wed Aug  9 22:28:19 2006
Return-Path: 
 <hadoop-dev-return-3036-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45373 invoked from network); 9 Aug 2006 22:28:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 22:28:19 -0000
Received: (qmail 41275 invoked by uid 500); 9 Aug 2006 22:28:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41181 invoked by uid 500); 9 Aug 2006 22:28:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41168 invoked by uid 99); 9 Aug 2006 22:28:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 15:28:17 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sutter@gmail.com designates
 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 15:28:16 -0700
Received: by nf-out-0910.google.com with SMTP id p48so331503nfa
        for <hadoop-dev@lucene.apache.org>;
 Wed, 09 Aug 2006 15:27:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uo3z+LQ+//oauOPCThEIGPTDMR89qjJu/GD09aoWdEkk83iYt6Ta8gUoQPyYoVvrzghMNNzv9bXB5k88vQpq7TRtXvgk2N1qyG9SUOeLn136KK8HYi4bPXHmFksfCc0kpvU189ByitumAGVtG+I/ogPMnwHwX2HN04jCOBvK9nA=
Received: by 10.49.19.18 with SMTP id w18mr2180332nfi;
        Wed, 09 Aug 2006 15:27:55 -0700 (PDT)
Received: by 10.48.212.14 with HTTP; Wed, 9 Aug 2006 15:27:55 -0700 (PDT)
Message-ID: <e1d10fc00608091527h6c739c3g19f7298f473dbab3@mail.gmail.com>
Date: Wed, 9 Aug 2006 15:27:55 -0700
From: "Paul Sutter" <sutter@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Commented: (HADOOP-433) Better access to the RecordReader
In-Reply-To: <9D9B08A0-0421-46C7-9FAB-B910CC4FA3BE@yahoo-inc.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_62915_23291325.1155162475132"
References: <3551625.1155077295812.JavaMail.jira@brutus>
	 <12A647F5-CD64-41A0-A077-3B89509F1167@yahoo-inc.com>
	 <9D9B08A0-0421-46C7-9FAB-B910CC4FA3BE@yahoo-inc.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_62915_23291325.1155162475132
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

just fyi, here are the reasons we tend to encounter:

- regex'd metadata from a filename (for example, date, data source, etc...
anything that exists on a per-file basis and not embedded in every record)
- error message ("illegal widget name", "file XXX"), usually in an output
record which is later reduced
- etc...

each of these are handled just fine by having the filename in the jobconf.

im sure there are other purposes, but these are what we run into.


On 8/9/06, Owen O'Malley <owen@yahoo-inc.com> wrote:
>
>
> On Aug 9, 2006, at 12:21 PM, Eric Baldeschwieler wrote:
>
> > Why not provide a pointer to the real record reader?  Seems like a
> > valid OO way to get access to all kinds of things.
>
> Those attributes were put in to the JobConf so that Hadoop could re-
> run an isolated task, so they had to be serializable. Putting real
> objects into the JobConf breaks that property.
>
> Ben hasn't explained why he wants the RecordReader, so I was trying
> to guess. The problem with giving out references to the RecordReader
> is that you are exposing the framework's implementation details. In
> particular, all you can really do to a record reader is advance it.
> That really isn't something that the Mapper should be doing.
>
> -- Owen
>

------=_Part_62915_23291325.1155162475132--

From MAILER-DAEMON Wed Aug  9 22:49:00 2006
Return-Path: 
 <hadoop-dev-return-3037-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52476 invoked from network); 9 Aug 2006 22:49:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 22:49:00 -0000
Received: (qmail 68690 invoked by uid 500); 9 Aug 2006 22:49:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68664 invoked by uid 500); 9 Aug 2006 22:49:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68651 invoked by uid 99); 9 Aug 2006 22:48:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 15:48:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 15:48:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C3CA57141F1
	for <hadoop-dev@lucene.apache.org>; Wed,  9 Aug 2006 22:46:14 +0000 (GMT)
Message-ID: <29247600.1155163574799.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 15:46:14 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-431) default behaviour of dfsShell -rm
 should resemble 'rm -i', not 'rm -rf'
In-Reply-To: <15901306.1155057373927.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-431?page=comments#action_12427048 ] 
            
eric baldeschwieler commented on HADOOP-431:
--------------------------------------------

I'd support a -r command to remove a directory.  A lot of user commands may not be on reduce directories, so I don't think it is true that EVERY logical file is a subdirectory.

That said, I also like the idea of differentiating between removing one directory and removing lots of them.  What about requiring -rr if you really mean to do a deep recursive delete?

-i seems like overkill to me.

> default behaviour of dfsShell -rm should resemble 'rm -i', not 'rm -rf'
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-431
>                 URL: http://issues.apache.org/jira/browse/HADOOP-431
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Yoram Arnon
>
> when using hadoop dfs -rm <path> the behaviour is like that of rm -rf.
> That's very dangerous.
> A better behaviour would require a confirmation and allow removal of files only by default. Optional flags would allow recursive and forced deleted.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  9 23:13:01 2006
Return-Path: 
 <hadoop-dev-return-3038-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58863 invoked from network); 9 Aug 2006 23:13:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 23:13:01 -0000
Received: (qmail 92767 invoked by uid 500); 9 Aug 2006 23:13:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92602 invoked by uid 500); 9 Aug 2006 23:13:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92593 invoked by uid 99); 9 Aug 2006 23:13:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 16:13:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 16:13:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BA7987141F1
	for <hadoop-dev@lucene.apache.org>; Wed,  9 Aug 2006 23:10:15 +0000 (GMT)
Message-ID: <14167877.1155165015761.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 16:10:15 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-181) task trackers should not restart for
 having a late heartbeat
In-Reply-To: <701484.1146509206378.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-181?page=comments#action_12427052 ] 
            
eric baldeschwieler commented on HADOOP-181:
--------------------------------------------

Would this have a substantial impact on the large sort benchmark tests our team runs?

> task trackers should not restart for having a late heartbeat
> ------------------------------------------------------------
>
>                 Key: HADOOP-181
>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.6.0
>
>         Attachments: lost-heartbeat.patch
>
>
> TaskTrackers should not close and restart themselves for having a late heartbeat. The JobTracker should just accept their current status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  9 23:22:59 2006
Return-Path: 
 <hadoop-dev-return-3040-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61161 invoked from network); 9 Aug 2006 23:22:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 23:22:59 -0000
Received: (qmail 703 invoked by uid 500); 9 Aug 2006 23:22:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 676 invoked by uid 500); 9 Aug 2006 23:22:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 665 invoked by uid 99); 9 Aug 2006 23:22:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 16:22:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 16:22:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DD87D7141F2
	for <hadoop-dev@lucene.apache.org>; Wed,  9 Aug 2006 23:20:13 +0000 (GMT)
Message-ID: <13165391.1155165613904.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 16:20:13 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-437) support gzip input files
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

support gzip input files
------------------------

                 Key: HADOOP-437
                 URL: http://issues.apache.org/jira/browse/HADOOP-437
             Project: Hadoop
          Issue Type: Improvement
          Components: contrib/streaming
            Reporter: Michel Tourn
         Attachments: streaming.gzip1.patch

To specify that line-oriented input is in gzip format:
   -jobconf stream.recordreader.compression=gzip

Effect: 
1. FileSplit are forced to be whole files
2. A GZIPInputStream filter is applied in the RecordReader




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug  9 23:22:22 2006
Return-Path: 
 <hadoop-dev-return-3039-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60918 invoked from network); 9 Aug 2006 23:22:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 23:22:22 -0000
Received: (qmail 99775 invoked by uid 500); 9 Aug 2006 23:22:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99745 invoked by uid 500); 9 Aug 2006 23:22:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99736 invoked by uid 99); 9 Aug 2006 23:22:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 16:22:21 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 16:22:20 -0700
Received: from [207.126.231.236] (eric14-mac.corp.yahoo.com [207.126.231.236])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k79NLkbI082560
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Wed, 9 Aug 2006 16:21:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=LSlOmBjJLORCXy/F9hTxmO6wW7jvKLeSA01D/epjJlugWIFkjzx6QJakdE4RcUaK
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <9D9B08A0-0421-46C7-9FAB-B910CC4FA3BE@yahoo-inc.com>
References: <3551625.1155077295812.JavaMail.jira@brutus>
 <12A647F5-CD64-41A0-A077-3B89509F1167@yahoo-inc.com>
 <9D9B08A0-0421-46C7-9FAB-B910CC4FA3BE@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AB814533-B7C8-48DA-A188-17476048F744@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-433) Better access to the RecordReader
Date: Wed, 9 Aug 2006 16:21:44 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Advancing the reader sounds like "a bad idea".

But an exotic reader might have all kinds of context it could  
publish.  maybe current line number, rowID, SQL statement used...   
Who knows.  There could be lots of stuff.

It would be nice to have an interface that lets you get to any  
methods your subclassed reader has decided to publish.

Pushing this through the config doesn't seem right.  Having an  
available method a mapper can invoke does.

On Aug 9, 2006, at 2:46 PM, Owen O'Malley wrote:

>
> On Aug 9, 2006, at 12:21 PM, Eric Baldeschwieler wrote:
>
>> Why not provide a pointer to the real record reader?  Seems like a  
>> valid OO way to get access to all kinds of things.
>
> Those attributes were put in to the JobConf so that Hadoop could re- 
> run an isolated task, so they had to be serializable. Putting real  
> objects into the JobConf breaks that property.
>
> Ben hasn't explained why he wants the RecordReader, so I was trying  
> to guess. The problem with giving out references to the  
> RecordReader is that you are exposing the framework's  
> implementation details. In particular, all you can really do to a  
> record reader is advance it. That really isn't something that the  
> Mapper should be doing.
>
> -- Owen


From MAILER-DAEMON Thu Aug 10 01:13:00 2006
Return-Path: 
 <hadoop-dev-return-3041-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8431 invoked from network); 10 Aug 2006 01:13:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 01:13:00 -0000
Received: (qmail 24984 invoked by uid 500); 10 Aug 2006 01:13:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24816 invoked by uid 500); 10 Aug 2006 01:12:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24807 invoked by uid 99); 10 Aug 2006 01:12:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 18:12:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 18:12:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EB3947141F0
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 01:10:13 +0000 (GMT)
Message-ID: <28546816.1155172213960.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 18:10:13 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-438) DFS pathname limitation.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DFS pathname limitation.
------------------------

                 Key: HADOOP-438
                 URL: http://issues.apache.org/jira/browse/HADOOP-438
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.5.0, 0.4.0, 0.3.2, 0.3.1, 0.3.0, 0.2.1, 0.2.0, 0.1.1, 0.1.0
            Reporter: Konstantin Shvachko
             Fix For: 0.6.0


I was trying to create a deep hierarchy of directories using DFS mkdirs().
When the path to the leaf directory became long (~20000) DFS was still able to create
directories with these names, but UTF8 started truncating long strings resulting in
incorrect logging of namespace edits. That later crashed the namenode during restart,
when it was trying to reproduce file creation logged in the edits file with truncated names.
UTF8 is deprecated now so we will have to replace it with Text.
With UTF8  we should enforce a pathname limit of 0xffff/3 = 21845
With Text it is going to be larger. Not sure what the exact number is.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 01:52:59 2006
Return-Path: 
 <hadoop-dev-return-3042-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20771 invoked from network); 10 Aug 2006 01:52:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 01:52:59 -0000
Received: (qmail 50567 invoked by uid 500); 10 Aug 2006 01:52:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50543 invoked by uid 500); 10 Aug 2006 01:52:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50518 invoked by uid 99); 10 Aug 2006 01:52:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 18:52:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 18:52:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DC6417141F2
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 01:50:13 +0000 (GMT)
Message-ID: <8502499.1155174613900.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 18:50:13 -0700 (PDT)
From: "Dick King (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-439) Streaming does not work for text data
 if the records don't fit in a short UTF8 [2^16/3 characters]
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Streaming does not work for text data if the records don't fit in a short UTF8 [2^16/3 characters]
--------------------------------------------------------------------------------------------------

                 Key: HADOOP-439
                 URL: http://issues.apache.org/jira/browse/HADOOP-439
             Project: Hadoop
          Issue Type: Bug
            Reporter: Dick King
            Priority: Critical


The streaming code internally reads the input data into a UTF8 .  This causes truncated data to be shipped to the mapper when the input exceeds about 21000 characters, with no notice to the user except possibly in individual tasks' machines' logs, which people would not normally read for apparently successful jobs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 01:54:59 2006
Return-Path: 
 <hadoop-dev-return-3043-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21203 invoked from network); 10 Aug 2006 01:54:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 01:54:59 -0000
Received: (qmail 53622 invoked by uid 500); 10 Aug 2006 01:54:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53586 invoked by uid 500); 10 Aug 2006 01:54:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53574 invoked by uid 99); 10 Aug 2006 01:54:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 18:54:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 18:54:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DAF247141F2
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 01:52:13 +0000 (GMT)
Message-ID: <7246969.1155174733894.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 18:52:13 -0700 (PDT)
From: "Dick King (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-440) In streaming, error messages issued in
 stream mappers or reducers don't go anywhere
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In streaming, error messages issued in stream mappers or reducers don't go anywhere
-----------------------------------------------------------------------------------

                 Key: HADOOP-440
                 URL: http://issues.apache.org/jira/browse/HADOOP-440
             Project: Hadoop
          Issue Type: Wish
            Reporter: Dick King


I would like such error messages to go to the machines' logs at least.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 05:30:00 2006
Return-Path: 
 <hadoop-dev-return-3044-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64317 invoked from network); 10 Aug 2006 05:30:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 05:30:00 -0000
Received: (qmail 78552 invoked by uid 500); 10 Aug 2006 05:30:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78478 invoked by uid 500); 10 Aug 2006 05:29:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78469 invoked by uid 99); 10 Aug 2006 05:29:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 22:29:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 22:29:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E1EEC7141F2
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 05:27:13 +0000 (GMT)
Message-ID: <29672656.1155187633922.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 22:27:13 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-441) SequenceFile should support 'custom
 compressors'
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SequenceFile should support 'custom compressors'
------------------------------------------------

                 Key: HADOOP-441
                 URL: http://issues.apache.org/jira/browse/HADOOP-441
             Project: Hadoop
          Issue Type: New Feature
          Components: io
            Reporter: Arun C Murthy
         Assigned To: Arun C Murthy
             Fix For: 0.6.0


SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 

Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Also 'bmdiff' seems a good candidate for adding support for. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.

The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

Looks like there isn't a java library for bmdiff (I'd love to be corrected on this)... thoughts on how to go about this? A JNI wrapper on top of a C api? If so how difficult does hadoop-dev think it is to implement a input/output stream on top of this? Alternatives?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 06:33:04 2006
Return-Path: 
 <hadoop-dev-return-3045-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90882 invoked from network); 10 Aug 2006 06:33:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 06:33:04 -0000
Received: (qmail 55959 invoked by uid 500); 10 Aug 2006 06:33:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55939 invoked by uid 500); 10 Aug 2006 06:33:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55930 invoked by uid 99); 10 Aug 2006 06:33:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 23:33:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 23:33:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 087D571429D
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 06:30:18 +0000 (GMT)
Message-ID: <17243251.1155191418032.JavaMail.jira@brutus>
Date: Wed, 9 Aug 2006 23:30:18 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-181) task trackers should not restart for
 having a late heartbeat
In-Reply-To: <701484.1146509206378.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-181?page=comments#action_12427115 ] 
            
Doug Cutting commented on HADOOP-181:
-------------------------------------

> improved detection of tasktracker death is a separate issue

It's certainly related.  This issue deals with fixing things when tasktracker deaths are mis-detected.  If we didn't misdetect so much, this would not be an issue.

> Multiple instances of a task should be handled by the speculative execution code.

What if speculative execution is disabled in the job?  Then we'd get multiple instances of the task running at once, when the client explicitly requested that not happen.

I'm +0 on this patch.  If others feel strongly that it's the best approach, I won't veto it.  But I would prefer we address the root problem first, and then see if this is still an issue, before adding this new mechanism.  Does that make sense, or am I missing something?

> task trackers should not restart for having a late heartbeat
> ------------------------------------------------------------
>
>                 Key: HADOOP-181
>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.6.0
>
>         Attachments: lost-heartbeat.patch
>
>
> TaskTrackers should not close and restart themselves for having a late heartbeat. The JobTracker should just accept their current status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 07:34:02 2006
Return-Path: 
 <hadoop-dev-return-3046-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13762 invoked from network); 10 Aug 2006 07:34:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 07:34:02 -0000
Received: (qmail 51925 invoked by uid 500); 10 Aug 2006 07:34:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51760 invoked by uid 500); 10 Aug 2006 07:34:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51751 invoked by uid 99); 10 Aug 2006 07:34:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 00:34:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 00:34:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 14ED57142C9
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 07:31:16 +0000 (GMT)
Message-ID: <22533278.1155195076083.JavaMail.jira@brutus>
Date: Thu, 10 Aug 2006 00:31:16 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-181) task trackers should not restart for
 having a late heartbeat
In-Reply-To: <701484.1146509206378.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-181?page=comments#action_12427126 ] 
            
Yoram Arnon commented on HADOOP-181:
------------------------------------

Eric, we don't get many lost task trackers in our sort benchmark any more, so I don't expect a significant improvement.

In other jobs though, we do get the occasional lost task tracker. While every such case is a bug when nothing 'real' happens (HW error, network etc.) hunting every last one of them down is going to take quite a while.
Minimizing the damage caused by such a glitch would be welcome if it doesn't cause adverse side effects.

> task trackers should not restart for having a late heartbeat
> ------------------------------------------------------------
>
>                 Key: HADOOP-181
>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.6.0
>
>         Attachments: lost-heartbeat.patch
>
>
> TaskTrackers should not close and restart themselves for having a late heartbeat. The JobTracker should just accept their current status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 07:46:03 2006
Return-Path: 
 <hadoop-dev-return-3047-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17647 invoked from network); 10 Aug 2006 07:46:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 07:46:03 -0000
Received: (qmail 67524 invoked by uid 500); 10 Aug 2006 07:46:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67481 invoked by uid 500); 10 Aug 2006 07:46:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67453 invoked by uid 99); 10 Aug 2006 07:46:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 00:46:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 00:45:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E4AD141000B
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 07:43:13 +0000 (GMT)
Message-ID: <650567.1155195793928.JavaMail.jira@brutus>
Date: Thu, 10 Aug 2006 00:43:13 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-442) slaves file should include an
 'exclude' section, to prevent "bad" datanodes and tasktrackers from
 disrupting  a cluster
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

slaves file should include an 'exclude' section, to prevent "bad" datanodes and tasktrackers from disrupting  a cluster
-----------------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-442
                 URL: http://issues.apache.org/jira/browse/HADOOP-442
             Project: Hadoop
          Issue Type: Bug
            Reporter: Yoram Arnon


I recently had a few nodes go bad, such that they were inaccessible to ssh, but were still running their java processes.
tasks that executed on them were failing, causing jobs to fail.
I couldn't stop the java processes, because of the ssh issue, so I was helpless until I could actually power down these nodes.
restarting the cluster doesn't help, even when removing the bad nodes from the slaves file - they just reconnect and are accepted.
while we plan to avoid tasks from launching on the same nodes over and over, what I'd like is to be able to prevent rogue processes from connecting to the masters.
Ideally, the slaves file will contain an 'exclude' section, which will list nodes that shouldn't be accessed, and should be ignored if they try to connect. That would also help in configuring the slaves file for a large cluster - I'd list the full range of machines in the cluster, then list the ones that are down in the 'exclude' section

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 07:50:00 2006
Return-Path: 
 <hadoop-dev-return-3048-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20479 invoked from network); 10 Aug 2006 07:50:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 07:50:00 -0000
Received: (qmail 77717 invoked by uid 500); 10 Aug 2006 07:49:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77696 invoked by uid 500); 10 Aug 2006 07:49:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77687 invoked by uid 99); 10 Aug 2006 07:49:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 00:49:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 00:49:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0451271429F
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 07:47:14 +0000 (GMT)
Message-ID: <3171885.1155196034014.JavaMail.jira@brutus>
Date: Thu, 10 Aug 2006 00:47:14 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-443) optionally ignore a bad entry in
 namenode state when starting up
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

optionally ignore a bad entry in namenode state when starting up
----------------------------------------------------------------

                 Key: HADOOP-443
                 URL: http://issues.apache.org/jira/browse/HADOOP-443
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Yoram Arnon


if the namenode state (fsimage, edits) contains a bad entry, the namenode refused to start.
Normally that's a good thing, alerting the administrator that something's corrupted.
An option to ignore those entries is useful for recovering from such a condition. Anyone but a hard core developer would be helpless in the face of a corruption like that, and would prefer to lose a couple of records and be able to run than to be down, or remove the entire state of dfs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 12:35:02 2006
Return-Path: 
 <hadoop-dev-return-3049-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41339 invoked from network); 10 Aug 2006 12:35:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 12:35:02 -0000
Received: (qmail 76315 invoked by uid 500); 10 Aug 2006 12:35:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76293 invoked by uid 500); 10 Aug 2006 12:35:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76284 invoked by uid 99); 10 Aug 2006 12:35:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 05:35:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 05:35:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6209C7142C7
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 12:32:15 +0000 (GMT)
Message-ID: <8376851.1155213135399.JavaMail.jira@brutus>
Date: Thu, 10 Aug 2006 05:32:15 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Sanjay Dahiya updated HADOOP-263:
---------------------------------

    Attachment: patch.txt

Updated the display. now showing start/finish times in separate columns. 

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 12:35:03 2006
Return-Path: 
 <hadoop-dev-return-3050-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41387 invoked from network); 10 Aug 2006 12:35:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 12:35:03 -0000
Received: (qmail 76621 invoked by uid 500); 10 Aug 2006 12:35:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76503 invoked by uid 500); 10 Aug 2006 12:35:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76492 invoked by uid 99); 10 Aug 2006 12:35:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 05:35:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 05:35:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DEAB37142CC
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 12:32:16 +0000 (GMT)
Message-ID: <6772572.1155213136909.JavaMail.jira@brutus>
Date: Thu, 10 Aug 2006 05:32:16 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Sanjay Dahiya updated HADOOP-263:
---------------------------------

    Status: Patch Available  (was: Open)

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 13:42:02 2006
Return-Path: 
 <hadoop-dev-return-3051-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71060 invoked from network); 10 Aug 2006 13:42:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 13:42:02 -0000
Received: (qmail 42324 invoked by uid 500); 10 Aug 2006 13:42:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42109 invoked by uid 500); 10 Aug 2006 13:42:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42098 invoked by uid 99); 10 Aug 2006 13:42:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 06:42:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 06:42:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD96F7142C7
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 13:39:14 +0000 (GMT)
Message-ID: <17796030.1155217154839.JavaMail.jira@brutus>
Date: Thu, 10 Aug 2006 06:39:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-436) Concluding that the Map task failed
 may not be always right in getMapOutput.jsp
In-Reply-To: <11136023.1155150553947.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-436?page=all ]

Devaraj Das reassigned HADOOP-436:
----------------------------------

    Assignee: Devaraj Das

> Concluding that the Map task failed may not be always right in getMapOutput.jsp
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-436
>                 URL: http://issues.apache.org/jira/browse/HADOOP-436
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>
> In the getMapOutput.jsp, tracker.mapOutputLost is called irrespective of whether the sender of the map output threw an exception or the receiver died (thereby closing the socket causing the jsp to throw an exception). Invoking the method causes the corresponding map task to fail and causes it to be rescheduled but it may be the case that the problem is at the reciever's end. Need to do a better check of where the exception was thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 13:48:09 2006
Return-Path: 
 <hadoop-dev-return-3052-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75907 invoked from network); 10 Aug 2006 13:48:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 13:48:09 -0000
Received: (qmail 70416 invoked by uid 500); 10 Aug 2006 13:48:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70388 invoked by uid 500); 10 Aug 2006 13:48:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70379 invoked by uid 99); 10 Aug 2006 13:48:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 06:48:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 06:48:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0B53C7142E4
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 13:45:23 +0000 (GMT)
Message-ID: <20509662.1155217523037.JavaMail.jira@brutus>
Date: Thu, 10 Aug 2006 06:45:23 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-436) Concluding that the Map task failed
 may not be always right in getMapOutput.jsp
In-Reply-To: <11136023.1155150553947.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-436?page=all ]

Devaraj Das updated HADOOP-436:
-------------------------------

    Attachment: getmapout.patch

Attcahed is the patch.

> Concluding that the Map task failed may not be always right in getMapOutput.jsp
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-436
>                 URL: http://issues.apache.org/jira/browse/HADOOP-436
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: getmapout.patch
>
>
> In the getMapOutput.jsp, tracker.mapOutputLost is called irrespective of whether the sender of the map output threw an exception or the receiver died (thereby closing the socket causing the jsp to throw an exception). Invoking the method causes the corresponding map task to fail and causes it to be rescheduled but it may be the case that the problem is at the reciever's end. Need to do a better check of where the exception was thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 19:26:09 2006
Return-Path: 
 <hadoop-dev-return-3053-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55525 invoked from network); 10 Aug 2006 19:26:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 19:26:09 -0000
Received: (qmail 8791 invoked by uid 500); 10 Aug 2006 19:26:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8616 invoked by uid 500); 10 Aug 2006 19:26:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8606 invoked by uid 99); 10 Aug 2006 19:26:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 12:26:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 12:26:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D6FCE7142C7
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 19:23:13 +0000 (GMT)
Message-ID: <10321927.1155237793878.JavaMail.jira@brutus>
Date: Thu, 10 Aug 2006 12:23:13 -0700 (PDT)
From: "Dick King (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-444) In streaming with a NONE reducer, you
 get duplicate files if a mapper fails, is restarted, and succeeds next
 time.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In streaming with a NONE reducer, you get duplicate files if a mapper fails, is restarted, and succeeds next time.
------------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-444
                 URL: http://issues.apache.org/jira/browse/HADOOP-444
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
    Affects Versions: 0.5.0
            Reporter: Dick King


When the dust settled after a streaming run, the directory ended up looking like this:

  /user/dking/<project-name>/K-HTML-UTF8-2006-08-09-rescued-abstracted/task_0026_m_007384_0	<r 3>	10563406
  /user/dking/<project-name>/K-HTML-UTF8-2006-08-09-rescued-abstracted/task_0026_m_007384_1	<r 3>	10563406

Future processing will receive duplicated data.

-dk


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 19:41:11 2006
Return-Path: 
 <hadoop-dev-return-3054-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63014 invoked from network); 10 Aug 2006 19:41:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 19:41:11 -0000
Received: (qmail 33145 invoked by uid 500); 10 Aug 2006 19:41:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33119 invoked by uid 500); 10 Aug 2006 19:41:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33110 invoked by uid 99); 10 Aug 2006 19:41:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 12:41:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 12:41:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CE2197142C9
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 19:38:15 +0000 (GMT)
Message-ID: <18622998.1155238695841.JavaMail.jira@brutus>
Date: Thu, 10 Aug 2006 12:38:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-181) task trackers should not restart for
 having a late heartbeat
In-Reply-To: <701484.1146509206378.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-181?page=comments#action_12427327 ] 
            
Devaraj Das commented on HADOOP-181:
------------------------------------

Doug, does it make sense to do what is done in this patch only when speculative execution is on?

> task trackers should not restart for having a late heartbeat
> ------------------------------------------------------------
>
>                 Key: HADOOP-181
>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.6.0
>
>         Attachments: lost-heartbeat.patch
>
>
> TaskTrackers should not close and restart themselves for having a late heartbeat. The JobTracker should just accept their current status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 20:00:10 2006
Return-Path: 
 <hadoop-dev-return-3055-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74180 invoked from network); 10 Aug 2006 20:00:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 20:00:10 -0000
Received: (qmail 72469 invoked by uid 500); 10 Aug 2006 20:00:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72453 invoked by uid 500); 10 Aug 2006 20:00:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72444 invoked by uid 99); 10 Aug 2006 20:00:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 13:00:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 13:00:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BAD27714283
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 19:57:14 +0000 (GMT)
Message-ID: <13367256.1155239834762.JavaMail.jira@brutus>
Date: Thu, 10 Aug 2006 12:57:14 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-442) slaves file should include an
 'exclude' section, to prevent "bad" datanodes and tasktrackers from
 disrupting  a cluster
In-Reply-To: <650567.1155195793928.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-442?page=comments#action_12427334 ] 
            
Bryan Pendleton commented on HADOOP-442:
----------------------------------------

I too have had problems like this over time.

Another way to deal with this might be to hand out a new random ID to each instance on startup. The namenode/jobtracker would know the "correct" value, and treat as rogue any nodes which try to register but don't know the current "correct" value. This could be re-set at each full-cluster restart, to make sure that all nodes participating are "up to date" and correct.



> slaves file should include an 'exclude' section, to prevent "bad" datanodes and tasktrackers from disrupting  a cluster
> -----------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-442
>                 URL: http://issues.apache.org/jira/browse/HADOOP-442
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Yoram Arnon
>
> I recently had a few nodes go bad, such that they were inaccessible to ssh, but were still running their java processes.
> tasks that executed on them were failing, causing jobs to fail.
> I couldn't stop the java processes, because of the ssh issue, so I was helpless until I could actually power down these nodes.
> restarting the cluster doesn't help, even when removing the bad nodes from the slaves file - they just reconnect and are accepted.
> while we plan to avoid tasks from launching on the same nodes over and over, what I'd like is to be able to prevent rogue processes from connecting to the masters.
> Ideally, the slaves file will contain an 'exclude' section, which will list nodes that shouldn't be accessed, and should be ignored if they try to connect. That would also help in configuring the slaves file for a large cluster - I'd list the full range of machines in the cluster, then list the ones that are down in the 'exclude' section

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 20:57:10 2006
Return-Path: 
 <hadoop-dev-return-3056-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94219 invoked from network); 10 Aug 2006 20:57:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 20:57:10 -0000
Received: (qmail 67520 invoked by uid 500); 10 Aug 2006 20:57:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67490 invoked by uid 500); 10 Aug 2006 20:57:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67479 invoked by uid 99); 10 Aug 2006 20:57:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 13:57:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 13:57:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 10EC57142D0
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 20:54:15 +0000 (GMT)
Message-ID: <33376677.1155243255066.JavaMail.jira@brutus>
Date: Thu, 10 Aug 2006 13:54:15 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-445) Parallel data/socket writing for
 DFSOutputStream
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Parallel data/socket writing for DFSOutputStream
------------------------------------------------

                 Key: HADOOP-445
                 URL: http://issues.apache.org/jira/browse/HADOOP-445
             Project: Hadoop
          Issue Type: Improvement
    Affects Versions: 0.5.0
            Reporter: Benjamin Reed
         Attachments: fastClientWrite.patch

Currently, as DFS clients output blocks they write the entire block to disk before starting to transmit to the datanode. By writing to disk the client is able to retry a block write if the datanode files in the middle of a block transfer. Writing to disk and then to the datanode adds latency. Hopefully, the common case is that block transfers to datanodes are successful. This patch writes to the datanode and the disk in parallel. If the write to the datanode fails, it falls back to current behavior.

In my tests of transmits of 237M and 946M datasets using -copyFromLocal I'm seeing a 20-25% improvement in throughput.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 21:15:09 2006
Return-Path: 
 <hadoop-dev-return-3057-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16610 invoked from network); 10 Aug 2006 21:15:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 21:15:09 -0000
Received: (qmail 12296 invoked by uid 500); 10 Aug 2006 21:15:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12276 invoked by uid 500); 10 Aug 2006 21:15:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12267 invoked by uid 99); 10 Aug 2006 21:15:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 14:15:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 14:15:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E240F714283
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 21:12:13 +0000 (GMT)
Message-ID: <15156194.1155244333923.JavaMail.jira@brutus>
Date: Thu, 10 Aug 2006 14:12:13 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-446) Startup sanity data directory check in
 main loop.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Startup sanity data directory check in main loop.
-------------------------------------------------

                 Key: HADOOP-446
                 URL: http://issues.apache.org/jira/browse/HADOOP-446
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.5.0
            Reporter: Benjamin Reed
            Priority: Minor


In the overall scheme of things this is probably a nit, but in the run() method of DataXceiveServer in DataNode.java the method "data.checkDataDir()" is called right after the socket accept. data.checkDataDir() is a sanity check that makes sure the data directory is setup properly. It is a good sanity check to do when the server is started, but it seems like a bit of a waste to do it after every socket accept. If something happens that causes the sanity check to fail, you would end up finding out about it during the processing of the request anyway.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 21:32:24 2006
Return-Path: 
 <hadoop-dev-return-3058-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33781 invoked from network); 10 Aug 2006 21:32:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 21:32:24 -0000
Received: (qmail 55625 invoked by uid 500); 10 Aug 2006 21:32:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55458 invoked by uid 500); 10 Aug 2006 21:32:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55449 invoked by uid 99); 10 Aug 2006 21:32:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 14:32:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 14:32:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4E2507142C7
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 21:29:15 +0000 (GMT)
Message-ID: <24908115.1155245355317.JavaMail.jira@brutus>
Date: Thu, 10 Aug 2006 14:29:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-263) task status should include
 timestamps for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-263?page=comments#action_12427353 ] 
            
Owen O'Malley commented on HADOOP-263:
--------------------------------------

A couple of points:
   1. I'd express the start times as absolute times and the others as relative times in hours, minutes and seconds.
   2. the web ui shouldn't include shuffle & sort time columns for map tasks.
   3. "blank" times should be written as "&nbsp;" in the html so that the browsers make the box for the cell.
   4. usually, when you are creating format objects, you keep them in static fields rather than creating them on each call.
   5. the start times should be when the task starts running not when the job is submitted
   6. the shuffle time is never being set

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 23:31:19 2006
Return-Path: 
 <hadoop-dev-return-3059-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80041 invoked from network); 10 Aug 2006 23:31:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 23:31:19 -0000
Received: (qmail 64838 invoked by uid 500); 10 Aug 2006 23:31:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64768 invoked by uid 500); 10 Aug 2006 23:31:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64497 invoked by uid 99); 10 Aug 2006 23:31:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 16:31:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 16:31:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E412A7142C7
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 23:28:16 +0000 (GMT)
Message-ID: <29749677.1155252496931.JavaMail.jira@brutus>
Date: Thu, 10 Aug 2006 16:28:16 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-181) task trackers should not restart for
 having a late heartbeat
In-Reply-To: <701484.1146509206378.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-181?page=comments#action_12427371 ] 
            
eric baldeschwieler commented on HADOOP-181:
--------------------------------------------

Oh a whole thread can be had on this I'm sure!

Why does one turn off speculative execution?  Presumably because a MAP has unmanaged side-effects?

But... the framework still will rerun jobs if they complete and then the node is lost, right?  Won't this tickle exactly the same issues that speculative execution raised anyway?

Doesn't this imply that disallowing speculative execution is basically not the right mechanism to deal with the side-effect issue and that this deserves a rethink?


> task trackers should not restart for having a late heartbeat
> ------------------------------------------------------------
>
>                 Key: HADOOP-181
>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.6.0
>
>         Attachments: lost-heartbeat.patch
>
>
> TaskTrackers should not close and restart themselves for having a late heartbeat. The JobTracker should just accept their current status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 23:40:17 2006
Return-Path: 
 <hadoop-dev-return-3060-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83552 invoked from network); 10 Aug 2006 23:40:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 23:40:17 -0000
Received: (qmail 74611 invoked by uid 500); 10 Aug 2006 23:40:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74588 invoked by uid 500); 10 Aug 2006 23:40:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74571 invoked by uid 99); 10 Aug 2006 23:40:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 16:40:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 16:40:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6C7F17141F0
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 23:37:17 +0000 (GMT)
Message-ID: <10987409.1155253037441.JavaMail.jira@brutus>
Date: Thu, 10 Aug 2006 16:37:17 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-181) task trackers should not restart for
 having a late heartbeat
In-Reply-To: <701484.1146509206378.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-181?page=comments#action_12427373 ] 
            
eric baldeschwieler commented on HADOOP-181:
--------------------------------------------

On reintegrating lost task trackers...

It does seem like we should do this to me, but we need to make sure we reason through how this effects corner cases, what invariants the system does maintain and so on.

I suggest we work this through, and then go forward with this patch (modified if we find any corner cases) and post the reasoning, so we can review it as this logic evolves.  (And update any existing documentation in this area of course...)


> task trackers should not restart for having a late heartbeat
> ------------------------------------------------------------
>
>                 Key: HADOOP-181
>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.6.0
>
>         Attachments: lost-heartbeat.patch
>
>
> TaskTrackers should not close and restart themselves for having a late heartbeat. The JobTracker should just accept their current status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 10 23:41:01 2006
Return-Path: 
 <hadoop-dev-return-3061-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84066 invoked from network); 10 Aug 2006 23:41:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 23:41:01 -0000
Received: (qmail 75685 invoked by uid 500); 10 Aug 2006 23:41:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75519 invoked by uid 500); 10 Aug 2006 23:41:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75510 invoked by uid 99); 10 Aug 2006 23:41:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 16:41:00 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 16:40:49 -0700
Received: from [207.126.231.236] (eric14-mac.corp.yahoo.com [207.126.231.236])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k7ANeHmA043380
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 16:40:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=hoh5PLTL5UISzql8PG3pWv3xfqby3i17+WZsoNqaKv+log4SuKQl2UuvXbkvyKN4
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <18622998.1155238695841.JavaMail.jira@brutus>
References: <18622998.1155238695841.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <13E99379-2D72-4288-847E-D4F603DD23C6@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-181) task trackers should not restart
 for having a late heartbeat
Date: Thu, 10 Aug 2006 16:40:16 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Why don't we include documenting this as part of the the "map-reduce  
walk-through" sprint item?

-----
Oh a whole thread can be had on this I'm sure!

Why does one turn off speculative execution?  Presumably because a  
MAP has unmanaged side-effects?

But... the framework still will rerun jobs if they complete and then  
the node is lost, right?  Won't this tickle exactly the same issues  
that speculative execution raised anyway?

Doesn't this imply that disallowing speculative execution is  
basically not the right mechanism to deal with the side-effect issue  
and that this deserves a rethink?

On Aug 10, 2006, at 12:38 PM, Devaraj Das (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-181? 
> page=comments#action_12427327 ]
>
> Devaraj Das commented on HADOOP-181:
> ------------------------------------
>
> Doug, does it make sense to do what is done in this patch only when  
> speculative execution is on?
>
>> task trackers should not restart for having a late heartbeat
>> ------------------------------------------------------------
>>
>>                 Key: HADOOP-181
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>>             Project: Hadoop
>>          Issue Type: Bug
>>          Components: mapred
>>            Reporter: Owen O'Malley
>>         Assigned To: Devaraj Das
>>             Fix For: 0.6.0
>>
>>         Attachments: lost-heartbeat.patch
>>
>>
>> TaskTrackers should not close and restart themselves for having a  
>> late heartbeat. The JobTracker should just accept their current  
>> status.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Thu Aug 10 23:41:56 2006
Return-Path: 
 <hadoop-dev-return-3062-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84205 invoked from network); 10 Aug 2006 23:41:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 23:41:56 -0000
Received: (qmail 76002 invoked by uid 500); 10 Aug 2006 23:41:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75981 invoked by uid 500); 10 Aug 2006 23:41:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75972 invoked by uid 99); 10 Aug 2006 23:41:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 16:41:55 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 16:41:44 -0700
Received: from [207.126.231.236] (eric14-mac.corp.yahoo.com [207.126.231.236])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k7ANeHmB043380
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Thu, 10 Aug 2006 16:41:13 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=LMhCQJ7zdExM+0Evm8mDJr7UqYoRVuvQoBnqN0Stl8mz92mGeuv5ALy7Rmzq/9Rh
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <18622998.1155238695841.JavaMail.jira@brutus>
References: <18622998.1155238695841.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F08D088E-96EA-4967-B5FF-8C761DE8C9A7@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-181) task trackers should not restart
 for having a late heartbeat
Date: Thu, 10 Aug 2006 16:41:12 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

(RESEND, MENT TO ATTACH THE COMMENT BELOW TO THIS POSTING)

Why don't we include documenting this as part of the the "map-reduce  
walk-through" sprint item?

-----
On reintegrating lost task trackers...

It does seem like we should do this to me, but we need to make sure  
we reason through how this effects corner cases, what invariants the  
system does maintain and so on.

I suggest we work this through, and then go forward with this patch  
(modified if we find any corner cases) and post the reasoning, so we  
can review it as this logic evolves.  (And update any existing  
documentation in this area of course...)


On Aug 10, 2006, at 12:38 PM, Devaraj Das (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-181? 
> page=comments#action_12427327 ]
>
> Devaraj Das commented on HADOOP-181:
> ------------------------------------
>
> Doug, does it make sense to do what is done in this patch only when  
> speculative execution is on?
>
>> task trackers should not restart for having a late heartbeat
>> ------------------------------------------------------------
>>
>>                 Key: HADOOP-181
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>>             Project: Hadoop
>>          Issue Type: Bug
>>          Components: mapred
>>            Reporter: Owen O'Malley
>>         Assigned To: Devaraj Das
>>             Fix For: 0.6.0
>>
>>         Attachments: lost-heartbeat.patch
>>
>>
>> TaskTrackers should not close and restart themselves for having a  
>> late heartbeat. The JobTracker should just accept their current  
>> status.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Fri Aug 11 16:53:54 2006
Return-Path: 
 <hadoop-dev-return-3064-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14503 invoked from network); 11 Aug 2006 16:53:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 16:53:54 -0000
Received: (qmail 98113 invoked by uid 500); 11 Aug 2006 16:53:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98094 invoked by uid 500); 11 Aug 2006 16:53:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Delivered-To: moderator for hadoop-dev@lucene.apache.org
Received: (qmail 17862 invoked by uid 99); 11 Aug 2006 05:02:00 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
References: <13436198.1155057493889.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <8775b8f9f88902a4af9809d60a95dcfd@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Created: (HADOOP-432) support undelete, snapshots,
 or other mechanism to recover lost files
Date: Thu, 10 Aug 2006 22:01:16 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

+1 on undelete.  Move the deleted files into a special place and start 
actually deleting them when the disk space is low.  If the space gets 
low only on few nodes, and the load is not high, the blocks from 
deleted files may be re-replicated to other nodes, -- or the 
replication factor of deleted files may be decreased.

Snapshot seems an orthogonal functionality with a whole bunch of 
independent requruirements
On Aug 8, 2006, at 10:18 AM, Yoram Arnon (JIRA) wrote:

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                  Key: HADOOP-432
>                  URL: http://issues.apache.org/jira/browse/HADOOP-432
>              Project: Hadoop
>           Issue Type: Improvement
>             Reporter: Yoram Arnon
>
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and 
> automatic, with scheduling options.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the 
> administrators: 
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see: 
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Fri Aug 11 16:13:04 2006
Return-Path: 
 <hadoop-dev-return-3063-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1452 invoked from network); 11 Aug 2006 16:13:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 16:13:04 -0000
Received: (qmail 8762 invoked by uid 500); 11 Aug 2006 16:13:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8739 invoked by uid 500); 11 Aug 2006 16:13:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8728 invoked by uid 99); 11 Aug 2006 16:13:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 09:13:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 09:13:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 626257142E5
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 16:10:15 +0000 (GMT)
Message-ID: <9691114.1155312615400.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 09:10:15 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Sanjay Dahiya updated HADOOP-263:
---------------------------------

    Status: Open  (was: Patch Available)

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 17:40:09 2006
Return-Path: 
 <hadoop-dev-return-3065-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27938 invoked from network); 11 Aug 2006 17:40:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 17:40:09 -0000
Received: (qmail 9840 invoked by uid 500); 11 Aug 2006 17:40:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9768 invoked by uid 500); 11 Aug 2006 17:40:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9713 invoked by uid 99); 11 Aug 2006 17:40:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 10:40:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 10:40:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 962847142E5
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 17:37:16 +0000 (GMT)
Message-ID: <14833808.1155317836611.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 10:37:16 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12427564 ] 
            
Owen O'Malley commented on HADOOP-54:
-------------------------------------

I have a couple of comments. I had more, but jira ate them.

(It really sucks that jira throws your comment away if your login times out. *sigh*)

1. The Writer class should have the unneeded compression stuff taken out.
2. The Writer.compressed and blockCompressed fields should be taken out and replaced with methods.
3. The sync bytes in the block compressed writer should be written before the block rather than after (except for the first block). The goal is to get them between blocks, you don't really want one at the end (or beginning) of the file.
4. The CompressedBytes class should be private.
5. The private Writer constructor on line 307 is not used.
6. The static field VERSION_4 should be renamed to BLOCK_COMPRESS_VERSION and it should be marked final.
7. I'd rename the "byte[] version" to "syncBlock" and make a new field "byte version" that will contain just the last byte, which is the file version.
8. We really need to move to the Text class instead of UTF8. This has a couple of changes:
  A.  in writeFileHeader, the "new UTF8(...).write(out);" should be "Text.writeString(out, ...);"
  B. in init, reading the class names strings is the reverse: keyClass = Text.readString(in);
  C. we have to support the UTF8 string encodings for old file versions, so you'll need to switch behavior based on the version we are reading.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFiles.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 17:43:02 2006
Return-Path: 
 <hadoop-dev-return-3066-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28818 invoked from network); 11 Aug 2006 17:43:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 17:43:02 -0000
Received: (qmail 15703 invoked by uid 500); 11 Aug 2006 17:43:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15685 invoked by uid 500); 11 Aug 2006 17:43:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15676 invoked by uid 99); 11 Aug 2006 17:43:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 10:43:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 10:43:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D77607142D3
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 17:40:13 +0000 (GMT)
Message-ID: <5956345.1155318013880.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 10:40:13 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-447)
 DistributedFileSystem.getBlockSize(Path) does not resolve absolute path
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DistributedFileSystem.getBlockSize(Path) does not resolve absolute path
-----------------------------------------------------------------------

                 Key: HADOOP-447
                 URL: http://issues.apache.org/jira/browse/HADOOP-447
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Benjamin Reed


getBlockSize() does not check for an absolute path like the rest of the DistributeFileSystem API does. Consequently getBlockSize(Path) does not work with relative paths.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 17:51:08 2006
Return-Path: 
 <hadoop-dev-return-3067-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31416 invoked from network); 11 Aug 2006 17:51:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 17:51:08 -0000
Received: (qmail 32494 invoked by uid 500); 11 Aug 2006 17:51:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32472 invoked by uid 500); 11 Aug 2006 17:51:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32444 invoked by uid 99); 11 Aug 2006 17:51:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 10:51:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 10:51:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6DB807142E7
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 17:48:17 +0000 (GMT)
Message-ID: <23646598.1155318497445.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 10:48:17 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-448) DistributedFileSystem uses the wrong
 user.name to set the working directory.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DistributedFileSystem uses the wrong user.name to set the working directory.
----------------------------------------------------------------------------

                 Key: HADOOP-448
                 URL: http://issues.apache.org/jira/browse/HADOOP-448
             Project: Hadoop
          Issue Type: Bug
            Reporter: Benjamin Reed


DistributedFileSystem initializes the working directory to be new Path("/user", System.getProperty("user.name")); rather than new Path("/user", conf.get("user.name")); the initialization would have to be moved to the constructor to access conf.

If relative paths are used, the remote tasks and JobTracker will use the uid they are running with rather than the id of the user that submitted the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 18:05:07 2006
Return-Path: 
 <hadoop-dev-return-3068-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35206 invoked from network); 11 Aug 2006 18:05:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 18:05:07 -0000
Received: (qmail 71268 invoked by uid 500); 11 Aug 2006 18:05:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71235 invoked by uid 500); 11 Aug 2006 18:05:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71225 invoked by uid 99); 11 Aug 2006 18:05:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 11:05:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 11:05:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DB0677142C9
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 18:02:13 +0000 (GMT)
Message-ID: <19212767.1155319333894.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 11:02:13 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-449) Generalize the SequenceFileInputFilter
 to apply to any InputFormat
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Generalize the SequenceFileInputFilter to apply to any InputFormat
------------------------------------------------------------------

                 Key: HADOOP-449
                 URL: http://issues.apache.org/jira/browse/HADOOP-449
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.5.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.6.0


I'd like to generalize the SequenceFileInputFormat that was introduced in HADOOP-412 so that it can be applied to any InputFormat. To do this, I propose:

interface WritableFilter {
   boolean accept(Writable item);
}

class FilterInputFormat implements InputFormat {
  ...
}

FilterInputFormat would look in the JobConf for:
   mapred.input.filter.source = the underlying input format
   mapred.input.filter.filters = a list of class names that implement WritableFilter

The FilterInputFormat will work like the current SequenceFilter, but use an internal RecordReader rather than the SequenceFile. This will require adding a next(key) and getCurrentValue(value) to the RecordReader interface, but that will be addressed in a different issue.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 18:07:07 2006
Return-Path: 
 <hadoop-dev-return-3070-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35733 invoked from network); 11 Aug 2006 18:07:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 18:07:07 -0000
Received: (qmail 73996 invoked by uid 500); 11 Aug 2006 18:07:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73976 invoked by uid 500); 11 Aug 2006 18:07:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73967 invoked by uid 99); 11 Aug 2006 18:07:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 11:07:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 11:07:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 19D507142C9
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 18:04:15 +0000 (GMT)
Message-ID: <19150435.1155319455103.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 11:04:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-434) Use Hadoop scripts to run
 smallJobsBenchmark to avoid classpath issues.
In-Reply-To: <20188000.1155075613933.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-434?page=all ]

Doug Cutting resolved HADOOP-434.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Sanjay!

> Use Hadoop scripts to run smallJobsBenchmark to avoid classpath issues.
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-434
>                 URL: http://issues.apache.org/jira/browse/HADOOP-434
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: patch.txt, patch_benchmark.txt
>
>
> Small job benchmark uses its own scripts to set classpath, it should use hadoop scripts with ProgramDriver to run the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 18:07:10 2006
Return-Path: 
 <hadoop-dev-return-3071-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35767 invoked from network); 11 Aug 2006 18:07:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 18:07:10 -0000
Received: (qmail 74196 invoked by uid 500); 11 Aug 2006 18:07:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74177 invoked by uid 500); 11 Aug 2006 18:07:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74168 invoked by uid 99); 11 Aug 2006 18:07:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 11:07:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 11:07:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1F9207142D3
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 18:04:16 +0000 (GMT)
Message-ID: <28268782.1155319456127.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 11:04:16 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-449) Generalize the
 SequenceFileInputFilter to apply to any InputFormat
In-Reply-To: <19212767.1155319333894.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-449?page=comments#action_12427572 ] 
            
Owen O'Malley commented on HADOOP-449:
--------------------------------------

Oops, I should use the structure of SequencFileInputFilter and do:

public class FilterInputFormat implements InputFormat {
  public static interface Filter {
     boolean accept(Writable key);
  }
  ...
}

> Generalize the SequenceFileInputFilter to apply to any InputFormat
> ------------------------------------------------------------------
>
>                 Key: HADOOP-449
>                 URL: http://issues.apache.org/jira/browse/HADOOP-449
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>
> I'd like to generalize the SequenceFileInputFormat that was introduced in HADOOP-412 so that it can be applied to any InputFormat. To do this, I propose:
> interface WritableFilter {
>    boolean accept(Writable item);
> }
> class FilterInputFormat implements InputFormat {
>   ...
> }
> FilterInputFormat would look in the JobConf for:
>    mapred.input.filter.source = the underlying input format
>    mapred.input.filter.filters = a list of class names that implement WritableFilter
> The FilterInputFormat will work like the current SequenceFilter, but use an internal RecordReader rather than the SequenceFile. This will require adding a next(key) and getCurrentValue(value) to the RecordReader interface, but that will be addressed in a different issue.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 18:07:06 2006
Return-Path: 
 <hadoop-dev-return-3069-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35701 invoked from network); 11 Aug 2006 18:07:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 18:07:06 -0000
Received: (qmail 73810 invoked by uid 500); 11 Aug 2006 18:07:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73787 invoked by uid 500); 11 Aug 2006 18:07:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73778 invoked by uid 99); 11 Aug 2006 18:07:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 11:07:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 11:07:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 265FC71428E
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 18:04:17 +0000 (GMT)
Message-ID: <18965131.1155319457154.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 11:04:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-430) http server should die if the Datanode
 fails.
In-Reply-To: <21253528.1154990113889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-430?page=all ]

Doug Cutting updated HADOOP-430:
--------------------------------

    Fix Version/s: 0.6.0
                       (was: 0.5.1)

> http server should die if the Datanode fails.
> ---------------------------------------------
>
>                 Key: HADOOP-430
>                 URL: http://issues.apache.org/jira/browse/HADOOP-430
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>             Fix For: 0.6.0
>
>         Attachments: RegistrationOrder.patch
>
>
> HADOOP-375 changed the order in which a data node registers and starts its http server.
> Current version first starts the http server, then registers. As a result if the registration fails,
> which can happen e.g. if the datanode has illegal storage id (=does not belong to the cluster),
> the http server keeps running, which makes the data node seem running too.
> I think 2 things need to be done.
> 1) Datanode registration should precede the http server startup.
> 2) The http server should shutdown when the datanode fails (in general).
> I am attaching a patch for the first item.
> Does anybody know how the latter can be done in the version of jetty we are on now?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 18:43:05 2006
Return-Path: 
 <hadoop-dev-return-3072-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46897 invoked from network); 11 Aug 2006 18:43:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 18:43:05 -0000
Received: (qmail 41984 invoked by uid 500); 11 Aug 2006 18:43:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41823 invoked by uid 500); 11 Aug 2006 18:43:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41814 invoked by uid 99); 11 Aug 2006 18:43:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 11:43:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 11:43:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D46EC714283
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 18:40:15 +0000 (GMT)
Message-ID: <27763113.1155321615867.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 11:40:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-181) task trackers should not restart for
 having a late heartbeat
In-Reply-To: <701484.1146509206378.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-181?page=comments#action_12427581 ] 
            
Doug Cutting commented on HADOOP-181:
-------------------------------------

> Why does one turn off speculative execution?

In the case of the Nutch crawler, speculative execution is disabled to observe politeness.  We do not want two tasks to attempt to fetch pages from a site at the same time.

This patch adds a fair amount of complexity, introducing a new state for tasks (presumed dead, but reanimateable).  A new state is likely to add new failure modes.

Does anyone deny that this primarily addresses an issue that would go away if we could more reliably detect tasktracker death?  Shouldn't we attempt to fix that first?  Sameer raises the issue of "transient network problems".  Are we actually seeing these?  Even if these were to occur, the system would operate correctly as-is: this is an optimization.  Is this a common-enough case that we can afford to optimize it?


> task trackers should not restart for having a late heartbeat
> ------------------------------------------------------------
>
>                 Key: HADOOP-181
>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.6.0
>
>         Attachments: lost-heartbeat.patch
>
>
> TaskTrackers should not close and restart themselves for having a late heartbeat. The JobTracker should just accept their current status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 19:22:10 2006
Return-Path: 
 <hadoop-dev-return-3073-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64866 invoked from network); 11 Aug 2006 19:22:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 19:22:10 -0000
Received: (qmail 4128 invoked by uid 500); 11 Aug 2006 19:22:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3954 invoked by uid 500); 11 Aug 2006 19:22:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3945 invoked by uid 99); 11 Aug 2006 19:22:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 12:22:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 12:22:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DAC6F7142C9
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 19:19:15 +0000 (GMT)
Message-ID: <33264186.1155323955893.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 12:19:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-64) DataNode should be capable of
 managing multiple volumes
In-Reply-To: <96561968.1141686362086.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-64?page=comments#action_12427595 ] 
            
Doug Cutting commented on HADOOP-64:
------------------------------------

Since we only expect to have around 10k blocks per node, storing the table in memory should not be a problem.  With even 100k blockids per nodem, at 100bytes of RAM per blockid, a datanode would only require 10MB.  So optimizing this seems premature.

> DataNode should be capable of managing multiple volumes
> -------------------------------------------------------
>
>                 Key: HADOOP-64
>                 URL: http://issues.apache.org/jira/browse/HADOOP-64
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> The dfs Datanode can only store data on a single filesystem volume. When a node runs its disks JBOD this means running a Datanode per disk on the machine. While the scheme works reasonably well on small clusters, on larger installations (several 100 nodes) it implies a very large number of Datanodes with associated management overhead in the Namenode.
> The Datanod should be enhanced to be able to handle multiple volumes on a single machine.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 19:42:03 2006
Return-Path: 
 <hadoop-dev-return-3074-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71570 invoked from network); 11 Aug 2006 19:42:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 19:42:03 -0000
Received: (qmail 34959 invoked by uid 500); 11 Aug 2006 19:42:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34944 invoked by uid 500); 11 Aug 2006 19:42:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34935 invoked by uid 99); 11 Aug 2006 19:42:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 12:42:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 12:42:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EE2B271428E
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 19:39:14 +0000 (GMT)
Message-ID: <3135768.1155325154972.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 12:39:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-433) Better access to the RecordReader
In-Reply-To: <31236916.1155072253970.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-433?page=comments#action_12427599 ] 
            
Doug Cutting commented on HADOOP-433:
-------------------------------------

Are you proposing that we should add a getSplit() method to RecordReader?  Then the progress wrapper could delegate to provide the original split.  Would that suffice?

BTW, do we have an issue anywhere to add a generic Split interface?  I couldn't find one.

> Better access to the RecordReader
> ---------------------------------
>
>                 Key: HADOOP-433
>                 URL: http://issues.apache.org/jira/browse/HADOOP-433
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>            Priority: Minor
>
> The record reader has access to the FileSplit which can in turn have information that is useful to the Mapper. For example, Map processing may vary according to file name or attributes associated with a file. Unfortunately, even using a MapRunner you only have access to the progress wrapper of the RecordReader. To get access to the real record reader I had to use a thread local variable which I set in RecordReader.getNext(). It would be much nicer if you could get a reference to the real RecordReader from the RecordReader passed to MapRunner.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 20:08:05 2006
Return-Path: 
 <hadoop-dev-return-3075-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81638 invoked from network); 11 Aug 2006 20:08:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 20:08:05 -0000
Received: (qmail 86694 invoked by uid 500); 11 Aug 2006 20:08:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86669 invoked by uid 500); 11 Aug 2006 20:08:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86660 invoked by uid 99); 11 Aug 2006 20:08:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:08:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:08:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CCC4E71428E
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 20:05:14 +0000 (GMT)
Message-ID: <17178655.1155326714836.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 13:05:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-435) Encapsulating startup scripts and
 jars in a single Jar file.
In-Reply-To: <23406804.1155134593912.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-435?page=comments#action_12427608 ] 
            
Doug Cutting commented on HADOOP-435:
-------------------------------------

I think moving much of the logic from bin/hadoop into Java is a good idea.  We still need scripts to manage daemons, but client operation would be simplified.

I don't see your start and stop scripts here.

Specifying a conf directory could be done by manipulating the class loader or classpath, rather than adding a lot of special case code.

Shouldn't we standardize on commons-cli for command-line processing?  Shouldn't this somehow integrate with the Tool and ToolBase stuff?

> Encapsulating startup scripts and jars in a single Jar file.
> ------------------------------------------------------------
>
>                 Key: HADOOP-435
>                 URL: http://issues.apache.org/jira/browse/HADOOP-435
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>         Attachments: hadoopit.patch
>
>
> Currently, hadoop is a set of scripts, configurations, and jar files. It makes it a pain to install on compute and datanodes. It also makes it a pain to setup clients so that they can use hadoop. Everytime things are updated the pain begins again.
> I suggest that we should be able to build a single Jar file that has a Main-Class defined with the configuration built in so that we can distribute that one file to nodes and clients on updates. One nice thing that I haven't done would be to make the jarfile downloadable from the JobTracker webpage so that clients can easily submit the jobs.
> I currently use such a setup on my small cluster. To start the job tracker I used "java -jar hadoop.jar -l /tmp/log jobtracker" to submit a job I use "java -jar hadoop.jar jar wordcount.jar". I used the client on my linux and Mac OSX machines and I'll I need installed in java and the hadoop.jar file.
> hadoop.jar helps with logfiles and configurations. The default of pulling the config files from the jar file can be overridden by specifying a config directory so that you can easily have machine specific configs and still have the same hadoop.jar on all machines.
> Here are the available commands from hadoop.jar:
> USAGE: hadoop [-l logdir] command
>   User commands:
>     dfs          run a DFS admin client
>     jar          run a JAR file
>     job          manipulate MapReduce jobs
>     fsck         run a DFS filesystem check utility
>   Runtime startup commands:
>     datanode     run a DFS datanode
>     jobtracker   run the MapReduce job Tracker node
>     namenode     run the DFS namenode (namenode -format formats the FS)
>     tasktracker  run a MapReduce task Tracker node
>   HadoopLoader commands:
>     buildJar     builds the HadoopLoader jar file
>     conf         dump hadoop configuration
> Note, I don't have the classes for hadoop streaming built into this Jar file, but if I had that would also be an option (it checks for needed classes before displaying an option). It makes it very easy for users that just write scripts to use hadoop straight from their machines.
> I'm also attaching the start.sh and stop.sh scripts that I use. These are the only scripts I use to startup the daemons. They are very simple and the start.sh script uses the config file to figure out whether or not to start the jobtracker and the nameserver.
> The attached patch adds the HadoopIt patch, modifies the Configuration class to find the config files correctly, and modifies the build to make a fully contained hadoop.jar. To update the configuration in a hadoop.jar you simply use "zip hadoop.jar hadoop-site.xml".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 20:17:04 2006
Return-Path: 
 <hadoop-dev-return-3076-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85038 invoked from network); 11 Aug 2006 20:17:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 20:17:04 -0000
Received: (qmail 1552 invoked by uid 500); 11 Aug 2006 20:17:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1531 invoked by uid 500); 11 Aug 2006 20:17:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1522 invoked by uid 99); 11 Aug 2006 20:17:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:17:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:17:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D770B714293
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 20:14:14 +0000 (GMT)
Message-ID: <2813661.1155327254880.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 13:14:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-442) slaves file should include an
 'exclude' section, to prevent "bad" datanodes and tasktrackers from
 disrupting  a cluster
In-Reply-To: <650567.1155195793928.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-442?page=comments#action_12427609 ] 
            
Doug Cutting commented on HADOOP-442:
-------------------------------------

The slaves file is currently only used by the start/stop scripts, so it won't help here.

Perhaps the jobtracker and namenode should have a public API that permits particular hosts to be banned.  Then the web ui could then use this to let adminstrators ban hosts.  We could initialize the list from a config file, in the case of persistently bad hosts.

> slaves file should include an 'exclude' section, to prevent "bad" datanodes and tasktrackers from disrupting  a cluster
> -----------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-442
>                 URL: http://issues.apache.org/jira/browse/HADOOP-442
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Yoram Arnon
>
> I recently had a few nodes go bad, such that they were inaccessible to ssh, but were still running their java processes.
> tasks that executed on them were failing, causing jobs to fail.
> I couldn't stop the java processes, because of the ssh issue, so I was helpless until I could actually power down these nodes.
> restarting the cluster doesn't help, even when removing the bad nodes from the slaves file - they just reconnect and are accepted.
> while we plan to avoid tasks from launching on the same nodes over and over, what I'd like is to be able to prevent rogue processes from connecting to the masters.
> Ideally, the slaves file will contain an 'exclude' section, which will list nodes that shouldn't be accessed, and should be ignored if they try to connect. That would also help in configuring the slaves file for a large cluster - I'd list the full range of machines in the cluster, then list the ones that are down in the 'exclude' section

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 20:19:03 2006
Return-Path: 
 <hadoop-dev-return-3077-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85394 invoked from network); 11 Aug 2006 20:19:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 20:19:03 -0000
Received: (qmail 3424 invoked by uid 500); 11 Aug 2006 20:19:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3255 invoked by uid 500); 11 Aug 2006 20:19:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3246 invoked by uid 99); 11 Aug 2006 20:19:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:19:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:19:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C5F89714293
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 20:16:14 +0000 (GMT)
Message-ID: <32192489.1155327374808.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 13:16:14 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-433) Better access to the RecordReader
In-Reply-To: <31236916.1155072253970.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-433?page=comments#action_12427610 ] 
            
Benjamin Reed commented on HADOOP-433:
--------------------------------------

getSplit() would address my need. However, I can imagine in the future that we would like access to the RecordReader(), especially if we wanted to do sophisticated things like record skipping using indexed files or random sampling. The MapRunner interface makes these kind of interesting accesses easy to do if you had access to a RecordReader that happens to implement a more full featured interface.

A more generic Split interface would be nice as well :)

> Better access to the RecordReader
> ---------------------------------
>
>                 Key: HADOOP-433
>                 URL: http://issues.apache.org/jira/browse/HADOOP-433
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>            Priority: Minor
>
> The record reader has access to the FileSplit which can in turn have information that is useful to the Mapper. For example, Map processing may vary according to file name or attributes associated with a file. Unfortunately, even using a MapRunner you only have access to the progress wrapper of the RecordReader. To get access to the real record reader I had to use a thread local variable which I set in RecordReader.getNext(). It would be much nicer if you could get a reference to the real RecordReader from the RecordReader passed to MapRunner.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 20:21:03 2006
Return-Path: 
 <hadoop-dev-return-3078-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85953 invoked from network); 11 Aug 2006 20:21:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 20:21:03 -0000
Received: (qmail 6391 invoked by uid 500); 11 Aug 2006 20:21:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6218 invoked by uid 500); 11 Aug 2006 20:21:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6209 invoked by uid 99); 11 Aug 2006 20:21:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:21:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:21:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CEA0A714293
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 20:18:14 +0000 (GMT)
Message-ID: <3188209.1155327494843.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 13:18:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-448) DistributedFileSystem uses the wrong
 user.name to set the working directory.
In-Reply-To: <23646598.1155318497445.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-448?page=comments#action_12427611 ] 
            
Owen O'Malley commented on HADOOP-448:
--------------------------------------

No, this works fine.

Before the task is run, the TaskRunner does a setWorkingDirectory to the working directory of the job. I always use relative path names in my map/reduce jobs and it works fine, even when a different user runs the servers.

> DistributedFileSystem uses the wrong user.name to set the working directory.
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-448
>                 URL: http://issues.apache.org/jira/browse/HADOOP-448
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Benjamin Reed
>
> DistributedFileSystem initializes the working directory to be new Path("/user", System.getProperty("user.name")); rather than new Path("/user", conf.get("user.name")); the initialization would have to be moved to the constructor to access conf.
> If relative paths are used, the remote tasks and JobTracker will use the uid they are running with rather than the id of the user that submitted the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 20:23:05 2006
Return-Path: 
 <hadoop-dev-return-3079-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86165 invoked from network); 11 Aug 2006 20:23:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 20:23:05 -0000
Received: (qmail 7288 invoked by uid 500); 11 Aug 2006 20:23:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7258 invoked by uid 500); 11 Aug 2006 20:23:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7249 invoked by uid 99); 11 Aug 2006 20:23:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:23:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:23:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8FD4F7142D0
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 20:20:16 +0000 (GMT)
Message-ID: <22214301.1155327616586.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 13:20:16 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-435) Encapsulating startup scripts and jars
 in a single Jar file.
In-Reply-To: <23406804.1155134593912.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-435?page=all ]

Benjamin Reed updated HADOOP-435:
---------------------------------

    Attachment: start.sh

This script starts up a datanode and tasktracker. If the config indicates that the node is the jobtracker, it also starts the jobtracker and namenode.

> Encapsulating startup scripts and jars in a single Jar file.
> ------------------------------------------------------------
>
>                 Key: HADOOP-435
>                 URL: http://issues.apache.org/jira/browse/HADOOP-435
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>         Attachments: hadoopit.patch, start.sh, stop.sh
>
>
> Currently, hadoop is a set of scripts, configurations, and jar files. It makes it a pain to install on compute and datanodes. It also makes it a pain to setup clients so that they can use hadoop. Everytime things are updated the pain begins again.
> I suggest that we should be able to build a single Jar file that has a Main-Class defined with the configuration built in so that we can distribute that one file to nodes and clients on updates. One nice thing that I haven't done would be to make the jarfile downloadable from the JobTracker webpage so that clients can easily submit the jobs.
> I currently use such a setup on my small cluster. To start the job tracker I used "java -jar hadoop.jar -l /tmp/log jobtracker" to submit a job I use "java -jar hadoop.jar jar wordcount.jar". I used the client on my linux and Mac OSX machines and I'll I need installed in java and the hadoop.jar file.
> hadoop.jar helps with logfiles and configurations. The default of pulling the config files from the jar file can be overridden by specifying a config directory so that you can easily have machine specific configs and still have the same hadoop.jar on all machines.
> Here are the available commands from hadoop.jar:
> USAGE: hadoop [-l logdir] command
>   User commands:
>     dfs          run a DFS admin client
>     jar          run a JAR file
>     job          manipulate MapReduce jobs
>     fsck         run a DFS filesystem check utility
>   Runtime startup commands:
>     datanode     run a DFS datanode
>     jobtracker   run the MapReduce job Tracker node
>     namenode     run the DFS namenode (namenode -format formats the FS)
>     tasktracker  run a MapReduce task Tracker node
>   HadoopLoader commands:
>     buildJar     builds the HadoopLoader jar file
>     conf         dump hadoop configuration
> Note, I don't have the classes for hadoop streaming built into this Jar file, but if I had that would also be an option (it checks for needed classes before displaying an option). It makes it very easy for users that just write scripts to use hadoop straight from their machines.
> I'm also attaching the start.sh and stop.sh scripts that I use. These are the only scripts I use to startup the daemons. They are very simple and the start.sh script uses the config file to figure out whether or not to start the jobtracker and the nameserver.
> The attached patch adds the HadoopIt patch, modifies the Configuration class to find the config files correctly, and modifies the build to make a fully contained hadoop.jar. To update the configuration in a hadoop.jar you simply use "zip hadoop.jar hadoop-site.xml".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 20:23:06 2006
Return-Path: 
 <hadoop-dev-return-3080-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86192 invoked from network); 11 Aug 2006 20:23:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 20:23:06 -0000
Received: (qmail 7477 invoked by uid 500); 11 Aug 2006 20:23:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7461 invoked by uid 500); 11 Aug 2006 20:23:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7452 invoked by uid 99); 11 Aug 2006 20:23:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:23:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:23:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 945F67142D3
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 20:20:17 +0000 (GMT)
Message-ID: <5014949.1155327617604.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 13:20:17 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-435) Encapsulating startup scripts and jars
 in a single Jar file.
In-Reply-To: <23406804.1155134593912.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-435?page=all ]

Benjamin Reed updated HADOOP-435:
---------------------------------

    Attachment: stop.sh

Stops everything running against a jar file.

> Encapsulating startup scripts and jars in a single Jar file.
> ------------------------------------------------------------
>
>                 Key: HADOOP-435
>                 URL: http://issues.apache.org/jira/browse/HADOOP-435
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>         Attachments: hadoopit.patch, start.sh, stop.sh
>
>
> Currently, hadoop is a set of scripts, configurations, and jar files. It makes it a pain to install on compute and datanodes. It also makes it a pain to setup clients so that they can use hadoop. Everytime things are updated the pain begins again.
> I suggest that we should be able to build a single Jar file that has a Main-Class defined with the configuration built in so that we can distribute that one file to nodes and clients on updates. One nice thing that I haven't done would be to make the jarfile downloadable from the JobTracker webpage so that clients can easily submit the jobs.
> I currently use such a setup on my small cluster. To start the job tracker I used "java -jar hadoop.jar -l /tmp/log jobtracker" to submit a job I use "java -jar hadoop.jar jar wordcount.jar". I used the client on my linux and Mac OSX machines and I'll I need installed in java and the hadoop.jar file.
> hadoop.jar helps with logfiles and configurations. The default of pulling the config files from the jar file can be overridden by specifying a config directory so that you can easily have machine specific configs and still have the same hadoop.jar on all machines.
> Here are the available commands from hadoop.jar:
> USAGE: hadoop [-l logdir] command
>   User commands:
>     dfs          run a DFS admin client
>     jar          run a JAR file
>     job          manipulate MapReduce jobs
>     fsck         run a DFS filesystem check utility
>   Runtime startup commands:
>     datanode     run a DFS datanode
>     jobtracker   run the MapReduce job Tracker node
>     namenode     run the DFS namenode (namenode -format formats the FS)
>     tasktracker  run a MapReduce task Tracker node
>   HadoopLoader commands:
>     buildJar     builds the HadoopLoader jar file
>     conf         dump hadoop configuration
> Note, I don't have the classes for hadoop streaming built into this Jar file, but if I had that would also be an option (it checks for needed classes before displaying an option). It makes it very easy for users that just write scripts to use hadoop straight from their machines.
> I'm also attaching the start.sh and stop.sh scripts that I use. These are the only scripts I use to startup the daemons. They are very simple and the start.sh script uses the config file to figure out whether or not to start the jobtracker and the nameserver.
> The attached patch adds the HadoopIt patch, modifies the Configuration class to find the config files correctly, and modifies the build to make a fully contained hadoop.jar. To update the configuration in a hadoop.jar you simply use "zip hadoop.jar hadoop-site.xml".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 20:25:03 2006
Return-Path: 
 <hadoop-dev-return-3081-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86510 invoked from network); 11 Aug 2006 20:25:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 20:25:03 -0000
Received: (qmail 8934 invoked by uid 500); 11 Aug 2006 20:25:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8760 invoked by uid 500); 11 Aug 2006 20:25:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8751 invoked by uid 99); 11 Aug 2006 20:25:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:25:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:25:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 19E0B71428E
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 20:22:15 +0000 (GMT)
Message-ID: <23496665.1155327735103.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 13:22:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-445) Parallel data/socket writing for
 DFSOutputStream
In-Reply-To: <33376677.1155243255066.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-445?page=comments#action_12427616 ] 
            
Doug Cutting commented on HADOOP-445:
-------------------------------------

It used to work the way you propose.

http://svn.apache.org/viewvc?view=rev&revision=390262

As I recall, the TestFileSystem benchmark was much more reliable after this patch.

You say that this improves serial write performance, but how does it affect overall MapReduce job performance on a large cluster?

> Parallel data/socket writing for DFSOutputStream
> ------------------------------------------------
>
>                 Key: HADOOP-445
>                 URL: http://issues.apache.org/jira/browse/HADOOP-445
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>         Attachments: fastClientWrite.patch
>
>
> Currently, as DFS clients output blocks they write the entire block to disk before starting to transmit to the datanode. By writing to disk the client is able to retry a block write if the datanode files in the middle of a block transfer. Writing to disk and then to the datanode adds latency. Hopefully, the common case is that block transfers to datanodes are successful. This patch writes to the datanode and the disk in parallel. If the write to the datanode fails, it falls back to current behavior.
> In my tests of transmits of 237M and 946M datasets using -copyFromLocal I'm seeing a 20-25% improvement in throughput.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 20:32:03 2006
Return-Path: 
 <hadoop-dev-return-3082-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87447 invoked from network); 11 Aug 2006 20:32:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 20:32:03 -0000
Received: (qmail 13203 invoked by uid 500); 11 Aug 2006 20:32:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13174 invoked by uid 500); 11 Aug 2006 20:32:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13165 invoked by uid 99); 11 Aug 2006 20:32:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:32:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:32:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3FEB1714293
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 20:29:14 +0000 (GMT)
Message-ID: <29045589.1155328154258.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 13:29:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-450) Remove the need for users to specify
 the types of the inputs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Remove the need for users to specify the types of the inputs
------------------------------------------------------------

                 Key: HADOOP-450
                 URL: http://issues.apache.org/jira/browse/HADOOP-450
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.5.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.6.0


Currently, the application specifies the types of the input keys and values and the RecordReader checks them for consistency. It would make more sense to have the RecordReader define the types of keys that it will produce. Therefore, I propose that we add two new methods to RecordReader:

WritableComparable createKey();
Writable createValue();

Note that I propose adding them to the RecordReader rather than the InputFormat, so that they can specific to a particular input split.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 20:34:03 2006
Return-Path: 
 <hadoop-dev-return-3083-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87805 invoked from network); 11 Aug 2006 20:34:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 20:34:03 -0000
Received: (qmail 14641 invoked by uid 500); 11 Aug 2006 20:34:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14619 invoked by uid 500); 11 Aug 2006 20:34:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14610 invoked by uid 99); 11 Aug 2006 20:34:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:34:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:34:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C58AC71428E
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 20:31:14 +0000 (GMT)
Message-ID: <27741524.1155328274806.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 13:31:14 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-435) Encapsulating startup scripts and
 jars in a single Jar file.
In-Reply-To: <23406804.1155134593912.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-435?page=comments#action_12427618 ] 
            
Benjamin Reed commented on HADOOP-435:
--------------------------------------

I've attached the scripts. They are quite convenient to use. To start the cluster I simply do "for i in `cat machines'; do ssh $i:hadoop/start.sh hadoop/hadoop.jar; done". I stop everything using "for i in `cat machines'; do ssh $i:hadoop/stop.sh hadoop/hadoop.jar; done"

The start script currently assumes that the jobtracker and namenode run on the same machine. The namenode should only be started if the machine is the namenode as indicated by the configuration just like jobtracker. There should also be a flag to indicate whether a datanode and tasktracker should be started if the host is a jobtracker or namenode. Despite the limitation, hopefully you get the point :)

The nice thing about using a conf dir is that you don't have to worry about complicated classpaths. I don't usually use it since I generally just use the config in the jar file, but there are cases where it is convenient. Fortunately, the code is structured such that the special case code is in a single method.

I'm not familiar enough with Tool and ToolBase to know how well it fits. From the brief look I took it seemed to address a more specific kind of application. (I wouldn't feel bad if someone made it use Tool and ToolBase :)

> Encapsulating startup scripts and jars in a single Jar file.
> ------------------------------------------------------------
>
>                 Key: HADOOP-435
>                 URL: http://issues.apache.org/jira/browse/HADOOP-435
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>         Attachments: hadoopit.patch, start.sh, stop.sh
>
>
> Currently, hadoop is a set of scripts, configurations, and jar files. It makes it a pain to install on compute and datanodes. It also makes it a pain to setup clients so that they can use hadoop. Everytime things are updated the pain begins again.
> I suggest that we should be able to build a single Jar file that has a Main-Class defined with the configuration built in so that we can distribute that one file to nodes and clients on updates. One nice thing that I haven't done would be to make the jarfile downloadable from the JobTracker webpage so that clients can easily submit the jobs.
> I currently use such a setup on my small cluster. To start the job tracker I used "java -jar hadoop.jar -l /tmp/log jobtracker" to submit a job I use "java -jar hadoop.jar jar wordcount.jar". I used the client on my linux and Mac OSX machines and I'll I need installed in java and the hadoop.jar file.
> hadoop.jar helps with logfiles and configurations. The default of pulling the config files from the jar file can be overridden by specifying a config directory so that you can easily have machine specific configs and still have the same hadoop.jar on all machines.
> Here are the available commands from hadoop.jar:
> USAGE: hadoop [-l logdir] command
>   User commands:
>     dfs          run a DFS admin client
>     jar          run a JAR file
>     job          manipulate MapReduce jobs
>     fsck         run a DFS filesystem check utility
>   Runtime startup commands:
>     datanode     run a DFS datanode
>     jobtracker   run the MapReduce job Tracker node
>     namenode     run the DFS namenode (namenode -format formats the FS)
>     tasktracker  run a MapReduce task Tracker node
>   HadoopLoader commands:
>     buildJar     builds the HadoopLoader jar file
>     conf         dump hadoop configuration
> Note, I don't have the classes for hadoop streaming built into this Jar file, but if I had that would also be an option (it checks for needed classes before displaying an option). It makes it very easy for users that just write scripts to use hadoop straight from their machines.
> I'm also attaching the start.sh and stop.sh scripts that I use. These are the only scripts I use to startup the daemons. They are very simple and the start.sh script uses the config file to figure out whether or not to start the jobtracker and the nameserver.
> The attached patch adds the HadoopIt patch, modifies the Configuration class to find the config files correctly, and modifies the build to make a fully contained hadoop.jar. To update the configuration in a hadoop.jar you simply use "zip hadoop.jar hadoop-site.xml".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 20:36:03 2006
Return-Path: 
 <hadoop-dev-return-3084-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88214 invoked from network); 11 Aug 2006 20:36:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 20:36:03 -0000
Received: (qmail 17866 invoked by uid 500); 11 Aug 2006 20:36:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17847 invoked by uid 500); 11 Aug 2006 20:36:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17838 invoked by uid 99); 11 Aug 2006 20:36:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:36:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:36:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C4BEE71428E
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 20:33:14 +0000 (GMT)
Message-ID: <24362931.1155328394803.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 13:33:14 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-448) DistributedFileSystem uses the wrong
 user.name to set the working directory.
In-Reply-To: <23646598.1155318497445.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-448?page=comments#action_12427619 ] 
            
Benjamin Reed commented on HADOOP-448:
--------------------------------------

Okay, I guess the problem is that JobTracker does not call setWorkingDirectory() before invoking the InputFormat. (That is where I hit this problem.) If we did the initialization properly in DistributedFileSystem, we wouldn't have to worry about calling setWorkingDirectory()

> DistributedFileSystem uses the wrong user.name to set the working directory.
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-448
>                 URL: http://issues.apache.org/jira/browse/HADOOP-448
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Benjamin Reed
>
> DistributedFileSystem initializes the working directory to be new Path("/user", System.getProperty("user.name")); rather than new Path("/user", conf.get("user.name")); the initialization would have to be moved to the constructor to access conf.
> If relative paths are used, the remote tasks and JobTracker will use the uid they are running with rather than the id of the user that submitted the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 20:40:06 2006
Return-Path: 
 <hadoop-dev-return-3085-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92413 invoked from network); 11 Aug 2006 20:40:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 20:40:06 -0000
Received: (qmail 21387 invoked by uid 500); 11 Aug 2006 20:40:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21216 invoked by uid 500); 11 Aug 2006 20:40:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21207 invoked by uid 99); 11 Aug 2006 20:40:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:40:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:40:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B27C0714293
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 20:37:15 +0000 (GMT)
Message-ID: <14716263.1155328635728.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 13:37:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-435) Encapsulating startup scripts and
 jars in a single Jar file.
In-Reply-To: <23406804.1155134593912.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-435?page=comments#action_12427620 ] 
            
Doug Cutting commented on HADOOP-435:
-------------------------------------

Are you proposing that these should replace hadoop-daemon.sh?  Your start/stop scripts lack many features of hadoop-daemon.sh, like using a pid file to keep from starting multiple daemons of the same type on a host, optionally rsyncing code from a master, specifying jvm options, etc.

> Encapsulating startup scripts and jars in a single Jar file.
> ------------------------------------------------------------
>
>                 Key: HADOOP-435
>                 URL: http://issues.apache.org/jira/browse/HADOOP-435
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>         Attachments: hadoopit.patch, start.sh, stop.sh
>
>
> Currently, hadoop is a set of scripts, configurations, and jar files. It makes it a pain to install on compute and datanodes. It also makes it a pain to setup clients so that they can use hadoop. Everytime things are updated the pain begins again.
> I suggest that we should be able to build a single Jar file that has a Main-Class defined with the configuration built in so that we can distribute that one file to nodes and clients on updates. One nice thing that I haven't done would be to make the jarfile downloadable from the JobTracker webpage so that clients can easily submit the jobs.
> I currently use such a setup on my small cluster. To start the job tracker I used "java -jar hadoop.jar -l /tmp/log jobtracker" to submit a job I use "java -jar hadoop.jar jar wordcount.jar". I used the client on my linux and Mac OSX machines and I'll I need installed in java and the hadoop.jar file.
> hadoop.jar helps with logfiles and configurations. The default of pulling the config files from the jar file can be overridden by specifying a config directory so that you can easily have machine specific configs and still have the same hadoop.jar on all machines.
> Here are the available commands from hadoop.jar:
> USAGE: hadoop [-l logdir] command
>   User commands:
>     dfs          run a DFS admin client
>     jar          run a JAR file
>     job          manipulate MapReduce jobs
>     fsck         run a DFS filesystem check utility
>   Runtime startup commands:
>     datanode     run a DFS datanode
>     jobtracker   run the MapReduce job Tracker node
>     namenode     run the DFS namenode (namenode -format formats the FS)
>     tasktracker  run a MapReduce task Tracker node
>   HadoopLoader commands:
>     buildJar     builds the HadoopLoader jar file
>     conf         dump hadoop configuration
> Note, I don't have the classes for hadoop streaming built into this Jar file, but if I had that would also be an option (it checks for needed classes before displaying an option). It makes it very easy for users that just write scripts to use hadoop straight from their machines.
> I'm also attaching the start.sh and stop.sh scripts that I use. These are the only scripts I use to startup the daemons. They are very simple and the start.sh script uses the config file to figure out whether or not to start the jobtracker and the nameserver.
> The attached patch adds the HadoopIt patch, modifies the Configuration class to find the config files correctly, and modifies the build to make a fully contained hadoop.jar. To update the configuration in a hadoop.jar you simply use "zip hadoop.jar hadoop-site.xml".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 20:43:11 2006
Return-Path: 
 <hadoop-dev-return-3086-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93098 invoked from network); 11 Aug 2006 20:43:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 20:43:11 -0000
Received: (qmail 24723 invoked by uid 500); 11 Aug 2006 20:43:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24703 invoked by uid 500); 11 Aug 2006 20:43:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24694 invoked by uid 99); 11 Aug 2006 20:43:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:43:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:43:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C8D76714293
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 20:40:14 +0000 (GMT)
Message-ID: <24129187.1155328814820.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 13:40:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-435) Encapsulating startup scripts and
 jars in a single Jar file.
In-Reply-To: <23406804.1155134593912.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-435?page=comments#action_12427621 ] 
            
Doug Cutting commented on HADOOP-435:
-------------------------------------

> To start the cluster I simply do "for i in `cat machines'; do ssh $i:hadoop/start.sh [ ...]

Why is this better than the bin/slaves.sh script?


> Encapsulating startup scripts and jars in a single Jar file.
> ------------------------------------------------------------
>
>                 Key: HADOOP-435
>                 URL: http://issues.apache.org/jira/browse/HADOOP-435
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>         Attachments: hadoopit.patch, start.sh, stop.sh
>
>
> Currently, hadoop is a set of scripts, configurations, and jar files. It makes it a pain to install on compute and datanodes. It also makes it a pain to setup clients so that they can use hadoop. Everytime things are updated the pain begins again.
> I suggest that we should be able to build a single Jar file that has a Main-Class defined with the configuration built in so that we can distribute that one file to nodes and clients on updates. One nice thing that I haven't done would be to make the jarfile downloadable from the JobTracker webpage so that clients can easily submit the jobs.
> I currently use such a setup on my small cluster. To start the job tracker I used "java -jar hadoop.jar -l /tmp/log jobtracker" to submit a job I use "java -jar hadoop.jar jar wordcount.jar". I used the client on my linux and Mac OSX machines and I'll I need installed in java and the hadoop.jar file.
> hadoop.jar helps with logfiles and configurations. The default of pulling the config files from the jar file can be overridden by specifying a config directory so that you can easily have machine specific configs and still have the same hadoop.jar on all machines.
> Here are the available commands from hadoop.jar:
> USAGE: hadoop [-l logdir] command
>   User commands:
>     dfs          run a DFS admin client
>     jar          run a JAR file
>     job          manipulate MapReduce jobs
>     fsck         run a DFS filesystem check utility
>   Runtime startup commands:
>     datanode     run a DFS datanode
>     jobtracker   run the MapReduce job Tracker node
>     namenode     run the DFS namenode (namenode -format formats the FS)
>     tasktracker  run a MapReduce task Tracker node
>   HadoopLoader commands:
>     buildJar     builds the HadoopLoader jar file
>     conf         dump hadoop configuration
> Note, I don't have the classes for hadoop streaming built into this Jar file, but if I had that would also be an option (it checks for needed classes before displaying an option). It makes it very easy for users that just write scripts to use hadoop straight from their machines.
> I'm also attaching the start.sh and stop.sh scripts that I use. These are the only scripts I use to startup the daemons. They are very simple and the start.sh script uses the config file to figure out whether or not to start the jobtracker and the nameserver.
> The attached patch adds the HadoopIt patch, modifies the Configuration class to find the config files correctly, and modifies the build to make a fully contained hadoop.jar. To update the configuration in a hadoop.jar you simply use "zip hadoop.jar hadoop-site.xml".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 21:13:03 2006
Return-Path: 
 <hadoop-dev-return-3087-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99892 invoked from network); 11 Aug 2006 21:13:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 21:13:03 -0000
Received: (qmail 68239 invoked by uid 500); 11 Aug 2006 21:13:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68215 invoked by uid 500); 11 Aug 2006 21:13:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68206 invoked by uid 99); 11 Aug 2006 21:13:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 14:13:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 14:13:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DB9C2714293
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 21:10:13 +0000 (GMT)
Message-ID: <24919314.1155330613896.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 14:10:13 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-451) Add a Split interface
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Add a Split interface
---------------------

                 Key: HADOOP-451
                 URL: http://issues.apache.org/jira/browse/HADOOP-451
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: Doug Cutting
             Fix For: 0.6.0


The InputFormat interface has a method:

FileSplit[] getSplits();

This should change to:

Split[] getSplits();

The Split interface would look like:

public interface Split extends Writable {

  /** Returns a list of hosts that contain this split.
       This is only used to optimize task placement, so this may be empty. */
  String[] getLocations(FileSystem fs);

  /** The relative, estimated cost of operating on this.  Typically the size of the data in the split.
       Used to prioritize tasks in a job (high-cost tasks are run first).  */
   long getCost();
}

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 21:37:06 2006
Return-Path: 
 <hadoop-dev-return-3088-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4929 invoked from network); 11 Aug 2006 21:37:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 21:37:06 -0000
Received: (qmail 96844 invoked by uid 500); 11 Aug 2006 21:37:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96670 invoked by uid 500); 11 Aug 2006 21:37:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96661 invoked by uid 99); 11 Aug 2006 21:37:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 14:37:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 14:37:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CF8BC71429B
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 21:34:15 +0000 (GMT)
Message-ID: <26208734.1155332055847.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 14:34:15 -0700 (PDT)
From: "Marco Nicosia (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-442) slaves file should include an
 'exclude' section, to prevent "bad" datanodes and tasktrackers from
 disrupting  a cluster
In-Reply-To: <650567.1155195793928.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-442?page=comments#action_12427632 ] 
            
Marco Nicosia commented on HADOOP-442:
--------------------------------------

Would it be better to choose either one or the other to be authoritative for all operations?

1] The namenode/jobtrackers maintain the slaves file. Membership and other administrative functions are made via API calls to the process, which modifies a file on disk. That file is used, but never modified, by slaves.sh, etc. If the file is still text, it can be modified between process restarts.

2] The namenode/jobtrackers observe and respect the contents of a file on disk. Standard tools can modify it, but the processes would have to poll the file to see if it has been changed.

I personally prefer #1, tho I'd hope that any API is open (XML-RPC, REST, SOAP...) instead of RMI so that any set of sysadmin automation can talk to it.


> slaves file should include an 'exclude' section, to prevent "bad" datanodes and tasktrackers from disrupting  a cluster
> -----------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-442
>                 URL: http://issues.apache.org/jira/browse/HADOOP-442
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Yoram Arnon
>
> I recently had a few nodes go bad, such that they were inaccessible to ssh, but were still running their java processes.
> tasks that executed on them were failing, causing jobs to fail.
> I couldn't stop the java processes, because of the ssh issue, so I was helpless until I could actually power down these nodes.
> restarting the cluster doesn't help, even when removing the bad nodes from the slaves file - they just reconnect and are accepted.
> while we plan to avoid tasks from launching on the same nodes over and over, what I'd like is to be able to prevent rogue processes from connecting to the masters.
> Ideally, the slaves file will contain an 'exclude' section, which will list nodes that shouldn't be accessed, and should be ignored if they try to connect. That would also help in configuring the slaves file for a large cluster - I'd list the full range of machines in the cluster, then list the ones that are down in the 'exclude' section

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 21:59:03 2006
Return-Path: 
 <hadoop-dev-return-3089-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8468 invoked from network); 11 Aug 2006 21:59:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 21:59:03 -0000
Received: (qmail 16194 invoked by uid 500); 11 Aug 2006 21:59:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16169 invoked by uid 500); 11 Aug 2006 21:59:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16160 invoked by uid 99); 11 Aug 2006 21:59:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 14:59:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 14:59:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C487B71428E
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 21:56:14 +0000 (GMT)
Message-ID: <23565620.1155333374802.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 14:56:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-306?page=all ]

Konstantin Shvachko updated HADOOP-306:
---------------------------------------

    Attachment: FSImageSaveDNInfo.patch

This patch implements a part of the laid out design.
It stores the historical list of datanodes in the image file and logs newly
registered nodes in the edits file.
The changes are mostly related to the FSNamesystem class.
Since datanodes are not removed from the datanodeMap when they are considered
non responsive, the deadDatanodeMap field becomes redundant. I removed it.
There is a change in semantics of the relation between heartbeats and datanodeMap maps.
heartbeats contains only live nodes while datanodeMap contains both alive and dead nodes.
See JavaDoc for more details.
So when we are looking for new targets for block replication we should check the heartbeats
map rather than the datanodeMap as we did before.
Also since the DatanodeDescriptors are not physically removed from datanodeMap
I had to add their blocks cleanup while processing lost heartbeats.
Some changes to the FSImage and FSEditLog classes. I removed unnecessary
parameter to FSDirectory from the previous version. The whole name space can be
accessed via static method FSNamesystem.getFSNamesystem()



> Safe mode and name node startup procedures
> ------------------------------------------
>
>                 Key: HADOOP-306
>                 URL: http://issues.apache.org/jira/browse/HADOOP-306
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>         Attachments: FSImageSaveDNInfo.patch
>
>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 22:24:06 2006
Return-Path: 
 <hadoop-dev-return-3090-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11862 invoked from network); 11 Aug 2006 22:24:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 22:24:06 -0000
Received: (qmail 36702 invoked by uid 500); 11 Aug 2006 22:24:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36533 invoked by uid 500); 11 Aug 2006 22:24:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36524 invoked by uid 99); 11 Aug 2006 22:24:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 15:24:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 15:24:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C3630714283
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 22:21:14 +0000 (GMT)
Message-ID: <6704303.1155334874797.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 15:21:14 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-435) Encapsulating startup scripts and
 jars in a single Jar file.
In-Reply-To: <23406804.1155134593912.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-435?page=comments#action_12427636 ] 
            
Benjamin Reed commented on HADOOP-435:
--------------------------------------

I'm not suggesting that we use my scripts to replace the hadoop scripts, I'm just showing how things can be simplified in some cases. One of the daunting things to me (yes I'm simple minded) was getting hadoop setup and running on my little cluster. With the encapsulated jar file you can actually just copy the file into a shared directory and start everything up to at least try it. (It's also very nice to quickly test things.)

If you use the encapsulated jar file, the only thing you need to rsync is a single jar: hadoop.jar, so you simplify things.

The point of the scripts is to show that in some cases you may not need the web of scripts to manage hadoop. Especially for those just playing with hadoop or using some other process management system such as Condor. The encapsulated jar file allows for a convenient way to deploy a cluster: you plunk down the jar file and run it.

In the current distribution the only thing that would change would be the hadoop script, which would basically become a single line.

> Encapsulating startup scripts and jars in a single Jar file.
> ------------------------------------------------------------
>
>                 Key: HADOOP-435
>                 URL: http://issues.apache.org/jira/browse/HADOOP-435
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>         Attachments: hadoopit.patch, start.sh, stop.sh
>
>
> Currently, hadoop is a set of scripts, configurations, and jar files. It makes it a pain to install on compute and datanodes. It also makes it a pain to setup clients so that they can use hadoop. Everytime things are updated the pain begins again.
> I suggest that we should be able to build a single Jar file that has a Main-Class defined with the configuration built in so that we can distribute that one file to nodes and clients on updates. One nice thing that I haven't done would be to make the jarfile downloadable from the JobTracker webpage so that clients can easily submit the jobs.
> I currently use such a setup on my small cluster. To start the job tracker I used "java -jar hadoop.jar -l /tmp/log jobtracker" to submit a job I use "java -jar hadoop.jar jar wordcount.jar". I used the client on my linux and Mac OSX machines and I'll I need installed in java and the hadoop.jar file.
> hadoop.jar helps with logfiles and configurations. The default of pulling the config files from the jar file can be overridden by specifying a config directory so that you can easily have machine specific configs and still have the same hadoop.jar on all machines.
> Here are the available commands from hadoop.jar:
> USAGE: hadoop [-l logdir] command
>   User commands:
>     dfs          run a DFS admin client
>     jar          run a JAR file
>     job          manipulate MapReduce jobs
>     fsck         run a DFS filesystem check utility
>   Runtime startup commands:
>     datanode     run a DFS datanode
>     jobtracker   run the MapReduce job Tracker node
>     namenode     run the DFS namenode (namenode -format formats the FS)
>     tasktracker  run a MapReduce task Tracker node
>   HadoopLoader commands:
>     buildJar     builds the HadoopLoader jar file
>     conf         dump hadoop configuration
> Note, I don't have the classes for hadoop streaming built into this Jar file, but if I had that would also be an option (it checks for needed classes before displaying an option). It makes it very easy for users that just write scripts to use hadoop straight from their machines.
> I'm also attaching the start.sh and stop.sh scripts that I use. These are the only scripts I use to startup the daemons. They are very simple and the start.sh script uses the config file to figure out whether or not to start the jobtracker and the nameserver.
> The attached patch adds the HadoopIt patch, modifies the Configuration class to find the config files correctly, and modifies the build to make a fully contained hadoop.jar. To update the configuration in a hadoop.jar you simply use "zip hadoop.jar hadoop-site.xml".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 22:34:04 2006
Return-Path: 
 <hadoop-dev-return-3091-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13389 invoked from network); 11 Aug 2006 22:34:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 22:34:04 -0000
Received: (qmail 48806 invoked by uid 500); 11 Aug 2006 22:34:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48782 invoked by uid 500); 11 Aug 2006 22:34:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48773 invoked by uid 99); 11 Aug 2006 22:34:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 15:34:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 15:34:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5180F71428E
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 22:31:15 +0000 (GMT)
Message-ID: <6972927.1155335475331.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 15:31:15 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-445) Parallel data/socket writing for
 DFSOutputStream
In-Reply-To: <33376677.1155243255066.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-445?page=comments#action_12427639 ] 
            
Benjamin Reed commented on HADOOP-445:
--------------------------------------

You are right. It is the same. What was the performance difference you saw after the patch?

There actually is a problem with head contention in the common case that happens with my patch. When a client is writing to a datanode running on the same machine, depending on the configuration, the backup file and the datanode could be contending for the disk head. In reality, if the client is talking to a local datanode, something we try to make happen, we should not write to the backup file, which should also give us another performance boost.

> Parallel data/socket writing for DFSOutputStream
> ------------------------------------------------
>
>                 Key: HADOOP-445
>                 URL: http://issues.apache.org/jira/browse/HADOOP-445
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>         Attachments: fastClientWrite.patch
>
>
> Currently, as DFS clients output blocks they write the entire block to disk before starting to transmit to the datanode. By writing to disk the client is able to retry a block write if the datanode files in the middle of a block transfer. Writing to disk and then to the datanode adds latency. Hopefully, the common case is that block transfers to datanodes are successful. This patch writes to the datanode and the disk in parallel. If the write to the datanode fails, it falls back to current behavior.
> In my tests of transmits of 237M and 946M datasets using -copyFromLocal I'm seeing a 20-25% improvement in throughput.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 23:36:04 2006
Return-Path: 
 <hadoop-dev-return-3092-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28846 invoked from network); 11 Aug 2006 23:36:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 23:36:04 -0000
Received: (qmail 24745 invoked by uid 500); 11 Aug 2006 23:36:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24719 invoked by uid 500); 11 Aug 2006 23:36:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24710 invoked by uid 99); 11 Aug 2006 23:36:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 16:36:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 16:36:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0271471428E
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 23:33:15 +0000 (GMT)
Message-ID: <11404075.1155339195007.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 16:33:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-450) Remove the need for users to specify
 the types of the inputs
In-Reply-To: <29045589.1155328154258.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-450?page=all ]

Owen O'Malley updated HADOOP-450:
---------------------------------

    Status: Patch Available  (was: Open)

This patch does:
  1. depriciates the JobConf methods for get/set key/value type
  2. adds createKey/Value to the RecordReader
  3. changes TextInputFormat to use Text rather than UTF8
  4. cleans up the uses with examples, lib, and streaming.

> Remove the need for users to specify the types of the inputs
> ------------------------------------------------------------
>
>                 Key: HADOOP-450
>                 URL: http://issues.apache.org/jira/browse/HADOOP-450
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>
> Currently, the application specifies the types of the input keys and values and the RecordReader checks them for consistency. It would make more sense to have the RecordReader define the types of keys that it will produce. Therefore, I propose that we add two new methods to RecordReader:
> WritableComparable createKey();
> Writable createValue();
> Note that I propose adding them to the RecordReader rather than the InputFormat, so that they can specific to a particular input split.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 11 23:38:03 2006
Return-Path: 
 <hadoop-dev-return-3093-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29280 invoked from network); 11 Aug 2006 23:38:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 23:38:03 -0000
Received: (qmail 26453 invoked by uid 500); 11 Aug 2006 23:38:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26432 invoked by uid 500); 11 Aug 2006 23:38:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26423 invoked by uid 99); 11 Aug 2006 23:38:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 16:38:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 16:38:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C7A5071428E
	for <hadoop-dev@lucene.apache.org>; Fri, 11 Aug 2006 23:35:14 +0000 (GMT)
Message-ID: <14383562.1155339314815.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 16:35:14 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-451) Add a Split interface
In-Reply-To: <24919314.1155330613896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-451?page=comments#action_12427652 ] 
            
Bryan Pendleton commented on HADOOP-451:
----------------------------------------

You will probably need to add a "setSplitClass" and "getSplitClass" to JobConf to go along with this. Splits need to be Writables, but there's no automatic polymorphism/factory for Writables yet.

> Add a Split interface
> ---------------------
>
>                 Key: HADOOP-451
>                 URL: http://issues.apache.org/jira/browse/HADOOP-451
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Doug Cutting
>             Fix For: 0.6.0
>
>
> The InputFormat interface has a method:
> FileSplit[] getSplits();
> This should change to:
> Split[] getSplits();
> The Split interface would look like:
> public interface Split extends Writable {
>   /** Returns a list of hosts that contain this split.
>        This is only used to optimize task placement, so this may be empty. */
>   String[] getLocations(FileSystem fs);
>   /** The relative, estimated cost of operating on this.  Typically the size of the data in the split.
>        Used to prioritize tasks in a job (high-cost tasks are run first).  */
>    long getCost();
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug 12 00:04:04 2006
Return-Path: 
 <hadoop-dev-return-3094-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34434 invoked from network); 12 Aug 2006 00:04:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2006 00:04:04 -0000
Received: (qmail 44767 invoked by uid 500); 12 Aug 2006 00:04:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44736 invoked by uid 500); 12 Aug 2006 00:04:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44670 invoked by uid 99); 12 Aug 2006 00:04:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 17:04:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 17:04:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 009B07142D0
	for <hadoop-dev@lucene.apache.org>; Sat, 12 Aug 2006 00:01:15 +0000 (GMT)
Message-ID: <3590162.1155340874999.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 17:01:14 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-452) Adding caching to Hadoop which is
 independent of the task trackers.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Adding caching to Hadoop which is independent of the task trackers.
-------------------------------------------------------------------

                 Key: HADOOP-452
                 URL: http://issues.apache.org/jira/browse/HADOOP-452
             Project: Hadoop
          Issue Type: New Feature
            Reporter: Mahadev konar
            Priority: Minor


It would be nice to have a feature in Hadoop that could cache files locally that is independent of TaskTrackers and JobTrackers. Hadoop-288 caching is dependent on the tasktrackers. In an environment where you would dynamically bring up and down the TaskTrackers for resource sharing, that is problematic. It would be good to have this feature wherein you can install tasktrackers/jobtrackers on these machines using this caching mechanism. The caching feature could use something like Bittorent /http/rsync to copy the main hadoop.jar.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug 12 06:48:05 2006
Return-Path: 
 <hadoop-dev-return-3095-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8220 invoked from network); 12 Aug 2006 06:48:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2006 06:48:05 -0000
Received: (qmail 74299 invoked by uid 500); 12 Aug 2006 06:48:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74275 invoked by uid 500); 12 Aug 2006 06:48:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74266 invoked by uid 99); 12 Aug 2006 06:48:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 23:48:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 23:48:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E919041000B
	for <hadoop-dev@lucene.apache.org>; Sat, 12 Aug 2006 06:45:15 +0000 (GMT)
Message-ID: <31583049.1155365115952.JavaMail.jira@brutus>
Date: Fri, 11 Aug 2006 23:45:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-181) task trackers should not restart for
 having a late heartbeat
In-Reply-To: <701484.1146509206378.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-181?page=comments#action_12427680 ] 
            
Owen O'Malley commented on HADOOP-181:
--------------------------------------

I agree that the original desire for this patch was born of the TaskTracker timeouts that shouldn't happen. Fixing those problems (and we _have_ fixed most of them over the last 4 months) should take precendence. However, that said, I think in the long term, we do want something like this patch. If a switch goes down for 15 minutes and then comes back up, it does not make sense to reshuffle, resort, and rerun a reduce that takes hours to run.

All map/reduce applications, even those with speculative execution turned off, must permit redundant copies of their tasks for precisely this reason. In this case, the JobTracker has decided a given task is dead, but hasn't been able to tell the responsible TaskTracker yet. Therefore it schedules another instance of the failed task on a different node. Therefore, they are going to run in parallel for a while.

I guess for now, let's sit on this patch and contemplate what the model should be for dealing with communication problems. We should also monitor this in real use and see how often task trackers are being lost and probably put some effort to determine at least whether it is the job tracker or the task tracker that is the cause of the delay.

> task trackers should not restart for having a late heartbeat
> ------------------------------------------------------------
>
>                 Key: HADOOP-181
>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.6.0
>
>         Attachments: lost-heartbeat.patch
>
>
> TaskTrackers should not close and restart themselves for having a late heartbeat. The JobTracker should just accept their current status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug 12 16:34:12 2006
Return-Path: 
 <hadoop-dev-return-3096-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33065 invoked from network); 12 Aug 2006 16:34:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2006 16:34:12 -0000
Received: (qmail 63283 invoked by uid 500); 12 Aug 2006 16:34:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63254 invoked by uid 500); 12 Aug 2006 16:34:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63245 invoked by uid 99); 12 Aug 2006 16:34:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 09:34:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 09:34:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E4F4C41000B
	for <hadoop-dev@lucene.apache.org>; Sat, 12 Aug 2006 16:31:13 +0000 (GMT)
Message-ID: <23106393.1155400273935.JavaMail.jira@brutus>
Date: Sat, 12 Aug 2006 09:31:13 -0700 (PDT)
From: "Sami Siren (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-453) bug in Text.setCapacity( int len )
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

bug in Text.setCapacity( int len )
----------------------------------

                 Key: HADOOP-453
                 URL: http://issues.apache.org/jira/browse/HADOOP-453
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.5.0
            Reporter: Sami Siren
            Priority: Minor
         Attachments: hadoop_Text_patch.txt

There seems to be a bug in o.a.h.i.Text class in methd setCapacity( int len ) attached patch demonstrates the issue with unit test and
fixes the problem.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug 12 16:34:13 2006
Return-Path: 
 <hadoop-dev-return-3097-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33097 invoked from network); 12 Aug 2006 16:34:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2006 16:34:13 -0000
Received: (qmail 63575 invoked by uid 500); 12 Aug 2006 16:34:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63445 invoked by uid 500); 12 Aug 2006 16:34:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63436 invoked by uid 99); 12 Aug 2006 16:34:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 09:34:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 09:34:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EABFA714204
	for <hadoop-dev@lucene.apache.org>; Sat, 12 Aug 2006 16:31:14 +0000 (GMT)
Message-ID: <2181183.1155400274959.JavaMail.jira@brutus>
Date: Sat, 12 Aug 2006 09:31:14 -0700 (PDT)
From: "Sami Siren (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-453) bug in Text.setCapacity( int len )
In-Reply-To: <23106393.1155400273935.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-453?page=all ]

Sami Siren updated HADOOP-453:
------------------------------

    Attachment: hadoop_Text_patch.txt

> bug in Text.setCapacity( int len )
> ----------------------------------
>
>                 Key: HADOOP-453
>                 URL: http://issues.apache.org/jira/browse/HADOOP-453
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Sami Siren
>            Priority: Minor
>         Attachments: hadoop_Text_patch.txt
>
>
> There seems to be a bug in o.a.h.i.Text class in methd setCapacity( int len ) attached patch demonstrates the issue with unit test and
> fixes the problem.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug 12 16:36:13 2006
Return-Path: 
 <hadoop-dev-return-3098-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33517 invoked from network); 12 Aug 2006 16:36:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2006 16:36:13 -0000
Received: (qmail 65794 invoked by uid 500); 12 Aug 2006 16:36:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65618 invoked by uid 500); 12 Aug 2006 16:36:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65609 invoked by uid 99); 12 Aug 2006 16:36:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 09:36:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 09:36:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C119E41000E
	for <hadoop-dev@lucene.apache.org>; Sat, 12 Aug 2006 16:33:14 +0000 (GMT)
Message-ID: <19754882.1155400394788.JavaMail.jira@brutus>
Date: Sat, 12 Aug 2006 09:33:14 -0700 (PDT)
From: "Sami Siren (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-453) bug in Text.setCapacity( int len )
In-Reply-To: <23106393.1155400273935.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-453?page=all ]

Sami Siren updated HADOOP-453:
------------------------------

    Status: Patch Available  (was: Open)

> bug in Text.setCapacity( int len )
> ----------------------------------
>
>                 Key: HADOOP-453
>                 URL: http://issues.apache.org/jira/browse/HADOOP-453
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Sami Siren
>            Priority: Minor
>         Attachments: hadoop_Text_patch.txt
>
>
> There seems to be a bug in o.a.h.i.Text class in methd setCapacity( int len ) attached patch demonstrates the issue with unit test and
> fixes the problem.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Aug 13 05:59:19 2006
Return-Path: 
 <hadoop-dev-return-3099-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5200 invoked from network); 13 Aug 2006 05:59:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Aug 2006 05:59:19 -0000
Received: (qmail 75906 invoked by uid 500); 13 Aug 2006 05:59:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75887 invoked by uid 500); 13 Aug 2006 05:59:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75878 invoked by uid 99); 13 Aug 2006 05:59:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 22:59:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 22:59:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D447641000B
	for <hadoop-dev@lucene.apache.org>; Sun, 13 Aug 2006 05:56:14 +0000 (GMT)
Message-ID: <10489936.1155448574866.JavaMail.jira@brutus>
Date: Sat, 12 Aug 2006 22:56:14 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-403) close method in a Mapper should be
 provided with OutputCollector and a Reporter
In-Reply-To: <14218394.1154383873895.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-403?page=comments#action_12427732 ] 
            
Runping Qi commented on HADOOP-403:
-----------------------------------


In my app, I added an OutputCollector variable (and a Reporter variable if necessary) in my Map/Reduce classes so that the close method can access them. Those variables are assigned only once my the first call to Map/Reduce method.

If the framework should offer help here, we can introduce to Closable a method setCollector(OutputCollector) and setReporter(Reporter). When the framework creates a Mapper/Reducer object, it calls these methods. 



> close method in a Mapper should be provided with OutputCollector and a Reporter
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-403
>                 URL: http://issues.apache.org/jira/browse/HADOOP-403
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.6.0
>
>
> For mappers with side-effects, or mappers that work as aggregators (i.e. no output on individual key-value pairs, but an aggregate output at the end of all key-value pairs), output should be performed in the close method. For this purpose, we need to supply output collector and reporter to the close method of Mapper. This involves interface change, though. Thoughts ?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Aug 13 16:20:53 2006
Return-Path: 
 <hadoop-dev-return-3100-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20964 invoked from network); 13 Aug 2006 16:20:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Aug 2006 16:20:53 -0000
Received: (qmail 12292 invoked by uid 500); 13 Aug 2006 16:20:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12242 invoked by uid 500); 13 Aug 2006 16:20:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12196 invoked by uid 99); 13 Aug 2006 16:20:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Aug 2006 09:20:51 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE,MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of hasari_tosun@hotmail.com
 designates 65.54.246.203 as permitted sender)
Received: from [65.54.246.203] (HELO bay0-omc3-s3.bay0.hotmail.com)
 (65.54.246.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Aug 2006 09:20:50 -0700
Received: from hotmail.com ([65.54.162.84]) by bay0-omc3-s3.bay0.hotmail.com
 with Microsoft SMTPSVC(6.0.3790.1830);
	 Sun, 13 Aug 2006 09:20:30 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Sun, 13 Aug 2006 09:20:29 -0700
Message-ID: <BAY108-DAV1238B461D515C38B0BDC82E3490@phx.gbl>
Received: from 69.51.119.190 by BAY108-DAV12.phx.gbl with DAV;
	Sun, 13 Aug 2006 16:20:26 +0000
X-Originating-IP: [69.51.119.190]
X-Originating-Email: [hasari_tosun@hotmail.com]
X-Sender: hasari_tosun@hotmail.com
From: "hasari_tosun" <hasari_tosun@hotmail.com>
To: <hadoop-user@lucene.apache.org>,
	<hadoop-dev@lucene.apache.org>,
	<java-user-unsubscribe@lucene.apache.org>,
	<java-dev-unsubscribe@lucene.apache.org>
Subject: Unsubscribe
Date: Sun, 13 Aug 2006 10:25:47 -0600
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_003E_01C6BEC2.D7C43210"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-OriginalArrivalTime: 13 Aug 2006 16:20:29.0567 (UTC)
 FILETIME=[6498C8F0:01C6BEF4]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_003E_01C6BEC2.D7C43210
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Unsubscribe

------=_NextPart_000_003E_01C6BEC2.D7C43210--


From MAILER-DAEMON Sun Aug 13 17:28:07 2006
Return-Path: 
 <hadoop-dev-return-3101-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28524 invoked from network); 13 Aug 2006 17:28:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Aug 2006 17:28:07 -0000
Received: (qmail 47140 invoked by uid 500); 13 Aug 2006 17:28:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47125 invoked by uid 500); 13 Aug 2006 17:28:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47116 invoked by uid 99); 13 Aug 2006 17:28:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Aug 2006 10:28:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Aug 2006 10:28:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4FD36410010
	for <hadoop-dev@lucene.apache.org>; Sun, 13 Aug 2006 17:25:15 +0000 (GMT)
Message-ID: <4965601.1155489915324.JavaMail.jira@brutus>
Date: Sun, 13 Aug 2006 10:25:15 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12427768 ] 
            
Runping Qi commented on HADOOP-372:
-----------------------------------


It would be great if we make it optional for the user to specify key/value classes for the inputs.
Theses classes, if specified by the user, would be used for validation check only. That way, the framework will get the input key/value class info from the the input files alone. That will be very robust. 

Assuming that all records in each split will have the same key/value classes, then the framework can determine the appropriate mapper class upfront, and call the map function of that mapper class, thus the map function does not need to call instanceof method. 

The split will not be static. The only constraint is that a split will not span across multiple files, which is true now.
  

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 14 19:08:12 2006
Return-Path: 
 <hadoop-dev-return-3102-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7130 invoked from network); 14 Aug 2006 19:08:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 19:08:12 -0000
Received: (qmail 57559 invoked by uid 500); 14 Aug 2006 19:08:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57495 invoked by uid 500); 14 Aug 2006 19:08:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57442 invoked by uid 99); 14 Aug 2006 19:08:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 12:08:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 12:08:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0049C41001C
	for <hadoop-dev@lucene.apache.org>; Mon, 14 Aug 2006 19:05:14 +0000 (GMT)
Message-ID: <11062171.1155582313998.JavaMail.jira@brutus>
Date: Mon, 14 Aug 2006 12:05:13 -0700 (PDT)
From: "Marco Nicosia (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-454) hadoop du optionally behave like
 unix's du -s
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hadoop du optionally behave like unix's du -s
---------------------------------------------

                 Key: HADOOP-454
                 URL: http://issues.apache.org/jira/browse/HADOOP-454
             Project: Hadoop
          Issue Type: New Feature
          Components: dfs
    Affects Versions: 0.5.0
            Reporter: Marco Nicosia
            Priority: Trivial


In Unix, the user has the option to specify a -s flag:
     -s      Display an entry for each specified file.  (Equivalent to -d 0)

Instead of providing data for the subdirectories of the arguments, du prints the total usage of each argument, without printing subdirectories.

This is very convenient for those looking to find how much space is used by a particular branch, without requring them to add up all the sub-usages.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 14 19:34:08 2006
Return-Path: 
 <hadoop-dev-return-3103-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20147 invoked from network); 14 Aug 2006 19:34:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 19:34:08 -0000
Received: (qmail 14233 invoked by uid 500); 14 Aug 2006 19:34:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14095 invoked by uid 500); 14 Aug 2006 19:34:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14086 invoked by uid 99); 14 Aug 2006 19:34:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 12:34:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 12:34:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C72FE41001A
	for <hadoop-dev@lucene.apache.org>; Mon, 14 Aug 2006 19:31:14 +0000 (GMT)
Message-ID: <15330215.1155583874813.JavaMail.jira@brutus>
Date: Mon, 14 Aug 2006 12:31:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-445) Parallel data/socket writing for
 DFSOutputStream
In-Reply-To: <33376677.1155243255066.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-445?page=comments#action_12427950 ] 
            
Doug Cutting commented on HADOOP-445:
-------------------------------------

> What was the performance difference you saw after the patch?

I think the performance was about the same, mostly things just became more reliable, since the longer-lived connections caused lots more timeouts.

> Parallel data/socket writing for DFSOutputStream
> ------------------------------------------------
>
>                 Key: HADOOP-445
>                 URL: http://issues.apache.org/jira/browse/HADOOP-445
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>         Attachments: fastClientWrite.patch
>
>
> Currently, as DFS clients output blocks they write the entire block to disk before starting to transmit to the datanode. By writing to disk the client is able to retry a block write if the datanode files in the middle of a block transfer. Writing to disk and then to the datanode adds latency. Hopefully, the common case is that block transfers to datanodes are successful. This patch writes to the datanode and the disk in parallel. If the write to the datanode fails, it falls back to current behavior.
> In my tests of transmits of 237M and 946M datasets using -copyFromLocal I'm seeing a 20-25% improvement in throughput.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 14 19:36:08 2006
Return-Path: 
 <hadoop-dev-return-3104-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20532 invoked from network); 14 Aug 2006 19:36:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 19:36:08 -0000
Received: (qmail 19930 invoked by uid 500); 14 Aug 2006 19:36:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19912 invoked by uid 500); 14 Aug 2006 19:36:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19903 invoked by uid 99); 14 Aug 2006 19:36:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 12:36:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 12:36:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D06D041001C
	for <hadoop-dev@lucene.apache.org>; Mon, 14 Aug 2006 19:33:14 +0000 (GMT)
Message-ID: <28520668.1155583994851.JavaMail.jira@brutus>
Date: Mon, 14 Aug 2006 12:33:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-450) Remove the need for users to specify
 the types of the inputs
In-Reply-To: <29045589.1155328154258.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-450?page=all ]

Doug Cutting updated HADOOP-450:
--------------------------------

    Status: Open  (was: Patch Available)

Um, there's actually no patch attached to this issue.

> Remove the need for users to specify the types of the inputs
> ------------------------------------------------------------
>
>                 Key: HADOOP-450
>                 URL: http://issues.apache.org/jira/browse/HADOOP-450
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>
> Currently, the application specifies the types of the input keys and values and the RecordReader checks them for consistency. It would make more sense to have the RecordReader define the types of keys that it will produce. Therefore, I propose that we add two new methods to RecordReader:
> WritableComparable createKey();
> Writable createValue();
> Note that I propose adding them to the RecordReader rather than the InputFormat, so that they can specific to a particular input split.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 14 19:43:10 2006
Return-Path: 
 <hadoop-dev-return-3105-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22863 invoked from network); 14 Aug 2006 19:43:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 19:43:10 -0000
Received: (qmail 40133 invoked by uid 500); 14 Aug 2006 19:43:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40114 invoked by uid 500); 14 Aug 2006 19:43:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40105 invoked by uid 99); 14 Aug 2006 19:43:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 12:43:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 12:43:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7E46141001F
	for <hadoop-dev@lucene.apache.org>; Mon, 14 Aug 2006 19:40:16 +0000 (GMT)
Message-ID: <29488921.1155584416514.JavaMail.jira@brutus>
Date: Mon, 14 Aug 2006 12:40:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-451) Add a Split interface
In-Reply-To: <24919314.1155330613896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-451?page=comments#action_12427953 ] 
            
Doug Cutting commented on HADOOP-451:
-------------------------------------

> You will probably need to add a "setSplitClass" and "getSplitClass" to JobConf 

The InputFormat is a Split factory, no?  Who else would need to create Splits?

Splits are passed in RPCs, and the RPC mechanism supports polymorphism.  Splits are not written to files, so I see no reason to declare a fixed class per job.  Am I missing something?

> Add a Split interface
> ---------------------
>
>                 Key: HADOOP-451
>                 URL: http://issues.apache.org/jira/browse/HADOOP-451
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Doug Cutting
>             Fix For: 0.6.0
>
>
> The InputFormat interface has a method:
> FileSplit[] getSplits();
> This should change to:
> Split[] getSplits();
> The Split interface would look like:
> public interface Split extends Writable {
>   /** Returns a list of hosts that contain this split.
>        This is only used to optimize task placement, so this may be empty. */
>   String[] getLocations(FileSystem fs);
>   /** The relative, estimated cost of operating on this.  Typically the size of the data in the split.
>        Used to prioritize tasks in a job (high-cost tasks are run first).  */
>    long getCost();
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 14 19:56:31 2006
Return-Path: 
 <hadoop-dev-return-3106-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26425 invoked from network); 14 Aug 2006 19:56:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 19:56:31 -0000
Received: (qmail 59489 invoked by uid 500); 14 Aug 2006 19:56:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59446 invoked by uid 500); 14 Aug 2006 19:56:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59425 invoked by uid 99); 14 Aug 2006 19:56:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 12:56:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 12:56:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 313DF41001D
	for <hadoop-dev@lucene.apache.org>; Mon, 14 Aug 2006 19:53:16 +0000 (GMT)
Message-ID: <24200012.1155585196198.JavaMail.jira@brutus>
Date: Mon, 14 Aug 2006 12:53:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-181) task trackers should not restart for
 having a late heartbeat
In-Reply-To: <701484.1146509206378.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-181?page=comments#action_12427954 ] 
            
Doug Cutting commented on HADOOP-181:
-------------------------------------

> If a switch goes down for 15 minutes [ ... ]

We'll currently have a lot of other problems if a switch goes down for 15 minutes.  All of the other tasks will probably fail because DFS will no longer have complete copies of files.

Is a switch going down for 15 minutes really a case we need to optimize?  Is it acceptable to lose a few hours work on its hosts when a switch dies?  When a switch fails, how long does it take to replace?

We can answer some of this fairly precisely.  What is the MTBF for switches?  How many switches would we have in a 10k-node system?

> task trackers should not restart for having a late heartbeat
> ------------------------------------------------------------
>
>                 Key: HADOOP-181
>                 URL: http://issues.apache.org/jira/browse/HADOOP-181
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.6.0
>
>         Attachments: lost-heartbeat.patch
>
>
> TaskTrackers should not close and restart themselves for having a late heartbeat. The JobTracker should just accept their current status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 14 20:09:09 2006
Return-Path: 
 <hadoop-dev-return-3107-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30846 invoked from network); 14 Aug 2006 20:09:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 20:09:09 -0000
Received: (qmail 80388 invoked by uid 500); 14 Aug 2006 20:09:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80220 invoked by uid 500); 14 Aug 2006 20:09:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80211 invoked by uid 99); 14 Aug 2006 20:09:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 13:09:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 13:09:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F18F241001A
	for <hadoop-dev@lucene.apache.org>; Mon, 14 Aug 2006 20:06:15 +0000 (GMT)
Message-ID: <9194881.1155585975986.JavaMail.jira@brutus>
Date: Mon, 14 Aug 2006 13:06:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-403) close method in a Mapper should be
 provided with OutputCollector and a Reporter
In-Reply-To: <14218394.1154383873895.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-403?page=comments#action_12427956 ] 
            
Doug Cutting commented on HADOOP-403:
-------------------------------------

I don't think we should make all future io.Closeable implementations deal with a mapred.OutputCollector.  I would prefer any such methods were added to a new interface, perhaps mapred.Output.

One can easily workaround this problem by specifying an alternate MapRunnable.  Is this issue really so common that this workaround, or Runping's, do not suffice?

> close method in a Mapper should be provided with OutputCollector and a Reporter
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-403
>                 URL: http://issues.apache.org/jira/browse/HADOOP-403
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>         Environment: all
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.6.0
>
>
> For mappers with side-effects, or mappers that work as aggregators (i.e. no output on individual key-value pairs, but an aggregate output at the end of all key-value pairs), output should be performed in the close method. For this purpose, we need to supply output collector and reporter to the close method of Mapper. This involves interface change, though. Thoughts ?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 14 20:13:15 2006
Return-Path: 
 <hadoop-dev-return-3108-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31489 invoked from network); 14 Aug 2006 20:13:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 20:13:15 -0000
Received: (qmail 83541 invoked by uid 500); 14 Aug 2006 20:13:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82875 invoked by uid 500); 14 Aug 2006 20:13:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82866 invoked by uid 99); 14 Aug 2006 20:13:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 13:13:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 13:13:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E085F7141F0
	for <hadoop-dev@lucene.apache.org>; Mon, 14 Aug 2006 20:10:14 +0000 (GMT)
Message-ID: <19773170.1155586214917.JavaMail.jira@brutus>
Date: Mon, 14 Aug 2006 13:10:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-453) bug in Text.setCapacity( int len )
In-Reply-To: <23106393.1155400273935.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-453?page=all ]

Doug Cutting updated HADOOP-453:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.6.0
       Resolution: Fixed

I just committed this.  Thanks, Sami!

> bug in Text.setCapacity( int len )
> ----------------------------------
>
>                 Key: HADOOP-453
>                 URL: http://issues.apache.org/jira/browse/HADOOP-453
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Sami Siren
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: hadoop_Text_patch.txt
>
>
> There seems to be a bug in o.a.h.i.Text class in methd setCapacity( int len ) attached patch demonstrates the issue with unit test and
> fixes the problem.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 14 23:07:14 2006
Return-Path: 
 <hadoop-dev-return-3109-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74494 invoked from network); 14 Aug 2006 23:07:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 23:07:14 -0000
Received: (qmail 90319 invoked by uid 500); 14 Aug 2006 23:07:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90296 invoked by uid 500); 14 Aug 2006 23:07:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90286 invoked by uid 99); 14 Aug 2006 23:07:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 16:07:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 16:07:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BD64941001C
	for <hadoop-dev@lucene.apache.org>; Mon, 14 Aug 2006 23:04:14 +0000 (GMT)
Message-ID: <15605108.1155596654773.JavaMail.jira@brutus>
Date: Mon, 14 Aug 2006 16:04:14 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-450) Remove the need for users to specify
 the types of the inputs
In-Reply-To: <29045589.1155328154258.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-450?page=comments#action_12427980 ] 
            
Runping Qi commented on HADOOP-450:
-----------------------------------


It seems to me that it is better to add getInputKeyClass/ValueClass methods to RecordReader, since creating an object of these class needs a 
reference to JobConf object and RecordReader does not have such a reference.
The MapRunner class can create the key/value objects by calling ReflectionUtil. MapRunner would look like:

  public void run(RecordReader input, OutputCollector output,
                  Reporter reporter)
    throws IOException {
    try {
      // allocate key & value instances that are re-used for all entries
        this.inputKeyClass = input.getKeyClass();
        this.inputValueClass = input.getValueClass();
      
        WritableComparable key =
          (WritableComparable)ReflectionUtils.newInstance(inputKeyClass, job);
        Writable value = (Writable)ReflectionUtils.newInstance(inputValueClass,
                                                             job);
        
        Class mapperClass = job.getMapperClassFor(this.inputKeyClass, this.inputValueClass);
        this.mapper = (Mapper)ReflectionUtils.newInstance(mapperClass, job);
        while (input.next(key, value)) {
        // map pair to output
        mapper.map(key, value, output, reporter);
      }
    } finally {
        mapper.close();
    }
  }

In the above code, the mapper class is obtained from the job object 
through a new method of JobConf class:
Class getMapperClassFor(this.inputKeyClass, this.inputValueClass);

With these, and a few other minor changes, this patch will address jira issue 372 as well.
The other changes include:

    add to JobConf class the following methods:
           public InputFormat getInputFormat(Path p) 
           public void setInputFormat(Class theClass, Path p)
           public Class getMapperClassFor(Class keyClass, Class valueClass) {
           public void setMapperClassFor(Class theClass, Class keyClass, Class valueClass)
   replace thefollowing in MapTask class:
      final RecordReader rawIn =                  // open input
        job.getInputFormat().getRecordReader
        (FileSystem.get(job), split, job, reporter);
  with 
      final RecordReader rawIn =                  // open input
        job.getInputFormat(split.getPath()).getRecordReader
        (FileSystem.get(job), split, job, reporter);
 

With these changes, the application will specify a MapReduce job in the following way:
            
        Configuration defaults = new Configuration();
        JobConf theJob = new JobConf(defaults, My.class);
        
        theJob.addInputPath(myInputPath_1)
        theJob.setInputFormat(SequenceFileInputFormat, myInputPath_1);

        theJob.addInputPath(myInputPath_2)
        theJob.setInputFormat(TextInputFormat, myInputPath_2);

        theJob.addInputPath(myInputPath_3)
        theJob.setInputFormat(SequenceFileInputFormat, myInputPath_3);

        theJob.setMapperClassFor(MapperClass_a, LongWritable.class, Text.class);
        theJob.setMapperClassFor(MapperClass_b, Key_1.class, Value_1.class);
        theJob.setMapperClassFor(MapperClass_c, Key_2.class, Value_2.class);

        ....



 


> Remove the need for users to specify the types of the inputs
> ------------------------------------------------------------
>
>                 Key: HADOOP-450
>                 URL: http://issues.apache.org/jira/browse/HADOOP-450
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>
> Currently, the application specifies the types of the input keys and values and the RecordReader checks them for consistency. It would make more sense to have the RecordReader define the types of keys that it will produce. Therefore, I propose that we add two new methods to RecordReader:
> WritableComparable createKey();
> Writable createValue();
> Note that I propose adding them to the RecordReader rather than the InputFormat, so that they can specific to a particular input split.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 14 23:18:19 2006
Return-Path: 
 <hadoop-dev-return-3110-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77455 invoked from network); 14 Aug 2006 23:18:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 23:18:19 -0000
Received: (qmail 3537 invoked by uid 500); 14 Aug 2006 23:18:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3520 invoked by uid 500); 14 Aug 2006 23:18:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3511 invoked by uid 99); 14 Aug 2006 23:18:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 16:18:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 16:18:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 78F9441001D
	for <hadoop-dev@lucene.apache.org>; Mon, 14 Aug 2006 23:15:15 +0000 (GMT)
Message-ID: <2439447.1155597315493.JavaMail.jira@brutus>
Date: Mon, 14 Aug 2006 16:15:15 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-322?page=comments#action_12427983 ] 
            
Runping Qi commented on HADOOP-322:
-----------------------------------


Is there still a problem in commiting this patch?
I think the patch adds a good value to Hadoop APIs, and is pretty safe, since it does not affect the server side at all.



> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-322
>                 URL: http://issues.apache.org/jira/browse/HADOOP-322
>             Project: Hadoop
>          Issue Type: New Feature
>            Reporter: Runping Qi
>         Assigned To: Runping Qi
>         Attachments: job_control_patch.txt
>
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 14 23:39:08 2006
Return-Path: 
 <hadoop-dev-return-3111-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83269 invoked from network); 14 Aug 2006 23:39:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 23:39:08 -0000
Received: (qmail 31966 invoked by uid 500); 14 Aug 2006 23:39:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31796 invoked by uid 500); 14 Aug 2006 23:39:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31787 invoked by uid 99); 14 Aug 2006 23:39:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 16:39:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 16:39:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C350241001C
	for <hadoop-dev@lucene.apache.org>; Mon, 14 Aug 2006 23:36:14 +0000 (GMT)
Message-ID: <14768934.1155598574797.JavaMail.jira@brutus>
Date: Mon, 14 Aug 2006 16:36:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-450) Remove the need for users to specify
 the types of the inputs
In-Reply-To: <29045589.1155328154258.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-450?page=comments#action_12427986 ] 
            
Doug Cutting commented on HADOOP-450:
-------------------------------------

This issue is not about specifying multiple map functions per job.  That should be a separate issue.  This is just about moving the ownership of the key and value types from the job to the RecordReader.

I don't understand your objections to the proposed new RecordReader methods createKey() and createValue().  The RecordReader is created by InputFormat.getRecordReader(), which is passed a JobConf, so the RecordReader has access to a JobConf when it creates key and value instances.  The RecordReader can then use ReflectionUtils.newInstance()  to create configured instances.

> Remove the need for users to specify the types of the inputs
> ------------------------------------------------------------
>
>                 Key: HADOOP-450
>                 URL: http://issues.apache.org/jira/browse/HADOOP-450
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>
> Currently, the application specifies the types of the input keys and values and the RecordReader checks them for consistency. It would make more sense to have the RecordReader define the types of keys that it will produce. Therefore, I propose that we add two new methods to RecordReader:
> WritableComparable createKey();
> Writable createValue();
> Note that I propose adding them to the RecordReader rather than the InputFormat, so that they can specific to a particular input split.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 14 23:46:20 2006
Return-Path: 
 <hadoop-dev-return-3112-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86395 invoked from network); 14 Aug 2006 23:46:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 23:46:20 -0000
Received: (qmail 40002 invoked by uid 500); 14 Aug 2006 23:46:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39984 invoked by uid 500); 14 Aug 2006 23:46:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39972 invoked by uid 99); 14 Aug 2006 23:46:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 16:46:18 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of bpendleton@gmail.com designates
 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 16:46:17 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1207883wxc
        for <hadoop-dev@lucene.apache.org>;
 Mon, 14 Aug 2006 16:45:56 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=herpON+t9eGgQOEU/2If6fj8IhvggMRQzlp8Ty3G5SGoJKBOUbytggMi6X4jFfV/3yLqiRvyMCJ+bJUezG54GSGqyzTwS/qeDiyqvRkROrW9leqFK2bOL0Ar7vbNIhxdFoyMXaF5achfgbAAYa2AO03zhuDNFM9tyrgO/IRAaQU=
Received: by 10.70.48.15 with SMTP id v15mr6212497wxv;
        Mon, 14 Aug 2006 16:45:55 -0700 (PDT)
Received: by 10.70.129.11 with HTTP; Mon, 14 Aug 2006 16:45:55 -0700 (PDT)
Message-ID: <1bf79d3e0608141645k59f624bbl411524217f151f6a@mail.gmail.com>
Date: Mon, 14 Aug 2006 16:45:55 -0700
From: "Bryan A. Pendleton" <bp@geekdom.net>
Sender: bpendleton@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Commented: (HADOOP-451) Add a Split interface
In-Reply-To: <29488921.1155584416514.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_77078_19064387.1155599155841"
References: <24919314.1155330613896.JavaMail.jira@brutus>
	 <29488921.1155584416514.JavaMail.jira@brutus>
X-Google-Sender-Auth: 055814e9645934df
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_77078_19064387.1155599155841
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Maybe I'm reading the code wrong.

It looks to me like the FileSplit that gets used by a MapTaskRunner comes
from the instantiation of a FileSplit in MapTask.java, which deserializes it
from a stream. In the very least, if MapTasks stay Writable, then that code
is wrong. I got the impression that the Task which ends up getting executed
goes through RPC this way. So, when a MapTask gets assigned, and the
readFields() gets called on the other end, it will be FileSplit.readFields()
getting called, with no awareness of the actual type of Split that was
present.

Now that I've run through that process, and assuming my spiel is correct -
then won't it be necessary to fix MapTask to correctly re-create the right
type of Split on deserialization?

On 8/14/06, Doug Cutting (JIRA) <jira@apache.org> wrote:
>
>     [
> http://issues.apache.org/jira/browse/HADOOP-451?page=comments#action_12427953]
>
> Doug Cutting commented on HADOOP-451:
> -------------------------------------
>
> > You will probably need to add a "setSplitClass" and "getSplitClass" to
> JobConf
>
> The InputFormat is a Split factory, no?  Who else would need to create
> Splits?
>
> Splits are passed in RPCs, and the RPC mechanism supports
> polymorphism.  Splits are not written to files, so I see no reason to
> declare a fixed class per job.  Am I missing something?
>
> > Add a Split interface
> > ---------------------
> >
> >                 Key: HADOOP-451
> >                 URL: http://issues.apache.org/jira/browse/HADOOP-451
> >             Project: Hadoop
> >          Issue Type: Improvement
> >          Components: mapred
> >            Reporter: Doug Cutting
> >             Fix For: 0.6.0
> >
> >
> > The InputFormat interface has a method:
> > FileSplit[] getSplits();
> > This should change to:
> > Split[] getSplits();
> > The Split interface would look like:
> > public interface Split extends Writable {
> >   /** Returns a list of hosts that contain this split.
> >        This is only used to optimize task placement, so this may be
> empty. */
> >   String[] getLocations(FileSystem fs);
> >   /** The relative, estimated cost of operating on this.  Typically the
> size of the data in the split.
> >        Used to prioritize tasks in a job (high-cost tasks are run
> first).  */
> >    long getCost();
> > }
>
> --
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the administrators:
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/software/jira
>
>
>


-- 
Bryan A. P. Pendleton
Ph: (877) geek-1-bp

------=_Part_77078_19064387.1155599155841--

From MAILER-DAEMON Mon Aug 14 23:51:08 2006
Return-Path: 
 <hadoop-dev-return-3113-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89406 invoked from network); 14 Aug 2006 23:51:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 23:51:08 -0000
Received: (qmail 50100 invoked by uid 500); 14 Aug 2006 23:51:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50081 invoked by uid 500); 14 Aug 2006 23:51:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50069 invoked by uid 99); 14 Aug 2006 23:51:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 16:51:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 16:51:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C9CF841001A
	for <hadoop-dev@lucene.apache.org>; Mon, 14 Aug 2006 23:48:14 +0000 (GMT)
Message-ID: <27153130.1155599294824.JavaMail.jira@brutus>
Date: Mon, 14 Aug 2006 16:48:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-450) Remove the need for users to specify
 the types of the inputs
In-Reply-To: <29045589.1155328154258.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-450?page=all ]

Owen O'Malley updated HADOOP-450:
---------------------------------

    Attachment: no-input-type.patch

oops, here is the patch

> Remove the need for users to specify the types of the inputs
> ------------------------------------------------------------
>
>                 Key: HADOOP-450
>                 URL: http://issues.apache.org/jira/browse/HADOOP-450
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: no-input-type.patch
>
>
> Currently, the application specifies the types of the input keys and values and the RecordReader checks them for consistency. It would make more sense to have the RecordReader define the types of keys that it will produce. Therefore, I propose that we add two new methods to RecordReader:
> WritableComparable createKey();
> Writable createValue();
> Note that I propose adding them to the RecordReader rather than the InputFormat, so that they can specific to a particular input split.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 14 23:57:08 2006
Return-Path: 
 <hadoop-dev-return-3114-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93264 invoked from network); 14 Aug 2006 23:57:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 23:57:08 -0000
Received: (qmail 62872 invoked by uid 500); 14 Aug 2006 23:57:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62856 invoked by uid 500); 14 Aug 2006 23:57:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62847 invoked by uid 99); 14 Aug 2006 23:57:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 16:57:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 16:57:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C153D7141F0
	for <hadoop-dev@lucene.apache.org>; Mon, 14 Aug 2006 23:54:14 +0000 (GMT)
Message-ID: <25095826.1155599654789.JavaMail.jira@brutus>
Date: Mon, 14 Aug 2006 16:54:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-322?page=comments#action_12427993 ] 
            
Doug Cutting commented on HADOOP-322:
-------------------------------------

Sorry.  I lost track of this.  The new "Patch Available" status should help to keep this from happening.  I'll review this first thing tomorrow morning.  Thanks for the reminder.

> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-322
>                 URL: http://issues.apache.org/jira/browse/HADOOP-322
>             Project: Hadoop
>          Issue Type: New Feature
>            Reporter: Runping Qi
>         Assigned To: Runping Qi
>         Attachments: job_control_patch.txt
>
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 00:44:09 2006
Return-Path: 
 <hadoop-dev-return-3115-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10434 invoked from network); 15 Aug 2006 00:44:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 00:44:09 -0000
Received: (qmail 29190 invoked by uid 500); 15 Aug 2006 00:44:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29167 invoked by uid 500); 15 Aug 2006 00:44:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29158 invoked by uid 99); 15 Aug 2006 00:44:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 17:44:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 17:44:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 58E6A41001D
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 00:41:15 +0000 (GMT)
Message-ID: <14544013.1155602475361.JavaMail.jira@brutus>
Date: Mon, 14 Aug 2006 17:41:15 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-444) In streaming with a NONE reducer, you
 get duplicate files if a mapper fails, is restarted, and succeeds next
 time.
In-Reply-To: <10321927.1155237793878.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-444?page=all ]

Yoram Arnon reassigned HADOOP-444:
----------------------------------

    Assignee: Michel Tourn

> In streaming with a NONE reducer, you get duplicate files if a mapper fails, is restarted, and succeeds next time.
> ------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-444
>                 URL: http://issues.apache.org/jira/browse/HADOOP-444
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Dick King
>         Assigned To: Michel Tourn
>
> When the dust settled after a streaming run, the directory ended up looking like this:
>   /user/dking/<project-name>/K-HTML-UTF8-2006-08-09-rescued-abstracted/task_0026_m_007384_0	<r 3>	10563406
>   /user/dking/<project-name>/K-HTML-UTF8-2006-08-09-rescued-abstracted/task_0026_m_007384_1	<r 3>	10563406
> Future processing will receive duplicated data.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 01:04:09 2006
Return-Path: 
 <hadoop-dev-return-3116-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13672 invoked from network); 15 Aug 2006 01:04:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 01:04:09 -0000
Received: (qmail 48398 invoked by uid 500); 15 Aug 2006 01:04:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48373 invoked by uid 500); 15 Aug 2006 01:04:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48364 invoked by uid 99); 15 Aug 2006 01:04:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 18:04:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 18:04:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C609641001D
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 01:01:14 +0000 (GMT)
Message-ID: <25799247.1155603674808.JavaMail.jira@brutus>
Date: Mon, 14 Aug 2006 18:01:14 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-450) Remove the need for users to specify
 the types of the inputs
In-Reply-To: <29045589.1155328154258.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-450?page=comments#action_12427998 ] 
            
Runping Qi commented on HADOOP-450:
-----------------------------------


I don't really object to add creatKey/Value methods to RecordReader. One way or another is fine. To add these methods, the RecordReader class needs to introduce a reference to conf object, which Owen did, and it is just fine.

I agree we should have a separate patch for Issue 372. With the patch for Issue 450, the patch for Issue 372 will be very simple.
If no body is working on Issue 372, I'd be happy to provide a patch for it.



> Remove the need for users to specify the types of the inputs
> ------------------------------------------------------------
>
>                 Key: HADOOP-450
>                 URL: http://issues.apache.org/jira/browse/HADOOP-450
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: no-input-type.patch
>
>
> Currently, the application specifies the types of the input keys and values and the RecordReader checks them for consistency. It would make more sense to have the RecordReader define the types of keys that it will produce. Therefore, I propose that we add two new methods to RecordReader:
> WritableComparable createKey();
> Writable createValue();
> Note that I propose adding them to the RecordReader rather than the InputFormat, so that they can specific to a particular input split.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 01:32:11 2006
Return-Path: 
 <hadoop-dev-return-3117-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23971 invoked from network); 15 Aug 2006 01:32:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 01:32:11 -0000
Received: (qmail 72412 invoked by uid 500); 15 Aug 2006 01:32:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72237 invoked by uid 500); 15 Aug 2006 01:32:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72228 invoked by uid 99); 15 Aug 2006 01:32:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 18:32:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 18:32:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CB65541001C
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 01:29:14 +0000 (GMT)
Message-ID: <16077754.1155605354830.JavaMail.jira@brutus>
Date: Mon, 14 Aug 2006 18:29:14 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-435) Encapsulating startup scripts and
 jars in a single Jar file.
In-Reply-To: <23406804.1155134593912.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-435?page=comments#action_12428000 ] 
            
Yoram Arnon commented on HADOOP-435:
------------------------------------

any start/stop mechanism must allow separate control of DFS and map-reduce, and separate nodes for namenode, jobtracker, datanodes and tasktrackers.
jvm options, the pid matter etc. are also required.

A trivial method for starting up a toy hadoop cluster would be very welcome, lowering the bar for new users, but let's be careful before removing any functionality, or changing the behavior of the hadoop script.

> Encapsulating startup scripts and jars in a single Jar file.
> ------------------------------------------------------------
>
>                 Key: HADOOP-435
>                 URL: http://issues.apache.org/jira/browse/HADOOP-435
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>         Attachments: hadoopit.patch, start.sh, stop.sh
>
>
> Currently, hadoop is a set of scripts, configurations, and jar files. It makes it a pain to install on compute and datanodes. It also makes it a pain to setup clients so that they can use hadoop. Everytime things are updated the pain begins again.
> I suggest that we should be able to build a single Jar file that has a Main-Class defined with the configuration built in so that we can distribute that one file to nodes and clients on updates. One nice thing that I haven't done would be to make the jarfile downloadable from the JobTracker webpage so that clients can easily submit the jobs.
> I currently use such a setup on my small cluster. To start the job tracker I used "java -jar hadoop.jar -l /tmp/log jobtracker" to submit a job I use "java -jar hadoop.jar jar wordcount.jar". I used the client on my linux and Mac OSX machines and I'll I need installed in java and the hadoop.jar file.
> hadoop.jar helps with logfiles and configurations. The default of pulling the config files from the jar file can be overridden by specifying a config directory so that you can easily have machine specific configs and still have the same hadoop.jar on all machines.
> Here are the available commands from hadoop.jar:
> USAGE: hadoop [-l logdir] command
>   User commands:
>     dfs          run a DFS admin client
>     jar          run a JAR file
>     job          manipulate MapReduce jobs
>     fsck         run a DFS filesystem check utility
>   Runtime startup commands:
>     datanode     run a DFS datanode
>     jobtracker   run the MapReduce job Tracker node
>     namenode     run the DFS namenode (namenode -format formats the FS)
>     tasktracker  run a MapReduce task Tracker node
>   HadoopLoader commands:
>     buildJar     builds the HadoopLoader jar file
>     conf         dump hadoop configuration
> Note, I don't have the classes for hadoop streaming built into this Jar file, but if I had that would also be an option (it checks for needed classes before displaying an option). It makes it very easy for users that just write scripts to use hadoop straight from their machines.
> I'm also attaching the start.sh and stop.sh scripts that I use. These are the only scripts I use to startup the daemons. They are very simple and the start.sh script uses the config file to figure out whether or not to start the jobtracker and the nameserver.
> The attached patch adds the HadoopIt patch, modifies the Configuration class to find the config files correctly, and modifies the build to make a fully contained hadoop.jar. To update the configuration in a hadoop.jar you simply use "zip hadoop.jar hadoop-site.xml".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 03:22:14 2006
Return-Path: 
 <hadoop-dev-return-3118-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61885 invoked from network); 15 Aug 2006 03:22:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 03:22:14 -0000
Received: (qmail 72441 invoked by uid 500); 15 Aug 2006 03:22:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72423 invoked by uid 500); 15 Aug 2006 03:22:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72412 invoked by uid 99); 15 Aug 2006 03:22:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 20:22:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 20:22:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C6FF241001D
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 03:19:14 +0000 (GMT)
Message-ID: <6228485.1155611954812.JavaMail.jira@brutus>
Date: Mon, 14 Aug 2006 20:19:14 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-450) Remove the need for users to specify
 the types of the inputs
In-Reply-To: <29045589.1155328154258.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-450?page=all ]

Owen O'Malley updated HADOOP-450:
---------------------------------

    Status: Patch Available  (was: Open)

> Remove the need for users to specify the types of the inputs
> ------------------------------------------------------------
>
>                 Key: HADOOP-450
>                 URL: http://issues.apache.org/jira/browse/HADOOP-450
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: no-input-type.patch
>
>
> Currently, the application specifies the types of the input keys and values and the RecordReader checks them for consistency. It would make more sense to have the RecordReader define the types of keys that it will produce. Therefore, I propose that we add two new methods to RecordReader:
> WritableComparable createKey();
> Writable createValue();
> Note that I propose adding them to the RecordReader rather than the InputFormat, so that they can specific to a particular input split.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 04:40:09 2006
Return-Path: 
 <hadoop-dev-return-3119-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 121 invoked from network); 15 Aug 2006 04:40:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 04:40:09 -0000
Received: (qmail 32007 invoked by uid 500); 15 Aug 2006 04:40:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31837 invoked by uid 500); 15 Aug 2006 04:40:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31828 invoked by uid 99); 15 Aug 2006 04:40:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 21:40:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 21:40:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0623641001E
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 04:37:15 +0000 (GMT)
Message-ID: <23241564.1155616634958.JavaMail.jira@brutus>
Date: Mon, 14 Aug 2006 21:37:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-436) Concluding that the Map task failed
 may not be always right in getMapOutput.jsp
In-Reply-To: <11136023.1155150553947.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-436?page=all ]

Devaraj Das updated HADOOP-436:
-------------------------------

    Status: Patch Available  (was: Open)

> Concluding that the Map task failed may not be always right in getMapOutput.jsp
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-436
>                 URL: http://issues.apache.org/jira/browse/HADOOP-436
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: getmapout.patch
>
>
> In the getMapOutput.jsp, tracker.mapOutputLost is called irrespective of whether the sender of the map output threw an exception or the receiver died (thereby closing the socket causing the jsp to throw an exception). Invoking the method causes the corresponding map task to fail and causes it to be rescheduled but it may be the case that the problem is at the reciever's end. Need to do a better check of where the exception was thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 14:28:14 2006
Return-Path: 
 <hadoop-dev-return-3120-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67581 invoked from network); 15 Aug 2006 14:28:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 14:28:14 -0000
Received: (qmail 84200 invoked by uid 500); 15 Aug 2006 14:28:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84178 invoked by uid 500); 15 Aug 2006 14:28:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84169 invoked by uid 99); 15 Aug 2006 14:28:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 07:28:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 07:28:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2DBFB71429B
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 14:25:17 +0000 (GMT)
Message-ID: <19071101.1155651917184.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 07:25:17 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-435) Encapsulating startup scripts and
 jars in a single Jar file.
In-Reply-To: <23406804.1155134593912.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-435?page=comments#action_12428141 ] 
            
Benjamin Reed commented on HADOOP-435:
--------------------------------------

This does separate control of all the daemons just like the hadoop script. It encapsulates all the jar files, the configuration files (optionally), and most of the hadoop script into one self contained jar file. You still must start up each daemon separately. The command line arguments are the same as those for the hadoop script. No functionality is removed, I just added a bit more, like support for hadoopStreaming and the ability to dump the properties retrieved from the merged config files to standard out. 

> Encapsulating startup scripts and jars in a single Jar file.
> ------------------------------------------------------------
>
>                 Key: HADOOP-435
>                 URL: http://issues.apache.org/jira/browse/HADOOP-435
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.5.0
>            Reporter: Benjamin Reed
>         Attachments: hadoopit.patch, start.sh, stop.sh
>
>
> Currently, hadoop is a set of scripts, configurations, and jar files. It makes it a pain to install on compute and datanodes. It also makes it a pain to setup clients so that they can use hadoop. Everytime things are updated the pain begins again.
> I suggest that we should be able to build a single Jar file that has a Main-Class defined with the configuration built in so that we can distribute that one file to nodes and clients on updates. One nice thing that I haven't done would be to make the jarfile downloadable from the JobTracker webpage so that clients can easily submit the jobs.
> I currently use such a setup on my small cluster. To start the job tracker I used "java -jar hadoop.jar -l /tmp/log jobtracker" to submit a job I use "java -jar hadoop.jar jar wordcount.jar". I used the client on my linux and Mac OSX machines and I'll I need installed in java and the hadoop.jar file.
> hadoop.jar helps with logfiles and configurations. The default of pulling the config files from the jar file can be overridden by specifying a config directory so that you can easily have machine specific configs and still have the same hadoop.jar on all machines.
> Here are the available commands from hadoop.jar:
> USAGE: hadoop [-l logdir] command
>   User commands:
>     dfs          run a DFS admin client
>     jar          run a JAR file
>     job          manipulate MapReduce jobs
>     fsck         run a DFS filesystem check utility
>   Runtime startup commands:
>     datanode     run a DFS datanode
>     jobtracker   run the MapReduce job Tracker node
>     namenode     run the DFS namenode (namenode -format formats the FS)
>     tasktracker  run a MapReduce task Tracker node
>   HadoopLoader commands:
>     buildJar     builds the HadoopLoader jar file
>     conf         dump hadoop configuration
> Note, I don't have the classes for hadoop streaming built into this Jar file, but if I had that would also be an option (it checks for needed classes before displaying an option). It makes it very easy for users that just write scripts to use hadoop straight from their machines.
> I'm also attaching the start.sh and stop.sh scripts that I use. These are the only scripts I use to startup the daemons. They are very simple and the start.sh script uses the config file to figure out whether or not to start the jobtracker and the nameserver.
> The attached patch adds the HadoopIt patch, modifies the Configuration class to find the config files correctly, and modifies the build to make a fully contained hadoop.jar. To update the configuration in a hadoop.jar you simply use "zip hadoop.jar hadoop-site.xml".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 17:04:10 2006
Return-Path: 
 <hadoop-dev-return-3121-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39716 invoked from network); 15 Aug 2006 17:04:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 17:04:10 -0000
Received: (qmail 22584 invoked by uid 500); 15 Aug 2006 17:04:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22554 invoked by uid 500); 15 Aug 2006 17:04:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22545 invoked by uid 99); 15 Aug 2006 17:04:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 10:04:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 10:04:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CDE9C41001E
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 17:01:14 +0000 (GMT)
Message-ID: <15356667.1155661274840.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 10:01:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-306?page=all ]

Konstantin Shvachko updated HADOOP-306:
---------------------------------------

    Status: Patch Available  (was: Open)

> Safe mode and name node startup procedures
> ------------------------------------------
>
>                 Key: HADOOP-306
>                 URL: http://issues.apache.org/jira/browse/HADOOP-306
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>         Attachments: FSImageSaveDNInfo.patch
>
>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 17:16:10 2006
Return-Path: 
 <hadoop-dev-return-3122-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45402 invoked from network); 15 Aug 2006 17:16:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 17:16:10 -0000
Received: (qmail 49581 invoked by uid 500); 15 Aug 2006 17:16:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49555 invoked by uid 500); 15 Aug 2006 17:16:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49539 invoked by uid 99); 15 Aug 2006 17:16:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 10:16:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 10:16:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BFF9B41001F
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 17:13:14 +0000 (GMT)
Message-ID: <6170008.1155661994783.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 10:13:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-394) MiniDFSCluster shudown order
In-Reply-To: <28678698.1154025013891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-394?page=comments#action_12428171 ] 
            
Konstantin Shvachko commented on HADOOP-394:
--------------------------------------------

This is resolved. Patch was applied on 08/01/06.


> MiniDFSCluster shudown order
> ----------------------------
>
>                 Key: HADOOP-394
>                 URL: http://issues.apache.org/jira/browse/HADOOP-394
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>            Priority: Minor
>         Attachments: MiniDFSClusterShutdownOrder.patch
>
>
> I propose to reverse the order of shutdown in MiniDFSCluster.
> Currently it shutdowns the name node first and then the data node,
> which causes the data node throwing unnecessary Exceptions in unit test.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 17:50:10 2006
Return-Path: 
 <hadoop-dev-return-3123-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56314 invoked from network); 15 Aug 2006 17:50:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 17:50:10 -0000
Received: (qmail 10188 invoked by uid 500); 15 Aug 2006 17:50:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10172 invoked by uid 500); 15 Aug 2006 17:50:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10162 invoked by uid 99); 15 Aug 2006 17:50:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 10:50:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 10:50:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5B218410020
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 17:47:15 +0000 (GMT)
Message-ID: <4666824.1155664035370.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 10:47:15 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-444) In streaming with a NONE reducer,
 you get duplicate files if a mapper fails, is restarted, and succeeds next
 time.
In-Reply-To: <10321927.1155237793878.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-444?page=comments#action_12428184 ] 
            
Michel Tourn commented on HADOOP-444:
-------------------------------------

I plan to fix this problem like this:
name the "side-effect output files" after the input Split rather than after the taskid:

/in/myfile
/sideout/myfile+200000-100000

And for the first split at offset zero, drop split info, 
i.e. name the output file as the unqaliified filename :
/sideout/myfile

That way, assuming your InputFormat only creates one split per file(*)
then the input filenames and partitioning is preserved (in a different output directory)

And in the case of speculative execution and failed / reexecuted tasks.
those output files are assigned the same name. 
Only one version of the file will remain in the end.
This solves the duplicate-output issue.

Only full output files are committed to HDFS on close. 
So there are no issues with concurrent writes / partial writes.

One question is what needs to be done to guarantee that the version from the last execution "wins" .
Is it a good idea to force an HDFS-delete of a target output file before opening the new version?

(*) for example inputs compressed with file-level compression, like .gzip. Could also be useful to let the user force a single-split.









> In streaming with a NONE reducer, you get duplicate files if a mapper fails, is restarted, and succeeds next time.
> ------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-444
>                 URL: http://issues.apache.org/jira/browse/HADOOP-444
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Dick King
>         Assigned To: Michel Tourn
>
> When the dust settled after a streaming run, the directory ended up looking like this:
>   /user/dking/<project-name>/K-HTML-UTF8-2006-08-09-rescued-abstracted/task_0026_m_007384_0	<r 3>	10563406
>   /user/dking/<project-name>/K-HTML-UTF8-2006-08-09-rescued-abstracted/task_0026_m_007384_1	<r 3>	10563406
> Future processing will receive duplicated data.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 19:07:09 2006
Return-Path: 
 <hadoop-dev-return-3124-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79932 invoked from network); 15 Aug 2006 19:07:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 19:07:09 -0000
Received: (qmail 20218 invoked by uid 500); 15 Aug 2006 19:07:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20182 invoked by uid 500); 15 Aug 2006 19:07:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20173 invoked by uid 99); 15 Aug 2006 19:07:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 12:07:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 12:07:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E2E507142A7
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 19:04:13 +0000 (GMT)
Message-ID: <14721918.1155668653926.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 12:04:13 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-455) Text class should support the DEL
 character
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Text class should support the DEL character
-------------------------------------------

                 Key: HADOOP-455
                 URL: http://issues.apache.org/jira/browse/HADOOP-455
             Project: Hadoop
          Issue Type: Bug
          Components: io
    Affects Versions: 0.5.0
            Reporter: Hairong Kuang
         Assigned To: Hairong Kuang
             Fix For: 0.6.0


The DEL character (aka 0x7F) is valid UTF-8, but the Text class does not support it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 19:09:11 2006
Return-Path: 
 <hadoop-dev-return-3125-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80342 invoked from network); 15 Aug 2006 19:09:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 19:09:11 -0000
Received: (qmail 25444 invoked by uid 500); 15 Aug 2006 19:09:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25430 invoked by uid 500); 15 Aug 2006 19:09:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25419 invoked by uid 99); 15 Aug 2006 19:09:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 12:09:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 12:09:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C71707142A7
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 19:06:14 +0000 (GMT)
Message-ID: <22630736.1155668774813.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 12:06:14 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-455) Text class should support the DEL
 character
In-Reply-To: <14721918.1155668653926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-455?page=all ]

Hairong Kuang updated HADOOP-455:
---------------------------------

    Attachment: Del.patch

> Text class should support the DEL character
> -------------------------------------------
>
>                 Key: HADOOP-455
>                 URL: http://issues.apache.org/jira/browse/HADOOP-455
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.5.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: Del.patch
>
>
> The DEL character (aka 0x7F) is valid UTF-8, but the Text class does not support it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 19:45:20 2006
Return-Path: 
 <hadoop-dev-return-3128-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97730 invoked from network); 15 Aug 2006 19:45:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 19:45:20 -0000
Received: (qmail 78342 invoked by uid 500); 15 Aug 2006 19:45:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78321 invoked by uid 500); 15 Aug 2006 19:45:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78312 invoked by uid 99); 15 Aug 2006 19:45:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 12:45:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 12:45:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EB0D57142A1
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 19:42:14 +0000 (GMT)
Message-ID: <1960457.1155670934960.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 12:42:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-322?page=comments#action_12428200 ] 
            
Doug Cutting commented on HADOOP-322:
-------------------------------------

This looks good.

One minor nit is that the sleep in the unit test should probably be smaller.  If I change the sleep to 1000ms, then the entire test only takes 37 seconds, 20 seconds longer than the 60 second sleep you have.  I run unit tests a lot and am sensitive to them running slowly.

Also, this should be in a mapred subpackage, since it is mapred-specific stuff.  I'd suggest org.apache.hadoop.mapred.jobcontrol.

Thanks for your patience & persistence!

> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-322
>                 URL: http://issues.apache.org/jira/browse/HADOOP-322
>             Project: Hadoop
>          Issue Type: New Feature
>            Reporter: Runping Qi
>         Assigned To: Runping Qi
>         Attachments: job_control_patch.txt
>
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 19:45:12 2006
Return-Path: 
 <hadoop-dev-return-3126-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97642 invoked from network); 15 Aug 2006 19:45:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 19:45:12 -0000
Received: (qmail 77937 invoked by uid 500); 15 Aug 2006 19:45:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77919 invoked by uid 500); 15 Aug 2006 19:45:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77910 invoked by uid 99); 15 Aug 2006 19:45:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 12:45:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 12:45:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 828137142A7
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 19:42:16 +0000 (GMT)
Message-ID: <1351432.1155670936532.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 12:42:16 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12428201 ] 
            
Sanjay Dahiya commented on HADOOP-239:
--------------------------------------

For format of history file on disk - here is a proposal. 

Since we want the file to be flushed on every write, to survive jobtracker restarts. it makes sense to use a simple record oriented structure in file. Each log statement appends a record in the file. Since there can be multiple jobs running at any time the records can be intermixed in the log file ( unless we use one history file per job ). 
Using one history file per job is also a viable option in which case we can separate log files in different directories for different days and delete old files. 

In both cases following simple file format can be used to log history and parse/display in JSPs. 
<recordType> <key=value> <key=value> .... 

where recordType = {JobInfo, Task, MapAttempt, ReduceTask, ReduceAttempt .... }
and keys will depend on recordType e.g. for JobInfo keys = {jobId, jobName, submitTime, launchTime ... }

e.g. log while job start up may look like 

JobInfo jobId=job_001 jobName=wordCount submitTime=0001
JobInfo jobId=job_001 launchTime=0002
...
JobInfo jobId=job_001 finishTime=0002

We can provide a proxy class JobHistory, which exposes specific methods for logging different log events and takes care for formatting issues at a central place. 

comments ? 


> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 19:45:13 2006
Return-Path: 
 <hadoop-dev-return-3127-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97676 invoked from network); 15 Aug 2006 19:45:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 19:45:13 -0000
Received: (qmail 78127 invoked by uid 500); 15 Aug 2006 19:45:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78112 invoked by uid 500); 15 Aug 2006 19:45:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78103 invoked by uid 99); 15 Aug 2006 19:45:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 12:45:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 12:45:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5DDDB41001E
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 19:42:18 +0000 (GMT)
Message-ID: <24660932.1155670938381.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 12:42:18 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-239) job tracker WI drops jobs after
 24 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-239?page=all ]

Work on HADOOP-239 started by Sanjay Dahiya.

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 19:50:47 2006
Return-Path: 
 <hadoop-dev-return-3129-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99268 invoked from network); 15 Aug 2006 19:50:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 19:50:47 -0000
Received: (qmail 86328 invoked by uid 500); 15 Aug 2006 19:50:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86307 invoked by uid 500); 15 Aug 2006 19:50:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86292 invoked by uid 99); 15 Aug 2006 19:50:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 12:50:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.192.82] (HELO rwcrmhc12.comcast.net) (204.127.192.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 12:50:45 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc12) with ESMTP
          id <20060815195015m12001ae4fe>; Tue, 15 Aug 2006 19:50:15 +0000
Message-ID: <44E22576.1050009@apache.org>
Date: Tue, 15 Aug 2006 12:50:14 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Commented: (HADOOP-451) Add a Split interface
References: <24919314.1155330613896.JavaMail.jira@brutus>
	 <29488921.1155584416514.JavaMail.jira@brutus>
 <1bf79d3e0608141645k59f624bbl411524217f151f6a@mail.gmail.com>
In-Reply-To: <1bf79d3e0608141645k59f624bbl411524217f151f6a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Bryan A. Pendleton wrote:
> Maybe I'm reading the code wrong.
> 
> It looks to me like the FileSplit that gets used by a MapTaskRunner comes
> from the instantiation of a FileSplit in MapTask.java, which 
> deserializes it
> from a stream. In the very least, if MapTasks stay Writable, then that code
> is wrong.

You're right.  That code will have to be changed to use 
ObjectWritable.writeObject() and ObjectWritable.readObject(), so that 
the subclass name is written too.


Doug

From MAILER-DAEMON Tue Aug 15 20:24:12 2006
Return-Path: 
 <hadoop-dev-return-3130-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9958 invoked from network); 15 Aug 2006 20:24:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 20:24:12 -0000
Received: (qmail 50132 invoked by uid 500); 15 Aug 2006 20:24:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49954 invoked by uid 500); 15 Aug 2006 20:24:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49944 invoked by uid 99); 15 Aug 2006 20:24:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 13:24:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 13:24:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E5FA57142A7
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 20:21:14 +0000 (GMT)
Message-ID: <24927836.1155673274939.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 13:21:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-450) Remove the need for users to specify
 the types of the inputs
In-Reply-To: <29045589.1155328154258.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-450?page=all ]

Doug Cutting updated HADOOP-450:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this, with a warning about the incompatible nature of the changes.

Thanks, Owen!

> Remove the need for users to specify the types of the inputs
> ------------------------------------------------------------
>
>                 Key: HADOOP-450
>                 URL: http://issues.apache.org/jira/browse/HADOOP-450
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: no-input-type.patch
>
>
> Currently, the application specifies the types of the input keys and values and the RecordReader checks them for consistency. It would make more sense to have the RecordReader define the types of keys that it will produce. Therefore, I propose that we add two new methods to RecordReader:
> WritableComparable createKey();
> Writable createValue();
> Note that I propose adding them to the RecordReader rather than the InputFormat, so that they can specific to a particular input split.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 20:28:11 2006
Return-Path: 
 <hadoop-dev-return-3131-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11717 invoked from network); 15 Aug 2006 20:28:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 20:28:11 -0000
Received: (qmail 58386 invoked by uid 500); 15 Aug 2006 20:28:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58240 invoked by uid 500); 15 Aug 2006 20:28:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58231 invoked by uid 99); 15 Aug 2006 20:28:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 13:28:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 13:28:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E27BD7142A1
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 20:25:15 +0000 (GMT)
Message-ID: <18795451.1155673515925.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 13:25:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-436) Concluding that the Map task failed
 may not be always right in getMapOutput.jsp
In-Reply-To: <11136023.1155150553947.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-436?page=all ]

Doug Cutting updated HADOOP-436:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Devaraj!

> Concluding that the Map task failed may not be always right in getMapOutput.jsp
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-436
>                 URL: http://issues.apache.org/jira/browse/HADOOP-436
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: getmapout.patch
>
>
> In the getMapOutput.jsp, tracker.mapOutputLost is called irrespective of whether the sender of the map output threw an exception or the receiver died (thereby closing the socket causing the jsp to throw an exception). Invoking the method causes the corresponding map task to fail and causes it to be rescheduled but it may be the case that the problem is at the reciever's end. Need to do a better check of where the exception was thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 21:23:10 2006
Return-Path: 
 <hadoop-dev-return-3132-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26949 invoked from network); 15 Aug 2006 21:23:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:23:10 -0000
Received: (qmail 29849 invoked by uid 500); 15 Aug 2006 21:23:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29663 invoked by uid 500); 15 Aug 2006 21:23:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29654 invoked by uid 99); 15 Aug 2006 21:23:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:23:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:23:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CFCA241001F
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 21:20:14 +0000 (GMT)
Message-ID: <12423423.1155676814848.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 14:20:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-306?page=all ]

Doug Cutting updated HADOOP-306:
--------------------------------

    Status: Open  (was: Patch Available)

Konstantin, since this patch only partially fixes this issue, can you please instead add this patch to a separate issue that this issue depends on?  Thanks!

> Safe mode and name node startup procedures
> ------------------------------------------
>
>                 Key: HADOOP-306
>                 URL: http://issues.apache.org/jira/browse/HADOOP-306
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>         Attachments: FSImageSaveDNInfo.patch
>
>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 21:32:15 2006
Return-Path: 
 <hadoop-dev-return-3133-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29235 invoked from network); 15 Aug 2006 21:32:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:32:15 -0000
Received: (qmail 47281 invoked by uid 500); 15 Aug 2006 21:32:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47106 invoked by uid 500); 15 Aug 2006 21:32:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47097 invoked by uid 99); 15 Aug 2006 21:32:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:32:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:32:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CB03D7142A1
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 21:29:14 +0000 (GMT)
Message-ID: <6668405.1155677354829.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 14:29:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-394) MiniDFSCluster shudown order
In-Reply-To: <28678698.1154025013891.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-394?page=all ]

Doug Cutting resolved HADOOP-394.
---------------------------------

    Fix Version/s: 0.5.0
       Resolution: Fixed

Forgot to resolve this earlier.  Thanks, Konstantin!

> MiniDFSCluster shudown order
> ----------------------------
>
>                 Key: HADOOP-394
>                 URL: http://issues.apache.org/jira/browse/HADOOP-394
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>            Priority: Minor
>             Fix For: 0.5.0
>
>         Attachments: MiniDFSClusterShutdownOrder.patch
>
>
> I propose to reverse the order of shutdown in MiniDFSCluster.
> Currently it shutdowns the name node first and then the data node,
> which causes the data node throwing unnecessary Exceptions in unit test.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 21:34:10 2006
Return-Path: 
 <hadoop-dev-return-3134-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30194 invoked from network); 15 Aug 2006 21:34:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:34:10 -0000
Received: (qmail 50125 invoked by uid 500); 15 Aug 2006 21:34:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50107 invoked by uid 500); 15 Aug 2006 21:34:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50098 invoked by uid 99); 15 Aug 2006 21:34:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:34:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:34:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D0FA741001E
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 21:31:14 +0000 (GMT)
Message-ID: <18218425.1155677474853.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 14:31:14 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-402) TaskTracker should shutdown when it
 receives the VersionMismatch exception.
In-Reply-To: <13440576.1154131035191.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-402?page=all ]

Sameer Paranjpye resolved HADOOP-402.
-------------------------------------

    Resolution: Duplicate

> TaskTracker should shutdown when it receives the VersionMismatch exception.
> ---------------------------------------------------------------------------
>
>                 Key: HADOOP-402
>                 URL: http://issues.apache.org/jira/browse/HADOOP-402
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>             Fix For: 0.6.0
>
>
> Like Datanodes TaskTracker should shutdown when it receives the VersionMismatch exception rather than
> infinitely retrying to re-connect. The result will be the same.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 21:36:10 2006
Return-Path: 
 <hadoop-dev-return-3135-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30410 invoked from network); 15 Aug 2006 21:36:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:36:10 -0000
Received: (qmail 51049 invoked by uid 500); 15 Aug 2006 21:36:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50872 invoked by uid 500); 15 Aug 2006 21:36:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50862 invoked by uid 99); 15 Aug 2006 21:36:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:36:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:36:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6251541001F
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 21:33:15 +0000 (GMT)
Message-ID: <22060266.1155677595400.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 14:33:15 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-281) dfs.FSDirectory.mkdirs can create
 sub-directories of a file!
In-Reply-To: <19818580.1149635189767.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-281?page=all ]

Sameer Paranjpye reassigned HADOOP-281:
---------------------------------------

    Assignee: Wendy Chien

> dfs.FSDirectory.mkdirs can create sub-directories of a file!
> ------------------------------------------------------------
>
>                 Key: HADOOP-281
>                 URL: http://issues.apache.org/jira/browse/HADOOP-281
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.1
>            Reporter: Sameer Paranjpye
>         Assigned To: Wendy Chien
>             Fix For: 0.6.0
>
>         Attachments: addNode.patch, mkdirs.patch, TestDFSMkdirs.java
>
>
> dfs.FSDirectory.mkdirs will merrily adds children to a directory tree node without checking whether it represents a directory. So it is possible to create a subdirectories of a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 21:36:12 2006
Return-Path: 
 <hadoop-dev-return-3136-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30439 invoked from network); 15 Aug 2006 21:36:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:36:12 -0000
Received: (qmail 51168 invoked by uid 500); 15 Aug 2006 21:36:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51065 invoked by uid 500); 15 Aug 2006 21:36:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51056 invoked by uid 99); 15 Aug 2006 21:36:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:36:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:36:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8AB20410021
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 21:33:16 +0000 (GMT)
Message-ID: <11411642.1155677596565.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 14:33:16 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-227?page=all ]

Sameer Paranjpye reassigned HADOOP-227:
---------------------------------------

    Assignee: Konstantin Shvachko

> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 21:38:10 2006
Return-Path: 
 <hadoop-dev-return-3137-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31929 invoked from network); 15 Aug 2006 21:38:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:38:10 -0000
Received: (qmail 55016 invoked by uid 500); 15 Aug 2006 21:38:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54999 invoked by uid 500); 15 Aug 2006 21:38:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54990 invoked by uid 99); 15 Aug 2006 21:38:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:38:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:38:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D28E841001E
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 21:35:14 +0000 (GMT)
Message-ID: <13679768.1155677714860.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 14:35:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-455) Text class should support the DEL
 character
In-Reply-To: <14721918.1155668653926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-455?page=all ]

Doug Cutting resolved HADOOP-455.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Hairong!

> Text class should support the DEL character
> -------------------------------------------
>
>                 Key: HADOOP-455
>                 URL: http://issues.apache.org/jira/browse/HADOOP-455
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.5.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: Del.patch
>
>
> The DEL character (aka 0x7F) is valid UTF-8, but the Text class does not support it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 21:38:11 2006
Return-Path: 
 <hadoop-dev-return-3138-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31964 invoked from network); 15 Aug 2006 21:38:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:38:11 -0000
Received: (qmail 55224 invoked by uid 500); 15 Aug 2006 21:38:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55198 invoked by uid 500); 15 Aug 2006 21:38:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55189 invoked by uid 99); 15 Aug 2006 21:38:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:38:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:38:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0DE8941001F
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 21:35:16 +0000 (GMT)
Message-ID: <8965625.1155677716054.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 14:35:16 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-322?page=all ]

Runping Qi updated HADOOP-322:
------------------------------

    Attachment:     (was: job_control_patch.txt)

> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-322
>                 URL: http://issues.apache.org/jira/browse/HADOOP-322
>             Project: Hadoop
>          Issue Type: New Feature
>            Reporter: Runping Qi
>         Assigned To: Runping Qi
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 21:38:13 2006
Return-Path: 
 <hadoop-dev-return-3139-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32012 invoked from network); 15 Aug 2006 21:38:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:38:13 -0000
Received: (qmail 55431 invoked by uid 500); 15 Aug 2006 21:38:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55408 invoked by uid 500); 15 Aug 2006 21:38:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55399 invoked by uid 99); 15 Aug 2006 21:38:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:38:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:38:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B2055410023
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 21:35:17 +0000 (GMT)
Message-ID: <11309652.1155677717726.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 14:35:17 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-258) Cannot obtain block errors
In-Reply-To: <27132555.1148714249850.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-258?page=3Dall ]

Sameer Paranjpye resolved HADOOP-258.
-------------------------------------

    Resolution: Cannot Reproduce

> Cannot obtain block errors
> --------------------------
>
>                 Key: HADOOP-258
>                 URL: http://issues.apache.org/jira/browse/HADOOP-258
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.3.0
>            Reporter: Owen O'Malley
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.6.0
>
>
> I've been seeing a lot of errors from dfs for the last couple days. The e=
xception that I see is:
> java.io.IOException: Could not obtain block: blk_2867431916903738534 file=
=3D/user/oom/big-rand/part000271 offset=3D0 at org.apache.hadoop.dfs.DFSCli=
ent$DFSInputStream.blockSeekTo(DFSClient.java:532) at org.apache.hadoop.dfs=
.DFSClient$DFSInputStream.read(DFSClient.java:641) at org.apache.hadoop.fs.=
FSDataInputStream$Checker.read(FSDataInputStream.java:83) at org.apache.had=
oop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:158) at =
java.io.BufferedInputStream.fill(BufferedInputStream.java:218) at java.io.B=
ufferedInputStream.read1(BufferedInputStream.java:256) at java.io.BufferedI=
nputStream.read(BufferedInputStream.java:313) at java.io.DataInputStream.re=
adFully(DataInputStream.java:176) at java.io.DataInputStream.readFully(Data=
InputStream.java:152) at org.apache.hadoop.io.SequenceFile$Reader.init(Sequ=
enceFile.java:264) at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFil=
e.java:248) at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:=
238) at org.apache.hadoop.mapred.SequenceFileRecordReader.(SequenceFileReco=
rdReader.java:36) at org.apache.hadoop.mapred.SequenceFileInputFormat.getRe=
cordReader(SequenceFileInputFormat.java:53) at org.apache.hadoop.mapred.Map=
Task.run(MapTask.java:105) at org.apache.hadoop.mapred.TaskTracker$Child.ma=
in(TaskTracker.java:866)
> I haven't had my fingers in that code recently, does it ring any bells fo=
r anyone?

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Tue Aug 15 21:38:14 2006
Return-Path: 
 <hadoop-dev-return-3140-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32056 invoked from network); 15 Aug 2006 21:38:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:38:14 -0000
Received: (qmail 55636 invoked by uid 500); 15 Aug 2006 21:38:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55611 invoked by uid 500); 15 Aug 2006 21:38:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55602 invoked by uid 99); 15 Aug 2006 21:38:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:38:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:38:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 18546410024
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 21:35:18 +0000 (GMT)
Message-ID: <13413300.1155677718097.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 14:35:18 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-456) Checkpointing and logging of data node
 descriptors
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Checkpointing and logging of data node descriptors
--------------------------------------------------

                 Key: HADOOP-456
                 URL: http://issues.apache.org/jira/browse/HADOOP-456
             Project: Hadoop
          Issue Type: New Feature
          Components: dfs
    Affects Versions: 0.5.0
            Reporter: Konstantin Shvachko
         Assigned To: Konstantin Shvachko


This is a partial implementation of the DFS cluster startup process laid out in HADOOP-306.
The description of the patch is here:
http://issues.apache.org/jira/browse/HADOOP-306#action_12427634


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 21:42:16 2006
Return-Path: 
 <hadoop-dev-return-3142-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32917 invoked from network); 15 Aug 2006 21:42:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:42:16 -0000
Received: (qmail 60819 invoked by uid 500); 15 Aug 2006 21:42:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60788 invoked by uid 500); 15 Aug 2006 21:42:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60611 invoked by uid 99); 15 Aug 2006 21:42:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:42:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:42:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD8ED7142A1
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 21:39:14 +0000 (GMT)
Message-ID: <1531640.1155677954839.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 14:39:14 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-322?page=all ]

Runping Qi updated HADOOP-322:
------------------------------

               Status: Patch Available  (was: Open)
        Fix Version/s: 0.6.0
    Affects Version/s: 0.5.0


the sleep in the unit test is changed to 5 seconds from 60 seconds.
Also, UTF8 is replaced with Text.

The code is now in package org.apache.hadoop.mapred.jobcontrol.


> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-322
>                 URL: http://issues.apache.org/jira/browse/HADOOP-322
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.5.0
>            Reporter: Runping Qi
>         Assigned To: Runping Qi
>             Fix For: 0.6.0
>
>         Attachments: jobcontrol_patch.txt
>
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 21:42:15 2006
Return-Path: 
 <hadoop-dev-return-3141-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32885 invoked from network); 15 Aug 2006 21:42:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:42:15 -0000
Received: (qmail 60707 invoked by uid 500); 15 Aug 2006 21:42:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60370 invoked by uid 500); 15 Aug 2006 21:42:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60127 invoked by uid 99); 15 Aug 2006 21:42:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:42:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:42:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD00741001E
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 21:39:15 +0000 (GMT)
Message-ID: <21755422.1155677955837.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 14:39:15 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-322?page=all ]

Runping Qi updated HADOOP-322:
------------------------------

    Attachment: jobcontrol_patch.txt

> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-322
>                 URL: http://issues.apache.org/jira/browse/HADOOP-322
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.5.0
>            Reporter: Runping Qi
>         Assigned To: Runping Qi
>             Fix For: 0.6.0
>
>         Attachments: jobcontrol_patch.txt
>
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 21:44:15 2006
Return-Path: 
 <hadoop-dev-return-3144-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33501 invoked from network); 15 Aug 2006 21:44:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:44:15 -0000
Received: (qmail 64266 invoked by uid 500); 15 Aug 2006 21:44:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64244 invoked by uid 500); 15 Aug 2006 21:44:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64235 invoked by uid 99); 15 Aug 2006 21:44:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:44:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:44:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CBD8641001E
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 21:41:14 +0000 (GMT)
Message-ID: <27562806.1155678074832.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 14:41:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-456) Checkpointing and logging of data node
 descriptors
In-Reply-To: <13413300.1155677718097.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-456?page=all ]

Konstantin Shvachko updated HADOOP-456:
---------------------------------------

    Attachment: FSImageSaveDNInfo.patch

I moved the patch here from HADOOP-306

> Checkpointing and logging of data node descriptors
> --------------------------------------------------
>
>                 Key: HADOOP-456
>                 URL: http://issues.apache.org/jira/browse/HADOOP-456
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: FSImageSaveDNInfo.patch
>
>
> This is a partial implementation of the DFS cluster startup process laid out in HADOOP-306.
> The description of the patch is here:
> http://issues.apache.org/jira/browse/HADOOP-306#action_12427634

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 21:44:11 2006
Return-Path: 
 <hadoop-dev-return-3143-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33365 invoked from network); 15 Aug 2006 21:44:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:44:11 -0000
Received: (qmail 63540 invoked by uid 500); 15 Aug 2006 21:44:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63364 invoked by uid 500); 15 Aug 2006 21:44:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63355 invoked by uid 99); 15 Aug 2006 21:44:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:44:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:44:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD548410020
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 21:41:15 +0000 (GMT)
Message-ID: <16785030.1155678075838.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 14:41:15 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-306?page=all ]

Konstantin Shvachko updated HADOOP-306:
---------------------------------------

    Attachment:     (was: FSImageSaveDNInfo.patch)

> Safe mode and name node startup procedures
> ------------------------------------------
>
>                 Key: HADOOP-306
>                 URL: http://issues.apache.org/jira/browse/HADOOP-306
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 21:44:17 2006
Return-Path: 
 <hadoop-dev-return-3145-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33532 invoked from network); 15 Aug 2006 21:44:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:44:17 -0000
Received: (qmail 64459 invoked by uid 500); 15 Aug 2006 21:44:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64437 invoked by uid 500); 15 Aug 2006 21:44:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64427 invoked by uid 99); 15 Aug 2006 21:44:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:44:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:44:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6B55E410023
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 21:41:17 +0000 (GMT)
Message-ID: <25160609.1155678077437.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 14:41:17 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-456) Checkpointing and logging of data node
 descriptors
In-Reply-To: <13413300.1155677718097.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-456?page=all ]

Konstantin Shvachko updated HADOOP-456:
---------------------------------------

    Status: Patch Available  (was: Open)

> Checkpointing and logging of data node descriptors
> --------------------------------------------------
>
>                 Key: HADOOP-456
>                 URL: http://issues.apache.org/jira/browse/HADOOP-456
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: FSImageSaveDNInfo.patch
>
>
> This is a partial implementation of the DFS cluster startup process laid out in HADOOP-306.
> The description of the patch is here:
> http://issues.apache.org/jira/browse/HADOOP-306#action_12427634

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 21:52:12 2006
Return-Path: 
 <hadoop-dev-return-3146-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36103 invoked from network); 15 Aug 2006 21:52:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:52:12 -0000
Received: (qmail 77039 invoked by uid 500); 15 Aug 2006 21:52:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77016 invoked by uid 500); 15 Aug 2006 21:52:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77004 invoked by uid 99); 15 Aug 2006 21:52:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:52:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:52:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 04E74410020
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 21:49:16 +0000 (GMT)
Message-ID: <12146851.1155678556017.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 14:49:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-456) Checkpointing and logging of data node
 descriptors
In-Reply-To: <13413300.1155677718097.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-456?page=all ]

Doug Cutting updated HADOOP-456:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.6.0
       Resolution: Fixed

I just committed this.  Thanks, Konstantin!

> Checkpointing and logging of data node descriptors
> --------------------------------------------------
>
>                 Key: HADOOP-456
>                 URL: http://issues.apache.org/jira/browse/HADOOP-456
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>         Attachments: FSImageSaveDNInfo.patch
>
>
> This is a partial implementation of the DFS cluster startup process laid out in HADOOP-306.
> The description of the patch is here:
> http://issues.apache.org/jira/browse/HADOOP-306#action_12427634

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 21:58:11 2006
Return-Path: 
 <hadoop-dev-return-3147-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37814 invoked from network); 15 Aug 2006 21:58:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:58:11 -0000
Received: (qmail 86513 invoked by uid 500); 15 Aug 2006 21:58:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86491 invoked by uid 500); 15 Aug 2006 21:58:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86482 invoked by uid 99); 15 Aug 2006 21:58:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:58:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:58:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 63AA27142D3
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 21:55:16 +0000 (GMT)
Message-ID: <32508484.1155678916405.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 14:55:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-322) Need a job control utility to submit
 and monitor a group of jobs which have DAG dependency
In-Reply-To: <4931825.1151126129857.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-322?page=all ]

Doug Cutting updated HADOOP-322:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks Runping!

I also added a package.html.

> Need a job control utility to submit and monitor a group of jobs which have DAG dependency
> ------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-322
>                 URL: http://issues.apache.org/jira/browse/HADOOP-322
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.5.0
>            Reporter: Runping Qi
>         Assigned To: Runping Qi
>             Fix For: 0.6.0
>
>         Attachments: jobcontrol_patch.txt
>
>
> In my applications, some jobs depend on the outputs of other jobs. Therefore, job dependency forms a DAG. A job is ready to run if and only if it does not have any dependency or all the jobs it depends are finished successfully. To help schedule and monitor a group of jobs like that, I am thinking of implementing a utility that:
> 	- accept jobs with dependency specification
>       - monitor job status
>       - submit jobs when they are ready
> With such a utility, the application can construct its jobs, specify their dependency and then hand the jobs to the utility class. The utility takes care of the details of job submission.
> I'll post my design skech for comments/suggestion.
> Eventually, I'll submit a patch for the utility.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 23:04:12 2006
Return-Path: 
 <hadoop-dev-return-3148-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59408 invoked from network); 15 Aug 2006 23:04:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 23:04:12 -0000
Received: (qmail 84461 invoked by uid 500); 15 Aug 2006 23:04:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84442 invoked by uid 500); 15 Aug 2006 23:04:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84433 invoked by uid 99); 15 Aug 2006 23:04:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:04:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:04:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9113E410021
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 23:01:16 +0000 (GMT)
Message-ID: <14941383.1155682876591.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 16:01:16 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-439) Streaming does not work for text
 data if the records don't fit in a short UTF8 [2^16/3 characters]
In-Reply-To: <8502499.1155174613900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-439?page=comments#action_12428258 ] 
            
Sameer Paranjpye commented on HADOOP-439:
-----------------------------------------

This ought to be resolvable by replacing UTF8 by the new Text class. Streaming should use Text instead of UTF8 to represent strings.

> Streaming does not work for text data if the records don't fit in a short UTF8 [2^16/3 characters]
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-439
>                 URL: http://issues.apache.org/jira/browse/HADOOP-439
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Dick King
>            Priority: Critical
>             Fix For: 0.6.0
>
>
> The streaming code internally reads the input data into a UTF8 .  This causes truncated data to be shipped to the mapper when the input exceeds about 21000 characters, with no notice to the user except possibly in individual tasks' machines' logs, which people would not normally read for apparently successful jobs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 23:04:14 2006
Return-Path: 
 <hadoop-dev-return-3149-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59447 invoked from network); 15 Aug 2006 23:04:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 23:04:14 -0000
Received: (qmail 84758 invoked by uid 500); 15 Aug 2006 23:04:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84655 invoked by uid 500); 15 Aug 2006 23:04:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84646 invoked by uid 99); 15 Aug 2006 23:04:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:04:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:04:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 21F82410023
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 23:01:18 +0000 (GMT)
Message-ID: <24336669.1155682878136.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 16:01:18 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-439) Streaming does not work for text data
 if the records don't fit in a short UTF8 [2^16/3 characters]
In-Reply-To: <8502499.1155174613900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-439?page=all ]

Sameer Paranjpye reassigned HADOOP-439:
---------------------------------------

    Assignee: Michel Tourn

> Streaming does not work for text data if the records don't fit in a short UTF8 [2^16/3 characters]
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-439
>                 URL: http://issues.apache.org/jira/browse/HADOOP-439
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Dick King
>         Assigned To: Michel Tourn
>            Priority: Critical
>             Fix For: 0.6.0
>
>
> The streaming code internally reads the input data into a UTF8 .  This causes truncated data to be shipped to the mapper when the input exceeds about 21000 characters, with no notice to the user except possibly in individual tasks' machines' logs, which people would not normally read for apparently successful jobs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 23:04:30 2006
Return-Path: 
 <hadoop-dev-return-3150-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59993 invoked from network); 15 Aug 2006 23:04:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 23:04:30 -0000
Received: (qmail 85676 invoked by uid 500); 15 Aug 2006 23:04:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85657 invoked by uid 500); 15 Aug 2006 23:04:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85642 invoked by uid 99); 15 Aug 2006 23:04:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:04:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:04:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C13E141001E
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 23:01:19 +0000 (GMT)
Message-ID: <5706393.1155682879789.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 16:01:19 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-439) Streaming does not work for text data
 if the records don't fit in a short UTF8 [2^16/3 characters]
In-Reply-To: <8502499.1155174613900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-439?page=all ]

Sameer Paranjpye updated HADOOP-439:
------------------------------------

        Fix Version/s: 0.6.0
    Affects Version/s: 0.5.0

> Streaming does not work for text data if the records don't fit in a short UTF8 [2^16/3 characters]
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-439
>                 URL: http://issues.apache.org/jira/browse/HADOOP-439
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Dick King
>         Assigned To: Michel Tourn
>            Priority: Critical
>             Fix For: 0.6.0
>
>
> The streaming code internally reads the input data into a UTF8 .  This causes truncated data to be shipped to the mapper when the input exceeds about 21000 characters, with no notice to the user except possibly in individual tasks' machines' logs, which people would not normally read for apparently successful jobs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 23:32:10 2006
Return-Path: 
 <hadoop-dev-return-3151-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68709 invoked from network); 15 Aug 2006 23:32:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 23:32:10 -0000
Received: (qmail 24871 invoked by uid 500); 15 Aug 2006 23:32:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24850 invoked by uid 500); 15 Aug 2006 23:32:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24841 invoked by uid 99); 15 Aug 2006 23:32:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:32:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:32:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CB3147142A7
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 23:29:14 +0000 (GMT)
Message-ID: <17364536.1155684554829.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 16:29:14 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-343) In case of dead task tracker, the
 copy mapouts try copying all mapoutputs from this tasktracker
In-Reply-To: <21351816.1152122969991.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-343?page=comments#action_12428260 ] 
            
Sameer Paranjpye commented on HADOOP-343:
-----------------------------------------

I think this needs further attention. The patch is probably out of date at this point, but the problem is real. I think this may also be responsible for the 'long pause' at the end of the shuffle.

If a tasktracker fails, it's map outputs are lost. However, the other tasktrackers are unaware of this. Towards the end of the shuffle they have all map output locations cached and they keep trying to pull data from the lost tasktracker, one file at a time. Every one of these file transfers fails, each failed transfer also causes the tasktrackers to back off from pulling their remaining outputs. The cumulative effect of all the backoffs is the long pause.

> In case of dead task tracker, the copy mapouts try copying all mapoutputs from this tasktracker
> -----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-343
>                 URL: http://issues.apache.org/jira/browse/HADOOP-343
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>         Attachments: bugfix.patch
>
>
> In case of a dead task tracker, the reduces which do not have the updated map out locations try copygin files from this node and since there are failures on copying, this leads to backoff and slowing down of the copy pahse.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 23:34:10 2006
Return-Path: 
 <hadoop-dev-return-3152-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69046 invoked from network); 15 Aug 2006 23:34:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 23:34:10 -0000
Received: (qmail 26469 invoked by uid 500); 15 Aug 2006 23:34:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26298 invoked by uid 500); 15 Aug 2006 23:34:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26289 invoked by uid 99); 15 Aug 2006 23:34:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:34:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:34:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CBBF67142A1
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 23:31:14 +0000 (GMT)
Message-ID: <6315733.1155684674832.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 16:31:14 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-343) In case of dead task tracker, the copy
 mapouts try copying all mapoutputs from this tasktracker
In-Reply-To: <21351816.1152122969991.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-343?page=all ]

Sameer Paranjpye updated HADOOP-343:
------------------------------------

    Fix Version/s: 0.6.0

> In case of dead task tracker, the copy mapouts try copying all mapoutputs from this tasktracker
> -----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-343
>                 URL: http://issues.apache.org/jira/browse/HADOOP-343
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>             Fix For: 0.6.0
>
>         Attachments: bugfix.patch
>
>
> In case of a dead task tracker, the reduces which do not have the updated map out locations try copygin files from this node and since there are failures on copying, this leads to backoff and slowing down of the copy pahse.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 23:34:11 2006
Return-Path: 
 <hadoop-dev-return-3153-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69086 invoked from network); 15 Aug 2006 23:34:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 23:34:11 -0000
Received: (qmail 26518 invoked by uid 500); 15 Aug 2006 23:34:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26491 invoked by uid 500); 15 Aug 2006 23:34:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26482 invoked by uid 99); 15 Aug 2006 23:34:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:34:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:34:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CE9987142CF
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 23:31:15 +0000 (GMT)
Message-ID: <31140768.1155684675843.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 16:31:15 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-291) Hadoop Log Archiver/Analyzer utility
In-Reply-To: <10733487.1149763289866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-291?page=all ]

Sameer Paranjpye updated HADOOP-291:
------------------------------------

    Fix Version/s: 0.6.0

> Hadoop Log Archiver/Analyzer utility
> ------------------------------------
>
>                 Key: HADOOP-291
>                 URL: http://issues.apache.org/jira/browse/HADOOP-291
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: util
>            Reporter: Arun C Murthy
>             Fix For: 0.6.0
>
>
> Overview of the log archiver/analyzer utility...
> 1. Input
>   The tool takes as input a list of directory URLs, each url could also we associated with a file-pattern to specify what pattern of files in that directory are to be used.
>   e.g. http://g1015:50030/logs/hadoop-sameer-jobtracker-*
>          file:///export/crawlspace/sanjay/hadoop/trunk/run/logs/haddop-sanjay-namenode-* (local disk on the machine on which the job was submitted)
> 2. The tool supports 2 main functions:
>   a) Archival
>     Archive the logs in the DFS in the following hierarchy:
>    /users/<username>/log-archive/YYYY/mm/dd/HHMMSS.log by default 
>    Or a user-specified directory and then: 
>    <input-dir>/YYYY/mm/dd/HHMMSS.log
>   b) Processing with simple sort/grep primitives
>     Archive the logs as above and then grep for lines with given pattern (e.g. INFO) and then sort with spec e.g. <logger><level><date>. (Note: This is proposed with current log4j based logging in mind... do we need anything more generic?). The sort/grep specs are user-provided; along with directory URLs.
> 3. Thoughts on implementation...
>   a) Archival
>     Current idea is to put a .jsp page (src/webapps) on each of the nodes; which then does a *copyFromLocal* of the log-file into the DFS. The jobtracker will fire n map-tasks which only hit the jsp page as per the directory URLs. The reduce-task is a no-op and only collects statistics on failures (if any).
>   b) Processing with sort/grep
>     Here, the tool first archives the files as above and then another set of map-reduce tasks will do the sort/grep on the files in DFS with given specs.
>                                                                                           - * - * - 
>  Suggestions/corrections welcome...
> thanks,
> Arun

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 23:36:12 2006
Return-Path: 
 <hadoop-dev-return-3154-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69564 invoked from network); 15 Aug 2006 23:36:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 23:36:12 -0000
Received: (qmail 29914 invoked by uid 500); 15 Aug 2006 23:36:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29733 invoked by uid 500); 15 Aug 2006 23:36:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29724 invoked by uid 99); 15 Aug 2006 23:36:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:36:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:36:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E8F617142CF
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 23:33:16 +0000 (GMT)
Message-ID: <6233381.1155684796951.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 16:33:16 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-419) libdfs doesn't work with application
 threads
In-Reply-To: <7601484.1154547193903.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-419?page=all ]

Sameer Paranjpye reassigned HADOOP-419:
---------------------------------------

    Assignee: Milind Bhandarkar

> libdfs doesn't work with application threads
> --------------------------------------------
>
>                 Key: HADOOP-419
>                 URL: http://issues.apache.org/jira/browse/HADOOP-419
>             Project: Hadoop
>          Issue Type: Bug
>          Components: conf
>            Reporter: Christian Kunz
>         Assigned To: Milind Bhandarkar
>
> Using libdfs from C++ using threads I get a null pointer for the ThreadClassLoader, which throws an exception.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 23:38:13 2006
Return-Path: 
 <hadoop-dev-return-3155-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70137 invoked from network); 15 Aug 2006 23:38:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 23:38:13 -0000
Received: (qmail 33213 invoked by uid 500); 15 Aug 2006 23:38:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33181 invoked by uid 500); 15 Aug 2006 23:38:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33157 invoked by uid 99); 15 Aug 2006 23:38:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:38:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:38:10 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0C23D7142CF
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 23:35:16 +0000 (GMT)
Message-ID: <13857317.1155684916047.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 16:35:16 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-419) libdfs doesn't work with application
 threads
In-Reply-To: <7601484.1154547193903.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-419?page=all ]

Sameer Paranjpye updated HADOOP-419:
------------------------------------

          Component/s: contrib/streaming
                           (was: conf)
        Fix Version/s: 0.6.0
    Affects Version/s: 0.5.0

> libdfs doesn't work with application threads
> --------------------------------------------
>
>                 Key: HADOOP-419
>                 URL: http://issues.apache.org/jira/browse/HADOOP-419
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.6.0
>
>
> Using libdfs from C++ using threads I get a null pointer for the ThreadClassLoader, which throws an exception.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 23:38:25 2006
Return-Path: 
 <hadoop-dev-return-3156-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70181 invoked from network); 15 Aug 2006 23:38:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 23:38:25 -0000
Received: (qmail 33495 invoked by uid 500); 15 Aug 2006 23:38:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33467 invoked by uid 500); 15 Aug 2006 23:38:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33452 invoked by uid 99); 15 Aug 2006 23:38:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:38:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:38:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 126237142D9
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 23:35:19 +0000 (GMT)
Message-ID: <32339044.1155684919073.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 16:35:19 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-423) file paths are not normalized
In-Reply-To: <13847288.1154636773936.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-423?page=all ]

Sameer Paranjpye updated HADOOP-423:
------------------------------------

      Component/s: dfs
                       (was: fs)
    Fix Version/s: 0.6.0
         Assignee: Wendy Chien

> file paths are not normalized
> -----------------------------
>
>                 Key: HADOOP-423
>                 URL: http://issues.apache.org/jira/browse/HADOOP-423
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Wendy Chien
>             Fix For: 0.6.0
>
>
> Paths containing  '.' or '..' are not normalized -- the corresponding directories actually seem to be created. This is inconsistent and unexpected behavior, and  is particularly painful when running from a working directory, using relative paths that start with ...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 15 23:40:10 2006
Return-Path: 
 <hadoop-dev-return-3157-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70657 invoked from network); 15 Aug 2006 23:40:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 23:40:10 -0000
Received: (qmail 38237 invoked by uid 500); 15 Aug 2006 23:40:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38211 invoked by uid 500); 15 Aug 2006 23:40:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38202 invoked by uid 99); 15 Aug 2006 23:40:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:40:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 16:40:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C99F37142A7
	for <hadoop-dev@lucene.apache.org>; Tue, 15 Aug 2006 23:37:14 +0000 (GMT)
Message-ID: <29816382.1155685034823.JavaMail.jira@brutus>
Date: Tue, 15 Aug 2006 16:37:14 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-373) Some calls to mkdirs do not check
 return value
In-Reply-To: <19322325.1153351633892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-373?page=all ]

Sameer Paranjpye updated HADOOP-373:
------------------------------------

        Fix Version/s: 0.6.0
    Affects Version/s: 0.5.0

> Some calls to mkdirs do not check return value
> ----------------------------------------------
>
>                 Key: HADOOP-373
>                 URL: http://issues.apache.org/jira/browse/HADOOP-373
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>             Fix For: 0.6.0
>
>         Attachments: hadoop-373.patch
>
>
> Some calls to mkdirs do not check if mkdirs failed.  
> Arun noticed this while looking at HADOOP-281.  Since this issue is actually a separate issue from the mkdirs implementation issue of HADOOP-281, I created a new bug for it.   

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 16 10:43:13 2006
Return-Path: 
 <hadoop-dev-return-3158-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78794 invoked from network); 16 Aug 2006 10:43:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 10:43:13 -0000
Received: (qmail 78814 invoked by uid 500); 16 Aug 2006 10:43:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78792 invoked by uid 500); 16 Aug 2006 10:43:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78783 invoked by uid 99); 16 Aug 2006 10:43:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 03:43:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 03:43:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C9B9E7141F2
	for <hadoop-dev@lucene.apache.org>; Wed, 16 Aug 2006 10:40:16 +0000 (GMT)
Message-ID: <21729894.1155724816823.JavaMail.jira@brutus>
Date: Wed, 16 Aug 2006 03:40:16 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-54?page=all ]

Arun C Murthy updated HADOOP-54:
--------------------------------

    Attachment: SequenceFilesII.patch

Owen, appreciate your time... 

Responses inline:

> 1. The Writer class should have the unneeded compression stuff taken out.
> 3. The sync bytes in the block compressed writer should be written before the block rather than after (except for the first block). The goal is to get them between blocks, you don't really want one at the end (or beginning) of the file.
> 4. The CompressedBytes class should be private.
> 5. The private Writer constructor on line 307 is not used.
> 6. The static field VERSION_4 should be renamed to BLOCK_COMPRESS_VERSION and it should be marked final.
> 8. We really need to move to the Text class instead of UTF8. This has a couple of changes:
  A. in writeFileHeader, the "new UTF8(...).write(out);" should be "Text.writeString(out, ...);"
  B. in init, reading the class names strings is the reverse: keyClass = Text.readString(in);
  C. we have to support the UTF8 string encodings for old file versions, so you'll need to switch behavior based on the version we are reading.

All done and incorporated into latest patch.

> 2. The Writer.compressed and blockCompressed fields should be taken out and replaced with methods.

Not clear - let's discuss this.

> 7. I'd rename the "byte[] version" to "syncBlock" and make a new field "byte version" that will contain just the last byte, which is the file version.

I don't agree about renaming it to 'syncBlock' since it isn't a sync block. I don't mind doing the "byte version" field, but the advantages aren't very clear.

_*_*_

I've attached a new patch (SequenceFilesII.patch) which incorporates Owen's suggestions and also fixes the fallout of the latest SequenceFile in other parts of MR universe.

Also, I've a first cut of the SequenceFile Formats' documentation up:
http://wiki.apache.org/lucene-hadoop/SequenceFile


> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 16 10:46:22 2006
Return-Path: 
 <hadoop-dev-return-3159-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79289 invoked from network); 16 Aug 2006 10:46:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 10:46:22 -0000
Received: (qmail 81450 invoked by uid 500); 16 Aug 2006 10:46:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81418 invoked by uid 500); 16 Aug 2006 10:46:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81409 invoked by uid 99); 16 Aug 2006 10:46:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 03:46:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 03:46:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1A0FE7142A7
	for <hadoop-dev@lucene.apache.org>; Wed, 16 Aug 2006 10:43:16 +0000 (GMT)
Message-ID: <13224331.1155724996104.JavaMail.jira@brutus>
Date: Wed, 16 Aug 2006 03:43:16 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12428366 ] 
            
Arun C Murthy commented on HADOOP-54:
-------------------------------------

Oops... 

> 1. The Writer class should have the unneeded compression stuff taken out. 

I've kept this around for this version (deprecated) to ensure existing applications don't break; I plan to get rid of this one hadoop release later.


> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 17 00:11:18 2006
Return-Path: 
 <hadoop-dev-return-3160-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6571 invoked from network); 17 Aug 2006 00:11:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 00:11:18 -0000
Received: (qmail 99130 invoked by uid 500); 17 Aug 2006 00:11:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99102 invoked by uid 500); 17 Aug 2006 00:11:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99093 invoked by uid 99); 17 Aug 2006 00:11:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 17:11:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 17:11:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5C735714293
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 00:08:15 +0000 (GMT)
Message-ID: <17808680.1155773295376.JavaMail.jira@brutus>
Date: Wed, 16 Aug 2006 17:08:15 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-421) replace String in hadoop record io
 with the new Text class
In-Reply-To: <2032099.1154550733971.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-421?page=all ]

Milind Bhandarkar updated HADOOP-421:
-------------------------------------

    Attachment: recordio.patch

Attached patch that replaces String with Text in hadoop-record I/O. Also changes xml-encoding of strings. Earlier it used url encoding to encode and decode strings. Now it uses xml 1.0 compliant character entities.

> replace String in hadoop record io with the new Text class
> ----------------------------------------------------------
>
>                 Key: HADOOP-421
>                 URL: http://issues.apache.org/jira/browse/HADOOP-421
>             Project: Hadoop
>          Issue Type: Bug
>          Components: record
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.6.0
>
>         Attachments: recordio.patch
>
>
> The record io in Java is currently using String and should be using the new Text class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 17 10:57:14 2006
Return-Path: 
 <hadoop-dev-return-3161-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64611 invoked from network); 17 Aug 2006 10:57:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 10:57:14 -0000
Received: (qmail 28921 invoked by uid 500); 17 Aug 2006 10:57:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28900 invoked by uid 500); 17 Aug 2006 10:57:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28891 invoked by uid 99); 17 Aug 2006 10:57:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 03:57:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 03:57:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F1DAD714204
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 10:54:15 +0000 (GMT)
Message-ID: <10459089.1155812055987.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 03:54:15 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-54?page=all ]

Arun C Murthy updated HADOOP-54:
--------------------------------

    Attachment: SequenceFiles.final.patch

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFiles.final.patch, SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 17 10:57:15 2006
Return-Path: 
 <hadoop-dev-return-3162-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64657 invoked from network); 17 Aug 2006 10:57:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 10:57:15 -0000
Received: (qmail 29126 invoked by uid 500); 17 Aug 2006 10:57:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29094 invoked by uid 500); 17 Aug 2006 10:57:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29085 invoked by uid 99); 17 Aug 2006 10:57:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 03:57:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 03:57:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2E89A7142C7
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 10:54:18 +0000 (GMT)
Message-ID: <503307.1155812058188.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 03:54:18 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-54?page=all ]

Arun C Murthy updated HADOOP-54:
--------------------------------

    Status: Patch Available  (was: Open)

Please find SequenceFile.final.patch which incorporates all of Owen's feedback...

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFiles.final.patch, SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 17 10:59:12 2006
Return-Path: 
 <hadoop-dev-return-3163-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65759 invoked from network); 17 Aug 2006 10:59:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 10:59:12 -0000
Received: (qmail 30067 invoked by uid 500); 17 Aug 2006 10:59:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30039 invoked by uid 500); 17 Aug 2006 10:59:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30030 invoked by uid 99); 17 Aug 2006 10:59:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 03:59:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 03:59:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C7CC9714204
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 10:56:14 +0000 (GMT)
Message-ID: <1146819.1155812174815.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 03:56:14 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-441) SequenceFile should support
 'custom compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-441?page=all ]

Work on HADOOP-441 started by Arun C Murthy.

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Also 'bmdiff' seems a good candidate for adding support for. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.
> Looks like there isn't a java library for bmdiff (I'd love to be corrected on this)... thoughts on how to go about this? A JNI wrapper on top of a C api? If so how difficult does hadoop-dev think it is to implement a input/output stream on top of this? Alternatives?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 17 11:12:13 2006
Return-Path: 
 <hadoop-dev-return-3164-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73438 invoked from network); 17 Aug 2006 11:12:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 11:12:13 -0000
Received: (qmail 49373 invoked by uid 500); 17 Aug 2006 11:12:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49353 invoked by uid 500); 17 Aug 2006 11:12:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49343 invoked by uid 99); 17 Aug 2006 11:12:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 04:12:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 04:12:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CC210714204
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 11:09:14 +0000 (GMT)
Message-ID: <9965862.1155812954833.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 04:09:14 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-441?page=all ]

Arun C Murthy updated HADOOP-441:
---------------------------------

    Description: 
SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 

Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.

The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.


  was:
SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 

Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Also 'bmdiff' seems a good candidate for adding support for. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.

The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

Looks like there isn't a java library for bmdiff (I'd love to be corrected on this)... thoughts on how to go about this? A JNI wrapper on top of a C api? If so how difficult does hadoop-dev think it is to implement a input/output stream on top of this? Alternatives?


> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 17 14:47:22 2006
Return-Path: 
 <hadoop-dev-return-3165-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56178 invoked from network); 17 Aug 2006 14:47:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 14:47:22 -0000
Received: (qmail 24716 invoked by uid 500); 17 Aug 2006 14:47:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24661 invoked by uid 500); 17 Aug 2006 14:47:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24581 invoked by uid 99); 17 Aug 2006 14:47:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 07:47:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 07:47:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2C5A77142D3
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 14:44:17 +0000 (GMT)
Message-ID: <3617793.1155825857179.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 07:44:17 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-457) Unable to create file in dfs in code
 run on machine not in the cluster.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Unable to create file in dfs in code run on machine not in the cluster.
-----------------------------------------------------------------------

                 Key: HADOOP-457
                 URL: http://issues.apache.org/jira/browse/HADOOP-457
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.5.0
            Reporter: Johan Oskarson


I've got a tiny hadoop cluster and one machine that's not in the cluster that rsync the latest version off the namenode/jobtracker machine. The machine that's not in the cluster is then responsible for starting a few jobs here and there.

However, the latest trunk is unable to create files in the dfs from my code.
I'm using a simple new OutputStreamWriter(fs.create(file))); and the file creation looks like it's going ok but then this gets thrown:

org.apache.hadoop.ipc.RemoteException: java.io.IOException: failed to create file /user/hadoop/submissions/1150000000/1152000000/1152440000/.1155824015.negsub.crc on client "servernotincluster" because target-length is 0, below MIN_REPLICATION (1)
        at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:410)
        at org.apache.hadoop.dfs.NameNode.create(NameNode.java:202)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:332)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:468)

        at org.apache.hadoop.ipc.Client$Connection.run(Client.java:159)


If I add that machine to the conf/slaves it works fine. Note that it's trying to create that file on the server that's not in the cluster.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 17 17:12:05 2006
Return-Path: 
 <hadoop-dev-return-3168-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11636 invoked from network); 17 Aug 2006 17:12:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 17:12:05 -0000
Received: (qmail 27642 invoked by uid 500); 17 Aug 2006 17:12:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27462 invoked by uid 500); 17 Aug 2006 17:12:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Delivered-To: moderator for hadoop-dev@lucene.apache.org
Received: (qmail 83986 invoked by uid 99); 17 Aug 2006 16:00:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Mime-Version: 1.0 (Apple Message framework v752.2)
To: hadoop-dev@lucene.apache.org
Message-Id: <7658D373-3D87-4B76-AB70-445638AD60B6@101tec.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-1--717926455
From: Marko Bauhardt <mb@101tec.com>
Subject: IntWritable.Comparator
Date: Thu, 17 Aug 2006 18:00:16 +0200
X-Mailer: Apple Mail (2.752.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-1--717926455
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Hi developers,
i had wrote a mapred job with  OutputKeyClass IntWritable. But the  
keys are not not correct sorted in the output file. I look at the  
code from the Intwritable.Comparator and i am confused.

Currently the compare-method returns:
return thisValue - thatValue;

But what is, if "thisValue" has the value Integer.MIN_VALUE+1 and the  
"thatValue" has the value 2. The result of the method are return  
2147483647. In that case the compare method says that "thisValue" is  
greater than "thatValue".

The method should be return like that:
thisValue < thatValue ? -1 : thisValue == thatValue ? 0 : 1;


Or overlook i something?

Regards,
Marko


--Apple-Mail-1--717926455--

From MAILER-DAEMON Thu Aug 17 16:02:37 2006
Return-Path: 
 <hadoop-dev-return-3166-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86310 invoked from network); 17 Aug 2006 16:02:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 16:02:37 -0000
Received: (qmail 88804 invoked by uid 500); 17 Aug 2006 16:02:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88650 invoked by uid 500); 17 Aug 2006 16:02:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88641 invoked by uid 99); 17 Aug 2006 16:02:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 09:02:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.64.182.137] (HELO mslinux.media-style.com) (80.64.182.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 09:02:34 -0700
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id D535814483E
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 18:02:12 +0200 (CEST)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 17367-02 for <hadoop-dev@lucene.apache.org>;
	Thu, 17 Aug 2006 18:02:12 +0200 (CEST)
Received: from [192.168.200.38] (unknown [192.168.200.38])
	by mslinux.media-style.com (Postfix) with ESMTP id 9C8C5144838
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 18:02:12 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.2)
To: hadoop-dev@lucene.apache.org
Message-Id: <602CEEA0-F743-4204-B9EE-40E37A4C123A@media-style.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-2--717810034
From: Marko Bauhardt <mb@media-style.com>
Subject: IntWritable.Comparator
Date: Thu, 17 Aug 2006 18:02:12 +0200
X-Mailer: Apple Mail (2.752.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-2--717810034
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Hi developers,
i had wrote a mapred job with  OutputKeyClass IntWritable. But the  
keys are not not correct sorted in the output file. I look at the  
code from the Intwritable.Comparator and i am confused.

Currently the compare-method returns:
return thisValue - thatValue;

But what is, if "thisValue" has the value Integer.MIN_VALUE+1 and the  
"thatValue" has the value 2. The result of the method are return  
2147483647. In that case the compare method says that "thisValue" is  
greater than "thatValue".

The method should be return like that:
thisValue < thatValue ? -1 : thisValue == thatValue ? 0 : 1;


Or overlook i something?

Regards,
Marko
--Apple-Mail-2--717810034--

From MAILER-DAEMON Thu Aug 17 17:09:00 2006
Return-Path: 
 <hadoop-dev-return-3167-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10758 invoked from network); 17 Aug 2006 17:09:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 17:09:00 -0000
Received: (qmail 19205 invoked by uid 500); 17 Aug 2006 17:08:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19188 invoked by uid 500); 17 Aug 2006 17:08:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19179 invoked by uid 99); 17 Aug 2006 17:08:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 10:08:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.192.81] (HELO rwcrmhc11.comcast.net) (204.127.192.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 10:08:58 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc11) with ESMTP
          id <20060817170837m1100e0tm0e>; Thu, 17 Aug 2006 17:08:37 +0000
Message-ID: <44E4A298.1090500@apache.org>
Date: Thu, 17 Aug 2006 10:08:40 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [Lucene-hadoop Wiki] Update of "SequenceFile" by Arun C Murthy
References: <20060817051358.24001.71657@ajax.apache.org>
In-Reply-To: <20060817051358.24001.71657@ajax.apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Apache Wiki wrote:
> +  * version - A byte array: 3 bytes of magic header ''''SEQ'''', followed by 1 byte of actual version no. (e.g. SEQ4)

Except the '4' is not ASCII '4', but rather the byte 04.

Doug

From MAILER-DAEMON Thu Aug 17 17:15:51 2006
Return-Path: 
 <hadoop-dev-return-3169-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12479 invoked from network); 17 Aug 2006 17:15:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 17:15:51 -0000
Received: (qmail 31594 invoked by uid 500); 17 Aug 2006 17:15:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31574 invoked by uid 500); 17 Aug 2006 17:15:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31563 invoked by uid 99); 17 Aug 2006 17:15:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 10:15:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.148.227.153] (HELO rwcrmhc13.comcast.net)
 (216.148.227.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 10:15:45 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc13) with ESMTP
          id <20060817171524m13005ui4fe>; Thu, 17 Aug 2006 17:15:25 +0000
Message-ID: <44E4A42F.1000409@apache.org>
Date: Thu, 17 Aug 2006 10:15:27 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: IntWritable.Comparator
References: <602CEEA0-F743-4204-B9EE-40E37A4C123A@media-style.com>
In-Reply-To: <602CEEA0-F743-4204-B9EE-40E37A4C123A@media-style.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

That looks like a bug.  Can you please submit an issue in Jira?  Thanks.

Doug

Marko Bauhardt wrote:
> Hi developers,
> i had wrote a mapred job with  OutputKeyClass IntWritable. But the keys 
> are not not correct sorted in the output file. I look at the code from 
> the Intwritable.Comparator and i am confused.
> 
> Currently the compare-method returns:
> return thisValue - thatValue;
> 
> But what is, if "thisValue" has the value Integer.MIN_VALUE+1 and the 
> "thatValue" has the value 2. The result of the method are return 
> 2147483647. In that case the compare method says that "thisValue" is 
> greater than "thatValue".
> 
> The method should be return like that:
> thisValue < thatValue ? -1 : thisValue == thatValue ? 0 : 1;
> 
> 
> Or overlook i something?
> 
> Regards,
> Marko

From MAILER-DAEMON Thu Aug 17 17:39:15 2006
Return-Path: 
 <hadoop-dev-return-3170-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19882 invoked from network); 17 Aug 2006 17:39:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 17:39:15 -0000
Received: (qmail 70341 invoked by uid 500); 17 Aug 2006 17:39:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70308 invoked by uid 500); 17 Aug 2006 17:39:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70272 invoked by uid 99); 17 Aug 2006 17:39:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 10:39:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 10:39:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1D85F7142CC
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 17:36:16 +0000 (GMT)
Message-ID: <10670499.1155836176118.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 10:36:16 -0700 (PDT)
From: "Nguyen Quoc Mai (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-4) tool to mount dfs on linux
In-Reply-To: <1520733599.1139079363816.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-4?page=all ]

Nguyen Quoc Mai updated HADOOP-4:
---------------------------------

    Attachment: fuse-hadoop-0.1.0_fuse-j.2.2.3_hadoop.0.5.0.tar.gz

I changed the code for fuse-hadoop. This is a working version for mounting DFS to linux file system. This version works fine with FUSE-J.2.2.3 and HADOOP.0.5.0

Enjoy

> tool to mount dfs on linux
> --------------------------
>
>                 Key: HADOOP-4
>                 URL: http://issues.apache.org/jira/browse/HADOOP-4
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>         Environment: linux only
>            Reporter: John Xing
>         Attachments: fuse-hadoop-0.1.0_fuse-j.2.2.3_hadoop.0.5.0.tar.gz, fuse-hadoop-0.1.0_fuse-j.2.4_hadoop.0.5.0.tar.gz, fuse-hadoop-0.1.1.tar.gz
>
>
> tool to mount dfs on linux

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 17 17:39:16 2006
Return-Path: 
 <hadoop-dev-return-3171-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19921 invoked from network); 17 Aug 2006 17:39:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 17:39:16 -0000
Received: (qmail 70544 invoked by uid 500); 17 Aug 2006 17:39:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70515 invoked by uid 500); 17 Aug 2006 17:39:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70495 invoked by uid 99); 17 Aug 2006 17:39:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 10:39:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 10:39:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 214C37142CF
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 17:36:17 +0000 (GMT)
Message-ID: <12385119.1155836177133.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 10:36:17 -0700 (PDT)
From: "Nguyen Quoc Mai (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-4) tool to mount dfs on linux
In-Reply-To: <1520733599.1139079363816.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-4?page=all ]

Nguyen Quoc Mai updated HADOOP-4:
---------------------------------

    Attachment: fuse-hadoop-0.1.0_fuse-j.2.4_hadoop.0.5.0.tar.gz

I changed the code for fuse-hadoop. This is a working version for mounting DFS to linux file system. This version works fine with FUSE-J.2.4 and HADOOP.0.5.0

Enjoy

> tool to mount dfs on linux
> --------------------------
>
>                 Key: HADOOP-4
>                 URL: http://issues.apache.org/jira/browse/HADOOP-4
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>         Environment: linux only
>            Reporter: John Xing
>         Attachments: fuse-hadoop-0.1.0_fuse-j.2.2.3_hadoop.0.5.0.tar.gz, fuse-hadoop-0.1.0_fuse-j.2.4_hadoop.0.5.0.tar.gz, fuse-hadoop-0.1.1.tar.gz
>
>
> tool to mount dfs on linux

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 17 17:43:13 2006
Return-Path: 
 <hadoop-dev-return-3172-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21144 invoked from network); 17 Aug 2006 17:43:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 17:43:13 -0000
Received: (qmail 75563 invoked by uid 500); 17 Aug 2006 17:43:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75542 invoked by uid 500); 17 Aug 2006 17:43:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75533 invoked by uid 99); 17 Aug 2006 17:43:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 10:43:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 10:43:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1FE1A7142C7
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 17:40:15 +0000 (GMT)
Message-ID: <25469875.1155836415128.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 10:40:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-441?page=comments#action_12428716 ] 
            
Doug Cutting commented on HADOOP-441:
-------------------------------------

The constructors should probably take class instances rather than class names.  Codecs should be based on DeflaterOutputStream and InflaterInputStream, but it would be best to write just one name to the file.  So we might add a compressor factory interface like:

public interface CompressionCodec extends Configurable {
  DeflaterOutputStream createDeflaterOutputStream(OutputStream out);
  InflaterInputStream createInflaterInputStream(InputStream in);
}

Then the constructors would take an instance of this interface and write the name of that class into the file.  Implementations would be required to provide a public default constructor.

We might also add methods like the following to this interface:

  void writeVersion(DataOutputStream out);
  void readVersion(DataInputStream in) throws VersionMismatchException;

That would permit folks to safely revise a codec without having to use a new class name.

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 17 17:43:14 2006
Return-Path: 
 <hadoop-dev-return-3173-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21185 invoked from network); 17 Aug 2006 17:43:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 17:43:14 -0000
Received: (qmail 75765 invoked by uid 500); 17 Aug 2006 17:43:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75743 invoked by uid 500); 17 Aug 2006 17:43:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75734 invoked by uid 99); 17 Aug 2006 17:43:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 10:43:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 10:43:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1A15D7142CE
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 17:40:16 +0000 (GMT)
Message-ID: <14756380.1155836416104.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 10:40:16 -0700 (PDT)
From: "Nguyen Quoc Mai (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-4) tool to mount dfs on linux
In-Reply-To: <1520733599.1139079363816.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-4?page=all ]

Nguyen Quoc Mai updated HADOOP-4:
---------------------------------

               Status: Patch Available  (was: Open)
    Affects Version/s: 0.5.0

I changed the code for fuse-hadoop. This is a working version for mounting DFS to linux file system. This version works fine with HADOOP.0.5.0

Enjoy

> tool to mount dfs on linux
> --------------------------
>
>                 Key: HADOOP-4
>                 URL: http://issues.apache.org/jira/browse/HADOOP-4
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>    Affects Versions: 0.5.0
>         Environment: linux only
>            Reporter: John Xing
>         Attachments: fuse-hadoop-0.1.0_fuse-j.2.2.3_hadoop.0.5.0.tar.gz, fuse-hadoop-0.1.0_fuse-j.2.4_hadoop.0.5.0.tar.gz, fuse-hadoop-0.1.1.tar.gz
>
>
> tool to mount dfs on linux

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 17 18:14:09 2006
Return-Path: 
 <hadoop-dev-return-3175-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28573 invoked from network); 17 Aug 2006 18:14:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 18:14:09 -0000
Received: (qmail 16669 invoked by uid 500); 17 Aug 2006 18:14:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16498 invoked by uid 500); 17 Aug 2006 18:14:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16489 invoked by uid 99); 17 Aug 2006 18:14:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 11:14:08 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 11:14:06 -0700
Received: from [207.126.231.236] (eric14-mac.corp.yahoo.com [207.126.231.236])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k7HICmNT085387
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 11:13:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=jY7hnz9GLR+xB8mu1wx0Fl56+wzA1V+LFYcLlL1oFCEgep00DN1ziqqdVSzbQs0C
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <2813661.1155327254880.JavaMail.jira@brutus>
References: <2813661.1155327254880.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <88D6F0FF-7CAD-4A02-9AC4-E278340675B2@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-442) slaves file should include an
 'exclude' section,
 to prevent "bad" datanodes and tasktrackers from disrupting  a cluster
Date: Thu, 17 Aug 2006 10:44:58 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Unless or until we put authentication in-place in the webAPI, I think  
we need to be very careful about adding admin function to it.

We have clusters with an increasing number of users who are not  
cluster admins on them.  We don't want to enable them to reconfig the  
system.  We do want to allow them to use the web UIs to diagnose the  
status of their jobs and files.

In our other large clustered applications, we've found that  
segregating a web interrogation UI from a file based (or other  
control port) based admin UI avoids a lot of pain and allows  
administrative flexibility.

On Aug 11, 2006, at 1:14 PM, Doug Cutting (JIRA) wrote:

>     [ http://issues.apache.org/jira/browse/HADOOP-442? 
> page=comments#action_12427609 ]
>
> Doug Cutting commented on HADOOP-442:
> -------------------------------------
>
> The slaves file is currently only used by the start/stop scripts,  
> so it won't help here.
>
> Perhaps the jobtracker and namenode should have a public API that  
> permits particular hosts to be banned.  Then the web ui could then  
> use this to let adminstrators ban hosts.  We could initialize the  
> list from a config file, in the case of persistently bad hosts.
>
>> slaves file should include an 'exclude' section, to prevent "bad"  
>> datanodes and tasktrackers from disrupting  a cluster
>> --------------------------------------------------------------------- 
>> --------------------------------------------------
>>
>>                 Key: HADOOP-442
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-442
>>             Project: Hadoop
>>          Issue Type: Bug
>>            Reporter: Yoram Arnon
>>
>> I recently had a few nodes go bad, such that they were  
>> inaccessible to ssh, but were still running their java processes.
>> tasks that executed on them were failing, causing jobs to fail.
>> I couldn't stop the java processes, because of the ssh issue, so I  
>> was helpless until I could actually power down these nodes.
>> restarting the cluster doesn't help, even when removing the bad  
>> nodes from the slaves file - they just reconnect and are accepted.
>> while we plan to avoid tasks from launching on the same nodes over  
>> and over, what I'd like is to be able to prevent rogue processes  
>> from connecting to the masters.
>> Ideally, the slaves file will contain an 'exclude' section, which  
>> will list nodes that shouldn't be accessed, and should be ignored  
>> if they try to connect. That would also help in configuring the  
>> slaves file for a large cluster - I'd list the full range of  
>> machines in the cluster, then list the ones that are down in the  
>> 'exclude' section
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators: http://issues.apache.org/jira/secure/ 
> Administrators.jspa
> -
> For more information on JIRA, see: http://www.atlassian.com/ 
> software/jira
>
>


From MAILER-DAEMON Thu Aug 17 18:09:55 2006
Return-Path: 
 <hadoop-dev-return-3174-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27476 invoked from network); 17 Aug 2006 18:09:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 18:09:55 -0000
Received: (qmail 12069 invoked by uid 500); 17 Aug 2006 18:09:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12045 invoked by uid 500); 17 Aug 2006 18:09:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12034 invoked by uid 99); 17 Aug 2006 18:09:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 11:09:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.64.182.137] (HELO mslinux.media-style.com) (80.64.182.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 11:09:54 -0700
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id A1B6D144842
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 20:09:32 +0200 (CEST)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 18366-02 for <hadoop-dev@lucene.apache.org>;
	Thu, 17 Aug 2006 20:09:32 +0200 (CEST)
Received: from [127.0.0.1] (unknown [38.100.225.2])
	by mslinux.media-style.com (Postfix) with ESMTP id 8604E144841
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 20:09:31 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <44E4A42F.1000409@apache.org>
References: <602CEEA0-F743-4204-B9EE-40E37A4C123A@media-style.com>
 <44E4A42F.1000409@apache.org>
Content-Type: multipart/alternative; boundary=Apple-Mail-3--710172960
Message-Id: <8E44F26C-690B-41C6-97CA-0C13AEA8600A@media-style.com>
From: Marko Bauhardt <mb@media-style.com>
Subject: Re: IntWritable.Comparator
Date: Thu, 17 Aug 2006 20:09:29 +0200
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-3--710172960
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed


Am 17.08.2006 um 19:15 schrieb Doug Cutting:

> That looks like a bug.  Can you please submit an issue in Jira?   
> Thanks.

To late, this bug was already submitted.
https://issues.apache.org/jira/browse/HADOOP-176

Marko


--Apple-Mail-3--710172960--

From MAILER-DAEMON Thu Aug 17 20:46:13 2006
Return-Path: 
 <hadoop-dev-return-3176-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87935 invoked from network); 17 Aug 2006 20:46:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 20:46:13 -0000
Received: (qmail 47783 invoked by uid 500); 17 Aug 2006 20:46:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47754 invoked by uid 500); 17 Aug 2006 20:46:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47745 invoked by uid 99); 17 Aug 2006 20:46:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 13:46:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 13:46:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 070707142B7
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 20:43:15 +0000 (GMT)
Message-ID: <22737574.1155847395026.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 13:43:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-176) comparators of integral writable
 types are not transitive for inequalities
In-Reply-To: <32718830.1146266741279.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-176?page=all ]

Doug Cutting resolved HADOOP-176.
---------------------------------

    Fix Version/s: 0.6.0
       Resolution: Fixed

I just committed this.  Thanks, Dick.

> comparators of integral writable types are not transitive for inequalities
> --------------------------------------------------------------------------
>
>                 Key: HADOOP-176
>                 URL: http://issues.apache.org/jira/browse/HADOOP-176
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>         Environment: red hat
>            Reporter: Dick King
>             Fix For: 0.6.0
>
>
> Consider the following code from IntWritable.java :
>     public int compare(byte[] b1, int s1, int l1,
>                        byte[] b2, int s2, int l2) {
>       int thisValue = readInt(b1, s1);
>       int thatValue = readInt(b2, s2);
>       return thisValue - thatValue;
>     }
> If a Java Runtime subtracts 20 from -(2^31 - 10) it gets a huge positive number, not the negative value that the comparator should return.
> LongWritable does this right, of course.
> That last line should be
>        return (thisValue<thatValue ? -1 : (thisValue==thatValue ? 0 : 1));
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 17 20:46:22 2006
Return-Path: 
 <hadoop-dev-return-3177-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88038 invoked from network); 17 Aug 2006 20:46:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 20:46:22 -0000
Received: (qmail 48225 invoked by uid 500); 17 Aug 2006 20:46:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48202 invoked by uid 500); 17 Aug 2006 20:46:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48193 invoked by uid 99); 17 Aug 2006 20:46:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 13:46:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.192.83] (HELO rwcrmhc13.comcast.net) (204.127.192.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 13:46:20 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc13) with ESMTP
          id <20060817204559m130062s58e>; Thu, 17 Aug 2006 20:45:59 +0000
Message-ID: <44E4D58B.90004@apache.org>
Date: Thu, 17 Aug 2006 13:46:03 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: IntWritable.Comparator
References: <602CEEA0-F743-4204-B9EE-40E37A4C123A@media-style.com>
 <44E4A42F.1000409@apache.org>
 <8E44F26C-690B-41C6-97CA-0C13AEA8600A@media-style.com>
In-Reply-To: <8E44F26C-690B-41C6-97CA-0C13AEA8600A@media-style.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Okay.  I just fixed it.  Thanks for bringing it to my attention!

Doug

Marko Bauhardt wrote:
> 
> Am 17.08.2006 um 19:15 schrieb Doug Cutting:
> 
>> That looks like a bug.  Can you please submit an issue in Jira?  Thanks.
> 
> To late, this bug was already submitted.
> https://issues.apache.org/jira/browse/HADOOP-176
> 
> Marko
> 
> 

From MAILER-DAEMON Thu Aug 17 20:59:14 2006
Return-Path: 
 <hadoop-dev-return-3178-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91906 invoked from network); 17 Aug 2006 20:59:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 20:59:14 -0000
Received: (qmail 66166 invoked by uid 500); 17 Aug 2006 20:59:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66142 invoked by uid 500); 17 Aug 2006 20:59:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66133 invoked by uid 99); 17 Aug 2006 20:59:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 13:59:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 13:59:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D5C657142B7
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 20:56:15 +0000 (GMT)
Message-ID: <31922370.1155848175873.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 13:56:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12428786 ] 
            
Doug Cutting commented on HADOOP-54:
------------------------------------

I am not convinced we want folks to encourage folks to add new SequenceFile.Writer subclasses.  Thus we should change the (new) protected fields to package private.  This will also simplify the javadoc.  I'd also prefer that these subclasses were not public either, making everyone use the factory.  This would expose far less of the implementation and further simplify the javadoc.  Owen has disputed this earlier.  Owen?

I note that when you updated uses of SequenceFile.Writer you consistently used the factory in favor of explicitly constructing the subclasses.  Thanks!  That makes hiding the subclasses easy.  We can always make them public later, if needed, but, once they're public, it is hard to remove them.  If we think the factory method has too many confusing parameters, then we could use a typesafe enumeration, e.g. something like:

writer = SequenceFile.createWriter(fs, conf, path, Compress.BLOCK);


> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFiles.final.patch, SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 17 21:33:14 2006
Return-Path: 
 <hadoop-dev-return-3179-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9406 invoked from network); 17 Aug 2006 21:33:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 21:33:14 -0000
Received: (qmail 46458 invoked by uid 500); 17 Aug 2006 21:33:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46424 invoked by uid 500); 17 Aug 2006 21:33:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46415 invoked by uid 99); 17 Aug 2006 21:33:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 14:33:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 14:33:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E2FE87142D9
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 21:30:15 +0000 (GMT)
Message-ID: <15034679.1155850215927.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 14:30:15 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12428801 ] 
            
Sameer Paranjpye commented on HADOOP-54:
----------------------------------------

+1 on using an enumeration to represent the compression method. It's not necessary but makes code much more readable.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFiles.final.patch, SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 17 21:39:13 2006
Return-Path: 
 <hadoop-dev-return-3180-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11824 invoked from network); 17 Aug 2006 21:39:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 21:39:13 -0000
Received: (qmail 61933 invoked by uid 500); 17 Aug 2006 21:39:13 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61912 invoked by uid 500); 17 Aug 2006 21:39:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61903 invoked by uid 99); 17 Aug 2006 21:39:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 14:39:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 14:39:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2D2E97142B7
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 21:36:15 +0000 (GMT)
Message-ID: <9179141.1155850575182.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 14:36:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-4) tool to mount dfs on linux
In-Reply-To: <1520733599.1139079363816.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-4?page=comments#action_12428802 ] 
            
Doug Cutting commented on HADOOP-4:
-----------------------------------

I'd like to be able to commit this to the contrib tree, but it could use a bit more polish.  Unfortunately we cannot commit the fuse-j jar file, since it is released under the LGPL.  What would be great is a build.xml that downloaded and built fuse-j.

The README could also include more info on installing fuse.

On Ubuntu I was able to do this with:

sudo apt-get install fuse-utils libfuse2 libfuse-devel

If you've never built things on your Ubuntu box then you might also need:

sudo apt-get install make gcc libc6-dev


> tool to mount dfs on linux
> --------------------------
>
>                 Key: HADOOP-4
>                 URL: http://issues.apache.org/jira/browse/HADOOP-4
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>    Affects Versions: 0.5.0
>         Environment: linux only
>            Reporter: John Xing
>         Attachments: fuse-hadoop-0.1.0_fuse-j.2.2.3_hadoop.0.5.0.tar.gz, fuse-hadoop-0.1.0_fuse-j.2.4_hadoop.0.5.0.tar.gz, fuse-hadoop-0.1.1.tar.gz
>
>
> tool to mount dfs on linux

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 17 22:21:03 2006
Return-Path: 
 <hadoop-dev-return-3181-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26340 invoked from network); 17 Aug 2006 22:21:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 22:21:03 -0000
Received: (qmail 32455 invoked by uid 500); 17 Aug 2006 22:21:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32285 invoked by uid 500); 17 Aug 2006 22:21:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32275 invoked by uid 99); 17 Aug 2006 22:21:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 15:21:03 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.171] (HELO mrout1.yahoo.com) (216.145.54.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 15:21:01 -0700
Received: from memberfamouslx (memberfamous-lx.corp.yahoo.com [172.21.103.73])
	by mrout1.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id k7HMKFH8076020
	for <hadoop-dev@lucene.apache.org>; Thu, 17 Aug 2006 15:20:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
	b=vEq7TpKxc1YgOlQgkbG50aBVlpzJx4ri7vrWx9gF4JDhW9b6lyghjYCL0turQwVA
From: "Yoram Arnon" <yarnon@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: [jira] Updated: (HADOOP-4) tool to mount dfs on linux
Date: Thu, 17 Aug 2006 15:20:14 -0700
Message-ID: <015601c6c24b$4fe39b10$496715ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <12385119.1155836177133.JavaMail.jira@brutus>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcbCJCRIAZz54pYrTXitcLNkcVoc8AAJxtdg
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does it work on 64bit linux? 

-----Original Message-----
From: Nguyen Quoc Mai (JIRA) [mailto:jira@apache.org] 
Sent: Thursday, August 17, 2006 10:36 AM
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-4) tool to mount dfs on linux

     [ http://issues.apache.org/jira/browse/HADOOP-4?page=all ]

Nguyen Quoc Mai updated HADOOP-4:
---------------------------------

    Attachment: fuse-hadoop-0.1.0_fuse-j.2.4_hadoop.0.5.0.tar.gz

I changed the code for fuse-hadoop. This is a working version for mounting
DFS to linux file system. This version works fine with FUSE-J.2.4 and
HADOOP.0.5.0

Enjoy

> tool to mount dfs on linux
> --------------------------
>
>                 Key: HADOOP-4
>                 URL: http://issues.apache.org/jira/browse/HADOOP-4
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>         Environment: linux only
>            Reporter: John Xing
>         Attachments: fuse-hadoop-0.1.0_fuse-j.2.2.3_hadoop.0.5.0.tar.gz,
fuse-hadoop-0.1.0_fuse-j.2.4_hadoop.0.5.0.tar.gz, fuse-hadoop-0.1.1.tar.gz
>
>
> tool to mount dfs on linux

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:
http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        



From MAILER-DAEMON Fri Aug 18 04:46:13 2006
Return-Path: 
 <hadoop-dev-return-3182-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17466 invoked from network); 18 Aug 2006 04:46:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 04:46:13 -0000
Received: (qmail 97163 invoked by uid 500); 18 Aug 2006 04:46:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97139 invoked by uid 500); 18 Aug 2006 04:46:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97130 invoked by uid 99); 18 Aug 2006 04:46:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 21:46:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 21:46:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E51E67142CC
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 04:43:13 +0000 (GMT)
Message-ID: <26584411.1155876193935.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 21:43:13 -0700 (PDT)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-458) libhdfs corrupts memory
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

libhdfs corrupts memory
-----------------------

                 Key: HADOOP-458
                 URL: http://issues.apache.org/jira/browse/HADOOP-458
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.4.0
            Reporter: Christian Kunz


in getJNIEnv() not enough space for optHadoopClassPath is allocated, corrupting the memory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 04:56:16 2006
Return-Path: 
 <hadoop-dev-return-3183-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20090 invoked from network); 18 Aug 2006 04:56:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 04:56:16 -0000
Received: (qmail 9645 invoked by uid 500); 18 Aug 2006 04:56:12 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9630 invoked by uid 500); 18 Aug 2006 04:56:12 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9620 invoked by uid 99); 18 Aug 2006 04:56:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 21:56:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 21:56:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DCE2A7142CC
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 04:53:13 +0000 (GMT)
Message-ID: <12771302.1155876793902.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 21:53:13 -0700 (PDT)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-459) libhdfs leaks memory when writing to
 files
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

libhdfs leaks memory when writing to files
------------------------------------------

                 Key: HADOOP-459
                 URL: http://issues.apache.org/jira/browse/HADOOP-459
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Christian Kunz


hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 05:00:14 2006
Return-Path: 
 <hadoop-dev-return-3184-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20826 invoked from network); 18 Aug 2006 05:00:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 05:00:14 -0000
Received: (qmail 12765 invoked by uid 500); 18 Aug 2006 05:00:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12689 invoked by uid 500); 18 Aug 2006 05:00:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12680 invoked by uid 99); 18 Aug 2006 05:00:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 22:00:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 22:00:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 600EA7142CE
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 04:57:15 +0000 (GMT)
Message-ID: <22734620.1155877035390.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 21:57:15 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-458) libhdfs corrupts memory
In-Reply-To: <26584411.1155876193935.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-458?page=all ]

Sameer Paranjpye reassigned HADOOP-458:
---------------------------------------

    Assignee: Konstantin Shvachko

> libhdfs corrupts memory
> -----------------------
>
>                 Key: HADOOP-458
>                 URL: http://issues.apache.org/jira/browse/HADOOP-458
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>
> in getJNIEnv() not enough space for optHadoopClassPath is allocated, corrupting the memory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 05:00:16 2006
Return-Path: 
 <hadoop-dev-return-3185-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20857 invoked from network); 18 Aug 2006 05:00:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 05:00:16 -0000
Received: (qmail 12903 invoked by uid 500); 18 Aug 2006 05:00:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12883 invoked by uid 500); 18 Aug 2006 05:00:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12874 invoked by uid 99); 18 Aug 2006 05:00:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 22:00:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 22:00:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E03657142C7
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 04:57:16 +0000 (GMT)
Message-ID: <1066039.1155877036916.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 21:57:16 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-458) libhdfs corrupts memory
In-Reply-To: <26584411.1155876193935.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-458?page=all ]

Sameer Paranjpye updated HADOOP-458:
------------------------------------

    Fix Version/s: 0.6.0

> libhdfs corrupts memory
> -----------------------
>
>                 Key: HADOOP-458
>                 URL: http://issues.apache.org/jira/browse/HADOOP-458
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Christian Kunz
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>
> in getJNIEnv() not enough space for optHadoopClassPath is allocated, corrupting the memory.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 05:48:17 2006
Return-Path: 
 <hadoop-dev-return-3186-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31524 invoked from network); 18 Aug 2006 05:48:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 05:48:17 -0000
Received: (qmail 42101 invoked by uid 500); 18 Aug 2006 05:48:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42072 invoked by uid 500); 18 Aug 2006 05:48:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42063 invoked by uid 99); 18 Aug 2006 05:48:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 22:48:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 22:48:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3C2937142CE
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 05:45:16 +0000 (GMT)
Message-ID: <13051265.1155879916243.JavaMail.jira@brutus>
Date: Thu, 17 Aug 2006 22:45:16 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-312?page=all ]

Devaraj Das updated HADOOP-312:
-------------------------------

    Attachment: no_conn_caching.patch

Increasing the accept queue length and a simple retry mechanism helped very much. Two cases - (1) where idle connections are cached for a max of 1 sec at the client, and (2) where connections are fully cached.
The performance of the sort benchmark (total time it takes to complete the run) is, most of the times, better with (1). But with a few tasks failing here and there (in both cases), it's actually hard to conclusively say anything about performance in terms of the time it takes to run the benchmark. Made the accept queue length configurable (since that can be manually set on Linux systems as part of the configurable TCP/IP parameters) with the default being 128.

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 10:15:15 2006
Return-Path: 
 <hadoop-dev-return-3187-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17161 invoked from network); 18 Aug 2006 10:15:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 10:15:15 -0000
Received: (qmail 55099 invoked by uid 500); 18 Aug 2006 10:15:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55073 invoked by uid 500); 18 Aug 2006 10:15:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55064 invoked by uid 99); 18 Aug 2006 10:15:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 03:15:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 03:15:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4E7A67142D3
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 10:12:15 +0000 (GMT)
Message-ID: <33006371.1155895935318.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 03:12:15 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-457) Unable to create file in dfs in code
 run on machine not in the cluster.
In-Reply-To: <3617793.1155825857179.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-457?page=comments#action_12428965 ] 
            
Johan Oskarson commented on HADOOP-457:
---------------------------------------

This must've been caused by some unrelated problem.
A clean install doesn't produce this problem.

Sorry for any inconvenience caused by this bug report.


> Unable to create file in dfs in code run on machine not in the cluster.
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-457
>                 URL: http://issues.apache.org/jira/browse/HADOOP-457
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Johan Oskarson
>
> I've got a tiny hadoop cluster and one machine that's not in the cluster that rsync the latest version off the namenode/jobtracker machine. The machine that's not in the cluster is then responsible for starting a few jobs here and there.
> However, the latest trunk is unable to create files in the dfs from my code.
> I'm using a simple new OutputStreamWriter(fs.create(file))); and the file creation looks like it's going ok but then this gets thrown:
> org.apache.hadoop.ipc.RemoteException: java.io.IOException: failed to create file /user/hadoop/submissions/1150000000/1152000000/1152440000/.1155824015.negsub.crc on client "servernotincluster" because target-length is 0, below MIN_REPLICATION (1)
>         at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:410)
>         at org.apache.hadoop.dfs.NameNode.create(NameNode.java:202)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:332)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:468)
>         at org.apache.hadoop.ipc.Client$Connection.run(Client.java:159)
> If I add that machine to the conf/slaves it works fine. Note that it's trying to create that file on the server that's not in the cluster.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 10:44:16 2006
Return-Path: 
 <hadoop-dev-return-3188-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26566 invoked from network); 18 Aug 2006 10:44:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 10:44:16 -0000
Received: (qmail 22152 invoked by uid 500); 18 Aug 2006 10:44:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21979 invoked by uid 500); 18 Aug 2006 10:44:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21970 invoked by uid 99); 18 Aug 2006 10:44:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 03:44:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 03:44:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 82BF441000C
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 10:41:16 +0000 (GMT)
Message-ID: <5693196.1155897676533.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 03:41:16 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-54?page=all ]

Arun C Murthy updated HADOOP-54:
--------------------------------

    Attachment: SequenceFile.updated.final.patch

Doug - here's the latest patch.

It incorporates all your comments (remove protected, type-safe enum and non-public subclasses). I agree we can make the subclasses 'public' at a later date if need be, hence I've made them package private.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFile.updated.final.patch, SequenceFiles.final.patch, SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 11:21:21 2006
Return-Path: 
 <hadoop-dev-return-3189-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46275 invoked from network); 18 Aug 2006 11:21:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 11:21:21 -0000
Received: (qmail 77991 invoked by uid 500); 18 Aug 2006 11:21:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77900 invoked by uid 500); 18 Aug 2006 11:21:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77839 invoked by uid 99); 18 Aug 2006 11:21:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 04:21:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 04:21:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CDA997142D4
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 11:18:16 +0000 (GMT)
Message-ID: <6690669.1155899896839.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 04:18:16 -0700 (PDT)
From: "Vetle Roeim (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-260) the start up scripts should take a
 command line parameter --config making it easy to run multiple hadoop
 installation on same machines
In-Reply-To: <32103939.1149014550880.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-260?page=comments#action_12428984 ] 
            
Vetle Roeim commented on HADOOP-260:
------------------------------------

As far as I can tell, it's still necessary to define a separate PID directory for this to work; the PID variable in hadoop-deamon.sh does not take the configuration directory into account. While having a separate PID directory per configuration is not a problem per se, it seems unnecessary.

> the start up scripts should take a command line parameter --config making it easy to run multiple hadoop installation on same machines
> --------------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-260
>                 URL: http://issues.apache.org/jira/browse/HADOOP-260
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.2.0
>            Reporter: Mahadev konar
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.5.0
>
>         Attachments: hadoop-config.patch
>
>
> --config paramter would allow getting rid of SSH_OPTS.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 12:27:15 2006
Return-Path: 
 <hadoop-dev-return-3190-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67495 invoked from network); 18 Aug 2006 12:27:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 12:27:15 -0000
Received: (qmail 92353 invoked by uid 500); 18 Aug 2006 12:27:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92333 invoked by uid 500); 18 Aug 2006 12:27:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92324 invoked by uid 99); 18 Aug 2006 12:27:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 05:27:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 05:27:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5AAE37142C7
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 12:24:15 +0000 (GMT)
Message-ID: <6667676.1155903855368.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 05:24:15 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Sanjay Dahiya updated HADOOP-263:
---------------------------------

    Attachment: patch.txt

Thanks Owen for the review, here is an updated patch. 

The earlier patch failed with latest trunk due to some changes in TaskInProgress, so I redid some part of it. Attached patch works with the latest trunk. 

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 12:29:16 2006
Return-Path: 
 <hadoop-dev-return-3191-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68193 invoked from network); 18 Aug 2006 12:29:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 12:29:16 -0000
Received: (qmail 95855 invoked by uid 500); 18 Aug 2006 12:29:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95836 invoked by uid 500); 18 Aug 2006 12:29:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95823 invoked by uid 99); 18 Aug 2006 12:29:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 05:29:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 05:29:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 16F047142B7
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 12:26:16 +0000 (GMT)
Message-ID: <5165423.1155903976091.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 05:26:16 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Sanjay Dahiya updated HADOOP-263:
---------------------------------

    Status: Patch Available  (was: Open)

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 12:31:18 2006
Return-Path: 
 <hadoop-dev-return-3192-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69104 invoked from network); 18 Aug 2006 12:31:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 12:31:18 -0000
Received: (qmail 98068 invoked by uid 500); 18 Aug 2006 12:31:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98045 invoked by uid 500); 18 Aug 2006 12:31:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98036 invoked by uid 99); 18 Aug 2006 12:31:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 05:31:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 05:31:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DCADE7142B7
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 12:28:13 +0000 (GMT)
Message-ID: <28838293.1155904093901.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 05:28:13 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-460) Small jobs benchmark fails with
 current Hadoop due to UTF8 -> Text ClassCastException
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Small jobs benchmark fails with current Hadoop due to UTF8 -> Text ClassCastException
-------------------------------------------------------------------------------------

                 Key: HADOOP-460
                 URL: http://issues.apache.org/jira/browse/HADOOP-460
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
    Affects Versions: 0.5.0
            Reporter: Sanjay Dahiya


Small jobs benchmark uses UTF8 as Map input keys, it fails with ClassCastException ( UTF8 / Text ) with the latest trunk. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 16:39:24 2006
Return-Path: 
 <hadoop-dev-return-3193-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70449 invoked from network); 18 Aug 2006 16:39:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 16:39:24 -0000
Received: (qmail 18189 invoked by uid 500); 18 Aug 2006 16:39:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18172 invoked by uid 500); 18 Aug 2006 16:39:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18163 invoked by uid 99); 18 Aug 2006 16:39:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 09:39:23 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ssiren@gmail.com designates
 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 09:39:21 -0700
Received: by nf-out-0910.google.com with SMTP id b2so503015nfe
        for <hadoop-dev@lucene.apache.org>;
 Fri, 18 Aug 2006 09:38:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=X8FQjH3tQW+72Nsksd7aeZizuGvCCplm92zd/1ckS2nSNIxAtJyOj/9RImNqb+H3KZQ5T+PuUBmGZxhc/udOdn8lnFHUFLmM0c79WDHvU8rxZaTTLSYvoLHxpueihFRO0IXo37O7vKavCuhb2HOsUZ6BUqnconMp1LV5ZqeRf78=
Received: by 10.49.29.3 with SMTP id g3mr4290583nfj;
        Fri, 18 Aug 2006 09:38:59 -0700 (PDT)
Received: from ?84.231.72.32? ( [84.231.72.32])
        by mx.gmail.com with ESMTP id x24sm784260nfb.2006.08.18.09.38.58;
        Fri, 18 Aug 2006 09:38:59 -0700 (PDT)
Message-ID: <44E5ED04.3060905@gmail.com>
Date: Fri, 18 Aug 2006 19:38:28 +0300
From: Sami Siren <ssiren@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060808)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Updated: (HADOOP-4) tool to mount dfs on linux
References: <015601c6c24b$4fe39b10$496715ac@ds.corp.yahoo.com>
In-Reply-To: <015601c6c24b$4fe39b10$496715ac@ds.corp.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Yoram Arnon wrote:
> Does it work on 64bit linux? 
>
>   
Haven't tested it on 64bit linux but cannot see why not.
--
 Sami Siren
> -----Original Message-----
> From: Nguyen Quoc Mai (JIRA) [mailto:jira@apache.org] 
> Sent: Thursday, August 17, 2006 10:36 AM
> To: hadoop-dev@lucene.apache.org
> Subject: [jira] Updated: (HADOOP-4) tool to mount dfs on linux
>
>      [ http://issues.apache.org/jira/browse/HADOOP-4?page=all ]
>
> Nguyen Quoc Mai updated HADOOP-4:
> ---------------------------------
>
>     Attachment: fuse-hadoop-0.1.0_fuse-j.2.4_hadoop.0.5.0.tar.gz
>
> I changed the code for fuse-hadoop. This is a working version for mounting
> DFS to linux file system. This version works fine with FUSE-J.2.4 and
> HADOOP.0.5.0
>
> Enjoy
>
>   
>> tool to mount dfs on linux
>> --------------------------
>>
>>                 Key: HADOOP-4
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-4
>>             Project: Hadoop
>>          Issue Type: Improvement
>>          Components: fs
>>         Environment: linux only
>>            Reporter: John Xing
>>         Attachments: fuse-hadoop-0.1.0_fuse-j.2.2.3_hadoop.0.5.0.tar.gz,
>>     
> fuse-hadoop-0.1.0_fuse-j.2.4_hadoop.0.5.0.tar.gz, fuse-hadoop-0.1.1.tar.gz
>   
>> tool to mount dfs on linux
>>     
>
>   


From MAILER-DAEMON Fri Aug 18 16:51:31 2006
Return-Path: 
 <hadoop-dev-return-3194-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75148 invoked from network); 18 Aug 2006 16:51:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 16:51:31 -0000
Received: (qmail 38871 invoked by uid 500); 18 Aug 2006 16:51:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38857 invoked by uid 500); 18 Aug 2006 16:51:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38848 invoked by uid 99); 18 Aug 2006 16:51:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 09:51:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 09:51:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E34397142D9
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 16:48:30 +0000 (GMT)
Message-ID: <23861547.1155919710927.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 09:48:30 -0700 (PDT)
From: "woyg (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-461) Build broken forjava version
 "1.4.2_09"
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Build broken forjava version "1.4.2_09"
---------------------------------------

                 Key: HADOOP-461
                 URL: http://issues.apache.org/jira/browse/HADOOP-461
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.5.0
         Environment: java version "1.4.2_09"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_09-233)
Java HotSpot(TM) Client VM (build 1.4.2-56, mixed mode)   

Mac OS X - version 10.3.9
1.5GHz PowerPC G4
            Reporter: woyg
            Priority: Trivial
         Attachments: build_broken_on_java1.4.txt

Build is broken on java 1.4.2_09.

Method java.lang.Boolean.parseBoolean(String val) is  available since Java 5
http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Boolean.html#parseBoolean(java.lang.String)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 16:51:37 2006
Return-Path: 
 <hadoop-dev-return-3195-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75483 invoked from network); 18 Aug 2006 16:51:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 16:51:37 -0000
Received: (qmail 40111 invoked by uid 500); 18 Aug 2006 16:51:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40097 invoked by uid 500); 18 Aug 2006 16:51:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40074 invoked by uid 99); 18 Aug 2006 16:51:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 09:51:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 09:51:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 11B5E7142E7
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 16:48:36 +0000 (GMT)
Message-ID: <22716219.1155919716070.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 09:48:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-434) Use Hadoop scripts to run
 smallJobsBenchmark to avoid classpath issues.
In-Reply-To: <20188000.1155075613933.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-434?page=comments#action_12429055 ] 
            
Doug Cutting commented on HADOOP-434:
-------------------------------------

Sorry.  I don't know how I missed that.  It should be there now.

> Use Hadoop scripts to run smallJobsBenchmark to avoid classpath issues.
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-434
>                 URL: http://issues.apache.org/jira/browse/HADOOP-434
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: patch.txt, patch_benchmark.txt
>
>
> Small job benchmark uses its own scripts to set classpath, it should use hadoop scripts with ProgramDriver to run the benchmark. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 16:51:39 2006
Return-Path: 
 <hadoop-dev-return-3196-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75563 invoked from network); 18 Aug 2006 16:51:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 16:51:39 -0000
Received: (qmail 40652 invoked by uid 500); 18 Aug 2006 16:51:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40630 invoked by uid 500); 18 Aug 2006 16:51:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40621 invoked by uid 99); 18 Aug 2006 16:51:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 09:51:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 09:51:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9FCCB7142E9
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 16:48:38 +0000 (GMT)
Message-ID: <11613866.1155919718652.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 09:48:38 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-457) Unable to create file in dfs in code
 run on machine not in the cluster.
In-Reply-To: <3617793.1155825857179.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-457?page=all ]

Doug Cutting resolved HADOOP-457.
---------------------------------

    Resolution: Cannot Reproduce

> Unable to create file in dfs in code run on machine not in the cluster.
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-457
>                 URL: http://issues.apache.org/jira/browse/HADOOP-457
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Johan Oskarson
>
> I've got a tiny hadoop cluster and one machine that's not in the cluster that rsync the latest version off the namenode/jobtracker machine. The machine that's not in the cluster is then responsible for starting a few jobs here and there.
> However, the latest trunk is unable to create files in the dfs from my code.
> I'm using a simple new OutputStreamWriter(fs.create(file))); and the file creation looks like it's going ok but then this gets thrown:
> org.apache.hadoop.ipc.RemoteException: java.io.IOException: failed to create file /user/hadoop/submissions/1150000000/1152000000/1152440000/.1155824015.negsub.crc on client "servernotincluster" because target-length is 0, below MIN_REPLICATION (1)
>         at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:410)
>         at org.apache.hadoop.dfs.NameNode.create(NameNode.java:202)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:332)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:468)
>         at org.apache.hadoop.ipc.Client$Connection.run(Client.java:159)
> If I add that machine to the conf/slaves it works fine. Note that it's trying to create that file on the server that's not in the cluster.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 17:00:48 2006
Return-Path: 
 <hadoop-dev-return-3197-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78824 invoked from network); 18 Aug 2006 17:00:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 17:00:48 -0000
Received: (qmail 61338 invoked by uid 500); 18 Aug 2006 17:00:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61314 invoked by uid 500); 18 Aug 2006 17:00:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61305 invoked by uid 99); 18 Aug 2006 17:00:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 10:00:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.192.83] (HELO rwcrmhc13.comcast.net) (204.127.192.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 10:00:46 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc13) with ESMTP
          id <20060818170025m130064lbie>; Fri, 18 Aug 2006 17:00:25 +0000
Message-ID: <44E5F22D.5000908@apache.org>
Date: Fri, 18 Aug 2006 10:00:29 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Commented: (HADOOP-260) the start up scripts should take
 a command line parameter --config making it easy to run multiple hadoop
 installation
 on same machines
References: <6690669.1155899896839.JavaMail.jira@brutus>
In-Reply-To: <6690669.1155899896839.JavaMail.jira@brutus>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Can you please submit a new issue for this, rather than adding comments 
to a closed issue?  Thanks!

Doug

Vetle Roeim (JIRA) wrote:
>     [ http://issues.apache.org/jira/browse/HADOOP-260?page=comments#action_12428984 ] 
>             
> Vetle Roeim commented on HADOOP-260:
> ------------------------------------
> 
> As far as I can tell, it's still necessary to define a separate PID directory for this to work; the PID variable in hadoop-deamon.sh does not take the configuration directory into account. While having a separate PID directory per configuration is not a problem per se, it seems unnecessary.
> 
>> the start up scripts should take a command line parameter --config making it easy to run multiple hadoop installation on same machines
>> --------------------------------------------------------------------------------------------------------------------------------------
>>
>>                 Key: HADOOP-260
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-260
>>             Project: Hadoop
>>          Issue Type: Improvement
>>    Affects Versions: 0.2.0
>>            Reporter: Mahadev konar
>>         Assigned To: Milind Bhandarkar
>>            Priority: Minor
>>             Fix For: 0.5.0
>>
>>         Attachments: hadoop-config.patch
>>
>>
>> --config paramter would allow getting rid of SSH_OPTS.
> 

From MAILER-DAEMON Fri Aug 18 17:52:16 2006
Return-Path: 
 <hadoop-dev-return-3198-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92996 invoked from network); 18 Aug 2006 17:52:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 17:52:16 -0000
Received: (qmail 48145 invoked by uid 500); 18 Aug 2006 17:52:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47968 invoked by uid 500); 18 Aug 2006 17:52:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47959 invoked by uid 99); 18 Aug 2006 17:52:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 10:52:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 10:52:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD0E47142D9
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 17:49:14 +0000 (GMT)
Message-ID: <20799029.1155923354837.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 10:49:14 -0700 (PDT)
From: "woyg (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-461) Build broken forjava version
 "1.4.2_09"
In-Reply-To: <23861547.1155919710927.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-461?page=all ]

woyg updated HADOOP-461:
------------------------

    Status: Patch Available  (was: Open)

> Build broken forjava version "1.4.2_09"
> ---------------------------------------
>
>                 Key: HADOOP-461
>                 URL: http://issues.apache.org/jira/browse/HADOOP-461
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>         Environment: java version "1.4.2_09"
> Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_09-233)
> Java HotSpot(TM) Client VM (build 1.4.2-56, mixed mode)   
> Mac OS X - version 10.3.9
> 1.5GHz PowerPC G4
>            Reporter: woyg
>            Priority: Trivial
>         Attachments: build_broken_on_java1.4.txt
>
>
> Build is broken on java 1.4.2_09.
> Method java.lang.Boolean.parseBoolean(String val) is  available since Java 5
> http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Boolean.html#parseBoolean(java.lang.String)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 18:20:23 2006
Return-Path: 
 <hadoop-dev-return-3199-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1798 invoked from network); 18 Aug 2006 18:20:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 18:20:23 -0000
Received: (qmail 83162 invoked by uid 500); 18 Aug 2006 18:20:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83133 invoked by uid 500); 18 Aug 2006 18:20:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83124 invoked by uid 99); 18 Aug 2006 18:20:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 11:20:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 11:20:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2FD6A7142E5
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 18:17:17 +0000 (GMT)
Message-ID: <26679971.1155925037193.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 11:17:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-54?page=all ]

Doug Cutting updated HADOOP-54:
-------------------------------

    Status: Open  (was: Patch Available)

I think this is nearly ready.

A minor improvement: the typesafe enumeration instances should probably have a toString() method, to facilitate debugging.

Running the TestSequenceFile unit test caused my 515MB Ubuntu box to swap horribly and it didn't complete.  I grabbed a stack trace and saw:

    [junit]     at java.util.zip.Inflater.init(Native Method)
    [junit]     at java.util.zip.Inflater.<init>(Inflater.java:75)
    [junit]     at java.util.zip.Inflater.<init>(Inflater.java:82)
    [junit]     at org.apache.hadoop.io.SequenceFile$CompressedBytes.<init>(SequenceFile.java:231)
    [junit]     at org.apache.hadoop.io.SequenceFile$CompressedBytes.<init>(SequenceFile.java:227)
    [junit]     at org.apache.hadoop.io.SequenceFile$Reader.createValueBytes(SequenceFile.java:1195)
    [junit]     at org.apache.hadoop.io.SequenceFile$Sorter$SortPass.run(SequenceFile.java:1459)
    [junit]     at org.apache.hadoop.io.SequenceFile$Sorter.sortPass(SequenceFile.java:1413)
    [junit]     at org.apache.hadoop.io.SequenceFile$Sorter.sort(SequenceFile.java:1386)
    [junit]     at org.apache.hadoop.io.SequenceFile$Sorter.sort(SequenceFile.java:1406)
    [junit]     at org.apache.hadoop.io.TestSequenceFile.sortTest(TestSequenceFile.java:178)

Since sorting should not do any inflating, the Inflater should probably not be created in this case.  So maybe we should lazily initialize this field?

More generally, before we commit this we should ensure that performance is comparable to what it was before.  Creating a new ValueBytes wrapper per entry processed when sorting looks expensive to me, but this may in fact be insignificant.  If it is significant, then we might replace the ValueBytes API with a compressor API, where the bytes to be compressed are passed explicitly.


> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFile.updated.final.patch, SequenceFiles.final.patch, SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 18:34:16 2006
Return-Path: 
 <hadoop-dev-return-3200-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5156 invoked from network); 18 Aug 2006 18:34:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 18:34:16 -0000
Received: (qmail 1962 invoked by uid 500); 18 Aug 2006 18:34:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1935 invoked by uid 500); 18 Aug 2006 18:34:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1926 invoked by uid 99); 18 Aug 2006 18:34:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 11:34:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 11:34:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 692EB7142E4
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 18:31:16 +0000 (GMT)
Message-ID: <28252037.1155925876428.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 11:31:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-312?page=all ]

Doug Cutting updated HADOOP-312:
--------------------------------

    Status: Open  (was: Patch Available)

When connecting, we should first create an unconnected socket, then attempt to connect with an explicit timeout, and retry the connect if it fails.  Otherwise the retries are subject to whaterver the default timeout is.  Since, with this patch, we're connecting much more, the connect timeout is more significant and should not be left to the system default.

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 18:56:31 2006
Return-Path: 
 <hadoop-dev-return-3201-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17277 invoked from network); 18 Aug 2006 18:56:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 18:56:31 -0000
Received: (qmail 52237 invoked by uid 500); 18 Aug 2006 18:56:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52197 invoked by uid 500); 18 Aug 2006 18:56:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52168 invoked by uid 99); 18 Aug 2006 18:56:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 11:56:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 11:56:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D3FE441000B
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 18:53:14 +0000 (GMT)
Message-ID: <17415582.1155927194865.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 11:53:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12429083 ] 
            
Doug Cutting commented on HADOOP-312:
-------------------------------------

Also, all connection retries should be logged.

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 20:08:19 2006
Return-Path: 
 <hadoop-dev-return-3202-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52540 invoked from network); 18 Aug 2006 20:08:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 20:08:19 -0000
Received: (qmail 76483 invoked by uid 500); 18 Aug 2006 20:08:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76465 invoked by uid 500); 18 Aug 2006 20:08:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76451 invoked by uid 99); 18 Aug 2006 20:08:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 13:08:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 13:08:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E54787142D5
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 20:05:14 +0000 (GMT)
Message-ID: <21287359.1155931514936.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 13:05:14 -0700 (PDT)
From: "woyg (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-461) Build broken forjava version
 "1.4.2_09"
In-Reply-To: <23861547.1155919710927.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-461?page=all ]

woyg updated HADOOP-461:
------------------------

    Status: In Progress  (was: Patch Available)

> Build broken forjava version "1.4.2_09"
> ---------------------------------------
>
>                 Key: HADOOP-461
>                 URL: http://issues.apache.org/jira/browse/HADOOP-461
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>         Environment: java version "1.4.2_09"
> Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_09-233)
> Java HotSpot(TM) Client VM (build 1.4.2-56, mixed mode)   
> Mac OS X - version 10.3.9
> 1.5GHz PowerPC G4
>            Reporter: woyg
>            Priority: Trivial
>         Attachments: build_broken_on_java1.4.diff, build_broken_on_java1.4.txt
>
>
> Build is broken on java 1.4.2_09.
> Method java.lang.Boolean.parseBoolean(String val) is  available since Java 5
> http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Boolean.html#parseBoolean(java.lang.String)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 20:08:19 2006
Return-Path: 
 <hadoop-dev-return-3203-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52527 invoked from network); 18 Aug 2006 20:08:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 20:08:19 -0000
Received: (qmail 76838 invoked by uid 500); 18 Aug 2006 20:08:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76823 invoked by uid 500); 18 Aug 2006 20:08:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76814 invoked by uid 99); 18 Aug 2006 20:08:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 13:08:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 13:08:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 75E007142E5
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 20:05:16 +0000 (GMT)
Message-ID: <13395692.1155931516480.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 13:05:16 -0700 (PDT)
From: "woyg (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-461) Build broken forjava version
 "1.4.2_09"
In-Reply-To: <23861547.1155919710927.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-461?page=all ]

woyg updated HADOOP-461:
------------------------

    Attachment: build_broken_on_java1.4.diff

Diff file after fix

> Build broken forjava version "1.4.2_09"
> ---------------------------------------
>
>                 Key: HADOOP-461
>                 URL: http://issues.apache.org/jira/browse/HADOOP-461
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>         Environment: java version "1.4.2_09"
> Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_09-233)
> Java HotSpot(TM) Client VM (build 1.4.2-56, mixed mode)   
> Mac OS X - version 10.3.9
> 1.5GHz PowerPC G4
>            Reporter: woyg
>            Priority: Trivial
>         Attachments: build_broken_on_java1.4.diff, build_broken_on_java1.4.txt
>
>
> Build is broken on java 1.4.2_09.
> Method java.lang.Boolean.parseBoolean(String val) is  available since Java 5
> http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Boolean.html#parseBoolean(java.lang.String)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 21:02:18 2006
Return-Path: 
 <hadoop-dev-return-3204-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64855 invoked from network); 18 Aug 2006 21:02:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 21:02:18 -0000
Received: (qmail 37184 invoked by uid 500); 18 Aug 2006 21:02:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37123 invoked by uid 500); 18 Aug 2006 21:02:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36885 invoked by uid 99); 18 Aug 2006 21:02:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 14:02:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 14:02:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 363D07142E4
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 20:59:15 +0000 (GMT)
Message-ID: <25926979.1155934755219.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 13:59:15 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-462) DFSShell throws out arrayoutofbounds
 exceptions if the number of arguments is not right
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DFSShell throws out arrayoutofbounds exceptions if the number of arguments is not right
---------------------------------------------------------------------------------------

                 Key: HADOOP-462
                 URL: http://issues.apache.org/jira/browse/HADOOP-462
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Mahadev konar
            Priority: Minor


All the DFSShell commands do not check for the number of arguments. In DFSShell.run(), the args length is not checked before calling copyfromlocal, movefromlocal, copytolocal, and some others as well. This throws out arrrayoutofbounds exception in case lesser number of arguments is specified.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 21:13:20 2006
Return-Path: 
 <hadoop-dev-return-3205-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68479 invoked from network); 18 Aug 2006 21:13:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 21:13:20 -0000
Received: (qmail 49896 invoked by uid 500); 18 Aug 2006 21:13:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49878 invoked by uid 500); 18 Aug 2006 21:13:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49869 invoked by uid 99); 18 Aug 2006 21:13:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 14:13:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 14:13:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 56656714219
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 21:10:15 +0000 (GMT)
Message-ID: <26416542.1155935415351.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 14:10:15 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-421) replace String in hadoop record io
 with the new Text class
In-Reply-To: <2032099.1154550733971.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-421?page=all ]

Milind Bhandarkar updated HADOOP-421:
-------------------------------------

    Attachment:     (was: recordio.patch)

> replace String in hadoop record io with the new Text class
> ----------------------------------------------------------
>
>                 Key: HADOOP-421
>                 URL: http://issues.apache.org/jira/browse/HADOOP-421
>             Project: Hadoop
>          Issue Type: Bug
>          Components: record
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.6.0
>
>
> The record io in Java is currently using String and should be using the new Text class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 21:15:15 2006
Return-Path: 
 <hadoop-dev-return-3206-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68789 invoked from network); 18 Aug 2006 21:15:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 21:15:15 -0000
Received: (qmail 50547 invoked by uid 500); 18 Aug 2006 21:15:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50527 invoked by uid 500); 18 Aug 2006 21:15:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50518 invoked by uid 99); 18 Aug 2006 21:15:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 14:15:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 14:15:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5C035714219
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 21:12:15 +0000 (GMT)
Message-ID: <9254601.1155935535374.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 14:12:15 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-421) replace String in hadoop record io
 with the new Text class
In-Reply-To: <2032099.1154550733971.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-421?page=all ]

Milind Bhandarkar updated HADOOP-421:
-------------------------------------

    Attachment: recordio.patch

Earlier patch had a bug in xml escaping of special chars. I have removed that patch from the bug reports, and have added this fixed patch.

> replace String in hadoop record io with the new Text class
> ----------------------------------------------------------
>
>                 Key: HADOOP-421
>                 URL: http://issues.apache.org/jira/browse/HADOOP-421
>             Project: Hadoop
>          Issue Type: Bug
>          Components: record
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.6.0
>
>         Attachments: recordio.patch
>
>
> The record io in Java is currently using String and should be using the new Text class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 22:12:17 2006
Return-Path: 
 <hadoop-dev-return-3207-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86944 invoked from network); 18 Aug 2006 22:12:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 22:12:17 -0000
Received: (qmail 30966 invoked by uid 500); 18 Aug 2006 22:12:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30945 invoked by uid 500); 18 Aug 2006 22:12:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30936 invoked by uid 99); 18 Aug 2006 22:12:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 15:12:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 15:12:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0636C7142EB
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 22:09:16 +0000 (GMT)
Message-ID: <14071210.1155938956022.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 15:09:16 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-463) variable expansion in Configuration
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

variable expansion in Configuration
-----------------------------------

                 Key: HADOOP-463
                 URL: http://issues.apache.org/jira/browse/HADOOP-463
             Project: Hadoop
          Issue Type: Improvement
          Components: conf
            Reporter: Michel Tourn


Add variable expansion to Configuration class.
=================

This is necessary for shared, client-side configurations:

A Job submitter (an HDFS client) requires:
<name>dfs.data.dir</name><value>/tmp/${user.name}/dfs</value>

A local-mode mapreduce requires:
<name>mapred.temp.dir</name><value>/tmp/${user.name}/mapred/tmp</value>

Why this is necessary :
=================

Currently we use shared directories like:
<name>dfs.data.dir</name><value>/tmp/dfs</value>
This superficially seems to work.
After all, different JVM clients create their own private subdirectory map_xxxx., so they will not conflict.

What really happens:

1. /tmp/ is world-writable, as it's supposed to.
2. Hadoop will create missing subdirectories. 
This is Java so that for ex. /tmp/system is created as writable only by the JVM process user
3. This is a shared client machine so next user's JVM will find /tmp/system owned by somebody else. Creating a directory within /tmp/system fails

Implementation of var expansion
=============
in class Configuration, 
The Properties really store things like put("banner", "hello ${user.name}");
In public String get(String name): postprocess the returned value:
Use a regexp to find the pattern ${xxxx}
Lookup xxxx as a system property
If found, replace ${xxxx} by the system property value.
Else leave as-is. An unexpanded ${xxxx} is a hint that the variable name is invalid.


Other workarounds 
===============
The other proposed workarounds are not as elegant as variable expansion.

Workaround 1: 
have an installation script which does:
mkdir /tmp/dfs
chmod uga+rw /tmp/dfs
repeat for ALL configured subdirectories at ANY nesting level
keep the script in sync with changes to hadoop properties.
support on non-Unix platform
Make sure the installtion script runs before Hadoop runs for the first time.
If users change the permissions/delete any of the shared directories, it breaks again.

Workaround 2: 
do the chmod operations from within the Hadoop code.
In pure java 1.4, 1.5 this is not possible.
It requires the Hadoop client process to have chmod privilege (rather than just mkdir privilege)
It requires to special-case directory creation code.




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 18 22:14:15 2006
Return-Path: 
 <hadoop-dev-return-3208-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87372 invoked from network); 18 Aug 2006 22:14:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 22:14:15 -0000
Received: (qmail 34039 invoked by uid 500); 18 Aug 2006 22:14:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34018 invoked by uid 500); 18 Aug 2006 22:14:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34009 invoked by uid 99); 18 Aug 2006 22:14:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 15:14:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 15:14:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CF7707142E8
	for <hadoop-dev@lucene.apache.org>; Fri, 18 Aug 2006 22:11:14 +0000 (GMT)
Message-ID: <5155550.1155939074846.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 15:11:14 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-463) variable expansion in Configuration
In-Reply-To: <14071210.1155938956022.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-463?page=all ]

Michel Tourn updated HADOOP-463:
--------------------------------

    Description: 
Add variable expansion to Configuration class.
=================

This is necessary for shared, client-side configurations:

A Job submitter (an HDFS client) requires:
<name>dfs.data.dir</name><value>/tmp/${user.name}/dfs</value>

A local-mode mapreduce requires:
<name>mapred.temp.dir</name><value>/tmp/${user.name}/mapred/tmp</value>

Why this is necessary :
=================

Currently we use shared directories like:
<name>dfs.data.dir</name><value>/tmp/dfs</value>
This superficially seems to work.
After all, different JVM clients create their own private subdirectory map_xxxx., so they will not conflict.

What really happens:

1. /tmp/ is world-writable, as it's supposed to.
2. Hadoop will create missing subdirectories. 
This is Java so that for ex. /tmp/system is created as writable only by the JVM process user
3. This is a shared client machine so next user's JVM will find /tmp/system owned by somebody else. Creating a directory within /tmp/system fails

Implementation of var expansion
=============
in class Configuration, 
The Properties really store things like put("banner", "hello ${user.name}");
In public String get(String name): postprocess the returned value:
Use a regexp to find the pattern ${xxxx}
Lookup xxxx as a system property
If found, replace ${xxxx} by the system property value.
Else leave as-is. An unexpanded ${xxxx} is a hint that the variable name is invalid.


Other workarounds 
===============
The other proposed workarounds are not as elegant as variable expansion.

Workaround 1: 
have an installation script which does:
mkdir /tmp/dfs
chmod uga+rw /tmp/dfs
repeat for ALL configured subdirectories at ANY nesting level
keep the script in sync with changes to hadoop XML configuration files.
Support the script on non-Unix platform
Make sure the installtion script runs before Hadoop runs for the first time.
If users change the permissions/delete any of the shared directories, it breaks again.

Workaround 2: 
do the chmod operations from within the Hadoop code.
In pure java 1.4, 1.5 this is not possible.
It requires the Hadoop client process to have chmod privilege (rather than just mkdir privilege)
It requires to special-case directory creation code.




  was:
Add variable expansion to Configuration class.
=================

This is necessary for shared, client-side configurations:

A Job submitter (an HDFS client) requires:
<name>dfs.data.dir</name><value>/tmp/${user.name}/dfs</value>

A local-mode mapreduce requires:
<name>mapred.temp.dir</name><value>/tmp/${user.name}/mapred/tmp</value>

Why this is necessary :
=================

Currently we use shared directories like:
<name>dfs.data.dir</name><value>/tmp/dfs</value>
This superficially seems to work.
After all, different JVM clients create their own private subdirectory map_xxxx., so they will not conflict.

What really happens:

1. /tmp/ is world-writable, as it's supposed to.
2. Hadoop will create missing subdirectories. 
This is Java so that for ex. /tmp/system is created as writable only by the JVM process user
3. This is a shared client machine so next user's JVM will find /tmp/system owned by somebody else. Creating a directory within /tmp/system fails

Implementation of var expansion
=============
in class Configuration, 
The Properties really store things like put("banner", "hello ${user.name}");
In public String get(String name): postprocess the returned value:
Use a regexp to find the pattern ${xxxx}
Lookup xxxx as a system property
If found, replace ${xxxx} by the system property value.
Else leave as-is. An unexpanded ${xxxx} is a hint that the variable name is invalid.


Other workarounds 
===============
The other proposed workarounds are not as elegant as variable expansion.

Workaround 1: 
have an installation script which does:
mkdir /tmp/dfs
chmod uga+rw /tmp/dfs
repeat for ALL configured subdirectories at ANY nesting level
keep the script in sync with changes to hadoop properties.
support on non-Unix platform
Make sure the installtion script runs before Hadoop runs for the first time.
If users change the permissions/delete any of the shared directories, it breaks again.

Workaround 2: 
do the chmod operations from within the Hadoop code.
In pure java 1.4, 1.5 this is not possible.
It requires the Hadoop client process to have chmod privilege (rather than just mkdir privilege)
It requires to special-case directory creation code.





> variable expansion in Configuration
> -----------------------------------
>
>                 Key: HADOOP-463
>                 URL: http://issues.apache.org/jira/browse/HADOOP-463
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>            Reporter: Michel Tourn
>
> Add variable expansion to Configuration class.
> =================
> This is necessary for shared, client-side configurations:
> A Job submitter (an HDFS client) requires:
> <name>dfs.data.dir</name><value>/tmp/${user.name}/dfs</value>
> A local-mode mapreduce requires:
> <name>mapred.temp.dir</name><value>/tmp/${user.name}/mapred/tmp</value>
> Why this is necessary :
> =================
> Currently we use shared directories like:
> <name>dfs.data.dir</name><value>/tmp/dfs</value>
> This superficially seems to work.
> After all, different JVM clients create their own private subdirectory map_xxxx., so they will not conflict.
> What really happens:
> 1. /tmp/ is world-writable, as it's supposed to.
> 2. Hadoop will create missing subdirectories. 
> This is Java so that for ex. /tmp/system is created as writable only by the JVM process user
> 3. This is a shared client machine so next user's JVM will find /tmp/system owned by somebody else. Creating a directory within /tmp/system fails
> Implementation of var expansion
> =============
> in class Configuration, 
> The Properties really store things like put("banner", "hello ${user.name}");
> In public String get(String name): postprocess the returned value:
> Use a regexp to find the pattern ${xxxx}
> Lookup xxxx as a system property
> If found, replace ${xxxx} by the system property value.
> Else leave as-is. An unexpanded ${xxxx} is a hint that the variable name is invalid.
> Other workarounds 
> ===============
> The other proposed workarounds are not as elegant as variable expansion.
> Workaround 1: 
> have an installation script which does:
> mkdir /tmp/dfs
> chmod uga+rw /tmp/dfs
> repeat for ALL configured subdirectories at ANY nesting level
> keep the script in sync with changes to hadoop XML configuration files.
> Support the script on non-Unix platform
> Make sure the installtion script runs before Hadoop runs for the first time.
> If users change the permissions/delete any of the shared directories, it breaks again.
> Workaround 2: 
> do the chmod operations from within the Hadoop code.
> In pure java 1.4, 1.5 this is not possible.
> It requires the Hadoop client process to have chmod privilege (rather than just mkdir privilege)
> It requires to special-case directory creation code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug 19 00:26:15 2006
Return-Path: 
 <hadoop-dev-return-3209-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25784 invoked from network); 19 Aug 2006 00:26:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2006 00:26:15 -0000
Received: (qmail 56685 invoked by uid 500); 19 Aug 2006 00:26:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56663 invoked by uid 500); 19 Aug 2006 00:26:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56654 invoked by uid 99); 19 Aug 2006 00:26:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 17:26:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 17:26:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D404B7142E4
	for <hadoop-dev@lucene.apache.org>; Sat, 19 Aug 2006 00:23:14 +0000 (GMT)
Message-ID: <14835053.1155946994865.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 17:23:14 -0700 (PDT)
From: "Kimoon Kim (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-428) Condor and Hadoop Map Reduce
 integration
In-Reply-To: <17661487.1154983273932.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-428?page=comments#action_12429160 ] 
            
Kimoon Kim commented on HADOOP-428:
-----------------------------------

Found a 2005 paper where the authors modified condor_startd so that node ClassAd includes the list of SRM input files available on an execute node. (see http://sdm.lbl.gov/~arie/papers/CoScheduling.SSDBM05.pdf)  This allows a task to be scheduled to a node that has an input file, similar to how a map task of hadoop gets scheduled. Authors claim the modification of condor_startd was not so hard to them. Key optimization was not to import all files, but to only import files for current job(s) so that Condor matchmaking avoids scale barrier. 

> Condor and Hadoop Map Reduce integration
> ----------------------------------------
>
>                 Key: HADOOP-428
>                 URL: http://issues.apache.org/jira/browse/HADOOP-428
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>
> The issue is about using/enhancing Condor's features for Hadoop's Map Reduce framework. Some of the early thoughts in this respect:
> * One should be able to submit a MR job that takes advantage of Condor's features like node reservation according to a job's requirements, monitoring of jobs, etc.
> * JobTracker and TaskTrackers work as Master/Workers in the Condor environment. One should be able to simply start a MR cluster and the cluster goes down when the job is done.
> * The classads can have an attribute for input file block locations that will be an input to Condor's scheduling decisions.
> * Condor's features of monitoring jobs can be leveraged to reschedule failed TaskTrackers. Checkpointing of JobTrackers can also probably be done so that if the JobTracker job dies for some reason, the failed jobs can be restarted to start from the point where the JobTracker was last checkpointed at (assuming the input data has not changed).
> * User priorities, job priorities should also be handled. If nodes are currently in use due to a job being run by one user, and another user of the same priority submits a new job, it gets queued and opportunistically the job of the second user is scheduled - for e.g., one master and 1 worker to start with and then 2 workers and so on... If the second user is of a higher priority, then the first user's job is completely suspended.
> Please add your thoughts on this topic.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug 19 00:42:19 2006
Return-Path: 
 <hadoop-dev-return-3210-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29771 invoked from network); 19 Aug 2006 00:42:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2006 00:42:19 -0000
Received: (qmail 68612 invoked by uid 500); 19 Aug 2006 00:42:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68562 invoked by uid 500); 19 Aug 2006 00:42:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68464 invoked by uid 99); 19 Aug 2006 00:42:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 17:42:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 17:42:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1AE6B7142E8
	for <hadoop-dev@lucene.apache.org>; Sat, 19 Aug 2006 00:39:17 +0000 (GMT)
Message-ID: <31480789.1155947957107.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 17:39:17 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-464) Troubleshooting message for RunJar
 (bin/hadoop jar)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Troubleshooting message for RunJar (bin/hadoop jar)
---------------------------------------------------

                 Key: HADOOP-464
                 URL: http://issues.apache.org/jira/browse/HADOOP-464
             Project: Hadoop
          Issue Type: Improvement
          Components: util
            Reporter: Michel Tourn
         Attachments: runjar.patch

Many users get this exception when using bin/hadoop
There are various reasons:
HADOOP_CONF_DIR or HADOOP_HOME misconfigured. 
"hadoop jar" parameter incorrect

So the patch displays the path of the jar it is trying to open if this fails: 

Problem while opening hadoop job jar: /home/build/hadoop-streaming.jar
Exception in thread "main" java.util.zip.ZipException: error in opening zip file
        at java.util.zip.ZipFile.open(Native Method)
        at java.util.zip.ZipFile.<init>(ZipFile.java:203)
        at java.util.jar.JarFile.<init>(JarFile.java:132)
        at java.util.jar.JarFile.<init>(JarFile.java:70)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:80)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug 19 01:16:16 2006
Return-Path: 
 <hadoop-dev-return-3211-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41012 invoked from network); 19 Aug 2006 01:16:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2006 01:16:16 -0000
Received: (qmail 95119 invoked by uid 500); 19 Aug 2006 01:16:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95099 invoked by uid 500); 19 Aug 2006 01:16:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95090 invoked by uid 99); 19 Aug 2006 01:16:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 18:16:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 18:16:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5314D7142E5
	for <hadoop-dev@lucene.apache.org>; Sat, 19 Aug 2006 01:13:15 +0000 (GMT)
Message-ID: <32875552.1155949995337.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 18:13:15 -0700 (PDT)
From: "Kimoon Kim (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12429168 ] 
            
Kimoon Kim commented on HADOOP-331:
-----------------------------------

Instead of one output, what about n outputs, where 1 <= n < # reducers? n can be configurable and is set to a number that can avoid FS thrashing. Each output file contains a disjoint set of partitions so that reducer in need of a partition will later access only one file. Increased locality.

Given we are thinking of sorting map outputs,  this also allows us to avoid global sorting. i.e. sorting happens on one output file at a time that has only small set of data.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Yoram Arnon
>             Fix For: 0.6.0
>
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug 19 06:12:15 2006
Return-Path: 
 <hadoop-dev-return-3212-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88475 invoked from network); 19 Aug 2006 06:12:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2006 06:12:15 -0000
Received: (qmail 30428 invoked by uid 500); 19 Aug 2006 06:12:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30411 invoked by uid 500); 19 Aug 2006 06:12:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30402 invoked by uid 99); 19 Aug 2006 06:12:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 23:12:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 23:12:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ECC2C7142E4
	for <hadoop-dev@lucene.apache.org>; Sat, 19 Aug 2006 06:09:13 +0000 (GMT)
Message-ID: <5436599.1155967753966.JavaMail.jira@brutus>
Date: Fri, 18 Aug 2006 23:09:13 -0700 (PDT)
From: "Chris Schneider (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-465) Jobtracker doesn't always spread
 reduce tasks evenly if (mapred.tasktracker.tasks.maximum > 1)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Jobtracker doesn't always spread reduce tasks evenly if (mapred.tasktracker.tasks.maximum > 1)
----------------------------------------------------------------------------------------------

                 Key: HADOOP-465
                 URL: http://issues.apache.org/jira/browse/HADOOP-465
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Chris Schneider
            Priority: Minor


I note that (at least for Nutch 0.8 Generator.Selector.reduce) if mapred.reduce.tasks is the same as the number of tasktrackers, and mapred.tasktracker.tasks.maximum is left at the default of 2, I typically have no reduce tasks running on a few of my tasktrackers, and two reduce tasks running on the same number of other tasktrackers.

It seems like the jobtracker should assign reduce tasks to tasktrackers in a round robin fashion, so that the distribution will be spread as evenly as possible. The current implementation would seem to waste at least some time if one or more slave machines have to execute two reduce tasks simultaneously while other tasktrackers sit idle, with the amount of wasted time depending on how dependent the reduce tasks were on the slave machine's resources.

I first thought that perhaps the jobtracker was "overloading" the tasktrackers that had already finished their map tasks (and avoiding those that were still mapping). However, as I understand it, the reduce tasks are all launched at the beginning of the job so that they are all ready and waiting for map output data when it first appears.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug 19 18:18:18 2006
Return-Path: 
 <hadoop-dev-return-3213-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58224 invoked from network); 19 Aug 2006 18:18:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2006 18:18:18 -0000
Received: (qmail 8648 invoked by uid 500); 19 Aug 2006 18:18:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8472 invoked by uid 500); 19 Aug 2006 18:18:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8463 invoked by uid 99); 19 Aug 2006 18:18:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 11:18:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 11:18:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D4BF1410010
	for <hadoop-dev@lucene.apache.org>; Sat, 19 Aug 2006 18:15:15 +0000 (GMT)
Message-ID: <9677011.1156011315868.JavaMail.jira@brutus>
Date: Sat, 19 Aug 2006 11:15:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-312?page=all ]

Devaraj Das updated HADOOP-312:
-------------------------------

    Attachment: no_conn_caching.patch

Incorporated the comments by Doug.

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 07:31:21 2006
Return-Path: 
 <hadoop-dev-return-3214-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5082 invoked from network); 21 Aug 2006 07:31:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 07:31:21 -0000
Received: (qmail 57167 invoked by uid 500); 21 Aug 2006 07:31:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56993 invoked by uid 500); 21 Aug 2006 07:31:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56984 invoked by uid 99); 21 Aug 2006 07:31:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 00:31:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 00:31:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E16AC7142A1
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 07:28:13 +0000 (GMT)
Message-ID: <18080349.1156145293920.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 00:28:13 -0700 (PDT)
From: "Vetle Roeim (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-466) Startup scripts will not start
 instances of Hadoop daemons w/different configs w/o setting separate PID
 directories
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Startup scripts will not start instances of Hadoop daemons w/different configs w/o setting separate PID directories
-------------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-466
                 URL: http://issues.apache.org/jira/browse/HADOOP-466
             Project: Hadoop
          Issue Type: Improvement
    Affects Versions: 0.5.0
            Reporter: Vetle Roeim


Configuration directories can be specified by either setting HADOOP_CONF_DIR or using the --config command line option. However, the hadoop-daemon.sh script will not start the daemons unless the PID directory is separate for each configuration.

The issue is that the code for generating PID filenames is not dependent on the configuration directory. While the PID directory can be changed in hadoop-env.sh, it seems a little unnecessary to have this restriction.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 07:35:23 2006
Return-Path: 
 <hadoop-dev-return-3215-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7330 invoked from network); 21 Aug 2006 07:35:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 07:35:23 -0000
Received: (qmail 63873 invoked by uid 500); 21 Aug 2006 07:35:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63699 invoked by uid 500); 21 Aug 2006 07:35:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63436 invoked by uid 99); 21 Aug 2006 07:35:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 00:35:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 00:35:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 034C941000E
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 07:32:17 +0000 (GMT)
Message-ID: <26196546.1156145537010.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 00:32:17 -0700 (PDT)
From: "Vetle Roeim (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-466) Startup scripts will not start
 instances of Hadoop daemons w/different configs w/o setting separate PID
 directories
In-Reply-To: <18080349.1156145293920.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-466?page=all ]

Vetle Roeim updated HADOOP-466:
-------------------------------

    Attachment: hadoop-466.diff

This patch generates a md5 hash from the HADOOP_CONF_DIR variable, and uses that in the PID filename.

This will fix this issue, allowing daemons to be started with separate configurations, without having to create and configure separate directories for PID files.

> Startup scripts will not start instances of Hadoop daemons w/different configs w/o setting separate PID directories
> -------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-466
>                 URL: http://issues.apache.org/jira/browse/HADOOP-466
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Vetle Roeim
>         Attachments: hadoop-466.diff
>
>
> Configuration directories can be specified by either setting HADOOP_CONF_DIR or using the --config command line option. However, the hadoop-daemon.sh script will not start the daemons unless the PID directory is separate for each configuration.
> The issue is that the code for generating PID filenames is not dependent on the configuration directory. While the PID directory can be changed in hadoop-env.sh, it seems a little unnecessary to have this restriction.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 09:17:23 2006
Return-Path: 
 <hadoop-dev-return-3216-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31031 invoked from network); 21 Aug 2006 09:17:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 09:17:23 -0000
Received: (qmail 83351 invoked by uid 500); 21 Aug 2006 09:17:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83310 invoked by uid 500); 21 Aug 2006 09:17:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83082 invoked by uid 99); 21 Aug 2006 09:17:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 02:17:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 02:17:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 510AD7142E4
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 09:14:15 +0000 (GMT)
Message-ID: <4386369.1156151655328.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 02:14:15 -0700 (PDT)
From: "woyg (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-467) Building test cases broken on
 java-1.4, TextTest.java has string creation bug.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Building test cases broken on java-1.4, TextTest.java has string creation bug.
------------------------------------------------------------------------------

                 Key: HADOOP-467
                 URL: http://issues.apache.org/jira/browse/HADOOP-467
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.5.0
         Environment: Java HotSpot(TM) Client VM (build 1.4.2_10-b03, mixed mode)
rajaram.desktop% Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_10-b03)

RHEL3
            Reporter: woyg
            Priority: Minor
         Attachments: testCasesNotCompilableOnjava1.4.patch

*Test Files
--- src/test/org/apache/hadoop/io/TestText.java (revision 432549)
--- src/test/org/apache/hadoop/mapred/MiniMRCluster.java        (revision 432549)
--- src/test/org/apache/hadoop/mapred/TestSequenceFileInputFilter.java  (revision 432549)
--- src/test/org/apache/hadoop/dfs/TestDFSShellGenericOptions.java      (revision 432549)

Broken on java-1.4
and a bug in static method getTestString(int len).
This function generates a character with code point equal or smaller then 0xFFFF, and converts this into array of chars of size 2(which should be one) and appened it buffer.
So resulting into a a null character tobe inserted into string after a no null character.
 ----
Find Patch attached.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 13:59:19 2006
Return-Path: 
 <hadoop-dev-return-3217-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35627 invoked from network); 21 Aug 2006 13:59:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 13:59:19 -0000
Received: (qmail 66618 invoked by uid 500); 21 Aug 2006 13:59:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66445 invoked by uid 500); 21 Aug 2006 13:59:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66435 invoked by uid 99); 21 Aug 2006 13:59:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 06:59:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 06:59:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E96C57142F1
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 13:56:13 +0000 (GMT)
Message-ID: <5671844.1156168573953.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 06:56:13 -0700 (PDT)
From: "Vetle Roeim (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-468) Setting scheduling priority in
 hadoop-env.sh
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Setting scheduling priority in hadoop-env.sh
--------------------------------------------

                 Key: HADOOP-468
                 URL: http://issues.apache.org/jira/browse/HADOOP-468
             Project: Hadoop
          Issue Type: Improvement
    Affects Versions: 0.5.0
            Reporter: Vetle Roeim
            Priority: Minor
         Attachments: sched_priority.diff

It is not possible to set the scheduling priority in the Hadoop configuration. Attached is a patch for starting the Hadoop daemons through nice with the configured priority (can be configured in conf/hadoop-env.sh, for instance).

I would have included a patch for conf/hadoop-env.sh as well, but it seems to be ignored?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 15:28:19 2006
Return-Path: 
 <hadoop-dev-return-3218-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66456 invoked from network); 21 Aug 2006 15:28:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 15:28:19 -0000
Received: (qmail 83862 invoked by uid 500); 21 Aug 2006 15:28:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83838 invoked by uid 500); 21 Aug 2006 15:28:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83829 invoked by uid 99); 21 Aug 2006 15:28:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 08:28:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 08:28:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 07E9E7142F0
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 15:25:14 +0000 (GMT)
Message-ID: <14494062.1156173914029.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 08:25:14 -0700 (PDT)
From: "Jean-Baptiste Quenot (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-469) Portability of hadoop shell scripts
 for deployment
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Portability of hadoop shell scripts for deployment
--------------------------------------------------

                 Key: HADOOP-469
                 URL: http://issues.apache.org/jira/browse/HADOOP-469
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.5.0
            Reporter: Jean-Baptiste Quenot
         Attachments: 20060821-hadoop-bin

Hadoop shell scripts are based on /bin/bash, which is a "standard" shell only on GNU/Linux. On other Unix systems like FreeBSD however the "standard" shell is /bin/sh. The attached patch addresses these compatiblity issues.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 16:57:23 2006
Return-Path: 
 <hadoop-dev-return-3219-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4088 invoked from network); 21 Aug 2006 16:57:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 16:57:23 -0000
Received: (qmail 85196 invoked by uid 500); 21 Aug 2006 16:57:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85171 invoked by uid 500); 21 Aug 2006 16:57:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85162 invoked by uid 99); 21 Aug 2006 16:57:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 09:57:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 09:57:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 661DC7142F6
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 16:54:18 +0000 (GMT)
Message-ID: <23251933.1156179258415.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 09:54:18 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-54?page=all ]

Arun C Murthy updated HADOOP-54:
--------------------------------

    Attachment: SequenceFile.20060821.patch

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFile.20060821.patch, SequenceFile.updated.final.patch, SequenceFiles.final.patch, SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 17:08:50 2006
Return-Path: 
 <hadoop-dev-return-3220-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8283 invoked from network); 21 Aug 2006 17:08:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 17:08:50 -0000
Received: (qmail 12902 invoked by uid 500); 21 Aug 2006 17:08:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12883 invoked by uid 500); 21 Aug 2006 17:08:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12874 invoked by uid 99); 21 Aug 2006 17:08:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 10:08:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.192.82] (HELO rwcrmhc12.comcast.net) (204.127.192.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 10:08:47 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc12) with ESMTP
          id <20060821170825m12001881ae>; Mon, 21 Aug 2006 17:08:26 +0000
Message-ID: <44E9E893.5010600@apache.org>
Date: Mon, 21 Aug 2006 10:08:35 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: JRuby, anyone?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Owen supplied an example of how to write mappers and reducers in Python 
using Jython.

http://svn.apache.org/viewvc/lucene/hadoop/trunk/src/examples/python/

A similar example in Ruby, using JRuby, would be cool to have.

http://jruby.codehaus.org/

Doug

From MAILER-DAEMON Mon Aug 21 17:12:26 2006
Return-Path: 
 <hadoop-dev-return-3222-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11187 invoked from network); 21 Aug 2006 17:12:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 17:12:26 -0000
Received: (qmail 21511 invoked by uid 500); 21 Aug 2006 17:12:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21484 invoked by uid 500); 21 Aug 2006 17:12:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21475 invoked by uid 99); 21 Aug 2006 17:12:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 10:12:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 10:12:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 651627142F0
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 17:09:16 +0000 (GMT)
Message-ID: <1404570.1156180156411.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 10:09:16 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-54?page=all ]

Arun C Murthy updated HADOOP-54:
--------------------------------

    Attachment: SequenceFile.20060821.perfomance.txt

Doug - here's another patch incorporating the fix (lazy initialization of the inflater) plus your other suggestions.

I've also attached results of a quick test run of SequenceFile-v3 v/s SequenceFile-v4 (2 runs of 10k and 100k records respectively). Within that framework it seems reasonable to assume that creating one ValueBytes object per-record doesn't show  up blatantly (of course we can further iterate on this); IAC there is a safety net for extreme corner cases (http://issues.apache.org/jira/browse/HADOOP-54#action_12425953).

PS: The existing TestSequenceFile.java in trunk doesn't pass along the 'compress' flag to mergeTest - I ran the tests after fixing it; the patch reflects that too. Just fyi.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFile.20060821.patch, SequenceFile.20060821.perfomance.txt, SequenceFile.updated.final.patch, SequenceFiles.final.patch, SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 17:12:23 2006
Return-Path: 
 <hadoop-dev-return-3221-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11155 invoked from network); 21 Aug 2006 17:12:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 17:12:23 -0000
Received: (qmail 21293 invoked by uid 500); 21 Aug 2006 17:12:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21268 invoked by uid 500); 21 Aug 2006 17:12:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21259 invoked by uid 99); 21 Aug 2006 17:12:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 10:12:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 10:12:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6917D7142F1
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 17:09:18 +0000 (GMT)
Message-ID: <16361435.1156180158428.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 10:09:18 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-54?page=all ]

Arun C Murthy updated HADOOP-54:
--------------------------------

    Status: Patch Available  (was: Open)

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFile.20060821.patch, SequenceFile.20060821.perfomance.txt, SequenceFile.updated.final.patch, SequenceFiles.final.patch, SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 17:23:54 2006
Return-Path: 
 <hadoop-dev-return-3223-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14278 invoked from network); 21 Aug 2006 17:23:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 17:23:54 -0000
Received: (qmail 38422 invoked by uid 500); 21 Aug 2006 17:23:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38400 invoked by uid 500); 21 Aug 2006 17:23:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38391 invoked by uid 99); 21 Aug 2006 17:23:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 10:23:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.68.5.9] (HELO relay00.pair.com) (209.68.5.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 21 Aug 2006 10:23:53 -0700
Received: (qmail 84879 invoked from network); 21 Aug 2006 17:23:32 -0000
Received: from unknown (HELO ?127.0.0.1?) (unknown)
  by unknown with SMTP; 21 Aug 2006 17:23:32 -0000
X-pair-Authenticated: 209.68.1.139
Message-ID: <44E9EC13.80807@pagesmiths.com>
Date: Mon, 21 Aug 2006 10:23:31 -0700
From: Jim White <jim@pagesmiths.com>
User-Agent: Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US;
 rv:1.7.11) Gecko/20050727
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: TextInputFormat bug - lines which are *not* split
X-Enigmail-Version: 0.93.0.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

As I don't have Hadoop installed (yet), I'm not able to offer a test
case, but I'm fairly confident of a bug line TextInputFormat.

The current implementation will ignore the first line of a file split
when the previous split ended with a newline.

There are two ways to fix this, the easiest (and most efficient) is for
the preceding split to always read up to the first newline in the
succeeding split.

Changing:

http://svn.apache.org/viewvc/lucene/hadoop/trunk/src/java/org/apache/hadoop/mapred/TextInputFormat.java?view=markup

public class TextInputFormat extends InputFormatBase {
...
    return new RecordReader() {
...
        /** Read a line. */
        public synchronized boolean next(Writable key, Writable value)
          throws IOException {
          long pos = in.getPos();
          if (pos >= end)
            return false;

to:

          if (pos > end)
            return false;

will do the trick.

Jim


From MAILER-DAEMON Mon Aug 21 17:33:20 2006
Return-Path: 
 <hadoop-dev-return-3224-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16767 invoked from network); 21 Aug 2006 17:33:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 17:33:20 -0000
Received: (qmail 49999 invoked by uid 500); 21 Aug 2006 17:33:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49982 invoked by uid 500); 21 Aug 2006 17:33:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49973 invoked by uid 99); 21 Aug 2006 17:33:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 10:33:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 10:33:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6B9917142E4
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 17:30:15 +0000 (GMT)
Message-ID: <30955114.1156181415438.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 10:30:15 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-372?page=all ]

Runping Qi reassigned HADOOP-372:
---------------------------------

    Assignee: Runping Qi

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Runping Qi
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 18:24:21 2006
Return-Path: 
 <hadoop-dev-return-3225-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34889 invoked from network); 21 Aug 2006 18:24:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 18:24:21 -0000
Received: (qmail 45419 invoked by uid 500); 21 Aug 2006 18:24:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45397 invoked by uid 500); 21 Aug 2006 18:24:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45388 invoked by uid 99); 21 Aug 2006 18:24:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 11:24:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 11:24:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9289141000B
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 18:21:16 +0000 (GMT)
Message-ID: <12541586.1156184476597.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 11:21:16 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12429484 ] 
            
Owen O'Malley commented on HADOOP-54:
-------------------------------------

It would also be good to see the number of objects (and bytes) allocated during the test. Is there an easy way to get that?

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFile.20060821.patch, SequenceFile.20060821.perfomance.txt, SequenceFile.updated.final.patch, SequenceFiles.final.patch, SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 18:56:20 2006
Return-Path: 
 <hadoop-dev-return-3226-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46497 invoked from network); 21 Aug 2006 18:56:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 18:56:20 -0000
Received: (qmail 97080 invoked by uid 500); 21 Aug 2006 18:56:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96891 invoked by uid 500); 21 Aug 2006 18:56:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96882 invoked by uid 99); 21 Aug 2006 18:56:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 11:56:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 11:56:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5FB967142E4
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 18:53:15 +0000 (GMT)
Message-ID: <17423198.1156186395389.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 11:53:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12429489 ] 
            
Owen O'Malley commented on HADOOP-372:
--------------------------------------

HADOOP-450 certainly made this easier, but it doesn't really solve the problem. However, I think that with an implementation of HADOOP-451 (abstract input splits), we could do this all in library code. Something along the lines of:

public class MultiInputPath {
  /* must be called after the InputFormat and MapRunner have been set in the JobConf */
  public static void addHooks(JobConf conf);

  /* add a new input directory and the relevant input format and mapper classes */
  public static void addInputPath(conf, Path inputDirectory, Class InputFormat, Class Mapper);
}

The MultiInputPath will wrap the user's InputFormat, InputSplit, and MapRunner. In particular, the InputSplit will contain the user's InputSplit as well as the InputFormat and Mapper classes.  

This will pull all of the specialized code into a library instead of the framework, which is a big win.

Thoughts?

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Runping Qi
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 18:56:22 2006
Return-Path: 
 <hadoop-dev-return-3227-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46534 invoked from network); 21 Aug 2006 18:56:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 18:56:22 -0000
Received: (qmail 97279 invoked by uid 500); 21 Aug 2006 18:56:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97099 invoked by uid 500); 21 Aug 2006 18:56:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97090 invoked by uid 99); 21 Aug 2006 18:56:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 11:56:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 11:56:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E3CFA7142F2
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 18:53:16 +0000 (GMT)
Message-ID: <12940515.1156186396930.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 11:53:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-421) replace String in hadoop record io
 with the new Text class
In-Reply-To: <2032099.1154550733971.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-421?page=all ]

Doug Cutting resolved HADOOP-421.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Milind!

> replace String in hadoop record io with the new Text class
> ----------------------------------------------------------
>
>                 Key: HADOOP-421
>                 URL: http://issues.apache.org/jira/browse/HADOOP-421
>             Project: Hadoop
>          Issue Type: Bug
>          Components: record
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.6.0
>
>         Attachments: recordio.patch
>
>
> The record io in Java is currently using String and should be using the new Text class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 18:58:19 2006
Return-Path: 
 <hadoop-dev-return-3228-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47118 invoked from network); 21 Aug 2006 18:58:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 18:58:19 -0000
Received: (qmail 99349 invoked by uid 500); 21 Aug 2006 18:58:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99325 invoked by uid 500); 21 Aug 2006 18:58:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99316 invoked by uid 99); 21 Aug 2006 18:58:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 11:58:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 11:58:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C8AFA7142F0
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 18:55:14 +0000 (GMT)
Message-ID: <20859619.1156186514819.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 11:55:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-461) Build broken forjava version
 "1.4.2_09"
In-Reply-To: <23861547.1155919710927.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-461?page=comments#action_12429491 ] 
            
Doug Cutting commented on HADOOP-461:
-------------------------------------

Java 1.4 compatibility is not currently a priority for Hadoop.

Is there a platform you require where Java 1.5 is not available?

> Build broken forjava version "1.4.2_09"
> ---------------------------------------
>
>                 Key: HADOOP-461
>                 URL: http://issues.apache.org/jira/browse/HADOOP-461
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>         Environment: java version "1.4.2_09"
> Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_09-233)
> Java HotSpot(TM) Client VM (build 1.4.2-56, mixed mode)   
> Mac OS X - version 10.3.9
> 1.5GHz PowerPC G4
>            Reporter: woyg
>            Priority: Trivial
>         Attachments: build_broken_on_java1.4.diff, build_broken_on_java1.4.txt
>
>
> Build is broken on java 1.4.2_09.
> Method java.lang.Boolean.parseBoolean(String val) is  available since Java 5
> http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Boolean.html#parseBoolean(java.lang.String)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 19:08:30 2006
Return-Path: 
 <hadoop-dev-return-3229-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51163 invoked from network); 21 Aug 2006 19:08:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 19:08:30 -0000
Received: (qmail 18227 invoked by uid 500); 21 Aug 2006 19:08:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18208 invoked by uid 500); 21 Aug 2006 19:08:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18199 invoked by uid 99); 21 Aug 2006 19:08:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:08:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:08:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D5B197142F0
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 19:05:14 +0000 (GMT)
Message-ID: <24147327.1156187114872.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 12:05:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-464) Troubleshooting message for RunJar
 (bin/hadoop jar)
In-Reply-To: <31480789.1155947957107.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-464?page=all ]

Doug Cutting resolved HADOOP-464.
---------------------------------

    Fix Version/s: 0.6.0
       Resolution: Fixed

I committed this, although implemented slightly differently.  Rather than printing a message to standard error to amend the uninformative exception, I instead improved the exception.  Now the output looks like:

% bin/hadoop jar foo
Exception in thread "main" java.io.IOException: Error opening job jar: foo
        at org.apache.hadoop.util.RunJar.main(RunJar.java:82)
Caused by: java.util.zip.ZipException: No such file or directory
        at java.util.zip.ZipFile.open(Native Method)
        at java.util.zip.ZipFile.<init>(ZipFile.java:203)
        at java.util.jar.JarFile.<init>(JarFile.java:132)
        at java.util.jar.JarFile.<init>(JarFile.java:70)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:80)


> Troubleshooting message for RunJar (bin/hadoop jar)
> ---------------------------------------------------
>
>                 Key: HADOOP-464
>                 URL: http://issues.apache.org/jira/browse/HADOOP-464
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: util
>            Reporter: Michel Tourn
>             Fix For: 0.6.0
>
>         Attachments: runjar.patch
>
>
> Many users get this exception when using bin/hadoop
> There are various reasons:
> HADOOP_CONF_DIR or HADOOP_HOME misconfigured. 
> "hadoop jar" parameter incorrect
> So the patch displays the path of the jar it is trying to open if this fails: 
> Problem while opening hadoop job jar: /home/build/hadoop-streaming.jar
> Exception in thread "main" java.util.zip.ZipException: error in opening zip file
>         at java.util.zip.ZipFile.open(Native Method)
>         at java.util.zip.ZipFile.<init>(ZipFile.java:203)
>         at java.util.jar.JarFile.<init>(JarFile.java:132)
>         at java.util.jar.JarFile.<init>(JarFile.java:70)
>         at org.apache.hadoop.util.RunJar.main(RunJar.java:80)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 19:19:30 2006
Return-Path: 
 <hadoop-dev-return-3230-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54272 invoked from network); 21 Aug 2006 19:19:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 19:19:30 -0000
Received: (qmail 35213 invoked by uid 500); 21 Aug 2006 19:19:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35189 invoked by uid 500); 21 Aug 2006 19:19:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35173 invoked by uid 99); 21 Aug 2006 19:19:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:19:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:19:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C8C227142E4
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 19:16:14 +0000 (GMT)
Message-ID: <27645743.1156187774819.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 12:16:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12429498 ] 
            
Doug Cutting commented on HADOOP-312:
-------------------------------------

Several of the logging statements look like:

  if (LOG.isDebugEnabled())
    LOG.info(getName() + ...);

But you should log and check the same level. So these should instead be:

  if (LOG.isDebugEnabled())
    LOG.debug(getName() + ...);

Also, when connecting, you catch Exception, then check exception types with 'instanceof'.  It would be better to catch those particular exceptions.  You're currently silently trapping other exceptions too.


> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 19:27:22 2006
Return-Path: 
 <hadoop-dev-return-3231-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62675 invoked from network); 21 Aug 2006 19:27:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 19:27:22 -0000
Received: (qmail 50495 invoked by uid 500); 21 Aug 2006 19:27:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50477 invoked by uid 500); 21 Aug 2006 19:27:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50468 invoked by uid 99); 21 Aug 2006 19:27:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:27:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:27:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5C5D17142F0
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 19:24:15 +0000 (GMT)
Message-ID: <2627962.1156188255375.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 12:24:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-466) Startup scripts will not start
 instances of Hadoop daemons w/different configs w/o setting separate PID
 directories
In-Reply-To: <18080349.1156145293920.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-466?page=all ]

Doug Cutting updated HADOOP-466:
--------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.6.0

This looks good to me.  Does anyone else have any concerns about this?

> Startup scripts will not start instances of Hadoop daemons w/different configs w/o setting separate PID directories
> -------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-466
>                 URL: http://issues.apache.org/jira/browse/HADOOP-466
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Vetle Roeim
>             Fix For: 0.6.0
>
>         Attachments: hadoop-466.diff
>
>
> Configuration directories can be specified by either setting HADOOP_CONF_DIR or using the --config command line option. However, the hadoop-daemon.sh script will not start the daemons unless the PID directory is separate for each configuration.
> The issue is that the code for generating PID filenames is not dependent on the configuration directory. While the PID directory can be changed in hadoop-env.sh, it seems a little unnecessary to have this restriction.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 19:35:25 2006
Return-Path: 
 <hadoop-dev-return-3232-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64823 invoked from network); 21 Aug 2006 19:35:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 19:35:25 -0000
Received: (qmail 58550 invoked by uid 500); 21 Aug 2006 19:35:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58535 invoked by uid 500); 21 Aug 2006 19:35:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58526 invoked by uid 99); 21 Aug 2006 19:35:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:35:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:35:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D3D807142E4
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 19:32:15 +0000 (GMT)
Message-ID: <20293752.1156188735865.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 12:32:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-468) Setting scheduling priority in
 hadoop-env.sh
In-Reply-To: <5671844.1156168573953.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-468?page=comments#action_12429505 ] 
            
Doug Cutting commented on HADOOP-468:
-------------------------------------

I think this would be a useful feature to have.

Two nits with the patch: I think it will be easier to maintain if we set HADOOP_NICE_VALUE to zero by default and then only have a single invocation of bin/hadoop in the script, now with 'nice'.  Since that command line is rather central and likely to be further changed, it's better to not have it replicated.  Also we should document the new environment variable in the file header.

> Setting scheduling priority in hadoop-env.sh
> --------------------------------------------
>
>                 Key: HADOOP-468
>                 URL: http://issues.apache.org/jira/browse/HADOOP-468
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Vetle Roeim
>            Priority: Minor
>         Attachments: sched_priority.diff
>
>
> It is not possible to set the scheduling priority in the Hadoop configuration. Attached is a patch for starting the Hadoop daemons through nice with the configured priority (can be configured in conf/hadoop-env.sh, for instance).
> I would have included a patch for conf/hadoop-env.sh as well, but it seems to be ignored?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 19:43:20 2006
Return-Path: 
 <hadoop-dev-return-3233-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66917 invoked from network); 21 Aug 2006 19:43:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 19:43:20 -0000
Received: (qmail 71096 invoked by uid 500); 21 Aug 2006 19:43:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70922 invoked by uid 500); 21 Aug 2006 19:43:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70913 invoked by uid 99); 21 Aug 2006 19:43:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:43:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:43:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E30C57142E4
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 19:40:14 +0000 (GMT)
Message-ID: <19691280.1156189214927.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 12:40:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-469) Portability of hadoop shell scripts
 for deployment
In-Reply-To: <14494062.1156173914029.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-469?page=all ]

Doug Cutting resolved HADOOP-469.
---------------------------------

    Fix Version/s: 0.6.0
       Resolution: Fixed

I just committed this.  Thanks, Jean-Baptiste!

> Portability of hadoop shell scripts for deployment
> --------------------------------------------------
>
>                 Key: HADOOP-469
>                 URL: http://issues.apache.org/jira/browse/HADOOP-469
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Jean-Baptiste Quenot
>             Fix For: 0.6.0
>
>         Attachments: 20060821-hadoop-bin
>
>
> Hadoop shell scripts are based on /bin/bash, which is a "standard" shell only on GNU/Linux. On other Unix systems like FreeBSD however the "standard" shell is /bin/sh. The attached patch addresses these compatiblity issues.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 19:45:25 2006
Return-Path: 
 <hadoop-dev-return-3234-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67481 invoked from network); 21 Aug 2006 19:45:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 19:45:25 -0000
Received: (qmail 74944 invoked by uid 500); 21 Aug 2006 19:45:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74766 invoked by uid 500); 21 Aug 2006 19:45:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74757 invoked by uid 99); 21 Aug 2006 19:45:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:45:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:45:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5A4F27142F0
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 19:42:15 +0000 (GMT)
Message-ID: <7768127.1156189335367.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 12:42:15 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12429511 ] 
            
Runping Qi commented on HADOOP-372:
-----------------------------------


The patch for Hadoop-450 laid the foundation for this issue. But the specific aspects of this issue are yet to be addressed, and I started to work on a patch for it. The patch is to:
        * allow the user to specify different input format classes for different input directories
        * allow the user to specify different mapper classes for different key/value class pair.

My thought is to extend the JobConf class with the following methods:

        public void setInputFormatClass(Class theInputFormatClass, Path p) 

for specifying different input format classes
for specifying different mapper classes.

The FileSplit class should be extended to have a method:
         public Class getInputFormatClass() 

The initTasks method of JobInProgress should make due changes to create file FileSplit objects with the correct input format class information. 
        

For supporting different mapper classes, we can expend the JobConf class:

        public void setMapperClass(Class theMapperClass,  Class theKeyClass, Class theValueClass) 
        public Class getMapperClass(Class theKeyClass, Class theValueClass) 

The idea is that, for each split, we know the input format class, from there, we know the corresponding record reader, then we know the key/value classes of the input records.

Another possibility is to allow the user to specify a mapper class per input path, in the same way as for the input format class. To do that, the FileSplit class needs to support the following method:
        public Class getMapperClass()

Thoughts?
 


> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Runping Qi
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 20:01:21 2006
Return-Path: 
 <hadoop-dev-return-3235-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70689 invoked from network); 21 Aug 2006 20:01:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 20:01:21 -0000
Received: (qmail 97074 invoked by uid 500); 21 Aug 2006 20:01:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96897 invoked by uid 500); 21 Aug 2006 20:01:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96888 invoked by uid 99); 21 Aug 2006 20:01:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 13:01:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 13:01:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A03487142F0
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 19:58:16 +0000 (GMT)
Message-ID: <30558623.1156190296653.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 12:58:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12429515 ] 
            
Doug Cutting commented on HADOOP-54:
------------------------------------

Benchmarks should be run w/o the -check option and with the -fast option, no?

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFile.20060821.patch, SequenceFile.20060821.perfomance.txt, SequenceFile.updated.final.patch, SequenceFiles.final.patch, SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 20:39:22 2006
Return-Path: 
 <hadoop-dev-return-3236-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86891 invoked from network); 21 Aug 2006 20:39:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 20:39:22 -0000
Received: (qmail 75081 invoked by uid 500); 21 Aug 2006 20:39:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74992 invoked by uid 500); 21 Aug 2006 20:39:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74983 invoked by uid 99); 21 Aug 2006 20:39:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 13:39:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 13:39:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0C94B41000C
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 20:36:14 +0000 (GMT)
Message-ID: <28445400.1156192574837.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 13:36:14 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-466) Startup scripts will not start
 instances of Hadoop daemons w/different configs w/o setting separate PID
 directories
In-Reply-To: <18080349.1156145293920.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-466?page=comments#action_12429521 ] 
            
Yoram Arnon commented on HADOOP-466:
------------------------------------

perhaps HADOOP_IDENT_STRING is not required any more, or is indeed harmful.
Having it enables running multiple instances on the same conf dir by running as different users.
it may be ok for log/out files, to separate output from different runs, but for pid files it's better to use the md5 without the string


> Startup scripts will not start instances of Hadoop daemons w/different configs w/o setting separate PID directories
> -------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-466
>                 URL: http://issues.apache.org/jira/browse/HADOOP-466
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Vetle Roeim
>             Fix For: 0.6.0
>
>         Attachments: hadoop-466.diff
>
>
> Configuration directories can be specified by either setting HADOOP_CONF_DIR or using the --config command line option. However, the hadoop-daemon.sh script will not start the daemons unless the PID directory is separate for each configuration.
> The issue is that the code for generating PID filenames is not dependent on the configuration directory. While the PID directory can be changed in hadoop-env.sh, it seems a little unnecessary to have this restriction.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 20:56:21 2006
Return-Path: 
 <hadoop-dev-return-3237-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90608 invoked from network); 21 Aug 2006 20:56:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 20:56:21 -0000
Received: (qmail 1877 invoked by uid 500); 21 Aug 2006 20:56:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1850 invoked by uid 500); 21 Aug 2006 20:56:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1841 invoked by uid 99); 21 Aug 2006 20:56:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 13:56:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 13:56:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7569441000C
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 20:53:16 +0000 (GMT)
Message-ID: <11766212.1156193596477.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 13:53:16 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12429529 ] 
            
Owen O'Malley commented on HADOOP-372:
--------------------------------------

I really think this should be done outside of the framework without adding 4 new fairly complicated public methods into the JobConf.

I also don't like using types to distinguish which Mapper to use. A typical case will be two directories using TextInputFormats where you want to apply separate Mappers to pull out different fields. I think it is much nicer to define the entire pipeline, rather than using types to infer it.

InputSplit (from an input directory) -> RecordReader (via InputFormat) -> Mapper



> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Runping Qi
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 21:21:29 2006
Return-Path: 
 <hadoop-dev-return-3238-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98052 invoked from network); 21 Aug 2006 21:21:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 21:21:29 -0000
Received: (qmail 46218 invoked by uid 500); 21 Aug 2006 21:21:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46202 invoked by uid 500); 21 Aug 2006 21:21:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46193 invoked by uid 99); 21 Aug 2006 21:21:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 14:21:28 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 14:21:27 -0700
Received: from [207.126.231.236] (eric14-mac.corp.yahoo.com [207.126.231.236])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k7LLKsNs092924
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 14:20:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:content-transfer-encoding:message-id:
	content-type:to:from:subject:date:x-mailer;
	b=z99oH0wOJRxZ7FzuugN9Qwsp/JjbjdHdwZvNRqOyM5I1z674DSl82nlXnU2JVNi/
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <BD630154-8284-49A0-A4C2-6D226A5CFA41@yahoo-inc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: URL convention for commands / config?
Date: Mon, 21 Aug 2006 14:20:58 -0700
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Folks,

Seems like we are adding more and more options and commands that take  
a file or URL argument, where the file can be one of a number of  
places.  Perhaps we can unify things a bit by agreeing to use URL  
conventions in these places?

Where:

file:// is a file on the current machine
http is supported everywhere
hdfs://host[:port]/ is the used to refer to HDFS files
hdfs:/// is used to use the default hdfs?
rsync, ftp and https are supported too (eventually)
torrent:// is used to support bittorent someday...

Should we standardize on such a conventions and start digging to put  
a class together to make this all seamless?

e14


From MAILER-DAEMON Mon Aug 21 21:45:25 2006
Return-Path: 
 <hadoop-dev-return-3239-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6119 invoked from network); 21 Aug 2006 21:45:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 21:45:25 -0000
Received: (qmail 86475 invoked by uid 500); 21 Aug 2006 21:45:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86455 invoked by uid 500); 21 Aug 2006 21:45:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86446 invoked by uid 99); 21 Aug 2006 21:45:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 14:45:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 14:45:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 592967142C9
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 21:42:15 +0000 (GMT)
Message-ID: <17415751.1156196535362.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 14:42:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-465) Jobtracker doesn't always spread
 reduce tasks evenly if (mapred.tasktracker.tasks.maximum > 1)
In-Reply-To: <5436599.1155967753966.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-465?page=comments#action_12429540 ] 
            
Owen O'Malley commented on HADOOP-465:
--------------------------------------

There was a bug in the Hadoop scheduler that would schedule too many tasks on a node when the cluster was not full.  I fixed that in Hadoop-400, which has been committed after 0.5.0 was cut.

Another thing to keep in mind is that after the tasks are started, they can't be moved. So it is common to see the case where your last four (or 6 or 8) reduces are likely to be running on 2 (or 3 or 4) nodes (assuming 2 tasks/node).


> Jobtracker doesn't always spread reduce tasks evenly if (mapred.tasktracker.tasks.maximum > 1)
> ----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-465
>                 URL: http://issues.apache.org/jira/browse/HADOOP-465
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Chris Schneider
>            Priority: Minor
>
> I note that (at least for Nutch 0.8 Generator.Selector.reduce) if mapred.reduce.tasks is the same as the number of tasktrackers, and mapred.tasktracker.tasks.maximum is left at the default of 2, I typically have no reduce tasks running on a few of my tasktrackers, and two reduce tasks running on the same number of other tasktrackers.
> It seems like the jobtracker should assign reduce tasks to tasktrackers in a round robin fashion, so that the distribution will be spread as evenly as possible. The current implementation would seem to waste at least some time if one or more slave machines have to execute two reduce tasks simultaneously while other tasktrackers sit idle, with the amount of wasted time depending on how dependent the reduce tasks were on the slave machine's resources.
> I first thought that perhaps the jobtracker was "overloading" the tasktrackers that had already finished their map tasks (and avoiding those that were still mapping). However, as I understand it, the reduce tasks are all launched at the beginning of the job so that they are all ready and waiting for map output data when it first appears.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 21:51:54 2006
Return-Path: 
 <hadoop-dev-return-3240-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9028 invoked from network); 21 Aug 2006 21:51:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 21:51:54 -0000
Received: (qmail 96884 invoked by uid 500); 21 Aug 2006 21:51:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96868 invoked by uid 500); 21 Aug 2006 21:51:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96859 invoked by uid 99); 21 Aug 2006 21:51:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 14:51:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 14:51:52 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k7LLpkC21919
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 16:51:46 -0500
Message-ID: <44EA2A6B.2070408@getopt.org>
Date: Mon, 21 Aug 2006 23:49:31 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: URL convention for commands / config?
References: <BD630154-8284-49A0-A4C2-6D226A5CFA41@yahoo-inc.com>
In-Reply-To: <BD630154-8284-49A0-A4C2-6D226A5CFA41@yahoo-inc.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Eric Baldeschwieler wrote:
> Hi Folks,
>
> Seems like we are adding more and more options and commands that take 
> a file or URL argument, where the file can be one of a number of 
> places.  Perhaps we can unify things a bit by agreeing to use URL 
> conventions in these places?
>
> Where:
>
> file:// is a file on the current machine
> http is supported everywhere
> hdfs://host[:port]/ is the used to refer to HDFS files
> hdfs:/// is used to use the default hdfs?
> rsync, ftp and https are supported too (eventually)
> torrent:// is used to support bittorent someday...
>
> Should we standardize on such a conventions and start digging to put a 
> class together to make this all seamless?

Wouldn't we end up with another java.net.URL in disguise? java.net.URL 
already supports pluggable protocols, we could create one for hdfs ...

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



From MAILER-DAEMON Mon Aug 21 22:02:46 2006
Return-Path: 
 <hadoop-dev-return-3241-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12183 invoked from network); 21 Aug 2006 22:02:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 22:02:46 -0000
Received: (qmail 15870 invoked by uid 500); 21 Aug 2006 22:02:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15848 invoked by uid 500); 21 Aug 2006 22:02:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15839 invoked by uid 99); 21 Aug 2006 22:02:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 15:02:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.148.227.155] (HELO rwcrmhc15.comcast.net)
 (216.148.227.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 15:02:44 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc15) with ESMTP
          id <20060821220220m1500t49cte>; Mon, 21 Aug 2006 22:02:24 +0000
Message-ID: <44EA2D76.3030107@apache.org>
Date: Mon, 21 Aug 2006 15:02:30 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: URL convention for commands / config?
References: <BD630154-8284-49A0-A4C2-6D226A5CFA41@yahoo-inc.com>
 <44EA2A6B.2070408@getopt.org>
In-Reply-To: <44EA2A6B.2070408@getopt.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Andrzej Bialecki wrote:
> Wouldn't we end up with another java.net.URL in disguise? java.net.URL 
> already supports pluggable protocols, we could create one for hdfs ...

FYI, we already use java.net.URI for HDFS in CopyFiles.

Doug

From MAILER-DAEMON Mon Aug 21 22:28:34 2006
Return-Path: 
 <hadoop-dev-return-3242-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25067 invoked from network); 21 Aug 2006 22:28:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 22:28:34 -0000
Received: (qmail 68489 invoked by uid 500); 21 Aug 2006 22:28:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68472 invoked by uid 500); 21 Aug 2006 22:28:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68462 invoked by uid 99); 21 Aug 2006 22:28:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 15:28:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 15:28:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AC6797142F7
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 22:25:18 +0000 (GMT)
Message-ID: <30071578.1156199118703.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 15:25:18 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12429553 ] 
            
Owen O'Malley commented on HADOOP-372:
--------------------------------------

Ok, let me modify this a bit. How about if we define a new class that defines a map input processing pipeline. Each pipeline is given the input directory and the JobConf when it is created and then gets to pick the appropriate InputFormat and Mapper classes.

public class InputPipeline {
  public InputPipeline(Path inputDir, JobConf conf);
  public Class createInputFormat();
  public Class getMapper();
  public int getRequestedNumMaps();
}

The JobConf then picks up 2 methods:

JobConf:
   public void setInputPipelineClass(Class cls);
   public Class getInputPipelineClass();

The default will be InputPipeline that just uses the values from the JobConf for all paths.

The framework changes are pretty light. Just creating the InputPipeline when iterating through the input directories and using that to create the splits. We need to add the InputFormat and Mapper classes to the MapTask and make MapTask.localizeConfiguration set the Mapper class. 

To complete the picture, I'd also add a class in org.apache.hadoop.mapred.lib that looks like:

public class MultiInputPipeline extends InputPipeline {
  public static void addInputPipeline(JobConf conf, Path inputDir, Class inputFormat, Class mapper, int numMaps);
  ...
}

That makes this look like the other hooks that are currently in Hadoop and provides the flexibility that the users need.

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Runping Qi
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 21 22:30:28 2006
Return-Path: 
 <hadoop-dev-return-3243-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25648 invoked from network); 21 Aug 2006 22:30:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 22:30:28 -0000
Received: (qmail 73755 invoked by uid 500); 21 Aug 2006 22:30:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73736 invoked by uid 500); 21 Aug 2006 22:30:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73727 invoked by uid 99); 21 Aug 2006 22:30:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 15:30:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 15:30:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EA7C57142F7
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 22:27:17 +0000 (GMT)
Message-ID: <14050347.1156199237958.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 15:27:17 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-372?page=all ]

Owen O'Malley reassigned HADOOP-372:
------------------------------------

    Assignee: Owen O'Malley  (was: Runping Qi)

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 03:49:27 2006
Return-Path: 
 <hadoop-dev-return-3244-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5080 invoked from network); 22 Aug 2006 03:49:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 03:49:27 -0000
Received: (qmail 32039 invoked by uid 500); 22 Aug 2006 03:49:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31984 invoked by uid 500); 22 Aug 2006 03:49:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31910 invoked by uid 99); 22 Aug 2006 03:49:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 20:49:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 20:49:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CEA657142F3
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 03:46:16 +0000 (GMT)
Message-ID: <32365034.1156218376843.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 20:46:16 -0700 (PDT)
From: "woyg (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-461) Build broken forjava version
 "1.4.2_09"
In-Reply-To: <23861547.1155919710927.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-461?page=comments#action_12429600 ] 
            
woyg commented on HADOOP-461:
-----------------------------

Mac OS X - version 10.3.9 

No java 1.5 is availabel for this platform.

> Build broken forjava version "1.4.2_09"
> ---------------------------------------
>
>                 Key: HADOOP-461
>                 URL: http://issues.apache.org/jira/browse/HADOOP-461
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>         Environment: java version "1.4.2_09"
> Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_09-233)
> Java HotSpot(TM) Client VM (build 1.4.2-56, mixed mode)   
> Mac OS X - version 10.3.9
> 1.5GHz PowerPC G4
>            Reporter: woyg
>            Priority: Trivial
>         Attachments: build_broken_on_java1.4.diff, build_broken_on_java1.4.txt
>
>
> Build is broken on java 1.4.2_09.
> Method java.lang.Boolean.parseBoolean(String val) is  available since Java 5
> http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Boolean.html#parseBoolean(java.lang.String)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 04:03:55 2006
Return-Path: 
 <hadoop-dev-return-3245-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7712 invoked from network); 22 Aug 2006 04:03:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 04:03:55 -0000
Received: (qmail 46250 invoked by uid 500); 22 Aug 2006 04:03:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46227 invoked by uid 500); 22 Aug 2006 04:03:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46218 invoked by uid 99); 22 Aug 2006 04:03:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 21:03:54 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 21:03:53 -0700
Received: from [10.0.1.2] (snvvpn2-10-72-78-c13.corp.yahoo.com [10.72.78.13])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k7M43Lg4017097
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Mon, 21 Aug 2006 21:03:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=VF+ZeYCQOHgv1ZqWsC8Qm6SLgyA77YqhsHhydqAS2Aqewj0pHjw7fqY5++rSFC8z
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <44EA2A6B.2070408@getopt.org>
References: <BD630154-8284-49A0-A4C2-6D226A5CFA41@yahoo-inc.com>
 <44EA2A6B.2070408@getopt.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C5CA94A0-2542-40C3-A481-BBE95CEF1D95@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: URL convention for commands / config?
Date: Mon, 21 Aug 2006 21:03:25 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm all for not reinventing the wheel.  This is probably the right  
implementation direction.

I mainly wanted to get to agreement that we would start taking URIs  
instead of HDFS paths in most API/UIs and generalize this behavior.

On Aug 21, 2006, at 2:49 PM, Andrzej Bialecki wrote:

> Eric Baldeschwieler wrote:
>> Hi Folks,
>>
>> Seems like we are adding more and more options and commands that  
>> take a file or URL argument, where the file can be one of a number  
>> of places.  Perhaps we can unify things a bit by agreeing to use  
>> URL conventions in these places?
>>
>> Where:
>>
>> file:// is a file on the current machine
>> http is supported everywhere
>> hdfs://host[:port]/ is the used to refer to HDFS files
>> hdfs:/// is used to use the default hdfs?
>> rsync, ftp and https are supported too (eventually)
>> torrent:// is used to support bittorent someday...
>>
>> Should we standardize on such a conventions and start digging to  
>> put a class together to make this all seamless?
>
> Wouldn't we end up with another java.net.URL in disguise?  
> java.net.URL already supports pluggable protocols, we could create  
> one for hdfs ...
>
> -- 
> Best regards,
> Andrzej Bialecki     <><
> ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>


From MAILER-DAEMON Tue Aug 22 05:59:21 2006
Return-Path: 
 <hadoop-dev-return-3246-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36829 invoked from network); 22 Aug 2006 05:59:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 05:59:21 -0000
Received: (qmail 39837 invoked by uid 500); 22 Aug 2006 05:59:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39793 invoked by uid 500); 22 Aug 2006 05:59:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39779 invoked by uid 99); 22 Aug 2006 05:59:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 22:59:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 22:59:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E0E997142F0
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 05:56:13 +0000 (GMT)
Message-ID: <21479637.1156226173918.JavaMail.jira@brutus>
Date: Mon, 21 Aug 2006 22:56:13 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-470) Some improvements in the DFS content
 browsing UI
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Some improvements in the DFS content browsing UI
------------------------------------------------

                 Key: HADOOP-470
                 URL: http://issues.apache.org/jira/browse/HADOOP-470
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
            Reporter: Devaraj Das
            Priority: Minor


Some improvement requests from Yoram:

1. directory browsing: the size, replication and block size fields are unused, and indeed the replication field contains random junk. It would be useful to use these fields to represent the size of the folder (recursive, like du -s), and possibly the number of files in the folder.

2. since file sizes are typically very large, introducing a comma thousands separator will make them more readable. 

3. For a particular file I have the list of blocks that make it up. It would be useful to see the block placement information - which datanodes are holding that block. That's arguably more relevant than the block contents when clicking on the block.

4. a nit - 2048 may be too small a chunk size by default. The overhead of getting the first byte is so high (redirect, connect, handshake etc.) that you may as well get 10-20k as your first shot.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 08:36:31 2006
Return-Path: 
 <hadoop-dev-return-3247-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94089 invoked from network); 22 Aug 2006 08:36:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 08:36:31 -0000
Received: (qmail 59490 invoked by uid 500); 22 Aug 2006 08:36:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59425 invoked by uid 500); 22 Aug 2006 08:36:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59378 invoked by uid 99); 22 Aug 2006 08:36:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 01:36:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 01:36:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C3F027142F7
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 08:33:14 +0000 (GMT)
Message-ID: <30946489.1156235594800.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 01:33:14 -0700 (PDT)
From: "Vetle Roeim (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-468) Setting scheduling priority in
 hadoop-env.sh
In-Reply-To: <5671844.1156168573953.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-468?page=all ]

Vetle Roeim updated HADOOP-468:
-------------------------------

    Attachment: hadoop-468-2.diff

Done and done.

> Setting scheduling priority in hadoop-env.sh
> --------------------------------------------
>
>                 Key: HADOOP-468
>                 URL: http://issues.apache.org/jira/browse/HADOOP-468
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Vetle Roeim
>            Priority: Minor
>         Attachments: hadoop-468-2.diff, sched_priority.diff
>
>
> It is not possible to set the scheduling priority in the Hadoop configuration. Attached is a patch for starting the Hadoop daemons through nice with the configured priority (can be configured in conf/hadoop-env.sh, for instance).
> I would have included a patch for conf/hadoop-env.sh as well, but it seems to be ignored?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 10:04:20 2006
Return-Path: 
 <hadoop-dev-return-3248-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19464 invoked from network); 22 Aug 2006 10:04:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 10:04:20 -0000
Received: (qmail 67964 invoked by uid 500); 22 Aug 2006 10:04:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67938 invoked by uid 500); 22 Aug 2006 10:04:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67929 invoked by uid 99); 22 Aug 2006 10:04:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 03:04:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 03:04:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E2D747142F7
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 10:01:13 +0000 (GMT)
Message-ID: <6013088.1156240873925.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 03:01:13 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-471) JobTracker should assign unique jobids
 across restarts
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

JobTracker should assign unique jobids across restarts 
-------------------------------------------------------

                 Key: HADOOP-471
                 URL: http://issues.apache.org/jira/browse/HADOOP-471
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: Sanjay Dahiya
            Priority: Minor


JobTracker assigns jobids starting from _001 every time it restarts. It should not reuse Ids for a large number of jobs ( 10,000 ?)  even if it is restarted. It will make it easy to track and analyze jobs in history by jobids . 


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 11:34:29 2006
Return-Path: 
 <hadoop-dev-return-3249-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55682 invoked from network); 22 Aug 2006 11:34:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 11:34:29 -0000
Received: (qmail 6638 invoked by uid 500); 22 Aug 2006 11:34:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6622 invoked by uid 500); 22 Aug 2006 11:34:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6613 invoked by uid 99); 22 Aug 2006 11:34:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 04:34:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 04:34:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BB59B410010
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 11:31:22 +0000 (GMT)
Message-ID: <11629913.1156246282762.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 04:31:22 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-54?page=all ]

Arun C Murthy updated HADOOP-54:
--------------------------------

    Attachment: SequenceFile.20060822.tgz

Here's a patch with a minor tweak to the Sorter (to reuse ValueBytes objects across spills).

I've also attached results of another set of benchmark runs (w/o -check and with -fast) - I've also run it against instrumented code to show no. of ValueBytes objects and total bytes allocated for raw values (note: doesn't imply all of them are allocated at the same time; just total of bytes allocated in the CompressedBytes.reset/UncompressedBytes.reset calls over lifetime of each test case).

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFile.20060821.patch, SequenceFile.20060821.perfomance.txt, SequenceFile.20060822.tgz, SequenceFile.updated.final.patch, SequenceFiles.final.patch, SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 12:48:21 2006
Return-Path: 
 <hadoop-dev-return-3250-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88813 invoked from network); 22 Aug 2006 12:48:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 12:48:21 -0000
Received: (qmail 31684 invoked by uid 500); 22 Aug 2006 12:48:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31500 invoked by uid 500); 22 Aug 2006 12:48:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31484 invoked by uid 99); 22 Aug 2006 12:48:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 05:48:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 05:48:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EE4FE714219
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 12:45:14 +0000 (GMT)
Message-ID: <16044606.1156250714973.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 05:45:14 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-312?page=all ]

Devaraj Das updated HADOOP-312:
-------------------------------

    Attachment: no_conn_caching.patch

Sorry. My mistake for having overlooked the things you pointed out.

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 16:13:20 2006
Return-Path: 
 <hadoop-dev-return-3251-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71110 invoked from network); 22 Aug 2006 16:13:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 16:13:20 -0000
Received: (qmail 93831 invoked by uid 500); 22 Aug 2006 16:13:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93651 invoked by uid 500); 22 Aug 2006 16:13:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93642 invoked by uid 99); 22 Aug 2006 16:13:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 09:13:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 09:13:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DADF6410012
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 16:10:13 +0000 (GMT)
Message-ID: <12816750.1156263013893.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 09:10:13 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-472) Streaming should not crash
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Streaming should not crash
--------------------------

                 Key: HADOOP-472
                 URL: http://issues.apache.org/jira/browse/HADOOP-472
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
            Reporter: arkady borkovsky


Streaming framework should not end with a Java stack dump.
All the abnormal conditions should be checked and reported.

Specific conditions that need to be exmplicitly checked by the framework are:
-- does the input exist?
-- do the top level executables or scripts for -mapper and exist

Any other Exceptions should also be cought and explained in an error message.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 17:10:25 2006
Return-Path: 
 <hadoop-dev-return-3252-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87157 invoked from network); 22 Aug 2006 17:10:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 17:10:25 -0000
Received: (qmail 89598 invoked by uid 500); 22 Aug 2006 17:10:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89464 invoked by uid 500); 22 Aug 2006 17:10:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89454 invoked by uid 99); 22 Aug 2006 17:10:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 10:10:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 10:10:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DF15C410012
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 17:07:13 +0000 (GMT)
Message-ID: <29195354.1156266433911.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 10:07:13 -0700 (PDT)
From: "Dennis Kubes (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-473) TextInputFormat does not correctly
 handle all line endings
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

TextInputFormat does not correctly handle all line endings
----------------------------------------------------------

                 Key: HADOOP-473
                 URL: http://issues.apache.org/jira/browse/HADOOP-473
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.5.0, 0.6.0
         Environment: All environments
            Reporter: Dennis Kubes
         Attachments: text-input-format.patch

The current TextInputFormat readLine method calls break on either a single '\r' or '\n' character.  This causes windows formatted text files '\r' '\n' to leave a trailing '\n' character and the next time the readLine method is called on the same input stream it returns a blank string.  The patch attached corrects this issue by looking for either single or double character line endings and positions the input stream to the next line.  It correctly handles windows, mac, and unix line endings.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 17:55:27 2006
Return-Path: 
 <hadoop-dev-return-3253-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2073 invoked from network); 22 Aug 2006 17:55:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 17:55:27 -0000
Received: (qmail 68426 invoked by uid 500); 22 Aug 2006 17:55:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68246 invoked by uid 500); 22 Aug 2006 17:55:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68236 invoked by uid 99); 22 Aug 2006 17:55:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 10:55:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 10:55:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6694A410011
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 17:52:15 +0000 (GMT)
Message-ID: <316381.1156269135417.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 10:52:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-465) Jobtracker doesn't always spread
 reduce tasks evenly if (mapred.tasktracker.tasks.maximum > 1)
In-Reply-To: <5436599.1155967753966.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-465?page=all ]

Doug Cutting resolved HADOOP-465.
---------------------------------

    Fix Version/s: 0.6.0
       Resolution: Duplicate

This was fixed in HADOOP-400.

> Jobtracker doesn't always spread reduce tasks evenly if (mapred.tasktracker.tasks.maximum > 1)
> ----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-465
>                 URL: http://issues.apache.org/jira/browse/HADOOP-465
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Chris Schneider
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> I note that (at least for Nutch 0.8 Generator.Selector.reduce) if mapred.reduce.tasks is the same as the number of tasktrackers, and mapred.tasktracker.tasks.maximum is left at the default of 2, I typically have no reduce tasks running on a few of my tasktrackers, and two reduce tasks running on the same number of other tasktrackers.
> It seems like the jobtracker should assign reduce tasks to tasktrackers in a round robin fashion, so that the distribution will be spread as evenly as possible. The current implementation would seem to waste at least some time if one or more slave machines have to execute two reduce tasks simultaneously while other tasktrackers sit idle, with the amount of wasted time depending on how dependent the reduce tasks were on the slave machine's resources.
> I first thought that perhaps the jobtracker was "overloading" the tasktrackers that had already finished their map tasks (and avoiding those that were still mapping). However, as I understand it, the reduce tasks are all launched at the beginning of the job so that they are all ready and waiting for map output data when it first appears.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 18:18:23 2006
Return-Path: 
 <hadoop-dev-return-3254-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10155 invoked from network); 22 Aug 2006 18:18:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 18:18:23 -0000
Received: (qmail 17538 invoked by uid 500); 22 Aug 2006 18:18:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17518 invoked by uid 500); 22 Aug 2006 18:18:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17508 invoked by uid 99); 22 Aug 2006 18:18:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 11:18:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 11:18:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 633B17142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 18:15:15 +0000 (GMT)
Message-ID: <25142895.1156270515403.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 11:15:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12429775 ] 
            
Doug Cutting commented on HADOOP-372:
-------------------------------------

I'm having trouble seeing how this is used.  Can you provide some pseudo application code?

Without understanding it, the API looks ugly.  There's a lot of meta-stuff going on--passing classes around rather than instances.  Your prior proposal was much more straightforward: RecordReader creates the Mapper.  What problem with that are you now trying to solve?



> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 18:24:21 2006
Return-Path: 
 <hadoop-dev-return-3255-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11684 invoked from network); 22 Aug 2006 18:24:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 18:24:21 -0000
Received: (qmail 25421 invoked by uid 500); 22 Aug 2006 18:24:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25398 invoked by uid 500); 22 Aug 2006 18:24:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25389 invoked by uid 99); 22 Aug 2006 18:24:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 11:24:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 11:24:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D1411410011
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 18:21:14 +0000 (GMT)
Message-ID: <33434693.1156270874854.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 11:21:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-461) Build broken forjava version
 "1.4.2_09"
In-Reply-To: <23861547.1155919710927.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-461?page=comments#action_12429776 ] 
            
Doug Cutting commented on HADOOP-461:
-------------------------------------

Is there a reason you can't upgrade your mac to 10.4 (as required for Java 1.5)?


> Build broken forjava version "1.4.2_09"
> ---------------------------------------
>
>                 Key: HADOOP-461
>                 URL: http://issues.apache.org/jira/browse/HADOOP-461
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>         Environment: java version "1.4.2_09"
> Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_09-233)
> Java HotSpot(TM) Client VM (build 1.4.2-56, mixed mode)   
> Mac OS X - version 10.3.9
> 1.5GHz PowerPC G4
>            Reporter: woyg
>            Priority: Trivial
>         Attachments: build_broken_on_java1.4.diff, build_broken_on_java1.4.txt
>
>
> Build is broken on java 1.4.2_09.
> Method java.lang.Boolean.parseBoolean(String val) is  available since Java 5
> http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Boolean.html#parseBoolean(java.lang.String)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 18:30:21 2006
Return-Path: 
 <hadoop-dev-return-3256-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12844 invoked from network); 22 Aug 2006 18:30:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 18:30:21 -0000
Received: (qmail 31687 invoked by uid 500); 22 Aug 2006 18:30:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31505 invoked by uid 500); 22 Aug 2006 18:30:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31496 invoked by uid 99); 22 Aug 2006 18:30:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 11:30:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 11:30:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CACAF7142FD
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 18:27:14 +0000 (GMT)
Message-ID: <6413765.1156271234828.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 11:27:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-472) Streaming should not crash
In-Reply-To: <12816750.1156263013893.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-472?page=comments#action_12429777 ] 
            
Doug Cutting commented on HADOOP-472:
-------------------------------------

Is it the stack trace that bothers you?  If you want just a single message, then we could replace the stack trace with the exception name and its message.  If you find particular exception messages confusing, then we should fix things so that a more informative exception is thrown, rather than try to translate the messages to something more informative.

> Streaming should not crash
> --------------------------
>
>                 Key: HADOOP-472
>                 URL: http://issues.apache.org/jira/browse/HADOOP-472
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>
> Streaming framework should not end with a Java stack dump.
> All the abnormal conditions should be checked and reported.
> Specific conditions that need to be exmplicitly checked by the framework are:
> -- does the input exist?
> -- do the top level executables or scripts for -mapper and exist
> Any other Exceptions should also be cought and explained in an error message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 19:45:24 2006
Return-Path: 
 <hadoop-dev-return-3257-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40253 invoked from network); 22 Aug 2006 19:45:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 19:45:24 -0000
Received: (qmail 67416 invoked by uid 500); 22 Aug 2006 19:45:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67223 invoked by uid 500); 22 Aug 2006 19:45:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67207 invoked by uid 99); 22 Aug 2006 19:45:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 12:45:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 12:45:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 57C977142FA
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 19:42:15 +0000 (GMT)
Message-ID: <25567228.1156275735357.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 12:42:15 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12429787 ] 
            
Runping Qi commented on HADOOP-372:
-----------------------------------


I think it may be better to make InputPipeline as an interface:

public interface InputPipeline { 
  public Class createInputFormat(Path inputDir, JobConf conf); 
  public Class getMapper(Path inputDir, JobConf conf); 
  public int getRequestedNumMaps(Path inputDir, JobConf conf); 
} 

In order to customizing input processing pipeline, the user is expected to provide a class
that  implements the interface:

public class MyInputPipeline implements InputPipeline { 
  public MyInputPipeline(); 
  public Class getInputFormat(Path inputDir, JobConf conf); 
  public Class getMapper(Path inputDir, JobConf conf); 
  public int getRequestedNumMaps(Path inputDir, JobConf conf); 
} 

The class provides a argumentless constructor, and implements the logic to 
determine an InputFormat class and a mapper class that apply to the data under the 
specified input directory, and determine
the expected number of mappers for the data under the directory.

The access to this class is through two new methods of JobConf:

   public void setInputPipelineClass(Class cls); 
   public Class getInputPipelineClass(); 

To specify such a class, the user just simply call:
   myJob.setInputPipelineClass(MyInputPipeline.class)


The initTasks method of JobInProgress class can do something like the following:

       String jobFile = profile.getJobFile();

        JobConf jd = new JobConf(localJobFile);
        FileSystem fs = FileSystem.get(conf);
        String userPipelineClassName = jd.get("mapred.input.pipeline.class");
        InputPipeline  inputPipeline ;
        if (userPipelineClassName != null && localJarFile != null) {
          try {
            ClassLoader loader =
            new URLClassLoader(new URL[]{ localFs.pathToFile(localJarFile).toURL() });
            Class inputPipelineClass = Class.forName(userPipelineClassName , true, loader);
            inputPipeline  = (InputPipeline )inputPipelineClass.newInstance(); 
          } catch (Exception e) {
            throw new IOException(e.toString());
          }
        } else {
          inputPipeline = jd.getInputPipeline();
        }
        ArrayList allSplits;
        InputFormat inputFormat;
        InputFormat genericInputFormat;
        Class mapperClass;
        Class genericMapperClass;
        int numMapTasks;
        // code to get the generic input format, mapper class for the job
        
        Path[] dirs = job.getInputPaths();
        for (int i = 0; i < dirs.length; i++) {
                inputFormat = genericInputFormat;
                if (inputPipeline != null) {
                     Class inputFormatClass = inputPipeline.getInputFormat(dirs[i], jd);
                
                     if (inputFormatClass != null) {
                            inputFormat  = (InputFormat)inputFormatClass.newInstance();
                    } 
                    mapperClass = inputPipeline.getMapper(dirs[i], jd);
                    if (mapperClass == null) {
                          mapperClass = genericMapperClass;
                    }
                    int numMapTasks = inputPipeline.getRequestedNumMaps(dirs[i], jd);
                     
                }
                FileSplit[] splits = inputFormat.getSplits(fs, jd, numMapTasks);
                // add the new splits to allSplits
                ....
            }

        FileSplit[] splits = inputFormat.getSplits(fs, jd, numMapTasks);

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 19:51:21 2006
Return-Path: 
 <hadoop-dev-return-3258-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44959 invoked from network); 22 Aug 2006 19:51:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 19:51:21 -0000
Received: (qmail 84912 invoked by uid 500); 22 Aug 2006 19:51:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84735 invoked by uid 500); 22 Aug 2006 19:51:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84726 invoked by uid 99); 22 Aug 2006 19:51:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 12:51:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 12:51:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D316A7142F9
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 19:48:14 +0000 (GMT)
Message-ID: <32427909.1156276094862.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 12:48:14 -0700 (PDT)
From: "James P. White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-473) TextInputFormat does not correctly
 handle all line endings
In-Reply-To: <29195354.1156266433911.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-473?page=comments#action_12429789 ] 
            
James P. White commented on HADOOP-473:
---------------------------------------

The proposed patch does read-ahead/seek-back even when the initial newline character is '\n'.  

That is needlessly wasteful.  The could should be simplified to:

      if (c == '\n')
         break;
         
      if (c == '\r') {
        
        long curPos = in.getPos();
        char nextC = (char)in.read();
        
        // EOF -1 is also != '\n' so will work with Mac and EOF
        if (nextC != '\n')) {
          
          // seek back 1 char because the line ending is only 1 char
          in.seek(curPos);
        }

        break;
      }


> TextInputFormat does not correctly handle all line endings
> ----------------------------------------------------------
>
>                 Key: HADOOP-473
>                 URL: http://issues.apache.org/jira/browse/HADOOP-473
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0, 0.6.0
>         Environment: All environments
>            Reporter: Dennis Kubes
>         Attachments: text-input-format.patch
>
>
> The current TextInputFormat readLine method calls break on either a single '\r' or '\n' character.  This causes windows formatted text files '\r' '\n' to leave a trailing '\n' character and the next time the readLine method is called on the same input stream it returns a blank string.  The patch attached corrects this issue by looking for either single or double character line endings and positions the input stream to the next line.  It correctly handles windows, mac, and unix line endings.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 20:23:21 2006
Return-Path: 
 <hadoop-dev-return-3259-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53597 invoked from network); 22 Aug 2006 20:23:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 20:23:21 -0000
Received: (qmail 47197 invoked by uid 500); 22 Aug 2006 20:23:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47017 invoked by uid 500); 22 Aug 2006 20:23:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47008 invoked by uid 99); 22 Aug 2006 20:23:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 13:23:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 13:23:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C1B0541001E
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 20:20:14 +0000 (GMT)
Message-ID: <25693900.1156278014790.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 13:20:14 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-306?page=comments#action_12429795 ] 
            
Konstantin Shvachko commented on HADOOP-306:
--------------------------------------------

I'd like to discuss the meaning of the safemode.threshold parameter, which defines
when the name node can leave safe mode and start replication/deletion of blocks.
I see at least 2 meanings:
1) % of storage ids reported so far. Storage id is a unique id of a data node
that identifies the storage rather than the data node address.
2) % of blocks reported so far by all data nodes.
They seem to be pretty independent. Even if we have 100% storage ids
reported that does not mean we have 100% blocks.
What 100% means for blocks? Does it mean the name node has
2a) at least one copy of each block or
2b) the complete list of replicas for each block.
All three constraints seem reasonable.
100% in (1) is the best one could physically do, since all storages are
reported, it is just that they have corrupted or missing blocks.
100% in (2a) is the minimal requirement for the name node to start
without any data loss, and
100% in (2b) would be the perfect state of the system.
So the question is what do we really want?

> Safe mode and name node startup procedures
> ------------------------------------------
>
>                 Key: HADOOP-306
>                 URL: http://issues.apache.org/jira/browse/HADOOP-306
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 20:25:22 2006
Return-Path: 
 <hadoop-dev-return-3260-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54131 invoked from network); 22 Aug 2006 20:25:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 20:25:22 -0000
Received: (qmail 50222 invoked by uid 500); 22 Aug 2006 20:25:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50049 invoked by uid 500); 22 Aug 2006 20:25:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50040 invoked by uid 99); 22 Aug 2006 20:25:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 13:25:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 13:25:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 715A5410022
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 20:22:15 +0000 (GMT)
Message-ID: <17677750.1156278135461.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 13:22:15 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12429796 ] 
            
Runping Qi commented on HADOOP-372:
-----------------------------------


One correction on my previous comment: InputFormat should extend with the following method:

    FileSplit[] getSplits(FileSystem fs, JobConf jd, Path p, int numMapTasks); 

and the initTasks method should call:
    FileSplit[] splits = inputFormat.getSplits(fs, jd, dirs[i], numMapTasks); 
                

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 20:27:58 2006
Return-Path: 
 <hadoop-dev-return-3261-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55184 invoked from network); 22 Aug 2006 20:27:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 20:27:58 -0000
Received: (qmail 56410 invoked by uid 500); 22 Aug 2006 20:27:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56386 invoked by uid 500); 22 Aug 2006 20:27:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56377 invoked by uid 99); 22 Aug 2006 20:27:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 13:27:58 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 13:27:53 -0700
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k7MKRUQO053034
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 13:27:30 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:from:
	subject:date:to:x-mailer;
	b=tJrByudAZdQf7e/YJffz7f9aXT+NwAHfJsII/D5NjDDCm/qK7WksmyjD7aIPb2Ce
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <6413765.1156271234828.JavaMail.jira@brutus>
References: <6413765.1156271234828.JavaMail.jira@brutus>
Content-Type: multipart/alternative; boundary=Apple-Mail-33--269893380
Message-Id: <2975d7fc332835625377a734f3b9608f@yahoo-inc.com>
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-472) Streaming should not crash
Date: Tue, 22 Aug 2006 13:27:29 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-33--269893380
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed


On Aug 22, 2006, at 11:27 AM, Doug Cutting (JIRA) wrote:

>     [  
> http://issues.apache.org/jira/browse/HADOOP-472? 
> page=comments#action_12429777 ]
>
> Doug Cutting commented on HADOOP-472:
> -------------------------------------
>
> Is it the stack trace that bothers you?  If you want just a single  
> message, then we could replace the stack trace with the exception name  
> and its message.
This is less important than the latter (confusing message).
However, to a user of streaming, a stack trace produced by  
infrastructure signal an error in the infrastructure -- so I'd put  
meaningful messages.


> If you find particular exception messages confusing, then we should  
> fix things so that a more informative exception is thrown, rather than  
> try to translate the messages to something more informative.
Yes, this is more important.
Some can be done by putting more information into exception.
However, certain text may be produced specifically for a human.
E.g.
java.io.FileNotFoundException:  
/export/crawlspace/kryptonite/hadoop/mapred/local/task_0145_r_000000_0/ 
all.2
	at  
org.apache.hadoop.fs.LocalFileSystem.openRaw(LocalFileSystem.java:121)
is less meaningful than:
"it looks like Map step produce no output"

Third:
I believe that Streaming should check the correctness of the task  
before running into exceptions.  (Presence of input files and output  
location, presence of the executables, etc.)
It should also collect the error output of the executables and make it  
available as part of task error output. (Should this be a separate  
Bug?)

AB


>
>> Streaming should not crash
>> --------------------------
>>
>>                 Key: HADOOP-472
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-472
>>             Project: Hadoop
>>          Issue Type: Bug
>>          Components: contrib/streaming
>>            Reporter: arkady borkovsky
>>
>> Streaming framework should not end with a Java stack dump.
>> All the abnormal conditions should be checked and reported.
>> Specific conditions that need to be exmplicitly checked by the  
>> framework are:
>> -- does the input exist?
>> -- do the top level executables or scripts for -mapper and exist
>> Any other Exceptions should also be cought and explained in an error  
>> message.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>

--Apple-Mail-33--269893380--


From MAILER-DAEMON Tue Aug 22 20:43:24 2006
Return-Path: 
 <hadoop-dev-return-3262-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60187 invoked from network); 22 Aug 2006 20:43:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 20:43:24 -0000
Received: (qmail 82213 invoked by uid 500); 22 Aug 2006 20:43:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82148 invoked by uid 500); 22 Aug 2006 20:43:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82139 invoked by uid 99); 22 Aug 2006 20:43:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 13:43:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 13:43:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EC69A410022
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 20:40:16 +0000 (GMT)
Message-ID: <19004604.1156279216965.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 13:40:16 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12429802 ] 
            
eric baldeschwieler commented on HADOOP-331:
--------------------------------------------

Don't know that this would have a positive impact, but if this eased implementation in some way I don't yet understand, it would meet my requirements.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Yoram Arnon
>             Fix For: 0.6.0
>
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 21:28:21 2006
Return-Path: 
 <hadoop-dev-return-3263-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75653 invoked from network); 22 Aug 2006 21:28:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 21:28:21 -0000
Received: (qmail 58704 invoked by uid 500); 22 Aug 2006 21:28:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58529 invoked by uid 500); 22 Aug 2006 21:28:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58519 invoked by uid 99); 22 Aug 2006 21:28:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 14:28:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 14:28:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BF2BD410021
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 21:25:14 +0000 (GMT)
Message-ID: <27285763.1156281914780.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 14:25:14 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-470) Some improvements in the DFS content
 browsing UI
In-Reply-To: <21479637.1156226173918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-470?page=comments#action_12429811 ] 
            
eric baldeschwieler commented on HADOOP-470:
--------------------------------------------

Recursive size is going to be expensive, right?   Don't think we should do that by default.

-1

We could provide a link to do a DU to the UI.


> Some improvements in the DFS content browsing UI
> ------------------------------------------------
>
>                 Key: HADOOP-470
>                 URL: http://issues.apache.org/jira/browse/HADOOP-470
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Devaraj Das
>            Priority: Minor
>
> Some improvement requests from Yoram:
> 1. directory browsing: the size, replication and block size fields are unused, and indeed the replication field contains random junk. It would be useful to use these fields to represent the size of the folder (recursive, like du -s), and possibly the number of files in the folder.
> 2. since file sizes are typically very large, introducing a comma thousands separator will make them more readable. 
> 3. For a particular file I have the list of blocks that make it up. It would be useful to see the block placement information - which datanodes are holding that block. That's arguably more relevant than the block contents when clicking on the block.
> 4. a nit - 2048 may be too small a chunk size by default. The overhead of getting the first byte is so high (redirect, connect, handshake etc.) that you may as well get 10-20k as your first shot.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 22:25:24 2006
Return-Path: 
 <hadoop-dev-return-3264-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92207 invoked from network); 22 Aug 2006 22:25:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 22:25:24 -0000
Received: (qmail 46608 invoked by uid 500); 22 Aug 2006 22:25:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46527 invoked by uid 500); 22 Aug 2006 22:25:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46476 invoked by uid 99); 22 Aug 2006 22:25:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 15:25:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 15:25:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0A874410023
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 22:22:16 +0000 (GMT)
Message-ID: <7729083.1156285336038.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 15:22:16 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-263) task status should include
 timestamps for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-263?page=comments#action_12429824 ] 
            
Owen O'Malley commented on HADOOP-263:
--------------------------------------

Ok, looking at the current patch, I have a couple of comments:
  1. The shuffle & sort times should be set to the current time when a later stage is finished. (This would happen when the shuffle or sort finishes in less than a single reporting cycle.) I'd probably put the relevant check/update in the setters for the times in TaskStatus.
  2. You need to pull the replicated code for formatting delta times into StringUtils. And if a field (and all of the larger fields) are 0, you shouldn't print the label except for the last one. (eg. 0 time => "0 secs")
  3. Reporting time to milliseconds when the real granularity is 10 seconds is overkill. Just report to seconds.
  4. You don't need to add the type parameter to the taskdetails.jsp because it is available in TaskStatus.getIsMap()
  5. You should probably add the times to the TaskReport constructor rather than creating the object and setting it to be consistent with the other fields.

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 22:27:26 2006
Return-Path: 
 <hadoop-dev-return-3265-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92499 invoked from network); 22 Aug 2006 22:27:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 22:27:26 -0000
Received: (qmail 50212 invoked by uid 500); 22 Aug 2006 22:27:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50057 invoked by uid 500); 22 Aug 2006 22:27:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50048 invoked by uid 99); 22 Aug 2006 22:27:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 15:27:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 15:27:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E5CD9410024
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 22:24:14 +0000 (GMT)
Message-ID: <13063067.1156285454938.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 15:24:14 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-306?page=comments#action_12429825 ] 
            
Yoram Arnon commented on HADOOP-306:
------------------------------------

OTOH, I'd want the namenode to be able to move out of safe mode with minimal restrictions, to avoid unnecessary manual intervention.
OTOH, I want to avoid unnecessary thrash on startup, while data nodes are connecting.
So any solution would require both a threshold, and some timer once that threshold is reached, to avoid unnecessary replications the second the threshold is reached, before the last datanodes connect.

I'd go with a configuration requiring:
* 100% blocks are available, at least one replica
* allow one more minute for stragglers to connect and report their blocks

typically this would allow up to two nodes to be missing, but if by some magic more nodes are missing and I still have all my data intact, such as when we implement rack aware data placement and a rack goes down, hallelujah - I wait one minute and start re-replicating.

> Safe mode and name node startup procedures
> ------------------------------------------
>
>                 Key: HADOOP-306
>                 URL: http://issues.apache.org/jira/browse/HADOOP-306
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 22:46:26 2006
Return-Path: 
 <hadoop-dev-return-3266-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96782 invoked from network); 22 Aug 2006 22:46:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 22:46:26 -0000
Received: (qmail 78864 invoked by uid 500); 22 Aug 2006 22:46:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78690 invoked by uid 500); 22 Aug 2006 22:46:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78681 invoked by uid 99); 22 Aug 2006 22:46:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 15:46:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 15:46:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C730F7142F6
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 22:43:14 +0000 (GMT)
Message-ID: <4145819.1156286594813.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 15:43:14 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-306?page=comments#action_12429827 ] 
            
Yoram Arnon commented on HADOOP-306:
------------------------------------

du is inexpensive. See time comparisons of ls and du on the root of a DFS containing 4500 directories and 250000 files.
'top' on the namenode showed no discernable difference.

lsr is a different story, see timing at the bottom.

>time hadoop dfs -du /

real    0m2.217s
user    0m0.473s
sys     0m0.100s

>time hadoop dfs -ls /

real    0m2.036s
user    0m0.469s
sys     0m0.096s


>time hadoop dfs  -lsr /

real    0m55.100s
user    0m25.186s
sys     0m4.105s

> Safe mode and name node startup procedures
> ------------------------------------------
>
>                 Key: HADOOP-306
>                 URL: http://issues.apache.org/jira/browse/HADOOP-306
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 22:48:28 2006
Return-Path: 
 <hadoop-dev-return-3267-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97372 invoked from network); 22 Aug 2006 22:48:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 22:48:28 -0000
Received: (qmail 82219 invoked by uid 500); 22 Aug 2006 22:48:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82190 invoked by uid 500); 22 Aug 2006 22:48:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82166 invoked by uid 99); 22 Aug 2006 22:48:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 15:48:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 15:48:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B10DC714300
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 22:45:20 +0000 (GMT)
Message-ID: <8283614.1156286720722.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 15:45:20 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-263) task status should include
 timestamps for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-263?page=comments#action_12429830 ] 
            
Sanjay Dahiya commented on HADOOP-263:
--------------------------------------

  4. You don't need to add the type parameter to the taskdetails.jsp because it is available in TaskStatus.getIsMap() 

I added this to simplify the html generation, taskdetails.jsp is used for both Map and Reduce tasks, we get TaskStatuses from tracker.getTaskStatuses(). The header is generated even if there is no task status. using an extra parameter simplifies this. 

I agree with rest of the comments. 


> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 22 23:37:27 2006
Return-Path: 
 <hadoop-dev-return-3268-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10713 invoked from network); 22 Aug 2006 23:37:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 23:37:27 -0000
Received: (qmail 35383 invoked by uid 500); 22 Aug 2006 23:37:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34937 invoked by uid 500); 22 Aug 2006 23:37:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34925 invoked by uid 99); 22 Aug 2006 23:37:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 16:37:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 16:37:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B5856714303
	for <hadoop-dev@lucene.apache.org>; Tue, 22 Aug 2006 23:34:15 +0000 (GMT)
Message-ID: <4266348.1156289655741.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 16:34:15 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12429835 ] 
            
Owen O'Malley commented on HADOOP-372:
--------------------------------------

The question is how the user requests multiple InputPipelines. Either they do:

job.setInputPipeline(MyInputPipelineFactory.class);

or 

job.addInputPath(myInputDir, MyInputFormat.class, MyMapper.class, numMaps);

Setting a class is more similar to the other hooks to control processing in the JobConf, but the expanded addInputPath is more user friendly. I guess you're right that it is better to be friendly. *smile*

Whether the InputFormat's and Mapper's class is stored in the MapTask or FileSplit is a separate question. I think it makes more sense to put into the MapTask since that is a private type and doesn't change an API. Especially when you consider that we are going to generalize the FileSplit to InputSplit.

Finally, I think that getSplits should take a Path[] rather that just a path so that we can split evenly over a set of input paths. So I propose getSplits(FileSystem, Path[], JobConf, int numMaps).

In the long run, as we move Path's over to URL's that include their FileSystem we should drop explicit FileSystem parameters like this. But that is another patch. *grin*

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 23 00:55:22 2006
Return-Path: 
 <hadoop-dev-return-3269-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29495 invoked from network); 23 Aug 2006 00:55:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 00:55:22 -0000
Received: (qmail 40301 invoked by uid 500); 23 Aug 2006 00:55:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40279 invoked by uid 500); 23 Aug 2006 00:55:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40270 invoked by uid 99); 23 Aug 2006 00:55:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 17:55:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 17:55:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C6748410021
	for <hadoop-dev@lucene.apache.org>; Wed, 23 Aug 2006 00:52:14 +0000 (GMT)
Message-ID: <13521030.1156294334810.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 17:52:14 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-306?page=all ]

Yoram Arnon updated HADOOP-306:
-------------------------------

    Comment: was deleted

> Safe mode and name node startup procedures
> ------------------------------------------
>
>                 Key: HADOOP-306
>                 URL: http://issues.apache.org/jira/browse/HADOOP-306
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 23 00:55:23 2006
Return-Path: 
 <hadoop-dev-return-3270-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29524 invoked from network); 23 Aug 2006 00:55:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 00:55:23 -0000
Received: (qmail 40646 invoked by uid 500); 23 Aug 2006 00:55:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40475 invoked by uid 500); 23 Aug 2006 00:55:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40466 invoked by uid 99); 23 Aug 2006 00:55:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 17:55:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 17:55:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C87D5410023
	for <hadoop-dev@lucene.apache.org>; Wed, 23 Aug 2006 00:52:15 +0000 (GMT)
Message-ID: <1304587.1156294335819.JavaMail.jira@brutus>
Date: Tue, 22 Aug 2006 17:52:15 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-470) Some improvements in the DFS content
 browsing UI
In-Reply-To: <21479637.1156226173918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-470?page=comments#action_12429859 ] 
            
Yoram Arnon commented on HADOOP-470:
------------------------------------

 du is inexpensive. See time comparisons of ls and du on the root of a DFS containing 4500 directories and 250000 files.
'top' on the namenode showed no discernable difference.

lsr is a different story, see timing at the bottom.

>time hadoop dfs -du /

real 0m2.217s
user 0m0.473s
sys 0m0.100s

>time hadoop dfs -ls /

real 0m2.036s
user 0m0.469s
sys 0m0.096s


>time hadoop dfs -lsr /

real 0m55.100s
user 0m25.186s
sys 0m4.105s

> Some improvements in the DFS content browsing UI
> ------------------------------------------------
>
>                 Key: HADOOP-470
>                 URL: http://issues.apache.org/jira/browse/HADOOP-470
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Devaraj Das
>            Priority: Minor
>
> Some improvement requests from Yoram:
> 1. directory browsing: the size, replication and block size fields are unused, and indeed the replication field contains random junk. It would be useful to use these fields to represent the size of the folder (recursive, like du -s), and possibly the number of files in the folder.
> 2. since file sizes are typically very large, introducing a comma thousands separator will make them more readable. 
> 3. For a particular file I have the list of blocks that make it up. It would be useful to see the block placement information - which datanodes are holding that block. That's arguably more relevant than the block contents when clicking on the block.
> 4. a nit - 2048 may be too small a chunk size by default. The overhead of getting the first byte is so high (redirect, connect, handshake etc.) that you may as well get 10-20k as your first shot.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 23 07:48:27 2006
Return-Path: 
 <hadoop-dev-return-3272-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39611 invoked from network); 23 Aug 2006 07:48:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 07:48:27 -0000
Received: (qmail 63180 invoked by uid 500); 23 Aug 2006 07:48:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62989 invoked by uid 500); 23 Aug 2006 07:48:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62980 invoked by uid 99); 23 Aug 2006 07:48:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 00:48:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 00:48:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D9AF6410024
	for <hadoop-dev@lucene.apache.org>; Wed, 23 Aug 2006 07:45:14 +0000 (GMT)
Message-ID: <17643765.1156319114889.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 00:45:14 -0700 (PDT)
From: =?utf-8?Q?Fr=C3=A9d=C3=A9ric_Bertin_=28JIRA=29?= <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-424) mapreduce jobs fail when no split is
 returned via inputFormat.getSplits
In-Reply-To: <16027160.1154704034944.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-424?page=3Dall ]

Fr=C3=A9d=C3=A9ric Bertin updated HADOOP-424:
-----------------------------------

               Status: Patch Available  (was: Open)
    Affects Version/s: 0.5.0
                           (was: 0.4.0)

ok, here is a testcase (in a separate class). Indeed I tried to include it =
in TestMiniMRWithDFS class, but tests freezed at some point, don't know exa=
ctly why.

> mapreduce jobs fail when no split is returned via inputFormat.getSplits
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-424
>                 URL: http://issues.apache.org/jira/browse/HADOOP-424
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Fr=C3=A9d=C3=A9ric Bertin
>         Attachments: emptyJobTest.patch
>
>
> I'm using a MapReduce job to process some data logged and timestamped int=
o files.
> When the job runs, it does not process the whole data, but filters only t=
he data that has been logged since the last job run.
> However, when no new data has been logged, the job fails because the getS=
plits method of InputFormat returns no split. Thus the number of map tasks =
is 0. This is not intercepted, and the job fails at reduce step because it =
seems it does not find any data to process:
> java.io.FileNotFoundException: /local/home/hadoop/var/mapred/local/task_0=
030_r_000000_3/all.2 at org.apache.hadoop.fs.LocalFileSystem.openRaw(LocalF=
ileSystem.java:121) at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDa=
taInputStream.java:47) at org.apache.hadoop.fs.FSDataInputStream.(FSDataInp=
utStream.java:221) at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:=
150) at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:259) at=
 org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:253) at org.ap=
ache.hadoop.mapred.ReduceTask.run(ReduceTask.java:241) at org.apache.hadoop=
.mapred.TaskTracker$Child.main(TaskTracker.java:1013)
> What should be Hadoop's behaviour in such a case?
> IMHO, the job should be considered as successful. Indeed, this is not a j=
ob failure, but just a lack of input data. WDYT?

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Wed Aug 23 07:48:28 2006
Return-Path: 
 <hadoop-dev-return-3271-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39656 invoked from network); 23 Aug 2006 07:48:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 07:48:28 -0000
Received: (qmail 62950 invoked by uid 500); 23 Aug 2006 07:48:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62768 invoked by uid 500); 23 Aug 2006 07:48:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62759 invoked by uid 99); 23 Aug 2006 07:48:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 00:48:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 00:48:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E490A410026
	for <hadoop-dev@lucene.apache.org>; Wed, 23 Aug 2006 07:45:15 +0000 (GMT)
Message-ID: <8004387.1156319115934.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 00:45:15 -0700 (PDT)
From: =?utf-8?Q?Fr=C3=A9d=C3=A9ric_Bertin_=28JIRA=29?= <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-424) mapreduce jobs fail when no split is
 returned via inputFormat.getSplits
In-Reply-To: <16027160.1154704034944.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-424?page=3Dall ]

Fr=C3=A9d=C3=A9ric Bertin updated HADOOP-424:
-----------------------------------

    Attachment: emptyJobTest.patch

> mapreduce jobs fail when no split is returned via inputFormat.getSplits
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-424
>                 URL: http://issues.apache.org/jira/browse/HADOOP-424
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Fr=C3=A9d=C3=A9ric Bertin
>         Attachments: emptyJobTest.patch
>
>
> I'm using a MapReduce job to process some data logged and timestamped int=
o files.
> When the job runs, it does not process the whole data, but filters only t=
he data that has been logged since the last job run.
> However, when no new data has been logged, the job fails because the getS=
plits method of InputFormat returns no split. Thus the number of map tasks =
is 0. This is not intercepted, and the job fails at reduce step because it =
seems it does not find any data to process:
> java.io.FileNotFoundException: /local/home/hadoop/var/mapred/local/task_0=
030_r_000000_3/all.2 at org.apache.hadoop.fs.LocalFileSystem.openRaw(LocalF=
ileSystem.java:121) at org.apache.hadoop.fs.FSDataInputStream$Checker.(FSDa=
taInputStream.java:47) at org.apache.hadoop.fs.FSDataInputStream.(FSDataInp=
utStream.java:221) at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:=
150) at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:259) at=
 org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:253) at org.ap=
ache.hadoop.mapred.ReduceTask.run(ReduceTask.java:241) at org.apache.hadoop=
.mapred.TaskTracker$Child.main(TaskTracker.java:1013)
> What should be Hadoop's behaviour in such a case?
> IMHO, the job should be considered as successful. Indeed, this is not a j=
ob failure, but just a lack of input data. WDYT?

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Wed Aug 23 08:55:24 2006
Return-Path: 
 <hadoop-dev-return-3273-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62809 invoked from network); 23 Aug 2006 08:55:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 08:55:24 -0000
Received: (qmail 61655 invoked by uid 500); 23 Aug 2006 08:55:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61481 invoked by uid 500); 23 Aug 2006 08:55:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61467 invoked by uid 99); 23 Aug 2006 08:55:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 01:55:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 01:55:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D9F447142F2
	for <hadoop-dev@lucene.apache.org>; Wed, 23 Aug 2006 08:52:15 +0000 (GMT)
Message-ID: <12301188.1156323135890.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 01:52:15 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-288?page=all ]

Mahadev konar updated HADOOP-288:
---------------------------------

    Attachment: caching.patch
                test.zip
                test.jar

I have attached two other files to the patch which are small .jar and .zip files needed for the junit tests.

Caching and job.jars:

Two parts to the patch:
1) Unjarring job.jar once for a job
2) Archiving archives/files locally 

1) Unjarring of job.jar
Currently the job.jar is unjarred for each task. This patch makes the framework do the unjarring only once for the job. The current working directory for each task if the same directory where the job is unjarred once. 
So the directory structure now looks like:

tasktracker/jobcache/jod_id/workdir -- the dir where the job is unjarred once
----------------------------/job_id/task_id/task_specific_job.xml

The current working dir for each task is the workdir.

2) Archiving of files- 

i) Each job can ask for a set of archives/files to be localized. The api for that is 
 jobconf.setCacheArchives(comma seperated list of archives)
 or 
 jobconf.setCacheFiles(comma seperated list of files).
 The comma seperated list can be specified as absolute path to files/caches (eg. /user/mahadev/test.jar) if they are in the same dfs as the mapred is running on or else they can be specified using urls as in copyfiles ( dfs://hostname:port/path_to_cache )
 There are two apis provided so that users who do not want their archives to be unarchived by the framework or just want to localize a file should use the second api.

ii) These archives/files should be present in the specified DFS for localizing.
    The user makes sure that these archives are present in the DFS before he submits the job else an error will be thrown that these archives are not present in DFS.

iii) Localization happens across jobs. So each cache archive/file has a key and the key is the url of the cache (in case of absolute path its the absolute path) 

iv) Whenever a job is started, the first tasks for these jobs will localize the archives. 
    The archives are stored in mapred.local/tasktracker/archives/hostname_of_dfs/dfs path of the archive.
    So an archive called /user/mahadev/k.zip  on a dfs running on machine1 would be unarchived in  
    dir =  mapred.local/tasktracker/archives/machine1/user/mahadev/k.zip/
    This dir contains the unarchived contents of k.zip.
    If it is just a file (/user/mahadev/test.txt and not an archive, then it is stored in a directory called 
    mapred.local/tasktracker/archives/machine1/user/mahadev/test.txt/test.txt
    the local directory name contains test.txt directory just to make it similar to the archive structure.

   if no dfs://hostname:port is specified (eg : setcachefiles(/user/mahadev/test.txt)), in that case it is stored in 
  mapred.local/tasktracker/archives/hostname_of_dfs_usedby_mapred/user/mahadev/test.txt

v) The archives are localized only once and checked for each task if they are fresh and need to be refresed or not.
   This is done using md5 checksum of the .crc files for the archives.
   
   Steps:
    a) When a job is submitted, the md5 checksums of the required archives/files in dfs are calculated and are written into the 
       jobconf.
    b) when a task is executing, it matches this md5 to the md5 of the localized cache (stored in memory after it has been localized). If they match its fine to go ahead with this archive.
       If it does not match then the md5 of the .crc of the file in dfs is calculated. If this does not match then the archives have been changed since the job has been submitted, so the tasks fail with this error. If they do match then the cache is refreshed again. 

    c) Two jobs can use the same archives in parallel, but if the second job updates the same archive and tries using the updated archive, then it will fail.
    
vi) How to get the localized cache paths
   An api in the jobconf called jobconf.getLocallizedCacheArchives gives a comma seperated list of localized path of the archives in the same order they had been asked to be localized.
  Also, you can use names for archives. So you could do something like:
 setcachearchives(x=somearchive)
and in the maps/reduces do conf.getNamedCache(x) and it will return the localized path of the cache named x.
vii) Restrictions: 
  Currently only *.zip and *.jar are only supported for archives. 

viii) Also, caching across tasktracker going up and down is not supported. So a tasktracker would lose all caching information once it goes down. The caching information can be reconstructed when the task tracker comes up but the support is not available in this patch.

ix) When are the caches deleted?
    A soft limit on the cache directory is a configuration parameter in the hadoop-default set to 10GB. So whenever the cache directory size goes beyond this size the framework will try deleting local caches that are not being used.





> RFC: Efficient file caching
> ---------------------------
>
>                 Key: HADOOP-288
>                 URL: http://issues.apache.org/jira/browse/HADOOP-288
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: caching.patch, test.jar, test.zip
>
>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 23 15:40:49 2006
Return-Path: 
 <hadoop-dev-return-3274-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40938 invoked from network); 23 Aug 2006 15:40:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 15:40:49 -0000
Received: (qmail 3776 invoked by uid 500); 23 Aug 2006 15:40:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3756 invoked by uid 500); 23 Aug 2006 15:40:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3742 invoked by uid 99); 23 Aug 2006 15:40:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 08:40:48 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ssiren@gmail.com designates
 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 08:40:47 -0700
Received: by nf-out-0910.google.com with SMTP id b2so346775nfe
        for <hadoop-dev@lucene.apache.org>;
 Wed, 23 Aug 2006 08:40:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=NYSv2xP0MI0vXCLefOsOwVu+45uK54jc3O8DsrElypCdYvKbecAVarU3RxOOKigDJqQXUKoPtYepeg21tEV2r+MaL0lT1G8epMZ/QYV7wLlxU3oBpYWsr2VOjCBwW/wHSd0JDaWt0aATreSAE9QY8yvJwRBB4HaObghWHqk1Y20=
Received: by 10.48.254.10 with SMTP id b10mr2143222nfi;
        Wed, 23 Aug 2006 08:40:25 -0700 (PDT)
Received: from ?84.231.72.32? ( [84.231.72.32])
        by mx.gmail.com with ESMTP id x27sm2620685nfb.2006.08.23.08.40.24;
        Wed, 23 Aug 2006 08:40:25 -0700 (PDT)
Message-ID: <44EC76C8.1010302@gmail.com>
Date: Wed, 23 Aug 2006 18:39:52 +0300
From: Sami Siren <ssiren@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060808)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: bug or a feature?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Currently o.a.h.m.JobConf has construcor:
JobConf(Configuration conf, Class exampleClass)

which calls
    this(conf) which has
    initialize()

initialize method has:
    addDefaultResource("mapred-default.xml");

    which leads to properties of JobConf to be cleared ->
    reload is triggered.

This leads to the fact that the conf values submitted to constructor are 
not actually used, well they
kind of are for a short time because the properties are copied in 
constructor of Configuration, but then
there comes the addDefaultResource which leads to properties being 
flushed and
config resources reparsed and dynamically set values get lost.

I see that javadoc only talks about inheriting the settings, but is it 
really supposed to be working
the way it is now or should the submitted (possibly dynamically set) 
configuration variables and
values be preserved?
--
 Sami Siren




From MAILER-DAEMON Wed Aug 23 16:54:24 2006
Return-Path: 
 <hadoop-dev-return-3275-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67355 invoked from network); 23 Aug 2006 16:54:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 16:54:24 -0000
Received: (qmail 55397 invoked by uid 500); 23 Aug 2006 16:54:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55321 invoked by uid 500); 23 Aug 2006 16:54:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55285 invoked by uid 99); 23 Aug 2006 16:54:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 09:54:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 09:54:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EA7197142F5
	for <hadoop-dev@lucene.apache.org>; Wed, 23 Aug 2006 16:51:15 +0000 (GMT)
Message-ID: <27507798.1156351875957.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 09:51:15 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-468) Setting scheduling priority in
 hadoop-env.sh
In-Reply-To: <5671844.1156168573953.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-468?page=all ]

Doug Cutting resolved HADOOP-468.
---------------------------------

    Fix Version/s: 0.6.0
       Resolution: Fixed

I just committed this.  I renamed the environment variable from HADOOP_NICE_VALUE to HADOOP_NICENESS, and also added an entry to hadoop-env.sh.template.  (hadoop-env.sh is not in svn, so that user modifications to it are not overwritten.  Instead we copy such files from a template file at build time.)

Thanks, Vetle!

> Setting scheduling priority in hadoop-env.sh
> --------------------------------------------
>
>                 Key: HADOOP-468
>                 URL: http://issues.apache.org/jira/browse/HADOOP-468
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Vetle Roeim
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: hadoop-468-2.diff, sched_priority.diff
>
>
> It is not possible to set the scheduling priority in the Hadoop configuration. Attached is a patch for starting the Hadoop daemons through nice with the configured priority (can be configured in conf/hadoop-env.sh, for instance).
> I would have included a patch for conf/hadoop-env.sh as well, but it seems to be ignored?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 23 17:33:23 2006
Return-Path: 
 <hadoop-dev-return-3276-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81424 invoked from network); 23 Aug 2006 17:33:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 17:33:23 -0000
Received: (qmail 58865 invoked by uid 500); 23 Aug 2006 17:33:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58827 invoked by uid 500); 23 Aug 2006 17:33:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58782 invoked by uid 99); 23 Aug 2006 17:33:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 10:33:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 10:33:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DBD3E410010
	for <hadoop-dev@lucene.apache.org>; Wed, 23 Aug 2006 17:30:14 +0000 (GMT)
Message-ID: <31606014.1156354214897.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 10:30:14 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12430052 ] 
            
Doug Cutting commented on HADOOP-312:
-------------------------------------

A few more issues:

The IS_CACHING_DISABLED field should not be all caps, since it is not a constant.

When connection caching is disabled then the connection threads should exit when there are no outstanding responses.  Then the connections.remove(address) could also be moved to Connection.close(), removing some duplicate logic.

Finally, the check of 'cachingDisabled' could be moved to be inside of incrementRef and decrementRef, rather than around each call, changing these to something like:

private void incrementRef() {
  if (cachingDisabled) {
    return;
  }
  synchronized (this) {
    ...
  }
}

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:50:47 2006
Return-Path: 
 <hadoop-dev-return-3277-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83176 invoked from network); 24 Aug 2006 06:50:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:50:47 -0000
Received: (qmail 76549 invoked by uid 500); 24 Aug 2006 06:50:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76467 invoked by uid 500); 24 Aug 2006 06:50:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76412 invoked by uid 99); 24 Aug 2006 06:50:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:50:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:50:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 91D4E7142F3
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:47:35 +0000 (GMT)
Message-ID: <12555268.1156402055594.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:47:35 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-288?page=all ]

Mahadev konar updated HADOOP-288:
---------------------------------

               Status: Patch Available  (was: Open)
    Affects Version/s: 0.6.0

> RFC: Efficient file caching
> ---------------------------
>
>                 Key: HADOOP-288
>                 URL: http://issues.apache.org/jira/browse/HADOOP-288
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: caching.patch, test.jar, test.zip
>
>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:51:06 2006
Return-Path: 
 <hadoop-dev-return-3278-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84255 invoked from network); 24 Aug 2006 06:51:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:51:06 -0000
Received: (qmail 80190 invoked by uid 500); 24 Aug 2006 06:51:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80136 invoked by uid 500); 24 Aug 2006 06:51:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80108 invoked by uid 99); 24 Aug 2006 06:51:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9E35C714304
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:47:48 +0000 (GMT)
Message-ID: <3606055.1156402068645.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:47:48 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12430062 ] 
            
Devaraj Das commented on HADOOP-312:
------------------------------------

Actually, I thought that I could save the overhead of destroying/creating threads every so often (could be as frequent as once every second). In the current patch, client connection thread will be created just once for every server and that is destroyed & re-created only when there is an error in receiving server response, etc.

Regarding the check for cachingDisabled, it's outside incrementRef/decrementRef since I wanted to avoid so-many-unnecessary method invocations when caching is disabled.

I agree with the IS_CACHING_DISABLED comment that it should not be all caps.

Makes sense ?

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:51:14 2006
Return-Path: 
 <hadoop-dev-return-3279-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84754 invoked from network); 24 Aug 2006 06:51:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:51:14 -0000
Received: (qmail 81051 invoked by uid 500); 24 Aug 2006 06:51:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81008 invoked by uid 500); 24 Aug 2006 06:51:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80974 invoked by uid 99); 24 Aug 2006 06:51:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 52E437142F6
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:47:57 +0000 (GMT)
Message-ID: <26471397.1156402077337.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:47:57 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-441?page=comments#action_12430068 ] 
            
Arun C Murthy commented on HADOOP-441:
--------------------------------------

Doug,

  Conceptually this makes sense, I'm all for it.
  
  There is one irritant with the create methods for DeflaterOutputStream/InflaterInputStream in CompressionCodec... it's got to do with the Deflater/Inflater fields for streams respectively. Specifically the issue is we need to pass in our own Deflater/Inflater objects in order to be able to 'reset' the internal compressor/decompressor of the respective streams; this ability to 'reset' is otherwise absent (since we can't access those 'protected' fields) as is crucial for SequenceFile's block compression (in the case where next(key,val) is followed by next(key) and block boundary is hit). We probably need to define our own interface for compressor/decompressor streams or atleast have the CompressionCodec work with an extended class of DeflaterOutputStream/InflaterInputStream (which will have the 'reset' functionality we need).

 Thoughts?

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:51:14 2006
Return-Path: 
 <hadoop-dev-return-3280-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84766 invoked from network); 24 Aug 2006 06:51:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:51:14 -0000
Received: (qmail 81203 invoked by uid 500); 24 Aug 2006 06:51:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81154 invoked by uid 500); 24 Aug 2006 06:51:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81098 invoked by uid 99); 24 Aug 2006 06:51:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 56FDC71430B
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:47:58 +0000 (GMT)
Message-ID: <33427412.1156402078353.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:47:58 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12430069 ] 
            
Devaraj Das commented on HADOOP-312:
------------------------------------

Meant to say "Regarding the check for cachingDisabled, it's outside incrementRef/decrementRef since I wanted to avoid so-many-unnecessary method invocations when caching is enabled. "


> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:51:26 2006
Return-Path: 
 <hadoop-dev-return-3281-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85394 invoked from network); 24 Aug 2006 06:51:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:51:26 -0000
Received: (qmail 82675 invoked by uid 500); 24 Aug 2006 06:51:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82649 invoked by uid 500); 24 Aug 2006 06:51:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82627 invoked by uid 99); 24 Aug 2006 06:51:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:12 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 60CB971430C
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:47:59 +0000 (GMT)
Message-ID: <7296084.1156402079394.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:47:59 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-441?page=comments#action_12430070 ] 
            
Owen O'Malley commented on HADOOP-441:
--------------------------------------

I like the idea, but DeflaterOutputStream and InflaterInputStream are zlib specific.

How about three interfaces in hadoop.io:

public interface CompressionOutputStream {
...
}

public interface CompressionInputStream {
...
}

public interface CompressionCodec {
  CompressionOutputStream createOutputStream(OutputStream out);
  CompressionInputStream createInputStream(InputStream in);
}

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:51:45 2006
Return-Path: 
 <hadoop-dev-return-3282-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86772 invoked from network); 24 Aug 2006 06:51:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:51:45 -0000
Received: (qmail 85065 invoked by uid 500); 24 Aug 2006 06:51:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85039 invoked by uid 500); 24 Aug 2006 06:51:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84778 invoked by uid 99); 24 Aug 2006 06:51:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7EE4D7142F5
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:48:16 +0000 (GMT)
Message-ID: <102470.1156402096517.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:48:16 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-472) Streaming should not crash
In-Reply-To: <12816750.1156263013893.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-472?page=comments#action_12430079 ] 
            
eric baldeschwieler commented on HADOOP-472:
--------------------------------------------

sounds like checking the reconditions before executing is a good idea.

The result of this could just be clearer exceptions.

The question is, should this happen?  If so, it is not an exception.  If not, it is IMO.

> Streaming should not crash
> --------------------------
>
>                 Key: HADOOP-472
>                 URL: http://issues.apache.org/jira/browse/HADOOP-472
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>
> Streaming framework should not end with a Java stack dump.
> All the abnormal conditions should be checked and reported.
> Specific conditions that need to be exmplicitly checked by the framework are:
> -- does the input exist?
> -- do the top level executables or scripts for -mapper and exist
> Any other Exceptions should also be cought and explained in an error message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:51:55 2006
Return-Path: 
 <hadoop-dev-return-3284-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87263 invoked from network); 24 Aug 2006 06:51:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:51:55 -0000
Received: (qmail 86587 invoked by uid 500); 24 Aug 2006 06:51:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86566 invoked by uid 500); 24 Aug 2006 06:51:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86519 invoked by uid 99); 24 Aug 2006 06:51:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 736067142E4
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:48:23 +0000 (GMT)
Message-ID: <9922345.1156402103470.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:48:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-288?page=comments#action_12430084 ] 
            
Doug Cutting commented on HADOOP-288:
-------------------------------------

The LocalDU class should rather be a method on FileUtils, as should the UnZip utility.

DistributedCache should not be public, nor should the methods you add to TaskTracker.  The only public API for this new feature is the two new JobConf methods, right?



> RFC: Efficient file caching
> ---------------------------
>
>                 Key: HADOOP-288
>                 URL: http://issues.apache.org/jira/browse/HADOOP-288
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: caching.patch, test.jar, test.zip
>
>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:51:52 2006
Return-Path: 
 <hadoop-dev-return-3283-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87143 invoked from network); 24 Aug 2006 06:51:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:51:52 -0000
Received: (qmail 86311 invoked by uid 500); 24 Aug 2006 06:51:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86288 invoked by uid 500); 24 Aug 2006 06:51:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86258 invoked by uid 99); 24 Aug 2006 06:51:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 765EC7142F6
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:48:24 +0000 (GMT)
Message-ID: <17473669.1156402104481.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:48:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-451) Add a Split interface
In-Reply-To: <24919314.1155330613896.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-451?page=comments#action_12430085 ] 
            
Doug Cutting commented on HADOOP-451:
-------------------------------------

In a comment on HADOOP-372, Owen suggests that the getSplits() method should look like:

Split[] getSplits(URI[], JobConf, int numMaps);

I think that's a good idea.


> Add a Split interface
> ---------------------
>
>                 Key: HADOOP-451
>                 URL: http://issues.apache.org/jira/browse/HADOOP-451
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Doug Cutting
>             Fix For: 0.6.0
>
>
> The InputFormat interface has a method:
> FileSplit[] getSplits();
> This should change to:
> Split[] getSplits();
> The Split interface would look like:
> public interface Split extends Writable {
>   /** Returns a list of hosts that contain this split.
>        This is only used to optimize task placement, so this may be empty. */
>   String[] getLocations(FileSystem fs);
>   /** The relative, estimated cost of operating on this.  Typically the size of the data in the split.
>        Used to prioritize tasks in a job (high-cost tasks are run first).  */
>    long getCost();
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:51:58 2006
Return-Path: 
 <hadoop-dev-return-3285-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87453 invoked from network); 24 Aug 2006 06:51:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:51:58 -0000
Received: (qmail 87860 invoked by uid 500); 24 Aug 2006 06:51:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87753 invoked by uid 500); 24 Aug 2006 06:51:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87462 invoked by uid 99); 24 Aug 2006 06:51:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 44C347142FA
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:48:27 +0000 (GMT)
Message-ID: <19570440.1156402107279.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:48:27 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12430087 ] 
            
Doug Cutting commented on HADOOP-372:
-------------------------------------

> job.addInputPath(myInputDir, MyInputFormat.class, MyMapper.class, numMaps); 

Why can't this simply be

job.addInputPath(myInputDir, MyInputFormat.class);

and let the mapper be determined by the inputformat?

I also don't think that users should typically be specifying the number of map tasks.  Their code should run unchanged on clusters of various sizes.  The number of map tasks should thus be determined dynamically when splitting.

I also think the above should simply be syntactic sugar for:

job.setInputFormat(MyInputFormat.class)
job.set("my.input.dirs", "foo,bar");
job.set("my.mappers", "FooMapper,BarMapper");

Then implement MyInputFormat to process my.input.dirs and my.mappers.

In other words, we should foremost first make it possible to do this in user code, then perhaps provide some utilities that simplify things.  So the first patch I'd like to see is mappers from record readers.  Then we can write some InputFormats that use these new features and perhaps promote some of them into the standard public APIs.  Does this make sense?  Am I missing something?

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:52:09 2006
Return-Path: 
 <hadoop-dev-return-3286-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88085 invoked from network); 24 Aug 2006 06:52:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:52:09 -0000
Received: (qmail 88566 invoked by uid 500); 24 Aug 2006 06:51:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88540 invoked by uid 500); 24 Aug 2006 06:51:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88500 invoked by uid 99); 24 Aug 2006 06:51:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BCBB7714306
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:48:35 +0000 (GMT)
Message-ID: <23230548.1156402115770.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:48:35 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12430091 ] 
            
Owen O'Malley commented on HADOOP-54:
-------------------------------------

A minor quible is that when you are basically implementing an Enum, we should probably use the name "valueOf(String)" instead of "getCompressionType(String)" to be forward compatible with the java 1.5 signature for that functionality.

I'd also like to see some performance numbers for straight reads and writes of the seq3 and seq4 block compressed files.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFile.20060821.patch, SequenceFile.20060821.perfomance.txt, SequenceFile.20060822.tgz, SequenceFile.updated.final.patch, SequenceFiles.final.patch, SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:52:14 2006
Return-Path: 
 <hadoop-dev-return-3287-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88358 invoked from network); 24 Aug 2006 06:52:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:52:14 -0000
Received: (qmail 89365 invoked by uid 500); 24 Aug 2006 06:51:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89339 invoked by uid 500); 24 Aug 2006 06:51:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89285 invoked by uid 99); 24 Aug 2006 06:51:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D5BF7714312
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:48:39 +0000 (GMT)
Message-ID: <21531571.1156402119873.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:48:39 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-470) Some improvements in the DFS content
 browsing UI
In-Reply-To: <21479637.1156226173918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-470?page=comments#action_12430093 ] 
            
Doug Cutting commented on HADOOP-470:
-------------------------------------

Looking at the code I see that du does walk the entire tree, but the walk is server-side and quite efficient.  On the other hand, we perform the 'du' calculation for every directory stat'd, always returning it pre-computed with the other file metadata.  That's probably excessive.  We should probably make a separate RPC for 'du'.

> Some improvements in the DFS content browsing UI
> ------------------------------------------------
>
>                 Key: HADOOP-470
>                 URL: http://issues.apache.org/jira/browse/HADOOP-470
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Devaraj Das
>            Priority: Minor
>
> Some improvement requests from Yoram:
> 1. directory browsing: the size, replication and block size fields are unused, and indeed the replication field contains random junk. It would be useful to use these fields to represent the size of the folder (recursive, like du -s), and possibly the number of files in the folder.
> 2. since file sizes are typically very large, introducing a comma thousands separator will make them more readable. 
> 3. For a particular file I have the list of blocks that make it up. It would be useful to see the block placement information - which datanodes are holding that block. That's arguably more relevant than the block contents when clicking on the block.
> 4. a nit - 2048 may be too small a chunk size by default. The overhead of getting the first byte is so high (redirect, connect, handshake etc.) that you may as well get 10-20k as your first shot.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:52:35 2006
Return-Path: 
 <hadoop-dev-return-3288-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89685 invoked from network); 24 Aug 2006 06:52:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:52:35 -0000
Received: (qmail 92001 invoked by uid 500); 24 Aug 2006 06:52:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91940 invoked by uid 500); 24 Aug 2006 06:52:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91912 invoked by uid 99); 24 Aug 2006 06:52:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:52:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:51:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C4EEC7142F9
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:48:51 +0000 (GMT)
Message-ID: <28178843.1156402131804.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:48:51 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-441?page=comments#action_12430100 ] 
            
Owen O'Malley commented on HADOOP-441:
--------------------------------------

I guess it would also be nice if the codec class had a default extension:

interface CompressionCodec {
  ... previous stuff
  // return the default filename extension
  String getDefaultExtension();
}

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:52:37 2006
Return-Path: 
 <hadoop-dev-return-3289-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89735 invoked from network); 24 Aug 2006 06:52:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:52:37 -0000
Received: (qmail 92548 invoked by uid 500); 24 Aug 2006 06:52:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92515 invoked by uid 500); 24 Aug 2006 06:52:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92470 invoked by uid 99); 24 Aug 2006 06:52:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:52:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:52:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EFEB871430F
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:48:52 +0000 (GMT)
Message-ID: <19704285.1156402132980.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:48:52 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-474) support compressed text files as input
 and output
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

support compressed text files as input and output
-------------------------------------------------

                 Key: HADOOP-474
                 URL: http://issues.apache.org/jira/browse/HADOOP-474
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.5.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.6.0


I'd like TextInputFomat and TextOutputFormat to automatically compress and uncompress text files when they are read and written. Furthermore, I'd like to be able to use custom compressors as defined in HADOOP-441. Therefore, I propose:

Adding a map of compression codecs in the server config files:

io.compression.codecs = "<suffix>=<codec class>,..."

so the default would be something like:

<property>
  <name>io.compression.codecs</name>
  <value>.gz=org.apache.hadoop.io.GZipCodec,.Z=org.apache.hadoop.io.ZipCodec</value>
  <description>A list of file suffixes and the codecs for them.</description>
</property>

note that the suffix can include multiple "." so you could support suffixes like ".tar.gz", but they are just treated as literals against the end of the filename.

If the TextInputFormat is dealing with such a file, it:
  1. makes a single split
  2. decompresses automatically

On the output side, if mapred.output.compress is true, then TextOutputFormat would use a new property mapred.output.compression.codec that would define the codec to use to compress the outputs,  defaulting to gzip. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:53:02 2006
Return-Path: 
 <hadoop-dev-return-3291-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91169 invoked from network); 24 Aug 2006 06:53:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:53:02 -0000
Received: (qmail 95598 invoked by uid 500); 24 Aug 2006 06:52:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95579 invoked by uid 500); 24 Aug 2006 06:52:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95553 invoked by uid 99); 24 Aug 2006 06:52:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:52:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:52:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 98E1F7142E7
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:48:58 +0000 (GMT)
Message-ID: <3590642.1156402138623.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:48:58 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12430105 ] 
            
Owen O'Malley commented on HADOOP-372:
--------------------------------------

The problem with that is often I won't want to use a non-standard InputFormat. A very typical case is to have the same input format, but different Mappers.

job.addInputPath("foo", TextInputFormat.class, FooMapper.class);
job.addInputPath("bar", TextInputFormat.class, BarMapper.class);

The same applies to SequenceFileInputFormat (or combinations of the two), especially now that the input key/value types are created by the RecordReader. 



> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:52:59 2006
Return-Path: 
 <hadoop-dev-return-3290-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90855 invoked from network); 24 Aug 2006 06:52:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:52:59 -0000
Received: (qmail 94925 invoked by uid 500); 24 Aug 2006 06:52:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94889 invoked by uid 500); 24 Aug 2006 06:52:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94865 invoked by uid 99); 24 Aug 2006 06:52:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:52:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:52:13 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8660D7142F6
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:49:05 +0000 (GMT)
Message-ID: <14258666.1156402145548.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:49:05 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12430107 ] 
            
Doug Cutting commented on HADOOP-372:
-------------------------------------

> A very typical case is to have the same input format, but different Mappers

But, if the mapper is a function of the input format this can instead be:

job.addInputPath("foo", FooInput.class);
job.addInputPath("bar", BarInput.class);

Where FooInput is defined with something like:

public class FooInput extends TextInput {
  public void map(...) { ... };
}

In other words, if you're going to define custom mappers anyway, then it's no more work to define custom Input formats.

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:53:23 2006
Return-Path: 
 <hadoop-dev-return-3292-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91870 invoked from network); 24 Aug 2006 06:53:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:53:23 -0000
Received: (qmail 98766 invoked by uid 500); 24 Aug 2006 06:52:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98749 invoked by uid 500); 24 Aug 2006 06:52:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98700 invoked by uid 99); 24 Aug 2006 06:52:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:52:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:52:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C4EE9714305
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:49:23 +0000 (GMT)
Message-ID: <1959060.1156402163804.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:49:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12430122 ] 
            
Doug Cutting commented on HADOOP-312:
-------------------------------------

> I thought that I could save the overhead of destroying/creating threads [ ...]

Threads should be cheap to create, but keeping too many around can be expensive.  Again, I think the life of the thread should be the same as the life of the connection.

> I wanted to avoid so-many-unnecessary method invocations when caching is disabled.

Method invocations that check a flag are plenty fast.  This is not an inner loop.  I'd rather have this code be easier to maintain than a few nanoseconds faster.

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:53:33 2006
Return-Path: 
 <hadoop-dev-return-3293-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92393 invoked from network); 24 Aug 2006 06:53:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:53:33 -0000
Received: (qmail 210 invoked by uid 500); 24 Aug 2006 06:52:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 157 invoked by uid 500); 24 Aug 2006 06:52:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 118 invoked by uid 99); 24 Aug 2006 06:52:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:52:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:52:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 01567714311
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:49:30 +0000 (GMT)
Message-ID: <27625850.1156402170002.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:49:30 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-467) Building test cases broken on
 java-1.4, TextTest.java has string creation bug.
In-Reply-To: <4386369.1156151655328.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-467?page=comments#action_12430127 ] 
            
Owen O'Malley commented on HADOOP-467:
--------------------------------------

-1

I think that we should just bite the bullet and move to 1.5's generics, enums, and richer library. I do wish that Sun would open source Java so that more platforms could have current jdks.

> Building test cases broken on java-1.4, TextTest.java has string creation bug.
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-467
>                 URL: http://issues.apache.org/jira/browse/HADOOP-467
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>         Environment: Java HotSpot(TM) Client VM (build 1.4.2_10-b03, mixed mode)
> rajaram.desktop% Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_10-b03)
> RHEL3
>            Reporter: woyg
>            Priority: Minor
>         Attachments: testCasesNotCompilableOnjava1.4.patch
>
>
> *Test Files
> --- src/test/org/apache/hadoop/io/TestText.java (revision 432549)
> --- src/test/org/apache/hadoop/mapred/MiniMRCluster.java        (revision 432549)
> --- src/test/org/apache/hadoop/mapred/TestSequenceFileInputFilter.java  (revision 432549)
> --- src/test/org/apache/hadoop/dfs/TestDFSShellGenericOptions.java      (revision 432549)
> Broken on java-1.4
> and a bug in static method getTestString(int len).
> This function generates a character with code point equal or smaller then 0xFFFF, and converts this into array of chars of size 2(which should be one) and appened it buffer.
> So resulting into a a null character tobe inserted into string after a no null character.
>  ----
> Find Patch attached.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:53:36 2006
Return-Path: 
 <hadoop-dev-return-3294-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92535 invoked from network); 24 Aug 2006 06:53:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:53:36 -0000
Received: (qmail 539 invoked by uid 500); 24 Aug 2006 06:52:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 509 invoked by uid 500); 24 Aug 2006 06:52:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 488 invoked by uid 99); 24 Aug 2006 06:52:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:52:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:52:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B225F7142F9
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:49:33 +0000 (GMT)
Message-ID: <29436390.1156402173727.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:49:33 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-473) TextInputFormat does not correctly
 handle all line endings
In-Reply-To: <29195354.1156266433911.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-473?page=comments#action_12430129 ] 
            
Owen O'Malley commented on HADOOP-473:
--------------------------------------

+1 with the read-ahead removal.

> TextInputFormat does not correctly handle all line endings
> ----------------------------------------------------------
>
>                 Key: HADOOP-473
>                 URL: http://issues.apache.org/jira/browse/HADOOP-473
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0, 0.6.0
>         Environment: All environments
>            Reporter: Dennis Kubes
>         Attachments: text-input-format.patch
>
>
> The current TextInputFormat readLine method calls break on either a single '\r' or '\n' character.  This causes windows formatted text files '\r' '\n' to leave a trailing '\n' character and the next time the readLine method is called on the same input stream it returns a blank string.  The patch attached corrects this issue by looking for either single or double character line endings and positions the input stream to the next line.  It correctly handles windows, mac, and unix line endings.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:54:54 2006
Return-Path: 
 <hadoop-dev-return-3295-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97676 invoked from network); 24 Aug 2006 06:54:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:54:54 -0000
Received: (qmail 12722 invoked by uid 500); 24 Aug 2006 06:53:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12600 invoked by uid 500); 24 Aug 2006 06:53:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12552 invoked by uid 99); 24 Aug 2006 06:53:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:53:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:53:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EA2F5714305
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:50:26 +0000 (GMT)
Message-ID: <3338230.1156402226956.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:50:26 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12430160 ] 
            
Devaraj Das commented on HADOOP-312:
------------------------------------

>Threads should be cheap to create, but keeping too many 
>around can be expensive. Again, I think the life of the thread 
>should be the same as the life of the connection.

There are not many threads in the system. It is one per server (in the current version of hadoop, it is a single digit number, maybe, 2 or 3). If connection life is 1 sec and if the thread's life is same as the life of the connection, then a thread is destroyed/created ~once/second per server. I really wanted to avoid creating/destroying threads that often.

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 06:55:47 2006
Return-Path: 
 <hadoop-dev-return-3296-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1984 invoked from network); 24 Aug 2006 06:55:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 06:55:47 -0000
Received: (qmail 21816 invoked by uid 500); 24 Aug 2006 06:54:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21708 invoked by uid 500); 24 Aug 2006 06:54:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21660 invoked by uid 99); 24 Aug 2006 06:54:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:54:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 23:54:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 85949714304
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 06:51:12 +0000 (GMT)
Message-ID: <26839303.1156402272535.JavaMail.jira@brutus>
Date: Wed, 23 Aug 2006 23:51:12 -0700 (PDT)
From: "Vetle Roeim (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-466) Startup scripts will not start
 instances of Hadoop daemons w/different configs w/o setting separate PID
 directories
In-Reply-To: <18080349.1156145293920.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-466?page=comments#action_12430174 ] 
            
Vetle Roeim commented on HADOOP-466:
------------------------------------

How does _not_ having HADOOP_IDENT_STRING prevent running multiple instances on the same conf dir as different users? The configuration contains port numbers, and the Hadoop daemons won't start if there are already daemons bound to those ports.

In any case, running with separate config directories has been greatly simplified with the introduction of the --config command line parameter.

> Startup scripts will not start instances of Hadoop daemons w/different configs w/o setting separate PID directories
> -------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-466
>                 URL: http://issues.apache.org/jira/browse/HADOOP-466
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Vetle Roeim
>             Fix For: 0.6.0
>
>         Attachments: hadoop-466.diff
>
>
> Configuration directories can be specified by either setting HADOOP_CONF_DIR or using the --config command line option. However, the hadoop-daemon.sh script will not start the daemons unless the PID directory is separate for each configuration.
> The issue is that the code for generating PID filenames is not dependent on the configuration directory. While the PID directory can be changed in hadoop-env.sh, it seems a little unnecessary to have this restriction.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 16:42:18 2006
Return-Path: 
 <hadoop-dev-return-3297-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52835 invoked from network); 24 Aug 2006 16:42:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 16:42:18 -0000
Received: (qmail 26790 invoked by uid 500); 24 Aug 2006 16:42:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26772 invoked by uid 500); 24 Aug 2006 16:42:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26763 invoked by uid 99); 24 Aug 2006 16:42:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 09:42:17 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 09:42:14 -0700
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k7OGfjk0049820
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 09:41:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=dX+ZiTW3+eplC6/MOnRWNENCeUusuUa48c0psHVokZIROVOTtaQ8KZ1A2JZR0Rjr
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <14258666.1156402145548.JavaMail.jira@brutus>
References: <14258666.1156402145548.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <de0c578ab404e28c421361598c56f3a4@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
Date: Thu, 24 Aug 2006 09:41:44 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

+1 for Owen's arguments.

Although at the code level, anything that is done to the input record  
can be put either into an InputFormat or into a Mapper, it seems to be  
quite important to force a clear separation these concepts.
A more naive user may prefer to be completely ignorant about the notion  
of InputFormat.

Defining interfaces that a easy to understand is more than just  
syntactic sugar, and usability should not be sacrificed to  
orthogonality.


On Aug 23, 2006, at 11:49 PM, Doug Cutting (JIRA) wrote:

>     [  
> http://issues.apache.org/jira/browse/HADOOP-372? 
> page=comments#action_12430107 ]
>
> Doug Cutting commented on HADOOP-372:
> -------------------------------------
>
>> A very typical case is to have the same input format, but different  
>> Mappers
>
> But, if the mapper is a function of the input format this can instead  
> be:
>
> job.addInputPath("foo", FooInput.class);
> job.addInputPath("bar", BarInput.class);
>
> Where FooInput is defined with something like:
>
> public class FooInput extends TextInput {
>   public void map(...) { ... };
> }
>
> In other words, if you're going to define custom mappers anyway, then  
> it's no more work to define custom Input formats.
>
>> should allow to specify different inputformat classes for different  
>> input dirs for Map/Reduce jobs
>> ---------------------------------------------------------------------- 
>> ----------------------------
>>
>>                 Key: HADOOP-372
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>>             Project: Hadoop
>>          Issue Type: New Feature
>>          Components: mapred
>>    Affects Versions: 0.4.0
>>         Environment: all
>>            Reporter: Runping Qi
>>         Assigned To: Owen O'Malley
>>
>> Right now, the user can specify multiple input directories for a map  
>> reduce job.
>> However, the files under all the directories are assumed to be in the  
>> same format,
>> with the same key/value classes. This proves to be  a serious limit  
>> in many situations.
>> Here is an example. Suppose I have three simple tables:
>> one has URLs and their rank values (page ranks),
>> another has URLs and their classification values,
>> and the third one has the URL meta data such as crawl status, last  
>> crawl time, etc.
>> Suppose now I need a job to generate a list of URLs to be crawled  
>> next.
>> The decision depends on the info in all the three tables.
>> Right now, there is no easy way to accomplish this.
>> However, this job can be done if the framework allows to specify  
>> different inputformats for different input dirs.
>> Suppose my three tables are in the following directory respectively:  
>> rankTable, classificationTable. and metaDataTable.
>> If we extend JobConf class with the following method (as Owen  
>> suggested to me):
>>     addInputPath(aPath, anInputFormatClass, anInputKeyClass,  
>> anInputValueClass)
>> Then I can specify my job as follows:
>>     addInputPath(rankTable, SequenceFileInputFormat.class,  
>> UTF8.class, DoubleWritable.class)
>>     addInputPath(classificationTable, TextInputFormat.class,  
>> UTF8,class, UTF8.class)
>>     addInputPath(metaDataTable, SequenceFileInputFormat.class,  
>> UTF8.class, MyRecord.class)
>> If an input directory is added through the current API, it will have  
>> the same meaning as it is now.
>> Thus this extension will not affect any applications that do not need  
>> this new feature.
>> It is relatively easy for the M/R framework to create an appropriate  
>> record reader for a map task based on the above information.
>> And that is the only change needed for supporting this extension.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Thu Aug 24 20:18:18 2006
Return-Path: 
 <hadoop-dev-return-3298-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29690 invoked from network); 24 Aug 2006 20:18:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 20:18:18 -0000
Received: (qmail 76793 invoked by uid 500); 24 Aug 2006 20:18:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76662 invoked by uid 500); 24 Aug 2006 20:18:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76600 invoked by uid 99); 24 Aug 2006 20:18:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:18:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:18:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 57901410023
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 20:15:02 +0000 (GMT)
Message-ID: <8316250.1156450502354.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 13:15:02 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-54?page=all ]

Arun C Murthy updated HADOOP-54:
--------------------------------

    Attachment: SequenceFile20060824.tgz

Here's the latest patch incorporating Owen's quibble about the enum, also I have added a -rwonly option to TestSequenceFile.java and attached results of just read/write tests on seq3 and seq4.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: SequenceFile.20060821.patch, SequenceFile.20060821.perfomance.txt, SequenceFile.20060822.tgz, SequenceFile.updated.final.patch, SequenceFile20060824.tgz, SequenceFiles.final.patch, SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 20:18:33 2006
Return-Path: 
 <hadoop-dev-return-3299-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30477 invoked from network); 24 Aug 2006 20:18:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 20:18:33 -0000
Received: (qmail 79665 invoked by uid 500); 24 Aug 2006 20:18:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79628 invoked by uid 500); 24 Aug 2006 20:18:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79616 invoked by uid 99); 24 Aug 2006 20:18:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:18:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:18:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 79BC5410030
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 20:15:12 +0000 (GMT)
Message-ID: <23226035.1156450512496.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 13:15:12 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-263) task status should include timestamps
 for when a job transitions
In-Reply-To: <6879018.1149102869840.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-263?page=all ]

Sanjay Dahiya updated HADOOP-263:
---------------------------------

    Attachment: Hadoop-263.patch

Thanks for the comments, Owen 

Here is an updated patch. 

> task status should include timestamps for when a job transitions
> ----------------------------------------------------------------
>
>                 Key: HADOOP-263
>                 URL: http://issues.apache.org/jira/browse/HADOOP-263
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: Hadoop-263.patch, patch.txt, patch.txt, patch.txt, patch.txt
>
>
> It would help users to understand what happened if the task status included information about when the task transitioned:
> Map:
>    started
>    finished
> Reduce:
>    started
>    shuffle finished
>    sort finished
>    finished

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 20:18:45 2006
Return-Path: 
 <hadoop-dev-return-3300-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31035 invoked from network); 24 Aug 2006 20:18:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 20:18:45 -0000
Received: (qmail 81014 invoked by uid 500); 24 Aug 2006 20:18:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80993 invoked by uid 500); 24 Aug 2006 20:18:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80956 invoked by uid 99); 24 Aug 2006 20:18:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:18:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:18:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 64598410028
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 20:15:28 +0000 (GMT)
Message-ID: <15490791.1156450528408.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 13:15:28 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-460) Small jobs benchmark fails with
 current Hadoop due to UTF8 -> Text ClassCastException
In-Reply-To: <28838293.1155904093901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-460?page=all ]

Sanjay Dahiya updated HADOOP-460:
---------------------------------

    Attachment: Hadoop-460.patch

Here is a patch for the ClasCast issue with latest trunk. 

> Small jobs benchmark fails with current Hadoop due to UTF8 -> Text ClassCastException
> -------------------------------------------------------------------------------------
>
>                 Key: HADOOP-460
>                 URL: http://issues.apache.org/jira/browse/HADOOP-460
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Sanjay Dahiya
>         Attachments: Hadoop-460.patch
>
>
> Small jobs benchmark uses UTF8 as Map input keys, it fails with ClassCastException ( UTF8 / Text ) with the latest trunk. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 20:18:50 2006
Return-Path: 
 <hadoop-dev-return-3301-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31430 invoked from network); 24 Aug 2006 20:18:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 20:18:50 -0000
Received: (qmail 82226 invoked by uid 500); 24 Aug 2006 20:18:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82196 invoked by uid 500); 24 Aug 2006 20:18:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82170 invoked by uid 99); 24 Aug 2006 20:18:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:18:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:18:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6AEAA410026
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 20:15:29 +0000 (GMT)
Message-ID: <16419179.1156450529435.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 13:15:29 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-460) Small jobs benchmark fails with
 current Hadoop due to UTF8 -> Text ClassCastException
In-Reply-To: <28838293.1155904093901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-460?page=all ]

Sanjay Dahiya updated HADOOP-460:
---------------------------------

    Status: Patch Available  (was: Open)

> Small jobs benchmark fails with current Hadoop due to UTF8 -> Text ClassCastException
> -------------------------------------------------------------------------------------
>
>                 Key: HADOOP-460
>                 URL: http://issues.apache.org/jira/browse/HADOOP-460
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Sanjay Dahiya
>         Attachments: Hadoop-460.patch
>
>
> Small jobs benchmark uses UTF8 as Map input keys, it fails with ClassCastException ( UTF8 / Text ) with the latest trunk. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 20:19:56 2006
Return-Path: 
 <hadoop-dev-return-3302-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34631 invoked from network); 24 Aug 2006 20:19:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 20:19:56 -0000
Received: (qmail 90728 invoked by uid 500); 24 Aug 2006 20:19:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90663 invoked by uid 500); 24 Aug 2006 20:19:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90421 invoked by uid 99); 24 Aug 2006 20:19:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:19:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:19:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EBF6941003C
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 20:16:00 +0000 (GMT)
Message-ID: <27922517.1156450560964.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 13:16:00 -0700 (PDT)
From: "Doug Cook (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-406) Tasks launched by tasktracker in
 separate JVM can't generate log output
In-Reply-To: <3656443.1154449453917.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-406?page=comments#action_12430233 ] 
            
Doug Cook commented on HADOOP-406:
----------------------------------

This issue bit me as well, and it took me some time to unravel the mystery. It would be nice to fix it in the main distribution!

I'm agnostic about what the long-term "right" solution is, but Chris's patch certainly works for me. (Thanks, Chris!)

Doug

> Tasks launched by tasktracker in separate JVM can't generate log output
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-406
>                 URL: http://issues.apache.org/jira/browse/HADOOP-406
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Chris Schneider
>         Attachments: HADOOP-406.patch
>
>
> Child JVM's don't have access to logging config system properties. When the child JVM gets launched, it doesn't inherit the Java system properties hadoop.log.dir and hadoop.log.file (which are actually based on the Bash environment variables $HADOOP_LOG_DIR and $HADOOP_LOGFILE). This means that you get no log messages from the actual map/reduce tasks that are executing.
> Stefan Groschupf reported this problem a while back:
> -------------------------------------------------------------------------
> To: hadoop-dev@lucene.apache.org
> From: Stefan Groschupf <sg@media-style.com>
> Subject: tasks can't log bug?
> Date: Tue, 25 Jul 2006 19:26:17 -0700
> X-Virus-Checked: Checked by ClamAV on apache.org
> Hi Hadoop developers,
> I'm confused about the way logging works within map or reduce tasks.
> Since tasks are launched in a new JVM  the java system properties "hadoop.log.dir" and "hadoop.log.file" are not passed to the new JVM.
> This prevents the child process from logging properly. In fact you get:
>  java.io.FileNotFoundException: / (Is a directory)
>   at java.io.FileOutputStream.openAppend(Native Method)
>   at java.io.FileOutputStream.<init>(FileOutputStream.java:177)
>   at java.io.FileOutputStream.<init>(FileOutputStream.java:102)
>   at org.apache.log4j.FileAppender.setFile(FileAppender.java:289)
>   at org.apache.log4j.RollingFileAppender.setFile(RollingFileAppender.java:165)
>   at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:163)
>   at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:256)
>   at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:132)
>   at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:96)
>   at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:654)
>   at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:612)
>   at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.j
> 2006-07-25 15:59:07,553 INFO  mapred.TaskTracker (TaskTracker.java:main(993)) - Child
>   at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:415)
>   at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:441)
>   at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:4
>   at org.apache.log4j.LogManager.<clinit>(LogManager.java:122)
>   at org.apache.log4j.Logger.getLogger(Logger.java:104)
>   at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:229)
>   at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:65)
>   at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
>   at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImp
>   at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAcc
>   at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
>   at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529
>   at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235
>   at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)
>   at org.apache.hadoop.mapred.TaskTracker.<clinit>(TaskTracker.java:44)
>   at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:993)
> We see several ways to solve this problem. First retrieve the properties "hadoop.log.dir" and "hadoop.log.file" from the mother JVM and then pass them to the child JVM as within the args parameter.
> Second would be to  access the environment variables "$HADOOP_LOG_DIR" and "$HADOOP_LOGFILE" using System.getEnv (java 1.5).
> Third there would be a more general solution. Taskrunner would resolve any environment variables it found in "mapred.child.java.opts" by lookup the value using System.getEnv().
> Eg:
> unix:
> export MAX_MEMORY = 200
> hadoop-site.xml:
> <name>mapred.child.java.opts</name>
> <value>-Xmx${MAX_MEMORY}</value>

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 20:20:39 2006
Return-Path: 
 <hadoop-dev-return-3304-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36409 invoked from network); 24 Aug 2006 20:20:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 20:20:39 -0000
Received: (qmail 95603 invoked by uid 500); 24 Aug 2006 20:19:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95580 invoked by uid 500); 24 Aug 2006 20:19:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95568 invoked by uid 99); 24 Aug 2006 20:19:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:19:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:19:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BEAA2410010
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 20:16:30 +0000 (GMT)
Message-ID: <25790437.1156450590778.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 13:16:30 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-306?page=comments#action_12430252 ] 
            
Sameer Paranjpye commented on HADOOP-306:
-----------------------------------------

I wonder if it makes sense to wait for 100% of blocks to be available. It's possible  for data to go missing because of failed drives, nodes, racks... When some data goes missing it's usually the case that some other (co-located) data becomes under-replicated and the Namenode ought to start replicating the under replicated data. Why do we want safe mode?

* To prevent replication thrash when the Namenode starts
* To enable administrators to make the file system read only for diagnosis and debugging

Neither of these require that 100% of blocks are present. Maybe we should have a slightly lower threshold for blocks or storage ids.

> Safe mode and name node startup procedures
> ------------------------------------------
>
>                 Key: HADOOP-306
>                 URL: http://issues.apache.org/jira/browse/HADOOP-306
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 20:20:28 2006
Return-Path: 
 <hadoop-dev-return-3303-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35615 invoked from network); 24 Aug 2006 20:20:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 20:20:28 -0000
Received: (qmail 92969 invoked by uid 500); 24 Aug 2006 20:19:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92921 invoked by uid 500); 24 Aug 2006 20:19:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92891 invoked by uid 99); 24 Aug 2006 20:19:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:19:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:19:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CE8B141001D
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 20:16:31 +0000 (GMT)
Message-ID: <7739154.1156450591843.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 13:16:31 -0700 (PDT)
From: "Dennis Kubes (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-473) TextInputFormat does not correctly
 handle all line endings
In-Reply-To: <29195354.1156266433911.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-473?page=all ]

Dennis Kubes updated HADOOP-473:
--------------------------------

    Attachment: text-input-format2.patch

Sorry it took me so long.  I had the patch a couple of days ago I was just in the middle of testing.  Here is an updated patch that removes the read ahead and fixes the same problem of line endings in the getRecordReader method of TextInputFormat.  This has been lightly tested.

> TextInputFormat does not correctly handle all line endings
> ----------------------------------------------------------
>
>                 Key: HADOOP-473
>                 URL: http://issues.apache.org/jira/browse/HADOOP-473
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0, 0.6.0
>         Environment: All environments
>            Reporter: Dennis Kubes
>         Attachments: text-input-format.patch, text-input-format2.patch
>
>
> The current TextInputFormat readLine method calls break on either a single '\r' or '\n' character.  This causes windows formatted text files '\r' '\n' to leave a trailing '\n' character and the next time the readLine method is called on the same input stream it returns a blank string.  The patch attached corrects this issue by looking for either single or double character line endings and positions the input stream to the next line.  It correctly handles windows, mac, and unix line endings.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 20:22:41 2006
Return-Path: 
 <hadoop-dev-return-3305-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41635 invoked from network); 24 Aug 2006 20:22:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 20:22:41 -0000
Received: (qmail 8016 invoked by uid 500); 24 Aug 2006 20:20:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7958 invoked by uid 500); 24 Aug 2006 20:20:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7786 invoked by uid 99); 24 Aug 2006 20:20:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:20:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:20:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2E97B410036
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 20:17:38 +0000 (GMT)
Message-ID: <32463932.1156450658187.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 13:17:38 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-288?page=comments#action_12430288 ] 
            
Mahadev konar commented on HADOOP-288:
--------------------------------------

You are right Doug. The only public api's should be the jobconf methods. I will incorporate your changes and resubmit the patch. Thanks for your comments.

> RFC: Efficient file caching
> ---------------------------
>
>                 Key: HADOOP-288
>                 URL: http://issues.apache.org/jira/browse/HADOOP-288
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: caching.patch, test.jar, test.zip
>
>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 23:42:15 2006
Return-Path: 
 <hadoop-dev-return-3306-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14448 invoked from network); 24 Aug 2006 23:42:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:42:15 -0000
Received: (qmail 14156 invoked by uid 500); 24 Aug 2006 23:42:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14091 invoked by uid 500); 24 Aug 2006 23:42:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13998 invoked by uid 99); 24 Aug 2006 23:42:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 34425714306
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 23:38:53 +0000 (GMT)
Message-ID: <2100966.1156462733211.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 16:38:53 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-288?page=all ]

Mahadev konar updated HADOOP-288:
---------------------------------

    Attachment: caching.patch

Incorporated doug's suggestions in this new patch.

> RFC: Efficient file caching
> ---------------------------
>
>                 Key: HADOOP-288
>                 URL: http://issues.apache.org/jira/browse/HADOOP-288
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: caching.patch, caching.patch, test.jar, test.zip
>
>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 23:42:27 2006
Return-Path: 
 <hadoop-dev-return-3307-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14574 invoked from network); 24 Aug 2006 23:42:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:42:27 -0000
Received: (qmail 15304 invoked by uid 500); 24 Aug 2006 23:42:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15259 invoked by uid 500); 24 Aug 2006 23:42:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15240 invoked by uid 99); 24 Aug 2006 23:42:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:08 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5D3C471430D
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 23:38:59 +0000 (GMT)
Message-ID: <28640755.1156462739379.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 16:38:59 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-475) The value iterator to reduce function
 should be clonable
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The value iterator to reduce function should be clonable
--------------------------------------------------------

                 Key: HADOOP-475
                 URL: http://issues.apache.org/jira/browse/HADOOP-475
             Project: Hadoop
          Issue Type: New Feature
            Reporter: Runping Qi



In the current framework, when the user implements the reduce method of Reducer class, 
the user can only iterate through the value iterator once. 
This makes it hard for the user to perform join-like operations with in the reduce method. 
To address problem, one approach is to make the input value iterator clonable. Then the user can iterate the values in different ways.
If the iterator can be reset, then the user can perform nested iterations over the data, thus 
carry out join-likeoperations.

The user code in reduce method would be something like:

                  iterator1 = values.clone();
                  iterator2 = values.clone();
                 while (iterator1.hasNext()) {
                      val1 = iterator1.next();
                      iterator2.reset();
                      while (iterator2.hasNext()) {
                           val2 = iterator.next();
                           do something vased on val1 and val2
                           .......................
                      }
                 }

One possible optimization is that if the values are sorted based on a secondary key, 
the reset function can take a secondary key as an argument and reset the iterator to the begining
position of the secondary key. It will be very helpful if there is a utility that returns a list of iterators,
one per secondary key value, from the given iterator:

                          TreeMap getIteratorsBasedOnSecondaryKey(iterator);

Each entry in the returned map object is a pair of <secondary key, iterator for the values with the same secondary key>.

  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 23:42:38 2006
Return-Path: 
 <hadoop-dev-return-3308-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15082 invoked from network); 24 Aug 2006 23:42:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:42:38 -0000
Received: (qmail 16965 invoked by uid 500); 24 Aug 2006 23:42:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16945 invoked by uid 500); 24 Aug 2006 23:42:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16902 invoked by uid 99); 24 Aug 2006 23:42:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 90DF67142F9
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 23:39:07 +0000 (GMT)
Message-ID: <14342587.1156462747591.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 16:39:07 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-472) Streaming should not crash
In-Reply-To: <12816750.1156263013893.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-472?page=comments#action_12430336 ] 
            
arkady borkovsky commented on HADOOP-472:
-----------------------------------------

Yoram suggested that this issue is split into several ones.

So let's keep this one for what it's heading says:

"Hadoop Streaming should not crash".

That is, Streaming client (hadoop-streaming.jar) should not complete with a stack trace.  It should catch all exceptions and provide a human readable error message.
Common exceptions caused by common user mistakes should be explained by these messages.  

Rationalization:
When a user tries to execute a Perl script and sees a Java stack trace, she immediately assumes that the tools is broken.  
I have obsereved this ssepcifically trying to get people to use Streaming.

Unlike some other Hadoop components that are supposed to be used Java code, Streaming is a user facing application.  This imposes different requirements on exception handling.

> Streaming should not crash
> --------------------------
>
>                 Key: HADOOP-472
>                 URL: http://issues.apache.org/jira/browse/HADOOP-472
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>
> Streaming framework should not end with a Java stack dump.
> All the abnormal conditions should be checked and reported.
> Specific conditions that need to be exmplicitly checked by the framework are:
> -- does the input exist?
> -- do the top level executables or scripts for -mapper and exist
> Any other Exceptions should also be cought and explained in an error message.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 23:42:40 2006
Return-Path: 
 <hadoop-dev-return-3309-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15253 invoked from network); 24 Aug 2006 23:42:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:42:40 -0000
Received: (qmail 17127 invoked by uid 500); 24 Aug 2006 23:42:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17103 invoked by uid 500); 24 Aug 2006 23:42:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17075 invoked by uid 99); 24 Aug 2006 23:42:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2EF947142D9
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 23:39:10 +0000 (GMT)
Message-ID: <20801208.1156462750189.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 16:39:10 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-476) Streaming should check for correctness
 of the task
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Streaming should check for correctness of the task
--------------------------------------------------

                 Key: HADOOP-476
                 URL: http://issues.apache.org/jira/browse/HADOOP-476
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
            Reporter: arkady borkovsky


Currently, if anythin is wrong with streaming job, it dies without any explanation.

Before creating and running actual MapReduce job, Streaming should check if:

-- the executables (or scripts) for -mapper and -reducer are available and have right permissions
-- the input fragments exist


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 23:43:06 2006
Return-Path: 
 <hadoop-dev-return-3312-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16445 invoked from network); 24 Aug 2006 23:43:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:43:06 -0000
Received: (qmail 19297 invoked by uid 500); 24 Aug 2006 23:42:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19262 invoked by uid 500); 24 Aug 2006 23:42:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19031 invoked by uid 99); 24 Aug 2006 23:42:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 64704714308
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 23:39:13 +0000 (GMT)
Message-ID: <556122.1156462753408.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 16:39:13 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-477) Streaming should execute Unix commands
 and scripts in well known languages without user specifying the path
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Streaming should execute Unix commands and scripts in well known languages without user specifying the path
-----------------------------------------------------------------------------------------------------------

                 Key: HADOOP-477
                 URL: http://issues.apache.org/jira/browse/HADOOP-477
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
            Reporter: arkady borkovsky



If the executables for -mapper or -reducer are well-known (grep, cat, awk), Streaming should make sure that the executable is found.
If a script  for -mapper or -reducer are in a well-known language (.pl, .py), Streaming should  execute it  with the correct language processor.

Reason:
many jobs get started from machines with a different environment from that on the cluster.  
On another hand, different clusters may have different environments.  
Also, a user may have no access to the cluster machines.
Because of this, a user may be unable to specify correct paths for standard commands, and correct language processors for scripts.

Implementation:
Stream may tailr the commands by prepending the path, or the name of language processor.  
Another solution is to make sure that the commands are executed in a "meaningful" environment (with good $PATH, and other variables Unix users are accustomed to count upon).

Once again, Streaming is user facing tool -- it is not a library or a hackable example that the users are to modify for their needs.  So it should work out of the box.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 23:42:59 2006
Return-Path: 
 <hadoop-dev-return-3310-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15782 invoked from network); 24 Aug 2006 23:42:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:42:59 -0000
Received: (qmail 18312 invoked by uid 500); 24 Aug 2006 23:42:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18266 invoked by uid 500); 24 Aug 2006 23:42:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18201 invoked by uid 99); 24 Aug 2006 23:42:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8090371430A
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 23:39:15 +0000 (GMT)
Message-ID: <29549818.1156462755524.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 16:39:15 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-478) Streaming should deliver stderr to the
 user.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Streaming should deliver stderr to the user.
--------------------------------------------

                 Key: HADOOP-478
                 URL: http://issues.apache.org/jira/browse/HADOOP-478
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
            Reporter: arkady borkovsky


Streaming should collect stderr output of -mapper and - reduces steps and put it into the place accessible by the user.
E.g. it can go into
/user/name/stderr/job-id/task-id.txt

This is indpendent from MapReduce framework catching stderr of "normal" Java MapReduce jobs.  
A Java programmer has many ways to handle the problem on her own (at least until the framework matures and provides more help).
Unlike her, a user of Streaming has no access to files.  
Therefore it is an immediate requirement for Streaming to provide its own support for delivering this critical data to the user.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 23:43:05 2006
Return-Path: 
 <hadoop-dev-return-3311-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16226 invoked from network); 24 Aug 2006 23:43:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:43:05 -0000
Received: (qmail 18862 invoked by uid 500); 24 Aug 2006 23:42:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18835 invoked by uid 500); 24 Aug 2006 23:42:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18808 invoked by uid 99); 24 Aug 2006 23:42:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D203F714314
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 23:39:16 +0000 (GMT)
Message-ID: <32972300.1156462756857.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 16:39:16 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-479) Streaming should produce a short
 per-job log in a persistent location.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Streaming should produce a short per-job log in a persistent location.
----------------------------------------------------------------------

                 Key: HADOOP-479
                 URL: http://issues.apache.org/jira/browse/HADOOP-479
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
            Reporter: arkady borkovsky


Streaming should produce a short per-job log in a persistent location.

The log should include (at least, but not limited to):
-- the command line that hadoop-streaming is executing 
-- the list of matching input fragments
-- the actual command lines used by the framework for -mapper and for -reducer
-- log about all copied files
-- the name of the output HDFS directory
-- start and end time of the job
-- location of stderr logs and other output.





-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 23:43:06 2006
Return-Path: 
 <hadoop-dev-return-3313-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16447 invoked from network); 24 Aug 2006 23:43:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:43:06 -0000
Received: (qmail 19320 invoked by uid 500); 24 Aug 2006 23:42:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19271 invoked by uid 500); 24 Aug 2006 23:42:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19091 invoked by uid 99); 24 Aug 2006 23:42:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D8560714306
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 23:39:17 +0000 (GMT)
Message-ID: <8552149.1156462757868.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 16:39:17 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-306?page=comments#action_12430344 ] 
            
Konstantin Shvachko commented on HADOOP-306:
--------------------------------------------

Thanks for the comments. Based on what you say I can define the threshold constraint as:
  **   the percentage of blocks that meet minimal replication requirement (defined by dfs.safemode.replication)
I think this would be flexible enough.
And I'll keep the dfs.datanode.startupMsec that defines the startup period during which replications are not allowed.
So the name node will stay in safe mode at start up until the threshold is reached AND the startup period hasn't expired.

> Safe mode and name node startup procedures
> ------------------------------------------
>
>                 Key: HADOOP-306
>                 URL: http://issues.apache.org/jira/browse/HADOOP-306
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 23:43:15 2006
Return-Path: 
 <hadoop-dev-return-3314-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17407 invoked from network); 24 Aug 2006 23:43:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:43:15 -0000
Received: (qmail 21290 invoked by uid 500); 24 Aug 2006 23:42:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21255 invoked by uid 500); 24 Aug 2006 23:42:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21232 invoked by uid 99); 24 Aug 2006 23:42:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 110A271430F
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 23:39:24 +0000 (GMT)
Message-ID: <20318898.1156462764067.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 16:39:24 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-480) Streaming should support addition
 output ("side-effect")
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Streaming should support addition output ("side-effect")
--------------------------------------------------------

                 Key: HADOOP-480
                 URL: http://issues.apache.org/jira/browse/HADOOP-480
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
            Reporter: arkady borkovsky


 -mapper and/or -reducer may write some files into their working directory.

It should be possible to specify names of such files  to hadoop-streaming command so that once a task is done these files are copied into HDFS to a task-specific location.
E.g.
/user/name/side-output/job-ib/filename.task-id.attempt-id



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 23:43:27 2006
Return-Path: 
 <hadoop-dev-return-3316-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17830 invoked from network); 24 Aug 2006 23:43:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:43:27 -0000
Received: (qmail 22783 invoked by uid 500); 24 Aug 2006 23:42:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22730 invoked by uid 500); 24 Aug 2006 23:42:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22692 invoked by uid 99); 24 Aug 2006 23:42:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 259967142F2
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 23:39:35 +0000 (GMT)
Message-ID: <4146022.1156462775151.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 16:39:35 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-481) Hadoop mapred metrics should include
 per job input/output statistics rather than per-task statistics
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hadoop mapred metrics should include per job input/output statistics rather than per-task statistics
----------------------------------------------------------------------------------------------------

                 Key: HADOOP-481
                 URL: http://issues.apache.org/jira/browse/HADOOP-481
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred, metrics
    Affects Versions: 0.6.0
            Reporter: Milind Bhandarkar
         Assigned To: Milind Bhandarkar
            Priority: Minor
             Fix For: 0.6.0


Currently hadoop reports metrics such as input bytes, input records, etc on per-task basis. Accurate aggregation of these metrics is required at the job-level and reporting should be done on a per-job basis.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 23:43:21 2006
Return-Path: 
 <hadoop-dev-return-3315-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17724 invoked from network); 24 Aug 2006 23:43:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:43:21 -0000
Received: (qmail 22425 invoked by uid 500); 24 Aug 2006 23:42:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22382 invoked by uid 500); 24 Aug 2006 23:42:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22326 invoked by uid 99); 24 Aug 2006 23:42:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2B6D77142F1
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 23:39:36 +0000 (GMT)
Message-ID: <4757274.1156462776175.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 16:39:36 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-481) Hadoop mapred metrics should include
 per job input/output statistics rather than per-task statistics
In-Reply-To: <4146022.1156462775151.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-481?page=all ]

Milind Bhandarkar updated HADOOP-481:
-------------------------------------

    Attachment: reports.patch

Patch attached. It changes the TaskUmbilicalProtocol (progress method has additional parameter) and InterTrackerProtocol( TaskTrackerStatus has an added field), therefore their versions have been bumped up.

> Hadoop mapred metrics should include per job input/output statistics rather than per-task statistics
> ----------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-481
>                 URL: http://issues.apache.org/jira/browse/HADOOP-481
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred, metrics
>    Affects Versions: 0.6.0
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> Currently hadoop reports metrics such as input bytes, input records, etc on per-task basis. Accurate aggregation of these metrics is required at the job-level and reporting should be done on a per-job basis.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 23:43:30 2006
Return-Path: 
 <hadoop-dev-return-3318-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18201 invoked from network); 24 Aug 2006 23:43:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:43:30 -0000
Received: (qmail 23361 invoked by uid 500); 24 Aug 2006 23:42:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23329 invoked by uid 500); 24 Aug 2006 23:42:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23114 invoked by uid 99); 24 Aug 2006 23:42:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 30F517142FC
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 23:39:37 +0000 (GMT)
Message-ID: <22964098.1156462777198.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 16:39:37 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-481) Hadoop mapred metrics should include
 per job input/output statistics rather than per-task statistics
In-Reply-To: <4146022.1156462775151.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-481?page=all ]

Milind Bhandarkar updated HADOOP-481:
-------------------------------------

    Attachment:     (was: reports.patch)

> Hadoop mapred metrics should include per job input/output statistics rather than per-task statistics
> ----------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-481
>                 URL: http://issues.apache.org/jira/browse/HADOOP-481
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred, metrics
>    Affects Versions: 0.6.0
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> Currently hadoop reports metrics such as input bytes, input records, etc on per-task basis. Accurate aggregation of these metrics is required at the job-level and reporting should be done on a per-job basis.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 24 23:43:27 2006
Return-Path: 
 <hadoop-dev-return-3317-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17835 invoked from network); 24 Aug 2006 23:43:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:43:27 -0000
Received: (qmail 22816 invoked by uid 500); 24 Aug 2006 23:42:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22769 invoked by uid 500); 24 Aug 2006 23:42:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22696 invoked by uid 99); 24 Aug 2006 23:42:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:42:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 36E387142F5
	for <hadoop-dev@lucene.apache.org>; Thu, 24 Aug 2006 23:39:38 +0000 (GMT)
Message-ID: <23055060.1156462778222.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 16:39:38 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-481) Hadoop mapred metrics should include
 per job input/output statistics rather than per-task statistics
In-Reply-To: <4146022.1156462775151.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-481?page=all ]

Milind Bhandarkar updated HADOOP-481:
-------------------------------------

    Status: Patch Available  (was: Open)

Patch attached. It changes the TaskUmbilicalProtocol (progress method has additional parameter) and InterTrackerProtocol( TaskTrackerStatus has an added field), therefore their versions have been bumped up.

> Hadoop mapred metrics should include per job input/output statistics rather than per-task statistics
> ----------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-481
>                 URL: http://issues.apache.org/jira/browse/HADOOP-481
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred, metrics
>    Affects Versions: 0.6.0
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>
> Currently hadoop reports metrics such as input bytes, input records, etc on per-task basis. Accurate aggregation of these metrics is required at the job-level and reporting should be done on a per-job basis.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 00:13:10 2006
Return-Path: 
 <hadoop-dev-return-3319-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28161 invoked from network); 25 Aug 2006 00:13:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 00:13:10 -0000
Received: (qmail 70778 invoked by uid 500); 25 Aug 2006 00:13:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70671 invoked by uid 500); 25 Aug 2006 00:13:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70633 invoked by uid 99); 25 Aug 2006 00:13:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 17:13:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 17:13:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6B6097142F5
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 00:09:53 +0000 (GMT)
Message-ID: <25489140.1156464593437.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 17:09:53 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-481) Hadoop mapred metrics should include
 per job input/output statistics rather than per-task statistics
In-Reply-To: <4146022.1156462775151.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-481?page=all ]

Milind Bhandarkar updated HADOOP-481:
-------------------------------------

    Status: In Progress  (was: Patch Available)

> Hadoop mapred metrics should include per job input/output statistics rather than per-task statistics
> ----------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-481
>                 URL: http://issues.apache.org/jira/browse/HADOOP-481
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred, metrics
>    Affects Versions: 0.6.0
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: reports.patch
>
>
> Currently hadoop reports metrics such as input bytes, input records, etc on per-task basis. Accurate aggregation of these metrics is required at the job-level and reporting should be done on a per-job basis.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 00:13:14 2006
Return-Path: 
 <hadoop-dev-return-3320-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28647 invoked from network); 25 Aug 2006 00:13:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 00:13:14 -0000
Received: (qmail 71410 invoked by uid 500); 25 Aug 2006 00:13:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71379 invoked by uid 500); 25 Aug 2006 00:13:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71344 invoked by uid 99); 25 Aug 2006 00:13:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 17:13:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 17:13:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 180087142F2
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 00:09:57 +0000 (GMT)
Message-ID: <29302595.1156464597076.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 17:09:57 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-481) Hadoop mapred metrics should include
 per job input/output statistics rather than per-task statistics
In-Reply-To: <4146022.1156462775151.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-481?page=all ]

Milind Bhandarkar updated HADOOP-481:
-------------------------------------

    Attachment: reports.patch

> Hadoop mapred metrics should include per job input/output statistics rather than per-task statistics
> ----------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-481
>                 URL: http://issues.apache.org/jira/browse/HADOOP-481
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred, metrics
>    Affects Versions: 0.6.0
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: reports.patch
>
>
> Currently hadoop reports metrics such as input bytes, input records, etc on per-task basis. Accurate aggregation of these metrics is required at the job-level and reporting should be done on a per-job basis.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 03:10:33 2006
Return-Path: 
 <hadoop-dev-return-3321-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67538 invoked from network); 25 Aug 2006 03:10:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 03:10:33 -0000
Received: (qmail 24904 invoked by uid 500); 25 Aug 2006 03:10:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24637 invoked by uid 500); 25 Aug 2006 03:10:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24315 invoked by uid 99); 25 Aug 2006 03:10:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 20:10:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 20:10:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 089B3410020
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 03:07:08 +0000 (GMT)
Message-ID: <15387551.1156475228032.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 20:07:08 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-482) unit test hangs when a cluster is
 running on the same machine
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

unit test hangs when a cluster is running on the same machine
-------------------------------------------------------------

                 Key: HADOOP-482
                 URL: http://issues.apache.org/jira/browse/HADOOP-482
             Project: Hadoop
          Issue Type: Bug
            Reporter: Wendy Chien
            Priority: Minor


Instead of hanging, it should report an error.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 06:21:23 2006
Return-Path: 
 <hadoop-dev-return-3322-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20286 invoked from network); 25 Aug 2006 06:21:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 06:21:23 -0000
Received: (qmail 66652 invoked by uid 500); 25 Aug 2006 06:21:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66610 invoked by uid 500); 25 Aug 2006 06:21:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66593 invoked by uid 99); 25 Aug 2006 06:21:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 23:21:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 23:21:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2135C714219
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 06:18:10 +0000 (GMT)
Message-ID: <20264654.1156486690133.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 23:18:10 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Document libhdfs and fix some OS specific stuff in Makefile
-----------------------------------------------------------

                 Key: HADOOP-483
                 URL: http://issues.apache.org/jira/browse/HADOOP-483
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
            Reporter: Arun C Murthy
         Assigned To: Arun C Murthy


Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 06:21:25 2006
Return-Path: 
 <hadoop-dev-return-3323-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20338 invoked from network); 25 Aug 2006 06:21:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 06:21:25 -0000
Received: (qmail 66953 invoked by uid 500); 25 Aug 2006 06:21:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66934 invoked by uid 500); 25 Aug 2006 06:21:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66906 invoked by uid 99); 25 Aug 2006 06:21:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 23:21:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 23:21:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2E77071428E
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 06:18:11 +0000 (GMT)
Message-ID: <31952067.1156486691187.JavaMail.jira@brutus>
Date: Thu, 24 Aug 2006 23:18:11 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Work on HADOOP-483 started by Arun C Murthy.

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 08:51:34 2006
Return-Path: 
 <hadoop-dev-return-3324-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78330 invoked from network); 25 Aug 2006 08:51:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 08:51:34 -0000
Received: (qmail 77301 invoked by uid 500); 25 Aug 2006 08:51:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77277 invoked by uid 500); 25 Aug 2006 08:51:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77266 invoked by uid 99); 25 Aug 2006 08:51:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 01:51:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 01:51:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 520707141E3
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 08:48:23 +0000 (GMT)
Message-ID: <4054278.1156495703333.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 01:48:23 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Arun C Murthy updated HADOOP-483:
---------------------------------

    Attachment: libhdfs.patch

Here's a patch with necessary changes to hdfs.h and a Doxyfile for documention - I haven't attached the actual documentation produced; if need be I can do that too and submit a new patch.

Also I have fixed some path issues for common utils (chmod, rm etc.) in the Makefile and in DFSCIOTest.java. I have also added a 'docs' target in the Makefile to generate the Doxygen documentation.

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: libhdfs.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 08:51:39 2006
Return-Path: 
 <hadoop-dev-return-3325-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78380 invoked from network); 25 Aug 2006 08:51:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 08:51:39 -0000
Received: (qmail 77505 invoked by uid 500); 25 Aug 2006 08:51:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77482 invoked by uid 500); 25 Aug 2006 08:51:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77473 invoked by uid 99); 25 Aug 2006 08:51:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 01:51:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 01:51:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5E49B7141E4
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 08:48:24 +0000 (GMT)
Message-ID: <30282823.1156495704383.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 01:48:24 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Arun C Murthy updated HADOOP-483:
---------------------------------

    Status: Patch Available  (was: In Progress)

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: libhdfs.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 08:53:35 2006
Return-Path: 
 <hadoop-dev-return-3326-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78992 invoked from network); 25 Aug 2006 08:53:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 08:53:35 -0000
Received: (qmail 79821 invoked by uid 500); 25 Aug 2006 08:53:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79801 invoked by uid 500); 25 Aug 2006 08:53:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79792 invoked by uid 99); 25 Aug 2006 08:53:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 01:53:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 01:53:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B7F997141E8
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 08:50:24 +0000 (GMT)
Message-ID: <17228181.1156495824751.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 01:50:24 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-483?page=comments#action_12430449 ] 
            
Arun C Murthy commented on HADOOP-483:
--------------------------------------

I have also written up a wiki page on libhdfs: http://wiki.apache.org/lucene-hadoop/LibHDFS - appreciate any feedback. 

Once the Doxygen generated docs are available online (after the patch is committed) I'll go ahead fix links in the wiki for all the apis.

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: libhdfs.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 15:51:37 2006
Return-Path: 
 <hadoop-dev-return-3327-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56575 invoked from network); 25 Aug 2006 15:51:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 15:51:37 -0000
Received: (qmail 78255 invoked by uid 500); 25 Aug 2006 15:51:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78238 invoked by uid 500); 25 Aug 2006 15:51:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78228 invoked by uid 99); 25 Aug 2006 15:51:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 08:51:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 08:51:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 949CC714293
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 15:48:25 +0000 (GMT)
Message-ID: <2222575.1156520905605.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 08:48:25 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-419) libdfs doesn't work with application
 threads
In-Reply-To: <7601484.1154547193903.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-419?page=all ]

Owen O'Malley reassigned HADOOP-419:
------------------------------------

    Assignee: Owen O'Malley  (was: Milind Bhandarkar)

> libdfs doesn't work with application threads
> --------------------------------------------
>
>                 Key: HADOOP-419
>                 URL: http://issues.apache.org/jira/browse/HADOOP-419
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>
> Using libdfs from C++ using threads I get a null pointer for the ThreadClassLoader, which throws an exception.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 15:51:38 2006
Return-Path: 
 <hadoop-dev-return-3328-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56622 invoked from network); 25 Aug 2006 15:51:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 15:51:38 -0000
Received: (qmail 78458 invoked by uid 500); 25 Aug 2006 15:51:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78439 invoked by uid 500); 25 Aug 2006 15:51:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78430 invoked by uid 99); 25 Aug 2006 15:51:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 08:51:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 08:51:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3F7487142C7
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 15:48:27 +0000 (GMT)
Message-ID: <32470560.1156520907257.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 08:48:27 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-419) libdfs doesn't work with
 application threads
In-Reply-To: <7601484.1154547193903.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-419?page=all ]

Work on HADOOP-419 started by Owen O'Malley.

> libdfs doesn't work with application threads
> --------------------------------------------
>
>                 Key: HADOOP-419
>                 URL: http://issues.apache.org/jira/browse/HADOOP-419
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>
> Using libdfs from C++ using threads I get a null pointer for the ThreadClassLoader, which throws an exception.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 18:08:41 2006
Return-Path: 
 <hadoop-dev-return-3329-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13743 invoked from network); 25 Aug 2006 18:08:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 18:08:41 -0000
Received: (qmail 81435 invoked by uid 500); 25 Aug 2006 18:08:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81351 invoked by uid 500); 25 Aug 2006 18:08:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81297 invoked by uid 99); 25 Aug 2006 18:08:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 11:08:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 11:08:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7496A7141F0
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 18:05:27 +0000 (GMT)
Message-ID: <10966074.1156529127474.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 11:05:27 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-419) libdfs doesn't work with application
 threads
In-Reply-To: <7601484.1154547193903.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-419?page=all ]

Owen O'Malley updated HADOOP-419:
---------------------------------

    Attachment: classloader.patch

This patch, pulls the classloader stuff out of JobConf and puts it into ReflectionUtils. It also fixes this bug by using the default class loader if there isn't a thread specific class loader.

> libdfs doesn't work with application threads
> --------------------------------------------
>
>                 Key: HADOOP-419
>                 URL: http://issues.apache.org/jira/browse/HADOOP-419
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: classloader.patch
>
>
> Using libdfs from C++ using threads I get a null pointer for the ThreadClassLoader, which throws an exception.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 18:08:42 2006
Return-Path: 
 <hadoop-dev-return-3330-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13790 invoked from network); 25 Aug 2006 18:08:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 18:08:42 -0000
Received: (qmail 81649 invoked by uid 500); 25 Aug 2006 18:08:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81623 invoked by uid 500); 25 Aug 2006 18:08:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81586 invoked by uid 99); 25 Aug 2006 18:08:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 11:08:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 11:08:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2FAF27142A1
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 18:05:29 +0000 (GMT)
Message-ID: <27848366.1156529129193.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 11:05:29 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-419) libdfs doesn't work with application
 threads
In-Reply-To: <7601484.1154547193903.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-419?page=all ]

Owen O'Malley updated HADOOP-419:
---------------------------------

    Status: Patch Available  (was: In Progress)

> libdfs doesn't work with application threads
> --------------------------------------------
>
>                 Key: HADOOP-419
>                 URL: http://issues.apache.org/jira/browse/HADOOP-419
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: classloader.patch
>
>
> Using libdfs from C++ using threads I get a null pointer for the ThreadClassLoader, which throws an exception.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 18:18:35 2006
Return-Path: 
 <hadoop-dev-return-3331-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17785 invoked from network); 25 Aug 2006 18:18:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 18:18:35 -0000
Received: (qmail 95482 invoked by uid 500); 25 Aug 2006 18:18:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95451 invoked by uid 500); 25 Aug 2006 18:18:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95442 invoked by uid 99); 25 Aug 2006 18:18:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 11:18:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 11:18:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 83113714204
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 18:15:23 +0000 (GMT)
Message-ID: <17115548.1156529723532.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 11:15:23 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12430568 ] 
            
Sameer Paranjpye commented on HADOOP-312:
-----------------------------------------

> There are not many threads in the system.

Perhaps, but thread creation is quite cheap. I see two reasons for not keeping threads around.

a) The code will be simpler if all objects associated with a server (connection and thread in this case) are created/destroyed together. 
b) The point of not caching connections is to avoid lingering unused resources, that applies to threads as much as it does to connections. If there is a use case where connections are created/destroyed once/second/server then the appropriate course to avoid this thrash would be to enable connection caching, no?

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 18:39:40 2006
Return-Path: 
 <hadoop-dev-return-3332-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27077 invoked from network); 25 Aug 2006 18:39:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 18:39:40 -0000
Received: (qmail 50576 invoked by uid 500); 25 Aug 2006 18:39:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50554 invoked by uid 500); 25 Aug 2006 18:39:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50545 invoked by uid 99); 25 Aug 2006 18:39:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 11:39:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 11:39:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2FA0071428E
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 18:36:25 +0000 (GMT)
Message-ID: <7149841.1156530985191.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 11:36:25 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-466) Startup scripts will not start
 instances of Hadoop daemons w/different configs w/o setting separate PID
 directories
In-Reply-To: <18080349.1156145293920.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-466?page=comments#action_12430576 ] 
            
Yoram Arnon commented on HADOOP-466:
------------------------------------

if HADOOP_IDENT_STRING isn't specified explicitly, it defaults to $USER.
pid files  that incorporate HADOOP_IDENT_STRING will then have different names when invoked by different users, negating their effect as uniquely identifying a process using that conf dir.
slaves bind to the configured port, but if that fails they scan forward up to 10 ports to find a port to bind, so they'll start just fine, connect the the same master and presto, we have two slaves on the same machine running as different users.

I always use the --config parameter, so yes, I'm not overly concerned, but I've seen this happen.

It's not a big deal, but as long as you're going to the trouble of hashing the conf dir into the file names, I thought it might be another improvement.

> Startup scripts will not start instances of Hadoop daemons w/different configs w/o setting separate PID directories
> -------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-466
>                 URL: http://issues.apache.org/jira/browse/HADOOP-466
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Vetle Roeim
>             Fix For: 0.6.0
>
>         Attachments: hadoop-466.diff
>
>
> Configuration directories can be specified by either setting HADOOP_CONF_DIR or using the --config command line option. However, the hadoop-daemon.sh script will not start the daemons unless the PID directory is separate for each configuration.
> The issue is that the code for generating PID filenames is not dependent on the configuration directory. While the PID directory can be changed in hadoop-env.sh, it seems a little unnecessary to have this restriction.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 18:54:38 2006
Return-Path: 
 <hadoop-dev-return-3333-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34552 invoked from network); 25 Aug 2006 18:54:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 18:54:38 -0000
Received: (qmail 84847 invoked by uid 500); 25 Aug 2006 18:54:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84817 invoked by uid 500); 25 Aug 2006 18:54:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84785 invoked by uid 99); 25 Aug 2006 18:54:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 11:54:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 11:54:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D24F7410011
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 18:51:24 +0000 (GMT)
Message-ID: <1805781.1156531884858.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 11:51:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-441?page=comments#action_12430581 ] 
            
Doug Cutting commented on HADOOP-441:
-------------------------------------

Another option is to live without 'reset':

public interface CompressionCodec extends Configurable {
  DataOutputStream getDeflater(OutputStream out);
  DataInputStream getInflater(InputStream in);
  String getDefaultExtension(); 
} 

A new output stream can be created for each compressed block.  With block compression, this should not be so frequent that performance is significantly affected.  If compressor setup time is significant, then codec could pool compressors as an optimization.  When a stream is closed then the compressor can be reset and returned to a pool for re-use.  Simpler yet, the codec could save the last stream closed, and, if a new call has the same parameters, reset and return the entire stream.  This way there would be no new object allocation per block.


> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 19:06:35 2006
Return-Path: 
 <hadoop-dev-return-3334-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43984 invoked from network); 25 Aug 2006 19:06:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 19:06:35 -0000
Received: (qmail 12269 invoked by uid 500); 25 Aug 2006 19:06:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12252 invoked by uid 500); 25 Aug 2006 19:06:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12242 invoked by uid 99); 25 Aug 2006 19:06:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 12:06:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 12:06:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 519C57141F0
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 19:03:23 +0000 (GMT)
Message-ID: <3836567.1156532603330.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 12:03:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-474) support compressed text files as
 input and output
In-Reply-To: <19704285.1156402132980.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-474?page=comments#action_12430590 ] 
            
Doug Cutting commented on HADOOP-474:
-------------------------------------

+1, with a few questions:

Do we need io.compression.codecs if the codecs provide extensions?  If so, then what's the point of having the codec's provide extensions?

Should the output property be instead named mapred.text.output.compression.codec?  In other words, will we use this same property to name the codecs for other output formats, or is this property for text files alone (in which case it should have 'text' in its name)?


> support compressed text files as input and output
> -------------------------------------------------
>
>                 Key: HADOOP-474
>                 URL: http://issues.apache.org/jira/browse/HADOOP-474
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>
> I'd like TextInputFomat and TextOutputFormat to automatically compress and uncompress text files when they are read and written. Furthermore, I'd like to be able to use custom compressors as defined in HADOOP-441. Therefore, I propose:
> Adding a map of compression codecs in the server config files:
> io.compression.codecs = "<suffix>=<codec class>,..."
> so the default would be something like:
> <property>
>   <name>io.compression.codecs</name>
>   <value>.gz=org.apache.hadoop.io.GZipCodec,.Z=org.apache.hadoop.io.ZipCodec</value>
>   <description>A list of file suffixes and the codecs for them.</description>
> </property>
> note that the suffix can include multiple "." so you could support suffixes like ".tar.gz", but they are just treated as literals against the end of the filename.
> If the TextInputFormat is dealing with such a file, it:
>   1. makes a single split
>   2. decompresses automatically
> On the output side, if mapred.output.compress is true, then TextOutputFormat would use a new property mapred.output.compression.codec that would define the codec to use to compress the outputs,  defaulting to gzip. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 19:25:36 2006
Return-Path: 
 <hadoop-dev-return-3335-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58207 invoked from network); 25 Aug 2006 19:25:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 19:25:36 -0000
Received: (qmail 53051 invoked by uid 500); 25 Aug 2006 19:25:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53025 invoked by uid 500); 25 Aug 2006 19:25:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53016 invoked by uid 99); 25 Aug 2006 19:25:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 12:25:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 12:25:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 665EB7141F0
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 19:22:23 +0000 (GMT)
Message-ID: <3144737.1156533743413.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 12:22:23 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-306) Safe mode and name node startup
 procedures
In-Reply-To: <5719318.1150505909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-306?page=comments#action_12430594 ] 
            
Yoram Arnon commented on HADOOP-306:
------------------------------------

the timeout should start *after* the threshold is reached.
If namenode is started long before datanodes, then as soon as the threshold is reached superfluous replications will occur.
the timeout should be short, I'd say less than a minute, and should start as soon as the data/nodes threshold is reached, to allow stragglers to connect and report

> Safe mode and name node startup procedures
> ------------------------------------------
>
>                 Key: HADOOP-306
>                 URL: http://issues.apache.org/jira/browse/HADOOP-306
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.3.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>
> This is a proposal to improve DFS cluster startup process.
> The data node startup procedures were described and implemented in HADOOP-124.
> I'm trying to extend them to the name node here.
> The main idea is to introduce safe mode, which can be entered manually for administration
> purposes, or automatically when a configurable threshold of active data nodes is breached,
> or at startup when the node stays in safe mode until the minimal limit of active
> nodes is reached.
> This are high level requirements intended to improve the name node and cluster reliability.
>     = The name node safe mode means that the name node is not changing the state of the
>        file system. Meta data is read-only, and block replication / removal is not taking place.
>     = In safe mode the name node accepts data node registrations and
>        processes their block reports.
>     = The name node always starts in safe mode and stays safe until the majority
>         (a configurable parameter: safemode.threshold) of data nodes (or blocks?)
>         is reported.
>     = The name node can also fall into safe mode when the number of non-active
>         (heartbeats stopped coming in) data nodes becomes critical.
>     = The startup "silent period", when the name node is in safe mode and is
>         not issuing any block requests to the data nodes, is initially set to a
>         configurable value safemode.timeout.increment. By the end of the timeout
>         the name node checks the safemode.threshold and decides whether to switch
>         to the normal mode or to stay in safe. If the normal mode criteria is not
>         met, then the silent period is extended by incrementing the safemode timeout.
>     = The name node stays in safe mode not longer than a configurable value of
>         safemode.timeout.max, in which case it logs missing data nodes and shuts
>         itself down.
>     = When the name node switches to normal mode it checks whether all required
>         data nodes have actually registered, based on the list of active data storages
>         from the last session. Then it logs missing nodes, if any, and starts
>         replicating and/or deleting blocks as required.
>     = A historical list of data storages (nodes) ever registered with the cluster is
>         persistently stored in the image and log files. The list is used in two ways:
>         a) at startup to verify whether all nodes have registered, and to report
>         missing nodes;
>         b) at runtime if a data node registers with a new storage id the
>         name node verifies that no new blocks are reported from that storage,
>         which would prevent us from accidentally connecting data nodes from a
>         different cluster.
>     = The name node should have an option to run in safe mode. Starting with
>         that option would mean it never leaves safe mode.
>         This is useful for testing the cluster.
>     = Data nodes that can not connect to the name node for a long time (configurable)
>         should shut down themselves.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 19:34:36 2006
Return-Path: 
 <hadoop-dev-return-3336-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64754 invoked from network); 25 Aug 2006 19:34:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 19:34:36 -0000
Received: (qmail 76382 invoked by uid 500); 25 Aug 2006 19:34:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76368 invoked by uid 500); 25 Aug 2006 19:34:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76358 invoked by uid 99); 25 Aug 2006 19:34:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 12:34:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 12:34:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 68B337141F0
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 19:31:23 +0000 (GMT)
Message-ID: <27122250.1156534283426.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 12:31:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-473) TextInputFormat does not correctly
 handle all line endings
In-Reply-To: <29195354.1156266433911.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-473?page=all ]

Doug Cutting resolved HADOOP-473.
---------------------------------

    Fix Version/s: 0.6.0
       Resolution: Fixed

I just committed this.  Thanks James & Dennis!

> TextInputFormat does not correctly handle all line endings
> ----------------------------------------------------------
>
>                 Key: HADOOP-473
>                 URL: http://issues.apache.org/jira/browse/HADOOP-473
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0, 0.6.0
>         Environment: All environments
>            Reporter: Dennis Kubes
>             Fix For: 0.6.0
>
>         Attachments: text-input-format.patch, text-input-format2.patch
>
>
> The current TextInputFormat readLine method calls break on either a single '\r' or '\n' character.  This causes windows formatted text files '\r' '\n' to leave a trailing '\n' character and the next time the readLine method is called on the same input stream it returns a blank string.  The patch attached corrects this issue by looking for either single or double character line endings and positions the input stream to the next line.  It correctly handles windows, mac, and unix line endings.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 20:51:36 2006
Return-Path: 
 <hadoop-dev-return-3337-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97628 invoked from network); 25 Aug 2006 20:51:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 20:51:36 -0000
Received: (qmail 30447 invoked by uid 500); 25 Aug 2006 20:51:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30271 invoked by uid 500); 25 Aug 2006 20:51:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30262 invoked by uid 99); 25 Aug 2006 20:51:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 13:51:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 13:51:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 56AA27141F0
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 20:48:23 +0000 (GMT)
Message-ID: <22615671.1156538903352.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 13:48:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-474) support compressed text files as
 input and output
In-Reply-To: <19704285.1156402132980.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-474?page=comments#action_12430621 ] 
            
Owen O'Malley commented on HADOOP-474:
--------------------------------------

> Do we need io.compression.codecs if the codecs provide extensions? If so, then what's the 
> point of having the codec's provide extensions?

Good point. I shouldn't encode the information twice. We do want the io.compression.codecs so that it is easy to extend the list of potential codecs. I could either make io.compression.codecs a straight list of codec classes or remove the getDefaultExtension method. Thoughts?

> Should the output property be instead named mapred.text.output.compression.codec? 
> In other words, will we use this same property to name the codecs for other output formats, or is 
> this property for text files alone (in which case it should have 'text' in its name)? 

I would think that the SequenceFileOutputFormat (under HADOOP-441) should use the same property. At least that was my thought.

> support compressed text files as input and output
> -------------------------------------------------
>
>                 Key: HADOOP-474
>                 URL: http://issues.apache.org/jira/browse/HADOOP-474
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>
> I'd like TextInputFomat and TextOutputFormat to automatically compress and uncompress text files when they are read and written. Furthermore, I'd like to be able to use custom compressors as defined in HADOOP-441. Therefore, I propose:
> Adding a map of compression codecs in the server config files:
> io.compression.codecs = "<suffix>=<codec class>,..."
> so the default would be something like:
> <property>
>   <name>io.compression.codecs</name>
>   <value>.gz=org.apache.hadoop.io.GZipCodec,.Z=org.apache.hadoop.io.ZipCodec</value>
>   <description>A list of file suffixes and the codecs for them.</description>
> </property>
> note that the suffix can include multiple "." so you could support suffixes like ".tar.gz", but they are just treated as literals against the end of the filename.
> If the TextInputFormat is dealing with such a file, it:
>   1. makes a single split
>   2. decompresses automatically
> On the output side, if mapred.output.compress is true, then TextOutputFormat would use a new property mapred.output.compression.codec that would define the codec to use to compress the outputs,  defaulting to gzip. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 21:34:44 2006
Return-Path: 
 <hadoop-dev-return-3338-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15152 invoked from network); 25 Aug 2006 21:34:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 21:34:44 -0000
Received: (qmail 10129 invoked by uid 500); 25 Aug 2006 21:34:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10112 invoked by uid 500); 25 Aug 2006 21:34:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10096 invoked by uid 99); 25 Aug 2006 21:34:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 14:34:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 14:34:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DAF207142C9
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 21:31:26 +0000 (GMT)
Message-ID: <26696042.1156541486894.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 14:31:26 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-54?page=all ]

Owen O'Malley updated HADOOP-54:
--------------------------------

    Attachment: enum-54.patch

I'm ok with the final patch, but I think that we should just go ahead and use the 1.5 enums. I made the trivial edit to do that and re-rolled the patch.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: enum-54.patch, SequenceFile.20060821.patch, SequenceFile.20060821.perfomance.txt, SequenceFile.20060822.tgz, SequenceFile.updated.final.patch, SequenceFile20060824.tgz, SequenceFiles.final.patch, SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 23:13:17 2006
Return-Path: 
 <hadoop-dev-return-3339-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47039 invoked from network); 25 Aug 2006 23:13:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 23:13:17 -0000
Received: (qmail 64243 invoked by uid 500); 25 Aug 2006 23:13:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64214 invoked by uid 500); 25 Aug 2006 23:13:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64205 invoked by uid 99); 25 Aug 2006 23:13:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 16:13:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.148.227.155] (HELO rwcrmhc15.comcast.net)
 (216.148.227.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 16:13:15 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc15) with ESMTP
          id <20060825231253m1500a5575e>; Fri, 25 Aug 2006 23:12:53 +0000
Message-ID: <44EF8406.3090209@apache.org>
Date: Fri, 25 Aug 2006 16:13:10 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
References: <14258666.1156402145548.JavaMail.jira@brutus>
 <de0c578ab404e28c421361598c56f3a4@yahoo-inc.com>
In-Reply-To: <de0c578ab404e28c421361598c56f3a4@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Arkady Borkovsky wrote:
> Defining interfaces that a easy to understand is more than just 
> syntactic sugar, and usability should not be sacrificed to orthogonality.

A simple, easy-to-use and understand API can be constructed on top of a 
perhaps not quite-so-simple, yet more general API.  The converse is not 
always true.  So I would prefer that the input primitives, the things 
called by the system, are abstact, free of notions like file names, 
directories, positions, offsets, etc., and that such features are 
supported by library/utility code.

The case has been made that it would be good to dynamically determine 
the map function, rather than having a fixed map function for all splits 
of a job.  We already intend to make split abstract (HADOOP-451).  So it 
makes sense to make the mapper a function of the split.  Thus a given 
job's input is determined by methods like the following:

Split[] getSplits(job);
RecordReader getRecordReader(job, split);
Mapper getMapper(job, split, recordReader);

The first two are currently InputFormat methods.  The latter does not 
yet exist.

In the normal case, all mappers are instances of the same class.  When 
they're different, then then the splits will be somehow different (in 
order to indicate which mapper to use), and the record readers may also 
be different.  So whenever one uses a non-default implementation of 
getMapper() it will require coordination with the getSplits() and 
perhaps the getRecordReader() implementations.  Since they must be 
coordinated, it makes sense to combine these methods in a single 
interface, called something like JobInput.

But we don't expect end users to be implementing JobInput.  Rather, they 
might job.setJobInputClass(MultiJobInput.class) and then use a static 
utility method like:

void MultiJobInput.addInput(job, dir, recordReaderClass, mapperClass);

This will set some properties that MultiJobInput's getSplits(), 
getRecordReader() and getMapper() implementations will use.

So we can still have a simple, easy-to-use API, without hardwiring a lot 
of assumptions about input/output formats into the kernel.

Does this make sense?  Does it sound reasonable?

Doug

From MAILER-DAEMON Fri Aug 25 23:20:36 2006
Return-Path: 
 <hadoop-dev-return-3340-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47950 invoked from network); 25 Aug 2006 23:20:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 23:20:36 -0000
Received: (qmail 66921 invoked by uid 500); 25 Aug 2006 23:20:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66899 invoked by uid 500); 25 Aug 2006 23:20:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66889 invoked by uid 99); 25 Aug 2006 23:20:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 16:20:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 16:20:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 06DCE714204
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 23:17:24 +0000 (GMT)
Message-ID: <20883621.1156547844025.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 16:17:24 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-281) dfs.FSDirectory.mkdirs can create
 sub-directories of a file!
In-Reply-To: <19818580.1149635189767.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-281?page=all ]

Wendy Chien updated HADOOP-281:
-------------------------------

    Attachment:     (was: mkdirs.patch)

> dfs.FSDirectory.mkdirs can create sub-directories of a file!
> ------------------------------------------------------------
>
>                 Key: HADOOP-281
>                 URL: http://issues.apache.org/jira/browse/HADOOP-281
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.1
>            Reporter: Sameer Paranjpye
>         Assigned To: Wendy Chien
>             Fix For: 0.6.0
>
>         Attachments: addNode.patch, TestDFSMkdirs.java
>
>
> dfs.FSDirectory.mkdirs will merrily adds children to a directory tree node without checking whether it represents a directory. So it is possible to create a subdirectories of a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 23:20:38 2006
Return-Path: 
 <hadoop-dev-return-3341-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47957 invoked from network); 25 Aug 2006 23:20:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 23:20:38 -0000
Received: (qmail 67121 invoked by uid 500); 25 Aug 2006 23:20:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67095 invoked by uid 500); 25 Aug 2006 23:20:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67086 invoked by uid 99); 25 Aug 2006 23:20:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 16:20:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 16:20:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BF307714219
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 23:17:25 +0000 (GMT)
Message-ID: <2194884.1156547845780.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 16:17:25 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-281) dfs.FSDirectory.mkdirs can create
 sub-directories of a file!
In-Reply-To: <19818580.1149635189767.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-281?page=all ]

Wendy Chien updated HADOOP-281:
-------------------------------

    Status: Patch Available  (was: Open)

> dfs.FSDirectory.mkdirs can create sub-directories of a file!
> ------------------------------------------------------------
>
>                 Key: HADOOP-281
>                 URL: http://issues.apache.org/jira/browse/HADOOP-281
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.1
>            Reporter: Sameer Paranjpye
>         Assigned To: Wendy Chien
>             Fix For: 0.6.0
>
>         Attachments: addNode.patch, TestDFSMkdirs.java
>
>
> dfs.FSDirectory.mkdirs will merrily adds children to a directory tree node without checking whether it represents a directory. So it is possible to create a subdirectories of a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Aug 25 23:37:14 2006
Return-Path: 
 <hadoop-dev-return-3342-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50958 invoked from network); 25 Aug 2006 23:37:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 23:37:14 -0000
Received: (qmail 79002 invoked by uid 500); 25 Aug 2006 23:37:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78978 invoked by uid 500); 25 Aug 2006 23:37:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78969 invoked by uid 99); 25 Aug 2006 23:37:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 16:37:14 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.172] (HELO mrout2.yahoo.com) (216.145.54.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 16:37:12 -0700
Received: from explainfloorlx (explainfloor-lx.corp.yahoo.com
 [207.126.231.230])
	by mrout2.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id k7PNaPc9062006
	for <hadoop-dev@lucene.apache.org>; Fri, 25 Aug 2006 16:36:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
	b=YfX+IJFCAKBNwXfVS08qvuUAa5T2sivJhKYmSgfEpy+fyLFHDrqjEHuadfiZ4iwN
From: "Runping Qi" <runping@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
Date: Fri, 25 Aug 2006 16:36:24 -0700
Message-ID: <003a01c6c89f$47832490$e6e77ecf@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <44EF8406.3090209@apache.org>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcbInBIOGuBZHG3XQEO6KV9ThQnvlwAASBmA
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


This sounds good to me! A couple of questions.

If the user uses the default JobInput implementation, how does the user to
specify the input directory? Currently, it is done through methods of
JobConf. Will that change?

> But we don't expect end users to be implementing JobInput.  Rather, they
> might job.setJobInputClass(MultiJobInput.class) and then use a static
> utility method like:
> 
> void MultiJobInput.addInput(job, dir, recordReaderClass, mapperClass);

But can the end user implement such a class if s/he wants to? In other
words, will the user have only two choices: the default implementation of
JobInput
and MultiJobInput? Or the user can implement his own:
	public class MyMultipleInput implements JobInput {
};


Runping


> -----Original Message-----
> From: Doug Cutting [mailto:cutting@apache.org]
> Sent: Friday, August 25, 2006 4:13 PM
> To: hadoop-dev@lucene.apache.org
> Subject: Re: [jira] Commented: (HADOOP-372) should allow to specify
> different inputformat classes for different input dirs for Map/Reduce jobs
> 
> Arkady Borkovsky wrote:
> > Defining interfaces that a easy to understand is more than just
> > syntactic sugar, and usability should not be sacrificed to
orthogonality.
> 
> A simple, easy-to-use and understand API can be constructed on top of a
> perhaps not quite-so-simple, yet more general API.  The converse is not
> always true.  So I would prefer that the input primitives, the things
> called by the system, are abstact, free of notions like file names,
> directories, positions, offsets, etc., and that such features are
> supported by library/utility code.
> 
> The case has been made that it would be good to dynamically determine
> the map function, rather than having a fixed map function for all splits
> of a job.  We already intend to make split abstract (HADOOP-451).  So it
> makes sense to make the mapper a function of the split.  Thus a given
> job's input is determined by methods like the following:
> 
> Split[] getSplits(job);
> RecordReader getRecordReader(job, split);
> Mapper getMapper(job, split, recordReader);
> 
> The first two are currently InputFormat methods.  The latter does not
> yet exist.
> 
> In the normal case, all mappers are instances of the same class.  When
> they're different, then then the splits will be somehow different (in
> order to indicate which mapper to use), and the record readers may also
> be different.  So whenever one uses a non-default implementation of
> getMapper() it will require coordination with the getSplits() and
> perhaps the getRecordReader() implementations.  Since they must be
> coordinated, it makes sense to combine these methods in a single
> interface, called something like JobInput.
> 
> But we don't expect end users to be implementing JobInput.  Rather, they
> might job.setJobInputClass(MultiJobInput.class) and then use a static
> utility method like:
> 
> void MultiJobInput.addInput(job, dir, recordReaderClass, mapperClass);
> 
> This will set some properties that MultiJobInput's getSplits(),
> getRecordReader() and getMapper() implementations will use.
> 
> So we can still have a simple, easy-to-use API, without hardwiring a lot
> of assumptions about input/output formats into the kernel.
> 
> Does this make sense?  Does it sound reasonable?
> 
> Doug



From MAILER-DAEMON Fri Aug 25 23:50:04 2006
Return-Path: 
 <hadoop-dev-return-3343-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53576 invoked from network); 25 Aug 2006 23:50:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 23:50:04 -0000
Received: (qmail 98073 invoked by uid 500); 25 Aug 2006 23:50:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98047 invoked by uid 500); 25 Aug 2006 23:50:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98038 invoked by uid 99); 25 Aug 2006 23:50:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 16:50:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.148.227.151] (HELO rwcrmhc11.comcast.net)
 (216.148.227.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 16:50:01 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc11) with ESMTP
          id <20060825234940m1100ivqk1e>; Fri, 25 Aug 2006 23:49:40 +0000
Message-ID: <44EF8CA5.5050905@apache.org>
Date: Fri, 25 Aug 2006 16:49:57 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
References: <003a01c6c89f$47832490$e6e77ecf@ds.corp.yahoo.com>
In-Reply-To: <003a01c6c89f$47832490$e6e77ecf@ds.corp.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Runping Qi wrote:
> This sounds good to me! A couple of questions.
> 
> If the user uses the default JobInput implementation, how does the user to
> specify the input directory? Currently, it is done through methods of
> JobConf. Will that change?

The default JobInput should be back-compatible.  We could decide to 
deprecate JobConf.setInputDir(), and encourage folks to use an 
JobInput-specific method.

>> But we don't expect end users to be implementing JobInput.  Rather, they
>> might job.setJobInputClass(MultiJobInput.class) and then use a static
>> utility method like:
>>
>> void MultiJobInput.addInput(job, dir, recordReaderClass, mapperClass);
> 
> But can the end user implement such a class if s/he wants to? In other
> words, will the user have only two choices: the default implementation of
> JobInput
> and MultiJobInput? Or the user can implement his own:
> 	public class MyMultipleInput implements JobInput {
> };

Sure, that's the idea, to give more flexibility to those who need it.

Doug

From MAILER-DAEMON Sat Aug 26 01:12:37 2006
Return-Path: 
 <hadoop-dev-return-3344-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73924 invoked from network); 26 Aug 2006 01:12:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 01:12:37 -0000
Received: (qmail 86092 invoked by uid 500); 26 Aug 2006 01:12:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85917 invoked by uid 500); 26 Aug 2006 01:12:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85908 invoked by uid 99); 26 Aug 2006 01:12:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 18:12:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 18:12:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D1A6D714204
	for <hadoop-dev@lucene.apache.org>; Sat, 26 Aug 2006 01:09:23 +0000 (GMT)
Message-ID: <31387648.1156554563856.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 18:09:23 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12430678 ] 
            
arkady borkovsky commented on HADOOP-372:
-----------------------------------------

The issue as stated in the title is an important useful feature on it's own.

However the actual problem that motivated it, as described in the original post, does not necessarily imply the suggested solution.
The problem Runping describes looks like a case of Join to me. 
The suggested solution would help to implement a work-aorund using MapReduce.  
But is this the best way of allocating development resources?  
Implementing Join  using    MultiJobInput   in Map step  and SplitIterator  in Reduce step  is a temporary work-around solution.
Would it make sense to define interfaces in terms of actual problem (Join)?   In short term it still may be implemented piggy-backing MapReduce using two-level keys and MultiJobInput.   But the user would be able to think in more appropriate terms.

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug 26 01:32:35 2006
Return-Path: 
 <hadoop-dev-return-3345-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82212 invoked from network); 26 Aug 2006 01:32:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 01:32:35 -0000
Received: (qmail 811 invoked by uid 500); 26 Aug 2006 01:32:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 786 invoked by uid 500); 26 Aug 2006 01:32:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 776 invoked by uid 99); 26 Aug 2006 01:32:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 18:32:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 18:32:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 58D567141F0
	for <hadoop-dev@lucene.apache.org>; Sat, 26 Aug 2006 01:29:22 +0000 (GMT)
Message-ID: <6897392.1156555762361.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 18:29:22 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-484) Additional splilts for last reduces?
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Additional splilts for last reduces?
------------------------------------

                 Key: HADOOP-484
                 URL: http://issues.apache.org/jira/browse/HADOOP-484
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: arkady borkovsky


Often last few reduces take very long.  

Would it make sense, if hardware is available, to resplit their inputs into smaller chunks and to run multiple task instead?


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug 26 02:48:36 2006
Return-Path: 
 <hadoop-dev-return-3346-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90340 invoked from network); 26 Aug 2006 02:48:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 02:48:36 -0000
Received: (qmail 38753 invoked by uid 500); 26 Aug 2006 02:48:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38727 invoked by uid 500); 26 Aug 2006 02:48:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38717 invoked by uid 99); 26 Aug 2006 02:48:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 19:48:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 19:48:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E03F97141F0
	for <hadoop-dev@lucene.apache.org>; Sat, 26 Aug 2006 02:45:23 +0000 (GMT)
Message-ID: <18178440.1156560323915.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 19:45:23 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12430683 ] 
            
Michel Tourn commented on HADOOP-372:
-------------------------------------

Support for "all-pairs" joins is a far-reaching requirement that I don't touch here. 

But I agree with Doug's last comment:

>In other words, if you're going to define custom mappers anyway, 
>then it's no more work to define custom Input formats.

Moreover, unless I am missing something, the current APIs already nicely address the requirement in the JIRA issue title.

JobConf.addInputPath(Path dir)

JobConf.setInputFormat(Class theClass)

InputFormat {
  FileSplit[] getSplits(FileSystem, JobConf, preferredNumSplits)
  RecordReader getRecordReader(FileSystem fs, FileSplit split,
                               JobConf job, Reporter reporter)
  ...
}

Given this current API the flow looks like this:

During Task execution ( InputFormat.getRecordReader() ):

taks's FileSplit + job's single InputFormat  -> Path context -> inputDirectory context --> dispatched "sub" InputFormat --> getRecordReader --> RecordReader instance.


During JobTracker splits computation ( InputFormat.getSplits() ):

job's single InputFormat  + job's list of input directories --> list of input dirs/files --> list of sub-InputFormat-s --> dispatch and "aggregate" the results from your sub-InputFormat-s .getSplits()


This is enough to implement the special case discussed in the HADOOP-372 title:

InputDirectory  --> InputFormat


A framework class or the examples or the Wiki FAQ could demonstrate how one can write such a *generic* dispatching  class:


class DispatchInputFormat(InputFormat[], JobConf)   implements InputFormat


It is generic but not universal.
different applications will need to use different information to make the InputFormat dispatch / aggregation decisions.

Now three ways to customize this DispatchInputFormat.

1./3. Writing zero java code:

replace:
>job.addInputPath("foo", FooInput.class); 
with:
job.set("DispatchInputFormat.inputdirmap", "foo=org.example.FooInput bar=org.example.BarInput")

If you want client-side type checking for the classnames, do it in a helper method.
For example:

static void DispatchInputFormat.addDir(
  JobConf, Path dir, Class<InputFormat> clazz)
Call:
DispatchInputFormat.add(job, new Path("foo"), FooInput.class);
DispatchInputFormat.add(job, new Path("bar"), BarInput.class);

Where Class<InputFormat> uses Generics to enforce at compile-time that FooInput implements InputFormat. 


2./3. code reuse without copy-paste

A few well-placed hooks could allow users to reuse and customize the DispatchInputFormat code without duplicating it:

class MyInputFormat extends DispatchInputFormat {

  //override
   protected InputFormat inputDirToFormat(Path inputDir) {
     ...
   } 
}

3./3. code reuse with copy-paste

And for more complex requirements that do not fit well with inputDirToFormat():

one would instead use DispatchInputFormat as a starting point, a source code example.



> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug 26 04:53:44 2006
Return-Path: 
 <hadoop-dev-return-3347-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6922 invoked from network); 26 Aug 2006 04:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 04:53:44 -0000
Received: (qmail 90474 invoked by uid 500); 26 Aug 2006 04:53:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90455 invoked by uid 500); 26 Aug 2006 04:53:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90446 invoked by uid 99); 26 Aug 2006 04:53:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 21:53:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 21:53:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9A31F7142A1
	for <hadoop-dev@lucene.apache.org>; Sat, 26 Aug 2006 04:50:26 +0000 (GMT)
Message-ID: <23017054.1156567826628.JavaMail.jira@brutus>
Date: Fri, 25 Aug 2006 21:50:26 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-54?page=comments#action_12430695 ] 
            
Arun C Murthy commented on HADOOP-54:
-------------------------------------

Great... thanks Owen!

PS: We should probably send a separate mail to hadoop-dev@ announcing the patch to build.xml to spare everyone a surprise...

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: enum-54.patch, SequenceFile.20060821.patch, SequenceFile.20060821.perfomance.txt, SequenceFile.20060822.tgz, SequenceFile.updated.final.patch, SequenceFile20060824.tgz, SequenceFiles.final.patch, SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Aug 26 07:55:35 2006
Return-Path: 
 <hadoop-dev-return-3348-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61776 invoked from network); 26 Aug 2006 07:55:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 07:55:35 -0000
Received: (qmail 85526 invoked by uid 500); 26 Aug 2006 07:55:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85506 invoked by uid 500); 26 Aug 2006 07:55:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85492 invoked by uid 99); 26 Aug 2006 07:55:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 00:55:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 00:55:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 617BA7141F0
	for <hadoop-dev@lucene.apache.org>; Sat, 26 Aug 2006 07:52:22 +0000 (GMT)
Message-ID: <18308270.1156578742395.JavaMail.jira@brutus>
Date: Sat, 26 Aug 2006 00:52:22 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-485) allow a different comparator for
 grouping keys in calls to reduce
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

allow a different comparator for grouping keys in calls to reduce
-----------------------------------------------------------------

                 Key: HADOOP-485
                 URL: http://issues.apache.org/jira/browse/HADOOP-485
             Project: Hadoop
          Issue Type: New Feature
    Affects Versions: 0.5.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley


Some algorithms require that the values to the reduce be sorted in a particular order, but extending the key with the additional fields causes  them to be handled by different calls to reduce. (The user then collects the values until they detect a "real" key change and then processes them.)

It would be much easier if the framework let you define a second comparator that did the grouping of values for reduces. So your reduce inputs look like:

A1, V1
A2, V2
A3, V3
B1, V4
B2, V5

instead of getting calls to reduce that look like:

reduce(A1, {V1}); reduce(A2, {V2}); reduce(A3, {V3}); reduce(B1, {V4}); reduce(B2, {V5});

you could define the grouping comparator to just compare the letters and end up with:

reduce(A1, {V1,V2,V3}); reduce(B1, {V4,V5});

which is the desired outcome. Note that this assumes that the "extra" part of the key is just for sorting because the reduce will only see the first representative of each equivalence class.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 07:27:40 2006
Return-Path: 
 <hadoop-dev-return-3349-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 951 invoked from network); 28 Aug 2006 07:27:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 07:27:40 -0000
Received: (qmail 79831 invoked by uid 500); 28 Aug 2006 07:27:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79801 invoked by uid 500); 28 Aug 2006 07:27:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79788 invoked by uid 99); 28 Aug 2006 07:27:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 00:27:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 00:27:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7E98B41000E
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 07:24:23 +0000 (GMT)
Message-ID: <14926946.1156749863514.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 00:24:23 -0700 (PDT)
From: "Vetle Roeim (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-466) Startup scripts will not start
 instances of Hadoop daemons w/different configs w/o setting separate PID
 directories
In-Reply-To: <18080349.1156145293920.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-466?page=comments#action_12430940 ] 
            
Vetle Roeim commented on HADOOP-466:
------------------------------------

Ah, I didn't know it worked like this. Seems that it might be a useful feature.

But all I want is the hashing, so does HADOOP_IDENT_STRING stay in, or should it be taken out? Perhaps this should be another issue entirely?

> Startup scripts will not start instances of Hadoop daemons w/different configs w/o setting separate PID directories
> -------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-466
>                 URL: http://issues.apache.org/jira/browse/HADOOP-466
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Vetle Roeim
>             Fix For: 0.6.0
>
>         Attachments: hadoop-466.diff
>
>
> Configuration directories can be specified by either setting HADOOP_CONF_DIR or using the --config command line option. However, the hadoop-daemon.sh script will not start the daemons unless the PID directory is separate for each configuration.
> The issue is that the code for generating PID filenames is not dependent on the configuration directory. While the PID directory can be changed in hadoop-env.sh, it seems a little unnecessary to have this restriction.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 09:11:40 2006
Return-Path: 
 <hadoop-dev-return-3350-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34393 invoked from network); 28 Aug 2006 09:11:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 09:11:40 -0000
Received: (qmail 13407 invoked by uid 500); 28 Aug 2006 09:11:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13381 invoked by uid 500); 28 Aug 2006 09:11:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13372 invoked by uid 99); 28 Aug 2006 09:11:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 02:11:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 02:11:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8D23B41000E
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 09:08:23 +0000 (GMT)
Message-ID: <32300947.1156756103574.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 02:08:23 -0700 (PDT)
From: "Thomas FRIOL (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-366) Should be able to specify more than
 one jar into a JobConf file
In-Reply-To: <32857334.1153138454140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-366?page=comments#action_12430959 ] 
            
Thomas FRIOL commented on HADOOP-366:
-------------------------------------

Owen,

More than one month without news about this bug. What do you think about it ?

Thanks for your help.

> Should be able to specify more than one jar into a JobConf file
> ---------------------------------------------------------------
>
>                 Key: HADOOP-366
>                 URL: http://issues.apache.org/jira/browse/HADOOP-366
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Thomas FRIOL
>
> A job should be able to specify more than one jar file into its JobConf file because sometimes custom Map and Reduce classes or just InputFormat classes uses objects coming from other jar files. For now, we have to build a unique jar to make Hadoop mapreduce operations works.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 11:11:41 2006
Return-Path: 
 <hadoop-dev-return-3351-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85682 invoked from network); 28 Aug 2006 11:11:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 11:11:41 -0000
Received: (qmail 70676 invoked by uid 500); 28 Aug 2006 11:11:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70636 invoked by uid 500); 28 Aug 2006 11:11:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70626 invoked by uid 99); 28 Aug 2006 11:11:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 04:11:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 04:11:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 41B0341000C
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 11:08:24 +0000 (GMT)
Message-ID: <26265221.1156763304265.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 04:08:24 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work stopped: (HADOOP-441) SequenceFile should support
 'custom compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-441?page=all ]

Work on HADOOP-441 stopped by Arun C Murthy.

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 11:15:40 2006
Return-Path: 
 <hadoop-dev-return-3352-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88264 invoked from network); 28 Aug 2006 11:15:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 11:15:40 -0000
Received: (qmail 76062 invoked by uid 500); 28 Aug 2006 11:15:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76043 invoked by uid 500); 28 Aug 2006 11:15:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76019 invoked by uid 99); 28 Aug 2006 11:15:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 04:15:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 04:15:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7B1D47142D4
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 11:12:23 +0000 (GMT)
Message-ID: <15522744.1156763543500.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 04:12:23 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-441?page=comments#action_12430966 ] 
            
Arun C Murthy commented on HADOOP-441:
--------------------------------------

Doug,

  If I'm not missing something here... we can reuse the compressor by having one 'Deflater/Inflater' object per Writer/Reader instead of the pool right? Even then creating the stream with the above compressor will probably be quite significant for RecordCompressWriter where we would need to do this per record? Appreciate any further details on this one.

 Also, I'm concerned this solution will be quite gzip specific, which be unsuitable for a generic 'custom' compressor... thoughts?

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 11:35:53 2006
Return-Path: 
 <hadoop-dev-return-3353-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98221 invoked from network); 28 Aug 2006 11:35:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 11:35:53 -0000
Received: (qmail 98196 invoked by uid 500); 28 Aug 2006 11:35:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98173 invoked by uid 500); 28 Aug 2006 11:35:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98164 invoked by uid 99); 28 Aug 2006 11:35:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 04:35:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 04:35:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0D5D34295A2
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 11:32:33 +0000 (GMT)
Message-ID: <32100790.1156764753991.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 04:32:33 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-441?page=comments#action_12430967 ] 
            
Arun C Murthy commented on HADOOP-441:
--------------------------------------

Wrt to the new Compression{Input|Output}Stream interfaces proposed by Owen, here are some thoughts and alternatives...

(Since then a new idea is to have the the above 'compression streams' implement the Data{Input|Output} interfaces, so that they can be passed along to the write/readFields methods of Writable objects i.e. bridge a 'stream' with Data{Input|Output})

a) 

public abstract class CompressionOutputStream extends DataOutputStream {
  public abstract int write();
  public abstract int write(byte[], int, int);
  public abstract void resetCompressionState(); // 'reset'
  public abstract void finish(); // Finishes writing compressed data to the output stream without closing the underlying stream.
}

Here we let DataOutputStream's other public methods (writeBoolean, writeInt etc.) be as-is, based on assumption that they all _will_ internally call the two abstract 'write' methods which correctly 'compress'. (Valid assumption on all jvms and on all platforms across versions?)

Since DataInputStream's 'read' is marked 'final':
public abstract class CompressionInputStream implements DataInput {
  public abstract int read();
  public abstract int read(byte[], int, int);
  public abstract void resetCompressionState(); // 'reset'

  // Other interfaces of DataInput are provided concrete implementations
}


b) 

Same CompressionInputStream but get CompressionOutputStream to implement DataOutput instead of DataOutputStream to maintain symmetry - this approach has the drawback that we will need to provide concrete implementations of other public interfaces of DataOutput; only maintaining symmetry.


c)

 To provide a 'true bridge' between streams and Writables we can create other classes:

public abstract class WritableOutputStream implements DataOutput (extends DataOutputStream) {
}

public abstract class WritableInputStream implements DataInput {
}

public class CompressionOutputStream extends  WritableOutputStream {
}

public class CompressionInputStream extends DataInput WritableInputStream {
}

 Thus it will provide a more general bridge between streams and Writables and enable other {In|Out}putStream implementations in future. (This can also be a separate issue...)


Thoughts?

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 14:59:41 2006
Return-Path: 
 <hadoop-dev-return-3354-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77378 invoked from network); 28 Aug 2006 14:59:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 14:59:41 -0000
Received: (qmail 78535 invoked by uid 500); 28 Aug 2006 14:59:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78444 invoked by uid 500); 28 Aug 2006 14:59:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78435 invoked by uid 99); 28 Aug 2006 14:59:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 07:59:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 07:59:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 117DB7142D0
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 14:56:24 +0000 (GMT)
Message-ID: <16259971.1156776984068.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 07:56:24 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-281) dfs.FSDirectory.mkdirs can create
 sub-directories of a file!
In-Reply-To: <19818580.1149635189767.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-281?page=comments#action_12430987 ] 
            
Benjamin Reed commented on HADOOP-281:
--------------------------------------

Have we considered this to be a feature. Some newer general purpose file system allow a file to also be a directory (and visa versa). It is an abstraction that nicely folds in the functionality of streams and resource forks. For example, rather than sticking crcs and other attributes for a file in the same directory as a file (which necessitates a bunch of ugly skip logic in the code), we could simply put them in a subdirectory of the file.

> dfs.FSDirectory.mkdirs can create sub-directories of a file!
> ------------------------------------------------------------
>
>                 Key: HADOOP-281
>                 URL: http://issues.apache.org/jira/browse/HADOOP-281
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.1
>            Reporter: Sameer Paranjpye
>         Assigned To: Wendy Chien
>             Fix For: 0.6.0
>
>         Attachments: addNode.patch, TestDFSMkdirs.java
>
>
> dfs.FSDirectory.mkdirs will merrily adds children to a directory tree node without checking whether it represents a directory. So it is possible to create a subdirectories of a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 15:42:42 2006
Return-Path: 
 <hadoop-dev-return-3355-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92500 invoked from network); 28 Aug 2006 15:42:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 15:42:42 -0000
Received: (qmail 69502 invoked by uid 500); 28 Aug 2006 15:42:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69443 invoked by uid 500); 28 Aug 2006 15:42:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69404 invoked by uid 99); 28 Aug 2006 15:42:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 08:42:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 08:42:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 530A87142D9
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 15:39:24 +0000 (GMT)
Message-ID: <32829272.1156779564337.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 08:39:24 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12430992 ] 
            
Benjamin Reed commented on HADOOP-372:
--------------------------------------

We have a desperate need to be able to specify different inputformat classes, mappers, and partition functions in the same job. Our need roughly corresponds to this issue. However, we do not assume that a given input will need to be processed by only one inputformat, mapper, or partition function.

I think Owen was right about directing the discussion towards HADOOP-451. If HADOOP-451 was fixed, we (meaning my project) would not have any issues in this area. We actually use a similar syntax to the one proposed by Michel: job.set("DispatchInputFormat.inputdirmap", "foo=org.example.FooInput bar=org.example.BarInput"), but imagine if we get job.set("DispatchInputFormat.inputdirmap", "foo=org.example.FooInput foo=org.example.BarInput"), now foo must be processed by both FooInput and BarInput. When the splits are created and sent to the mappers, the DispatchInputFormat will get {"foo", offset, length}, but it has no way of knowing wether to apply FooInput or BarInput. With HADOOP-451 fixed, we could encode the InputFormat to use in the split.

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 16:02:40 2006
Return-Path: 
 <hadoop-dev-return-3356-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 612 invoked from network); 28 Aug 2006 16:02:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 16:02:40 -0000
Received: (qmail 9705 invoked by uid 500); 28 Aug 2006 16:02:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9573 invoked by uid 500); 28 Aug 2006 16:02:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9564 invoked by uid 99); 28 Aug 2006 16:02:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 09:02:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 09:02:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5EF5A7142D9
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 15:59:23 +0000 (GMT)
Message-ID: <17105327.1156780763385.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 08:59:23 -0700 (PDT)
From: "Jean-Baptiste Quenot (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-366) Should be able to specify more than
 one jar into a JobConf file
In-Reply-To: <32857334.1153138454140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-366?page=comments#action_12430995 ] 
            
Jean-Baptiste Quenot commented on HADOOP-366:
---------------------------------------------

In fact Owen's point is to say that you can put jars in the jar.

Is there any reason for this "hack" to unpack mapred.jar in TaskRunner and look for a "lib" directory containing jars?  Isn't that too much of magic?

Would it be a viable option to allow MapReduce tasks to take a list of jars instead?  Or is there a compelling reason to only give a single Jar?

> Should be able to specify more than one jar into a JobConf file
> ---------------------------------------------------------------
>
>                 Key: HADOOP-366
>                 URL: http://issues.apache.org/jira/browse/HADOOP-366
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Thomas FRIOL
>
> A job should be able to specify more than one jar file into its JobConf file because sometimes custom Map and Reduce classes or just InputFormat classes uses objects coming from other jar files. For now, we have to build a unique jar to make Hadoop mapreduce operations works.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 16:29:53 2006
Return-Path: 
 <hadoop-dev-return-3357-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10994 invoked from network); 28 Aug 2006 16:29:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 16:29:53 -0000
Received: (qmail 62346 invoked by uid 500); 28 Aug 2006 16:29:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62264 invoked by uid 500); 28 Aug 2006 16:29:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62194 invoked by uid 99); 28 Aug 2006 16:29:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 09:29:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 09:29:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD9D87142E6
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 16:26:23 +0000 (GMT)
Message-ID: <23485818.1156782383839.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 09:26:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12431002 ] 
            
Owen O'Malley commented on HADOOP-372:
--------------------------------------

Ok, Doug, Runping & I chatted offline over a whiteboard and here is a proposal that I believe captures something that will work:

public class InputHandler {
  public List<FileSplit> getSplits(JobConf);
  public RecordReader getRecordReader(JobConf, FileSplit);
  public Mapper getMapper(JobConf, FileSplit, RecordReader);
}

where InputHandler is a generalization of the current InputFomat. It is clearly possible to write user code then that handles multiple input directories with different RecordReaders and Mappers, but it isn't a huge jump from where we are now.

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 16:35:55 2006
Return-Path: 
 <hadoop-dev-return-3358-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13892 invoked from network); 28 Aug 2006 16:35:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 16:35:55 -0000
Received: (qmail 76706 invoked by uid 500); 28 Aug 2006 16:35:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76684 invoked by uid 500); 28 Aug 2006 16:35:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76675 invoked by uid 99); 28 Aug 2006 16:35:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 09:35:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 09:35:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6CAEB7142D9
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 16:32:23 +0000 (GMT)
Message-ID: <22370981.1156782743442.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 09:32:23 -0700 (PDT)
From: "James P. White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-366) Should be able to specify more than
 one jar into a JobConf file
In-Reply-To: <32857334.1153138454140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-366?page=comments#action_12431003 ] 
            
James P. White commented on HADOOP-366:
---------------------------------------

A more comprehensive approach to the issue Thomas raises is to use a format that addresses all aspects of Java program execution dependency.   The Java standard has two formats that address this in somewhat different ways:

JNLP  (Java Network Launch Protocol)
http://java.sun.com/j2se/1.4.2/docs/guide/jws/index.html
Used by Java Web Start.  Addresses all of the Java platform execution issues, including using native code.
But this is probably not the right level for packaing MapReduce modules, but rather should be used to package Hadoop itself.

Extensions 
http://java.sun.com/j2se/1.4.2/docs/guide/extensions/index.html
This is exactly what Thomas is asking for, and provides the format for included jars and the setting of the classpath.

http://java.sun.com/j2se/1.4.2/docs/guide/extensions/spec.html

Bundled Optional Packages

 The manifest for an application or optional package can specify one or more relative URLs referring to the JAR files and directories for the optional packages (and other libraries) that it needs. These relative URLs will be treated relative to the code base that the containing application or optional package JAR file was loaded from.

An application (or, more generally, JAR file) specifies the relative URLs of the optional packages (and libraries) that it needs via the manifest attribute Class-Path. This attribute lists the URLs to search for implementations of optional packages (or other libraries) if they cannot be found as optional packages installed on the host Java virtual machine*. These relative URLs may include JAR files and directories for any libraries or resources needed by the application or optional package. Relative URLs not ending with '/' are assumed to refer to JAR files. For example,

Class-Path: servlet.jar infobus.jar acme/beans.jar images/

 Multiple Class-Path headers may be specified, and are combined sequentially.



> Should be able to specify more than one jar into a JobConf file
> ---------------------------------------------------------------
>
>                 Key: HADOOP-366
>                 URL: http://issues.apache.org/jira/browse/HADOOP-366
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Thomas FRIOL
>
> A job should be able to specify more than one jar file into its JobConf file because sometimes custom Map and Reduce classes or just InputFormat classes uses objects coming from other jar files. For now, we have to build a unique jar to make Hadoop mapreduce operations works.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 17:01:47 2006
Return-Path: 
 <hadoop-dev-return-3359-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26714 invoked from network); 28 Aug 2006 17:01:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 17:01:47 -0000
Received: (qmail 41997 invoked by uid 500); 28 Aug 2006 17:01:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41975 invoked by uid 500); 28 Aug 2006 17:01:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41954 invoked by uid 99); 28 Aug 2006 17:01:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 10:01:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 10:01:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0115B41000E
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 16:58:25 +0000 (GMT)
Message-ID: <18574005.1156784305001.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 09:58:25 -0700 (PDT)
From: "James P. White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-366) Should be able to specify more than
 one jar into a JobConf file
In-Reply-To: <32857334.1153138454140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-366?page=comments#action_12431013 ] 
            
James P. White commented on HADOOP-366:
---------------------------------------

I didn't finish that thought...

I also don't think jobs should have this "external-config-file-plus-jar-file" structure.  The job should just be a jar file and the configuration contained within it.

There are several ways to do that.  The one that is the least change to the current implementation is to simply put the JobConf file (sans the mapred.jar property) in the root of the jar file.

Putting a suitable property in the manifest to tag the jar as a Hadoop job file is a good idea too, although it then opens the question of what other properties might belong there as well.



> Should be able to specify more than one jar into a JobConf file
> ---------------------------------------------------------------
>
>                 Key: HADOOP-366
>                 URL: http://issues.apache.org/jira/browse/HADOOP-366
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Thomas FRIOL
>
> A job should be able to specify more than one jar file into its JobConf file because sometimes custom Map and Reduce classes or just InputFormat classes uses objects coming from other jar files. For now, we have to build a unique jar to make Hadoop mapreduce operations works.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 18:18:45 2006
Return-Path: 
 <hadoop-dev-return-3360-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63869 invoked from network); 28 Aug 2006 18:18:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 18:18:45 -0000
Received: (qmail 88329 invoked by uid 500); 28 Aug 2006 18:18:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88156 invoked by uid 500); 28 Aug 2006 18:18:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88147 invoked by uid 99); 28 Aug 2006 18:18:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 11:18:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 11:18:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CFC0A7142E6
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 18:15:23 +0000 (GMT)
Message-ID: <22625268.1156788923848.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 11:15:23 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12431029 ] 
            
Benjamin Reed commented on HADOOP-372:
--------------------------------------

I like this proposal. Assuming that the RecordReader in getMapper is the really record reader (ie the one returned from getRecordReader) it would address HADOOP-433.

How would this interact with the ability to define a MapRunnable?

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 18:36:44 2006
Return-Path: 
 <hadoop-dev-return-3361-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87943 invoked from network); 28 Aug 2006 18:36:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 18:36:44 -0000
Received: (qmail 33194 invoked by uid 500); 28 Aug 2006 18:36:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33017 invoked by uid 500); 28 Aug 2006 18:36:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33008 invoked by uid 99); 28 Aug 2006 18:36:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 11:36:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 11:36:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 573AA7142D4
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 18:33:22 +0000 (GMT)
Message-ID: <28115050.1156790002354.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 11:33:22 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-486) adding username to jobstatus
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

adding username to jobstatus
----------------------------

                 Key: HADOOP-486
                 URL: http://issues.apache.org/jira/browse/HADOOP-486
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Mahadev konar
         Assigned To: Mahadev konar
            Priority: Minor


Adding a new field to jobstatus that has the username, so that remotely doing jobclient.jobsToComplete() has the username with the jobstatuses.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 18:38:56 2006
Return-Path: 
 <hadoop-dev-return-3362-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89479 invoked from network); 28 Aug 2006 18:38:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 18:38:56 -0000
Received: (qmail 37771 invoked by uid 500); 28 Aug 2006 18:38:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37745 invoked by uid 500); 28 Aug 2006 18:38:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37724 invoked by uid 99); 28 Aug 2006 18:38:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 11:38:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 11:38:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 65AC37142D3
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 18:35:23 +0000 (GMT)
Message-ID: <5121093.1156790123413.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 11:35:23 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-486) adding username to jobstatus
In-Reply-To: <28115050.1156790002354.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-486?page=all ]

Mahadev konar updated HADOOP-486:
---------------------------------

    Attachment: username.patch

This patch adds a username field to the jobstatus with minimum changes. 

> adding username to jobstatus
> ----------------------------
>
>                 Key: HADOOP-486
>                 URL: http://issues.apache.org/jira/browse/HADOOP-486
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>         Attachments: username.patch
>
>
> Adding a new field to jobstatus that has the username, so that remotely doing jobclient.jobsToComplete() has the username with the jobstatuses.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 18:40:48 2006
Return-Path: 
 <hadoop-dev-return-3363-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90945 invoked from network); 28 Aug 2006 18:40:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 18:40:48 -0000
Received: (qmail 47400 invoked by uid 500); 28 Aug 2006 18:40:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47380 invoked by uid 500); 28 Aug 2006 18:40:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47371 invoked by uid 99); 28 Aug 2006 18:40:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 11:40:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 11:40:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 318657142D9
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 18:37:26 +0000 (GMT)
Message-ID: <23146889.1156790246200.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 11:37:26 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-486) adding username to jobstatus
In-Reply-To: <28115050.1156790002354.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-486?page=all ]

Mahadev konar updated HADOOP-486:
---------------------------------

    Status: Patch Available  (was: Open)

> adding username to jobstatus
> ----------------------------
>
>                 Key: HADOOP-486
>                 URL: http://issues.apache.org/jira/browse/HADOOP-486
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>         Attachments: username.patch
>
>
> Adding a new field to jobstatus that has the username, so that remotely doing jobclient.jobsToComplete() has the username with the jobstatuses.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 18:57:48 2006
Return-Path: 
 <hadoop-dev-return-3364-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98955 invoked from network); 28 Aug 2006 18:57:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 18:57:48 -0000
Received: (qmail 91474 invoked by uid 500); 28 Aug 2006 18:57:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91449 invoked by uid 500); 28 Aug 2006 18:57:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91440 invoked by uid 99); 28 Aug 2006 18:57:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 11:57:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 11:57:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2CFE6410017
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 18:54:24 +0000 (GMT)
Message-ID: <6608743.1156791264181.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 11:54:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12431033 ] 
            
Doug Cutting commented on HADOOP-372:
-------------------------------------

> How would this interact with the ability to define a MapRunnable?

Good question.  Perhaps this interface should return a MapRunnable rather than a Mapper?

Also, note that the uses of FileSplit will be generalized to the more abstract Split by HADOOP-451.

Finally, I'd prefer the name "JobInput".  But I wonder: should we change it from InputFormat at all?  Do we intend to rename OutputFormat too?  If not, renaming this might  create more confusion in the API than it removes.

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 19:14:40 2006
Return-Path: 
 <hadoop-dev-return-3365-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6491 invoked from network); 28 Aug 2006 19:14:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 19:14:40 -0000
Received: (qmail 21233 invoked by uid 500); 28 Aug 2006 19:14:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21220 invoked by uid 500); 28 Aug 2006 19:14:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21211 invoked by uid 99); 28 Aug 2006 19:14:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 12:14:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 12:14:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9A4EF7142D9
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 19:11:23 +0000 (GMT)
Message-ID: <3929472.1156792283629.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 12:11:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-467) Building test cases broken on
 java-1.4, TextTest.java has string creation bug.
In-Reply-To: <4386369.1156151655328.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-467?page=all ]

Doug Cutting resolved HADOOP-467.
---------------------------------

    Fix Version/s: 0.6.0
       Resolution: Duplicate

> Building test cases broken on java-1.4, TextTest.java has string creation bug.
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-467
>                 URL: http://issues.apache.org/jira/browse/HADOOP-467
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>         Environment: Java HotSpot(TM) Client VM (build 1.4.2_10-b03, mixed mode)
> rajaram.desktop% Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_10-b03)
> RHEL3
>            Reporter: woyg
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: testCasesNotCompilableOnjava1.4.patch
>
>
> *Test Files
> --- src/test/org/apache/hadoop/io/TestText.java (revision 432549)
> --- src/test/org/apache/hadoop/mapred/MiniMRCluster.java        (revision 432549)
> --- src/test/org/apache/hadoop/mapred/TestSequenceFileInputFilter.java  (revision 432549)
> --- src/test/org/apache/hadoop/dfs/TestDFSShellGenericOptions.java      (revision 432549)
> Broken on java-1.4
> and a bug in static method getTestString(int len).
> This function generates a character with code point equal or smaller then 0xFFFF, and converts this into array of chars of size 2(which should be one) and appened it buffer.
> So resulting into a a null character tobe inserted into string after a no null character.
>  ----
> Find Patch attached.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 19:18:42 2006
Return-Path: 
 <hadoop-dev-return-3366-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8445 invoked from network); 28 Aug 2006 19:18:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 19:18:42 -0000
Received: (qmail 33954 invoked by uid 500); 28 Aug 2006 19:18:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33939 invoked by uid 500); 28 Aug 2006 19:18:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33930 invoked by uid 99); 28 Aug 2006 19:18:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 12:18:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 12:18:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BA73D7142D5
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 19:15:23 +0000 (GMT)
Message-ID: <397898.1156792523761.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 12:15:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-461) Build broken forjava version
 "1.4.2_09"
In-Reply-To: <23861547.1155919710927.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-461?page=all ]

Doug Cutting resolved HADOOP-461.
---------------------------------

    Fix Version/s: 0.6.0
       Resolution: Won't Fix

Hadoop is not targetting Java 1.4, but rather 1.5.  I've made this explicit in the build.xml.

> Build broken forjava version "1.4.2_09"
> ---------------------------------------
>
>                 Key: HADOOP-461
>                 URL: http://issues.apache.org/jira/browse/HADOOP-461
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>         Environment: java version "1.4.2_09"
> Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_09-233)
> Java HotSpot(TM) Client VM (build 1.4.2-56, mixed mode)   
> Mac OS X - version 10.3.9
> 1.5GHz PowerPC G4
>            Reporter: woyg
>            Priority: Trivial
>             Fix For: 0.6.0
>
>         Attachments: build_broken_on_java1.4.diff, build_broken_on_java1.4.txt
>
>
> Build is broken on java 1.4.2_09.
> Method java.lang.Boolean.parseBoolean(String val) is  available since Java 5
> http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Boolean.html#parseBoolean(java.lang.String)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 19:26:44 2006
Return-Path: 
 <hadoop-dev-return-3367-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21499 invoked from network); 28 Aug 2006 19:26:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 19:26:44 -0000
Received: (qmail 50950 invoked by uid 500); 28 Aug 2006 19:26:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50930 invoked by uid 500); 28 Aug 2006 19:26:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50921 invoked by uid 99); 28 Aug 2006 19:26:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 12:26:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 12:26:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 18E237142E8
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 19:23:25 +0000 (GMT)
Message-ID: <24007219.1156793005099.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 12:23:25 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-54) SequenceFile should compress blocks,
 not individual entries
In-Reply-To: <442955632.1140640880483.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-54?page=all ]

Doug Cutting updated HADOOP-54:
-------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.

Owen, when you converted things to use the Java 1.5 enum you also threw out most of the javadoc on that class.  I restored & improved this before I committed.

> SequenceFile should compress blocks, not individual entries
> -----------------------------------------------------------
>
>                 Key: HADOOP-54
>                 URL: http://issues.apache.org/jira/browse/HADOOP-54
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Doug Cutting
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: enum-54.patch, SequenceFile.20060821.patch, SequenceFile.20060821.perfomance.txt, SequenceFile.20060822.tgz, SequenceFile.updated.final.patch, SequenceFile20060824.tgz, SequenceFiles.final.patch, SequenceFiles.patch, SequenceFilesII.patch, VIntCompressionResults.txt
>
>
> SequenceFile will optionally compress individual values.  But both compression and performance would be much better if sequences of keys and values are compressed together.  Sync marks should only be placed between blocks.  This will require some changes to MapFile too, so that all file positions stored there are the positions of blocks, not entries within blocks.  Probably this can be accomplished by adding a getBlockStartPosition() method to SequenceFile.Writer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 19:35:42 2006
Return-Path: 
 <hadoop-dev-return-3368-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27640 invoked from network); 28 Aug 2006 19:35:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 19:35:42 -0000
Received: (qmail 71673 invoked by uid 500); 28 Aug 2006 19:35:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71499 invoked by uid 500); 28 Aug 2006 19:35:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71490 invoked by uid 99); 28 Aug 2006 19:35:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 12:35:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 12:35:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C304B7142D9
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 19:32:25 +0000 (GMT)
Message-ID: <28356687.1156793545796.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 12:32:25 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-460) Small jobs benchmark fails with
 current Hadoop due to UTF8 -> Text ClassCastException
In-Reply-To: <28838293.1155904093901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-460?page=all ]

Doug Cutting updated HADOOP-460:
--------------------------------

    Status: Open  (was: Patch Available)

There are other changes in this patch, seemingly unrelated to the class cast exception.  Are these intentional?  If so, can you describe them?  Thanks!

> Small jobs benchmark fails with current Hadoop due to UTF8 -> Text ClassCastException
> -------------------------------------------------------------------------------------
>
>                 Key: HADOOP-460
>                 URL: http://issues.apache.org/jira/browse/HADOOP-460
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Sanjay Dahiya
>         Attachments: Hadoop-460.patch
>
>
> Small jobs benchmark uses UTF8 as Map input keys, it fails with ClassCastException ( UTF8 / Text ) with the latest trunk. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 19:51:46 2006
Return-Path: 
 <hadoop-dev-return-3369-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39094 invoked from network); 28 Aug 2006 19:51:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 19:51:46 -0000
Received: (qmail 7533 invoked by uid 500); 28 Aug 2006 19:51:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7515 invoked by uid 500); 28 Aug 2006 19:51:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7506 invoked by uid 99); 28 Aug 2006 19:51:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 12:51:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 12:51:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CCC0F7142D9
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 19:48:23 +0000 (GMT)
Message-ID: <16843794.1156794503836.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 12:48:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-406) Tasks launched by tasktracker in
 separate JVM can't generate log output
In-Reply-To: <3656443.1154449453917.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-406?page=comments#action_12431047 ] 
            
Doug Cutting commented on HADOOP-406:
-------------------------------------

The way this is currently supposed to work is that child processes log to standard output, and standard output is logged by the parent process (the task tracker).  Is that not working for you?

Longer-term, we probably do not want child processes opening log files directly.  Rather, they should be configured with a logger that, for each line logged, makes an RPC to the parent process, passing the level and log message.  Then the tasktracker can log things accordingly.


> Tasks launched by tasktracker in separate JVM can't generate log output
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-406
>                 URL: http://issues.apache.org/jira/browse/HADOOP-406
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Chris Schneider
>         Attachments: HADOOP-406.patch
>
>
> Child JVM's don't have access to logging config system properties. When the child JVM gets launched, it doesn't inherit the Java system properties hadoop.log.dir and hadoop.log.file (which are actually based on the Bash environment variables $HADOOP_LOG_DIR and $HADOOP_LOGFILE). This means that you get no log messages from the actual map/reduce tasks that are executing.
> Stefan Groschupf reported this problem a while back:
> -------------------------------------------------------------------------
> To: hadoop-dev@lucene.apache.org
> From: Stefan Groschupf <sg@media-style.com>
> Subject: tasks can't log bug?
> Date: Tue, 25 Jul 2006 19:26:17 -0700
> X-Virus-Checked: Checked by ClamAV on apache.org
> Hi Hadoop developers,
> I'm confused about the way logging works within map or reduce tasks.
> Since tasks are launched in a new JVM  the java system properties "hadoop.log.dir" and "hadoop.log.file" are not passed to the new JVM.
> This prevents the child process from logging properly. In fact you get:
>  java.io.FileNotFoundException: / (Is a directory)
>   at java.io.FileOutputStream.openAppend(Native Method)
>   at java.io.FileOutputStream.<init>(FileOutputStream.java:177)
>   at java.io.FileOutputStream.<init>(FileOutputStream.java:102)
>   at org.apache.log4j.FileAppender.setFile(FileAppender.java:289)
>   at org.apache.log4j.RollingFileAppender.setFile(RollingFileAppender.java:165)
>   at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:163)
>   at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:256)
>   at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:132)
>   at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:96)
>   at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:654)
>   at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:612)
>   at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.j
> 2006-07-25 15:59:07,553 INFO  mapred.TaskTracker (TaskTracker.java:main(993)) - Child
>   at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:415)
>   at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:441)
>   at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:4
>   at org.apache.log4j.LogManager.<clinit>(LogManager.java:122)
>   at org.apache.log4j.Logger.getLogger(Logger.java:104)
>   at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:229)
>   at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:65)
>   at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
>   at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImp
>   at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAcc
>   at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
>   at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529
>   at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235
>   at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)
>   at org.apache.hadoop.mapred.TaskTracker.<clinit>(TaskTracker.java:44)
>   at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:993)
> We see several ways to solve this problem. First retrieve the properties "hadoop.log.dir" and "hadoop.log.file" from the mother JVM and then pass them to the child JVM as within the args parameter.
> Second would be to  access the environment variables "$HADOOP_LOG_DIR" and "$HADOOP_LOGFILE" using System.getEnv (java 1.5).
> Third there would be a more general solution. Taskrunner would resolve any environment variables it found in "mapred.child.java.opts" by lookup the value using System.getEnv().
> Eg:
> unix:
> export MAX_MEMORY = 200
> hadoop-site.xml:
> <name>mapred.child.java.opts</name>
> <value>-Xmx${MAX_MEMORY}</value>

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 20:03:40 2006
Return-Path: 
 <hadoop-dev-return-3370-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43273 invoked from network); 28 Aug 2006 20:03:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 20:03:40 -0000
Received: (qmail 36147 invoked by uid 500); 28 Aug 2006 20:03:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36013 invoked by uid 500); 28 Aug 2006 20:03:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36004 invoked by uid 99); 28 Aug 2006 20:03:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 13:03:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 13:03:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5E6A37142D5
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 20:00:23 +0000 (GMT)
Message-ID: <30673556.1156795223384.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 13:00:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-481) Hadoop mapred metrics should include
 per job input/output statistics rather than per-task statistics
In-Reply-To: <4146022.1156462775151.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-481?page=comments#action_12431048 ] 
            
Doug Cutting commented on HADOOP-481:
-------------------------------------

Instead of passing a long[] you should pass a struct that implements Writable.  Probably TaskMetrics would be a good name for this.

> Hadoop mapred metrics should include per job input/output statistics rather than per-task statistics
> ----------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-481
>                 URL: http://issues.apache.org/jira/browse/HADOOP-481
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred, metrics
>    Affects Versions: 0.6.0
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: reports.patch
>
>
> Currently hadoop reports metrics such as input bytes, input records, etc on per-task basis. Accurate aggregation of these metrics is required at the job-level and reporting should be done on a per-job basis.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 20:07:40 2006
Return-Path: 
 <hadoop-dev-return-3371-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45478 invoked from network); 28 Aug 2006 20:07:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 20:07:40 -0000
Received: (qmail 43332 invoked by uid 500); 28 Aug 2006 20:07:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43317 invoked by uid 500); 28 Aug 2006 20:07:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43307 invoked by uid 99); 28 Aug 2006 20:07:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 13:07:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 13:07:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 56D927142D5
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 20:04:23 +0000 (GMT)
Message-ID: <5669405.1156795463353.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 13:04:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Doug Cutting updated HADOOP-483:
--------------------------------

    Status: Open  (was: Patch Available)

I can't apply this patch:

% patch -p 0 < ~/Desktop/libhdfs.patch
patching file src/c++/libhdfs/Doxyfile
patching file src/c++/libhdfs/Makefile
patching file src/c++/libhdfs/hdfs.h
patching file src/c++/libhdfs/hdfsJniHelper.h
patch: **** malformed patch at line 1704: Index: src/test/org/apache/hadoop/fs/DFSCIOTest.java



> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: libhdfs.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 20:16:50 2006
Return-Path: 
 <hadoop-dev-return-3372-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49708 invoked from network); 28 Aug 2006 20:16:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 20:16:50 -0000
Received: (qmail 64917 invoked by uid 500); 28 Aug 2006 20:16:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64856 invoked by uid 500); 28 Aug 2006 20:16:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64827 invoked by uid 99); 28 Aug 2006 20:16:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 13:16:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 13:16:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 98F9E7142D5
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 20:13:23 +0000 (GMT)
Message-ID: <20060555.1156796003622.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 13:13:23 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-481) Hadoop mapred metrics should include
 per job input/output statistics rather than per-task statistics
In-Reply-To: <4146022.1156462775151.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-481?page=comments#action_12431052 ] 
            
Milind Bhandarkar commented on HADOOP-481:
------------------------------------------

Allright.I will resubmit the patch in a day or two.


> Hadoop mapred metrics should include per job input/output statistics rather than per-task statistics
> ----------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-481
>                 URL: http://issues.apache.org/jira/browse/HADOOP-481
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred, metrics
>    Affects Versions: 0.6.0
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: reports.patch
>
>
> Currently hadoop reports metrics such as input bytes, input records, etc on per-task basis. Accurate aggregation of these metrics is required at the job-level and reporting should be done on a per-job basis.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 20:18:40 2006
Return-Path: 
 <hadoop-dev-return-3373-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50247 invoked from network); 28 Aug 2006 20:18:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 20:18:40 -0000
Received: (qmail 68462 invoked by uid 500); 28 Aug 2006 20:18:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68439 invoked by uid 500); 28 Aug 2006 20:18:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68430 invoked by uid 99); 28 Aug 2006 20:18:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 13:18:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 13:18:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EEE5C7142E6
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 20:15:23 +0000 (GMT)
Message-ID: <23012045.1156796123976.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 13:15:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-419) libdfs doesn't work with application
 threads
In-Reply-To: <7601484.1154547193903.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-419?page=comments#action_12431053 ] 
            
Doug Cutting commented on HADOOP-419:
-------------------------------------

Previously different configurations and threads were permitted to use different classloaders.  After this patch, all use the same classloader.  I'm not sure that's always right.  Ideally, shouldn't Configuration.getResource() and Configuration.getClass("foo.class") be able to refer to configuration-specific resources, like the job jar?


> libdfs doesn't work with application threads
> --------------------------------------------
>
>                 Key: HADOOP-419
>                 URL: http://issues.apache.org/jira/browse/HADOOP-419
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: classloader.patch
>
>
> Using libdfs from C++ using threads I get a null pointer for the ThreadClassLoader, which throws an exception.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 20:26:40 2006
Return-Path: 
 <hadoop-dev-return-3374-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52928 invoked from network); 28 Aug 2006 20:26:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 20:26:40 -0000
Received: (qmail 78425 invoked by uid 500); 28 Aug 2006 20:26:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78403 invoked by uid 500); 28 Aug 2006 20:26:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78394 invoked by uid 99); 28 Aug 2006 20:26:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 13:26:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 13:26:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 421F641000C
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 20:23:23 +0000 (GMT)
Message-ID: <2172974.1156796603268.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 13:23:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-474) support compressed text files as
 input and output
In-Reply-To: <19704285.1156402132980.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-474?page=comments#action_12431056 ] 
            
Doug Cutting commented on HADOOP-474:
-------------------------------------

> We do want the io.compression.codecs so that it is easy to extend the list of potential codecs.

You mean, so that its easy to extend the mapping from file extension to codec, right?  Is there any other reason to enumerate codecs?

> I would think that the SequenceFileOutputFormat should use the same property.

But codec there will be noted inside the file, not in the extension, right?  And compression there can either be value-only or of blocks of keys and values.  So, even if you had a file extension, it wouldn't tell the whole story.  So I don't think the property has anything to do with SequenceFile.  So the property should proabably have 'text' in its name.


> support compressed text files as input and output
> -------------------------------------------------
>
>                 Key: HADOOP-474
>                 URL: http://issues.apache.org/jira/browse/HADOOP-474
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>
> I'd like TextInputFomat and TextOutputFormat to automatically compress and uncompress text files when they are read and written. Furthermore, I'd like to be able to use custom compressors as defined in HADOOP-441. Therefore, I propose:
> Adding a map of compression codecs in the server config files:
> io.compression.codecs = "<suffix>=<codec class>,..."
> so the default would be something like:
> <property>
>   <name>io.compression.codecs</name>
>   <value>.gz=org.apache.hadoop.io.GZipCodec,.Z=org.apache.hadoop.io.ZipCodec</value>
>   <description>A list of file suffixes and the codecs for them.</description>
> </property>
> note that the suffix can include multiple "." so you could support suffixes like ".tar.gz", but they are just treated as literals against the end of the filename.
> If the TextInputFormat is dealing with such a file, it:
>   1. makes a single split
>   2. decompresses automatically
> On the output side, if mapred.output.compress is true, then TextOutputFormat would use a new property mapred.output.compression.codec that would define the codec to use to compress the outputs,  defaulting to gzip. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 20:34:39 2006
Return-Path: 
 <hadoop-dev-return-3375-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56222 invoked from network); 28 Aug 2006 20:34:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 20:34:39 -0000
Received: (qmail 94426 invoked by uid 500); 28 Aug 2006 20:34:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94340 invoked by uid 500); 28 Aug 2006 20:34:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94331 invoked by uid 99); 28 Aug 2006 20:34:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 13:34:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 13:34:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5E3FD7142D4
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 20:31:22 +0000 (GMT)
Message-ID: <12991310.1156797082382.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 13:31:22 -0700 (PDT)
From: "Dick King (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-487) misspelt DFS host name gives null
 pointer exception in getProtocolVersion
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

misspelt DFS host name gives null pointer exception in getProtocolVersion
-------------------------------------------------------------------------

                 Key: HADOOP-487
                 URL: http://issues.apache.org/jira/browse/HADOOP-487
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
    Affects Versions: 0.5.0
            Reporter: Dick King


I'm trying to construct a DistributedFileSystem but I have the wrong hostname.

It doesn't work.  It throws an exception.  Fair enough.  

However, it throws a null pointer exception inside $Proxy0.getProtocolVersion, the code that checks whether we have the right protocol version, rather than giving us any exception we could understand or taking an exception in code to which we have sources so we have a way of understanding the problem.

-dk


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 20:44:43 2006
Return-Path: 
 <hadoop-dev-return-3376-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60616 invoked from network); 28 Aug 2006 20:44:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 20:44:43 -0000
Received: (qmail 9034 invoked by uid 500); 28 Aug 2006 20:44:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9017 invoked by uid 500); 28 Aug 2006 20:44:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8945 invoked by uid 99); 28 Aug 2006 20:44:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 13:44:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 13:44:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2AAD17142D5
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 20:41:24 +0000 (GMT)
Message-ID: <23536975.1156797684168.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 13:41:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-281) dfs.FSDirectory.mkdirs can create
 sub-directories of a file!
In-Reply-To: <19818580.1149635189767.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-281?page=all ]

Doug Cutting updated HADOOP-281:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Wendy!

Ben: yes, it would be a feature, but a feature with many bugs.  There are lots of places in the current API that assume files are distinct from directories.  So, perhaps, in a separate issue, we could discuss adding this as a feature (and how we'd implement it on linux and windows), but, for now, the most consistent thing to do is treat it as a bug.

> dfs.FSDirectory.mkdirs can create sub-directories of a file!
> ------------------------------------------------------------
>
>                 Key: HADOOP-281
>                 URL: http://issues.apache.org/jira/browse/HADOOP-281
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.3.1
>            Reporter: Sameer Paranjpye
>         Assigned To: Wendy Chien
>             Fix For: 0.6.0
>
>         Attachments: addNode.patch, TestDFSMkdirs.java
>
>
> dfs.FSDirectory.mkdirs will merrily adds children to a directory tree node without checking whether it represents a directory. So it is possible to create a subdirectories of a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 20:55:56 2006
Return-Path: 
 <hadoop-dev-return-3377-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64390 invoked from network); 28 Aug 2006 20:55:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 20:55:56 -0000
Received: (qmail 32340 invoked by uid 500); 28 Aug 2006 20:55:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32323 invoked by uid 500); 28 Aug 2006 20:55:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32310 invoked by uid 99); 28 Aug 2006 20:55:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 13:55:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 13:55:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 937337142D9
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 20:52:24 +0000 (GMT)
Message-ID: <5432040.1156798344600.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 13:52:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-366) Should be able to specify more than
 one jar into a JobConf file
In-Reply-To: <32857334.1153138454140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-366?page=comments#action_12431065 ] 
            
Doug Cutting commented on HADOOP-366:
-------------------------------------

The rationale for keeping the config file separate from the jar was that folks might use a single big jar and then submit a sequence of jobs with different parameters, but all of whose code is in the same jar.  The system could be smart about caching the jar on nodes.  Rebuilding a jar for each job submitted seemed heavyweight to me.  In fact, that's what this bug was originally complaining about!

The lib directory is like that in war files.  So it too has a precedent in Java's standards!

> Should be able to specify more than one jar into a JobConf file
> ---------------------------------------------------------------
>
>                 Key: HADOOP-366
>                 URL: http://issues.apache.org/jira/browse/HADOOP-366
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Thomas FRIOL
>
> A job should be able to specify more than one jar file into its JobConf file because sometimes custom Map and Reduce classes or just InputFormat classes uses objects coming from other jar files. For now, we have to build a unique jar to make Hadoop mapreduce operations works.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 21:30:45 2006
Return-Path: 
 <hadoop-dev-return-3378-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81730 invoked from network); 28 Aug 2006 21:30:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 21:30:45 -0000
Received: (qmail 94964 invoked by uid 500); 28 Aug 2006 21:30:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94943 invoked by uid 500); 28 Aug 2006 21:30:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94934 invoked by uid 99); 28 Aug 2006 21:30:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 14:30:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 14:30:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4E45441000E
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 21:27:23 +0000 (GMT)
Message-ID: <16941135.1156800443318.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 14:27:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-486) adding username to jobstatus
In-Reply-To: <28115050.1156790002354.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-486?page=all ]

Doug Cutting updated HADOOP-486:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.6.0
       Resolution: Fixed

I just committed this.  Thanks, Mahadev.

> adding username to jobstatus
> ----------------------------
>
>                 Key: HADOOP-486
>                 URL: http://issues.apache.org/jira/browse/HADOOP-486
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: username.patch
>
>
> Adding a new field to jobstatus that has the username, so that remotely doing jobclient.jobsToComplete() has the username with the jobstatuses.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 21:38:40 2006
Return-Path: 
 <hadoop-dev-return-3379-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84212 invoked from network); 28 Aug 2006 21:38:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 21:38:40 -0000
Received: (qmail 3271 invoked by uid 500); 28 Aug 2006 21:38:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3099 invoked by uid 500); 28 Aug 2006 21:38:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3090 invoked by uid 99); 28 Aug 2006 21:38:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 14:38:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 14:38:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5F2FA41000E
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 21:35:23 +0000 (GMT)
Message-ID: <24382556.1156800923387.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 14:35:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-437) support gzip input files
In-Reply-To: <13165391.1155165613904.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-437?page=all ]

Doug Cutting resolved HADOOP-437.
---------------------------------

    Fix Version/s: 0.6.0
       Resolution: Fixed

I just committed this.  Thanks, Michel!

> support gzip input files
> ------------------------
>
>                 Key: HADOOP-437
>                 URL: http://issues.apache.org/jira/browse/HADOOP-437
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: Michel Tourn
>             Fix For: 0.6.0
>
>         Attachments: streaming.gzip1.patch
>
>
> To specify that line-oriented input is in gzip format:
>    -jobconf stream.recordreader.compression=gzip
> Effect: 
> 1. FileSplit are forced to be whole files
> 2. A GZIPInputStream filter is applied in the RecordReader

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 21:42:46 2006
Return-Path: 
 <hadoop-dev-return-3380-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87180 invoked from network); 28 Aug 2006 21:42:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 21:42:46 -0000
Received: (qmail 11532 invoked by uid 500); 28 Aug 2006 21:42:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11355 invoked by uid 500); 28 Aug 2006 21:42:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11346 invoked by uid 99); 28 Aug 2006 21:42:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 14:42:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 14:42:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C2EFF410011
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 21:39:23 +0000 (GMT)
Message-ID: <17002605.1156801163795.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 14:39:23 -0700 (PDT)
From: "Doug Cook (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-406) Tasks launched by tasktracker in
 separate JVM can't generate log output
In-Reply-To: <3656443.1154449453917.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-406?page=comments#action_12431080 ] 
            
Doug Cook commented on HADOOP-406:
----------------------------------

Hi, Doug.

The task trackers were definitely not logging the fetcher output until I applied and enabled this patch. Perhaps there is another bug, or something I simply misconfigured (I am rather new at this). I am running on a single MP machine; don't know if that makes any difference.

As I said, I'm agnostic about the solution, but given discussions about this on the Nutch forum,  there seem to be others who see the same problem.


> Tasks launched by tasktracker in separate JVM can't generate log output
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-406
>                 URL: http://issues.apache.org/jira/browse/HADOOP-406
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Chris Schneider
>         Attachments: HADOOP-406.patch
>
>
> Child JVM's don't have access to logging config system properties. When the child JVM gets launched, it doesn't inherit the Java system properties hadoop.log.dir and hadoop.log.file (which are actually based on the Bash environment variables $HADOOP_LOG_DIR and $HADOOP_LOGFILE). This means that you get no log messages from the actual map/reduce tasks that are executing.
> Stefan Groschupf reported this problem a while back:
> -------------------------------------------------------------------------
> To: hadoop-dev@lucene.apache.org
> From: Stefan Groschupf <sg@media-style.com>
> Subject: tasks can't log bug?
> Date: Tue, 25 Jul 2006 19:26:17 -0700
> X-Virus-Checked: Checked by ClamAV on apache.org
> Hi Hadoop developers,
> I'm confused about the way logging works within map or reduce tasks.
> Since tasks are launched in a new JVM  the java system properties "hadoop.log.dir" and "hadoop.log.file" are not passed to the new JVM.
> This prevents the child process from logging properly. In fact you get:
>  java.io.FileNotFoundException: / (Is a directory)
>   at java.io.FileOutputStream.openAppend(Native Method)
>   at java.io.FileOutputStream.<init>(FileOutputStream.java:177)
>   at java.io.FileOutputStream.<init>(FileOutputStream.java:102)
>   at org.apache.log4j.FileAppender.setFile(FileAppender.java:289)
>   at org.apache.log4j.RollingFileAppender.setFile(RollingFileAppender.java:165)
>   at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:163)
>   at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:256)
>   at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:132)
>   at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:96)
>   at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:654)
>   at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:612)
>   at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.j
> 2006-07-25 15:59:07,553 INFO  mapred.TaskTracker (TaskTracker.java:main(993)) - Child
>   at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:415)
>   at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:441)
>   at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:4
>   at org.apache.log4j.LogManager.<clinit>(LogManager.java:122)
>   at org.apache.log4j.Logger.getLogger(Logger.java:104)
>   at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:229)
>   at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:65)
>   at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
>   at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImp
>   at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAcc
>   at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
>   at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529
>   at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235
>   at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)
>   at org.apache.hadoop.mapred.TaskTracker.<clinit>(TaskTracker.java:44)
>   at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:993)
> We see several ways to solve this problem. First retrieve the properties "hadoop.log.dir" and "hadoop.log.file" from the mother JVM and then pass them to the child JVM as within the args parameter.
> Second would be to  access the environment variables "$HADOOP_LOG_DIR" and "$HADOOP_LOGFILE" using System.getEnv (java 1.5).
> Third there would be a more general solution. Taskrunner would resolve any environment variables it found in "mapred.child.java.opts" by lookup the value using System.getEnv().
> Eg:
> unix:
> export MAX_MEMORY = 200
> hadoop-site.xml:
> <name>mapred.child.java.opts</name>
> <value>-Xmx${MAX_MEMORY}</value>

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 21:52:56 2006
Return-Path: 
 <hadoop-dev-return-3381-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92287 invoked from network); 28 Aug 2006 21:52:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 21:52:56 -0000
Received: (qmail 27423 invoked by uid 500); 28 Aug 2006 21:52:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27402 invoked by uid 500); 28 Aug 2006 21:52:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27393 invoked by uid 99); 28 Aug 2006 21:52:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 14:52:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 14:52:55 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 67BCB410011
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 21:49:29 +0000 (GMT)
Message-ID: <1701839.1156801769422.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 14:49:29 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-406) Tasks launched by tasktracker in
 separate JVM can't generate log output
In-Reply-To: <3656443.1154449453917.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-406?page=comments#action_12431083 ] 
            
Doug Cutting commented on HADOOP-406:
-------------------------------------

Since I don't see this, it is hard for me to guess what's going on.  Perhaps you can tell more about your installation: OS, JVM, config, etc.  Thanks.

> Tasks launched by tasktracker in separate JVM can't generate log output
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-406
>                 URL: http://issues.apache.org/jira/browse/HADOOP-406
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Chris Schneider
>         Attachments: HADOOP-406.patch
>
>
> Child JVM's don't have access to logging config system properties. When the child JVM gets launched, it doesn't inherit the Java system properties hadoop.log.dir and hadoop.log.file (which are actually based on the Bash environment variables $HADOOP_LOG_DIR and $HADOOP_LOGFILE). This means that you get no log messages from the actual map/reduce tasks that are executing.
> Stefan Groschupf reported this problem a while back:
> -------------------------------------------------------------------------
> To: hadoop-dev@lucene.apache.org
> From: Stefan Groschupf <sg@media-style.com>
> Subject: tasks can't log bug?
> Date: Tue, 25 Jul 2006 19:26:17 -0700
> X-Virus-Checked: Checked by ClamAV on apache.org
> Hi Hadoop developers,
> I'm confused about the way logging works within map or reduce tasks.
> Since tasks are launched in a new JVM  the java system properties "hadoop.log.dir" and "hadoop.log.file" are not passed to the new JVM.
> This prevents the child process from logging properly. In fact you get:
>  java.io.FileNotFoundException: / (Is a directory)
>   at java.io.FileOutputStream.openAppend(Native Method)
>   at java.io.FileOutputStream.<init>(FileOutputStream.java:177)
>   at java.io.FileOutputStream.<init>(FileOutputStream.java:102)
>   at org.apache.log4j.FileAppender.setFile(FileAppender.java:289)
>   at org.apache.log4j.RollingFileAppender.setFile(RollingFileAppender.java:165)
>   at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:163)
>   at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:256)
>   at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:132)
>   at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:96)
>   at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:654)
>   at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:612)
>   at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.j
> 2006-07-25 15:59:07,553 INFO  mapred.TaskTracker (TaskTracker.java:main(993)) - Child
>   at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:415)
>   at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:441)
>   at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:4
>   at org.apache.log4j.LogManager.<clinit>(LogManager.java:122)
>   at org.apache.log4j.Logger.getLogger(Logger.java:104)
>   at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:229)
>   at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:65)
>   at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
>   at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImp
>   at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAcc
>   at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
>   at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529
>   at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235
>   at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)
>   at org.apache.hadoop.mapred.TaskTracker.<clinit>(TaskTracker.java:44)
>   at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:993)
> We see several ways to solve this problem. First retrieve the properties "hadoop.log.dir" and "hadoop.log.file" from the mother JVM and then pass them to the child JVM as within the args parameter.
> Second would be to  access the environment variables "$HADOOP_LOG_DIR" and "$HADOOP_LOGFILE" using System.getEnv (java 1.5).
> Third there would be a more general solution. Taskrunner would resolve any environment variables it found in "mapred.child.java.opts" by lookup the value using System.getEnv().
> Eg:
> unix:
> export MAX_MEMORY = 200
> hadoop-site.xml:
> <name>mapred.child.java.opts</name>
> <value>-Xmx${MAX_MEMORY}</value>

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 22:02:52 2006
Return-Path: 
 <hadoop-dev-return-3382-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95583 invoked from network); 28 Aug 2006 22:02:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 22:02:52 -0000
Received: (qmail 42611 invoked by uid 500); 28 Aug 2006 22:02:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42596 invoked by uid 500); 28 Aug 2006 22:02:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42579 invoked by uid 99); 28 Aug 2006 22:02:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 15:02:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 15:02:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4F59541000E
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 21:59:23 +0000 (GMT)
Message-ID: <8299188.1156802363322.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 14:59:23 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-463) variable expansion in Configuration
In-Reply-To: <14071210.1155938956022.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-463?page=all ]

Michel Tourn updated HADOOP-463:
--------------------------------

    Attachment: confvar.patch

The patch implements the variable expansion described in this issue.
There is also a junit test.

On my shared client machine I use it like this.
(${user.name} expands to the System property "michel")

<property>
  <name>tmp.base</name>
  <value>/tmp/${user.name}</value>
</property>

<property>
  <name>dfs.name.dir</name>
  <value>${tmp.base}/hadoop/dfs/name</value>
</property>

etc.

> variable expansion in Configuration
> -----------------------------------
>
>                 Key: HADOOP-463
>                 URL: http://issues.apache.org/jira/browse/HADOOP-463
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>            Reporter: Michel Tourn
>         Attachments: confvar.patch
>
>
> Add variable expansion to Configuration class.
> =================
> This is necessary for shared, client-side configurations:
> A Job submitter (an HDFS client) requires:
> <name>dfs.data.dir</name><value>/tmp/${user.name}/dfs</value>
> A local-mode mapreduce requires:
> <name>mapred.temp.dir</name><value>/tmp/${user.name}/mapred/tmp</value>
> Why this is necessary :
> =================
> Currently we use shared directories like:
> <name>dfs.data.dir</name><value>/tmp/dfs</value>
> This superficially seems to work.
> After all, different JVM clients create their own private subdirectory map_xxxx., so they will not conflict.
> What really happens:
> 1. /tmp/ is world-writable, as it's supposed to.
> 2. Hadoop will create missing subdirectories. 
> This is Java so that for ex. /tmp/system is created as writable only by the JVM process user
> 3. This is a shared client machine so next user's JVM will find /tmp/system owned by somebody else. Creating a directory within /tmp/system fails
> Implementation of var expansion
> =============
> in class Configuration, 
> The Properties really store things like put("banner", "hello ${user.name}");
> In public String get(String name): postprocess the returned value:
> Use a regexp to find the pattern ${xxxx}
> Lookup xxxx as a system property
> If found, replace ${xxxx} by the system property value.
> Else leave as-is. An unexpanded ${xxxx} is a hint that the variable name is invalid.
> Other workarounds 
> ===============
> The other proposed workarounds are not as elegant as variable expansion.
> Workaround 1: 
> have an installation script which does:
> mkdir /tmp/dfs
> chmod uga+rw /tmp/dfs
> repeat for ALL configured subdirectories at ANY nesting level
> keep the script in sync with changes to hadoop XML configuration files.
> Support the script on non-Unix platform
> Make sure the installtion script runs before Hadoop runs for the first time.
> If users change the permissions/delete any of the shared directories, it breaks again.
> Workaround 2: 
> do the chmod operations from within the Hadoop code.
> In pure java 1.4, 1.5 this is not possible.
> It requires the Hadoop client process to have chmod privilege (rather than just mkdir privilege)
> It requires to special-case directory creation code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Aug 28 22:50:02 2006
Return-Path: 
 <hadoop-dev-return-3383-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9032 invoked from network); 28 Aug 2006 22:50:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 22:50:02 -0000
Received: (qmail 11698 invoked by uid 500); 28 Aug 2006 22:50:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11617 invoked by uid 500); 28 Aug 2006 22:50:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11575 invoked by uid 99); 28 Aug 2006 22:50:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 15:50:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 15:49:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 669307142A1
	for <hadoop-dev@lucene.apache.org>; Mon, 28 Aug 2006 22:46:23 +0000 (GMT)
Message-ID: <3876662.1156805183417.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 15:46:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-463) variable expansion in Configuration
In-Reply-To: <14071210.1155938956022.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-463?page=all ]

Doug Cutting resolved HADOOP-463.
---------------------------------

    Fix Version/s: 0.6.0
       Resolution: Fixed

I just committed this.  I also changed hadoop-default.xml to use this so that temporary directories now contain the user's name.  Thanks, Michel!

> variable expansion in Configuration
> -----------------------------------
>
>                 Key: HADOOP-463
>                 URL: http://issues.apache.org/jira/browse/HADOOP-463
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>            Reporter: Michel Tourn
>             Fix For: 0.6.0
>
>         Attachments: confvar.patch
>
>
> Add variable expansion to Configuration class.
> =================
> This is necessary for shared, client-side configurations:
> A Job submitter (an HDFS client) requires:
> <name>dfs.data.dir</name><value>/tmp/${user.name}/dfs</value>
> A local-mode mapreduce requires:
> <name>mapred.temp.dir</name><value>/tmp/${user.name}/mapred/tmp</value>
> Why this is necessary :
> =================
> Currently we use shared directories like:
> <name>dfs.data.dir</name><value>/tmp/dfs</value>
> This superficially seems to work.
> After all, different JVM clients create their own private subdirectory map_xxxx., so they will not conflict.
> What really happens:
> 1. /tmp/ is world-writable, as it's supposed to.
> 2. Hadoop will create missing subdirectories. 
> This is Java so that for ex. /tmp/system is created as writable only by the JVM process user
> 3. This is a shared client machine so next user's JVM will find /tmp/system owned by somebody else. Creating a directory within /tmp/system fails
> Implementation of var expansion
> =============
> in class Configuration, 
> The Properties really store things like put("banner", "hello ${user.name}");
> In public String get(String name): postprocess the returned value:
> Use a regexp to find the pattern ${xxxx}
> Lookup xxxx as a system property
> If found, replace ${xxxx} by the system property value.
> Else leave as-is. An unexpanded ${xxxx} is a hint that the variable name is invalid.
> Other workarounds 
> ===============
> The other proposed workarounds are not as elegant as variable expansion.
> Workaround 1: 
> have an installation script which does:
> mkdir /tmp/dfs
> chmod uga+rw /tmp/dfs
> repeat for ALL configured subdirectories at ANY nesting level
> keep the script in sync with changes to hadoop XML configuration files.
> Support the script on non-Unix platform
> Make sure the installtion script runs before Hadoop runs for the first time.
> If users change the permissions/delete any of the shared directories, it breaks again.
> Workaround 2: 
> do the chmod operations from within the Hadoop code.
> In pure java 1.4, 1.5 this is not possible.
> It requires the Hadoop client process to have chmod privilege (rather than just mkdir privilege)
> It requires to special-case directory creation code.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 02:05:40 2006
Return-Path: 
 <hadoop-dev-return-3384-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74174 invoked from network); 29 Aug 2006 02:05:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 02:05:40 -0000
Received: (qmail 76077 invoked by uid 500); 29 Aug 2006 02:05:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75899 invoked by uid 500); 29 Aug 2006 02:05:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75890 invoked by uid 99); 29 Aug 2006 02:05:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 19:05:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 19:05:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 643E941000E
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 02:02:23 +0000 (GMT)
Message-ID: <3789771.1156816943408.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 19:02:23 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Arun C Murthy updated HADOOP-483:
---------------------------------

    Attachment: libhdfs.second.patch

Sorry about that one Doug, could you please apply the new patch?

Thanks!

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: libhdfs.patch, libhdfs.second.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 02:07:50 2006
Return-Path: 
 <hadoop-dev-return-3386-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74798 invoked from network); 29 Aug 2006 02:07:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 02:07:50 -0000
Received: (qmail 77693 invoked by uid 500); 29 Aug 2006 02:07:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77666 invoked by uid 500); 29 Aug 2006 02:07:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77657 invoked by uid 99); 29 Aug 2006 02:07:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 19:07:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 19:07:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6501F41000C
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 02:04:23 +0000 (GMT)
Message-ID: <9769995.1156817063411.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 19:04:23 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Arun C Murthy updated HADOOP-483:
---------------------------------

    Status: Patch Available  (was: Open)

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: libhdfs.patch, libhdfs.second.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 02:07:49 2006
Return-Path: 
 <hadoop-dev-return-3385-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74659 invoked from network); 29 Aug 2006 02:07:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 02:07:49 -0000
Received: (qmail 77600 invoked by uid 500); 29 Aug 2006 02:07:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77456 invoked by uid 500); 29 Aug 2006 02:07:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77446 invoked by uid 99); 29 Aug 2006 02:07:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 19:07:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 19:07:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 891A841000E
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 02:04:24 +0000 (GMT)
Message-ID: <12376208.1156817064558.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 19:04:24 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Arun C Murthy updated HADOOP-483:
---------------------------------

    Status: Open  (was: Patch Available)

Oops, let me take a second look.

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: libhdfs.patch, libhdfs.second.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 04:08:41 2006
Return-Path: 
 <hadoop-dev-return-3387-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8600 invoked from network); 29 Aug 2006 04:08:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 04:08:41 -0000
Received: (qmail 97107 invoked by uid 500); 29 Aug 2006 04:08:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97081 invoked by uid 500); 29 Aug 2006 04:08:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97072 invoked by uid 99); 29 Aug 2006 04:08:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 21:08:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 21:08:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C3A187142D4
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 04:05:23 +0000 (GMT)
Message-ID: <10094506.1156824323798.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 21:05:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-419) libdfs doesn't work with application
 threads
In-Reply-To: <7601484.1154547193903.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-419?page=all ]

Owen O'Malley updated HADOOP-419:
---------------------------------

    Attachment: classloader-2.patch

ok, after chatting with doug, here is a different version.

It leaves the class loader in the Configuration, but it exposes a getClassByName method that allows a class lookup by class name rather than by attribute name.

If the thread does not have a class loader, it will use the default, which fixes the precise bug that Christian was hitting.

It also pulls all of the other places that were using the thread's class loader to find classes into the same code, based on the config. Note that some of the writeObject methods needed to have their signatures changed to pass in the config object so that it was clear what class loader should be used.


> libdfs doesn't work with application threads
> --------------------------------------------
>
>                 Key: HADOOP-419
>                 URL: http://issues.apache.org/jira/browse/HADOOP-419
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: classloader-2.patch, classloader.patch
>
>
> Using libdfs from C++ using threads I get a null pointer for the ThreadClassLoader, which throws an exception.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 04:27:00 2006
Return-Path: 
 <hadoop-dev-return-3388-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11855 invoked from network); 29 Aug 2006 04:27:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 04:27:00 -0000
Received: (qmail 9043 invoked by uid 500); 29 Aug 2006 04:26:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9016 invoked by uid 500); 29 Aug 2006 04:26:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9007 invoked by uid 99); 29 Aug 2006 04:26:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 21:26:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 21:26:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4D93741000C
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 04:23:23 +0000 (GMT)
Message-ID: <24797915.1156825403315.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 21:23:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-477) Streaming should execute Unix
 commands and scripts in well known languages without user specifying the
 path
In-Reply-To: <556122.1156462753408.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-477?page=comments#action_12431134 ] 
            
Owen O'Malley commented on HADOOP-477:
--------------------------------------

The simplest way to fix this is to make sure that the environment PATH, etc. of the account that starts the TaskTrackers is reasonable on each of the nodes.

A slightly more involved fix would be to create a config variable in the TaskTracker's config that specifies the PATH for the Tasks and have the TaskTracker set it on the child process. But that leads to a fairly slippery slope of throwing more and more process environment into the config.

> Streaming should execute Unix commands and scripts in well known languages without user specifying the path
> -----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-477
>                 URL: http://issues.apache.org/jira/browse/HADOOP-477
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>
> If the executables for -mapper or -reducer are well-known (grep, cat, awk), Streaming should make sure that the executable is found.
> If a script  for -mapper or -reducer are in a well-known language (.pl, .py), Streaming should  execute it  with the correct language processor.
> Reason:
> many jobs get started from machines with a different environment from that on the cluster.  
> On another hand, different clusters may have different environments.  
> Also, a user may have no access to the cluster machines.
> Because of this, a user may be unable to specify correct paths for standard commands, and correct language processors for scripts.
> Implementation:
> Stream may tailr the commands by prepending the path, or the name of language processor.  
> Another solution is to make sure that the commands are executed in a "meaningful" environment (with good $PATH, and other variables Unix users are accustomed to count upon).
> Once again, Streaming is user facing tool -- it is not a library or a hackable example that the users are to modify for their needs.  So it should work out of the box.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 04:35:20 2006
Return-Path: 
 <hadoop-dev-return-3389-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14144 invoked from network); 29 Aug 2006 04:35:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 04:35:20 -0000
Received: (qmail 15473 invoked by uid 500); 29 Aug 2006 04:35:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15301 invoked by uid 500); 29 Aug 2006 04:35:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15292 invoked by uid 99); 29 Aug 2006 04:35:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 21:35:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 21:35:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4EC0F7142D3
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 04:31:23 +0000 (GMT)
Message-ID: <31566702.1156825883320.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 21:31:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-477) Streaming should execute Unix
 commands and scripts in well known languages without user specifying the
 path
In-Reply-To: <556122.1156462753408.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-477?page=comments#action_12431136 ] 
            
Owen O'Malley commented on HADOOP-477:
--------------------------------------

I should mention that there is a "standard" trick for scripts where you can't assume that the tool is in the same location on all machines where the script will run. Namely,

#!/usr/bin/env python
<... python script ...>

because the env command is always in /usr/bin and it will search the path for the command to run (in this case python). I just used python as an example, but this works for any scripting language.

> Streaming should execute Unix commands and scripts in well known languages without user specifying the path
> -----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-477
>                 URL: http://issues.apache.org/jira/browse/HADOOP-477
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>
> If the executables for -mapper or -reducer are well-known (grep, cat, awk), Streaming should make sure that the executable is found.
> If a script  for -mapper or -reducer are in a well-known language (.pl, .py), Streaming should  execute it  with the correct language processor.
> Reason:
> many jobs get started from machines with a different environment from that on the cluster.  
> On another hand, different clusters may have different environments.  
> Also, a user may have no access to the cluster machines.
> Because of this, a user may be unable to specify correct paths for standard commands, and correct language processors for scripts.
> Implementation:
> Stream may tailr the commands by prepending the path, or the name of language processor.  
> Another solution is to make sure that the commands are executed in a "meaningful" environment (with good $PATH, and other variables Unix users are accustomed to count upon).
> Once again, Streaming is user facing tool -- it is not a library or a hackable example that the users are to modify for their needs.  So it should work out of the box.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 04:49:18 2006
Return-Path: 
 <hadoop-dev-return-3390-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17441 invoked from network); 29 Aug 2006 04:49:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 04:49:18 -0000
Received: (qmail 26888 invoked by uid 500); 29 Aug 2006 04:49:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26853 invoked by uid 500); 29 Aug 2006 04:49:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26844 invoked by uid 99); 29 Aug 2006 04:49:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 21:49:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 21:49:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D34B47142D4
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 04:45:24 +0000 (GMT)
Message-ID: <13115548.1156826724839.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 21:45:24 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-484) Additional splilts for last reduces?
In-Reply-To: <6897392.1156555762361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-484?page=all ]

Owen O'Malley resolved HADOOP-484.
----------------------------------

    Resolution: Duplicate

Splitting a reduce would be difficult and error-prone while it was in progress. The standard approach for this problem is to use speculative execution to shorten the tail. It seems to be very effective.

> Additional splilts for last reduces?
> ------------------------------------
>
>                 Key: HADOOP-484
>                 URL: http://issues.apache.org/jira/browse/HADOOP-484
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: arkady borkovsky
>
> Often last few reduces take very long.  
> Would it make sense, if hardware is available, to resplit their inputs into smaller chunks and to run multiple task instead?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 06:52:08 2006
Return-Path: 
 <hadoop-dev-return-3391-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53468 invoked from network); 29 Aug 2006 06:52:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 06:52:08 -0000
Received: (qmail 39040 invoked by uid 500); 29 Aug 2006 06:52:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38859 invoked by uid 500); 29 Aug 2006 06:52:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38837 invoked by uid 99); 29 Aug 2006 06:52:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 23:52:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 23:52:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 87B327142D3
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 06:48:23 +0000 (GMT)
Message-ID: <4267058.1156834103553.JavaMail.jira@brutus>
Date: Mon, 28 Aug 2006 23:48:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-441?page=all ]

Owen O'Malley updated HADOOP-441:
---------------------------------

    Attachment: codec.patch

This patch is just the codec interfaces that are shared between this issue and HADOOP-474. It basically creates an interface for compression codecs that can create input and output streams. The output stream extends DataOutputStream, so that it can be used for Writable. The input stream just extends the FilteredInputStream because DataInputStream declares read(byte[], int, int) to be final.

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: codec.patch
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 08:24:49 2006
Return-Path: 
 <hadoop-dev-return-3392-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85719 invoked from network); 29 Aug 2006 08:24:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 08:24:49 -0000
Received: (qmail 58180 invoked by uid 500); 29 Aug 2006 08:24:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57110 invoked by uid 500); 29 Aug 2006 08:24:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57094 invoked by uid 99); 29 Aug 2006 08:24:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 01:24:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 01:24:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4C8DF41000E
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 08:21:23 +0000 (GMT)
Message-ID: <19777886.1156839683310.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 01:21:23 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-460) Small jobs benchmark fails with
 current Hadoop due to UTF8 -> Text ClassCastException
In-Reply-To: <28838293.1155904093901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-460?page=comments#action_12431165 ] 
            
Sanjay Dahiya commented on HADOOP-460:
--------------------------------------

There are 2 trivial changes in addition to Class case exception. 
- Removed JAVA_HOME check from run.sh as the script doesnt need it anymore. 
- Changed default input to ASCENDING from RANDOM, its only useful when outout needs to be compared against the input ( in case of single reduce) , its irrelevant for normal runs. 

Sorry about not describing these earlier. 

> Small jobs benchmark fails with current Hadoop due to UTF8 -> Text ClassCastException
> -------------------------------------------------------------------------------------
>
>                 Key: HADOOP-460
>                 URL: http://issues.apache.org/jira/browse/HADOOP-460
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Sanjay Dahiya
>         Attachments: Hadoop-460.patch
>
>
> Small jobs benchmark uses UTF8 as Map input keys, it fails with ClassCastException ( UTF8 / Text ) with the latest trunk. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 08:31:42 2006
Return-Path: 
 <hadoop-dev-return-3393-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88633 invoked from network); 29 Aug 2006 08:31:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 08:31:42 -0000
Received: (qmail 70912 invoked by uid 500); 29 Aug 2006 08:31:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70884 invoked by uid 500); 29 Aug 2006 08:31:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70875 invoked by uid 99); 29 Aug 2006 08:31:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 01:31:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 01:31:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B96B41000E
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 08:28:23 +0000 (GMT)
Message-ID: <25649514.1156840103307.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 01:28:23 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Arun C Murthy updated HADOOP-483:
---------------------------------

    Attachment: HADOOP-483.patch

Doug - Here's the patch... thanks!

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-483.patch, libhdfs.patch, libhdfs.second.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 08:31:43 2006
Return-Path: 
 <hadoop-dev-return-3394-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88639 invoked from network); 29 Aug 2006 08:31:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 08:31:43 -0000
Received: (qmail 71111 invoked by uid 500); 29 Aug 2006 08:31:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71087 invoked by uid 500); 29 Aug 2006 08:31:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71078 invoked by uid 99); 29 Aug 2006 08:31:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 01:31:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 01:31:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5A9B0410017
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 08:28:24 +0000 (GMT)
Message-ID: <11356066.1156840104368.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 01:28:24 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Arun C Murthy updated HADOOP-483:
---------------------------------

    Status: Patch Available  (was: Open)

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-483.patch, libhdfs.patch, libhdfs.second.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 10:58:49 2006
Return-Path: 
 <hadoop-dev-return-3395-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38479 invoked from network); 29 Aug 2006 10:58:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 10:58:49 -0000
Received: (qmail 82589 invoked by uid 500); 29 Aug 2006 10:58:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82570 invoked by uid 500); 29 Aug 2006 10:58:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82546 invoked by uid 99); 29 Aug 2006 10:58:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 03:58:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 03:58:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 186CF7142D4
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 10:55:23 +0000 (GMT)
Message-ID: <5191555.1156848923096.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 03:55:23 -0700 (PDT)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-488) Change ToolBase.doMain() to return a
 status code
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Change ToolBase.doMain() to return a status code
------------------------------------------------

                 Key: HADOOP-488
                 URL: http://issues.apache.org/jira/browse/HADOOP-488
             Project: Hadoop
          Issue Type: Improvement
    Affects Versions: 0.6.0
            Reporter: Andrzej Bialecki 
             Fix For: 0.6.0


I propose to change the signature of ToolBase.doMain from this:

    public final void doMain(Configuration conf, String[] args) throws Exception;

to this:

    public final int doMain(Configuration conf, String[] args) throws Exception;

and then change main() methods of all classes that use ToolBase.doMain to call System.exit(code), where "code" is this return value from doMain(). All command-line tools, which still call main() methods of other tools, should be converted to use doMain() and return exit codes properly.

The main reason for this change is that returning varying exit codes is required for proper operation of shell scripts, especially differing between code == 0 (normal exit) and code != 0 (error exit).

Additionally, current implementation of doMain() already gets the return code, it just silently discards it (ToolBase.java:184).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 14:15:42 2006
Return-Path: 
 <hadoop-dev-return-3396-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32234 invoked from network); 29 Aug 2006 14:15:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 14:15:42 -0000
Received: (qmail 31463 invoked by uid 500); 29 Aug 2006 14:15:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31428 invoked by uid 500); 29 Aug 2006 14:15:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31419 invoked by uid 99); 29 Aug 2006 14:15:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 07:15:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 07:15:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6E24841000E
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 14:12:23 +0000 (GMT)
Message-ID: <14759889.1156860743448.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 07:12:23 -0700 (PDT)
From: "Sami Siren (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-488) Change ToolBase.doMain() to return a
 status code
In-Reply-To: <5191555.1156848923096.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-488?page=comments#action_12431245 ] 
            
Sami Siren commented on HADOOP-488:
-----------------------------------

+1

> Change ToolBase.doMain() to return a status code
> ------------------------------------------------
>
>                 Key: HADOOP-488
>                 URL: http://issues.apache.org/jira/browse/HADOOP-488
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.0
>            Reporter: Andrzej Bialecki 
>             Fix For: 0.6.0
>
>
> I propose to change the signature of ToolBase.doMain from this:
>     public final void doMain(Configuration conf, String[] args) throws Exception;
> to this:
>     public final int doMain(Configuration conf, String[] args) throws Exception;
> and then change main() methods of all classes that use ToolBase.doMain to call System.exit(code), where "code" is this return value from doMain(). All command-line tools, which still call main() methods of other tools, should be converted to use doMain() and return exit codes properly.
> The main reason for this change is that returning varying exit codes is required for proper operation of shell scripts, especially differing between code == 0 (normal exit) and code != 0 (error exit).
> Additionally, current implementation of doMain() already gets the return code, it just silently discards it (ToolBase.java:184).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 16:19:47 2006
Return-Path: 
 <hadoop-dev-return-3397-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80270 invoked from network); 29 Aug 2006 16:19:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 16:19:47 -0000
Received: (qmail 98174 invoked by uid 500); 29 Aug 2006 16:19:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98001 invoked by uid 500); 29 Aug 2006 16:19:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97992 invoked by uid 99); 29 Aug 2006 16:19:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 09:19:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 09:19:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 612F47142D5
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 16:16:23 +0000 (GMT)
Message-ID: <21348289.1156868183394.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 09:16:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-488) Change ToolBase.doMain() to return a
 status code
In-Reply-To: <5191555.1156848923096.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-488?page=comments#action_12431285 ] 
            
Owen O'Malley commented on HADOOP-488:
--------------------------------------

It used to do this and the problem is that calling System.exit is very problematic for multi-threaded code.

In particular, what was happening was the "main" procedure (and therefore thread) finished and the ToolBase called System.exit. But there were still threads that had work left to do and they were killed mid-action.

System.exit is very dangerous in multi-threaded code and calling it in a framework class is usually a bad diea.

> Change ToolBase.doMain() to return a status code
> ------------------------------------------------
>
>                 Key: HADOOP-488
>                 URL: http://issues.apache.org/jira/browse/HADOOP-488
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.0
>            Reporter: Andrzej Bialecki 
>             Fix For: 0.6.0
>
>
> I propose to change the signature of ToolBase.doMain from this:
>     public final void doMain(Configuration conf, String[] args) throws Exception;
> to this:
>     public final int doMain(Configuration conf, String[] args) throws Exception;
> and then change main() methods of all classes that use ToolBase.doMain to call System.exit(code), where "code" is this return value from doMain(). All command-line tools, which still call main() methods of other tools, should be converted to use doMain() and return exit codes properly.
> The main reason for this change is that returning varying exit codes is required for proper operation of shell scripts, especially differing between code == 0 (normal exit) and code != 0 (error exit).
> Additionally, current implementation of doMain() already gets the return code, it just silently discards it (ToolBase.java:184).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 16:43:42 2006
Return-Path: 
 <hadoop-dev-return-3398-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85182 invoked from network); 29 Aug 2006 16:43:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 16:43:42 -0000
Received: (qmail 33595 invoked by uid 500); 29 Aug 2006 16:43:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33576 invoked by uid 500); 29 Aug 2006 16:43:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33567 invoked by uid 99); 29 Aug 2006 16:43:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 09:43:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 09:43:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5E8F67142D5
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 16:40:23 +0000 (GMT)
Message-ID: <12874834.1156869623384.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 09:40:23 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-488) Change ToolBase.doMain() to return a
 status code
In-Reply-To: <5191555.1156848923096.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-488?page=comments#action_12431289 ] 
            
Michel Tourn commented on HADOOP-488:
-------------------------------------

System.exit is also bad bec. it is "non-composable": 
it gets in the way of  tools that try to run other tools in the same JVM (like ant and junit and pot. TaskRunner)

However this proposal is not about using System.exit more than before. It is about exposing additional information, should you choose to use System.exit.

Usage as before: 

use doMain() from other Java code, like integration tests. This does not call System.exit()

use main() from a top-level application that integrates with shell tools: these tools only understand status codes, not Java exceptions. This calls System.exit()

Now in both cases, the caller has access to the status code.

+1







> Change ToolBase.doMain() to return a status code
> ------------------------------------------------
>
>                 Key: HADOOP-488
>                 URL: http://issues.apache.org/jira/browse/HADOOP-488
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.0
>            Reporter: Andrzej Bialecki 
>             Fix For: 0.6.0
>
>
> I propose to change the signature of ToolBase.doMain from this:
>     public final void doMain(Configuration conf, String[] args) throws Exception;
> to this:
>     public final int doMain(Configuration conf, String[] args) throws Exception;
> and then change main() methods of all classes that use ToolBase.doMain to call System.exit(code), where "code" is this return value from doMain(). All command-line tools, which still call main() methods of other tools, should be converted to use doMain() and return exit codes properly.
> The main reason for this change is that returning varying exit codes is required for proper operation of shell scripts, especially differing between code == 0 (normal exit) and code != 0 (error exit).
> Additionally, current implementation of doMain() already gets the return code, it just silently discards it (ToolBase.java:184).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 16:48:42 2006
Return-Path: 
 <hadoop-dev-return-3399-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86470 invoked from network); 29 Aug 2006 16:48:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 16:48:42 -0000
Received: (qmail 48058 invoked by uid 500); 29 Aug 2006 16:48:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47908 invoked by uid 500); 29 Aug 2006 16:48:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47899 invoked by uid 99); 29 Aug 2006 16:48:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 09:48:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 09:48:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4021B7142D5
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 16:45:24 +0000 (GMT)
Message-ID: <781141.1156869924258.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 09:45:24 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-441?page=comments#action_12431292 ] 
            
Owen O'Malley commented on HADOOP-441:
--------------------------------------

Ok, we want to change the parent class of CompressOutputStream to be FilteredOutputStream instead of DataOutputStream to be symmetric with the input stream.

We also should add a "finish" method on the output stream to finish the compression without closing the underlying stream.


> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: codec.patch
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 17:22:42 2006
Return-Path: 
 <hadoop-dev-return-3400-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96894 invoked from network); 29 Aug 2006 17:22:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 17:22:42 -0000
Received: (qmail 11778 invoked by uid 500); 29 Aug 2006 17:22:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11756 invoked by uid 500); 29 Aug 2006 17:22:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11746 invoked by uid 99); 29 Aug 2006 17:22:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 10:22:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 10:22:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4D8FB7142D5
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 17:19:23 +0000 (GMT)
Message-ID: <15595694.1156871963315.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 10:19:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-441?page=comments#action_12431296 ] 
            
Doug Cutting commented on HADOOP-441:
-------------------------------------

Overall this looks good.

On CompressionInputStream and CompressionOutputStream, the methods of FilterInputStream and FilterOutputStream should not repeated as abstract method.  That's overly paranoid and clutters the code, making it hard to see how this differs from a normal stream.  These should have only an abstract resetState() method and a ctor.  It seems FilterInputStream isn't buying much, perhaps it would be simpler to extend InputStream and OutputStream directly: that would give you most of what you're trying to defeat in the Filter classes.


> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: codec.patch
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 17:25:42 2006
Return-Path: 
 <hadoop-dev-return-3401-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98105 invoked from network); 29 Aug 2006 17:25:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 17:25:42 -0000
Received: (qmail 15782 invoked by uid 500); 29 Aug 2006 17:25:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15752 invoked by uid 500); 29 Aug 2006 17:25:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15743 invoked by uid 99); 29 Aug 2006 17:25:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 10:25:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 10:25:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7E04C7142D5
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 17:22:23 +0000 (GMT)
Message-ID: <7292937.1156872143513.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 10:22:23 -0700 (PDT)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-488) Change ToolBase.doMain() to return a
 status code
In-Reply-To: <5191555.1156848923096.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-488?page=comments#action_12431297 ] 
            
Andrzej Bialecki  commented on HADOOP-488:
------------------------------------------

Thanks Michael, that was exactly the gist of my proposal; that's why I mentioned that all places which now incorrectly use main() methods should call instead doMain().

If there's a tool that starts worker threads and then completes the main thread, I would advocate that it should explicitly wait in its run(String[]) method until all threads complete, or a timeout occurs.

> Change ToolBase.doMain() to return a status code
> ------------------------------------------------
>
>                 Key: HADOOP-488
>                 URL: http://issues.apache.org/jira/browse/HADOOP-488
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.0
>            Reporter: Andrzej Bialecki 
>             Fix For: 0.6.0
>
>
> I propose to change the signature of ToolBase.doMain from this:
>     public final void doMain(Configuration conf, String[] args) throws Exception;
> to this:
>     public final int doMain(Configuration conf, String[] args) throws Exception;
> and then change main() methods of all classes that use ToolBase.doMain to call System.exit(code), where "code" is this return value from doMain(). All command-line tools, which still call main() methods of other tools, should be converted to use doMain() and return exit codes properly.
> The main reason for this change is that returning varying exit codes is required for proper operation of shell scripts, especially differing between code == 0 (normal exit) and code != 0 (error exit).
> Additionally, current implementation of doMain() already gets the return code, it just silently discards it (ToolBase.java:184).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 17:31:41 2006
Return-Path: 
 <hadoop-dev-return-3402-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99585 invoked from network); 29 Aug 2006 17:31:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 17:31:41 -0000
Received: (qmail 24321 invoked by uid 500); 29 Aug 2006 17:31:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24145 invoked by uid 500); 29 Aug 2006 17:31:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24136 invoked by uid 99); 29 Aug 2006 17:31:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 10:31:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 10:31:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 476DC7142D5
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 17:28:23 +0000 (GMT)
Message-ID: <32736512.1156872503290.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 10:28:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-488) Change ToolBase.doMain() to return a
 status code
In-Reply-To: <5191555.1156848923096.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-488?page=comments#action_12431299 ] 
            
Doug Cutting commented on HADOOP-488:
-------------------------------------

+1

> Change ToolBase.doMain() to return a status code
> ------------------------------------------------
>
>                 Key: HADOOP-488
>                 URL: http://issues.apache.org/jira/browse/HADOOP-488
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.0
>            Reporter: Andrzej Bialecki 
>             Fix For: 0.6.0
>
>
> I propose to change the signature of ToolBase.doMain from this:
>     public final void doMain(Configuration conf, String[] args) throws Exception;
> to this:
>     public final int doMain(Configuration conf, String[] args) throws Exception;
> and then change main() methods of all classes that use ToolBase.doMain to call System.exit(code), where "code" is this return value from doMain(). All command-line tools, which still call main() methods of other tools, should be converted to use doMain() and return exit codes properly.
> The main reason for this change is that returning varying exit codes is required for proper operation of shell scripts, especially differing between code == 0 (normal exit) and code != 0 (error exit).
> Additionally, current implementation of doMain() already gets the return code, it just silently discards it (ToolBase.java:184).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 18:05:44 2006
Return-Path: 
 <hadoop-dev-return-3403-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12101 invoked from network); 29 Aug 2006 18:05:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 18:05:44 -0000
Received: (qmail 83981 invoked by uid 500); 29 Aug 2006 18:05:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83960 invoked by uid 500); 29 Aug 2006 18:05:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83951 invoked by uid 99); 29 Aug 2006 18:05:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:05:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:05:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5C9C87142E6
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 18:02:23 +0000 (GMT)
Message-ID: <29927443.1156874543376.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 11:02:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-483?page=all ]

Doug Cutting updated HADOOP-483:
--------------------------------

    Status: Open  (was: Patch Available)

When I try 'ant clean test-libhdfs', I get:

test-libhdfs:
     [exec] LD_PRELOAD="/home/cutting/src/hadoop/trunk/build/libhdfs/libhdfs.so" /home/cutting/src/hadoop/trunk/build/libhdfs/hdfs_test
     [exec] Please set the environment variable $CLASSPATH!
     [exec] make: *** [test] Error 255
     [exec] Result: 2

I tried defining CLASSPATH in the test-libhdfs target, but was unable to construct a suitable one.



> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-483.patch, libhdfs.patch, libhdfs.second.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 18:25:55 2006
Return-Path: 
 <hadoop-dev-return-3404-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19072 invoked from network); 29 Aug 2006 18:25:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 18:25:55 -0000
Received: (qmail 21570 invoked by uid 500); 29 Aug 2006 18:25:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21498 invoked by uid 500); 29 Aug 2006 18:25:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21413 invoked by uid 99); 29 Aug 2006 18:25:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:25:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:25:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B6897142D5
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 18:22:24 +0000 (GMT)
Message-ID: <4619602.1156875744306.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 11:22:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-419) libdfs doesn't work with application
 threads
In-Reply-To: <7601484.1154547193903.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-419?page=all ]

Doug Cutting updated HADOOP-419:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  I changed NullWritable to extend Configured instead of implenting Configurable, saving a few lines of code.  Thanks, Owen!

> libdfs doesn't work with application threads
> --------------------------------------------
>
>                 Key: HADOOP-419
>                 URL: http://issues.apache.org/jira/browse/HADOOP-419
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Owen O'Malley
>             Fix For: 0.6.0
>
>         Attachments: classloader-2.patch, classloader.patch
>
>
> Using libdfs from C++ using threads I get a null pointer for the ThreadClassLoader, which throws an exception.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 18:36:50 2006
Return-Path: 
 <hadoop-dev-return-3406-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25073 invoked from network); 29 Aug 2006 18:36:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 18:36:50 -0000
Received: (qmail 38729 invoked by uid 500); 29 Aug 2006 18:36:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38699 invoked by uid 500); 29 Aug 2006 18:36:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38648 invoked by uid 99); 29 Aug 2006 18:36:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:36:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:36:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 846087142E6
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 18:33:23 +0000 (GMT)
Message-ID: <30146384.1156876403539.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 11:33:23 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-489) Seperating user logs from system logs
 in map reduce
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Seperating user logs from system logs in map reduce
---------------------------------------------------

                 Key: HADOOP-489
                 URL: http://issues.apache.org/jira/browse/HADOOP-489
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: Mahadev konar
         Assigned To: Mahadev konar
            Priority: Minor


Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.

I am proposing three solutions to the problem. All of them have issues with it -

Solution 1.
Output the user logs on the user screen as part of the job submission process. 

Merits- 
This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.

Issues - 
This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.

Solution 2.
Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.

Issues -
This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
 
Solution 3.
Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.

Issues-
This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 

Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 18:36:47 2006
Return-Path: 
 <hadoop-dev-return-3405-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25037 invoked from network); 29 Aug 2006 18:36:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 18:36:47 -0000
Received: (qmail 38666 invoked by uid 500); 29 Aug 2006 18:36:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38633 invoked by uid 500); 29 Aug 2006 18:36:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38624 invoked by uid 99); 29 Aug 2006 18:36:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:36:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:36:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 649727142D4
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 18:33:23 +0000 (GMT)
Message-ID: <22287905.1156876403409.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 11:33:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-441?page=comments#action_12431317 ] 
            
Owen O'Malley commented on HADOOP-441:
--------------------------------------

The FilterInputStream & FilterOutputStream are saving a little code since they keep the field and handle flush & close. But it isn't a big deal either way.

And we absolutely need to make the write(byte, int, int) abstract because the implementation in both FilterOutputStream and OutputStream implementations are horrible. (They call write(int) byte by byte for each element of the array.) Remember, this is the bug that was causing Hadoop to buffer up the RPC commands only to send them byte by byte over the wire.

If we use OutputStream then at least write(int) is already abstract, so we don't need to worry about it. But in general, i think that as part of designing these APIs we do need to be very careful about the default implementations of these methods. Making them abstract to hide a problematic implementation is a good thing, in my opinion.

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: codec.patch
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 18:55:42 2006
Return-Path: 
 <hadoop-dev-return-3408-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31078 invoked from network); 29 Aug 2006 18:55:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 18:55:42 -0000
Received: (qmail 83759 invoked by uid 500); 29 Aug 2006 18:55:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83585 invoked by uid 500); 29 Aug 2006 18:55:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83576 invoked by uid 99); 29 Aug 2006 18:55:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:55:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:55:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1CCA77142D5
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 18:52:24 +0000 (GMT)
Message-ID: <18292839.1156877544114.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 11:52:24 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12431321 ] 
            
Owen O'Malley commented on HADOOP-372:
--------------------------------------

Because very few users do anything with MapRunnable, I think we should just make the relevant changes to MapRunner.

Clearly, the name of the class is totally a judgment call. To me, the input "format" is the class of the RecordReader. The scope of this class is naturally much wider.

So in terms of the user interface, I would propose that the default InputMetaFormat asks the job conf for a RecordReader and a Mapper. So, there should be new JobConf methods:

// defaults to TextRecordReader
void setRecordReaderClass(Class);
Class getRecordReaderClass();

is that reasonable?

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 18:53:43 2006
Return-Path: 
 <hadoop-dev-return-3407-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30611 invoked from network); 29 Aug 2006 18:53:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 18:53:43 -0000
Received: (qmail 81825 invoked by uid 500); 29 Aug 2006 18:53:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81808 invoked by uid 500); 29 Aug 2006 18:53:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81799 invoked by uid 99); 29 Aug 2006 18:53:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:53:42 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:53:41 -0700
Received: from finishship-lm.corp.yahoo.com (finishship-lm.corp.yahoo.com
 [172.21.39.56])
	(authenticated bits=0)
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k7TIrFPW001552
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 11:53:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:user-agent:references:in-reply-to:
	mime-version:content-type:content-transfer-encoding:
	content-disposition:message-id;
	b=1vMCzGmhR6ZzcluxO2xX0PljgMbnNTLyyfNxmVh6TereAP9cGR9tA357OPdqjqs4
From: Benjamin Reed <breed@yahoo-inc.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Created: (HADOOP-489) Seperating user logs from system
 logs in map reduce
Date: Tue, 29 Aug 2006 11:53:16 -0700
User-Agent: KMail/1.9.4
References: <30146384.1156876403539.JavaMail.jira@brutus>
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200608291153.16120.breed@yahoo-inc.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I like Solution 3 as long as there was an API to query the logs.

ben

On Tuesday 29 August 2006 11:33, Mahadev konar (JIRA) wrote:
> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                  Key: HADOOP-489
>                  URL: http://issues.apache.org/jira/browse/HADOOP-489
>              Project: Hadoop
>           Issue Type: Improvement
>           Components: mapred
>             Reporter: Mahadev konar
>          Assigned To: Mahadev konar
>             Priority: Minor
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything
> logged by the user is logged into the tasktracker log files. This create
> two issues- 1) The system log files get cluttered with user output. If the
> user outputs a large amount of logs, the system logs need to be cleaned up
> pretty often. 2) For the user, it is difficult to get to each of the
> machines and look for the logs his/her job might have generated.
>
> I am proposing three solutions to the problem. All of them have issues with
> it -
>
> Solution 1.
> Output the user logs on the user screen as part of the job submission
> process.
>
> Merits-
> This will prevent users from printing large amount of logs and the user can
> get runtime feedback on what is wrong with his/her job.
>
> Issues -
> This proposal will use the framework bandwidth while running jobs for the
> user. The user logs will need to pass from the tasks to the tasktrackers,
> from the tasktrackers to the jobtrackers and then from the jobtrackers to
> the jobclient using a lot of framework bandwidth if the user is printing
> out too much data.
>
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files.
> Each task can create a file for the output in the log direcotyr for a given
> user and jobid.
>
> Issues -
> This will create a huge amount of small files in DFS which later can be
> concatenated into a single file. Also there is this issue that who would
> concatenate these files into a single file? This could be done by the
> framework (jobtracker) as part of the cleanup for the jobs - might stress
> the jobtracker.
>
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on
> each tasktrackers. We can provide some tools to query these local log
> files. We could have commands like for jobid j and for taskid t get me the
> user log output. These tools could run as a seperate map reduce program
> with each map grepping the user log files and a single recude aggregating
> these logs in to a single dfs file.
>
> Issues-
> This does sound like more work for the user. Also, the output might not be
> complete since a tasktracker might have went down after it ran the job.
>
> Any thoughts?

From MAILER-DAEMON Tue Aug 29 19:08:47 2006
Return-Path: 
 <hadoop-dev-return-3409-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34008 invoked from network); 29 Aug 2006 19:08:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 19:08:47 -0000
Received: (qmail 9585 invoked by uid 500); 29 Aug 2006 19:08:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9563 invoked by uid 500); 29 Aug 2006 19:08:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9554 invoked by uid 99); 29 Aug 2006 19:08:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:08:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:08:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 033517142D5
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 19:05:24 +0000 (GMT)
Message-ID: <20176276.1156878324010.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 12:05:24 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-441?page=all ]

Arun C Murthy updated HADOOP-441:
---------------------------------

    Attachment: codec_updated_interfaces_20060830.patch

+1 for using abstract methods in Compression{In|Out}putStreams to ensure correct implementations are provided.

Here's an update interface for the streams and codecs...

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: codec.patch, codec_updated_interfaces_20060830.patch
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 19:10:55 2006
Return-Path: 
 <hadoop-dev-return-3410-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34348 invoked from network); 29 Aug 2006 19:10:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 19:10:55 -0000
Received: (qmail 11974 invoked by uid 500); 29 Aug 2006 19:10:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11953 invoked by uid 500); 29 Aug 2006 19:10:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11944 invoked by uid 99); 29 Aug 2006 19:10:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:10:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:10:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 478CF7142D4
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 19:07:23 +0000 (GMT)
Message-ID: <325082.1156878443290.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 12:07:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12431324 ] 
            
Doug Cutting commented on HADOOP-489:
-------------------------------------

I like (3) best.

One can implement the effect of (1) by having client code poll running tasks for new log messages.  We could present logs as feeds via RSS or Atom.

An InputFormat for logs would also be great.  It could take parameters like the username, job name, jobid and task id.  Tasks could be localized to the node where the logs live.

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 19:23:02 2006
Return-Path: 
 <hadoop-dev-return-3411-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37678 invoked from network); 29 Aug 2006 19:23:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 19:23:02 -0000
Received: (qmail 37899 invoked by uid 500); 29 Aug 2006 19:23:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37882 invoked by uid 500); 29 Aug 2006 19:23:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37872 invoked by uid 99); 29 Aug 2006 19:23:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:23:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:23:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CE2E7410025
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 19:19:38 +0000 (GMT)
Message-ID: <30846588.1156879178841.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 12:19:38 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12431327 ] 
            
Michel Tourn commented on HADOOP-489:
-------------------------------------

I don't know what is the best implementation.

But the normal requirements for this info are:

1. Task log data should be made available in real-time. The main point is to debug execution problems at startupt. The point is not to gather after-the-fact throughput metrics on successful jobs.
Example messages we want to see immediately (so we can kill the job):
/usr/custombin/perl : program not found
/usr/bin/perl: myscript.pl: file not found

2. Leave any log aggregation to the consumers. Aggregation gets in the way of timeliness: after the FIRST map task fails as in 1., we want to access its log. Waiting for failure-everywhere is not an acceptable alternative. (due to time delays, partial success and 3x reexecution)

3. Nice to have: access to a single Task log is as a stream, not a file or blob. 
i.e. we do not need to wait for Task termination to access its log. However this is more constraining on the implementation, and for the above use case of failure at launch it is not necessary.


> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 19:24:41 2006
Return-Path: 
 <hadoop-dev-return-3412-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37991 invoked from network); 29 Aug 2006 19:24:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 19:24:41 -0000
Received: (qmail 39375 invoked by uid 500); 29 Aug 2006 19:24:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39231 invoked by uid 500); 29 Aug 2006 19:24:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39222 invoked by uid 99); 29 Aug 2006 19:24:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:24:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:24:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 34C7F7142D4
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 19:21:23 +0000 (GMT)
Message-ID: <32207365.1156879283213.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 12:21:23 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-483?page=comments#action_12431328 ] 
            
Arun C Murthy commented on HADOOP-483:
--------------------------------------

 This is due to the fact that libhdfs relies on the hadoop setup to be up and running (and $CLASSPATH to be setup correctly to the running instance), which isn't the case after 'ant clean'. Should I setup the 'compile-libhdfs' target in build.xml to depend on 'package' too? (However that still won't solve the problem that hadoop isn't running when we need to run hdfs_test)

  All this while we relied on this to be done explicitly and hence the comment in build.xml which notes that test-libhdfs should be run manually.

  I'd appreciate any ideas on how to improve this further... including how I can go about ensuring that hadoop is running, setup correct classpaths (for jni) etc.

thanks,
Arun


> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-483.patch, libhdfs.patch, libhdfs.second.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 19:25:54 2006
Return-Path: 
 <hadoop-dev-return-3413-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44205 invoked from network); 29 Aug 2006 19:25:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 19:25:54 -0000
Received: (qmail 40518 invoked by uid 500); 29 Aug 2006 19:25:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40422 invoked by uid 500); 29 Aug 2006 19:25:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40413 invoked by uid 99); 29 Aug 2006 19:25:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:25:53 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ssiren@gmail.com designates
 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:25:52 -0700
Received: by nf-out-0910.google.com with SMTP id x4so292522nfb
        for <hadoop-dev@lucene.apache.org>;
 Tue, 29 Aug 2006 12:25:30 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=BS5DJVZlSNpyhXMGpsVzlWHuuMYDkVK1XxUg4daA6IwEkeFzhndTvFKkw72tHwwk9RczaFyhDq9yUGGQUT+/fvgGdFMRxVhQh5opGAZTjOeBPEt1mrLxNCJNmBrOuU9t+EECSsH58cHiUlss9qtUg7BycraEgtC1oRxuiaUN6/Y=
Received: by 10.49.41.18 with SMTP id t18mr1672880nfj;
        Tue, 29 Aug 2006 12:25:30 -0700 (PDT)
Received: from ?84.231.72.32? ( [84.231.72.32])
        by mx.gmail.com with ESMTP id v20sm339874nfc.2006.08.29.12.25.29;
        Tue, 29 Aug 2006 12:25:30 -0700 (PDT)
Message-ID: <44F49482.8090900@gmail.com>
Date: Tue, 29 Aug 2006 22:24:50 +0300
From: Sami Siren <ssiren@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060808)
MIME-Version: 1.0
To: Sami Siren <ssiren@gmail.com>
CC: hadoop-dev@lucene.apache.org
Subject: Re: bug or a feature?
References: <44EC76C8.1010302@gmail.com>
In-Reply-To: <44EC76C8.1010302@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I now see there's a issue already open for this

https://issues.apache.org/jira/browse/HADOOP-196

--
 Sami Siren

Sami Siren wrote:
> Currently o.a.h.m.JobConf has construcor:
> JobConf(Configuration conf, Class exampleClass)
>
> which calls
>    this(conf) which has
>    initialize()
>
> initialize method has:
>    addDefaultResource("mapred-default.xml");
>
>    which leads to properties of JobConf to be cleared ->
>    reload is triggered.
>
> This leads to the fact that the conf values submitted to constructor 
> are not actually used, well they
> kind of are for a short time because the properties are copied in 
> constructor of Configuration, but then
> there comes the addDefaultResource which leads to properties being 
> flushed and
> config resources reparsed and dynamically set values get lost.
>
> I see that javadoc only talks about inheriting the settings, but is it 
> really supposed to be working
> the way it is now or should the submitted (possibly dynamically set) 
> configuration variables and
> values be preserved?
> -- 
> Sami Siren
>
>
>
>


From MAILER-DAEMON Tue Aug 29 19:28:54 2006
Return-Path: 
 <hadoop-dev-return-3414-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45598 invoked from network); 29 Aug 2006 19:28:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 19:28:54 -0000
Received: (qmail 51452 invoked by uid 500); 29 Aug 2006 19:28:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51432 invoked by uid 500); 29 Aug 2006 19:28:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51423 invoked by uid 99); 29 Aug 2006 19:28:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:28:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:28:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ADD537142E7
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 19:25:25 +0000 (GMT)
Message-ID: <16948808.1156879525709.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 12:25:25 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-483?page=comments#action_12431331 ] 
            
Arun C Murthy commented on HADOOP-483:
--------------------------------------

Also, there are separate 'compile-libhdfs', 'test-libdhfs', 'clean-libhdfs' and 'package-libhdfs' targets (independent of usual hadoop targets) in build.xml to let users work only with libhdfs separately.

> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-483.patch, libhdfs.patch, libhdfs.second.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 19:40:42 2006
Return-Path: 
 <hadoop-dev-return-3415-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49789 invoked from network); 29 Aug 2006 19:40:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 19:40:42 -0000
Received: (qmail 76355 invoked by uid 500); 29 Aug 2006 19:40:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76174 invoked by uid 500); 29 Aug 2006 19:40:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76165 invoked by uid 99); 29 Aug 2006 19:40:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:40:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:40:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D11F67142D9
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 19:37:23 +0000 (GMT)
Message-ID: <2207149.1156880243854.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 12:37:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12431334 ] 
            
Doug Cutting commented on HADOOP-372:
-------------------------------------

We don't expect most users to directly implement this API, rather this is the API the system invokes.  So the core API should be MapRunnable, and the library should can provide a standard implementation (MapRunner) whose constructor takes a Mapper class.  Otherwise folks would be unable to use a different MapRunnable for each task and we'd be back where we started.

I don't think we need to add JobConf methods beyond those to access the InputFormat.  The default InputFormat will remain TextInputHandler, for back-compatibility, no?  We don't want JobConf to keep growing arbitrarily, so we should move to using static methods on library classes to access properties specific to those classes.  Thus, if one specifies an InputFormat implementation named MetaInputHandler, then the method to set the record reader would be MetaInputHandler.setRecordReaderClass(Class).

InputFormatBase will get a new method, getMapRunnable, whose default implementation is something like:

MapRunnable getMapRunnable(Split) {
  return new MapRunner(InputFormatBase.getMapperClass(getConf()));
}

JobConf.getMapperClass() should be thus deprecated and made to call InputFormatBase.getMapperClass().  So a job might:

job.setInputFormatClass(SequenceFileInputFormat.class);
SequenceFileInputFormat.setMapperClass(MyMapper.class);



> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 19:50:42 2006
Return-Path: 
 <hadoop-dev-return-3416-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51723 invoked from network); 29 Aug 2006 19:50:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 19:50:42 -0000
Received: (qmail 87119 invoked by uid 500); 29 Aug 2006 19:50:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86945 invoked by uid 500); 29 Aug 2006 19:50:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86936 invoked by uid 99); 29 Aug 2006 19:50:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:50:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:50:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 56E687142D5
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 19:47:23 +0000 (GMT)
Message-ID: <32065723.1156880843353.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 12:47:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12431336 ] 
            
Doug Cutting commented on HADOOP-489:
-------------------------------------

Perhaps we should distinguish by log level.  Fatal (and perhaps error and warning) -level messages could be displayed immediately to the client.

We currently propagate the error message with which a task fails back to the task tracker.  Perhaps just displaying these as tasks fail would be sufficient.


> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 19:50:45 2006
Return-Path: 
 <hadoop-dev-return-3417-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51754 invoked from network); 29 Aug 2006 19:50:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 19:50:45 -0000
Received: (qmail 87353 invoked by uid 500); 29 Aug 2006 19:50:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87179 invoked by uid 500); 29 Aug 2006 19:50:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87170 invoked by uid 99); 29 Aug 2006 19:50:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:50:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:50:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0DA107142E8
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 19:47:27 +0000 (GMT)
Message-ID: <25656603.1156880847053.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 12:47:27 -0700 (PDT)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-488) Change ToolBase.doMain() to return a
 status code
In-Reply-To: <5191555.1156848923096.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-488?page=all ]

Andrzej Bialecki  updated HADOOP-488:
-------------------------------------

    Attachment: patch.txt

Patch that implements the return value, and changes tools to use this value as a System.exit() code. If there are no objections I'll apply this.

> Change ToolBase.doMain() to return a status code
> ------------------------------------------------
>
>                 Key: HADOOP-488
>                 URL: http://issues.apache.org/jira/browse/HADOOP-488
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.0
>            Reporter: Andrzej Bialecki 
>             Fix For: 0.6.0
>
>         Attachments: patch.txt
>
>
> I propose to change the signature of ToolBase.doMain from this:
>     public final void doMain(Configuration conf, String[] args) throws Exception;
> to this:
>     public final int doMain(Configuration conf, String[] args) throws Exception;
> and then change main() methods of all classes that use ToolBase.doMain to call System.exit(code), where "code" is this return value from doMain(). All command-line tools, which still call main() methods of other tools, should be converted to use doMain() and return exit codes properly.
> The main reason for this change is that returning varying exit codes is required for proper operation of shell scripts, especially differing between code == 0 (normal exit) and code != 0 (error exit).
> Additionally, current implementation of doMain() already gets the return code, it just silently discards it (ToolBase.java:184).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 20:04:42 2006
Return-Path: 
 <hadoop-dev-return-3418-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55849 invoked from network); 29 Aug 2006 20:04:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 20:04:42 -0000
Received: (qmail 13887 invoked by uid 500); 29 Aug 2006 20:04:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13865 invoked by uid 500); 29 Aug 2006 20:04:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13856 invoked by uid 99); 29 Aug 2006 20:04:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:04:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:04:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4FEA57142EB
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 20:01:23 +0000 (GMT)
Message-ID: <18299365.1156881683324.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 13:01:23 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-312?page=all ]

Devaraj Das updated HADOOP-312:
-------------------------------

    Attachment: no_conn_caching.patch

Incorporated the comments.

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 20:09:52 2006
Return-Path: 
 <hadoop-dev-return-3419-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56828 invoked from network); 29 Aug 2006 20:09:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 20:09:52 -0000
Received: (qmail 21653 invoked by uid 500); 29 Aug 2006 20:09:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21623 invoked by uid 500); 29 Aug 2006 20:09:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21613 invoked by uid 99); 29 Aug 2006 20:09:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:09:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:09:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B7697142EB
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 20:06:23 +0000 (GMT)
Message-ID: <21389085.1156881983306.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 13:06:23 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-312?page=all ]

Devaraj Das updated HADOOP-312:
-------------------------------

    Attachment: no_conn_caching.patch

Oops, forgot to remove an unused variable. Attached is the modified patch.

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 20:11:41 2006
Return-Path: 
 <hadoop-dev-return-3420-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57396 invoked from network); 29 Aug 2006 20:11:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 20:11:41 -0000
Received: (qmail 25376 invoked by uid 500); 29 Aug 2006 20:11:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25201 invoked by uid 500); 29 Aug 2006 20:11:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25192 invoked by uid 99); 29 Aug 2006 20:11:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:11:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:11:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B3FA27142EB
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 20:08:22 +0000 (GMT)
Message-ID: <4288625.1156882102734.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 13:08:22 -0700 (PDT)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-490) Add ability to send "signals" to jobs
 and tasks
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Add ability to send "signals" to jobs and tasks
-----------------------------------------------

                 Key: HADOOP-490
                 URL: http://issues.apache.org/jira/browse/HADOOP-490
             Project: Hadoop
          Issue Type: New Feature
          Components: mapred
    Affects Versions: 0.6.0
            Reporter: Andrzej Bialecki 


In some cases it would be useful to be able to "signal" a job and its tasks about some external condition, or to broadcast a specific message to all tasks in a job. Currently we can only send  a single pseudo-signal, that is to kill a job.

Example 1: some jobs may be gracefully terminated even if they didn't complete all their work, e.g. Fetcher in Nutch may be running for a very long time if it blocks on relatively few sites left over from the fetchlist. In such case it would be very useful to send it a message requesting that it discards the rest of its input and gracefully completes its map tasks.

Example 2: available bandwidth for fetching may be different at different times of day, e.g. daytime vs. nighttime, or total external link usage by other applications. Fetcher jobs often run for several hours. It would be good to be able to send a "signal" to the Fetcher to throttle or un-throttle its bandwidth usage depending on external conditions.

Job implementations could react to these messages either by implementing a method, or by registering a listener, whichever seems more natural.

I'm not quite sure how to go about implementing it, I guess this would have to be a part of  TaskUmbilicalProtocol but my knowledge here is a bit fuzzy ... ;) Comments are welcome.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 20:21:45 2006
Return-Path: 
 <hadoop-dev-return-3421-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60218 invoked from network); 29 Aug 2006 20:21:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 20:21:45 -0000
Received: (qmail 50998 invoked by uid 500); 29 Aug 2006 20:21:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50965 invoked by uid 500); 29 Aug 2006 20:21:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50954 invoked by uid 99); 29 Aug 2006 20:21:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:21:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:21:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8D8CA7142D5
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 20:18:25 +0000 (GMT)
Message-ID: <12130645.1156882705577.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 13:18:25 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-490) Add ability to send "signals" to
 jobs and tasks
In-Reply-To: <4288625.1156882102734.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-490?page=comments#action_12431351 ] 
            
Doug Cutting commented on HADOOP-490:
-------------------------------------

The mapper could periodically poll a server for new messages.  For example, a DFS directory could be used per job with a message per file, named with a timestamp.  This would not require changes to the MapReduce system.  Would this be impractical for the fetcher application?

> Add ability to send "signals" to jobs and tasks
> -----------------------------------------------
>
>                 Key: HADOOP-490
>                 URL: http://issues.apache.org/jira/browse/HADOOP-490
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.6.0
>            Reporter: Andrzej Bialecki 
>
> In some cases it would be useful to be able to "signal" a job and its tasks about some external condition, or to broadcast a specific message to all tasks in a job. Currently we can only send  a single pseudo-signal, that is to kill a job.
> Example 1: some jobs may be gracefully terminated even if they didn't complete all their work, e.g. Fetcher in Nutch may be running for a very long time if it blocks on relatively few sites left over from the fetchlist. In such case it would be very useful to send it a message requesting that it discards the rest of its input and gracefully completes its map tasks.
> Example 2: available bandwidth for fetching may be different at different times of day, e.g. daytime vs. nighttime, or total external link usage by other applications. Fetcher jobs often run for several hours. It would be good to be able to send a "signal" to the Fetcher to throttle or un-throttle its bandwidth usage depending on external conditions.
> Job implementations could react to these messages either by implementing a method, or by registering a listener, whichever seems more natural.
> I'm not quite sure how to go about implementing it, I guess this would have to be a part of  TaskUmbilicalProtocol but my knowledge here is a bit fuzzy ... ;) Comments are welcome.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 20:29:47 2006
Return-Path: 
 <hadoop-dev-return-3422-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64216 invoked from network); 29 Aug 2006 20:29:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 20:29:47 -0000
Received: (qmail 70630 invoked by uid 500); 29 Aug 2006 20:29:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70603 invoked by uid 500); 29 Aug 2006 20:29:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70588 invoked by uid 99); 29 Aug 2006 20:29:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:29:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:29:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D50927142E7
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 20:26:23 +0000 (GMT)
Message-ID: <10116137.1156883183870.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 13:26:23 -0700 (PDT)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-490) Add ability to send "signals" to
 jobs and tasks
In-Reply-To: <4288625.1156882102734.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-490?page=comments#action_12431355 ] 
            
Andrzej Bialecki  commented on HADOOP-490:
------------------------------------------

It could address this particular problem, yes. However, each time application writers would have to design their own way to do this - it would be better if the framework provided some support for this.

> Add ability to send "signals" to jobs and tasks
> -----------------------------------------------
>
>                 Key: HADOOP-490
>                 URL: http://issues.apache.org/jira/browse/HADOOP-490
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.6.0
>            Reporter: Andrzej Bialecki 
>
> In some cases it would be useful to be able to "signal" a job and its tasks about some external condition, or to broadcast a specific message to all tasks in a job. Currently we can only send  a single pseudo-signal, that is to kill a job.
> Example 1: some jobs may be gracefully terminated even if they didn't complete all their work, e.g. Fetcher in Nutch may be running for a very long time if it blocks on relatively few sites left over from the fetchlist. In such case it would be very useful to send it a message requesting that it discards the rest of its input and gracefully completes its map tasks.
> Example 2: available bandwidth for fetching may be different at different times of day, e.g. daytime vs. nighttime, or total external link usage by other applications. Fetcher jobs often run for several hours. It would be good to be able to send a "signal" to the Fetcher to throttle or un-throttle its bandwidth usage depending on external conditions.
> Job implementations could react to these messages either by implementing a method, or by registering a listener, whichever seems more natural.
> I'm not quite sure how to go about implementing it, I guess this would have to be a part of  TaskUmbilicalProtocol but my knowledge here is a bit fuzzy ... ;) Comments are welcome.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 20:36:31 2006
Return-Path: 
 <hadoop-dev-return-3423-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66396 invoked from network); 29 Aug 2006 20:36:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 20:36:31 -0000
Received: (qmail 83242 invoked by uid 500); 29 Aug 2006 20:36:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82850 invoked by uid 500); 29 Aug 2006 20:36:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82799 invoked by uid 99); 29 Aug 2006 20:36:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:36:18 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:36:15 -0700
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k7TKZp6c005783;
	Tue, 29 Aug 2006 13:35:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=in-reply-to:references:mime-version:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=NHyhKqu+uLl6X57KXwiDGGMnemUG23XP+bmXaJ9E8eVZMDPyr0Pj8eLPDrLH/zgD
In-Reply-To: <30846588.1156879178841.JavaMail.jira@brutus>
References: <30846588.1156879178841.JavaMail.jira@brutus>
Mime-Version: 1.0 (Apple Message framework v624)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <bbab4f580a7c17a25444297c500efdfa@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
Date: Tue, 29 Aug 2006 13:35:49 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

+1 for Michel's points.

With these point in mind, solution (3) does not look attractive -- at  
least as long as the tools for immediate access to such logs are  
perfect.

I like solution (2).   Concatenation is separate issue -- the important  
thing is immediate availability.   Once the logs are written, it will  
be not to hard to provide web UI to access them.
Maybe solution (2) be modified so that the messages from all tasks go  
to the single DFS files -- each line of the logs prefixed with task ID  
and time stamp?

On Aug 29, 2006, at 12:19 PM, Michel Tourn (JIRA) wrote:

>     [  
> http://issues.apache.org/jira/browse/HADOOP-489? 
> page=comments#action_12431327 ]
>
> Michel Tourn commented on HADOOP-489:
> -------------------------------------
>
> I don't know what is the best implementation.
>
> But the normal requirements for this info are:
>
> 1. Task log data should be made available in real-time. The main point  
> is to debug execution problems at startupt. The point is not to gather  
> after-the-fact throughput metrics on successful jobs.
> Example messages we want to see immediately (so we can kill the job):
> /usr/custombin/perl : program not found
> /usr/bin/perl: myscript.pl: file not found
>
> 2. Leave any log aggregation to the consumers. Aggregation gets in the  
> way of timeliness: after the FIRST map task fails as in 1., we want to  
> access its log. Waiting for failure-everywhere is not an acceptable  
> alternative. (due to time delays, partial success and 3x reexecution)
>
> 3. Nice to have: access to a single Task log is as a stream, not a  
> file or blob.
> i.e. we do not need to wait for Task termination to access its log.  
> However this is more constraining on the implementation, and for the  
> above use case of failure at launch it is not necessary.
>
>
>> Seperating user logs from system logs in map reduce
>> ---------------------------------------------------
>>
>>                 Key: HADOOP-489
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>>             Project: Hadoop
>>          Issue Type: Improvement
>>          Components: mapred
>>            Reporter: Mahadev konar
>>         Assigned To: Mahadev konar
>>            Priority: Minor
>>
>> Currently the user logs are a part of system logs in mapreduce.  
>> Anything logged by the user is logged into the tasktracker log files.  
>> This create two issues-
>> 1) The system log files get cluttered with user output. If the user  
>> outputs a large amount of logs, the system logs need to be cleaned up  
>> pretty often.
>> 2) For the user, it is difficult to get to each of the machines and  
>> look for the logs his/her job might have generated.
>> I am proposing three solutions to the problem. All of them have  
>> issues with it -
>> Solution 1.
>> Output the user logs on the user screen as part of the job submission  
>> process.
>> Merits-
>> This will prevent users from printing large amount of logs and the  
>> user can get runtime feedback on what is wrong with his/her job.
>> Issues -
>> This proposal will use the framework bandwidth while running jobs for  
>> the user. The user logs will need to pass from the tasks to the  
>> tasktrackers, from the tasktrackers to the jobtrackers and then from  
>> the jobtrackers to the jobclient using a lot of framework bandwidth  
>> if the user is printing out too much data.
>> Solution 2.
>> Output the user logs onto a dfs directory and then concatenate these  
>> files. Each task can create a file for the output in the log  
>> direcotyr for a given user and jobid.
>> Issues -
>> This will create a huge amount of small files in DFS which later can  
>> be concatenated into a single file. Also there is this issue that who  
>> would concatenate these files into a single file? This could be done  
>> by the framework (jobtracker) as part of the cleanup for the jobs -  
>> might stress the jobtracker.
>>
>> Solution 3.
>> Put the user logs into a seperate user log file in the log directory  
>> on each tasktrackers. We can provide some tools to query these local  
>> log files. We could have commands like for jobid j and for taskid t  
>> get me the user log output. These tools could run as a seperate map  
>> reduce program with each map grepping the user log files and a single  
>> recude aggregating these logs in to a single dfs file.
>> Issues-
>> This does sound like more work for the user. Also, the output might  
>> not be complete since a tasktracker might have went down after it ran  
>> the job.
>> Any thoughts?
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Tue Aug 29 20:58:52 2006
Return-Path: 
 <hadoop-dev-return-3424-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76686 invoked from network); 29 Aug 2006 20:58:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 20:58:52 -0000
Received: (qmail 26533 invoked by uid 500); 29 Aug 2006 20:58:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26511 invoked by uid 500); 29 Aug 2006 20:58:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26502 invoked by uid 99); 29 Aug 2006 20:58:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:58:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:58:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ABF897142D9
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 20:55:23 +0000 (GMT)
Message-ID: <16322786.1156884923700.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 13:55:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-312) Connections should not be cached
In-Reply-To: <13061881.1150916131961.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-312?page=comments#action_12431367 ] 
            
Doug Cutting commented on HADOOP-312:
-------------------------------------

This disables connection caching by default (and hence, everywhere, since no one yet overrides this new option).  If we really don't think we need connection caching, then the client could be radically simpler: no per-connection threads, etc.

I thought the original plan was not so much to disable all connection caching, but rather limit it to hosts that have been contacted recently.  But I see no provision in the current patch for timing out idle connections.

The incrementRef & decrementRef methods are each only called once.  In both cases the check for isCachingDisabled can be skipped.  So these can simply become inUse++ and inUse--.

Let's not add a separate config option for the connect timeout, but rather just use the normal io timeout.

Finallly, the socket close and open should not be within a synchronized(connections) block, as, that way, a slow server will block access to all servers.

> Connections should not be cached
> --------------------------------
>
>                 Key: HADOOP-312
>                 URL: http://issues.apache.org/jira/browse/HADOOP-312
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>         Attachments: no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_conn_caching.patch, no_connection_caching.patch, no_connection_caching.patch
>
>
> Servers and clients (client include datanodes, tasktrackers, DFSClients & tasks) should not cache connections or maybe cache them for very short periods of time. Clients should set up & tear down connections to the servers everytime they need to contact the servers (including the heartbeats). If connection is cached, then reuse the existing connection for a few subsequent transactions until the connection expires. The heartbeat interval should be more so that many more clients (order of  tens of thousands) can be accomodated within 1 heartbeat interval.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 21:09:43 2006
Return-Path: 
 <hadoop-dev-return-3425-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80756 invoked from network); 29 Aug 2006 21:09:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 21:09:43 -0000
Received: (qmail 46197 invoked by uid 500); 29 Aug 2006 21:09:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46174 invoked by uid 500); 29 Aug 2006 21:09:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46165 invoked by uid 99); 29 Aug 2006 21:09:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:09:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:09:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6F7C07142E7
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 21:06:23 +0000 (GMT)
Message-ID: <31446841.1156885583454.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 14:06:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-483) Document libhdfs and fix some OS
 specific stuff in Makefile
In-Reply-To: <20264654.1156486690133.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-483?page=comments#action_12431368 ] 
            
Doug Cutting commented on HADOOP-483:
-------------------------------------

> I'd appreciate any ideas on how to improve this further... including how I can go about ensuring that hadoop is running, setup correct classpaths (for jni) etc.

>>From a shell script you could use bin/start-dfs.sh and bin/stop-dfs.sh, specyfing a config directory that's in src/c++/libhdfs.

You can specify the classpath in ant using <env name="CLASSPATH" value="..."/>.


> Document libhdfs and fix some OS specific stuff in Makefile
> -----------------------------------------------------------
>
>                 Key: HADOOP-483
>                 URL: http://issues.apache.org/jira/browse/HADOOP-483
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>         Attachments: HADOOP-483.patch, libhdfs.patch, libhdfs.second.patch
>
>
> Document libhdfs (api docs and user manual) and fix some OS specific stuff (paths to utilities like rm) in the Makefile and TestDFSCIO.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 21:14:02 2006
Return-Path: 
 <hadoop-dev-return-3426-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82625 invoked from network); 29 Aug 2006 21:14:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 21:14:02 -0000
Received: (qmail 58349 invoked by uid 500); 29 Aug 2006 21:14:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58166 invoked by uid 500); 29 Aug 2006 21:14:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58157 invoked by uid 99); 29 Aug 2006 21:14:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:14:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:14:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9E5D67142D9
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 21:10:23 +0000 (GMT)
Message-ID: <13547039.1156885823645.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 14:10:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-490) Add ability to send "signals" to
 jobs and tasks
In-Reply-To: <4288625.1156882102734.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-490?page=comments#action_12431369 ] 
            
Doug Cutting commented on HADOOP-490:
-------------------------------------

> each time application writers would have to design their own way to do this

I prefer to wait until a few application writers have done it, then generalize, rather than try to guess what is universal.  Otherwise the framework gets bloated with features that are only used by one application.

Are there other folks who need to send messages to running map and reduce tasks?

> Add ability to send "signals" to jobs and tasks
> -----------------------------------------------
>
>                 Key: HADOOP-490
>                 URL: http://issues.apache.org/jira/browse/HADOOP-490
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.6.0
>            Reporter: Andrzej Bialecki 
>
> In some cases it would be useful to be able to "signal" a job and its tasks about some external condition, or to broadcast a specific message to all tasks in a job. Currently we can only send  a single pseudo-signal, that is to kill a job.
> Example 1: some jobs may be gracefully terminated even if they didn't complete all their work, e.g. Fetcher in Nutch may be running for a very long time if it blocks on relatively few sites left over from the fetchlist. In such case it would be very useful to send it a message requesting that it discards the rest of its input and gracefully completes its map tasks.
> Example 2: available bandwidth for fetching may be different at different times of day, e.g. daytime vs. nighttime, or total external link usage by other applications. Fetcher jobs often run for several hours. It would be good to be able to send a "signal" to the Fetcher to throttle or un-throttle its bandwidth usage depending on external conditions.
> Job implementations could react to these messages either by implementing a method, or by registering a listener, whichever seems more natural.
> I'm not quite sure how to go about implementing it, I guess this would have to be a part of  TaskUmbilicalProtocol but my knowledge here is a bit fuzzy ... ;) Comments are welcome.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 21:24:41 2006
Return-Path: 
 <hadoop-dev-return-3427-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86088 invoked from network); 29 Aug 2006 21:24:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 21:24:41 -0000
Received: (qmail 75689 invoked by uid 500); 29 Aug 2006 21:24:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75518 invoked by uid 500); 29 Aug 2006 21:24:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75509 invoked by uid 99); 29 Aug 2006 21:24:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:24:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:24:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6229F7142D9
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 21:21:22 +0000 (GMT)
Message-ID: <12167475.1156886482398.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 14:21:22 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-491) there should be a protocol for a map
 or reduce task to tell the jobtracker its alive
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

there should be a protocol for a map or reduce task to tell the jobtracker its alive
------------------------------------------------------------------------------------

                 Key: HADOOP-491
                 URL: http://issues.apache.org/jira/browse/HADOOP-491
             Project: Hadoop
          Issue Type: New Feature
          Components: mapred
            Reporter: arkady borkovsky


Currently, the jobtracker relies on task to write something to the output to know the tasks are still alive.
There is a 600 seconds timeout preset.
Some tasks spend longer that 600 seconds without any output while being perfectly healthy.

It would be good to have an API for a task to explicitly tell the jobtracker it is alive.

There are certain dangers with this protocol: e.g. a task can run a separate thread that does nothing but send "i'm alive" message.   This would be a user bug to abuse the API in such way.  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 21:26:47 2006
Return-Path: 
 <hadoop-dev-return-3428-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86777 invoked from network); 29 Aug 2006 21:26:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 21:26:47 -0000
Received: (qmail 78156 invoked by uid 500); 29 Aug 2006 21:26:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78139 invoked by uid 500); 29 Aug 2006 21:26:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78122 invoked by uid 99); 29 Aug 2006 21:26:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:26:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:26:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C46547142E6
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 21:23:23 +0000 (GMT)
Message-ID: <930409.1156886603801.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 14:23:23 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12431371 ] 
            
Mahadev konar commented on HADOOP-489:
--------------------------------------

I like Doug's suggestion of making available fatal warnings to the user in real time. Getting access to the tasks logs as it fails  can be made possible by providing a http url to the log file which contains the log for this task. on the client screen Would that solve your second requirement Michel?

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 21:32:44 2006
Return-Path: 
 <hadoop-dev-return-3429-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88245 invoked from network); 29 Aug 2006 21:32:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 21:32:44 -0000
Received: (qmail 92125 invoked by uid 500); 29 Aug 2006 21:32:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92108 invoked by uid 500); 29 Aug 2006 21:32:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92099 invoked by uid 99); 29 Aug 2006 21:32:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:32:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.148.227.154] (HELO rwcrmhc14.comcast.net)
 (216.148.227.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:32:43 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc14) with ESMTP
          id <20060829213222m1400p01vme>; Tue, 29 Aug 2006 21:32:22 +0000
Message-ID: <44F4B27E.6080301@apache.org>
Date: Tue, 29 Aug 2006 14:32:46 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
References: <30846588.1156879178841.JavaMail.jira@brutus>
 <bbab4f580a7c17a25444297c500efdfa@yahoo-inc.com>
In-Reply-To: <bbab4f580a7c17a25444297c500efdfa@yahoo-inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Arkady Borkovsky wrote:
> With these point in mind, solution (3) does not look attractive -- at 
> least as long as the tools for immediate access to such logs are perfect.

Currently we have HTTP access to log files as each line is logged.  Is 
that not immediate enough?

> I like solution (2).   Concatenation is separate issue -- the important 
> thing is immediate availability.

DFS files are not visible until they are closed.  So logs in DFS would 
not generally be viewable until the task is complete.

> Maybe solution (2) be modified so that the messages from all tasks go to 
> the single DFS files -- each line of the logs prefixed with task ID and 
> time stamp?

That would create an i/o bottleneck.  We don't want to be log-bound.

I really think we want to continue to log to a local file, and then 
provide easy access to this over HTTP.  What's needed are tools to: (a) 
display fatal errors as they happen; (b) use logs as MapReduce input, so 
that they can, if desired, be efficiently written to DFS for 
retrospective analysis; (c) display all messages as they occur (tail 
-f).  I have reservations about (c), since reading logs from 1000 nodes 
blended together in a single stream is not easy.  Rather, I think 
polling for the last N lines or new lines since last poll (whichever is 
smaller) would be more useful, since you'd get some context with each entry.

Doug

From MAILER-DAEMON Tue Aug 29 21:38:47 2006
Return-Path: 
 <hadoop-dev-return-3430-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91009 invoked from network); 29 Aug 2006 21:38:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 21:38:47 -0000
Received: (qmail 10194 invoked by uid 500); 29 Aug 2006 21:38:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10181 invoked by uid 500); 29 Aug 2006 21:38:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10172 invoked by uid 99); 29 Aug 2006 21:38:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:38:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:38:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DB6587142E6
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 21:35:23 +0000 (GMT)
Message-ID: <9268260.1156887323896.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 14:35:23 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12431373 ] 
            
Mahadev konar commented on HADOOP-489:
--------------------------------------

Adding doug's comments on hadoop-dev

Arkady Borkovsky wrote:
> With these point in mind, solution (3) does not look attractive -- at 
> least as long as the tools for immediate access to such logs are perfect.

Currently we have HTTP access to log files as each line is logged.  Is that not immediate enough?

> I like solution (2).   Concatenation is separate issue -- the important 
> thing is immediate availability.

DFS files are not visible until they are closed.  So logs in DFS would not generally be viewable until the task is complete.

> Maybe solution (2) be modified so that the messages from all tasks go 
> to the single DFS files -- each line of the logs prefixed with task ID 
> and time stamp?

That would create an i/o bottleneck.  We don't want to be log-bound.

I really think we want to continue to log to a local file, and then provide easy access to this over HTTP.  What's needed are tools to: (a) display fatal errors as they happen; (b) use logs as MapReduce input, so that they can, if desired, be efficiently written to DFS for retrospective analysis; (c) display all messages as they occur (tail -f).  I have reservations about (c), since reading logs from 1000 nodes blended together in a single stream is not easy.  Rather, I think polling for the last N lines or new lines since last poll (whichever is
smaller) would be more useful, since you'd get some context with each entry.


> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 21:38:57 2006
Return-Path: 
 <hadoop-dev-return-3431-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91056 invoked from network); 29 Aug 2006 21:38:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 21:38:57 -0000
Received: (qmail 10456 invoked by uid 500); 29 Aug 2006 21:38:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10434 invoked by uid 500); 29 Aug 2006 21:38:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10425 invoked by uid 99); 29 Aug 2006 21:38:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:38:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:38:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0892C7142EB
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 21:35:24 +0000 (GMT)
Message-ID: <5641100.1156887324032.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 14:35:24 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-492) Global counters
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Global counters
---------------

                 Key: HADOOP-492
                 URL: http://issues.apache.org/jira/browse/HADOOP-492
             Project: Hadoop
          Issue Type: New Feature
          Components: mapred
            Reporter: arkady borkovsky


It would be nice to have map / reduce job keep aggregated counts for arbitrary events occuring in its tasks -- the numer of records processed, the numer of exceptions of a specific type, the number of sentences in passive voice, whatever the jobs finds useful.

This can be implemented by tasks periodically sending <name, value> pairs to the jobtracker (in some implementations such messages are piggy-backed on the heartbeats), so that the job tracker stores all the latests values from each task and aggregates them on a request.  It should also make the aggregated values available at the job end.  The value for a task would be flushed when the task fails.

#491 and #490 may be related to this one.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 21:42:45 2006
Return-Path: 
 <hadoop-dev-return-3432-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97462 invoked from network); 29 Aug 2006 21:42:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 21:42:45 -0000
Received: (qmail 20720 invoked by uid 500); 29 Aug 2006 21:42:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20701 invoked by uid 500); 29 Aug 2006 21:42:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20692 invoked by uid 99); 29 Aug 2006 21:42:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:42:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:42:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 517A37142D9
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 21:39:26 +0000 (GMT)
Message-ID: <1547874.1156887566330.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 14:39:26 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12431376 ] 
            
Mahadev konar commented on HADOOP-489:
--------------------------------------

Suggestion c) tail -f would be really hard to implement given that there is already a job running. So submitting tail -f as another job is not an option since it would not be real time. Also polling for the last N lines would not be easy to do until the framework automatically keeps track of the last N lines of user logs.

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 21:47:47 2006
Return-Path: 
 <hadoop-dev-return-3433-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 183 invoked from network); 29 Aug 2006 21:47:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 21:47:47 -0000
Received: (qmail 30167 invoked by uid 500); 29 Aug 2006 21:47:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30137 invoked by uid 500); 29 Aug 2006 21:47:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30115 invoked by uid 99); 29 Aug 2006 21:47:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:47:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:47:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D7CD77142D9
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 21:44:23 +0000 (GMT)
Message-ID: <20194299.1156887863881.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 14:44:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-441?page=comments#action_12431381 ] 
            
Doug Cutting commented on HADOOP-441:
-------------------------------------

Let's just use InputStream and OutputStream as our base classes.  We're getting nothing from FilterInputStream and FilterOutputStream except paranoid bloat.  (Why is close() abstract but not flush()?)  Either that, or remove all the spurious abstract methods.  These substantially clutter the javadoc.



> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: codec.patch, codec_updated_interfaces_20060830.patch
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 21:51:41 2006
Return-Path: 
 <hadoop-dev-return-3434-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7316 invoked from network); 29 Aug 2006 21:51:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 21:51:41 -0000
Received: (qmail 34899 invoked by uid 500); 29 Aug 2006 21:51:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34876 invoked by uid 500); 29 Aug 2006 21:51:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34867 invoked by uid 99); 29 Aug 2006 21:51:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:51:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:51:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 523247142D9
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 21:48:23 +0000 (GMT)
Message-ID: <13808698.1156888103334.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 14:48:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-460) Small jobs benchmark fails with
 current Hadoop due to UTF8 -> Text ClassCastException
In-Reply-To: <28838293.1155904093901.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-460?page=all ]

Doug Cutting resolved HADOOP-460.
---------------------------------

    Fix Version/s: 0.6.0
       Resolution: Fixed

I just committed this.  Thanks, Sanjay!

> Small jobs benchmark fails with current Hadoop due to UTF8 -> Text ClassCastException
> -------------------------------------------------------------------------------------
>
>                 Key: HADOOP-460
>                 URL: http://issues.apache.org/jira/browse/HADOOP-460
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Sanjay Dahiya
>             Fix For: 0.6.0
>
>         Attachments: Hadoop-460.patch
>
>
> Small jobs benchmark uses UTF8 as Map input keys, it fails with ClassCastException ( UTF8 / Text ) with the latest trunk. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 21:57:42 2006
Return-Path: 
 <hadoop-dev-return-3435-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9443 invoked from network); 29 Aug 2006 21:57:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 21:57:42 -0000
Received: (qmail 45950 invoked by uid 500); 29 Aug 2006 21:57:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45929 invoked by uid 500); 29 Aug 2006 21:57:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45920 invoked by uid 99); 29 Aug 2006 21:57:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:57:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 14:57:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C6311410011
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 21:54:23 +0000 (GMT)
Message-ID: <5433056.1156888463807.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 14:54:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12431386 ] 
            
Doug Cutting commented on HADOOP-489:
-------------------------------------

Couldn't last-N lines be implemented with 'exec tail'?  We could add a servlet for this, that has parameters like the user, jobid, etc.  User log files could be written into a directory hierarchy so that there's a file per task, directory per user, subdir per job.

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 22:05:47 2006
Return-Path: 
 <hadoop-dev-return-3436-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12080 invoked from network); 29 Aug 2006 22:05:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 22:05:47 -0000
Received: (qmail 53374 invoked by uid 500); 29 Aug 2006 22:05:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53348 invoked by uid 500); 29 Aug 2006 22:05:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53333 invoked by uid 99); 29 Aug 2006 22:05:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 15:05:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 15:05:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 23D8741000E
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 22:02:29 +0000 (GMT)
Message-ID: <33044161.1156888949144.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 15:02:29 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-492) Global counters
In-Reply-To: <5641100.1156887324032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-492?page=comments#action_12431387 ] 
            
Doug Cutting commented on HADOOP-492:
-------------------------------------

The metrics API is designed for this:

http://lucene.apache.org/hadoop/docs/api/org/apache/hadoop/metrics/package-summary.html

Also, Reporter.setStatus() permits tasks to dynamically alter the string shown in the web ui (and available programatically).

> Global counters
> ---------------
>
>                 Key: HADOOP-492
>                 URL: http://issues.apache.org/jira/browse/HADOOP-492
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>            Reporter: arkady borkovsky
>
> It would be nice to have map / reduce job keep aggregated counts for arbitrary events occuring in its tasks -- the numer of records processed, the numer of exceptions of a specific type, the number of sentences in passive voice, whatever the jobs finds useful.
> This can be implemented by tasks periodically sending <name, value> pairs to the jobtracker (in some implementations such messages are piggy-backed on the heartbeats), so that the job tracker stores all the latests values from each task and aggregates them on a request.  It should also make the aggregated values available at the job end.  The value for a task would be flushed when the task fails.
> #491 and #490 may be related to this one.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 22:05:59 2006
Return-Path: 
 <hadoop-dev-return-3437-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12111 invoked from network); 29 Aug 2006 22:05:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 22:05:59 -0000
Received: (qmail 53593 invoked by uid 500); 29 Aug 2006 22:05:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53567 invoked by uid 500); 29 Aug 2006 22:05:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53555 invoked by uid 99); 29 Aug 2006 22:05:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 15:05:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 15:05:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AFF7141001D
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 22:02:30 +0000 (GMT)
Message-ID: <27057475.1156888950718.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 15:02:30 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12431388 ] 
            
Michel Tourn commented on HADOOP-489:
-------------------------------------

>>About (c) and providing a http url to the log file which contains 
>>the log for this task. on the client screen 
>>Would that solve your second requirement Michel?
Yes and no. 
With access to such a URL I would not ask the uer to go browse it.
But I could have HadoopStreaming retrieve the content then stream it to the user like "tail -f". 

>polling for the last N lines would not be easy
Use HTTP Keep-Alive to do this. I.e. just keep the GET socket open and wait for this "slow webserver" to send you more lines as they get available.


Now the scalability story:
===================

when you have access to all this real-time log information, 
a "smart" client will not blindly echo everything from every Task.
It will just show you what is wrong "by example"

Assuming we have a way to do some classification of the Tasks into 
categories:
"failed", "still going" and "successfully finished":

o pick the first one in each category
o by default, ignore log URLs for the other logs
o do a merged "tail -f" with a banned on the client. "tail -f " is implemented as HTTP Keep-Alive as described. 3 HTTP sockets at most. 

Yes, all this assumes some smart-client support.

But we can easily package the code as reusable logic to be used from any user-written JobSubmitter main class. 
One of these clients is HadoopStreaming.

If a client application does not use this support code:
it is just ignoring the log URLs made available, but otherwise works as usual.

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 22:07:49 2006
Return-Path: 
 <hadoop-dev-return-3438-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12585 invoked from network); 29 Aug 2006 22:07:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 22:07:49 -0000
Received: (qmail 55987 invoked by uid 500); 29 Aug 2006 22:07:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55826 invoked by uid 500); 29 Aug 2006 22:07:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55817 invoked by uid 99); 29 Aug 2006 22:07:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 15:07:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 15:07:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AC43641001D
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 22:04:25 +0000 (GMT)
Message-ID: <26722247.1156889065703.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 15:04:25 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12431390 ] 
            
Mahadev konar commented on HADOOP-489:
--------------------------------------

Do you mean a servlet running on each of the tasktrackers? What I meant in my last comment was running a job that does exec tail or any other functionality in parallel with another job already running would be problematic since we have issues with two jobs running in parallel.

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Aug 29 22:09:42 2006
Return-Path: 
 <hadoop-dev-return-3439-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14009 invoked from network); 29 Aug 2006 22:09:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 22:09:42 -0000
Received: (qmail 57987 invoked by uid 500); 29 Aug 2006 22:09:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57965 invoked by uid 500); 29 Aug 2006 22:09:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57956 invoked by uid 99); 29 Aug 2006 22:09:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 15:09:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 15:09:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 149D841000E
	for <hadoop-dev@lucene.apache.org>; Tue, 29 Aug 2006 22:06:24 +0000 (GMT)
Message-ID: <33260030.1156889184080.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 15:06:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-491) there should be a protocol for a map
 or reduce task to tell the jobtracker its alive
In-Reply-To: <12167475.1156886482398.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-491?page=comments#action_12431391 ] 
            
Doug Cutting commented on HADOOP-491:
-------------------------------------

There already is an API for tasks to say they're alive: Reporter.setStatus() and progress().

This may not be well documented, so perhaps this is a documentation bug?

> there should be a protocol for a map or reduce task to tell the jobtracker its alive
> ------------------------------------------------------------------------------------
>
>                 Key: HADOOP-491
>                 URL: http://issues.apache.org/jira/browse/HADOOP-491
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>            Reporter: arkady borkovsky
>
> Currently, the jobtracker relies on task to write something to the output to know the tasks are still alive.
> There is a 600 seconds timeout preset.
> Some tasks spend longer that 600 seconds without any output while being perfectly healthy.
> It would be good to have an API for a task to explicitly tell the jobtracker it is alive.
> There are certain dangers with this protocol: e.g. a task can run a separate thread that does nothing but send "i'm alive" message.   This would be a user bug to abuse the API in such way.  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 06:21:42 2006
Return-Path: 
 <hadoop-dev-return-3440-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45152 invoked from network); 30 Aug 2006 06:21:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 06:21:42 -0000
Received: (qmail 65759 invoked by uid 500); 30 Aug 2006 06:21:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65736 invoked by uid 500); 30 Aug 2006 06:21:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65727 invoked by uid 99); 30 Aug 2006 06:21:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 23:21:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 23:21:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5BDE17142D4
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 06:18:22 +0000 (GMT)
Message-ID: <23553183.1156918702373.JavaMail.jira@brutus>
Date: Tue, 29 Aug 2006 23:18:22 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-493) hadoop dfs -report information is
 incorrect
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hadoop dfs -report information is incorrect
-------------------------------------------

                 Key: HADOOP-493
                 URL: http://issues.apache.org/jira/browse/HADOOP-493
             Project: Hadoop
          Issue Type: Bug
            Reporter: Yoram Arnon
            Priority: Minor


The information presented by hadoop dfs -report is incorrect.
In the following example, the total raw bytes are correct, the used raw bytes are incorrect and should actually be on the order of 138TB.
The total effective bytes is correct, and the actual replication factor is really a healthy 3.

yarnon@g1010:build:942>hadoop dfs  2> /dev/null -report | head
Total raw bytes: 240761579888640 (224226.69 Gb)
Used raw bytes: 35934229005360 (33466.35 Gb)
% used: 14.92%

Total effective bytes: 47093545108964 (43859.28 Gb)
Effective replication multiplier: 0.7630393703047027
-------------------------------------------------


In the following example again the total raw bytes and total effective bytes are correct, but the used raw bytes, % used and effective replication are a tad off the mark.

hadoop  dfs 2> /dev/null -report | head
Total raw bytes: 236476179599360 (220235.60 Gb)
Used raw bytes: -22028236104431 (-2.15 k)
% used: -9.31%

Total effective bytes: 55609049637201 (51789.96 Gb)
Effective replication multiplier: -0.39612682194976206
-------------------------------------------------


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 08:59:44 2006
Return-Path: 
 <hadoop-dev-return-3441-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95891 invoked from network); 30 Aug 2006 08:59:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 08:59:44 -0000
Received: (qmail 55643 invoked by uid 500); 30 Aug 2006 08:59:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55625 invoked by uid 500); 30 Aug 2006 08:59:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55614 invoked by uid 99); 30 Aug 2006 08:59:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 01:59:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 01:59:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 29B6F7142D4
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 08:56:24 +0000 (GMT)
Message-ID: <6576535.1156928184168.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 01:56:24 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12431511 ] 
            
Sanjay Dahiya commented on HADOOP-239:
--------------------------------------

If we keep a single history file for jobtracker we will run into a very large history files very soon, specially when there are large number of small tasks. On the other hand if we rollover the file every day then job start and end events for longer jobs or the jobs that start on the day end will be in different log files. We will still be able to see daily activity but drilling into jobs will be a problem as we will have to look up in multiple huge file for job specifc events. 
Yoram and I discussed over IM and here is current approach. 

We maintain a master file for all jobs - this file contains only job start/finish events along with no of tasks failed at finish. If the JobTracker dies before finishing a job then we dont log number of failed taks in this file. 

For each job we create a separate history log file and this file contains task/taskattempt start and finish times along with failures if any. 

The master index is rolledover every month, and during rollover we look for all jobs that have not finished and move them to the new file and discard old jobs. The detailed history log for jobs older than a month will get deleted. 

The master index will be used to render the main JSP for job history, clicking on the job will cause corresponding job file to be loaded / parsed and displayed on respective JSPs. 

Start time of the jobtracker is used as an extra key to uniquely identify jobs since same jobids are used when jobtracker restarts. 

We will not have any host specific view of tasks in this case. 

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 10:24:44 2006
Return-Path: 
 <hadoop-dev-return-3442-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25791 invoked from network); 30 Aug 2006 10:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 10:24:44 -0000
Received: (qmail 45580 invoked by uid 500); 30 Aug 2006 10:24:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45560 invoked by uid 500); 30 Aug 2006 10:24:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45551 invoked by uid 99); 30 Aug 2006 10:24:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 03:24:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 03:24:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 467447142D5
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 10:21:24 +0000 (GMT)
Message-ID: <23910061.1156933284285.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 03:21:24 -0700 (PDT)
From: "Jean-Baptiste Quenot (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-366) Should be able to specify more than
 one jar into a JobConf file
In-Reply-To: <32857334.1153138454140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-366?page=comments#action_12431526 ] 
            
Jean-Baptiste Quenot commented on HADOOP-366:
---------------------------------------------

James you're right, using a Manifest in the JAR is th standard way of doing this, thanks for reminding.  And about parameters, we could just pick the right config file in the JAR by passing a JVM argument:

  java -Dconfig=mybigcluster -jar mapred.jar

Or even using command-line arguments:

  java -jar mapred.jar mybigcluster

> Should be able to specify more than one jar into a JobConf file
> ---------------------------------------------------------------
>
>                 Key: HADOOP-366
>                 URL: http://issues.apache.org/jira/browse/HADOOP-366
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Thomas FRIOL
>
> A job should be able to specify more than one jar file into its JobConf file because sometimes custom Map and Reduce classes or just InputFormat classes uses objects coming from other jar files. For now, we have to build a unique jar to make Hadoop mapreduce operations works.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 15:47:47 2006
Return-Path: 
 <hadoop-dev-return-3443-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72555 invoked from network); 30 Aug 2006 15:47:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 15:47:47 -0000
Received: (qmail 22480 invoked by uid 500); 30 Aug 2006 15:47:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22306 invoked by uid 500); 30 Aug 2006 15:47:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22297 invoked by uid 99); 30 Aug 2006 15:47:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 08:47:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 08:47:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 57D4841000C
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 15:44:22 +0000 (GMT)
Message-ID: <26033669.1156952662357.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 08:44:22 -0700 (PDT)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-494) hadoop utility returning exit code 0
 always
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hadoop utility returning exit code 0 always
-------------------------------------------

                 Key: HADOOP-494
                 URL: http://issues.apache.org/jira/browse/HADOOP-494
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.5.0
            Reporter: Christian Kunz


After switching from 0.4.0 to 0.5.0 my scripts using the hadoop utility (mainly hadoop dfs) did not work anymore because the exit code is 0 regardless whether it is successfull or failing.
This is obviously related to Hadoop-488, but I believe that after the fix in doMain the main routine in DFSShell.java needs to call System.exit based on return code of doMain or exception thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 16:09:51 2006
Return-Path: 
 <hadoop-dev-return-3444-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86915 invoked from network); 30 Aug 2006 16:09:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 16:09:51 -0000
Received: (qmail 85829 invoked by uid 500); 30 Aug 2006 16:09:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85812 invoked by uid 500); 30 Aug 2006 16:09:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85803 invoked by uid 99); 30 Aug 2006 16:09:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 09:09:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 09:09:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5380A41000C
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 16:06:23 +0000 (GMT)
Message-ID: <29382257.1156953983339.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 09:06:23 -0700 (PDT)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-494) hadoop utility returning exit code 0
 always
In-Reply-To: <26033669.1156952662357.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-494?page=comments#action_12431612 ] 
            
Christian Kunz commented on HADOOP-494:
---------------------------------------

I should have looked at the patch for Hadoop-488. It takes care of this issue as well.

> hadoop utility returning exit code 0 always
> -------------------------------------------
>
>                 Key: HADOOP-494
>                 URL: http://issues.apache.org/jira/browse/HADOOP-494
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>
> After switching from 0.4.0 to 0.5.0 my scripts using the hadoop utility (mainly hadoop dfs) did not work anymore because the exit code is 0 regardless whether it is successfull or failing.
> This is obviously related to Hadoop-488, but I believe that after the fix in doMain the main routine in DFSShell.java needs to call System.exit based on return code of doMain or exception thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 16:20:44 2006
Return-Path: 
 <hadoop-dev-return-3445-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92492 invoked from network); 30 Aug 2006 16:20:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 16:20:44 -0000
Received: (qmail 7783 invoked by uid 500); 30 Aug 2006 16:20:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7604 invoked by uid 500); 30 Aug 2006 16:20:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7595 invoked by uid 99); 30 Aug 2006 16:20:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 09:20:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 09:20:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CFD1B41000E
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 16:17:23 +0000 (GMT)
Message-ID: <18599020.1156954643848.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 09:17:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-366) Should be able to specify more than
 one jar into a JobConf file
In-Reply-To: <32857334.1153138454140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-366?page=comments#action_12431614 ] 
            
Doug Cutting commented on HADOOP-366:
-------------------------------------

> a Manifest in the JAR is th standard way of doing this

I'd guess there are far more war files with jars in lib directories in the world than there are executable jar files with external jars named in the manifest.  The latter is much more fragile.

> Should be able to specify more than one jar into a JobConf file
> ---------------------------------------------------------------
>
>                 Key: HADOOP-366
>                 URL: http://issues.apache.org/jira/browse/HADOOP-366
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Thomas FRIOL
>
> A job should be able to specify more than one jar file into its JobConf file because sometimes custom Map and Reduce classes or just InputFormat classes uses objects coming from other jar files. For now, we have to build a unique jar to make Hadoop mapreduce operations works.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 16:35:51 2006
Return-Path: 
 <hadoop-dev-return-3446-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2037 invoked from network); 30 Aug 2006 16:35:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 16:35:51 -0000
Received: (qmail 38839 invoked by uid 500); 30 Aug 2006 16:35:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38808 invoked by uid 500); 30 Aug 2006 16:35:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38769 invoked by uid 99); 30 Aug 2006 16:35:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 09:35:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 09:35:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 152E2410017
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 16:32:24 +0000 (GMT)
Message-ID: <5836479.1156955544083.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 09:32:24 -0700 (PDT)
From: "Jean-Baptiste Quenot (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-366) Should be able to specify more than
 one jar into a JobConf file
In-Reply-To: <32857334.1153138454140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-366?page=comments#action_12431619 ] 
            
Jean-Baptiste Quenot commented on HADOOP-366:
---------------------------------------------

I hear you.  But "lib" at the root is not standard WAR, is it?

The structure is:

{code}
WEB-INF/
  |
  \__ classes
  |
  \__ lib
  |  |
  |  \__ lib1.jar
  |  |
  |  \__ lib2.jar
  |
  \__ web.xml
{code}

And in web.xml we could define a webapp listener that would be invoked upon webapp startup.

> Should be able to specify more than one jar into a JobConf file
> ---------------------------------------------------------------
>
>                 Key: HADOOP-366
>                 URL: http://issues.apache.org/jira/browse/HADOOP-366
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Thomas FRIOL
>
> A job should be able to specify more than one jar file into its JobConf file because sometimes custom Map and Reduce classes or just InputFormat classes uses objects coming from other jar files. For now, we have to build a unique jar to make Hadoop mapreduce operations works.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 16:45:51 2006
Return-Path: 
 <hadoop-dev-return-3447-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4871 invoked from network); 30 Aug 2006 16:45:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 16:45:51 -0000
Received: (qmail 48378 invoked by uid 500); 30 Aug 2006 16:45:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48343 invoked by uid 500); 30 Aug 2006 16:45:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48323 invoked by uid 99); 30 Aug 2006 16:45:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 09:45:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 09:45:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 25053410017
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 16:42:24 +0000 (GMT)
Message-ID: <27013828.1156956144148.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 09:42:24 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-495) distcp defeciencies and bugs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

distcp defeciencies and bugs
----------------------------

                 Key: HADOOP-495
                 URL: http://issues.apache.org/jira/browse/HADOOP-495
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.5.0
            Reporter: Sameer Paranjpye
         Assigned To: Arun C Murthy
             Fix For: 0.6.0


distcp as currently implemented has several defeciencies and bugs which I encountered when trying to use it to import logs from HTTP servers into my local DFS cluster. In general, it is user unfriendly and does not do comprehensible error reporting. 
Here's a list of things that can be improved:

1) There isn't a man page that explains the various command line options. We should have one.
2) Malformed URLs cause a NullPointerException to be thrown with no error message stating what went wrong
3) Relative paths for the local filesystem are not handled at all
4) The schema used for HDFS URLs is dfs:// it ought to be hdfs://, 'dfs' is far to general an acronym to use in URLs
5) If a copy to the local filesystem is specified with a relative path, for instance
    ./bin/hadoop distcp dfs://localhost:8020/foo.txt foo.txt
then the job runs successfully but the file is nowhere to be seen. It looks like this gets copied to the map/reduce jobs
current working directory
6) If a copy to a dfs is specified and the namenode cannot be resolved, the job fails with an IOException, no comprehensible error message is printed
7) If an HTTP URI has a query component, it is disregarded when constructing the destination file name, for instance, if one specifies the following two URLs to be copied in a file list
  http://myhost.mydomain.com/files.cgi?n=/logs/foo.txt
  http://myhost.myfomain.com/files.cgi?n=/logs/bar.txt

a single file called 'files.cgi' is created and is overwritten by one or both source files, it's not clear which. The destination
path name should be constructed in the way that 'wget' does it, using the filename+query part of the URL, escaping characters as necessary.

8) It looks like if a list of URLs is specified in a file distcp runs a separate map reduce job for each entry in the file, why?
Seems like one could do a straight copy for local files since the task needs to run locally, followed by a single MR job that
copies HDFS and http URLs



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 16:49:44 2006
Return-Path: 
 <hadoop-dev-return-3448-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6740 invoked from network); 30 Aug 2006 16:49:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 16:49:44 -0000
Received: (qmail 53954 invoked by uid 500); 30 Aug 2006 16:49:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53774 invoked by uid 500); 30 Aug 2006 16:49:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53762 invoked by uid 99); 30 Aug 2006 16:49:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 09:49:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 09:49:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D1E7241000E
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 16:46:23 +0000 (GMT)
Message-ID: <7371432.1156956383857.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 09:46:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-366) Should be able to specify more than
 one jar into a JobConf file
In-Reply-To: <32857334.1153138454140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-366?page=comments#action_12431620 ] 
            
Doug Cutting commented on HADOOP-366:
-------------------------------------

Sorry, I wasn't arguing that job jar's conform to the war file spec, rather that, if we're looking for sucessful methods of including libraries in jar files, the war file provides a good analogy, one that is more widely used than executable jars.

A job jar is not an executable jar.  It is not standalone: it always gets the hadoop classes externaly, from the environment it is loaded into.  In this way it is like a war file, which always gets servlet runtime from the servlet runner.

A job jar is not a war file: it doesn't specify servlets, include jsp pages, etc.  The reason for the WEB-INF directory in a war file is to hide these files, so that, by default, files in the war are web pages, image files, etc. to be served, unless they're in WEB-INF.


> Should be able to specify more than one jar into a JobConf file
> ---------------------------------------------------------------
>
>                 Key: HADOOP-366
>                 URL: http://issues.apache.org/jira/browse/HADOOP-366
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Thomas FRIOL
>
> A job should be able to specify more than one jar file into its JobConf file because sometimes custom Map and Reduce classes or just InputFormat classes uses objects coming from other jar files. For now, we have to build a unique jar to make Hadoop mapreduce operations works.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 17:27:48 2006
Return-Path: 
 <hadoop-dev-return-3449-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22227 invoked from network); 30 Aug 2006 17:27:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 17:27:48 -0000
Received: (qmail 26870 invoked by uid 500); 30 Aug 2006 17:27:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26848 invoked by uid 500); 30 Aug 2006 17:27:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26839 invoked by uid 99); 30 Aug 2006 17:27:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 10:27:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 10:27:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B31AA41001E
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 17:24:27 +0000 (GMT)
Message-ID: <32244134.1156958667730.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 10:24:27 -0700 (PDT)
From: "James P. White (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-366) Should be able to specify more than
 one jar into a JobConf file
In-Reply-To: <32857334.1153138454140.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-366?page=comments#action_12431629 ] 
            
James P. White commented on HADOOP-366:
---------------------------------------

I don't think WAR layout really applies here, and I do think packaging jobs as a JAR make sense.  WAR is for an application, not a library/fragment.  The application packaging I'ld like to see for Hadoop is JNLP (Java Web Start).

For the situation where common jars are used by multiple job instances, the Extension mechanism supports job jars which are simply a configuration file and dependency(s) on application jars:

http://java.sun.com/j2se/1.4.2/docs/guide/extensions/spec.html#deployment

And as for job jars being executable or not, they certainly are executables from Hadoop's perspective.  And while Hadoop packaging needs its own issue, I'll point out that putting the dependencies in the job jar to launch Hadoop for the job if it is executed might be a reasonable choice.


> Should be able to specify more than one jar into a JobConf file
> ---------------------------------------------------------------
>
>                 Key: HADOOP-366
>                 URL: http://issues.apache.org/jira/browse/HADOOP-366
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Thomas FRIOL
>
> A job should be able to specify more than one jar file into its JobConf file because sometimes custom Map and Reduce classes or just InputFormat classes uses objects coming from other jar files. For now, we have to build a unique jar to make Hadoop mapreduce operations works.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 19:32:26 2006
Return-Path: 
 <hadoop-dev-return-3450-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84185 invoked from network); 30 Aug 2006 19:32:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 19:32:26 -0000
Received: (qmail 56729 invoked by uid 500); 30 Aug 2006 19:32:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56711 invoked by uid 500); 30 Aug 2006 19:32:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56702 invoked by uid 99); 30 Aug 2006 19:32:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 12:32:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 12:32:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 17B777142D9
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 19:29:00 +0000 (GMT)
Message-ID: <29112039.1156966140094.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 12:29:00 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-496) Expose HDFS as a WebDAV store
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Expose HDFS as a WebDAV store
-----------------------------

                 Key: HADOOP-496
                 URL: http://issues.apache.org/jira/browse/HADOOP-496
             Project: Hadoop
          Issue Type: New Feature
          Components: dfs
            Reporter: Michel Tourn


WebDAV stands for Distributed Authoring and Versioning. It is a set of extensions to the HTTP protocol that lets users collaboratively edit and manage files on a remote web server. It is often considered as a replacement for NFS or SAMBA

HDFS (Hadoop Distributed File System) needs a friendly file system interface. DFSShell commands are unfamiliar. Instead it is more convenient for Hadoop users to use a mountable network drive. A friendly interface to HDFS will be used both for casual browsing of data and for bulk import/export. 

The FUSE provider for HDFS is already available ( http://issues.apache.org/jira/browse/HADOOP-17 )  but it had scalability problems. WebDAV is a popular alternative. 

The typical licensing terms for WebDAV tools are also attractive: 
GPL for Linux client tools that Hadoop would not redistribute anyway. 
More importantly, Apache Project/Apache license for Java tools and for server components. 
This allows for a tighter integration with the HDFS code base.

There are some interesting Apache projects that support WebDAV.
But these are probably too heavyweight for the needs of Hadoop:
Tomcat servlet: http://tomcat.apache.org/tomcat-4.1-doc/catalina/docs/api/org/apache/catalina/servlets/WebdavServlet.html
Slide:          http://jakarta.apache.org/slide/

Being HTTP-based and "backwards-compatible" with Web Browser clients, the WebDAV server protocol could even be piggy-backed on the existing Web UI ports of the Hadoop name node / data nodes. WebDAV can be hosted as (Jetty) servlets. This minimizes server code bloat and this avoids additional network traffic between HDFS and the WebDAV server.

General Clients (read-only):
Any web browser

Linux Clients: 
Mountable GPL davfs2  http://dav.sourceforge.net/
FTP-like  GPL Cadaver http://www.webdav.org/cadaver/

Server Protocol compliance tests:
http://www.webdav.org/neon/litmus/  
A goal is for Hadoop HDFS to pass this test (minus support for Properties)

Pure Java clients:
DAV Explorer Apache lic. http://www.ics.uci.edu/~webdav/	

WebDAV also makes it convenient to add advanced features in an incremental fashion:
file locking, access control lists, hard links, symbolic links.
New WebDAV standards get accepted and more or less featured WebDAV clients exist.
core              http://www.webdav.org/specs/rfc2518.html
ACLs              http://www.webdav.org/specs/rfc3744.html
redirects "soft links" http://greenbytes.de/tech/webdav/rfc4437.html
BIND "hard links" http://www.webdav.org/bind/
quota             http://tools.ietf.org/html/rfc4331



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 19:38:43 2006
Return-Path: 
 <hadoop-dev-return-3451-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86891 invoked from network); 30 Aug 2006 19:38:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 19:38:43 -0000
Received: (qmail 69815 invoked by uid 500); 30 Aug 2006 19:38:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69797 invoked by uid 500); 30 Aug 2006 19:38:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69788 invoked by uid 99); 30 Aug 2006 19:38:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 12:38:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 12:38:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 78AE67142D4
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 19:35:23 +0000 (GMT)
Message-ID: <14248158.1156966523491.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 12:35:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-373) Some calls to mkdirs do not check
 return value
In-Reply-To: <19322325.1153351633892.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-373?page=all ]

Doug Cutting updated HADOOP-373:
--------------------------------

    Status: Open  (was: Patch Available)

I can't apply this patch:

% patch -p 0 < ~/Desktop/hadoop-373.patch
patching file src/java/org/apache/hadoop/io/MapFile.java
patching file src/java/org/apache/hadoop/fs/FileUtil.java
patch: **** malformed patch at line 31: @@ -130,7 +132,9 @@

Can you please re-generate it?  Thanks!

> Some calls to mkdirs do not check return value
> ----------------------------------------------
>
>                 Key: HADOOP-373
>                 URL: http://issues.apache.org/jira/browse/HADOOP-373
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>             Fix For: 0.6.0
>
>         Attachments: hadoop-373.patch
>
>
> Some calls to mkdirs do not check if mkdirs failed.  
> Arun noticed this while looking at HADOOP-281.  Since this issue is actually a separate issue from the mkdirs implementation issue of HADOOP-281, I created a new bug for it.   

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 20:07:55 2006
Return-Path: 
 <hadoop-dev-return-3452-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97313 invoked from network); 30 Aug 2006 20:07:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 20:07:55 -0000
Received: (qmail 14961 invoked by uid 500); 30 Aug 2006 20:07:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14925 invoked by uid 500); 30 Aug 2006 20:07:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14888 invoked by uid 99); 30 Aug 2006 20:07:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 13:07:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 13:07:53 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F28487142D5
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 20:04:23 +0000 (GMT)
Message-ID: <10738073.1156968263990.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 13:04:23 -0700 (PDT)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-494) hadoop utility returning exit code 0
 always
In-Reply-To: <26033669.1156952662357.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-494?page=all ]

Andrzej Bialecki  resolved HADOOP-494.
--------------------------------------

    Resolution: Duplicate
      Assignee: Andrzej Bialecki 

HADOOP-488

> hadoop utility returning exit code 0 always
> -------------------------------------------
>
>                 Key: HADOOP-494
>                 URL: http://issues.apache.org/jira/browse/HADOOP-494
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Andrzej Bialecki 
>
> After switching from 0.4.0 to 0.5.0 my scripts using the hadoop utility (mainly hadoop dfs) did not work anymore because the exit code is 0 regardless whether it is successfull or failing.
> This is obviously related to Hadoop-488, but I believe that after the fix in doMain the main routine in DFSShell.java needs to call System.exit based on return code of doMain or exception thrown.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 20:59:46 2006
Return-Path: 
 <hadoop-dev-return-3453-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16946 invoked from network); 30 Aug 2006 20:59:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 20:59:46 -0000
Received: (qmail 93442 invoked by uid 500); 30 Aug 2006 20:59:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93372 invoked by uid 500); 30 Aug 2006 20:59:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93363 invoked by uid 99); 30 Aug 2006 20:59:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 13:59:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 13:59:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E893B410011
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 20:56:23 +0000 (GMT)
Message-ID: <10966207.1156971383950.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 13:56:23 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-441?page=all ]

Arun C Murthy updated HADOOP-441:
---------------------------------

    Attachment: codec20060831.patch

Here are the updated interfaces incorporating Doug's comments:
a) The Compression{Input|Output}Streams extend {Input|Output}Streams.
b) Only the CompressionInputStream.read(byte[], int, int) & CompressionOutputStream.write(byte[],int,int) are made 'abstract' to be safe, no other interfaces are fiddled with.

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: codec.patch, codec20060831.patch, codec_updated_interfaces_20060830.patch
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 21:08:45 2006
Return-Path: 
 <hadoop-dev-return-3454-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21303 invoked from network); 30 Aug 2006 21:08:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 21:08:45 -0000
Received: (qmail 14787 invoked by uid 500); 30 Aug 2006 21:08:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14700 invoked by uid 500); 30 Aug 2006 21:08:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14691 invoked by uid 99); 30 Aug 2006 21:08:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 14:08:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 14:08:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CE90D7142D4
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 21:05:23 +0000 (GMT)
Message-ID: <1524890.1156971923843.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 14:05:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-288) RFC: Efficient file caching
In-Reply-To: <6015694.1149730109866.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-288?page=comments#action_12431689 ] 
            
Owen O'Malley commented on HADOOP-288:
--------------------------------------

Jira ate my comments again. Since I didn't realize it for a day, I'll try to reconstruct them.

They were mostly nits:

1. You add 3 new mini-cluster bring up/tear down cycles in the junit tests. It would be faster to use the same cluster with multiple jobs.
2. The fields in DistributedCache should be private instead of package local.
3. The same for the string constants in TaskTracker.
4. TaskTracker.getCacheSubdir and getJobCacheSubdir should return Path's and be package local. 
5. getJobCacheSubdir should have a String jobId as a parameter and the result should be customized for that job. Furthermore, the result should be pushed through getLocalPath so that they are spread between the local dirs. Therefore, it should be given the server's conf also.
6. runningJobs should be declared as "Map runningJobs;" instead of TreeMap. You might also consider using "Map<String, RunningJob> runningJobs;"
7. appendString should probably be promoted into StringUtils as join(String[], String).
8. the catch after the calls to launchTaskForJob should probably be rolled into the body of the method rather  than repeated.
9. MapTask.java just has space changes.
10. justPaths is public and probably should be package local (and get some java doc). 
11 getCacheArchives is kind of confusing as a name since it gets both archives and files. It should also probably not be public.

> RFC: Efficient file caching
> ---------------------------
>
>                 Key: HADOOP-288
>                 URL: http://issues.apache.org/jira/browse/HADOOP-288
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.0
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: caching.patch, caching.patch, test.jar, test.zip
>
>
> RFC: Efficient file caching 
> (on Hadoop Task nodes, for benefit of MapReduce Tasks)
> ------------------------------------------------------
> We will start implementing this soon. Please provide feedback and improvements to this plan.
> The header "Options:" indicates places where simple choices must be made.
> Problem:
> -------
> o MapReduce tasks require access to additional out-of-band data ("dictionaries")
> This out-of-band data is:
> o in addition to the map/reduce inputs.
> o large (1GB+)
> o broadcast (same data is required on all the Task nodes)
> o changes "infrequently", in particular:
> oo it is always constant for all the Tasks in a Job. 
> oo it is often constant for a month at a time 
> oo it may be shared across team members
> o sometimes used by pure-Java MapReduce programs
> o sometimes used by non-Java MapReduce programs (using Hadoop-Streaming)
> o (future) used by programs that use HDFS and Task-trackers but not MapReduce.
> Existing Solutions to the problem:
> ---------------------------------
> These solutions are not good enough. The present proposal is to do Sol 1 with caching.
> Sol 1: Pure Hadoop: package the out-of-band data in the MapReduce Job jar file.
> Sol 2: Non  Hadoop: for each task node run rsync from single source for data.
> Sol 3: Non  Hadoop: use BitTorrent, etc.
> Sol.1 is correct but slow for many reasons:
>  The Job submitter must recreate a large jar(tar) file for every Job.
>   (The jar contains both changing programs and stable dictionaries)
>  The large Jar file must be propagated from the client to HDFS with 
>  a large replication factor. 
>  At the beginning of every Task, the Task tracker gets the job jar from HDFS 
>  and unjars it in the working directory. This can dominate task execution time.
>  
> Sol.2 has nice properties but also some problems.
>  It does not scale well with large clusters (many concurrent rsync read requests i.e. single-source broadcast)
>  It assumes that Hadoop users can upload data using rsync to the cluster nodes. As a policy, this is not allowed.
>  It requires rsync.
>  
> Sol.3 alleviates the rsync scalability problems but 
>       It is a dependency on an external system. 
>       We want something simpler and more tightly integrated with Hadoop.
>       
> Staging (uploading) out-of-band data:
> ------------------------------------
> The out-of-band data will often originate on the local filesystem of a user machine 
>  (i.e. a MapReduce job submitter)
> Nevertheless it makes sense to use HDFS to store the original out-of-band data because:
> o HDFS has (wide) replication. This enables scalable broadcast later.
> o HDFS is an available channel to move data from clients to all task machines.
> o HDFS is convenient as a shared location among Hadoop team members.
> Accessing (downloading) out-of-band data:
> ----------------------------------------
> The non-Java MapReduce programs do not have or want[1] APIs for HDFS.
> Instead these programs just want to access out-of-band data as 
>  local files at predefined paths.
> ([1] Existing programs should be reusable with no changes. 
>  This is often possible bec. communication is over stdin/stdout.)
> Job's jar file as a special case:
> --------------------------------
> One use case is to allow users to make the job jar itself cachable.
> This is only useful in cases where NOTHING changes when a job is resubmitted
>  (no MapRed code changes and no changes in shipped data)
> This situation might occur with an 'extractor' job (gets data from an external source: like Nutch crawler)
> Currently the Hadoop mapred-jar mechanism works in this way:
>  the job jar data is unjarred in the "working directory" of the Task 
>  the jar contains both MapRed java code (added to classpath)
> Cache synchronization:
> ---------------------
> The efficient implementation of the out-of-band data distribution
> is mostly a cache synchronization problem.
> A list of the various aspects where choices must be made follows.
> Cache key:
> ---------
> How do you test that the cached copy is out-of-date?
> Options: 
> 1. the archive/file timestamp 
> 2. the MD5 of the archive/file content
> Comparing source and destination Timestamps is problematic bec. it assumes synchronized clocks.
> Also there is no last-modif metadata in HDFS (for good reasons, like scalability of metadata ops)
> Timestamps stored with the source ('last-propagate-time') do 
>  not require synchronized clocks, only locally monotonic time. 
> (and the worse which can happen at daylight-savings switch is a missed update or an extra-update)
> The cache code could store a copy of the local timestamp 
> in the same way that it caches the value of the content hash along with the source data.
>  
> Cachable unit:
> -------------
> Options: individual files or archives or both.
> Note:
> At the API level, directories will be processed recursively 
> (and the local FS directories will parallel HDFS directories)
> So bulk operations are always possible using directories.
> The question here is whether to handle archives as an additional bulk mechanism.
> Archives are special because:
> o unarchiving occurs transparently as part of the cache sync
> o The cache key is computed on the archive and preserved although 
>   the archive itself is not preserved.
> Supported archive format will be: tar (maybe tgz or compressed jar)
> Archive detection test: by filename extension ".tar" or ".jar"
> Suppose we don't handle archives as special files:
> Pros:
>  o less code, no discussion about which archive formats are supported
>  o fine for large dictionary files. And when files are not large, user may as well
>    put them in the Job jar as usual.
>  o user code could always check and unarchive specific cached files
>    (as a side-effect of MapRed task initialization)
> Cons:
>  o handling small files may be inefficient 
>   (multiple HDFS operations, multiple hash computation, 
>    one 'metadata' hash file along with each small file)
>  o It will not be possible to handle the Job's jar file as a special case of caching 
> Cache isolation: 
> ---------------
> In some cases it may be a problem if the cached HDFS files are updated while a Job is in progress:
> The file may become unavailable for a short period of time and some tasks fail.
> The file may change (atomically) and different tasks use a different version.
> This isolation problem is not addressed in this proposal.
> Standard solutions to the isolation problem are:
> o Assume that Jobs and interfering cache updates won't occur concurrently.
> o Put a version number in the HDFS file paths and refer to a hard-coded version in the Job code.
> o Before running the MapRed job, run a non-distributed application that tests
>   what is the latest available version of the out-of-band data. 
>   Then make this version available to the MapRed job.
>   Two ways to do this. 
>   o either set a job property just-in-time:
>     addCachePathPair("/mydata/v1234/", "localcache/mydata_latest"); 
>     (see Job Configuration for meaning of this)
>   o or publish the decision as an HDFS file containing the version.
>     then rely on user code to read the version, and manually populate the cache:
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     (see MapReduce API for meaning of this)
> Cache synchronization stages:
> ----------------------------
> There are two stages: Client-to-HDFS and HDFS-to-TaskTracker
> o Client-to-HDFS stage.
> Options: A simple option is to not do anything here, i.e. rely on the user.
> This is a reasonable option given previous remarks on the role of HDFS:
>  HDFS is a staging/publishing area and a natural shared location.
> In particular this means that the system need not track 
> where the client files come from.
> o HDFS-to-TaskTracker:
> Client-to-HDFS synchronization (if done at all) should happen before this.
> Then HDFS-to-TaskTracker synchronization must happen right before 
> the data is needed on a node.
> MapReduce cache API:
> -------------------
> Options:
> 1. No change in MapReduce framework code:
> require the user to put this logic in map() (or reduce) function:
>  in MyMapper constructor (or in map() on first record) user is asked to add:
>  
>     Cache.syncCache("/hdfs/path/fileordir", "relative/local/fileordir");
>     Cache.syncCache("..."); //etc.
>   
> -----
> 2. Put this logic in MapReduce framework and use Job properties to
>    communicate the list of pairs (hdfs path; local path)
>  
> Directories are processed recursively.
> If archives are treated specially then they are unarchived on destination.
>  
> MapReduce Job Configuration:
> ---------------------------
> Options:
> with No change in MapReduce framework code (see above)
>  no special Job configuration: 
>    it is up to the MapRed writer to configure and run the cache operations.
> ---
> with Logic in MapReduce framework (see above)
>  some simple Job configuration
> JobConf.addCachePathPair(String, String)
> JobConf.addCachePathPair("/hdfs/path/fileordir", "relative/local/fileordir");

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 21:30:54 2006
Return-Path: 
 <hadoop-dev-return-3455-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31682 invoked from network); 30 Aug 2006 21:30:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 21:30:54 -0000
Received: (qmail 54521 invoked by uid 500); 30 Aug 2006 21:30:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54505 invoked by uid 500); 30 Aug 2006 21:30:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54496 invoked by uid 99); 30 Aug 2006 21:30:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 14:30:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 14:30:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E031041001F
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 21:27:27 +0000 (GMT)
Message-ID: <14829323.1156973247915.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 14:27:27 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-492) Global counters
In-Reply-To: <5641100.1156887324032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-492?page=comments#action_12431703 ] 
            
Owen O'Malley commented on HADOOP-492:
--------------------------------------

I would propose that the JobConf defines a list of counters that is augmented with the "generic" ones like records, bytes, etc. The TaskTracker heart beat then pushes a list of longs with the status of each task as part of the heartbeats. These counters are visible as the job runs via the web/ui.

So it would look like:
  job.setCounterList("foo,bar,baz");

the Reporters pick up a new field:
   void addCounter(String counterName, long increment);


> Global counters
> ---------------
>
>                 Key: HADOOP-492
>                 URL: http://issues.apache.org/jira/browse/HADOOP-492
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>            Reporter: arkady borkovsky
>
> It would be nice to have map / reduce job keep aggregated counts for arbitrary events occuring in its tasks -- the numer of records processed, the numer of exceptions of a specific type, the number of sentences in passive voice, whatever the jobs finds useful.
> This can be implemented by tasks periodically sending <name, value> pairs to the jobtracker (in some implementations such messages are piggy-backed on the heartbeats), so that the job tracker stores all the latests values from each task and aggregates them on a request.  It should also make the aggregated values available at the job end.  The value for a task would be flushed when the task fails.
> #491 and #490 may be related to this one.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 21:32:49 2006
Return-Path: 
 <hadoop-dev-return-3456-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32812 invoked from network); 30 Aug 2006 21:32:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 21:32:49 -0000
Received: (qmail 59343 invoked by uid 500); 30 Aug 2006 21:32:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59324 invoked by uid 500); 30 Aug 2006 21:32:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59315 invoked by uid 99); 30 Aug 2006 21:32:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 14:32:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 14:32:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 36BD941001E
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 21:29:26 +0000 (GMT)
Message-ID: <11406072.1156973366221.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 14:29:26 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-441?page=comments#action_12431704 ] 
            
Doug Cutting commented on HADOOP-441:
-------------------------------------

CompressionInputStream overrides mark(), markSupported() and reset() with implementations that are identical to those of its superclass.  These can be removed, no?  close() should probably also be defined to call in.close().

CompressionOutputStream should define close() and flush() to call in.close() and in.flush(), respectively.

I still think the abstract methods are just noise.  These are performance optimizations.  A correct codec can be implemented w/o overriding these methods.  We have seen performance issues when these are not overridden and the underlying stream is unbuffered, causing a system call to be invoked for each call.  But that won't happen in this case.  Here we'd only force a method call per byte to be compressed, which is probably the way the compressor will operate anyway (byte-at-a-time).  A method call is very different than a system call.

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: codec.patch, codec20060831.patch, codec_updated_interfaces_20060830.patch
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 21:38:44 2006
Return-Path: 
 <hadoop-dev-return-3457-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38976 invoked from network); 30 Aug 2006 21:38:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 21:38:44 -0000
Received: (qmail 73058 invoked by uid 500); 30 Aug 2006 21:38:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73039 invoked by uid 500); 30 Aug 2006 21:38:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73030 invoked by uid 99); 30 Aug 2006 21:38:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 14:38:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 14:38:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B7CD0410017
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 21:35:23 +0000 (GMT)
Message-ID: <11929061.1156973723750.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 14:35:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-492) Global counters
In-Reply-To: <5641100.1156887324032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-492?page=comments#action_12431707 ] 
            
Doug Cutting commented on HADOOP-492:
-------------------------------------

Isn't this redundant with the metrics API?  Why do we need both?

> Global counters
> ---------------
>
>                 Key: HADOOP-492
>                 URL: http://issues.apache.org/jira/browse/HADOOP-492
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>            Reporter: arkady borkovsky
>
> It would be nice to have map / reduce job keep aggregated counts for arbitrary events occuring in its tasks -- the numer of records processed, the numer of exceptions of a specific type, the number of sentences in passive voice, whatever the jobs finds useful.
> This can be implemented by tasks periodically sending <name, value> pairs to the jobtracker (in some implementations such messages are piggy-backed on the heartbeats), so that the job tracker stores all the latests values from each task and aggregates them on a request.  It should also make the aggregated values available at the job end.  The value for a task would be flushed when the task fails.
> #491 and #490 may be related to this one.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 22:51:50 2006
Return-Path: 
 <hadoop-dev-return-3458-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70094 invoked from network); 30 Aug 2006 22:51:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 22:51:50 -0000
Received: (qmail 70592 invoked by uid 500); 30 Aug 2006 22:51:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70578 invoked by uid 500); 30 Aug 2006 22:51:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70569 invoked by uid 99); 30 Aug 2006 22:51:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 15:51:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 15:51:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 88436410017
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 22:48:23 +0000 (GMT)
Message-ID: <17173383.1156978103555.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 15:48:23 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-492) Global counters
In-Reply-To: <5641100.1156887324032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-492?page=comments#action_12431736 ] 
            
Milind Bhandarkar commented on HADOOP-492:
------------------------------------------

We need separate global counters because there is no way to programmatically add new metrics to the TaskMetrics class, which will (after I resubmit my TaskMetrics patch) be accumulated in JobTracker via heartbeats. OTOH, TaskMetrics could be implemented in terms of global counters.


> Global counters
> ---------------
>
>                 Key: HADOOP-492
>                 URL: http://issues.apache.org/jira/browse/HADOOP-492
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>            Reporter: arkady borkovsky
>
> It would be nice to have map / reduce job keep aggregated counts for arbitrary events occuring in its tasks -- the numer of records processed, the numer of exceptions of a specific type, the number of sentences in passive voice, whatever the jobs finds useful.
> This can be implemented by tasks periodically sending <name, value> pairs to the jobtracker (in some implementations such messages are piggy-backed on the heartbeats), so that the job tracker stores all the latests values from each task and aggregates them on a request.  It should also make the aggregated values available at the job end.  The value for a task would be flushed when the task fails.
> #491 and #490 may be related to this one.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 23:10:47 2006
Return-Path: 
 <hadoop-dev-return-3459-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77942 invoked from network); 30 Aug 2006 23:10:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 23:10:47 -0000
Received: (qmail 97955 invoked by uid 500); 30 Aug 2006 23:10:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97934 invoked by uid 500); 30 Aug 2006 23:10:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97925 invoked by uid 99); 30 Aug 2006 23:10:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 16:10:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 16:10:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 417677142D5
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 23:07:23 +0000 (GMT)
Message-ID: <32593991.1156979243265.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 16:07:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-492) Global counters
In-Reply-To: <5641100.1156887324032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-492?page=comments#action_12431742 ] 
            
Owen O'Malley commented on HADOOP-492:
--------------------------------------

In a lot of ways, this is a weaker form of HADOOP-48. The advantage of counters is that it is clear how to aggregate them across tasks to form a count for the entire job. We could do:

public class JobCounters implements Writable {
  <methods to get/set generic counters for records/bytes, whatever>
  public void add(JobCounters other);
}

and in JobConf:
  public set/getJobCounterClass(...);

and in Reporter add:
  public JobCounters getJobCounters();

and the JobCounter is sent up as part of the heartbeat.

> Global counters
> ---------------
>
>                 Key: HADOOP-492
>                 URL: http://issues.apache.org/jira/browse/HADOOP-492
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>            Reporter: arkady borkovsky
>
> It would be nice to have map / reduce job keep aggregated counts for arbitrary events occuring in its tasks -- the numer of records processed, the numer of exceptions of a specific type, the number of sentences in passive voice, whatever the jobs finds useful.
> This can be implemented by tasks periodically sending <name, value> pairs to the jobtracker (in some implementations such messages are piggy-backed on the heartbeats), so that the job tracker stores all the latests values from each task and aggregates them on a request.  It should also make the aggregated values available at the job end.  The value for a task would be flushed when the task fails.
> #491 and #490 may be related to this one.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 23:37:53 2006
Return-Path: 
 <hadoop-dev-return-3461-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86452 invoked from network); 30 Aug 2006 23:37:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 23:37:53 -0000
Received: (qmail 38665 invoked by uid 500); 30 Aug 2006 23:37:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38649 invoked by uid 500); 30 Aug 2006 23:37:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37672 invoked by uid 99); 30 Aug 2006 23:37:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 16:37:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 16:37:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0FEEB410011
	for <hadoop-dev@lucene.apache.org>; Wed, 30 Aug 2006 23:34:25 +0000 (GMT)
Message-ID: <7341704.1156980865062.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 16:34:25 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-136) Overlong UTF8's not handled well
In-Reply-To: <64235546.1145045520182.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-136?page=all ]

Owen O'Malley resolved HADOOP-136.
----------------------------------

    Resolution: Duplicate

this was fixed in 0.5

> Overlong UTF8's not handled well
> --------------------------------
>
>                 Key: HADOOP-136
>                 URL: http://issues.apache.org/jira/browse/HADOOP-136
>             Project: Hadoop
>          Issue Type: Bug
>          Components: io
>    Affects Versions: 0.2.0
>            Reporter: Dick King
>         Assigned To: Hairong Kuang
>            Priority: Minor
>             Fix For: 0.6.0
>
>         Attachments: largeutf8.patch
>
>
> When we feed an overlong string to the UTF8 constructor, two suboptimal things happen.
> First, we truncate to 0xffff/3 characters on the assumption that every character takes three bytes in UTF8.  This can truncate strings that don't need it, and it can be overoptimistic since there are characters that render as four bytes in UTF8.
> Second, the code doesn't actually handle four-byte characters.
> Third, there's a behavioral discontinuity.  If the string is "discovered" to be overlong by the arbitrary limit described above, we truncate with a log message, otherwise we signal a RuntimeException.  One feels that both forms of truncation should be treated alike.  However, this issue is concealed by the second issue; the exception will never be thrown because UTF8.utf8Length can't return more than three times the length of its input.
> I would recommend changing UTF8.utf8Length to let its caller know how many characters of the input string will actually fit if there's an overflow [perhaps by returning the negative of that number] and doing the truncation accurately as needed.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Aug 30 23:35:07 2006
Return-Path: 
 <hadoop-dev-return-3460-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85968 invoked from network); 30 Aug 2006 23:35:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 23:35:07 -0000
Received: (qmail 36610 invoked by uid 500); 30 Aug 2006 23:35:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36592 invoked by uid 500); 30 Aug 2006 23:35:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36583 invoked by uid 99); 30 Aug 2006 23:35:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 16:35:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [68.142.198.204] (HELO smtp105.sbc.mail.mud.yahoo.com)
 (68.142.198.204)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 30 Aug 2006 16:35:04 -0700
Received: (qmail 31132 invoked from network); 30 Aug 2006 23:34:43 -0000
Received: from unknown (HELO ?10.0.1.3?) (schmed7@pacbell.net@69.17.55.128
 with plain)
  by smtp105.sbc.mail.mud.yahoo.com with SMTP; 30 Aug 2006 23:34:42 -0000
Mime-Version: 1.0
Message-Id: <p06210209c11bd023660d@[10.0.1.3]>
Date: Wed, 30 Aug 2006 16:34:32 -0700
To: hadoop-dev@lucene.apache.org
From: Chris Schneider <Schmed@TransPac.com>
Subject: Making DFS safe from my fumbling fingers
Content-Type: multipart/mixed;
 boundary="============_-1055141615==_============"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--============_-1055141615==_============
Content-Type: text/plain; charset="us-ascii" ; format="flowed"

Gang,

Here's a patch I made recently that changes the behavior of dfs -rm 
so that it moves the target fille/folder into a trash folder 
(appending a timestamp) instead of deleting it. There is also a new 
dfs -emptyTrash to empty the trash (after confirming with the user). 
I sleep easier with this in place to prevent me from accidently 
deleting my entire crawl directory.

Enjoy,

- Chris
-- 
------------------------
Chris Schneider
TransPac Software, Inc.
Schmed@TransPac.com
------------------------
--============_-1055141615==_============
Content-Type: multipart/appledouble;
 boundary="============_-1055141614==_D============"

--============_-1055141614==_D============
Content-Transfer-Encoding: base64
Content-Type: application/applefile; name="%DFSShell-emptyTrash.patch"
Content-Disposition: attachment; filename="%DFSShell-emptyTrash.patch"
 ; modification-date="Wed, 30 Aug 2006 16:29:40 -0700"

AAUWBwACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAPgAAABkAAAAJAAAAVwAAACAA
AAAIAAAAdwAAABBERlNTaGVsbC1lbXB0eVRyYXNoLnBhdGNoAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAMiHl0DIh5dEttDAAMiHqi
--============_-1055141614==_D============
Content-Type: application/octet-stream; name="DFSShell-emptyTrash.patch"
Content-Disposition: attachment; filename="DFSShell-emptyTrash.patch"
Content-Transfer-Encoding: base64

SW5kZXg6IC9Vc2Vycy9zY2htZWQvUHJvamVjdHMvS3J1Z2xlL2hhZG9vcC9zcmMvamF2
YS9vcmcvYXBhY2hlL2hhZG9vcC9kZnMvREZTU2hlbGwuamF2YQo9PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09Ci0tLSAvVXNlcnMvc2NobWVkL1Byb2plY3RzL0tydWdsZS9oYWRvb3Avc3JjL2ph
dmEvb3JnL2FwYWNoZS9oYWRvb3AvZGZzL0RGU1NoZWxsLmphdmEJKHJldmlzaW9uIDI2
MTApCisrKyAvVXNlcnMvc2NobWVkL1Byb2plY3RzL0tydWdsZS9oYWRvb3Avc3JjL2ph
dmEvb3JnL2FwYWNoZS9oYWRvb3AvZGZzL0RGU1NoZWxsLmphdmEJKHdvcmtpbmcgY29w
eSkKQEAgLTE2LDYgKzE2LDggQEAKIHBhY2thZ2Ugb3JnLmFwYWNoZS5oYWRvb3AuZGZz
OwogCiBpbXBvcnQgamF2YS5pby4qOworaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRl
Rm9ybWF0OworaW1wb3J0IGphdmEudXRpbC5EYXRlOwogCiBpbXBvcnQgb3JnLmFwYWNo
ZS5oYWRvb3AuY29uZi4qOwogaW1wb3J0IG9yZy5hcGFjaGUuaGFkb29wLmZzLio7CkBA
IC0yOSw2ICszMSw3IEBACiBwdWJsaWMgY2xhc3MgREZTU2hlbGwgZXh0ZW5kcyBUb29s
QmFzZSB7CiAKICAgICBGaWxlU3lzdGVtIGZzOworICAgIFN0cmluZyB0cmFzaEZvbGRl
ck5hbWU7CiAKICAgICAvKioKICAgICAgKi8KQEAgLTM3LDYgKzQwLDggQEAKIAogICAg
IHB1YmxpYyB2b2lkIGluaXQoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgICB0
aGlzLmZzID0gRmlsZVN5c3RlbS5nZXQoY29uZik7CisgICAgICAgIC8vIDIwMDYtMDgt
MjkgQ1NjIFByb3RlY3QgdGhlIHdvcmxkIGZyb20gbXkgZGFuZ2Vyb3VzIGZpbmdlcnMh
CisgICAgICAgIHRoaXMudHJhc2hGb2xkZXJOYW1lID0gY29uZi5nZXQoImRmcy50cmFz
aC5mb2xkZXIubmFtZSIsICJ0cmFzaCIpOwogICAgIH0KICAgICAvKioKICAgICAgKiBB
ZGQgYSBsb2NhbCBmaWxlIHRvIHRoZSBpbmRpY2F0ZWQgbmFtZSBpbiBERlMuIHNyYyBp
cyBrZXB0LgpAQCAtMjI0LDE1ICsyMjksOTEgQEAKICAgICAgIEZpbGVVdGlsLmNvcHko
ZnMsIG5ldyBQYXRoKHNyY2YpLCBmcywgbmV3IFBhdGgoZHN0ZiksIGZhbHNlLCBjb25m
KTsKICAgICB9CiAKKyAgICAvLyAyMDA2LTA4LTI5IENTYyBQcm90ZWN0IHRoZSB3b3Js
ZCBmcm9tIG15IGRhbmdlcm91cyBmaW5nZXJzIQogICAgIC8qKgotICAgICAqIERlbGV0
ZSBhbiBERlMgZmlsZQorICAgICAqIE1vdmUgdGhlIHRhcmdldCBmaWxlL2ZvbGRlciBp
bnRvIHRoZSB0cmFzaCBmb2xkZXIsIGFwcGVuZGluZyBhIHRpbWVzdGFtcC4KICAgICAg
Ki8KLSAgICBwdWJsaWMgdm9pZCBkZWxldGUoU3RyaW5nIHNyY2YpIHRocm93cyBJT0V4
Y2VwdGlvbiB7Ci0gICAgICAgIGlmIChmcy5kZWxldGUobmV3IFBhdGgoc3JjZikpKSB7
Ci0gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIkRlbGV0ZWQgIiArIHNyY2Yp
OwotICAgICAgICB9IGVsc2UgewotICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxu
KCJEZWxldGUgZmFpbGVkIik7CisgICAgcHVibGljIHZvaWQgbW92ZVRvVHJhc2goU3Ry
aW5nIHNyY2YpIHRocm93cyBJT0V4Y2VwdGlvbiB7CisgICAgICBQYXRoIHNyY1BhdGgg
PSBuZXcgUGF0aChzcmNmKTsKKyAgICAgIGlmICghZnMuZXhpc3RzKHNyY1BhdGgpKSB7
CisgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihzcmNmICsgIiBkb2VzIG5vdCBleGlz
dC4iKTsKKyAgICAgICAgcmV0dXJuOworICAgICAgfQorICAgICAgbG9uZyBzcmNTaXpl
ID0gZ2V0U2l6ZShzcmNQYXRoKTsKKyAgICAgICAgICAgIAorICAgICAgUGF0aCB0cmFz
aFBhdGggPSBuZXcgUGF0aCh0cmFzaEZvbGRlck5hbWUpOworICAgICAgU2ltcGxlRGF0
ZUZvcm1hdCBzZGYgPSBuZXcgU2ltcGxlRGF0ZUZvcm1hdCgieXl5eU1NZGRISG1tc3Mi
KTsKKyAgICAgIGZzLm1rZGlycyh0cmFzaFBhdGgpOworICAgICAgZnMucmVuYW1lKHNy
Y1BhdGgsCisgICAgICAgICAgICAgICAgbmV3IFBhdGgoIHRyYXNoUGF0aCwKKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgc3JjUGF0aC5nZXROYW1lKCkgKyAiLiIgKyBzZGYu
Zm9ybWF0KG5ldyBEYXRlKCkpKSk7CisKKyAgICAgIGxvbmcgdHJhc2hTaXplID0gZ2V0
U2l6ZSh0cmFzaFBhdGgpOworICAgICAgU3lzdGVtLm91dC5wcmludGxuKCAiTW92ZWQg
IgorICAgICAgICAgICAgICAgICAgICAgICAgKyBieXRlRGVzYyhzcmNTaXplKQorICAg
ICAgICAgICAgICAgICAgICAgICAgKyAiICIKKyAgICAgICAgICAgICAgICAgICAgICAg
ICsgc3JjZgorICAgICAgICAgICAgICAgICAgICAgICAgKyAiIHRvIHRyYXNoLCB3aGlj
aCBub3cgdG90YWxzICIKKyAgICAgICAgICAgICAgICAgICAgICAgICsgYnl0ZURlc2Mo
dHJhc2hTaXplKQorICAgICAgICAgICAgICAgICAgICAgICAgKyAiLiIpOworICAgIH0K
KyAgICAKKyAgICAvKioKKyAgICAgKiBSZXR1cm4gdGhlIGRpc2sgdXNhZ2UgaW4gYnl0
ZXMgb2YgPGNvZGU+c3JjUGF0aDwvY29kZT4uCisgICAgICogQHBhcmFtIHNyY1BhdGgg
ZmlsZS9mb2xkZXIgdG8gY2hlY2sgZGlzayB1c2FnZSBvZgorICAgICAqIEB0aHJvd3Mg
SU9FeGNlcHRpb24KKyAgICAgKi8KKyAgICBwcml2YXRlIGxvbmcgZ2V0U2l6ZShQYXRo
IHNyY1BhdGgpIHRocm93cyBJT0V4Y2VwdGlvbiB7CisgICAgICBQYXRoIGl0ZW1zW10g
PSBmcy5saXN0UGF0aHMoc3JjUGF0aCk7CisgICAgICAKKyAgICAgIGlmIChpdGVtcyA9
PSBudWxsKSB7CisgICAgICAgIHRocm93IChuZXcgSU9FeGNlcHRpb24oc3JjUGF0aC50
b1N0cmluZygpICsgIiBkb2VzIG5vdCBleGlzdCIpKTsKKyAgICAgIH0KKyAgICAgIGxv
bmcgc3JjU2l6ZSA9IDA7CisgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGl0ZW1zLmxl
bmd0aDsgaSsrKSB7CisgICAgICAgIERmc1BhdGggY3VyID0gKERmc1BhdGgpIGl0ZW1z
W2ldOworICAgICAgICBzcmNTaXplICs9IGN1ci5nZXRDb250ZW50c0xlbmd0aCgpOwor
ICAgICAgfQorICAgICAgcmV0dXJuKHNyY1NpemUpOworICAgIH0KKworICAgIC8qKgor
ICAgICAqIEVtcHR5IHRoZSB0cmFzaCwgYWZ0ZXIgY29uZmlybWluZyByZXF1ZXN0IHdp
dGggdGhlIHVzZXIKKyAgICAgKi8KKyAgICBwdWJsaWMgdm9pZCBlbXB0eVRyYXNoKCkg
dGhyb3dzIElPRXhjZXB0aW9uIHsKKyAgICAgIFBhdGggdHJhc2hQYXRoID0gbmV3IFBh
dGgodHJhc2hGb2xkZXJOYW1lKTsKKyAgICAgIFBhdGggaXRlbXNbXSA9IGZzLmxpc3RQ
YXRocyh0cmFzaFBhdGgpOworICAgICAgCisgICAgICBpZiAoKGl0ZW1zID09IG51bGwp
IHx8IChpdGVtcy5sZW5ndGggPT0gMCkpIHsKKyAgICAgICAgU3lzdGVtLm91dC5wcmlu
dGxuKCJUcmFzaCBhbHJlYWR5IGVtcHR5LiIpOworICAgICAgICByZXR1cm47CisgICAg
ICB9CisgICAgICAKKyAgICAgIEJ1ZmZlcmVkUmVhZGVyIGNvbnNvbGUgPSBuZXcgQnVm
ZmVyZWRSZWFkZXIobmV3IElucHV0U3RyZWFtUmVhZGVyKFN5c3RlbS5pbikpOworICAg
ICAgYm9vbGVhbiBhYm9ydCA9IHRydWU7CisgICAgICBTeXN0ZW0ub3V0LnByaW50bG4o
ICJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcGVybWFuZW50bHkgcmVtb3ZlIGFsbCBp
dGVtcyBmcm9tIHRyYXNoICgiCisgICAgICAgICAgICAgICAgICAgICAgICArIGJ5dGVE
ZXNjKGdldFNpemUodHJhc2hQYXRoKSkKKyAgICAgICAgICAgICAgICAgICAgICAgICsg
IiksIHkgb3Igbj8iKTsKKyAgICAgIHRyeSB7CisgICAgICAgIGlmIChjb25zb2xlLnJl
YWRMaW5lKCkudHJpbSgpLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgieSIpKSB7Cisg
ICAgICAgICAgYWJvcnQgPSBmYWxzZTsKICAgICAgICAgfQorICAgICAgfSBjYXRjaCAo
SU9FeGNlcHRpb24gZSkgeworICAgICAgfQorICAgICAgaWYgKGFib3J0KSB7CisgICAg
ICAgIFN5c3RlbS5vdXQucHJpbnRsbigiTm90IGVtcHR5aW5nIHRyYXNoLiIpOworICAg
ICAgfSBlbHNlIHsKKyAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBpdGVtcy5sZW5n
dGg7IGkrKykgeworICAgICAgICAgIERmc1BhdGggY3VyID0gKERmc1BhdGgpIGl0ZW1z
W2ldOworICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbiggIlJlbW92aW5nICIKKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICArIGl0ZW1zW2ldLnRvU3RyaW5nKCkKKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICArICIgKCIKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICArIGJ5dGVEZXNjKGN1ci5nZXRDb250ZW50c0xlbmd0aCgpKQorICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICsgIikuIik7CisgICAgICAgICAgZnMuZGVs
ZXRlKGN1cik7CisgICAgICAgIH0KKyAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJU
cmFzaCBpcyBub3cgZW1wdHkuIik7CisgICAgICB9CiAgICAgfQogCiAgICAgLyoqCkBA
IC0yOTgsNyArMzc5LDcgQEAKICAgICAgICAgaWYgKGFyZ3YubGVuZ3RoIDwgMSkgewog
ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJVc2FnZTogamF2YSBERlNTaGVs
bCBbLWZzIDxsb2NhbCB8IG5hbWVub2RlOnBvcnQ+XSIrCiAgICAgICAgICAgICAgICAg
ICAgICIgWy1jb25mIDxjb25maWd1cmF0aW9uIGZpbGU+XSBbLUQgPFtwcm9wZXJ0eT12
YWx1ZT5dIisKLSAgICAgICAgICAgICAgICAgICAgIiBbLWxzIDxwYXRoPl0gWy1sc3Ig
PHBhdGg+XSBbLWR1IDxwYXRoPl0gWy1tdiA8c3JjPiA8ZHN0Pl0gWy1jcCA8c3JjPiA8
ZHN0Pl0gWy1ybSA8c3JjPl0iICsKKyAgICAgICAgICAgICAgICAgICAgIiBbLWxzIDxw
YXRoPl0gWy1sc3IgPHBhdGg+XSBbLWR1IDxwYXRoPl0gWy1tdiA8c3JjPiA8ZHN0Pl0g
Wy1jcCA8c3JjPiA8ZHN0Pl0gWy1ybSA8c3JjPl0gWy1lbXB0eVRyYXNoIDxzcmM+XSIg
KwogICAgICAgICAgICAgICAgICAgICAiIFstcHV0IDxsb2NhbHNyYz4gPGRzdD5dIFst
Y29weUZyb21Mb2NhbCA8bG9jYWxzcmM+IDxkc3Q+XSBbLW1vdmVGcm9tTG9jYWwgPGxv
Y2Fsc3JjPiA8ZHN0Pl0iICsgCiAgICAgICAgICAgICAgICAgICAgICIgWy1nZXQgPHNy
Yz4gPGxvY2FsZHN0Pl0gWy1jYXQgPHNyYz5dIFstY29weVRvTG9jYWwgPHNyYz4gPGxv
Y2FsZHN0Pl0gWy1tb3ZlVG9Mb2NhbCA8c3JjPiA8bG9jYWxkc3Q+XSIgKwogICAgICAg
ICAgICAgICAgICAgICAiIFstbWtkaXIgPHBhdGg+XSBbLXJlcG9ydF0gWy1zZXRyZXAg
Wy1SXSA8cmVwPiA8cGF0aC9maWxlPl0iKTsKQEAgLTMzNCw4ICs0MTUsMTMgQEAKICAg
ICAgICAgICAgICAgICByZW5hbWUoYXJndltpKytdLCBhcmd2W2krK10pOwogICAgICAg
ICAgICAgfSBlbHNlIGlmICgiLWNwIi5lcXVhbHMoY21kKSkgewogICAgICAgICAgICAg
ICAgIGNvcHkoYXJndltpKytdLCBhcmd2W2krK10sIGNvbmYpOworICAgICAgICAgICAg
CisgICAgICAgICAgICAvLyAyMDA2LTA4LTI5IENTYyBQcm90ZWN0IHRoZSB3b3JsZCBm
cm9tIG15IGRhbmdlcm91cyBmaW5nZXJzIQogICAgICAgICAgICAgfSBlbHNlIGlmICgi
LXJtIi5lcXVhbHMoY21kKSkgewotICAgICAgICAgICAgICAgIGRlbGV0ZShhcmd2W2kr
K10pOworICAgICAgICAgICAgICBtb3ZlVG9UcmFzaChhcmd2W2krK10pOworICAgICAg
ICAgICAgfSBlbHNlIGlmICgiLWVtcHR5VHJhc2giLmVxdWFscyhjbWQpKSB7CisgICAg
ICAgICAgICAgIGVtcHR5VHJhc2goKTsKKyAgICAgICAgICAgICAgCiAgICAgICAgICAg
ICB9IGVsc2UgaWYgKCItZHUiLmVxdWFscyhjbWQpKSB7CiAgICAgICAgICAgICAgICAg
U3RyaW5nIGFyZyA9IGkgPCBhcmd2Lmxlbmd0aCA/IGFyZ3ZbaSsrXSA6ICIiOwogICAg
ICAgICAgICAgICAgIGR1KGFyZyk7Cg==
--============_-1055141614==_D============--

--============_-1055141615==_============--

From MAILER-DAEMON Thu Aug 31 00:24:44 2006
Return-Path: 
 <hadoop-dev-return-3462-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1908 invoked from network); 31 Aug 2006 00:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 00:24:44 -0000
Received: (qmail 96186 invoked by uid 500); 31 Aug 2006 00:24:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95995 invoked by uid 500); 31 Aug 2006 00:24:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95986 invoked by uid 99); 31 Aug 2006 00:24:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 17:24:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 17:24:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 52C7741000E
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 00:21:23 +0000 (GMT)
Message-ID: <8772866.1156983683336.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 17:21:23 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-414) replace class UTF8 with class Text
In-Reply-To: <26221885.1154481854253.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-414?page=all ]

Hairong Kuang updated HADOOP-414:
---------------------------------

    Attachment: utf2text.patch

This is a partial patch to the problem including changes to packages mapred, ipc, and test.

The dfs is kept untouched. It is not trival to keep dfs  backwards compatible because writables are not versioned. Will work on it later on.

> replace class UTF8 with class Text
> ----------------------------------
>
>                 Key: HADOOP-414
>                 URL: http://issues.apache.org/jira/browse/HADOOP-414
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: utf2text.patch
>
>
> Since class UTF8 is deprecated, all references of UTF8 in hadoop should be replaced with class Text if the change does not break the system. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 02:36:47 2006
Return-Path: 
 <hadoop-dev-return-3463-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38405 invoked from network); 31 Aug 2006 02:36:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 02:36:47 -0000
Received: (qmail 19761 invoked by uid 500); 31 Aug 2006 02:36:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19674 invoked by uid 500); 31 Aug 2006 02:36:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19619 invoked by uid 99); 31 Aug 2006 02:36:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 19:36:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 19:36:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5C486410017
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 02:33:22 +0000 (GMT)
Message-ID: <3331836.1156991602375.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 19:33:22 -0700 (PDT)
From: "Lorenzo Thione (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-497) DataNodes and TaskTrackers should be
 able to report hostnames and ips relative to customizable network
 interfaces and nameservers
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DataNodes and TaskTrackers should be able to report hostnames and ips relative to customizable network interfaces and nameservers
---------------------------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-497
                 URL: http://issues.apache.org/jira/browse/HADOOP-497
             Project: Hadoop
          Issue Type: New Feature
          Components: dfs, mapred, util
    Affects Versions: 0.6.0
            Reporter: Lorenzo Thione
            Priority: Minor
         Attachments: dnsjava-2.0.2.jar, nif-utils.patch

This patch allows for network configuration parameters to be aded to the hadoop-site.xml file. These parameters specify a network interface name and an optional nameserver hostname which DataNodes and TaskTrackers consult to resolve  their hostnames from the IP bound to the specified network interface.

This is useful when machines that are part of different physical or logical network need to participate in hadoop clusters as client nodes. The hostname and IP reported by InetAddress.getLocalHost() are not necessarily the ones that will allow the JobTracker and NameNode to reach the clients, as well as not necessarily the ones through which the DFS clients can reach the DataNodes.

The configuration parameters are
 - cluster.report.nif
 - cluster.report.ns

nif: takes the name of a network interface, like en0, en1 (on macs), eth0, etc...
ns: the host name of a DNS server to use when resolving the IP bound to the specified nif

These parameters are set by default to the value "default" which will replicate the current behavior of reporting InetAddress.getLocalHost().getHostName() and getHostAddress()

As part of the patch, a new library dnsjava was added along with its license information (BSD license). The list of affected files is:

src
 org.apache.hadoop.dfs.DataNode 
 org.apache.hadoop.mapred.taskTracker 
 org.apache.hadoop.util.NetworkUtils
conf
 hadoop-default.xml
lib
 dnsjava-2.0.2.jar
 dnsjava-2.0.2.LICENSE.txt


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 04:41:45 2006
Return-Path: 
 <hadoop-dev-return-3464-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69524 invoked from network); 31 Aug 2006 04:41:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 04:41:45 -0000
Received: (qmail 56926 invoked by uid 500); 31 Aug 2006 04:41:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56749 invoked by uid 500); 31 Aug 2006 04:41:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56740 invoked by uid 99); 31 Aug 2006 04:41:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 21:41:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 21:41:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C456A410017
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 04:38:23 +0000 (GMT)
Message-ID: <23393582.1156999103801.JavaMail.jira@brutus>
Date: Wed, 30 Aug 2006 21:38:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-441) SequenceFile should support 'custom
 compressors'
In-Reply-To: <29672656.1155187633922.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-441?page=comments#action_12431778 ] 
            
Owen O'Malley commented on HADOOP-441:
--------------------------------------

I agree with Doug about the mark, markSupported and reset on CompressionInputStream.

I also agree with Doug about having close and flush on CompressionOutputStream close and flush the out stream.

I disagree that the read/write(byte[], int, int) methods are harmless. It is easy to imagine that other codecs will go through jni, like the java.util.zip compressors do. Calling through jni to compress or decompress a byte will likely be really painful. So, yes, it is _just_ a performance concern. But without it, it is very easy to forget to handle the multi-byte case and let it default to a very bad default implementation.

Finally, I think I would make the in/out fields in Compression*Stream as "final" and not "volatile" since it will match the usage and let the optimizer do a far better job.

> SequenceFile should support 'custom compressors'
> ------------------------------------------------
>
>                 Key: HADOOP-441
>                 URL: http://issues.apache.org/jira/browse/HADOOP-441
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.6.0
>
>         Attachments: codec.patch, codec20060831.patch, codec_updated_interfaces_20060830.patch
>
>
> SequenceFiles should support 'custom compressors' which can be specified by the user on creation of the file. 
> Readily available packages for gzip and zip (java.util.zip) are among obvious choices to support. Of course there will be hooks so that other compressors can be added in future as long as there is a way to construct (input/output) streams on top of the compressor/decompressor.
> The 'classname' of the 'custom compressor/decompressor' could be stored in the header of the SequenceFile which can then be used by SequenceFile.Reader to figure out the appropriate 'decompressor'. Thus I propose we add constructors to SequenceFile.Writer which take in the 'classname' of the compressor's input/output stream classes (e.g. DeflaterOutputStream/InflaterInputStream or GZIPOutputStream/GZIPInputStream), which acts as the hook for future compressors/decompressors.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 07:17:30 2006
Return-Path: 
 <hadoop-dev-return-3465-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12895 invoked from network); 31 Aug 2006 07:17:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 07:17:30 -0000
Received: (qmail 23458 invoked by uid 500); 31 Aug 2006 07:17:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23276 invoked by uid 500); 31 Aug 2006 07:17:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23267 invoked by uid 99); 31 Aug 2006 07:17:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 00:17:29 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 00:17:28 -0700
Received: from memberfamouslx (snvvpn2-10-72-76-c164.corp.yahoo.com
 [10.72.76.164])
	by mrout2-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 k7V7Gx71090919;
	Thu, 31 Aug 2006 00:17:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:cc:subject:date:message-id:mime-version:
	content-type:x-mailer:x-mimeole:thread-index;
	b=t2adY/kEj+GINKV2vNScuDA7J04TyOiKeuaQsKHN7ev9ZYAOddPy8cX2PellRowN
From: "Yoram Arnon" <yarnon@yahoo-inc.com>
To: "'Doug Cutting'" <dcutting@yahoo-inc.com>
Cc: <hadoop-dev@lucene.apache.org>
Subject: Add jira hadoop components for apps that run on top of hadoop
Date: Thu, 31 Aug 2006 00:17:00 -0700
Message-ID: <014501c6cccd$73f86b20$55d715ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0146_01C6CC92.C7999320"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcbMzXMYUuk+t+D4QQWyC3S5OKF0KQ==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0146_01C6CC92.C7999320
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Doug,

Would it make sense to create separate components in jira for the
applications that run on top of hadoop, augmenting dfs, mapred, io etc.?
I'm refering to streaming and distcp for starters, perhaps dfsshell too, and
maybe other components in the future.
It will facilitate tracking issues that relate to these components, that are
somewhat external to the core of hadoop.

Yoram

------=_NextPart_000_0146_01C6CC92.C7999320--


From MAILER-DAEMON Thu Aug 31 07:22:47 2006
Return-Path: 
 <hadoop-dev-return-3466-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15239 invoked from network); 31 Aug 2006 07:22:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 07:22:47 -0000
Received: (qmail 32327 invoked by uid 500); 31 Aug 2006 07:22:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32145 invoked by uid 500); 31 Aug 2006 07:22:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32136 invoked by uid 99); 31 Aug 2006 07:22:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 00:22:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 00:22:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 49A7541001E
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 07:19:23 +0000 (GMT)
Message-ID: <16359099.1157008763299.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 00:19:23 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-480) Streaming should support addition
 output ("side-effect")
In-Reply-To: <20318898.1156462764067.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-480?page=all ]

Yoram Arnon updated HADOOP-480:
-------------------------------

    Issue Type: Improvement  (was: Bug)

> Streaming should support addition output ("side-effect")
> --------------------------------------------------------
>
>                 Key: HADOOP-480
>                 URL: http://issues.apache.org/jira/browse/HADOOP-480
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>
>  -mapper and/or -reducer may write some files into their working directory.
> It should be possible to specify names of such files  to hadoop-streaming command so that once a task is done these files are copied into HDFS to a task-specific location.
> E.g.
> /user/name/side-output/job-ib/filename.task-id.attempt-id

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 07:29:03 2006
Return-Path: 
 <hadoop-dev-return-3467-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24874 invoked from network); 31 Aug 2006 07:29:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 07:29:03 -0000
Received: (qmail 45199 invoked by uid 500); 31 Aug 2006 07:29:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45021 invoked by uid 500); 31 Aug 2006 07:29:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45011 invoked by uid 99); 31 Aug 2006 07:29:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 00:29:02 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.109.112.28] (HELO mrout2-b.corp.dcn.yahoo.com)
 (216.109.112.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 00:29:01 -0700
Received: from memberfamouslx (snvvpn2-10-72-76-c164.corp.yahoo.com
 [10.72.76.164])
	by mrout2-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 k7V7Scgg092232;
	Thu, 31 Aug 2006 00:28:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:cc:subject:date:message-id:mime-version:
	content-type:x-mailer:in-reply-to:x-mimeole:thread-index;
	b=2hLNhLvxbobWTs+8BPFTlGf22cRfQ7MdqmoxOkTccucIbHh8m9kWi3igUWdmzfdu
From: "Yoram Arnon" <yarnon@yahoo-inc.com>
To: "'Doug Cutting'" <dcutting@yahoo-inc.com>
Cc: <hadoop-dev@lucene.apache.org>
Subject: RE: Add jira hadoop components for apps that run on top of hadoop
Date: Thu, 31 Aug 2006 00:28:37 -0700
Message-ID: <014d01c6cccf$136105e0$55d715ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_014E_01C6CC94.67022DE0"
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: 
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcbMzXMYUuk+t+D4QQWyC3S5OKF0KQAAXpcw
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_014E_01C6CC94.67022DE0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Apologies, contrib/streaming is already there.
So just distcp for now, optionally dfsshell.
Yoram

> _____________________________________________ 
> From: 	Yoram Arnon [mailto:yarnon@yahoo-inc.com] 
> Sent:	Thursday, August 31, 2006 12:17 AM
> To:	'Doug Cutting'
> Cc:	'hadoop-dev@lucene.apache.org'
> Subject:	Add jira hadoop components for apps that run on top of
> hadoop
> 
> Doug,
> 
> Would it make sense to create separate components in jira for the
> applications that run on top of hadoop, augmenting dfs, mapred, io etc.?
> I'm refering to streaming and distcp for starters, perhaps dfsshell too,
> and maybe other components in the future.
> It will facilitate tracking issues that relate to these components, that
> are somewhat external to the core of hadoop.
> 
> Yoram

------=_NextPart_000_014E_01C6CC94.67022DE0--


From MAILER-DAEMON Thu Aug 31 07:49:15 2006
Return-Path: 
 <hadoop-dev-return-3468-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35537 invoked from network); 31 Aug 2006 07:49:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 07:49:15 -0000
Received: (qmail 66903 invoked by uid 500); 31 Aug 2006 07:49:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66888 invoked by uid 500); 31 Aug 2006 07:49:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66879 invoked by uid 99); 31 Aug 2006 07:49:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 00:49:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 41345410021
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 07:45:24 +0000 (GMT)
Message-ID: <16510954.1157010324263.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 00:45:24 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-498) fsck should execute faster
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

fsck should execute faster
--------------------------

                 Key: HADOOP-498
                 URL: http://issues.apache.org/jira/browse/HADOOP-498
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
            Reporter: Yoram Arnon


on a good size dfs, with a few 100000 blocks, fsck takes around 30 minutes, while dfs -du takes only a couple of seconds.
fsck should take seconds, rather than minutes. It should be a namenode operation, not a client program.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 07:56:15 2006
Return-Path: 
 <hadoop-dev-return-3470-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38429 invoked from network); 31 Aug 2006 07:56:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 07:56:15 -0000
Received: (qmail 84914 invoked by uid 500); 31 Aug 2006 07:56:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84896 invoked by uid 500); 31 Aug 2006 07:56:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84887 invoked by uid 99); 31 Aug 2006 07:56:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 00:56:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9FA7041001E
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 07:52:24 +0000 (GMT)
Message-ID: <6122912.1157010744651.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 00:52:24 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-491) there should be a protocol for a map
 or reduce task to tell the jobtracker its alive
In-Reply-To: <12167475.1156886482398.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-491?page=all ]

Yoram Arnon updated HADOOP-491:
-------------------------------

    Component/s: contrib/streaming
                     (was: mapred)
    Description: 
The jobtracker relies on task to send heartbeats  to know the tasks are still alive.
There is a 600 seconds timeout preset.
hadoop streaming also uses output from the program it spawns to indicate progress, sending appropriate heartbeats.
Some spawned programs spend longer that 600 seconds without any output while being perfectly healthy.

It would be good to enhance the interface between hadoop streaming and the programs it spawns to track a healthy program in the absense of output.

There are certain dangers with this protocol: e.g. a task can run a separate thread that does nothing but send "i'm alive" message.   This would be a user bug to abuse the API in such way.  

  was:
Currently, the jobtracker relies on task to write something to the output to know the tasks are still alive.
There is a 600 seconds timeout preset.
Some tasks spend longer that 600 seconds without any output while being perfectly healthy.

It would be good to have an API for a task to explicitly tell the jobtracker it is alive.

There are certain dangers with this protocol: e.g. a task can run a separate thread that does nothing but send "i'm alive" message.   This would be a user bug to abuse the API in such way.  


> there should be a protocol for a map or reduce task to tell the jobtracker its alive
> ------------------------------------------------------------------------------------
>
>                 Key: HADOOP-491
>                 URL: http://issues.apache.org/jira/browse/HADOOP-491
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>
> The jobtracker relies on task to send heartbeats  to know the tasks are still alive.
> There is a 600 seconds timeout preset.
> hadoop streaming also uses output from the program it spawns to indicate progress, sending appropriate heartbeats.
> Some spawned programs spend longer that 600 seconds without any output while being perfectly healthy.
> It would be good to enhance the interface between hadoop streaming and the programs it spawns to track a healthy program in the absense of output.
> There are certain dangers with this protocol: e.g. a task can run a separate thread that does nothing but send "i'm alive" message.   This would be a user bug to abuse the API in such way.  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 07:56:05 2006
Return-Path: 
 <hadoop-dev-return-3469-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38310 invoked from network); 31 Aug 2006 07:56:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 07:56:05 -0000
Received: (qmail 83821 invoked by uid 500); 31 Aug 2006 07:56:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83803 invoked by uid 500); 31 Aug 2006 07:56:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83793 invoked by uid 99); 31 Aug 2006 07:56:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 00:56:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 00:56:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CE581410017
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 07:52:25 +0000 (GMT)
Message-ID: <15854526.1157010745842.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 00:52:25 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-491) streaming jobs should allow programs
 that don't do any IO for a long time
In-Reply-To: <12167475.1156886482398.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-491?page=all ]

Yoram Arnon updated HADOOP-491:
-------------------------------

        Summary: streaming jobs should allow programs that don't do any IO for a long time  (was: there should be a protocol for a map or reduce task to tell the jobtracker its alive)
    Description: 
The jobtracker relies on task to send heartbeats  to know the tasks are still alive.
There is a 600 seconds timeout preset.
hadoop streaming also uses input to or output from the program it spawns to indicate progress, sending appropriate heartbeats.
Some spawned programs spend longer that 600 seconds without any output while being perfectly healthy.

It would be good to enhance the interface between hadoop streaming and the programs it spawns to track a healthy program in the absense of output.

There are certain dangers with this protocol: e.g. a task can run a separate thread that does nothing but send "i'm alive" message.   This would be a user bug to abuse the API in such way.  

  was:
The jobtracker relies on task to send heartbeats  to know the tasks are still alive.
There is a 600 seconds timeout preset.
hadoop streaming also uses output from the program it spawns to indicate progress, sending appropriate heartbeats.
Some spawned programs spend longer that 600 seconds without any output while being perfectly healthy.

It would be good to enhance the interface between hadoop streaming and the programs it spawns to track a healthy program in the absense of output.

There are certain dangers with this protocol: e.g. a task can run a separate thread that does nothing but send "i'm alive" message.   This would be a user bug to abuse the API in such way.  


> streaming jobs should allow programs that don't do any IO for a long time
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-491
>                 URL: http://issues.apache.org/jira/browse/HADOOP-491
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>
> The jobtracker relies on task to send heartbeats  to know the tasks are still alive.
> There is a 600 seconds timeout preset.
> hadoop streaming also uses input to or output from the program it spawns to indicate progress, sending appropriate heartbeats.
> Some spawned programs spend longer that 600 seconds without any output while being perfectly healthy.
> It would be good to enhance the interface between hadoop streaming and the programs it spawns to track a healthy program in the absense of output.
> There are certain dangers with this protocol: e.g. a task can run a separate thread that does nothing but send "i'm alive" message.   This would be a user bug to abuse the API in such way.  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 08:06:04 2006
Return-Path: 
 <hadoop-dev-return-3471-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41200 invoked from network); 31 Aug 2006 08:06:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 08:06:04 -0000
Received: (qmail 99156 invoked by uid 500); 31 Aug 2006 08:06:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99129 invoked by uid 500); 31 Aug 2006 08:06:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99108 invoked by uid 99); 31 Aug 2006 08:06:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 01:06:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 01:05:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A11AF41001E
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 08:02:23 +0000 (GMT)
Message-ID: <4005990.1157011343657.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 01:02:23 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-493) hadoop dfs -report information is
 incorrect
In-Reply-To: <23553183.1156918702373.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-493?page=all ]

Yoram Arnon updated HADOOP-493:
-------------------------------

    Component/s: dfs

> hadoop dfs -report information is incorrect
> -------------------------------------------
>
>                 Key: HADOOP-493
>                 URL: http://issues.apache.org/jira/browse/HADOOP-493
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Yoram Arnon
>            Priority: Minor
>
> The information presented by hadoop dfs -report is incorrect.
> In the following example, the total raw bytes are correct, the used raw bytes are incorrect and should actually be on the order of 138TB.
> The total effective bytes is correct, and the actual replication factor is really a healthy 3.
> yarnon@g1010:build:942>hadoop dfs  2> /dev/null -report | head
> Total raw bytes: 240761579888640 (224226.69 Gb)
> Used raw bytes: 35934229005360 (33466.35 Gb)
> % used: 14.92%
> Total effective bytes: 47093545108964 (43859.28 Gb)
> Effective replication multiplier: 0.7630393703047027
> -------------------------------------------------
> In the following example again the total raw bytes and total effective bytes are correct, but the used raw bytes, % used and effective replication are a tad off the mark.
> hadoop  dfs 2> /dev/null -report | head
> Total raw bytes: 236476179599360 (220235.60 Gb)
> Used raw bytes: -22028236104431 (-2.15 k)
> % used: -9.31%
> Total effective bytes: 55609049637201 (51789.96 Gb)
> Effective replication multiplier: -0.39612682194976206
> -------------------------------------------------

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 08:08:29 2006
Return-Path: 
 <hadoop-dev-return-3472-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41811 invoked from network); 31 Aug 2006 08:08:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 08:08:29 -0000
Received: (qmail 8047 invoked by uid 500); 31 Aug 2006 08:08:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8027 invoked by uid 500); 31 Aug 2006 08:08:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8009 invoked by uid 99); 31 Aug 2006 08:08:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 01:08:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 01:08:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 44A5E410017
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 08:04:23 +0000 (GMT)
Message-ID: <17401336.1157011463278.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 01:04:23 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-443) optionally ignore a bad entry in
 namenode state when starting up
In-Reply-To: <3171885.1155196034014.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-443?page=all ]

Yoram Arnon updated HADOOP-443:
-------------------------------

    Component/s: dfs

> optionally ignore a bad entry in namenode state when starting up
> ----------------------------------------------------------------
>
>                 Key: HADOOP-443
>                 URL: http://issues.apache.org/jira/browse/HADOOP-443
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>
> if the namenode state (fsimage, edits) contains a bad entry, the namenode refused to start.
> Normally that's a good thing, alerting the administrator that something's corrupted.
> An option to ignore those entries is useful for recovering from such a condition. Anyone but a hard core developer would be helpless in the face of a corruption like that, and would prefer to lose a couple of records and be able to run than to be down, or remove the entire state of dfs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 08:10:00 2006
Return-Path: 
 <hadoop-dev-return-3473-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42128 invoked from network); 31 Aug 2006 08:10:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 08:10:00 -0000
Received: (qmail 10122 invoked by uid 500); 31 Aug 2006 08:09:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9944 invoked by uid 500); 31 Aug 2006 08:09:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9935 invoked by uid 99); 31 Aug 2006 08:09:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 01:09:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 01:09:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4F7BC410017
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 08:06:23 +0000 (GMT)
Message-ID: <22722826.1157011583322.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 01:06:23 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-442) slaves file should include an
 'exclude' section, to prevent "bad" datanodes and tasktrackers from
 disrupting  a cluster
In-Reply-To: <650567.1155195793928.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-442?page=all ]

Yoram Arnon updated HADOOP-442:
-------------------------------

    Component/s: conf

> slaves file should include an 'exclude' section, to prevent "bad" datanodes and tasktrackers from disrupting  a cluster
> -----------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-442
>                 URL: http://issues.apache.org/jira/browse/HADOOP-442
>             Project: Hadoop
>          Issue Type: Bug
>          Components: conf
>            Reporter: Yoram Arnon
>
> I recently had a few nodes go bad, such that they were inaccessible to ssh, but were still running their java processes.
> tasks that executed on them were failing, causing jobs to fail.
> I couldn't stop the java processes, because of the ssh issue, so I was helpless until I could actually power down these nodes.
> restarting the cluster doesn't help, even when removing the bad nodes from the slaves file - they just reconnect and are accepted.
> while we plan to avoid tasks from launching on the same nodes over and over, what I'd like is to be able to prevent rogue processes from connecting to the masters.
> Ideally, the slaves file will contain an 'exclude' section, which will list nodes that shouldn't be accessed, and should be ignored if they try to connect. That would also help in configuring the slaves file for a large cluster - I'd list the full range of machines in the cluster, then list the ones that are down in the 'exclude' section

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 08:10:02 2006
Return-Path: 
 <hadoop-dev-return-3474-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42178 invoked from network); 31 Aug 2006 08:10:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 08:10:02 -0000
Received: (qmail 10194 invoked by uid 500); 31 Aug 2006 08:10:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10180 invoked by uid 500); 31 Aug 2006 08:10:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10171 invoked by uid 99); 31 Aug 2006 08:10:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 01:10:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 01:10:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 637FE41001E
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 08:06:24 +0000 (GMT)
Message-ID: <29172538.1157011584405.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 01:06:24 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-440) In streaming, error messages issued in
 stream mappers or reducers don't go anywhere
In-Reply-To: <7246969.1155174733894.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-440?page=all ]

Yoram Arnon updated HADOOP-440:
-------------------------------

    Component/s: contrib/streaming

> In streaming, error messages issued in stream mappers or reducers don't go anywhere
> -----------------------------------------------------------------------------------
>
>                 Key: HADOOP-440
>                 URL: http://issues.apache.org/jira/browse/HADOOP-440
>             Project: Hadoop
>          Issue Type: Wish
>          Components: contrib/streaming
>            Reporter: Dick King
>
> I would like such error messages to go to the machines' logs at least.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 08:12:04 2006
Return-Path: 
 <hadoop-dev-return-3475-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42743 invoked from network); 31 Aug 2006 08:12:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 08:12:04 -0000
Received: (qmail 13604 invoked by uid 500); 31 Aug 2006 08:12:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13589 invoked by uid 500); 31 Aug 2006 08:12:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13579 invoked by uid 99); 31 Aug 2006 08:12:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 01:12:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 01:12:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 77D6F410017
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 08:08:23 +0000 (GMT)
Message-ID: <28809127.1157011703488.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 01:08:23 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-432) support undelete, snapshots, or other
 mechanism to recover lost files
In-Reply-To: <13436198.1155057493889.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-432?page=all ]

Yoram Arnon updated HADOOP-432:
-------------------------------

    Component/s: dfs

> support undelete, snapshots, or other mechanism to recover lost files
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-432
>                 URL: http://issues.apache.org/jira/browse/HADOOP-432
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Yoram Arnon
>
> currently, once you delete a file it's gone forever.
> most file systems allow some form of recovery of deleted files.
> a simple solution would be an 'undelete' command.
> a more comprehensive solution would include snapshots, manual and automatic, with scheduling options.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 15:19:51 2006
Return-Path: 
 <hadoop-dev-return-3476-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97800 invoked from network); 31 Aug 2006 15:19:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 15:19:51 -0000
Received: (qmail 68024 invoked by uid 500); 31 Aug 2006 15:19:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67781 invoked by uid 500); 31 Aug 2006 15:19:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67772 invoked by uid 99); 31 Aug 2006 15:19:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 08:19:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 08:19:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BE05B41001E
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 15:16:23 +0000 (GMT)
Message-ID: <6868053.1157037383775.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 08:16:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-488) Change ToolBase.doMain() to return a
 status code
In-Reply-To: <5191555.1156848923096.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-488?page=comments#action_12431898 ] 
            
Owen O'Malley commented on HADOOP-488:
--------------------------------------

This patch is ok since the System.exit is being called from the main instead of ToolBase. It certainly is important that dfs shell and dist cp return exit codes when they fail. I'd even be ok with having the System.exit be in ToolBase, if it was only called on failure. Basically, the end of doMain would have:

if (result != 0) {
  System.exit(result);
}

> Change ToolBase.doMain() to return a status code
> ------------------------------------------------
>
>                 Key: HADOOP-488
>                 URL: http://issues.apache.org/jira/browse/HADOOP-488
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.0
>            Reporter: Andrzej Bialecki 
>             Fix For: 0.6.0
>
>         Attachments: patch.txt
>
>
> I propose to change the signature of ToolBase.doMain from this:
>     public final void doMain(Configuration conf, String[] args) throws Exception;
> to this:
>     public final int doMain(Configuration conf, String[] args) throws Exception;
> and then change main() methods of all classes that use ToolBase.doMain to call System.exit(code), where "code" is this return value from doMain(). All command-line tools, which still call main() methods of other tools, should be converted to use doMain() and return exit codes properly.
> The main reason for this change is that returning varying exit codes is required for proper operation of shell scripts, especially differing between code == 0 (normal exit) and code != 0 (error exit).
> Additionally, current implementation of doMain() already gets the return code, it just silently discards it (ToolBase.java:184).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 15:29:45 2006
Return-Path: 
 <hadoop-dev-return-3477-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1430 invoked from network); 31 Aug 2006 15:29:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 15:29:45 -0000
Received: (qmail 84982 invoked by uid 500); 31 Aug 2006 15:29:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84853 invoked by uid 500); 31 Aug 2006 15:29:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84844 invoked by uid 99); 31 Aug 2006 15:29:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 08:29:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 08:29:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5D3AF41001E
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 15:26:23 +0000 (GMT)
Message-ID: <16183385.1157037983379.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 08:26:23 -0700 (PDT)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-488) Change ToolBase.doMain() to return a
 status code
In-Reply-To: <5191555.1156848923096.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-488?page=comments#action_12431901 ] 
            
Andrzej Bialecki  commented on HADOOP-488:
------------------------------------------

That wouldn't do - some tools may call several doMain()-s in sequence, and check their return codes, and act appropriately without exiting the JVM.

IMHO it's better to leave it as it is in the current patch, and handle System.exit in each tool's main method.

> Change ToolBase.doMain() to return a status code
> ------------------------------------------------
>
>                 Key: HADOOP-488
>                 URL: http://issues.apache.org/jira/browse/HADOOP-488
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.0
>            Reporter: Andrzej Bialecki 
>             Fix For: 0.6.0
>
>         Attachments: patch.txt
>
>
> I propose to change the signature of ToolBase.doMain from this:
>     public final void doMain(Configuration conf, String[] args) throws Exception;
> to this:
>     public final int doMain(Configuration conf, String[] args) throws Exception;
> and then change main() methods of all classes that use ToolBase.doMain to call System.exit(code), where "code" is this return value from doMain(). All command-line tools, which still call main() methods of other tools, should be converted to use doMain() and return exit codes properly.
> The main reason for this change is that returning varying exit codes is required for proper operation of shell scripts, especially differing between code == 0 (normal exit) and code != 0 (error exit).
> Additionally, current implementation of doMain() already gets the return code, it just silently discards it (ToolBase.java:184).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 16:07:43 2006
Return-Path: 
 <hadoop-dev-return-3478-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12771 invoked from network); 31 Aug 2006 16:07:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 16:07:43 -0000
Received: (qmail 49028 invoked by uid 500); 31 Aug 2006 16:07:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48848 invoked by uid 500); 31 Aug 2006 16:07:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48839 invoked by uid 99); 31 Aug 2006 16:07:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 09:07:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.192.81] (HELO rwcrmhc11.comcast.net) (204.127.192.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 09:07:40 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc11) with ESMTP
          id <20060831160717m1100ivc8me>; Thu, 31 Aug 2006 16:07:17 +0000
Message-ID: <44F70950.2050101@apache.org>
Date: Thu, 31 Aug 2006 09:07:44 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Add jira hadoop components for apps that run on top of hadoop
References: <014501c6cccd$73f86b20$55d715ac@ds.corp.yahoo.com>
In-Reply-To: <014501c6cccd$73f86b20$55d715ac@ds.corp.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yoram Arnon wrote:
> Would it make sense to create separate components in jira for the
> applications that run on top of hadoop, augmenting dfs, mapred, io etc.?
> I'm refering to streaming and distcp for starters, perhaps dfsshell too, and
> maybe other components in the future.
> It will facilitate tracking issues that relate to these components, that are
> somewhat external to the core of hadoop.

We already have a Jira category for streaming (contrib/streaming).

All categories (except "documentation") correspond to Java packages.  So 
CopyFiles issues should be in the "util" category, until we decide to 
move CopyFiles to another package (fs?).  DfsShell is in the dfs 
package, so its bugs should go in the dfs component.  Perhaps dfs should 
be broken into sub-packages.

I think this is a good approach, as it should help to encourage us to 
keep a well-structured package tree.  If something deserves a separate 
issue category, then it probably deserves a separate package.  Util is 
the most abused package.  I think it should only have stuff that's 
analagous to the stuff in java.util--generic datastructures, etc.  But 
it currently has a mish-mash of stuff, including some fs stuff (like 
CopyFiles and DiskChecker).

Javadoc also facilitates per-package documentation, by placing a 
package.html in the source tree.  Thus a well-organized package tree 
also facilitates well-organized documentation.

Doug

From MAILER-DAEMON Thu Aug 31 16:23:34 2006
Return-Path: 
 <hadoop-dev-return-3479-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18577 invoked from network); 31 Aug 2006 16:23:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 16:23:34 -0000
Received: (qmail 78039 invoked by uid 500); 31 Aug 2006 16:23:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77954 invoked by uid 500); 31 Aug 2006 16:23:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77945 invoked by uid 99); 31 Aug 2006 16:23:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 09:23:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [84.96.21.10] (HELO trinity.anyware-tech.com) (84.96.21.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 09:23:33 -0700
Received: from localhost (localhost [127.0.0.1])
	by trinity.anyware-tech.com (Postfix) with ESMTP id 0B45A40007E
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 18:23:12 +0200 (CEST)
Received: from trinity.anyware-tech.com ([127.0.0.1])
	by localhost (trinity.anyware-tech.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 12471-03 for <hadoop-dev@lucene.apache.org>;
	Thu, 31 Aug 2006 18:23:10 +0200 (CEST)
Received: from [10.0.2.28] (io.anyware [10.0.2.28])
	by trinity.anyware-tech.com (Postfix) with ESMTP id EB7FF40007C
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 18:23:10 +0200 (CEST)
Message-ID: <44F70CEC.8060900@anyware-tech.com>
Date: Thu, 31 Aug 2006 18:23:08 +0200
From: =?ISO-8859-1?Q?Fr=E9d=E9ric_Bertin?=
 <frederic.bertin@anyware-tech.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: eclipse-based gui to browse a HDFS or launch MR jobs
Content-Type: multipart/alternative;
 boundary="------------010300030905030901030409"
X-Virus-Scanned: Debian amavisd-new at anyware-tech.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------010300030905030901030409
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi all,

to increase productivity in our current project (which makes a heavy use 
of Hadoop), I wrote a small Eclipse-based GUI application which 
basically consists in 2 views:

    *  a HDFS explorer adapted from Eclipse filesystem explorer example.
      For now, it includes the following features:
          o classical tree-based browsing interface, with directory
            content being detailed in a 3 columns table (file name, file
            size, file type)
          o refresh button
          o delete file or directory (with confirm dialog): select files
            in the tree or table and click the "Delete" button
          o rename file or directory: simple click on the file in the
            table, type the new name and validate
          o open file with system editor: select the file in the table
            and click "Open" button (works on Windows, not on Linux)
          o internal drag & drop
          o external drag & drop from the local filesystem to the HDFS
            (the opposite doesn't work)

    * a MapReduce *very* simple job launcher:
          o select the job XML configuration file
          o run the job
          o kill the job
          o visualize map and reduce progress with progress bars
          o open a browser on the Hadoop job tracker web interface

Do you see any interest for such a tool in Hadoop (or in a connate 
project)? If yes, I see no problem contributing it. However I don't know 
what is your current thinking about providing Hadoop with some GUI 
functions? Indeed it may overlap with the current Web-based interface.

WDYT?


Fred

--------------010300030905030901030409--

From MAILER-DAEMON Thu Aug 31 16:33:45 2006
Return-Path: 
 <hadoop-dev-return-3480-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21132 invoked from network); 31 Aug 2006 16:33:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 16:33:45 -0000
Received: (qmail 2552 invoked by uid 500); 31 Aug 2006 16:33:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2381 invoked by uid 500); 31 Aug 2006 16:33:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2372 invoked by uid 99); 31 Aug 2006 16:33:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 09:33:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 09:33:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 71BA941001E
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 16:30:23 +0000 (GMT)
Message-ID: <31884656.1157041823463.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 09:30:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-492) Global counters
In-Reply-To: <5641100.1156887324032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-492?page=comments#action_12431909 ] 
            
Doug Cutting commented on HADOOP-492:
-------------------------------------

For the third time: why can't we use the Metrics API here?  This is precisely the sort of thing it was designed for, no?

Milind says, "there is no way to programmatically add new metrics to the TaskMetrics class".  Okay, so we shouldn't use TaskMetrics for this.  But shouldn't we use a MetricsRecord?

If we use MetricsRecord to collect metrics, then we need to decide how to aggregate these.  We could use Ganglia, or we could aggregate over heartbeats, having the JobTracker and TaskTracker implement a MetricsContext.

> Global counters
> ---------------
>
>                 Key: HADOOP-492
>                 URL: http://issues.apache.org/jira/browse/HADOOP-492
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>            Reporter: arkady borkovsky
>
> It would be nice to have map / reduce job keep aggregated counts for arbitrary events occuring in its tasks -- the numer of records processed, the numer of exceptions of a specific type, the number of sentences in passive voice, whatever the jobs finds useful.
> This can be implemented by tasks periodically sending <name, value> pairs to the jobtracker (in some implementations such messages are piggy-backed on the heartbeats), so that the job tracker stores all the latests values from each task and aggregates them on a request.  It should also make the aggregated values available at the job end.  The value for a task would be flushed when the task fails.
> #491 and #490 may be related to this one.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 16:48:47 2006
Return-Path: 
 <hadoop-dev-return-3481-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24728 invoked from network); 31 Aug 2006 16:48:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 16:48:47 -0000
Received: (qmail 26473 invoked by uid 500); 31 Aug 2006 16:48:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26455 invoked by uid 500); 31 Aug 2006 16:48:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26446 invoked by uid 99); 31 Aug 2006 16:48:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 09:48:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 09:48:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9CA3E7142E8
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 16:45:25 +0000 (GMT)
Message-ID: <18093590.1157042725639.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 09:45:25 -0700 (PDT)
From: "Sami Siren (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-196) Fix buggy uselessness of
 Configuration( Configuration other) constructor
In-Reply-To: <32654100.1146779418355.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-196?page=all ]

Sami Siren updated HADOOP-196:
------------------------------

    Attachment: hadoop-conf-patch.txt

Attached patch fixes problem with current implementation, dynamically set properties are now preserved. Extension to testcase is also provided.

> Fix buggy uselessness of Configuration( Configuration other) constructor
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-196
>                 URL: http://issues.apache.org/jira/browse/HADOOP-196
>             Project: Hadoop
>          Issue Type: Bug
>          Components: conf
>    Affects Versions: 0.5.0
>            Reporter: alan wootton
>         Attachments: ConfigConstructorFix.patch, hadoop-conf-patch.txt
>
>
> The constructor 
> public Configuration(Configuration other) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 16:48:49 2006
Return-Path: 
 <hadoop-dev-return-3482-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24748 invoked from network); 31 Aug 2006 16:48:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 16:48:49 -0000
Received: (qmail 26694 invoked by uid 500); 31 Aug 2006 16:48:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26662 invoked by uid 500); 31 Aug 2006 16:48:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26653 invoked by uid 99); 31 Aug 2006 16:48:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 09:48:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 09:48:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 217A17142EB
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 16:45:27 +0000 (GMT)
Message-ID: <24795897.1157042727134.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 09:45:27 -0700 (PDT)
From: "Sami Siren (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-196) Fix buggy uselessness of
 Configuration( Configuration other) constructor
In-Reply-To: <32654100.1146779418355.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-196?page=all ]

Sami Siren updated HADOOP-196:
------------------------------

               Status: Patch Available  (was: Open)
    Affects Version/s: 0.5.0

> Fix buggy uselessness of Configuration( Configuration other) constructor
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-196
>                 URL: http://issues.apache.org/jira/browse/HADOOP-196
>             Project: Hadoop
>          Issue Type: Bug
>          Components: conf
>    Affects Versions: 0.5.0
>            Reporter: alan wootton
>         Attachments: ConfigConstructorFix.patch, hadoop-conf-patch.txt
>
>
> The constructor 
> public Configuration(Configuration other) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 17:05:45 2006
Return-Path: 
 <hadoop-dev-return-3483-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29866 invoked from network); 31 Aug 2006 17:05:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 17:05:45 -0000
Received: (qmail 56087 invoked by uid 500); 31 Aug 2006 17:05:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56052 invoked by uid 500); 31 Aug 2006 17:05:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56043 invoked by uid 99); 31 Aug 2006 17:05:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 10:05:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 10:05:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 553347142E8
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 17:02:23 +0000 (GMT)
Message-ID: <9265176.1157043743346.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 10:02:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-414) replace class UTF8 with class Text
In-Reply-To: <26221885.1154481854253.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-414?page=comments#action_12431919 ] 
            
Doug Cutting commented on HADOOP-414:
-------------------------------------

It would be nice if RPC.Invocation were versioned, since you've changed its format.  Old clients talking to new servers (and vice versa) will fail.  It would be nice if these failures were accompanied by version-mismatch exceptions.

What if we start sending #xFF at the start of an Invocation as the version?  The first thing read by the old code is the method name, a UTF8.  So if old client code talks to a new daemon, then, unless the method name has 2^16-1 characters, we could log a version-mismatch and close the connection.  With a bit more work, we could even construct a version-mismatch error (using UTF8) that the client could read.

If new client code talks to an old server, the old server would try to read a method name with 2^16-1 bytes, log an EOF error and close the connection.  Is that acceptable?

Or should we punt on this?


> replace class UTF8 with class Text
> ----------------------------------
>
>                 Key: HADOOP-414
>                 URL: http://issues.apache.org/jira/browse/HADOOP-414
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.5.0
>            Reporter: Hairong Kuang
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>         Attachments: utf2text.patch
>
>
> Since class UTF8 is deprecated, all references of UTF8 in hadoop should be replaced with class Text if the change does not break the system. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 17:19:46 2006
Return-Path: 
 <hadoop-dev-return-3484-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33661 invoked from network); 31 Aug 2006 17:19:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 17:19:46 -0000
Received: (qmail 87031 invoked by uid 500); 31 Aug 2006 17:19:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87011 invoked by uid 500); 31 Aug 2006 17:19:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87002 invoked by uid 99); 31 Aug 2006 17:19:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 10:19:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 10:19:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7B7A041001E
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 17:16:24 +0000 (GMT)
Message-ID: <3024623.1157044584503.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 10:16:24 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-439) Streaming does not work for text data
 if the records don't fit in a short UTF8 [2^16/3 characters]
In-Reply-To: <8502499.1155174613900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-439?page=all ]

Sameer Paranjpye reassigned HADOOP-439:
---------------------------------------

    Assignee: Hairong Kuang  (was: Michel Tourn)

> Streaming does not work for text data if the records don't fit in a short UTF8 [2^16/3 characters]
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-439
>                 URL: http://issues.apache.org/jira/browse/HADOOP-439
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Dick King
>         Assigned To: Hairong Kuang
>            Priority: Critical
>             Fix For: 0.6.0
>
>
> The streaming code internally reads the input data into a UTF8 .  This causes truncated data to be shipped to the mapper when the input exceeds about 21000 characters, with no notice to the user except possibly in individual tasks' machines' logs, which people would not normally read for apparently successful jobs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 17:19:48 2006
Return-Path: 
 <hadoop-dev-return-3485-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33735 invoked from network); 31 Aug 2006 17:19:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 17:19:48 -0000
Received: (qmail 87343 invoked by uid 500); 31 Aug 2006 17:19:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87320 invoked by uid 500); 31 Aug 2006 17:19:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87311 invoked by uid 99); 31 Aug 2006 17:19:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 10:19:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 10:19:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4FC9B410021
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 17:16:26 +0000 (GMT)
Message-ID: <31944826.1157044586324.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 10:16:26 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-71) The SequenceFileRecordReader uses the
 default FileSystem rather than the supplied one
In-Reply-To: <539883049.1141863519345.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-71?page=all ]

Sameer Paranjpye reassigned HADOOP-71:
--------------------------------------

    Assignee: Wendy Chien  (was: Owen O'Malley)

> The SequenceFileRecordReader uses the default FileSystem rather than the supplied one
> -------------------------------------------------------------------------------------
>
>                 Key: HADOOP-71
>                 URL: http://issues.apache.org/jira/browse/HADOOP-71
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Owen O'Malley
>         Assigned To: Wendy Chien
>             Fix For: 0.6.0
>
>         Attachments: explicit-fs.patch
>
>
> The mapred.TestSequenceFileInputFormat test was failing when run with a conf directory that pointed to a dfs cluster. The reason was that SequenceFileRecordReader was using the default FileSystem from the config, while the test program was assuming the "local" file system was being used.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 17:21:46 2006
Return-Path: 
 <hadoop-dev-return-3486-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34944 invoked from network); 31 Aug 2006 17:21:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 17:21:46 -0000
Received: (qmail 93209 invoked by uid 500); 31 Aug 2006 17:21:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93183 invoked by uid 500); 31 Aug 2006 17:21:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93167 invoked by uid 99); 31 Aug 2006 17:21:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 10:21:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 10:21:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 601A5410020
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 17:18:24 +0000 (GMT)
Message-ID: <30256107.1157044704391.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 10:18:24 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-268) TaskTracker latency is slowing down
 maps because progress reporting is done inline
In-Reply-To: <13624142.1149185609819.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-268?page=all ]

Sameer Paranjpye reassigned HADOOP-268:
---------------------------------------

    Assignee: Sanjay Dahiya  (was: Sameer Paranjpye)

> TaskTracker latency is slowing down maps because progress reporting is done inline
> ----------------------------------------------------------------------------------
>
>                 Key: HADOOP-268
>                 URL: http://issues.apache.org/jira/browse/HADOOP-268
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.2.1
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.6.0
>
>
> Moving the progress reporter to a separate thread should free up the user application to run faster.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 17:36:45 2006
Return-Path: 
 <hadoop-dev-return-3487-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38802 invoked from network); 31 Aug 2006 17:36:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 17:36:45 -0000
Received: (qmail 22701 invoked by uid 500); 31 Aug 2006 17:36:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22613 invoked by uid 500); 31 Aug 2006 17:36:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22604 invoked by uid 99); 31 Aug 2006 17:36:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 10:36:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 10:36:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 59C187142F0
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 17:33:23 +0000 (GMT)
Message-ID: <13700460.1157045603364.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 10:33:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-497) DataNodes and TaskTrackers should be
 able to report hostnames and ips relative to customizable network
 interfaces and nameservers
In-Reply-To: <3331836.1156991602375.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-497?page=comments#action_12431926 ] 
            
Doug Cutting commented on HADOOP-497:
-------------------------------------

I'm not sure why you need the dnsjava library.  At a glance, it seems you could instead set sun.net.spi.nameservice.nameservers and then use the java.net.NetworkInterface to find which hostnames correspond to a particular interface.  Why doesn't that work?

A few nits with the code:

- It should probably be named net/DNS.java, insead of util/NetworkUtils.java.  The util package is already a mess.

- The descriptions of the new config properties only mention tasktracker and jobtracker, but the options are also valid for datanode and namenode.  I would also name these properties something like net.dns.interface and net.interface.nameserver.

- The new class and all its public members should have informative javadoc comments.  if we add a new package, it should have a package.html with at least a one-line description of the package.


> DataNodes and TaskTrackers should be able to report hostnames and ips relative to customizable network interfaces and nameservers
> ---------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-497
>                 URL: http://issues.apache.org/jira/browse/HADOOP-497
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred, dfs, util
>    Affects Versions: 0.6.0
>            Reporter: Lorenzo Thione
>            Priority: Minor
>         Attachments: dnsjava-2.0.2.jar, nif-utils.patch
>
>
> This patch allows for network configuration parameters to be aded to the hadoop-site.xml file. These parameters specify a network interface name and an optional nameserver hostname which DataNodes and TaskTrackers consult to resolve  their hostnames from the IP bound to the specified network interface.
> This is useful when machines that are part of different physical or logical network need to participate in hadoop clusters as client nodes. The hostname and IP reported by InetAddress.getLocalHost() are not necessarily the ones that will allow the JobTracker and NameNode to reach the clients, as well as not necessarily the ones through which the DFS clients can reach the DataNodes.
> The configuration parameters are
>  - cluster.report.nif
>  - cluster.report.ns
> nif: takes the name of a network interface, like en0, en1 (on macs), eth0, etc...
> ns: the host name of a DNS server to use when resolving the IP bound to the specified nif
> These parameters are set by default to the value "default" which will replicate the current behavior of reporting InetAddress.getLocalHost().getHostName() and getHostAddress()
> As part of the patch, a new library dnsjava was added along with its license information (BSD license). The list of affected files is:
> src
>  org.apache.hadoop.dfs.DataNode 
>  org.apache.hadoop.mapred.taskTracker 
>  org.apache.hadoop.util.NetworkUtils
> conf
>  hadoop-default.xml
> lib
>  dnsjava-2.0.2.jar
>  dnsjava-2.0.2.LICENSE.txt

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 17:43:32 2006
Return-Path: 
 <hadoop-dev-return-3488-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40194 invoked from network); 31 Aug 2006 17:43:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 17:43:32 -0000
Received: (qmail 34044 invoked by uid 500); 31 Aug 2006 17:43:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34028 invoked by uid 500); 31 Aug 2006 17:43:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34019 invoked by uid 99); 31 Aug 2006 17:43:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 10:43:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.192.84] (HELO rwcrmhc14.comcast.net) (204.127.192.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 10:43:30 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc14) with ESMTP
          id <20060831174309m140043u2he>; Thu, 31 Aug 2006 17:43:09 +0000
Message-ID: <44F71FC8.4060208@apache.org>
Date: Thu, 31 Aug 2006 10:43:36 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: eclipse-based gui to browse a HDFS or launch MR jobs
References: <44F70CEC.8060900@anyware-tech.com>
In-Reply-To: <44F70CEC.8060900@anyware-tech.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This sounds like it might make a good contrib module.  Please submit a 
"new feature" issue and attach it as a patch.

Thanks!

Doug

Frdric Bertin wrote:
> Hi all,
> 
> to increase productivity in our current project (which makes a heavy use 
> of Hadoop), I wrote a small Eclipse-based GUI application which 
> basically consists in 2 views:
> 
>    *  a HDFS explorer adapted from Eclipse filesystem explorer example.
>      For now, it includes the following features:
>          o classical tree-based browsing interface, with directory
>            content being detailed in a 3 columns table (file name, file
>            size, file type)
>          o refresh button
>          o delete file or directory (with confirm dialog): select files
>            in the tree or table and click the "Delete" button
>          o rename file or directory: simple click on the file in the
>            table, type the new name and validate
>          o open file with system editor: select the file in the table
>            and click "Open" button (works on Windows, not on Linux)
>          o internal drag & drop
>          o external drag & drop from the local filesystem to the HDFS
>            (the opposite doesn't work)
> 
>    * a MapReduce *very* simple job launcher:
>          o select the job XML configuration file
>          o run the job
>          o kill the job
>          o visualize map and reduce progress with progress bars
>          o open a browser on the Hadoop job tracker web interface
> 
> Do you see any interest for such a tool in Hadoop (or in a connate 
> project)? If yes, I see no problem contributing it. However I don't know 
> what is your current thinking about providing Hadoop with some GUI 
> functions? Indeed it may overlap with the current Web-based interface.
> 
> WDYT?
> 
> 
> Fred
> 

From MAILER-DAEMON Thu Aug 31 18:15:47 2006
Return-Path: 
 <hadoop-dev-return-3489-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47266 invoked from network); 31 Aug 2006 18:15:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 18:15:47 -0000
Received: (qmail 96229 invoked by uid 500); 31 Aug 2006 18:15:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96049 invoked by uid 500); 31 Aug 2006 18:15:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96040 invoked by uid 99); 31 Aug 2006 18:15:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:15:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:15:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DB6AD410021
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 18:12:24 +0000 (GMT)
Message-ID: <23298510.1157047944896.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 11:12:24 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-90) DFS is succeptible to data loss in
 case of name node failure
In-Reply-To: <726654166.1142563875329.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-90?page=all ]

Sameer Paranjpye reassigned HADOOP-90:
--------------------------------------

    Assignee: Konstantin Shvachko

> DFS is succeptible to data loss in case of name node failure
> ------------------------------------------------------------
>
>                 Key: HADOOP-90
>                 URL: http://issues.apache.org/jira/browse/HADOOP-90
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.1.0
>            Reporter: Yoram Arnon
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>         Attachments: multipleEditsDest.patch
>
>
> Currently, DFS name node stores its log and state in local files.
> This has the disadvantage that a hardware failure of the name node causes a total data loss. 
> Several approaches may be used to address this flaw:
> 1. replicate the name server state files using copy or rsync once in a while, either manually or using a cron job.
> 2. set up secondary name servers and a protocol whereby the primary updates the secondaries. In case of failure, a secondary can take over.
> 3. store the state files as distributed, replicated files in the DFS itself. The difficulty is that it becomes a bootstrap problem, where the name node needs some information, typically stored in its state files, in order to read those same state files.
> solution 1 is fine for non critical systems, but for systems that need to guarantee no data loss it's insufficient.
> Solutions 2 and 3 both seem valid; 3 seems more elegant in that it doesn't require an extra protocol, it leverages the DFS and allows any level of replication for robustness. Below is a proposition for  solution 3.
> 1.	The name node, when it starts up, needs some basic information. That information is not large and can easily be stored in a single block of DFS. We hard code the block location, using block id 0. Block 0 will contain the list of blocks that contain the name node metadata - not the metadata itself (file names, servers, blocks etc), just the list of blocks that contain it. With a block identified by 8 bytes, and 32 MB blocks, we can fit 256K block id's in block 0. 256K blocks of 32MB each can hold 8TB of metadata, which can map a large enough file system, so a single block of block_ids is sufficient.
> 2.	The name node writes his state basically the same way as now: log file plus occasional full state. DFS needs to change to commit changes to open files while allowing continued writing to them, or else the log file wouldn't be valid on name server failure, before the file is closed. 
> 3.	The name node will use double buffering for its state, using blocks 0 and 1. Starting with block 0, it writes its state, then a log of changes. When it's time to write a new state it writes it to node 1. The state includes a generation number, a single byte starting at 0, to enable the name server to identify the valid state. A CRC is written at the end of the block to mark its validity and completeness. The log file is identified by the same generation number as the state it relates to. 
> 4.	The log file will be limited to a single block as well. When that block fills up a new state is written. 32MB of transaction logs should suffice. If not, we could set aside a set of blocks, and set aside a few locations in the super-block (block 0/1) to store that set of block ids.
> 5.	The super-block, the log and the metadata blocks may be exposed as read only files in reserved files in the DFS: /.metadata/* or something.
> 6.	When a name nodes starts, it waits for data nodes to connect to it to report their blocks. It waits until it gets a report about blocks 0 and 1, from which it can continue to read its entire state. After that it continues normally.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 18:15:54 2006
Return-Path: 
 <hadoop-dev-return-3490-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47305 invoked from network); 31 Aug 2006 18:15:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 18:15:54 -0000
Received: (qmail 96282 invoked by uid 500); 31 Aug 2006 18:15:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96264 invoked by uid 500); 31 Aug 2006 18:15:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96255 invoked by uid 99); 31 Aug 2006 18:15:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:15:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:15:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0F202410026
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 18:12:27 +0000 (GMT)
Message-ID: <27367716.1157047947059.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 11:12:27 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-90) DFS is succeptible to data loss in case
 of name node failure
In-Reply-To: <726654166.1142563875329.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-90?page=all ]

Sameer Paranjpye updated HADOOP-90:
-----------------------------------

    Fix Version/s: 0.6.0

> DFS is succeptible to data loss in case of name node failure
> ------------------------------------------------------------
>
>                 Key: HADOOP-90
>                 URL: http://issues.apache.org/jira/browse/HADOOP-90
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.1.0
>            Reporter: Yoram Arnon
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>         Attachments: multipleEditsDest.patch
>
>
> Currently, DFS name node stores its log and state in local files.
> This has the disadvantage that a hardware failure of the name node causes a total data loss. 
> Several approaches may be used to address this flaw:
> 1. replicate the name server state files using copy or rsync once in a while, either manually or using a cron job.
> 2. set up secondary name servers and a protocol whereby the primary updates the secondaries. In case of failure, a secondary can take over.
> 3. store the state files as distributed, replicated files in the DFS itself. The difficulty is that it becomes a bootstrap problem, where the name node needs some information, typically stored in its state files, in order to read those same state files.
> solution 1 is fine for non critical systems, but for systems that need to guarantee no data loss it's insufficient.
> Solutions 2 and 3 both seem valid; 3 seems more elegant in that it doesn't require an extra protocol, it leverages the DFS and allows any level of replication for robustness. Below is a proposition for  solution 3.
> 1.	The name node, when it starts up, needs some basic information. That information is not large and can easily be stored in a single block of DFS. We hard code the block location, using block id 0. Block 0 will contain the list of blocks that contain the name node metadata - not the metadata itself (file names, servers, blocks etc), just the list of blocks that contain it. With a block identified by 8 bytes, and 32 MB blocks, we can fit 256K block id's in block 0. 256K blocks of 32MB each can hold 8TB of metadata, which can map a large enough file system, so a single block of block_ids is sufficient.
> 2.	The name node writes his state basically the same way as now: log file plus occasional full state. DFS needs to change to commit changes to open files while allowing continued writing to them, or else the log file wouldn't be valid on name server failure, before the file is closed. 
> 3.	The name node will use double buffering for its state, using blocks 0 and 1. Starting with block 0, it writes its state, then a log of changes. When it's time to write a new state it writes it to node 1. The state includes a generation number, a single byte starting at 0, to enable the name server to identify the valid state. A CRC is written at the end of the block to mark its validity and completeness. The log file is identified by the same generation number as the state it relates to. 
> 4.	The log file will be limited to a single block as well. When that block fills up a new state is written. 32MB of transaction logs should suffice. If not, we could set aside a set of blocks, and set aside a few locations in the super-block (block 0/1) to store that set of block ids.
> 5.	The super-block, the log and the metadata blocks may be exposed as read only files in reserved files in the DFS: /.metadata/* or something.
> 6.	When a name nodes starts, it waits for data nodes to connect to it to report their blocks. It waits until it gets a report about blocks 0 and 1, from which it can continue to read its entire state. After that it continues normally.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 18:18:46 2006
Return-Path: 
 <hadoop-dev-return-3491-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47833 invoked from network); 31 Aug 2006 18:18:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 18:18:46 -0000
Received: (qmail 5596 invoked by uid 500); 31 Aug 2006 18:18:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5575 invoked by uid 500); 31 Aug 2006 18:18:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5566 invoked by uid 99); 31 Aug 2006 18:18:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:18:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:18:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5435741001F
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 18:15:23 +0000 (GMT)
Message-ID: <3067131.1157048123342.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 11:15:23 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-95) dfs validation
In-Reply-To: <20690330.1142645739705.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-95?page=comments#action_12431933 ] 
            
Sameer Paranjpye commented on HADOOP-95:
----------------------------------------

Is this issue still pertinent? We have an fsck utility and TestDFSIO has been committed via a separate JIRA issue.

> dfs validation
> --------------
>
>                 Key: HADOOP-95
>                 URL: http://issues.apache.org/jira/browse/HADOOP-95
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.1.0
>            Reporter: Hairong Kuang
>         Attachments: AccumulatingReducer.java, IOMapperAdapter.java, TestDFSIO.java, TestReadFS.java
>
>
> Dfs needs a validation operation similiar to fsck, so that we get to know the files that are corrupted and which data blocks are missing.
> Dfs namenode also needs to log more specific information such as which block is replication or is deleted. So when something goes wrong, we have a clue what has happened.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 18:21:25 2006
Return-Path: 
 <hadoop-dev-return-3492-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48346 invoked from network); 31 Aug 2006 18:21:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 18:21:25 -0000
Received: (qmail 7978 invoked by uid 500); 31 Aug 2006 18:21:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7953 invoked by uid 500); 31 Aug 2006 18:21:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7944 invoked by uid 99); 31 Aug 2006 18:21:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:21:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.192.84] (HELO rwcrmhc14.comcast.net) (204.127.192.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:21:24 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc14) with ESMTP
          id <20060831182103m14004679ce>; Thu, 31 Aug 2006 18:21:03 +0000
Message-ID: <44F728AA.1000805@apache.org>
Date: Thu, 31 Aug 2006 11:21:30 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Google Research Publication: BigTable
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It seems there's finally a publication on BigTable:

http://labs.google.com/papers/bigtable.html

Doug

From MAILER-DAEMON Thu Aug 31 18:39:48 2006
Return-Path: 
 <hadoop-dev-return-3493-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53527 invoked from network); 31 Aug 2006 18:39:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 18:39:48 -0000
Received: (qmail 43155 invoked by uid 500); 31 Aug 2006 18:39:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43127 invoked by uid 500); 31 Aug 2006 18:39:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43091 invoked by uid 99); 31 Aug 2006 18:39:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:39:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:39:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A583141001F
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 18:36:23 +0000 (GMT)
Message-ID: <20348350.1157049383675.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 11:36:23 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-422) ant test is failing with TestLocalDFS
 and TestMiniMRWithDFS failing
In-Reply-To: <33030538.1154569874915.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-422?page=all ]

Sameer Paranjpye resolved HADOOP-422.
-------------------------------------

    Resolution: Invalid

> ant test is failing with TestLocalDFS and TestMiniMRWithDFS failing
> -------------------------------------------------------------------
>
>                 Key: HADOOP-422
>                 URL: http://issues.apache.org/jira/browse/HADOOP-422
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>
> org.apache.hadoop.ipc.RPC$VersionMismatch: Protocol org.apache.hadoop.dfs.ClientProtocol version mismatch. (client = 1, server = 2)
>         at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:250)
>         at org.apache.hadoop.dfs.DFSClient.<init>(DFSClient.java:103)
>         at org.apache.hadoop.dfs.DistributedFileSystem.<init>(DistributedFileSystem.java:47)
>         at org.apache.hadoop.fs.FileSystem.getNamed(FileSystem.java:101)
>         at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:86)
>         at org.apache.hadoop.dfs.MiniDFSCluster.getFileSystem(MiniDFSCluster.java:146)
>         at org.apache.hadoop.dfs.TestLocalDFS.testWorkingDirectory(TestLocalDFS.java:42)
> This is the error I am getting when running ant test on TestLocalDFS.
> Its the same error (version mismatch) for TestMiniMRWithDFS.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 18:41:47 2006
Return-Path: 
 <hadoop-dev-return-3494-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54187 invoked from network); 31 Aug 2006 18:41:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 18:41:47 -0000
Received: (qmail 45988 invoked by uid 500); 31 Aug 2006 18:41:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45968 invoked by uid 500); 31 Aug 2006 18:41:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45947 invoked by uid 99); 31 Aug 2006 18:41:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:41:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:41:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 70A3C41001E
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 18:38:24 +0000 (GMT)
Message-ID: <28547648.1157049504458.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 11:38:24 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-431) default behaviour of dfsShell -rm
 should resemble 'rm -i', not 'rm -rf'
In-Reply-To: <15901306.1155057373927.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-431?page=all ]

Sameer Paranjpye reassigned HADOOP-431:
---------------------------------------

    Assignee: Wendy Chien

> default behaviour of dfsShell -rm should resemble 'rm -i', not 'rm -rf'
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-431
>                 URL: http://issues.apache.org/jira/browse/HADOOP-431
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>             Fix For: 0.6.0
>
>
> when using hadoop dfs -rm <path> the behaviour is like that of rm -rf.
> That's very dangerous.
> A better behaviour would require a confirmation and allow removal of files only by default. Optional flags would allow recursive and forced deleted.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 18:41:50 2006
Return-Path: 
 <hadoop-dev-return-3495-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54237 invoked from network); 31 Aug 2006 18:41:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 18:41:50 -0000
Received: (qmail 46445 invoked by uid 500); 31 Aug 2006 18:41:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46414 invoked by uid 500); 31 Aug 2006 18:41:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46405 invoked by uid 99); 31 Aug 2006 18:41:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:41:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:41:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F2D6C410025
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 18:38:27 +0000 (GMT)
Message-ID: <25405335.1157049507992.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 11:38:27 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-431) default behaviour of dfsShell -rm
 should resemble 'rm -i', not 'rm -rf'
In-Reply-To: <15901306.1155057373927.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-431?page=all ]

Sameer Paranjpye updated HADOOP-431:
------------------------------------

          Component/s: dfs
        Fix Version/s: 0.6.0
    Affects Version/s: 0.5.0

> default behaviour of dfsShell -rm should resemble 'rm -i', not 'rm -rf'
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-431
>                 URL: http://issues.apache.org/jira/browse/HADOOP-431
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Yoram Arnon
>         Assigned To: Wendy Chien
>             Fix For: 0.6.0
>
>
> when using hadoop dfs -rm <path> the behaviour is like that of rm -rf.
> That's very dangerous.
> A better behaviour would require a confirmation and allow removal of files only by default. Optional flags would allow recursive and forced deleted.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 18:41:52 2006
Return-Path: 
 <hadoop-dev-return-3496-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54251 invoked from network); 31 Aug 2006 18:41:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 18:41:52 -0000
Received: (qmail 46633 invoked by uid 500); 31 Aug 2006 18:41:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46613 invoked by uid 500); 31 Aug 2006 18:41:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46604 invoked by uid 99); 31 Aug 2006 18:41:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:41:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:41:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A5CEF410026
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 18:38:29 +0000 (GMT)
Message-ID: <11095788.1157049509676.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 11:38:29 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-105) DFS commands either do not support
 some popular unix commands or have inconsistent behaviors
In-Reply-To: <1681331066.1143251544705.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-105?page=all ]

Sameer Paranjpye resolved HADOOP-105.
-------------------------------------

    Fix Version/s: 0.6.0
       Resolution: Duplicate
         Assignee: Sameer Paranjpye

> DFS commands either do not support some popular unix commands or have inconsistent behaviors
> --------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-105
>                 URL: http://issues.apache.org/jira/browse/HADOOP-105
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>         Environment: all 
>            Reporter: Runping Qi
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.6.0
>
>
> Several issues.
> 1. DFS commandline does not support rmdir
> 2. When executing a command like dfs -rmdir PATH, it goes through silently, without warning that -rmdir is not supported
> 3. DFS -rm PATH works even though PATH is a non-empty directory, which is inconsistent with unix convention.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 18:56:51 2006
Return-Path: 
 <hadoop-dev-return-3497-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59444 invoked from network); 31 Aug 2006 18:56:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 18:56:51 -0000
Received: (qmail 63991 invoked by uid 500); 31 Aug 2006 18:56:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63974 invoked by uid 500); 31 Aug 2006 18:56:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63965 invoked by uid 99); 31 Aug 2006 18:56:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:56:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:56:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 16D23410027
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 18:53:29 +0000 (GMT)
Message-ID: <8864452.1157050409090.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 11:53:29 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-459) libhdfs leaks memory when writing to
 files
In-Reply-To: <12771302.1155876793902.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-459?page=all ]

Sameer Paranjpye updated HADOOP-459:
------------------------------------

        Fix Version/s: 0.6.0
    Affects Version/s: 0.5.0
             Assignee: Milind Bhandarkar

> libhdfs leaks memory when writing to files
> ------------------------------------------
>
>                 Key: HADOOP-459
>                 URL: http://issues.apache.org/jira/browse/HADOOP-459
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Christian Kunz
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.6.0
>
>
> hdfsWrite leaks memory when called repeatedly. The same probably applies to repeated reads using hdfsRead

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 18:58:46 2006
Return-Path: 
 <hadoop-dev-return-3498-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60106 invoked from network); 31 Aug 2006 18:58:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 18:58:46 -0000
Received: (qmail 68226 invoked by uid 500); 31 Aug 2006 18:58:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68206 invoked by uid 500); 31 Aug 2006 18:58:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68197 invoked by uid 99); 31 Aug 2006 18:58:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:58:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:58:45 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3A3F97142E7
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 18:55:24 +0000 (GMT)
Message-ID: <16732637.1157050524236.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 11:55:24 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-487) misspelt DFS host name gives null
 pointer exception in getProtocolVersion
In-Reply-To: <12991310.1156797082382.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-487?page=all ]

Sameer Paranjpye reassigned HADOOP-487:
---------------------------------------

    Assignee: Konstantin Shvachko

> misspelt DFS host name gives null pointer exception in getProtocolVersion
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-487
>                 URL: http://issues.apache.org/jira/browse/HADOOP-487
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Dick King
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>
> I'm trying to construct a DistributedFileSystem but I have the wrong hostname.
> It doesn't work.  It throws an exception.  Fair enough.  
> However, it throws a null pointer exception inside $Proxy0.getProtocolVersion, the code that checks whether we have the right protocol version, rather than giving us any exception we could understand or taking an exception in code to which we have sources so we have a way of understanding the problem.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 18:58:53 2006
Return-Path: 
 <hadoop-dev-return-3499-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60143 invoked from network); 31 Aug 2006 18:58:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 18:58:53 -0000
Received: (qmail 68448 invoked by uid 500); 31 Aug 2006 18:58:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68428 invoked by uid 500); 31 Aug 2006 18:58:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68419 invoked by uid 99); 31 Aug 2006 18:58:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:58:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:58:52 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C9A3B410020
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 18:55:25 +0000 (GMT)
Message-ID: <33024930.1157050525823.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 11:55:25 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-487) misspelt DFS host name gives null
 pointer exception in getProtocolVersion
In-Reply-To: <12991310.1156797082382.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-487?page=all ]

Sameer Paranjpye updated HADOOP-487:
------------------------------------

    Fix Version/s: 0.6.0

> misspelt DFS host name gives null pointer exception in getProtocolVersion
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-487
>                 URL: http://issues.apache.org/jira/browse/HADOOP-487
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Dick King
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.6.0
>
>
> I'm trying to construct a DistributedFileSystem but I have the wrong hostname.
> It doesn't work.  It throws an exception.  Fair enough.  
> However, it throws a null pointer exception inside $Proxy0.getProtocolVersion, the code that checks whether we have the right protocol version, rather than giving us any exception we could understand or taking an exception in code to which we have sources so we have a way of understanding the problem.
> -dk

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 19:40:30 2006
Return-Path: 
 <hadoop-dev-return-3500-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74566 invoked from network); 31 Aug 2006 19:40:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 19:40:30 -0000
Received: (qmail 8774 invoked by uid 500); 31 Aug 2006 19:39:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8063 invoked by uid 500); 31 Aug 2006 19:39:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7281 invoked by uid 99); 31 Aug 2006 19:39:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 12:39:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 12:12:49 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9353041001E
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 19:09:23 +0000 (GMT)
Message-ID: <26699913.1157051363600.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 12:09:23 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-95) dfs validation
In-Reply-To: <20690330.1142645739705.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-95?page=comments#action_12431947 ] 
            
Bryan Pendleton commented on HADOOP-95:
---------------------------------------

I think Eric's comment (http://issues.apache.org/jira/browse/HADOOP-95#action_12371188) is still important. But, probably a new issue to bring up. Ongoing validation/balancing/etc. are still problems - the "fsck" utility just covers the top-level problem.

> dfs validation
> --------------
>
>                 Key: HADOOP-95
>                 URL: http://issues.apache.org/jira/browse/HADOOP-95
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.1.0
>            Reporter: Hairong Kuang
>         Attachments: AccumulatingReducer.java, IOMapperAdapter.java, TestDFSIO.java, TestReadFS.java
>
>
> Dfs needs a validation operation similiar to fsck, so that we get to know the files that are corrupted and which data blocks are missing.
> Dfs namenode also needs to log more specific information such as which block is replication or is deleted. So when something goes wrong, we have a clue what has happened.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 20:05:45 2006
Return-Path: 
 <hadoop-dev-return-3501-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83458 invoked from network); 31 Aug 2006 20:05:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 20:05:45 -0000
Received: (qmail 81500 invoked by uid 500); 31 Aug 2006 20:05:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81482 invoked by uid 500); 31 Aug 2006 20:05:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81473 invoked by uid 99); 31 Aug 2006 20:05:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 13:05:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 13:05:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 927D5410010
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 20:02:23 +0000 (GMT)
Message-ID: <13536042.1157054543597.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 13:02:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-336) The task tracker should track disk
 space used, and have a configurable cap
In-Reply-To: <6076498.1151698949839.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-336?page=all ]

Owen O'Malley resolved HADOOP-336.
----------------------------------

    Fix Version/s: 0.4.0
       Resolution: Duplicate

this was fixed by HADOOP-27

> The task tracker should track disk space used, and have a configurable cap
> --------------------------------------------------------------------------
>
>                 Key: HADOOP-336
>                 URL: http://issues.apache.org/jira/browse/HADOOP-336
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: eric baldeschwieler
>             Fix For: 0.4.0
>
>
> We've been having problems where the task tracker is destabilizing HDFS by filling disks and then releasing them.  Various tasks can also interfere with each other this way.
> We should have a configurable max working space for a task (and allow the setting of lower per task limits).  The task tracker should track use against this limit and terminate a job if it overruns it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 21:03:46 2006
Return-Path: 
 <hadoop-dev-return-3502-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3204 invoked from network); 31 Aug 2006 21:03:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 21:03:46 -0000
Received: (qmail 95345 invoked by uid 500); 31 Aug 2006 21:03:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95170 invoked by uid 500); 31 Aug 2006 21:03:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95161 invoked by uid 99); 31 Aug 2006 21:03:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:03:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:03:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E45CD410017
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 21:00:23 +0000 (GMT)
Message-ID: <20731135.1157058023932.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 14:00:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-196) Fix buggy uselessness of
 Configuration( Configuration other) constructor
In-Reply-To: <32654100.1146779418355.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-196?page=all ]

Doug Cutting updated HADOOP-196:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.6.0
       Resolution: Fixed

I just committed this.  Thanks, Sami!

> Fix buggy uselessness of Configuration( Configuration other) constructor
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-196
>                 URL: http://issues.apache.org/jira/browse/HADOOP-196
>             Project: Hadoop
>          Issue Type: Bug
>          Components: conf
>    Affects Versions: 0.5.0
>            Reporter: alan wootton
>             Fix For: 0.6.0
>
>         Attachments: ConfigConstructorFix.patch, hadoop-conf-patch.txt
>
>
> The constructor 
> public Configuration(Configuration other) 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 21:12:46 2006
Return-Path: 
 <hadoop-dev-return-3504-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6885 invoked from network); 31 Aug 2006 21:12:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 21:12:46 -0000
Received: (qmail 19010 invoked by uid 500); 31 Aug 2006 21:12:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18984 invoked by uid 500); 31 Aug 2006 21:12:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18932 invoked by uid 99); 31 Aug 2006 21:12:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:12:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:12:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7BBDA41001F
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 21:09:23 +0000 (GMT)
Message-ID: <17866592.1157058563504.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 14:09:23 -0700 (PDT)
From: "Hairong Kuang (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-499) Avoid the use of Strings to improve
 the  performance of hadoop streaming
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Avoid the use of Strings to improve the  performance of hadoop streaming
------------------------------------------------------------------------

                 Key: HADOOP-499
                 URL: http://issues.apache.org/jira/browse/HADOOP-499
             Project: Hadoop
          Issue Type: Improvement
          Components: contrib/streaming
    Affects Versions: 0.5.0
            Reporter: Hairong Kuang
         Assigned To: Hairong Kuang
             Fix For: 0.6.0


In hadoop streaming, a record is represented as a String for  I/O and is encoded as UTF8 for map/reduce. A record has to be converted between String and UTF8 back and forth multiple times and  this wastes CPU time. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 21:12:45 2006
Return-Path: 
 <hadoop-dev-return-3503-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6861 invoked from network); 31 Aug 2006 21:12:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 21:12:45 -0000
Received: (qmail 18844 invoked by uid 500); 31 Aug 2006 21:12:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18822 invoked by uid 500); 31 Aug 2006 21:12:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18813 invoked by uid 99); 31 Aug 2006 21:12:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:12:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:12:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5C864410010
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 21:09:23 +0000 (GMT)
Message-ID: <13796402.1157058563376.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 14:09:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-29) JobConf newInstance() method imposes
 a default constructor
In-Reply-To: <1354135139.1139491797405.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-29?page=comments#action_12431982 ] 
            
Doug Cutting commented on HADOOP-29:
------------------------------------

Wouldn't it be simpler to just add a default constructor to Configured?

> JobConf newInstance() method imposes a default constructor
> ----------------------------------------------------------
>
>                 Key: HADOOP-29
>                 URL: http://issues.apache.org/jira/browse/HADOOP-29
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Jerome Charron
>            Priority: Minor
>         Attachments: HADOOP-29.patch
>
>
> The Nutch parse command fails, because the ParseSegment class has no default constructor.
> However, ParseSegment extends Configured, so it can be directly instanciated with a Configuration parameter.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Aug 31 21:28:44 2006
Return-Path: 
 <hadoop-dev-return-3505-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13176 invoked from network); 31 Aug 2006 21:28:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 21:28:44 -0000
Received: (qmail 63007 invoked by uid 500); 31 Aug 2006 21:28:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62990 invoked by uid 500); 31 Aug 2006 21:28:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62981 invoked by uid 99); 31 Aug 2006 21:28:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:28:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:28:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 59E5B410010
	for <hadoop-dev@lucene.apache.org>; Thu, 31 Aug 2006 21:25:22 +0000 (GMT)
Message-ID: <17559761.1157059522365.JavaMail.jira@brutus>
Date: Thu, 31 Aug 2006 14:25:22 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-500) Datanode should scan blocks
 continuously to detect bad blocks / CRC errors
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Datanode should scan blocks continuously to detect bad blocks / CRC errors
--------------------------------------------------------------------------

                 Key: HADOOP-500
                 URL: http://issues.apache.org/jira/browse/HADOOP-500
             Project: Hadoop
          Issue Type: Improvement
            Reporter: eric baldeschwieler


This is a spin-off of the discussion in HADOOP-95

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

